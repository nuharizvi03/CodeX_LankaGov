"use strict";(self.edgeChromiumWebpackChunks=self.edgeChromiumWebpackChunks||[]).push([["common"],{18833:function(e,t,n){n.d(t,{w:function(){return r}});var i=n(98130);class r{constructor(e){this.styleOverride=e}connectedCallback(e){const{source:t}=e;"zh-cn"===i.jG.CurrentMarket?t.$fastController.addStyles(this.styleOverride):t.$fastController.removeStyles(this.styleOverride)}}},55793:function(e,t,n){n.d(t,{$G:function(){return g},N1:function(){return h},WJ:function(){return d},Zd:function(){return m},hM:function(){return l},pC:function(){return u},pp:function(){return s},uO:function(){return y},vG:function(){return p},w_:function(){return a},x8:function(){return c},xW:function(){return f}});var i=n(78923),r=n(29717),o=n(42821);const a=i.i`
    :host {
        --cstm-foreground-ctrl-neutral-primary-rest-filter: brightness(0) saturate(100%) invert(92%) sepia(2%) saturate(1678%) hue-rotate(190deg) brightness(95%) contrast(96%);
        --cstm-foreground-ctrl-neutral-primary-pressed-filter: brightness(0) saturate(100%) invert(64%) sepia(10%) saturate(836%) hue-rotate(188deg) brightness(89%) contrast(89%);
        --cstm-foreground-ctrl-neutral-secondary-rest-filter: brightness(0) saturate(100%) invert(56%) sepia(80%) saturate(138%) hue-rotate(190deg) brightness(85%) contrast(82%);
        --cstm-subtle-button-border-color: rgba(255, 255, 255, 0.08);
    }
`,s=i.i`
    :host {
        --cstm-border-on-squircle-px: 1px;
        --cstm-foreground-ctrl-neutral-primary-rest-filter: brightness(0) saturate(100%) invert(10%) sepia(8%) saturate(616%) hue-rotate(341deg) brightness(94%) contrast(88%);
        --cstm-foreground-ctrl-neutral-primary-pressed-filter: brightness(0) saturate(100%) invert(30%) sepia(4%) saturate(768%) hue-rotate(329deg) brightness(97%) contrast(86%);
        --cstm-foreground-ctrl-neutral-secondary-rest-filter: brightness(0) saturate(100%) invert(39%) sepia(2%) saturate(1223%) hue-rotate(335deg) brightness(91%) contrast(90%);
        --cstm-subtle-button-border-color: rgba(0, 0, 0, 0.08);
    }
`.withBehaviors((0,r.Uu)(a)),c="var(--cstm-foreground-ctrl-neutral-primary-rest-filter)",d="var(--cstm-foreground-ctrl-neutral-primary-pressed-filter)",u="var(--cstm-foreground-ctrl-neutral-secondary-rest-filter)",l=`linear-gradient(0deg, ${o.L0w} 0%, ${o.L0w} 100%), \n    linear-gradient(0deg, ${o.VT5} 0%, ${o.VT5} 100%), \n    linear-gradient(0deg, ${o.Gpk} 0%, ${o.Gpk} 100%), ${o.$4b}`,p=`${o.lVi} ${o.ta8} ${o.t1q} 0px ${o.vrc}, \n    ${o.VOk} ${o.Zrt} ${o.$E0} 0px ${o.Emg}`,h="var(--cstm-border-on-squircle-px)",g=`${o.nLR} ${o.VgI} ${o.RDz} ${o.rZ0} ${o.mcM} inset, \n    ${o.mZ$} ${o.c2e} ${o.Yqc} 0px ${o.MMn}`,f=`${o.tjg} ${o.P43} ${o.P9S} 0px ${o.C9}, \n    0px ${o.kNE} ${o.tve} 0px ${o.Wv_}`,m="var(--cstm-subtle-button-border-color)",y=`${o.lIy} ${o.uOF} ${o.K2B} 0px ${o.ung}`},49804:function(e,t,n){n.d(t,{Gc:function(){return o},K:function(){return d},Vl:function(){return p},Y3:function(){return c},aA:function(){return s},fK:function(){return a},jt:function(){return l},os:function(){return u},uf:function(){return i}});var i,r=n(35114);!function(e){e[e.ALL=3]="ALL",e[e.VP=1]="VP",e[e.TTVR=2]="TTVR"}(i||(i={}));const o=.08,a="row",s="column";var c;!function(e){e.FeedResponseReceived="FeedResponseReceived",e.FeedUpdated="FeedUpdated",e.FeedProcessed="FeedProcessed",e.FeedResizeStart="FeedResizeStart",e.FeedUpdateCardsPreMap="FeedUpdateCardsPreMap",e.FeedUpdateCards="FeedUpdateCards",e.FeedPreviewReceived="FeedPreviewReceived",e.FeedUpdateSection="FeedUpdateSection",e.FeedCardMappingError="FeedCardMappingError",e.FeedProcessorReady="FeedProcessorReady"}(c||(c={}));const d={[r.Kx.C1]:1,[r.Kx.C2]:2,[r.Kx.C3]:3,[r.Kx.C4]:4,[r.Kx.C5]:5,[r.Kx.C6]:6},u={[r.Kx.C1]:496,[r.Kx.C2]:756,[r.Kx.C3]:408,[r.Kx.C4]:408,[r.Kx.C5]:408,[r.Kx.C6]:408},l=344,p={CasualGamesCarousel:440,TopicFeed:400}},56717:function(e,t,n){n.d(t,{$6:function(){return x},$W:function(){return V},BA:function(){return v},Bd:function(){return i},C_:function(){return d},E9:function(){return Q},GL:function(){return s},H1:function(){return G},HU:function(){return q},IM:function(){return R},IX:function(){return oe},Iy:function(){return ae},J8:function(){return j},Jh:function(){return F},KG:function(){return ee},Kh:function(){return P},MK:function(){return ne},MY:function(){return fe},Mj:function(){return b},NL:function(){return _},PK:function(){return ce},Pj:function(){return k},Q3:function(){return h},QD:function(){return w},QH:function(){return S},QT:function(){return ve},Sd:function(){return $},Su:function(){return X},TG:function(){return le},TN:function(){return me},Vq:function(){return O},WT:function(){return c},Y:function(){return N},Y7:function(){return g},Yz:function(){return he},ZX:function(){return B},ZZ:function(){return W},_m:function(){return ye},cW:function(){return C},eH:function(){return I},f9:function(){return ie},hL:function(){return H},hR:function(){return p},hw:function(){return r},iN:function(){return l},iy:function(){return pe},j0:function(){return M},kt:function(){return Z},l_:function(){return de},mX:function(){return J},n9:function(){return te},nP:function(){return z},nQ:function(){return ue},o2:function(){return L},pV:function(){return K},pt:function(){return Y},qC:function(){return re},qK:function(){return o},qd:function(){return T},rQ:function(){return A},rY:function(){return u},si:function(){return f},t3:function(){return a},tr:function(){return se},u9:function(){return U},vV:function(){return y},y1:function(){return m},yY:function(){return ge},yk:function(){return E},z5:function(){return D},zR:function(){return Se}});const i="#FFFFFF",r="#212429",o="#2169EB",a="#FFF",s="#FFF0EF",c="#FF9F99",d="#EF6864",u="#D63F40",l="#C0413F",p="#3F2524",h="#34A84E",g="#007F30",f="#242424",m="#FFF",y="rgba(0, 0, 0, 0.1)",v="rgba(0, 0, 0, 0.15)",S="#FFFFFF",w="#ECF4FF",b="rgba(255, 255, 255, 0.6)",C="#000000",T="#23272B",k="#FFFFFF",P="#EDF2F9",A="#DADEE5",I="rgba(255, 255, 255, 0.1)",E="rgba(255, 255, 255, 0.15)",R="#1B1D1F",M="#212D3D",x="rgba(0, 0, 0, 0.6)",L="rgba(0, 0, 0, 0.4)",F="rgba(0, 30, 68, 0.1)",D="#FFFFFF",O="#FFFFFF",_="#8D9197",N="#6E7278",B="#1E2024",U="#FFFFFF",$="rgba(236, 246, 255, 0.05)",H="rgba(236, 246, 255, 0.8)",W="#000000",G="#26292E",V="#35383D",q="#F6F9FC",j="#EAEFF5",z="rgba(0, 0, 0, 0.2)",K="#F0F4FF",Q="#26292E",J="#F3F7FB",X="#24262A",Y="#474B50",Z="#C3C8CE",ee="#C6CBD1",te="#5A5E63",ne="brightness(0) saturate(100%) invert(90%) sepia(9%) saturate(164%) hue-rotate(173deg) brightness(90%) contrast(87%)",ie="brightness(0) saturate(100%) invert(28%) sepia(2%) saturate(1591%) hue-rotate(173deg) brightness(102%) contrast(97%);",re="#EFF4FA",oe="#E7EBF1",ae="#D6DAE0",se="#292C33",ce="#2F333A",de="#3D4047",ue="#7E1E26",le="#FFF0EF",pe="#33302E",he="#E3CBBC",ge="#FEE5CE",fe="#1D2439",me="#24282F",ye="#F6FAFE",ve="#8D9198",Se="#6E7279"},26682:function(e,t,n){n.d(t,{Fv:function(){return r},gQ:function(){return i}});const i="selectedNavItemClicked";class r{constructor(){this.supports3DContent=!1}attemptNavItemChange(e,t){return!!this.superNavChangeCallback&&(this.superNavChangeCallback(e,t),!0)}disconnectSuperNav(){this.superNavChangeCallback=void 0}getForceSelectedNavItemId(){return this.forceSelectedNavItemId}getSupports3DContent(){return this.supports3DContent}static getInstance(e){return r.instance||(r.instance=new r),e&&(r.instance.superNavChangeCallback=e),r.instance}registerForceSelectedNavItemId(e){this.forceSelectedNavItemId=e}registerSupports3DContent(e){this.supports3DContent=e}}},89133:function(e,t,n){n.r(t),n.d(t,{BackgroundImageWC:function(){return de},BackgroundImageWCInlineStyles:function(){return We},BackgroundImageWCStyles:function(){return Ge},BackgroundImageWCTemplate:function(){return Oe},EventName:function(){return Ve},ToolingInfo:function(){return qe},cacheCMSWeeklyImages:function(){return oe},isErrorImageUrl:function(){return re}});var i=n(33940),r=n(5302),o=n(33779),a=n(80986);const s=a.K.Dialog.toString(),c={dataDark:[{attribution:"Microsoft",image:{i100:"AA1yQQ8v",i240:"AA1yQQ8v",i720:"AA1yQIZK",i1080:"AA1yQLvP",i1440:"AA1yQLvR",i2160:"AA1yQLvU"}},{attribution:"Microsoft",image:{i100:"AA1yQSyx",i240:"AA1yQSyx",i720:"AA1yQGXp",i1080:"AA1yQNKa",i1440:"AA1yQIZM",i2160:"AA1yQGXt"}},{attribution:"Microsoft",image:{i100:"AA1yQLvQ",i240:"AA1yQLvQ",i720:"AA1yQEJm",i1080:"AA1yQNKc",i1440:"AA1yQIZP",i2160:"AA1yQEJo"}},{attribution:"Microsoft",image:{i100:"AA1yQIZL",i240:"AA1yQIZL",i720:"AA1yQQ8y",i1080:"AA1yQQ8A",i1440:"AA1yQEJn",i2160:"AA1yQNKd"}},{attribution:"Microsoft",image:{i100:"AA1yQQ8w",i240:"AA1yQQ8w",i720:"AA1yQQ8x",i1080:"AA1yQQ8z",i1440:"AA1yQLvS",i2160:"AA1yQNKb"}},{attribution:"Microsoft",image:{i100:"AA1yQIZJ",i240:"AA1yQIZJ",i720:"AA1yQC58",i1080:"AA1yQC59",i1440:"AA1yQC5a",i2160:"AA1yQC5c"}},{attribution:"Microsoft",image:{i100:"AA1yQNK9",i240:"AA1yQNK9",i720:"AA1yQGXq",i1080:"AA1yQGXs",i1440:"AA1yQGXr",i2160:"AA1yQLvT"}}],dataLight:[{attribution:"Microsoft",image:{i100:"AA1yQSwh",i240:"AA1yQSwh",i720:"AA1yQC3g",i1080:"AA1yQLta",i1440:"AA1yQLta",i2160:"AA1yQC3l"}},{attribution:"Microsoft",image:{i100:"AA1yQC3h",i240:"AA1yQC3h",i720:"AA1yQLt9",i1080:"AA1yQEG0",i1440:"AA1yQGVM",i2160:"AA1yQGVN"}},{attribution:"Microsoft",image:{i100:"AA1yQEG3",i240:"AA1yQEG3",i720:"AA1yQNHj",i1080:"AA1yQLtb",i1440:"AA1yQNHn",i2160:"AA1yQLtg"}},{attribution:"Microsoft",image:{i100:"AA1yQEG1",i240:"AA1yQEG1",i720:"AA1yQGVL",i1080:"AA1yQEG4",i1440:"AA1yQEG5",i2160:"AA1yQLtf"}},{attribution:"Microsoft",image:{i100:"AA1yQC3j",i240:"AA1yQC3j",i720:"AA1yQNHl",i1080:"AA1yQQ5s",i1440:"AA1yQNHo",i2160:"AA1yQIWR"}},{attribution:"Microsoft",image:{i100:"AA1yQGVK",i240:"AA1yQGVK",i720:"AA1yQIWO",i1080:"AA1yQC3i",i1440:"AA1yQC3k",i2160:"AA1yQLte"}},{attribution:"Microsoft",image:{i100:"AA1yQIWQ",i240:"AA1yQIWQ",i720:"AA1yQLtd",i1080:"AA1yQSwj",i1440:"AA1yQNHm",i2160:"AA1yQSwi"}}]};var d=n(12686),u=n(70041),l=n(523),p=n(42924),h=n(24032),g=n(72368),f=n(98130),m=n(32808),y=n(13218),v=n(34934),S=n(58621),w=n(59942),b=n(42729),C=n(28951),T=n(15598),k=n(81586),P=n(44132),A=n(58968),I=n(99452),E=n(42590),R=n(26197),M=n(98604),x=n(41281),L=n(26538),F=n(86117),D=n(98303),O=n(21215),_=n(22680),N=n(73344),B=n(37878),U=n(85663),$=n(26156),H=n(40860),W=n(82928),G=n(34254),V=n(14969);class q{constructor(e,t){if(this.dayNow=(new Date).getDay(),this.firstFrameHidden=!1,this.isEnergySaverMode=!1,this.isGalleryEnabled=!1,this.isPlaying=!1,this.isReducedMotionActive=!1,this.isTomorrowsVideoCached=!1,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)"),this.showVideo=!1,this.showToast=!1,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.batteryChargingChange=()=>{this.battery.charging&&(this.currentTrigger?this.playVideo("Battery"):this.playVideo("Timer"))},this.playVideo=async e=>{!this.config.isTest&&this.showVideo&&e&&"Button"===e&&(await this.batteryPromise,e!==this.currentTrigger&&"Button"!==e||this.battery&&!this.battery.charging&&"Button"!==e||this.isPlaying||this.isReducedMotionActive&&"Button"!==e?this.battery.charging||(this.currentTrigger="Battery"):(0,V.eC)().then((()=>{const e=1e3*this.config.pauseTime;this.videoTimer&&this.videoTimer.timer&&clearTimeout(this.videoTimer.timer),this.isGalleryEnabled&&this.isEnergySaverMode&&!this.isBandwidthAdequateForVideo()?this.pauseVideo("Network"):(this.videoTimer.remainingTime<=0&&(this.videoTimer.remainingTime=e),this.videoTimer.startTime=Date.now(),this.videoTimer.timer=n.g.setTimeout((()=>{(this.isGalleryEnabled||!this.battery.charging)&&(!this.isGalleryEnabled||this.isEnergySaverMode)?this.pauseVideo("Timer"):this.playVideo("Timer")}),this.videoTimer.remainingTime),this.handleVideoPlay())})))},this.handleVideoPlay=()=>{this.isPlaying=!1,requestAnimationFrame((()=>{this.isReducedMotionActive=!1,this.backgroundImageWC.ref_video.play().then((()=>{this.isPlaying=!0})).catch((e=>{(0,o.OO)(e,r.N1Y,"Failed to trigger play.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo),this.isPlaying=!1})).finally((()=>{this.backgroundImageWC.updateProperties()}))}))},this.pauseVideo=e=>{if(this.isPlaying&&this.showVideo){this.currentTrigger=e,this.videoTimer&&this.videoTimer.timer&&(clearTimeout(this.videoTimer.timer),this.videoTimer.remainingTime-=Date.now()-this.videoTimer.startTime),this.isPlaying=!1,this.backgroundImageWC.updateProperties();try{this.backgroundImageWC.ref_video.pause()}catch(e){(0,o.OO)(e,r.FtH,"Failed to trigger pause.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo)}}},this.reducedMotionChange=()=>{this.isReducedMotionActive=this.prefersReducedMotion.matches},this.showToastMessage=(e,t)=>{this.showToast=!0,this.toastMessage=e,t&&this.pauseVideo("Battery"),this.shouldSkipShowToast()?this.hideToastMessage():(this.backgroundImageWC.updateProperties(),n.g.setTimeout((()=>{this.hideToastMessage()}),5e3))},this.hideToastMessage=()=>{this.showToast=!1,this.toastMessage=null,this.backgroundImageWC.updateProperties()},this.shouldSkipShowToast=()=>{const e="off"===this.backgroundImageWC.chromiumPageSettingsState?.selectedQuickLinksDisplaySetting;return"always"===this.backgroundImageWC.chromiumPageSettingsState.selectedFeedDisplaySetting&&e},this.config=e,this.backgroundImageWC=t,!(0,O.N)())return;if(this.topSitesLayoutDataConnector=(0,W.K0)(l.hz),this.isGalleryEnabled=!t.config.disableBackgroundGallery&&B.p.getBackgroundGalleryEligibility(),this.isGalleryEnabled){this.backgroundDataConnector=(0,W.K0)(l.xE);const e=this.backgroundDataConnector.getCurrentState();this.isEnergySaverMode=!(0,U.isNullOrUndefined)(e)&&"energySaver"===e.selectedVideoSetting,x.f.videoSettingsUpdated.registerObserver((e=>{const t=e&&e.params;if(!t||!t.length)return;const n=t[0];this.isEnergySaverMode="energySaver"===n}))}this.videoTimer={remainingTime:-1,startTime:-1,timer:null},this.assignVideoSchedule();const i=window&&window.navigator;this.deviceLogicalProcessors=i?i.hardwareConcurrency:-1,this.deviceMemoryGB=i?i.deviceMemory:-1,this.batteryPromise=i.getBattery().then((e=>{this.battery=e})),(0,$.I9)()?this.showVideo=!1:(this.showVideo=this.shouldShowVideo(),this.showVideo&&this.setVideoAndMuseumCardProperties(),this.config.isTest||Promise.all([(0,F.e3)(),(0,G.F_)()]).then((()=>{this.cacheNextVideo()})))}setVideoAndMuseumCardProperties(){this.defineResolution(),this.videoSource=this.getVideoURL(this.videoId),this.firstFrameSource=this.getFirstFrameURL(this.videoId),this.firstFrameId=this.getFirstFrameId(this.videoId);const e="video"+this.videoId;if(!this.videoSource||!this.firstFrameSource)return;const t=this.backgroundImageWC.config.localizedStrings?.video_querys?.[e];this.museumCard={credits:this.config.data[this.videoId].attribution,isDisplayed:!0,title:this.backgroundImageWC.config.localizedStrings?.video_titles?.[e],titleURL:t?(0,w.h_)(`https://www.bing.com/search?q=${t}&mkt={localeCode}&form=NTBGIM`):null}}assignBackgroundUsingIndex(e){window.isSSREnabled&&this.defineResolution(),this.videoId=Number(e),this.setVideoAndMuseumCardProperties()}getCurrentBackgroundVideoId(){return this.videoId}assignVideoSchedule(){const e=this.getVideoData();e&&e.schedule?(this.schedule=e.schedule,this.scheduleFixed=e.scheduleFixed,this.checkAndGenerateVideoSchedule(),this.reRandomizeSchedule(e)):this.generateVideoSchedule()}checkAndGenerateVideoSchedule(){for(let e=0;e<this.schedule.length;e++){const t=this.schedule[e];if(this.config.data[t]&&this.config.data[t].removeContent||t>-1&&!this.validateCurrentIndex(t,!0)){this.generateVideoSchedule();break}}}validateCurrentIndex(e,t=!1){const n=!(0,U.isNullOrUndefined)(e)&&e<this.config.data.length&&!!this.config.data[e];return!n&&t&&(0,o.H)(r.FEC,"Error validating video configuration index: "+e),n}cacheNextVideo(){const e=new Date;e.setDate(e.getDate()+1);const t=e.getDay(),n=this.getVideoData();if(!(n&&n.cachedVideoId===this.schedule[t]||B.p.getDailyRotationOnlySimpleImages()&&this.backgroundImageWC.config.simpleImages)&&this.schedule[t]>=0&&this.config.enableFeature){const e=this.schedule[t];this.eventsAbortController&&this.eventsAbortController.abort();try{const t=this.getVideoURL(e),i=this.getFirstFrameURL(e);if(!t||!i)return;this.eventsAbortController=new AbortController;const r=this.eventsAbortController.signal;fetch(t,{signal:r}),fetch(i,{signal:r}),this.isTomorrowsVideoCached=!0,this.storeVideoData({cachedVideoId:e,lastUpdatedTime:n?.lastUpdatedTime,schedule:n?.schedule,scheduleFixed:n?.scheduleFixed})}catch(t){(0,o.H)(r.LWq,"Video caching failed. Video url: "+this.getVideoURL(e)+" First frame url: "+this.getFirstFrameURL(e),"Error: "+t)}}}defineResolution(){const e=new D.fH,t=(0,D.Nd)(e.data.innerHeight,"innerHeight"),n=(0,D.Nd)(e.data.innerWidth,"innerWidth"),i=(0,_.x_)()||1,r=(window.screen&&window.screen.height?window.screen.height:t+150)*i,o=(window.screen&&window.screen.width?window.screen.width:n)*i;this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440",P.M0.addOrUpdateTmplProperty("bkgdRes",this.currentResolution)}error(){this.showVideo=!1}generateVideoSchedule(){const e=[];for(let t=0;t<this.config.data.length;t++)e[t]=!1;this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1];for(let t=0;t<this.config.videosPerWeek;t++){let n=Math.floor(Math.random()*this.config.data.length);if(e[n]||!this.config.data[n]||this.config.data[n].skipRotation||this.config.data[n].removeContent)do{n===this.config.data.length-1?n=0:n++}while(e[n]||!this.config.data[n]||this.config.data[n].skipRotation||this.config.data[n].removeContent);this.schedule[t]=n,e[n]=!0}(0,H.Z)(this.schedule),this.scheduleFixed=this.schedule;const t=this.getVideoData();this.storeVideoData({cachedVideoId:t?.cachedVideoId?t.cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}getFirstFrameURL(e){return(0,N.zz)(this.getFirstFrameId(e),{width:0,height:0,enableDpiScaling:!1})}getFirstFrameId(e){if(!this.config.data[e])return null;let t=this.config.data[e].firstFrame[`i${this.currentResolution}`];return(0,O.N)()&&(t=this.isGalleryEnabled?this.isEnergySaverMode?this.config.data[e].firstFrame.i720:t:this.shouldReduceTo1080()?this.config.data[e].firstFrame.i1080:t),t}getVideoData(){try{return(0,T.$o)().getObject(this.storageKey)}catch(e){return(0,o.H)(r.eEQ,"Local storage for video data failed."),null}}getVideoURL(e){if(!this.config.data[e])return null;let t=this.config.data[e].video[`v${this.currentResolution}`];return(0,O.N)()&&(t=this.isGalleryEnabled?this.isEnergySaverMode?this.config.data[e].video.v720:t:this.shouldReduceTo1080()?this.config.data[e].video.v1080:t),(0,N.QG)(t)}removeVideoForToday(){const e=this.getVideoData();e&&e.schedule&&(e.schedule[this.dayNow]=-1,this.showVideo=!1,this.storeVideoData(e))}removeVideoFromLocalStorage(e){const t=this.getVideoData(),n=Number(e);let i=!1;if(t&&t.schedule){for(let e=0;e<t.schedule.length;e++)t.schedule[e]===n&&(t.schedule[e]=-1,i=e===this.dayNow);this.storeVideoData(t)}return i}reRandomizeSchedule(e){e.lastUpdatedTime<this.timeNow-6048e5&&this.generateVideoSchedule()}shouldShowVideo(){const e=B.p.getBackgroundSettingsPreferencesCache(),t=this.backgroundImageWC.dailyRotationEnabled(e);return!(!this.backgroundImageWC.ssrRotationMismatch||!t||"Video"!==this.backgroundImageWC.ssrBackgroundMetadata.provider)}shouldReduceTo1080(){const e=this.isBandwidthAdequateForVideo(),t=this.deviceMemoryGB>=4;return(!e||!t)&&(this.currentResolution="1080",!0)}isBandwidthAdequateForVideo(){return"4g"===window.navigator.connection.effectiveType}storeVideoData(e){try{(0,T.$o)().setObject(this.storageKey,e)}catch(e){return void(0,o.H)(r.ybt,"Local storage for video data failed.")}}unloadVideo(){this.batteryPromise.then((()=>{this.battery.removeEventListener("chargingchange",this.batteryChargingChange)})),this.prefersReducedMotion.removeEventListener("change",this.reducedMotionChange)}videoLoaded(){this.firstFrameHidden=!0,this.backgroundImageWC.updateProperties();const e=this.getVideoData();e&&e.cachedVideoId<0&&P.M0.addOrUpdateTmplString("videoFirstLoad"),this.isReducedMotionActive=this.prefersReducedMotion.matches,!this.isReducedMotionActive&&this.deviceMemoryGB>=4&&(this.isPlaying=!1,this.playVideo("Timer")),this.batteryPromise.then((()=>{this.battery.addEventListener("chargingchange",this.batteryChargingChange)})),this.prefersReducedMotion.addEventListener("change",this.reducedMotionChange)}}var j=n(29715),z=n(68178),K=n(89268),Q=n(78170),J=n(32045),X=n(22745);class Y{constructor(e,t){this.showImageInRotation=!1,this.dayNow=(new Date).getDay(),this.darkModeQuery=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),this.config=e,this.backgroundImageWC=t,(0,O.N)()&&(this.cmsSize=B.p.getCMSImageSize(),this.showImageInRotation=this.shouldShowImageInRotation(),this.showImageInRotation&&this.setImageAndMuseumCardProperties())}shouldShowImageInRotation(){if(this.backgroundImageWC.simpleSchedule){const e=this.backgroundImageWC.simpleSchedule,t=e&&e[this.dayNow];if(t>-1&&this.validateCurrentIndex(t)&&this.config?.data)return this.imageId=B.p.getDefaultBackground()?0:e[this.dayNow],!0}return!1}showAbstractImageRotation(e){this.backgroundImageWC.config.enableAbstractImages&&e&&(this.imageId=e+this.dayNow,this.imageSource=this.getNTPAbstractImageURL(this.dayNow))}getLocTitleKey(){return this.imageId<=this.cmsSize?`image${this.imageId}`:`simple${this.imageId}`}setImageAndMuseumCardProperties(){if(this.defineResolution(),this.imageSource=this.getImageURL(this.imageId),this.imageName=this.getImageName(this.imageId),!this.imageSource)return;const e=this.getLocTitleKey(),t=this.backgroundImageWC.config.localizedStrings?.cmsimage_querys?.[e];this.museumCard={credits:this.config?.data[this.imageId]?.attribution||"",isDisplayed:!0,title:this.backgroundImageWC.config.localizedStrings?.cmsimage_titles?.[e]||"",titleURL:t?(0,w.h_)(`https://www.bing.com/search?q=${t}&mkt={localeCode}&form=NTBGIM`):null}}assignBackgroundUsingIndex(e){this.imageId=Number(e),this.setImageAndMuseumCardProperties()}assignHeroBackground(){this.defineResolution();const e=C.cX.getQueryParameterByName("assetId",(0,_.zp)()),t=Number(this.currentResolution);let n;n=isNaN(t)?{width:0,height:0,enableDpiScaling:!1}:{width:t/9*16,height:t,enableDpiScaling:!1},this.imageSource=(0,N.zz)(e,n)}assignHolidayBackground(e){this.defineResolution();const{enableEventGleamImage:t}=this.backgroundImageWC.config;this.imageSource=t?this.getEventImageURL(e):this.getHolidayImageURL(),this.imageSource&&(this.museumCard={credits:this.backgroundImageWC.config.holidayImage.attribution,isDisplayed:!0,title:null,titleURL:null})}getHolidayImageURL(){if(!this.backgroundImageWC.config.holidayImage)return null;const{holidayImage:e}=this.backgroundImageWC.config,t=this.darkModeQuery.matches?e.dark:e.light;return(0,N.zz)(t[`i${this.currentResolution}`],{width:0,height:0,enableDpiScaling:!1})}getEventImageURL(e){const t=e?{DarkGleamUrl:this.backgroundImageWC.ssrBackgroundMetadata.dark,LightGleamUrl:this.backgroundImageWC.ssrBackgroundMetadata.light}:this.backgroundImageWC.eventGleam;return t?this.darkModeQuery.matches?t.DarkGleamUrl:t.LightGleamUrl:null}getImageURL(e){return(0,N.zz)(this.getImageName(e),{width:0,height:0,enableDpiScaling:!1})}getImageName(e){if(!this.config?.data[e])return null;const t=this.config?.data[e].image[`i${this.currentResolution}`];return t}getNTPAbstractImageURL(e){const t=(this.darkModeQuery.matches?c.dataDark:c.dataLight)[e].image[`i${this.currentResolution}`];return t?(0,N.zz)(t,{width:0,height:0,enableDpiScaling:!1}):null}defineResolution(){const e=new D.fH,t=(0,D.Nd)(e.data.innerHeight,"innerHeight"),n=(0,D.Nd)(e.data.innerWidth,"innerWidth"),i=(0,_.x_)()||1,r=(window.screen&&window.screen.height?window.screen.height:t+150)*i,o=(window.screen&&window.screen.width?window.screen.width:n)*i;this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440",P.M0.addOrUpdateTmplProperty("bkgdRes",this.currentResolution)}getCurrentResolution(){return this.currentResolution}validateCurrentIndex(e,t=!1){this.config&&this.backgroundImageWC?.config&&this.backgroundImageWC.config.simpleImages&&this.config?.data?.length!=this.backgroundImageWC.config.cmsImage?.data?.length&&(this.config.data=this.backgroundImageWC.config.cmsImage.data);const n=!(0,U.isNullOrUndefined)(e)&&e<this.config?.data.length&&!!this.config?.data[e];return this.backgroundImageWC?.config&&this.backgroundImageWC.config.noIrisBackgrounds&&!n?(B.p.setDefaultBackground(!0),t&&(0,o.H)(r.FEC,"Error validating CMS Image configuration index: "+e+". Using default background."),!0):(!n&&t&&(0,o.H)(r.FEC,"Error validating CMS Image configuration index: "+e),n)}}var Z=n(79089),ee=n(10545),te=n(16614),ne=n(15675),ie=n(5756);function re(e,t,n){return[(0,N.zz)(t,{width:0,height:0,enableDpiScaling:!1}),(0,N.zz)(n,{width:0,height:0,enableDpiScaling:!1})].includes(e)}function oe(e,t){if(!(0,O.N)())return;const n=e.map((e=>t.getImageURL(e)));for(const e of n)if(e?.length>0){const t=new Image;t.src=e,t.setAttribute("fetchpriority","low")}}var ae=n(70970),se=n(57627);const ce="vp"===(0,h.L)().get("reqsrc")||!!(0,h.L)().get("vptest");class de extends j.l{constructor(){super(...arguments),this.eventLocalStorage=g.Q.getInstance(),this.imageOverrideStyles="",this.isFeedDisplayAlwaysOn=!1,this.isFRE=f.jG.IsFrePage,this.isTestRunning=!1,this.isReducedMotionActive=!1,this.isTTVRFired=!1,this.isLoadComplete=!1,this.hasFeedDisplayChanged=!1,this.museumCreditsCardIsShown=!1,this.isBackgroundDefaultedToOff=!1,this.isChinaCompliance=(0,f.Yq)().IsChinaCompliance,this.telemetryTags={},this.videoPlaying=!1,this.spaceHolderHeight=null,this.bgBlurSize="0px",this.shouldUpdateMuseumCardVisibility=!0,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.backgroundGalleryEligibility=!1,this.isDarkMode=!1,this.isBgGalleryopen=!1,this.imageEmptyChecked=!1,this.dayNow=(new Date).getDay(),this.holidayKey="holidayBkgd",this.darkModeQuery=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),this.changedToThemeImage=!1,this.currentProviderChanged=(e,t)=>{switch(this.imageOverrideStyles="",this.isLoadComplete=!1,"NoBackground"===t?(0,m.j3)("backgroundImage","hidden"):(0,m.j3)("backgroundImage","displayed"),t){case"Video":if(this.checkAndCreateVideoProvider(),(0,O.N)()&&this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider&&(this.videoProvider.showVideo=this.videoProvider.validateCurrentIndex(Number(this.galleryBackgroundSelectionMetadata.configIndex),!0),!this.videoProvider.showVideo)){B.p.clearCachedBackground().then((()=>{this.defineCurrentProviderAndSync()}));break}this.videoProvider&&(this.videoProvider.showVideo||this.shouldOverrideWithPreviousRotation())?(window.addEventListener("blur",this.onWindowBlur,!1),window.addEventListener("focus",this.onWindowFocus,!1)):(0,O.N)()&&this.setProviderForRotation();break;case"CMSImage":if(this.checkAndCreateImageProvider(this.config.cmsImage),!(0,O.N)())return;this.holidayBackground&&this.config.holidayImage||this.imageProvider.showImageInRotation||this.imageProvider.validateCurrentIndex(Number(this.galleryBackgroundSelectionMetadata?.configIndex),!0)||B.p.clearCachedBackground().then((()=>{this.defineCurrentProviderAndSync()}))}if("Video"!==this.currentProvider&&this.videoProvider&&(this.videoProvider.isPlaying=!1),"Video"===e)(0,O.N)()&&this.videoProvider?.unloadVideo(),window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1);this.updateProperties()},this.animationComplete=()=>{this.calcMuseumBottom()},this.calcMuseumBottom=()=>{if(!0!==this.museumCreditsCardIsShown)return;if(this.ref_museumCardContainer&&this.ref_museumCardContainer.classList.remove("museumCard_hide"),this.museumCreditsCardIsShown){this.ref_floatButtonGroup=this.ref_floatButtonGroup??document?.body?.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.("float-button-group");const e=this.ref_floatButtonGroup?.shadowRoot?.querySelector?.("div"),t=e?.getBoundingClientRect()?.bottom?window.innerHeight-e.getBoundingClientRect().bottom-18:0;return void(this.museumBottom=t>0?7+t:7)}null!==this.getHeaderSpaceHolderHeight()&&(this.museumBottom=40)},this.createTelemetryTags=()=>{(0,U.isNullOrUndefined)(this.telemetryObject)?(0,o.H)(r.CgS,"Telemetry object is undefined"):(this.telemetryTags.video=(0,ae.u)("BackgroundVideo").getMetadataTag(),this.backgroundGalleryEligibility&&(this.telemetryTags.backgroundGalleryButton=(0,se.X)("BackgroundGalleryButton",{headline:"Edit Background"},k.wu.Navigate,k.c9.Interaction).getMetadataTag()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}]),this.imageEditButtonTelemetryTag=(0,se.X)("ImageEditButtonButton",{headline:"Edit Background"},k.wu.More,k.c9.Interaction).getMetadataTag(),this.turnOnHolidaySwitchButtonTelemetryTag=(0,se.X)("HolidaySwitchButton>TurnOn",{headline:"Turn On Holiday Switch Background"},k.wu.Follow,k.c9.Interaction).getMetadataTag(),this.turnOffHolidaySwitchButtonTelemetryTag=(0,se.X)("HolidaySwitchButton>TurnOff",{headline:"Turn Off Holiday Switch Background"},k.wu.Unfollow,k.c9.Interaction).getMetadataTag())},this.defineCurrentProvider=()=>{let e=this.chromiumPageSettingsState.currentBackgroundImageType;this.chromiumPageSettingsState.displayBackgroundImageType&&!this.backgroundSourceChanged&&(e=this.chromiumPageSettingsState.displayBackgroundImageType),this.holidayBackground=(0,O.N)()?this.getHolidayBkgdData():this.ssrBackgroundMetadata.holiday,B.p.setDefaultBackground(!1);const t=this.config.disableBgInLowEndNoFeed&&(0,$.I9)()&&["off","headingsonly"].includes(this.chromiumPageSettingsState.selectedFeedDisplaySetting);if(!(0,O.N)()&&"hero"!==e||this.shouldOverrideWithPreviousRotation()){if(t&&["bing","enterprise","imageAndVideo","iris"].includes(e))return void(this.currentProvider="NoBackground");if(this.holidayBackground&&this.config.holidayImage&&!this.config.enableEventGleamImage)return void(this.currentProvider="CMSImage");const n="off"===e;return this.holidayBackground&&this.config.enableEventGleamImage&&this.ssrBackgroundMetadata.gleam&&"focused"!==this.chromiumPageSettingsState.currentLayout&&!n?void(this.currentProvider="CMSImage"):void(this.currentProvider=this.ssrBackgroundMetadata.provider)}if(this.config.video?.isTest)return void(this.currentProvider="Video");if(this.config.simpleImages?.isTest)return void(this.currentProvider="CMSImage");this.backgroundGalleryEligibility&&(this.galleryBackgroundSelectionMetadata=B.p.getPreferenceByKeyFromFromPreferencesCache(Z.wI.backgroundSelectionMetadata)),this.currentBackgroundMetadata=B.p.getCurrentBackgroundPreferenceCache();const n="off"===e;if(this.holidayBackground&&this.config.enableEventGleamImage&&this.eventGleam&&"focused"!==this.chromiumPageSettingsState.currentLayout&&!n)this.currentProvider="CMSImage";else if("bing"!==e&&"imageAndVideo"!==e||!this.isTestRunning)switch(e){case"bing":case"enterprise":case"imageAndVideo":case"iris":if("informational"==this.chromiumPageSettingsState.currentLayout&&(0,$.I9)()){this.currentProvider="NoBackground",window.dispatchEvent(new CustomEvent("LowEndDeviceBkgd",{detail:{isLowEndDevice:!0}}));break}if(t){this.currentProvider="NoBackground",window.dispatchEvent(new CustomEvent("LowEndDeviceBkgd",{detail:{isLowEndDevice:!0}})),d.J.updateLayout.getActionSender(this.chromiumPageSettingsConnector).send({...this.chromiumPageSettingsState,currentBackgroundImageType:"off",imageOfTheDayEnabled:!1});break}if(window.dispatchEvent(new CustomEvent("LowEndDeviceBkgd",{detail:{isLowEndDevice:!1}})),this.isFRE&&this.config.disableGalleryFREAndLowEnd){this.currentProvider="FREBackground";break}if(this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata){if("CMSImage"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="CMSImage";break}if("Video"===this.galleryBackgroundSelectionMetadata.provider){this.videoProvider&&!this.videoProvider.showVideo?this.setProviderForRotation():this.currentProvider="Video";break}if("BrowserLocal"===this.galleryBackgroundSelectionMetadata.provider&&this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage){this.currentProvider="BrowserLocal";break}}this.setProviderForRotation();break;case"custom":this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage?this.currentProvider="BrowserLocal":this.setProviderForRotation();break;case"off":this.currentProvider="NoBackground";break;case"theme":{const e=this.chromiumPageSettingsState.configData,t=e&&e.enabledFeatures&&e.enabledFeatures.includes("msAllowThemeInstallationFromChromeStore"),n=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.usingDefaultTheme,i=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.imageUrl,r=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.backgroundColorRgba?.length>3;t&&!n&&(i||r)?this.currentProvider="Theme":this.setProviderForRotation();break}case"hero":this.checkAndCreateImageProvider(),this.currentProvider="hero",this.imageProvider.assignHeroBackground(),this.imageSourceAgent=this.imageProvider.imageSource;break;default:this.setProviderForRotation()}else this.isFRE&&this.config.disableGalleryFREAndLowEnd?this.currentProvider="FREBackground":this.currentProvider="CMSImage"},this.defineCurrentProviderAndSync=()=>{this.defineCurrentProvider(),P.M0.addOrUpdateTmplProperty("bkgdProvider",this.currentProvider),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])},this.error=e=>{if(this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady(),(0,O.N)()&&(0,V.eC)().then((()=>(0,ee.f)(60,y.Al.IsPrerender)))),(0,o.H)(r.yb9,"Error fetching source","Source: "+e),re(e,this.config?.freImages?.informational,this.config?.freImages?.inspirational))this.imageOverrideStyles="display: none";else if("Video"===this.currentProvider)this.videoProvider.error(),this.defineCurrentProviderAndSync();else this.currentProvider="Error",this.updateProperties(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])},this.loadComplete=()=>{this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady(),(0,O.N)()&&(0,V.eC)().then((()=>(0,ee.f)(60,y.Al.IsPrerender))))},this.playVideo=()=>{this.videoPlaying||this.isBgGalleryopen||this.videoProvider.videoLoaded()},this.toggleMuseumCardOpen=()=>{const e=this.getStyleForElementKey(R._.backgroundOuterHolder);this.museumCreditsCardIsShown?(window.removeEventListener("click",this.onClick_outsideMuseumCard),window.removeEventListener("keydown",this.onKeyDown_closeMuseumCard)):window.setTimeout((()=>{window.addEventListener("click",this.onClick_outsideMuseumCard),window.addEventListener("keydown",this.onKeyDown_closeMuseumCard)}),100),this.museumCreditsCardIsShown?e.zIndex="":e.zIndex=s,this.museumCreditsCardIsShown=!this.museumCreditsCardIsShown,this.backgroundImageFixedWCStateSyncEventEmit([{key:"museumCreditsCardIsShown",value:this.museumCreditsCardIsShown}]),(0,v.Gg)(v.tk.museumCard,this.museumCreditsCardIsShown),this.calcMuseumBottom(),"Video"===this.currentProvider&&this.museumCreditsCardIsShown&&this.videoProvider.playVideo("Timer")},this.syncWithStateChange=()=>{const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.selectedFeedDisplaySetting!==this.chromiumPageSettingsState.selectedFeedDisplaySetting,n=e.selectedQuickLinksDisplaySetting!==this.chromiumPageSettingsState.selectedQuickLinksDisplaySetting;(t||n)&&(this.museumBottom=0,this.hasFeedDisplayChanged=t),this.config.enableEventGleamImage&&this.backgroundGalleryEligibility&&this.backgroundDataConnector&&this.backgroundDataConnector.updateEventGleam(this.eventGleam),this.chromiumPageSettingsState=e,this.isSSRBkgd&&!this.backgroundGalleryEligibility&&(this.ssrModifiedMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType),this.holidayBackground&&!this.config.enableEventGleamImage&&"focused"==this.chromiumPageSettingsState.currentLayout&&this.updateHolidayBackground(!1),this.defineCurrentProviderAndSync(),this.updateProperties(),this.calcMuseumBottom()},this.togglesChanged=()=>{this.noSSRMismatch=!0,B.p.setSSRBackgroundMetadata(void 0),this.syncWithStateChange()},this.updateProperties=()=>{switch(this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting,this.currentProvider){case"BrowserLocal":this.updateProperties_customImage();break;case"FREBackground":this.updateProperties_fre();break;case"Event":this.updateProperties_event();break;case"NoBackground":this.updateProperties_noBackground();break;case"Theme":this.updateProperties_theme();break;case"Video":this.updateProperties_video();break;case"CMSImage":this.updateProperties_cmsImage();break;case"hero":break;default:this.updateProperties_error()}this.isCurrentBackgroundMetadataLoaded=!0,this.shouldOverrideWithPreviousRotation()?this.setCorrectRotationBackground():this.saveBackgroundPref(this.currentProvider)},this.updateProperties_customImage=()=>{this.imageSourceAgent=(0,O.N)()?this.chromiumPageSettingsState.customBackgroundImageInfo.resourceUrl:this.ssrBackgroundMetadata.imageUrl,this.museumCard=null,this.imageOverrideStyles=""},this.updateProperties_error=()=>{if(!this.config?.freImages?.informational||!this.config?.freImages?.inspirational)return;const e=this.config.freImages.informational,t=this.config.freImages.inspirational;this.imageSourceAgent="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting?(0,N.zz)(e,{width:0,height:0,enableDpiScaling:!1}):(0,N.zz)(t,{width:0,height:0,enableDpiScaling:!1}),this.museumCard=null,this.imageOverrideStyles=""},this.updateProperties_event=async()=>{const e=this.config.event.eventId,t=this.config.event.showImageIndefinitely?S.vC:void 0;let n,i;if(this.currentEventCreative=await this.eventLocalStorage.getCurrentCreativeId(e,u.q31,this.config.event.creatives,t,this.config.event.cmsContent?.url,r.LXY),this.config.event?.cmsContent){if(n=this.eventLocalStorage.getCMSContent(e,u.q31,this.config.event.creatives,r.LXY),!n)return this.config.event=null,void this.defineCurrentProviderAndSync();this.config.event.imageData.CMS.attribution=n.attribution,this.config.event.imageData.CMS.imageSource=n.imageSource,this.config.event.imageData.CMS.imageHref=n.imageHref}if(i="VpTest"===e?"Test image":this.config.event.cmsContent?n.title:this.strings.events[this.config.event.useCommonIdForLocString?this.config.event.eventId:this.currentEventCreative],this.imageSourceAgent=this.config.event.imageData[this.currentEventCreative].imageSource,this.museumCard={credits:this.config.event.imageData[this.currentEventCreative].attribution,isDisplayed:!0,title:i,titleURL:(0,w.h_)(this.config.event.imageData[this.currentEventCreative].imageHref)},this.imageOverrideStyles="",!this.telemetryObject)return void(0,o.H)(r.CgS,"Telemetry object is undefined on Iris update");this.telemetryTags.cardTitle=(0,se.c)("CopyrightLink",{headline:i,id:S.YO+this.config.event.eventId},k.wu.Navigate,{overrideDestinationUrl:this.config.event.imageData[this.currentEventCreative].imageHref}).getMetadataTag(),this.telemetryTags.dismissButton=(0,se.X)("DismissEvent",{headline:this.museumCard.title,id:S.YO+this.config.event.eventId},k.wu.Dislike).getMetadataTag(),this.telemetryTags.title_cardHidden=(0,se.X)("LikeBackground",{headline:"LikeBackground",id:S.YO+this.config.event.eventId},k.wu.Show).getMetadataTag(),this.telemetryTags.title_cardShown=(0,se.X)("ExitFullView",{headline:"ExitFullView",id:S.YO+this.config.event.eventId},k.wu.Close).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}]);const a=this.config.event.imageData[this.currentEventCreative].secondaryButton;a&&(this.secondaryButtonTelemetryTag=(0,se.c)("SecondaryButton",{headline:this.museumCard.title,id:S.YO+this.config.event.eventId},k.wu.Navigate,{overrideDestinationUrl:a.href}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"secondaryButtonTelemetryTag",value:this.secondaryButtonTelemetryTag}]))},this.updateProperties_fre=()=>{const e=this.config.freImages.informational,t=this.config.freImages.inspirational,n="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting?(0,N.zz)(e,{width:0,height:0,enableDpiScaling:!1}):(0,N.zz)(t,{width:0,height:0,enableDpiScaling:!1});this.imageSourceAgent=n,this.museumCard=null,this.imageOverrideStyles=""},this.updateProperties_noBackground=()=>{this.imageSourceAgent=null,this.museumCard=null,this.imageOverrideStyles="",this.loadComplete()},this.updateProperties_theme=()=>{if(this.ntpTheme=this.chromiumPageSettingsState.ntpTheme,this.museumCard=null,(0,O.N)()){if(this.imageSourceAgent=this.changedToThemeImage?(0,K.ff)(this.ntpTheme.imageUrl,this.chromiumPageSettingsState):null,!this.imageSourceAgent){const e=`background-position: ${this.ntpTheme.imageHorizontalAlignment} ${this.ntpTheme.imageVerticalAlignment}; background-repeat: ${this.ntpTheme.imageTiling}; background-image: ${(0,K.OQ)(this.ntpTheme.imageUrl,this.chromiumPageSettingsState)}; background-color: ${(0,K.Xt)(this.chromiumPageSettingsState)}`;this.isBgGalleryopen?window.requestAnimationFrame((()=>{this.ref_backgroundImage?.classList?.add("hidden"),window.requestAnimationFrame((()=>{window.setTimeout((()=>{this.imageOverrideStyles=e,this.ref_backgroundImage?.classList?.replace("hidden","visible")}),500)}))})):this.imageOverrideStyles=e}}else this.ssrBackgroundMetadata?.imageUrl&&"#"!=this.ssrBackgroundMetadata.imageUrl.charAt(0)?this.imageOverrideStyles=`background-image: ${this.ssrBackgroundMetadata.imageUrl};`:this.imageOverrideStyles=`background-color: ${this.ssrBackgroundMetadata.imageUrl}`;this.changedToThemeImage=!1,this.ntpTheme&&"repeat"===this.ntpTheme.imageTiling&&(this.imageOverrideStyles+="background-size: auto;"),this.loadComplete()},this.updateProperties_video=()=>{!(0,O.N)()||this.shouldOverrideWithPreviousRotation()?this.videoProvider&&this.videoProvider.assignBackgroundUsingIndex(this.ssrBackgroundMetadata.configIndex?.toString()):this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider?this.videoProvider&&this.videoProvider.assignBackgroundUsingIndex(this.galleryBackgroundSelectionMetadata.configIndex):this.videoProvider&&this.videoProvider.setVideoAndMuseumCardProperties(),this.imageSourceAgent=this.videoProvider.firstFrameSource,this.museumCard={...this.videoProvider.museumCard},this.isReducedMotionActive=this.videoProvider.isReducedMotionActive,this.showToast=this.videoProvider.showToast,this.toastMessage=this.videoProvider.toastMessage,this.videoPlaying=this.videoProvider.isPlaying,this.backgroundImageFixedWCStateSyncEventEmit([{key:"videoPlaying",value:this.videoProvider.isPlaying}]),this.videoSource=this.videoProvider.videoSource,this.loadComplete(),this.telemetryObject?(0,O.N)()&&(this.setVideoSecondaryButtonTelemetry(),this.telemetryTags.title_cardHidden=(0,se.X)("LikeBackground",{headline:"LikeBackground",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.wu.Show).getMetadataTag(),this.telemetryTags.title_cardShown=(0,se.X)("ExitFullView",{headline:"ExitFullView",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.wu.Close).getMetadataTag(),this.museumCard.titleURL&&(this.telemetryTags.cardTitle=(0,se.c)("TitleLink",{headline:this.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.wu.Navigate,{overrideDestinationUrl:this.museumCard.titleURL}).getMetadataTag()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}])):(0,o.H)(r.CgS,"Telemetry object is undefined on Iris update")},this.updateProperties_cmsImage=()=>{if(this.holidayBackground&&this.config.holidayImage&&!this.config.enableEventGleamImage)this.imageProvider.assignHolidayBackground();else if(this.holidayBackground&&this.config.enableEventGleamImage&&this.eventGleam)this.imageProvider.assignHolidayBackground(),P.M0.addOrUpdateTmplProperty("evtBkg","1");else if((0,O.N)())this.config.enableAbstractImages&&this.dailyRotationEnabled()&&"always"==this.chromiumPageSettingsState.selectedFeedDisplaySetting?this.imageProvider&&this.imageProvider.showAbstractImageRotation(B.p.getAbstractImageStartIndex()):this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"CMSImage"===this.galleryBackgroundSelectionMetadata.provider&&this.galleryBackgroundSelectionMetadata.configIndex&&Number(this.galleryBackgroundSelectionMetadata.configIndex)<this.config.cmsImage.data.length&&this.config.cmsImage.data[this.galleryBackgroundSelectionMetadata.configIndex]?(this.imageProvider.assignBackgroundUsingIndex(this.galleryBackgroundSelectionMetadata.configIndex),this.config.enableEventGleamImage&&P.M0.addOrUpdateTmplProperty("evtBkg","0")):this.config.simpleImages&&this.imageProvider&&this.imageProvider.shouldShowImageInRotation()&&this.imageProvider.setImageAndMuseumCardProperties();else{const e=this.ssrBackgroundMetadata.gleam&&this.ssrBackgroundMetadata.holiday;e?this.imageProvider.assignHolidayBackground(!0):this.imageProvider.assignBackgroundUsingIndex(this.ssrBackgroundMetadata.configIndex.toString()),this.config.enableEventGleamImage&&P.M0.addOrUpdateTmplProperty("evtBkg",e?"1":"0")}if(this.imageSourceAgent=this.imageProvider.imageSource,this.museumCard={...this.imageProvider.museumCard},(0,O.N)()&&this.museumCard.titleURL){if(!this.telemetryObject)return void(0,o.H)(r.CgS,"Telemetry object is undefined on Iris update");this.telemetryTags.cardTitle=(0,se.c)("TitleLink",{headline:this.museumCard.title,id:String(this.imageProvider.imageId)},k.wu.Navigate,{overrideDestinationUrl:this.museumCard.titleURL}).getMetadataTag()}},this.onClick_secondaryButton=()=>{"Video"===this.currentProvider?this.videoProvider?(this.videoProvider.isPlaying?this.videoProvider.pauseVideo("Button"):this.videoProvider.playVideo("Button"),this.setVideoSecondaryButtonTelemetry(!0)):(0,o.H)(r.$qz,"Video provider not available. Attempted play/pause video"):"Event"===this.currentProvider&&window.open(this.config.event.imageData[this.currentEventCreative].secondaryButton.href)},this.onClick_outsideMuseumCard=e=>{const t=e.composedPath();this.ref_floatButtonGroup=this.ref_floatButtonGroup??document?.body?.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.("float-button-group"),t.includes(this.ref_museumCardContainer)||this.ref_floatButtonGroup&&t.includes(this.ref_floatButtonGroup)||(P.M0.sendActionEvent(this.ref_museumCardButton,k.Aw.Click,k.wu.Close),this.toggleMuseumCardOpen())},this.onClick_openGalleryButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0),this.toggleMuseumCardOpen())},this.onClick_imageEditButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0))},this.onClick_pickMessageItem=e=>{(e||" "===e)&&window.chrome.edgeMarketingPagePrivate.sendNtpQuery("summarize the page",e,"https://www.msn.com/en-us/money/markets/biden-saved-the-economy-and-launched-a-new-age-of-prosperity-why-isn-t-he-getting-any-credit-opinion/ar-AA1eUYUo?ocid=entnewsntp&pc=U531&cvid=f91d7332657f4f8d849065750a18721c&ei=17")},this.onKeyDown_closeMuseumCard=e=>{"Escape"===e.code&&(P.M0.sendActionEvent(this.ref_museumCardButton,k.Aw.Click,k.wu.Close),this.toggleMuseumCardOpen())},this.onFocusLeave_museumCardButton=()=>{this.museumCreditsCardIsShown&&this.ref_backgroundGalleryButton&&this.ref_backgroundGalleryButton.focus()},this.onFocusLeave_backgroundGalleryButton=()=>{this.museumCreditsCardIsShown&&this.ref_museumCardButton&&this.ref_museumCardButton.focus()},this.onResize=()=>{this.museumCard&&this.calcMuseumBottom(),this.backgroundGalleryEligibility&&this.checkMinimumWidthForGallery()},this.onScroll=(0,b.k)((()=>{this.museumCreditsCardIsShown&&this.toggleMuseumCardOpen();const e=0===window.scrollY;this.museumCard&&(e?(this.calcMuseumBottom(),this.shouldUpdateMuseumCardVisibility=!0):!e&&this.shouldUpdateMuseumCardVisibility&&(this.shouldUpdateMuseumCardVisibility=!1)),"Video"===this.currentProvider&&(e?this.videoProvider.playVideo("Scroll"):this.videoProvider.pauseVideo("Scroll"))}),350),this.onWindowBlur=()=>{this.videoProvider.pauseVideo("Focus")},this.onWindowFocus=()=>{this.videoProvider.playVideo("Focus")},this.dailyRotationEnabled=e=>{if(!this.backgroundGalleryEligibility)return"imageAndVideo"===this.chromiumPageSettingsState?.currentBackgroundImageType||"bing"===this.chromiumPageSettingsState?.currentBackgroundImageType;const t=this.ssrBackgroundMetadata?this.ssrBackgroundMetadata.provider:this.currentProvider;return e?.changeBackgroundDaily||void 0===this.galleryBackgroundSelectionMetadata&&"CMSImage"===t},this.isPotentiallyMismatchedForRotation=e=>(this.backgroundGalleryEligibility,this.dailyRotationEnabled(e)),this.themeChanged=()=>{A.H.enqueue((()=>{this.isDarkMode=(0,z.Yc)()}))},this.handleImageEditEmitListener=()=>{this.onClick_imageEditButton()},this.handleSecondaryEmitListener=()=>{this.onClick_secondaryButton()},this.handleToggleEmitListener=()=>{this.toggleMuseumCardOpen()},this.handleEventToggleEmitListener=()=>{const e=this.getHolidayBkgdData();this.updateHolidayBackground(e,!0),this.defineCurrentProviderAndSync(),"CMSImage"===this.currentProvider&&this.updateProperties()},this.onGalleryApplied=()=>{this.backgroundSourceChanged=!0,this.defineCurrentProvider()},this.statesSyncInit=()=>{const e=[];["backgroundGalleryButtonEnabled","currentProvider","museumCreditsCardIsShown","secondaryButtonTelemetryTag","telemetryTags","videoPlaying"].forEach((t=>{e.push({key:t,value:this[t]})})),window.dispatchEvent(new CustomEvent("backgroundImageWCStatesSync",{detail:{states:e,init:!0}}))}}set imageSourceAgent(e){if(!e&&!this.imageEmptyChecked&&!ce)switch(this.currentProvider){case"NoBackground":case"Theme":break;default:this.imageEmptyChecked=!0,this.error("No image source")}if(void 0!==this.imageSource&&this.imageSource!==e&&(this.backgroundSourceChanged=!0),this.isBgGalleryopen){if(null===e)return void(this.imageSource=null);void 0===this.imageSource?this.imageSource=e:this.imageSource!==e&&window.requestAnimationFrame((()=>{this.ref_backgroundImage?.classList?.add("hidden"),window.requestAnimationFrame((()=>{window.setTimeout((()=>{null!==e&&(this.imageSource=e),this.ref_backgroundImage?.classList?.replace("hidden","visible")}),500)}))}))}else this.imageSource!==e&&(this.imageSource=e)}afterHydration(){this.canRenderNonSsrElements=!0,this.loadComplete(),this.ref_video&&"Video"===this.currentProvider&&this.playVideo()}processExperienceInitializeError(){super.processExperienceInitializeError();const e="Fatal web component experience exception encountered in BackgroundImageWC.",t=new Error(e);(0,o.OO)(t,{...r.BlE,message:e,pb:{...r.BlE.pb,provider:this.currentProvider,videoInfo:{videoID:this?.videoProvider?.videoId,museumCard:this?.videoProvider?.museumCard},imageInfo:{imageSource:this?.imageProvider?.imageId,museumCard:this?.imageProvider?.museumCard}}},e)}async experienceConnected(){if((0,O.N)()?this.canRenderNonSsrElements=!this.isSSRRendered:this.canRenderNonSsrElements=!1,this.config.enableEventGleamImage&&(this.eventGleam=function(){try{const e=ie.k.getWpoTreatmentsWithType(ne._h.eventGleam,!0),t=e[0]?.properties;if(e?.length>0&&t)return t}catch(e){const t="Error in getting wpo event gleam data";(0,o.H)(r.Od5,t,`error:${e}`)}return null}()),this.chromiumPageSettingsConnector=(0,W.K0)(l.RL),this.isDarkMode=(0,z.Yc)(),this.darkModeQuery.addEventListener("change",this.themeChanged),(0,U.isNullOrUndefined)(this.chromiumPageSettingsConnector)){const e=(0,U.isNullOrUndefined)(this.chromiumPageSettingsConnector);return(0,o.H)(r.B5f,"Data connector missing: ChromiumSettings-"+e),void this.error("Data connectors missing")}if(this.config.disableGalleryFREAndLowEnd){let e=B.p.getBackgroundGalleryEligibility();void 0!==e||this.config.disableBackgroundGallery||f.jG.IsFrePage||(await B.p.initState(x.f.backgroundDataStateLoaded.getActionSender((0,W.K0)(l.xE)),this.config),e=B.p.getBackgroundGalleryEligibility()),this.backgroundGalleryEligibility=!this.config.disableBackgroundGallery&&!this.isFRE&&B.p&&e}else{let e=B.p.getBackgroundGalleryEligibility();void 0!==e||this.config.disableBackgroundGallery||(await B.p.initState(x.f.backgroundDataStateLoaded.getActionSender((0,W.K0)(l.xE)),this.config),e=B.p.getBackgroundGalleryEligibility()),this.backgroundGalleryEligibility=!this.config.disableBackgroundGallery&&B.p&&e}if(this.backgroundGalleryEligibility&&(this.checkMinimumWidthForGallery(),this.backgroundDataConnector=(0,W.K0)(l.xE),this.galleryBroadcastChannel=new BroadcastChannel(Q.fZ)),this.backgroundGalleryEligibility&&(0,U.isNullOrUndefined)(this.backgroundDataConnector))return(0,o.H)(r.B5f,"Data connector missing: BackgroundData"),void this.error("Data connectors missing");if(this.config.simpleImages){if(B.p.setSimpleImagesandCMSSize(!0,this.config.cmsImage.data.length),this.config.cmsImage.data=this.config.cmsImage.data.concat(this.config.simpleImages.data),(0,O.N)()){B.p.setDailyRotationOnlySimpleImages(!0);const e=this.getVideoData();e&&e.schedule||this.checkAndCreateVideoProvider(),this.checkAndGenerateSimpleImageOnlySchedule(),window.addEventListener("simpleImageBkgdToggle",this.togglesChanged)}this.checkAndCreateImageProvider(this.config.cmsImage)}if(this.config.enableAbstractImages){B.p.setAbstractImageStartIndex(this.config.cmsImage.data.length);const e=this.isDarkMode?c.dataDark:c.dataLight;this.config.cmsImage.data=this.config.cmsImage.data.concat(e),this.imageProvider=new Y(this.config.cmsImage,this)}let e=!1;const t=B.p.getPreferenceByKeyFromFromPreferencesCache(Z.wI.backgroundSelectionMetadata);if(t&&t.configIndex){const n=Number(t.configIndex)&&Number(t.configIndex)>=this.config.cmsImage.data.length;("Video"===t.provider&&this.config.video.data[t.configIndex]?.removeContent||"CMSImage"===t.provider&&this.config.cmsImage.data[t.configIndex]?.removeContent||n)&&(B.p.setBackgroundPreferenceByKey(Z.wI.backgroundSelectionMetadata,void 0),B.p.setBackgroundPreferenceByKey(Z.wI.changeBackgroundDaily,!0),B.p.updateLayoutBasedOnBackgroundType()),e="CMSImage"===t.provider||"Video"===t.provider}const n=B.p.getPreferenceByKeyFromFromPreferencesCache(Z.wI.changeBackgroundDaily);if(P.M0.addOrUpdateTmplProperty("bkgdRotation",n?"1":"0"),t&&"Iris"===t.provider&&(B.p.setBackgroundPreferenceByKey(Z.wI.backgroundSelectionMetadata,void 0),B.p.setBackgroundPreferenceByKey(Z.wI.changeBackgroundDaily,!0),B.p.updateLayoutBasedOnBackgroundType()),this.config.enableEventGleamImage&&void 0===this.getHolidayBkgdData()&&(t&&!e||this.updateHolidayBackground(!0)),this.chromiumPageSettingsState=this.chromiumPageSettingsConnector.getCurrentState(),this.isTestRunning="1"===C.cX.getQueryParameterByName("forceImageTest",(0,_.zp)()),!(0,O.N)())return this.ssrBackgroundMetadata={provider:y.Al.EdgeNTPHeader.backgroundImage.provider,configIndex:y.Al.EdgeNTPHeader.backgroundImage.configIndex,imageUrl:y.Al.EdgeNTPHeader.backgroundImage.imageUrl,holiday:y.Al.EdgeNTPHeader.backgroundImage.holiday,dark:y.Al.EdgeNTPHeader.backgroundImage.dark,light:y.Al.EdgeNTPHeader.backgroundImage.light,gleam:y.Al.EdgeNTPHeader.backgroundImage.gleam},B.p.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),B.p.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata),void this.defineCurrentProviderAndSync();if(this.isSSRBkgd=window.isSSREnabled&&y.Al&&y.Al.CurrentFlightSet&&!y.Al.CurrentFlightSet.has("prg-ssrheader-c"),this.isSSRBkgd){const e=this.backgroundGalleryEligibility&&await B.p.getBackgroundPreferences();this.galleryBackgroundSelectionMetadata=B.p.getPreferenceByKeyFromFromPreferencesCache(Z.wI.backgroundSelectionMetadata),this.ssrBackgroundMetadata=await B.p.getCurrentBackgroundMetadata(),this.holidayBackground=this.getHolidayBkgdData(),this.holidayBackground&&this.ssrBackgroundMetadata&&!this.ssrBackgroundMetadata.holiday&&!this.ssrBackgroundMetadata.gleam&&this.updateHolidayBackground(!1),B.p.setCurrentBackgroundPreferenceCache(this.ssrBackgroundMetadata),this.isPotentiallyMismatchedForRotation(e)&&(this.data=this.getVideoData(),this.checkForSSRRotationMismatch(this.data))}if(this.defineCurrentProviderAndSync(),(0,O.N)()&&"CMSImage"===this.currentProvider&&!this.config.disableGalleryFREAndLowEnd&&this.scheduleFixed?.length>0&&oe(this.scheduleFixed.filter((e=>-1!==e)),this.imageProvider),this.config.holidayImage&&window.setTimeout((()=>{this.$emit("holidayBgChanged",this.holidayBackground)}),0),!this.holidayBackground&&"hero"!==this.currentProvider&&this.isSSRBkgd&&void 0!==this.ssrBackgroundMetadata&&void 0!==this.ssrBackgroundMetadata.provider&&this.ssrBackgroundMetadata.provider!==this.currentProvider){"true"===(0,h.L)().get("mock-ntp-header")||(0,o.H)(r.sFk,"SSR - Edge header mismatch.",void 0,{...r.sFk.pb,customMessage:`key: backgroundImage, header: ${this.ssrBackgroundMetadata.provider}, state: ${this.currentProvider}, userSelected: ${this.ssrBackgroundMetadata.userSelected}`})}this.createTelemetryTags(),d.J.updateLayout.registerObserver((()=>{window.setTimeout((()=>{this.syncWithStateChange()}),500)})),L.V.updateNtpTheme.registerObserver((()=>{this.changedToThemeImage="Theme"===this.currentProvider,this.syncWithStateChange()})),p.I.layoutAnimationComplete.registerObserver((()=>{this.animationComplete()})),this.backgroundGalleryEligibility&&(x.f.updateGallerySelectedBackground.registerObserver((()=>{this.handleGalleryBackgroundSelection()})),x.f.refreshBackgroundMetadata.registerObserver((()=>{this.handleBackgroundRefresh()})),(0,X.Uo)(l.xE,(e=>{this.isBgGalleryopen=e.backgroundGalleryDisplayed}))),this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting,window.addEventListener("resize",this.onResize),window.addEventListener("scroll",this.onScroll),window.addEventListener("backgroundImageWCEdit",this.handleImageEditEmitListener),window.addEventListener("backgroundImageWCSecondary",this.handleSecondaryEmitListener),window.addEventListener("backgroundImageWCToggle",this.handleToggleEmitListener),window.addEventListener("backgroundImageWCStatesSyncAsk",this.statesSyncInit),this.config.enableEventGleamImage&&window.addEventListener("eventToggle",this.handleEventToggleEmitListener),"hero"===this.chromiumPageSettingsState.displayBackgroundImageType&&window.addEventListener("eventToggle",this.onGalleryApplied),window.setTimeout((()=>this.statesSyncInit()),0),this.addBackgroundImageDataRequestListener()}disconnectedCallback(){if(super.disconnectedCallback(),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.onScroll),window.removeEventListener("backgroundImageWCEdit",this.handleImageEditEmitListener),window.removeEventListener("backgroundImageWCSecondary",this.handleSecondaryEmitListener),window.removeEventListener("backgroundImageWCToggle",this.handleToggleEmitListener),window.removeEventListener("backgroundImageWCStatesSyncAsk",this.statesSyncInit),this.config?.enableEventGleamImage&&window.removeEventListener("eventToggle",this.handleEventToggleEmitListener),"hero"===this.chromiumPageSettingsState.displayBackgroundImageType&&window.removeEventListener("eventToggle",this.onGalleryApplied),this.config?.simpleImages&&window.removeEventListener("simpleImageBkgdToggle",this.togglesChanged),"Video"===this.currentProvider)window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1);this.darkModeQuery.removeEventListener("change",this.themeChanged)}getExperienceType(){return u.q31}shadowDomPopulated(){this.syncWithStateChange(),(0,M.h_)(R._.headerSpaceHolder).then((e=>{var t;(t=this.syncWithStateChange,new ResizeObserver(t)).observe(e),this.calcMuseumBottom()})),this.config.holidayImage&&window.setTimeout((()=>{this.$emit("holidayBgChanged",this.holidayBackground)}),0)}checkAndGenerateSimpleImageOnlySchedule(){const e=this.getVideoData();e&&e.schedule&&(this.schedule=e.schedule,this.scheduleFixed=e.scheduleFixed,e.simpleSchedule?(this.simpleSchedule=e.simpleSchedule,this.checkSimpleImageBounds()):(this.simpleSchedule=[-1,-1,-1,-1,-1,-1,-1],this.generateImageSchedule()))}checkSimpleImageBounds(){const e=this.config.cmsImage.data.length,t=B.p.getCMSImageSize();for(let n=0;n<this.simpleSchedule.length;n++)if(this.simpleSchedule[n]<t||e-1<this.simpleSchedule[n]){const i=Math.floor(Math.random()*(e-t)+t);this.simpleSchedule[n]=i}this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed,simpleSchedule:this.simpleSchedule})}generateImageSchedule(){const e=this.config.cmsImage.data.length,t=B.p.getCMSImageSize(),n=[];for(let e=0;e<this.config.cmsImage.data.length;e++)n[e]=!1;for(let i=0;i<this.simpleSchedule.length;i++){let r=Math.floor(Math.random()*(e-t)+t);if(n[r]||!this.config.cmsImage.data[r]||this.config.cmsImage.data[r].removeContent)do{r===this.config.cmsImage.data.length-1?r=t:r++}while(n[r]||!this.config.cmsImage.data[r]||this.config.cmsImage.data[r].removeContent);this.simpleSchedule[i]=r,n[r]=!0}this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed,simpleSchedule:this.simpleSchedule})}getVideoData(){try{return(0,T.$o)().getObject(this.storageKey)}catch(e){return(0,o.H)(r.eEQ,"Local storage for video data failed."),null}}storeVideoData(e){this.data=e;try{(0,T.$o)().setObject(this.storageKey,e)}catch(e){return void(0,o.H)(r.ybt,"Local storage for video data failed.")}}getHolidayBkgdData(){try{return(this.config.holidayImage||this.config.enableEventGleamImage)&&(0,T.$o)().getObject(this.holidayKey)}catch(e){return(0,o.H)(r.eEQ,"Local storage for holiday background failed."),!1}}storeHolidayBkgdData(e){try{(0,T.$o)().setObject(this.holidayKey,e)}catch(e){return void(0,o.H)(r.ybt,"Local storage for holiday background failed.")}}storeUserToggleStatus(e){try{(0,T.$o)().setObject(this.holidayKey+"User",e)}catch(e){return void(0,o.H)(r.ybt,"Local storage for holiday background triggered by user failed.")}}getHeaderSpaceHolderHeight(){const e=(0,M.b_)(R._.headerSpaceHolder);return e?e.offsetHeight:this.spaceHolderHeight}checkMinimumWidthForGallery(){this.backgroundGalleryButtonEnabled=window.innerWidth>Z.Gb,this.backgroundImageFixedWCStateSyncEventEmit([{key:"backgroundGalleryButtonEnabled",value:this.backgroundGalleryButtonEnabled}])}updateHolidayBackground(e,t){this.holidayBackground=e,this.storeHolidayBkgdData(this.holidayBackground),t&&this.storeUserToggleStatus(this.holidayBackground),this.$emit("holidayBgChanged",e)}setVideoSecondaryButtonTelemetry(e){!e||this.telemetryObject?this.videoProvider&&(this.secondaryButtonTelemetryTag=this.videoPlaying?(0,se.X)("Pause",{headline:this.videoProvider.museumCard?.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.wu.Pause).getMetadataTag():(0,se.X)("Play",{headline:this.videoProvider.museumCard?.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.wu.Play).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"secondaryButtonTelemetryTag",value:this.secondaryButtonTelemetryTag}])):(0,o.H)(r.CgS,"Telemetry object is undefined on Iris update")}saveBackgroundPref(e,t){if(!(0,O.N)()||"Error"===e||"Event"===e||"hero"===e)return;let n;const i="NoBackground"===this.currentProvider;if(this.config.enableEventGleamImage&&this.isSSRBkgd){const e=()=>{if(!this.eventGleam&&this.ssrBackgroundMetadata.gleam)return this.ssrBackgroundMetadata={...this.ssrBackgroundMetadata,dark:"",light:"",gleam:!1,holiday:!1},void this.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata);if(this.eventGleam&&!this.ssrBackgroundMetadata.gleam&&!i){const e=(0,T.$o)().getObject(this.holidayKey+"User");n=void 0===e;let t=!1;const i=B.p.getPreferenceByKeyFromFromPreferencesCache(Z.wI.backgroundSelectionMetadata);i&&i.configIndex&&(t="CMSImage"===i.provider||"Video"===i.provider),n&&!t&&(this.ssrBackgroundMetadata={...this.ssrBackgroundMetadata,dark:this.eventGleam.DarkGleamUrl,light:this.eventGleam.LightGleamUrl,gleam:!0,holiday:!0},this.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata),this.storeHolidayBkgdData(!0))}};window.addEventListener("beforeunload",e,{once:!0})}if(this.holidayBackground&&!i){if(!this.isSSRBkgd)return;return this.ssrBackgroundMetadata={provider:this.ssrBackgroundMetadata.provider,configIndex:this.ssrBackgroundMetadata.configIndex,imageUrl:this.ssrBackgroundMetadata.imageUrl,holiday:this.holidayBackground},this.config.enableEventGleamImage&&this.eventGleam&&(this.ssrBackgroundMetadata={...this.ssrBackgroundMetadata,dark:this.eventGleam.DarkGleamUrl,light:this.eventGleam.LightGleamUrl,gleam:!0}),void this.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata)}const r=this.backgroundGalleryEligibility&&void 0!==this.galleryBackgroundSelectionMetadata;switch(e){case"Video":this.setCurrentBackgroundMetadata({provider:e,userSelected:r,configIndex:t||this.videoProvider.videoId,imageId:this.videoProvider.firstFrameId});break;case"BrowserLocal":this.setCurrentBackgroundMetadata({provider:e,userSelected:r,imageUrl:this.chromiumPageSettingsState.customBackgroundImageInfo.resourceUrl});break;case"Theme":this.setCurrentBackgroundMetadata({provider:e,userSelected:r,imageUrl:this.getThemeBackgroundInfo(this.ntpTheme),darkIcons:!this.ntpTheme.isNtpBackgroundDark});break;case"CMSImage":this.setCurrentBackgroundMetadata({provider:e,userSelected:r,configIndex:this.imageProvider.imageId,imageId:this.imageProvider.imageName});break;case"NoBackground":this.setCurrentBackgroundMetadata({provider:e,userSelected:!0});break;default:this.setCurrentBackgroundMetadata({provider:e})}B.p.getCurrentBackgroundMetadata()}handleGalleryBackgroundSelection(){const e=this.backgroundDataConnector.getCurrentState();if(!e)return;const t=this.currentProvider;this.galleryBackgroundSelectionMetadata=e.backgroundSelectionMetadata,this.changedToThemeImage="Theme"===this.galleryBackgroundSelectionMetadata?.provider,this.currentProvider=this.galleryBackgroundSelectionMetadata.provider,this.videoProvider&&"Video"===this.currentProvider&&(this.videoProvider.isPlaying=!1),this.config.holidayImage&&(this.holidayBackground=(0,O.N)()?this.getHolidayBkgdData():this.ssrBackgroundMetadata.holiday),t===this.currentProvider&&(this.isLoadComplete=!1,this.updateProperties()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])}handleBackgroundRefresh(){this.defineCurrentProviderAndSync(),"Video"===this.currentProvider&&(this.videoProvider.setVideoAndMuseumCardProperties(),this.videoProvider.isPlaying=!1,this.isLoadComplete=!1),this.updateProperties()}addBackgroundImageDataRequestListener(){window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onBackgroundImageDataRequest&&window.chrome.ntpSettingsPrivate.onBackgroundImageDataRequest.addListener((()=>{this.sendNtpBackgroundImageData()}))}getStyleForElementKey(e){return(0,M.b_)(e)?.style}checkInformataionalFlight(){return this.config.informationalFlightOnly&&"informational"==this.chromiumPageSettingsState.currentLayout}setProviderForRotation(){let e;try{e="true"===(0,T.$o)().getItem("isBackgroundToggleOn")}catch(t){(0,o.H)(r.X1n,"Local storage for isBackgroundToggleOn failed."),e=!0}this.isBackgroundDefaultedToOff&&this.config.disableDefaultBackground&&e&&(P.M0.addOrUpdateTmplProperty("bkgToggleOnAfterDefaultedOff","1"),this.isBackgroundDefaultedToOff=!1),this.config.disableDefaultBackground&&!e?(this.isBackgroundDefaultedToOff=!0,P.M0.addOrUpdateTmplProperty("bkgIsDefaultOff","1"),this.currentProvider="NoBackground",this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}]),J.k.updateLayoutAndBackgroundImageType("off",!1)):(this.currentProvider="CMSImage",this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}]))}getThemeBackgroundInfo(e){return e?e.backgroundColorRgba&&!e.imageUrl?(0,K.Xt)(this.chromiumPageSettingsState):e.imageUrl?e.imageUrl:void 0:""}checkAndCreateVideoProvider(){this.videoProvider||(this.videoProvider=new q(this.config.video,this))}checkAndCreateImageProvider(e){this.imageProvider||(this.imageProvider=new Y(e,this)),this.config.simpleImages&&this.checkAndGenerateSimpleImageOnlySchedule()}async setCurrentBackgroundMetadata(e){this.isCurrentBackgroundMetadataLoaded&&!(0,te.Z)(this.currentBackgroundMetadata,e)&&(this.currentBackgroundMetadata=e,B.p.setCurrentBackgroundMetadata(this.currentBackgroundMetadata))}async sendNtpBackgroundImageData(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;e&&this.config&&this.config.cmsImage&&this.config.cmsImage.data||console.error("ntpSettingsApi or imagedata is null or undefined.");const t={data:this.config.cmsImage.data.map((e=>({thumbnailImage:e.image.i240,ntpImage:e.image.i2160})))};e.sendNtpBackgroundImageData(t.data)}setCorrectRotationBackground(){this.data=this.getVideoData(),this.checkAndCreateImageProvider(this.config.cmsImage),this.saveBackgroundPref("CMSImage","always"==this.chromiumPageSettingsState.selectedFeedDisplaySetting?B.p.getAbstractImageStartIndex()+this.dayNow:this.data.simpleSchedule[this.dayNow])}shouldOverrideWithPreviousRotation(){if(!this.isSSRBkgd||this.noSSRMismatch)return!1;if(!this.backgroundGalleryEligibility)return this.ssrRotationMismatch&&this.dailyRotationEnabled()&&this.ssrPageLoadMismatchBackgroundType===this.ssrModifiedMismatchBackgroundType;const e=this.chromiumPageSettingsState&&"off"===this.chromiumPageSettingsState.currentBackgroundImageType,t=B.p.getPreferenceByKeyFromFromPreferencesCache(Z.wI.changeBackgroundDaily)||void 0===this.galleryBackgroundSelectionMetadata&&"CMSImage"===this.ssrBackgroundMetadata.provider;return this.ssrRotationMismatch&&!e&&t}checkForSSRRotationMismatch(e){this.dailyRotationEnabled()&&"always"==this.chromiumPageSettingsState.selectedFeedDisplaySetting?this.ssrBackgroundMetadata&&this.ssrBackgroundMetadata.configIndex-B.p.getAbstractImageStartIndex()!==this.dayNow&&(this.ssrRotationMismatch=!0):e&&e.schedule&&(!this.config.simpleImages||e.simpleSchedule)&&(!this.backgroundGalleryEligibility&&this.isRotationMismatchWithoutGallery()?(B.p.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),this.ssrRotationMismatch=!0,this.ssrPageLoadMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType,this.ssrModifiedMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType):"CMSImage"===this.ssrBackgroundMetadata?.provider&&this.data.simpleSchedule[this.dayNow]!==this.ssrBackgroundMetadata?.configIndex&&(B.p.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),this.ssrRotationMismatch=!0))}isRotationMismatchWithoutGallery(){return"CMSImage"===this.ssrBackgroundMetadata?.provider&&("imageAndVideo"!==this.chromiumPageSettingsState.currentBackgroundImageType||this.data.simpleSchedule[this.dayNow]!==this.ssrBackgroundMetadata.configIndex)}get backgroundMuseumCarddBtnMoveToBottom(){return!this.museumCreditsCardIsShown}backgroundImageFixedWCStateSyncEventEmit(e){window.dispatchEvent(new CustomEvent("backgroundImageWCStatesSync",{detail:{states:e}}))}}(0,i.gn)([I.LO],de.prototype,"currentProvider",void 0),(0,i.gn)([I.LO],de.prototype,"imageOverrideStyles",void 0),(0,i.gn)([I.LO],de.prototype,"imageSource",void 0),(0,i.gn)([I.LO],de.prototype,"isReducedMotionActive",void 0),(0,i.gn)([I.LO],de.prototype,"isTTVRFired",void 0),(0,i.gn)([I.LO],de.prototype,"isLoadComplete",void 0),(0,i.gn)([I.LO],de.prototype,"museumBottom",void 0),(0,i.gn)([I.LO],de.prototype,"museumCard",void 0),(0,i.gn)([I.LO],de.prototype,"museumCreditsCardIsShown",void 0),(0,i.gn)([I.LO],de.prototype,"isBackgroundDefaultedToOff",void 0),(0,i.gn)([I.LO],de.prototype,"isChinaCompliance",void 0),(0,i.gn)([I.LO],de.prototype,"showToast",void 0),(0,i.gn)([I.LO],de.prototype,"telemetryTags",void 0),(0,i.gn)([I.LO],de.prototype,"toastMessage",void 0),(0,i.gn)([I.LO],de.prototype,"videoPlaying",void 0),(0,i.gn)([I.LO],de.prototype,"videoSource",void 0),(0,i.gn)([(0,E.Lj)({converter:E.Id})],de.prototype,"spaceHolderHeight",void 0),(0,i.gn)([(0,E.Lj)({mode:"boolean"})],de.prototype,"showFullPageBlur",void 0),(0,i.gn)([E.Lj],de.prototype,"bgBlurSize",void 0),(0,i.gn)([I.LO],de.prototype,"secondaryButtonTelemetryTag",void 0),(0,i.gn)([I.LO],de.prototype,"imageEditButtonTelemetryTag",void 0),(0,i.gn)([I.LO],de.prototype,"turnOnHolidaySwitchButtonTelemetryTag",void 0),(0,i.gn)([I.LO],de.prototype,"turnOffHolidaySwitchButtonTelemetryTag",void 0),(0,i.gn)([I.LO],de.prototype,"copilotShowCard",void 0),(0,i.gn)([I.LO],de.prototype,"backgroundGalleryButtonEnabled",void 0),(0,i.gn)([I.LO],de.prototype,"canRenderNonSsrElements",void 0),(0,i.gn)([I.LO],de.prototype,"isDarkMode",void 0),(0,i.gn)([I.LO],de.prototype,"holidayBackground",void 0),(0,i.gn)([I.LO],de.prototype,"backgroundGalleryRef",void 0),(0,i.gn)([I.LO],de.prototype,"enableBackgroundGalleryCard",void 0);var ue=n(49218),le=n(41472),pe=n(93703),he=n(77317),ge=n(79744),fe=n(49903);he.Z;const me=ue.dy`<img class="picture" id="backgroundImagePicture" src=${e=>e.imageSource} style=${e=>e.imageOverrideStyles} @load=${e=>e.loadComplete()} @error=${e=>e.error(e.imageSource)}></img>`,ye=ue.dy`<div class="museumButtonContainer" ${(0,le.i)("ref_museumButtonContainer")}></div>`,ve=ue.dy`<div class="backgroundGalleryButtonContainer"><fluent-button appearance="outline" class="backgroundGalleryButton" @click=${e=>e.onClick_openGalleryButton()} @focusout=${e=>e.onFocusLeave_backgroundGalleryButton()} title="${e=>e.backgroundGalleryButtonEnabled?e.strings.backgroundGalleryButtonText:e.strings.backgroundGalleryBelowMinimumWidthTooltip}" ?disabled=${e=>!e.backgroundGalleryButtonEnabled} data-t="${e=>e.telemetryTags?.backgroundGalleryButton}" ${(0,le.i)("ref_backgroundGalleryButton")}><span class="backgroundGalleryButtonText">${e=>e.strings.backgroundGalleryButtonText}</span></fluent-button></div>`,Se=ue.dy`<div class="museumCardCreditsContainer" ${(0,le.i)("ref_museumCreditsContainer")}><div class="museumCardTitleContainer">${(0,pe.g)((e=>e.museumCard.titleURL),ue.dy`<a class="museumCardTitle museumCardTitleAnchor" data-t="${e=>e.telemetryTags?.cardTitle}" href="${e=>e.museumCard.titleURL}" target="_blank">${e=>e.museumCard.title}</a>`)} ${(0,pe.g)((e=>!e.museumCard.titleURL),ue.dy`<p class="museumCardTitle">${e=>e.museumCard.title}</p>`)}<p class="museumCardCredits ${e=>e.backgroundGalleryEligibility&&"Event"!==e.currentProvider?"backgroundGallery":""}">${e=>e.museumCard.credits}</p></div>${(0,pe.g)((e=>!e.backgroundGalleryEligibility||"Event"===e.currentProvider),ue.dy`<div class="museumCardDivider"></div>${(0,pe.g)((e=>"Event"===e.currentProvider),ye)}</div>`)} ${(0,pe.g)((e=>e.backgroundGalleryEligibility&&"Event"!==e.currentProvider),ue.dy`<div class="copyrightContainer">${e=>`© ${e.strings.copyrightText}`}</div>${ve} `)}
`,we=(0,pe.g)((e=>e.museumCard&&e.museumBottom>0&&e.canRenderNonSsrElements),ue.dy`<div class="museumCard ${e=>e.museumCreditsCardIsShown?"museumCardVertical":"museumCardVerticalHide"} ${e=>e.holidayBackground&&e.config.holidayImage&&!e.isDarkMode?"holidayLight":""} " style="${e=>`bottom:${e.museumBottom}px; right:50px`}" ${(0,le.i)("ref_museumCardContainer")}>${(0,pe.g)((e=>e.museumCreditsCardIsShown&&!e.enableBackgroundGalleryCard),Se)} ${(0,pe.g)((e=>e.museumCreditsCardIsShown&&e.backgroundGalleryRef&&e.enableBackgroundGalleryCard),ue.dy`<div id="backgroundGalleryContainer" class="bgCard">${e=>(0,fe.Ot)(e.backgroundGalleryRef,{memoize:!1,ttvrMarkerAggregate:"Header",properties:{cardMode:!0}})}</div>`)}</div>`),be=ue.dy`<span class="overlay ${e=>e.museumCreditsCardIsShown||"Theme"===e.currentProvider?"overlay_hide":""} ${e=>e.showFullPageBlur&&!e.museumCreditsCardIsShown?"windowsBlur":""}" data-mscc-ic="false" id="backgroundImageOverlay" ${(0,le.i)("ref_backgroundOverlay")}></span>${(0,pe.g)((e=>e.config&&!e.museumCreditsCardIsShown&&"Theme"!==e.currentProvider&&!(e.holidayBackground&&e.config.holidayImage&&!e.config.enableEventGleamImage)),ue.dy`<span class="overlayGradient ${e=>e.showFullPageBlur?"overlayGradientTranslucent":""} ${e=>e.config.enableBrightBgForHoliday&&"hero"===e.currentProvider&&!e.isDarkMode?"lightBG":""}"></span>`)}
`,Ce=e=>e.museumCreditsCardIsShown,Te=ue.dy` ${me} ${be}
`,ke=ue.dy` ${me} ${be}
`,Pe=ue.dy` ${me} ${be}
`,Ae=ue.dy` ${me} ${be} ${(0,pe.g)(Ce,ue.dy`${we}`)}
`,Ie=ue.dy` ${me} ${be}
`,Ee=ue.dy`<msn-toast class="toast" style="${e=>`bottom:${e.museumBottom}px`}">${e=>e.toastMessage}</msn-toast>`,Re=ue.dy`<video class="video" loop muted src="${e=>e.videoSource}" poster="${e=>e.imageSource}" @canplaythrough=${e=>e.playVideo()} @error=${e=>e.error(e.videoSource)} ${(0,le.i)("ref_video")}></video>`,Me=ue.dy` ${(0,pe.g)((e=>e.imageSource||e.videoSource),ue.dy` ${Re} ${be} ${(0,pe.g)(Ce,ue.dy`${we}`)} ${(0,pe.g)((e=>e.showToast&&e.canRenderNonSsrElements),Ee)} `)}
`,xe=ue.dy` ${me} ${be} ${(0,pe.g)(Ce,ue.dy`${we}`)}
`,Le=ue.dy` ${(0,pe.g)((e=>"Video"===e.currentProvider),ue.dy` ${(0,pe.g)((e=>e.imageSource||e.videoSource),ue.dy` ${Re} ${(0,pe.g)((e=>e.showToast&&e.canRenderNonSsrElements),Ee)} `)} `,ue.dy` ${me} `)} ${be} ${(0,pe.g)(Ce,ue.dy`${we}`)}
`,Fe=(0,ge.M)("TTSR.BackgroundImageWC"),De=["Event","CMSImage","Video"],Oe=ue.dy`<div class="backgroundImage" id="backgroundImage" ${(0,le.i)("ref_backgroundImage")}>${e=>{if(e.enableBackgroundGalleryCard&&De.includes(e.currentProvider))return Le;switch(e.currentProvider){case"BrowserLocal":return Te;case"FREBackground":return Pe;case"Event":return Ae;case"NoBackground":return null;case"Theme":return Ie;case"Video":return Me;case"CMSImage":case"hero":return xe;default:return ke}}}</div>${Fe}
`;var _e=n(22674),Ne=n(78923),Be=n(29717);const Ue=Ne.i` .backgroundGalleryButtonContainer{padding-left:12px}.copyrightContainer{padding-left:12px}.museumCard{left:initial;right:12px}`,$e=Ne.i` .backgroundGalleryButtonContainer{padding-right:12px}.copyrightContainer{padding-right:12px}.museumCard{left:12px;right:initial}`,He=Ne.i` .windowsBlur{background:rgba(31,31,31,0.7)}`,We=Ne.i`:not(:defined){visibility:hidden}.backgroundGalleryButtonContainer{padding-bottom:4px;width:362px}.backgroundGalleryButtonText{color:white}.copyrightContainer{color:rgba(255,255,255,0.54);padding-bottom:10px}fluent-button.backgroundGalleryButton::part(control){border-radius:16px}.white-icon svg{fill:white}.backgroundImage{height:100%;width:100%}.museumCard{color:#fff;opacity:1;position:absolute;transition:opacity 0.2s;z-index:100}.museumCard_hide{opacity:0;transition:opacity 0.2s}.museumCardCredits{color:rgba(255,255,255,0.54);font-size:13px;margin:10px 0px 16px 0px;user-select:none}.museumCardCredits.backgroundGallery{margin:10px 0px 12px 0px}.museumCardCreditsContainer{background:rgba(0,0,0,.77);border-bottom:1px solid transparent;border-radius:4px;font-family:inherit;font-size:12px;font-weight:400;margin-bottom:10px;max-width:384px;padding:8px 4px}.museumCardDivider{background-color:rgba(255,255,255,0.54);height:1px;margin:4px 12px;width:350px}.museumCardIcon{display:inline;fill:#fff;font-size:20px;height:14px;position:relative;top:1px;width:20px}.museumCardTextContainer{background:none;border:none;color:#fff;display:inline;height:auto;padding-left:12px;padding-right:12px;position:relative;text-decoration:none;width:auto}.museumCardTextContainer:hover{cursor:pointer}.museumCardTitle{color:#fff;font-family:inherit;font-size:20px;font-weight:400;line-height:24px;margin:4px 0px;text-decoration:none;user-select:none}.museumCardTitleAnchor:hover{cursor:pointer;text-decoration:underline}.museumCardTitleContainer{padding:0px 12px}.overlayGradient{width:120%;height:100%;position:absolute;top:0;background-image:radial-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 100%),radial-gradient(rgba(0,0,0,0) 33%,rgba(0,0,0,0.3) 166%);transform:translateZ(0px);backface-visibility:hidden;perspective:1000px;transition:all 0.07s ease-out 0s}.overlayGradient.overlayGradientTranslucent{opacity:0}.overlayGradient.lightBG{background-image:radial-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.35) 100%),radial-gradient(rgba(0,0,0,0) 33%,rgba(0,0,0,0.3) 166%)}.overlay{top:0;backdrop-filter:blur(60px);transition:all 0.4s ease-out 0s;position:absolute;width:100%;height:100%;opacity:0}.overlay_hide{opacity:0}.picture{background-position:center;background-repeat:no-repeat;background-size:cover;height:100%;margin:0;object-fit:cover;padding:0;position:absolute;width:100%}.toast{bottom:32px;left:50%;position:fixed;transform:translate(-50%,0);width:fit-content;z-index:${String(a.K.Over)}}.video{height:100%;margin:0;object-fit:cover;padding:0;position:absolute;width:100%}.windowsBlur{background:rgba(255,255,255,.55);height:100%;position:absolute;width:120%;z-index:1;transform:translateZ(0px);backface-visibility:hidden;perspective:1000px;opacity:1}#backgroundImage{opacity:1;visibility:visible;transition:opacity 0.5s ease,visibility 0.5s ease}#backgroundImage.hidden{opacity:0;visibility:hidden;transition:opacity 0.5s ease,visibility 0.5s ease}`.withBehaviors((0,Be.Uu)(He)),Ge=We.withBehaviors(new _e.O(Ue,$e));var Ve;!function(e){e.Secondary="backgroundImageWCSecondary",e.Edit="backgroundImageWCEdit",e.Toggle="backgroundImageWCToggle",e.StatesSync="backgroundImageWCStatesSync",e.StatesSyncAsk="backgroundImageWCStatesSyncAsk",e.EventToggle="eventToggle",e.CloseSpotlight="backgroundImageWCCloseSpotlight"}(Ve||(Ve={}));const qe={experienceConfigSchema:undefined}},27906:function(e,t,n){var i,r,o,a,s;n.d(t,{HI:function(){return u},I8:function(){return s},Iz:function(){return a},OZ:function(){return l},VK:function(){return f},Xb:function(){return o},bi:function(){return m},ej:function(){return g},f8:function(){return y},hU:function(){return h},iR:function(){return r},pg:function(){return v},sC:function(){return p},t$:function(){return c},us:function(){return i},y4:function(){return d}}),function(e){e.Email="email",e.Facebook="facebook",e.Line="line",e.LinkedIn="linkedin",e.Skype="skype",e.Twitter="twitter",e.VK="vk",e.WhatsApp="whatsapp"}(i||(i={})),function(e){e.Share="share",e.ShareV2="shareV2",e.Mute="mute",e.Report="report",e.ReportAd="reportad",e.WhyAmISee="whyAmISee",e.LocationEdit="locationEdit",e.LocationManage="locationManage"}(r||(r={})),function(e){e.cancel="Cancel",e.cardAction="CardAction",e.closeHeadline="Close dialog",e.closeModule="Dismiss",e.copy="Copy",e.hideMenuItem="Hide",e.hideHeadline="Hide Story",e.manageInterestsMenuItem="ManageInterests",e.muteMenuItem="MutePublisher",e.muteWebVideoMenuItem="MuteWebVideo",e.muteButton="Mute",e.muteConfirmation="Hide Stories from Publisher",e.reportAdHeadline="Report an issue",e.reportAdMenuItem="ReportAd",e.reportButton="Submit",e.reportChecked="Checked",e.reportDialog="ReportedReason",e.reportHeadline="Report an issue",e.reportMenuItem="ReportArticle",e.reportUnchecked="Unchecked",e.reportDialogFeedbackText="Feedback",e.reportDialogPrivacyStatement="Privacy Statement",e.saveMenuItem="SaveContent",e.showFewerHeadline="Fewer stories like this",e.showFewerMenuItem="ShowFewer",e.showMoreHeadline="More stories like this",e.showMoreMenuItem="ShowMore",e.shareArticle="ShareArticle",e.shareDialog="Share",e.toastButton="ToastButton",e.upvote="Upvote",e.adPrivacy="AdPrivacy",e.feedbackMenuItem="Feedback",e.whyAmISeeChannelStoreLink="WhyAmISeeChannelStoreLink",e.whyAmISeeMenuItem="ExplainableAlOverlay",e.whyAmISee="whyamiseeingthis",e.yes="yesbutton",e.no="nobutton",e.followTopic="FollowTopic",e.unfollowTopic="UnfollowTopic",e.followPublisher="FollowPublisher",e.unfollowPublisher="UnfollowPublisher",e.openNewTab="OpenNewTab",e.openNewWindow="OpenNewWindow",e.copyLink="CopyLink",e.copyImageLink="CopyImageLink",e.whyAmISeeMenuButton="WhyAmISeeingThis",e.saveTooltipButton="Personalize"}(o||(o={})),function(e){e.breakingNews="breakingNews",e.followPublisher="followPublisher",e.followTopic="followTopic",e.interacted="interacted",e.local="local",e.trending="trending",e.explore="explore",e.u2u="u2U",e.default="default",e.explicitLike="explicitLike",e.userSearchSignal="userSearchSignal",e.cF_U2i="cF_U2i",e.cF_I2i="cF_I2i",e.cF_Swing_i2i="cF_Swing_i2i",e.cF_U2u="cF_U2u",e.cF_Topic_cf="cF_Topic_cf",e.cF_Cross_domain="cF_Cross_domain",e.cF_Ip="cF_Ip",e.cF_Topic_plus="cF_Topic_plus",e.trending_in_industry="trending_in_industry",e.trending_related_comp="trending_related_comp",e.trending_in_location="trending_in_location",e.trending_in_company="trending_in_company",e.contentExplore="contentExplore",e.fallback="fallback"}(a||(a={})),function(e){e.InappropriateAd="InappropriateAd",e.MisleadingAd="MisleadingAd",e.NotInterested="NotInterested",e.RepeatedAd="RepeatedAd",e.VisuallyPoorAd="VisuallyPoorAd"}(s||(s={}));const c=(e,t,n="828282")=>`https://placehold.it/${e}x${t}/${n.replace("#","")}/`,d={personalize:"Personalize",myInterests:"MyInterests"},u=5e3,l="/{locale}/feed/personalize",p="/{locale}/feed/personalize/settings",h="/{locale}/feed/personalize#mutedPublishers",g="{locale}",f="https://www.msn.com",m="https://account.microsoft.com/privacy/ad-settings/",y="https://go.microsoft.com/fwlink/?LinkId=521839",v="toggleWidgetPicker"},35076:function(e,t,n){n.r(t),n.d(t,{CommonSearchBoxEdgeNext:function(){return _},CommonSearchBoxEdgeNextStyles:function(){return Q},CommonSearchBoxEdgeNextTemplate:function(){return V},ToolingInfo:function(){return J}});var i=n(99475);var r=n(77615),o=n(33940),a=n(25487),s=n(523),c=n(70041),d=n(81586),u=n(44132),l=n(24032),p=n(98130),h=n(96315),g=n(13218),f=n(98604),m=n(26197),y=n(242),v=n(43225),S=n(86117),w=n(79403),b=n(42122),C=n(29715),T=n(21215),k=n(99452),P=n(22745),A=n(82928),I=n(24318),E=n(26156),R=n(34254),M=n(77770),x=n(14969),L=n(10545),F=n(70970),D=n(94769);const O=["pc","pcmpc","ucpdpc","adppc"];class _ extends C.l{constructor(){super(...arguments),this.enableSearchAutoSuggestion=!1,this.enableWarmBingUrl=!1,this.options=null,this.commonSearchBoxRef=null,this.inputElementHasInput=!1,this.currentInputValue="",this.searchVisible=!0,this.placeholderText="",this.searchIconTreatment=0,this.showBingLogo=!1,this.canShowCodexBingUpsellByPolicy=!1,this.canShowCodexBingButton=!1,this.outsideCodexButtonStyle=!1,this.outsideCodexBtnFullPageLayout=!1,this.isFeedDisabled=!1,this.isRuby=I.FI.isRuby,this.isVisionIconEnabled=!1,this.isDefaultSearchBing="0"!==(0,l.L)().get("dsp"),this.codexBingChatTelemetryTags="",this.visionIconTelemetryTags="",this.enableCodexBingIconStyles=!1,this.enableContextualSuggest=!1,this.enableSearchBtnOpenInNewTab=!1,this.enableTrendingSearchAPICall=!1,this.handleFocusEvent=()=>{this.fakeFocused=!0,this.searchboxApiHandle&&this.searchboxApiHandle.startCapturingKeyStrokes()},this.handleMouseDownEvent=e=>{this.commonSearchBoxRef&&this.commonSearchBoxRef!==e.target&&this.fakeFocused&&(this.fakeFocused=!1,this.searchboxApiHandle&&this.searchboxApiHandle.stopCapturingKeyStrokes())},this.onInputStart=()=>{this.fakeFocused&&(this.fakeFocused=!1,this.searchVisible=!1)},this.onInputCancel=()=>{this.searchVisible=!0},this.onKeyCaptureChange=()=>{this.searchboxApiHandle&&(this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled)},this.handInputEvent=e=>{const t=e.target.value;this.inputElementHasInput=!!t,this.currentInputValue=t},this.clickVisionIcon=()=>{"function"==typeof window.chrome?.edgeCopilotPrivate?.launchVision&&window.chrome?.edgeCopilotPrivate?.launchVision("NTPVIS")}}placeholderTextChanged(e,t){t!==e&&(this.options=this.options&&{...this.options,localizedStrings:{...this.options.localizedStrings,placeholderText:this.placeholderText}})}experienceConnected(){const e=(0,A.K0)(s.RL)?.getCurrentState();this.enableFocusRedirect=e?.configData?.inPageSearchBoxType===a.HT.redirect,this.isProjectEqual=e?.configData?.isEnrolledInProjectEqual,this.enableCodexBingIconStyles=!!this.config.showCodexBingIcon&&e&&"always"===e.selectedFeedDisplaySetting,this.enableContextualSuggest=!!this.config.enableContextualSuggest,this.config.enableOpenInNewTab&&(this.searchTarget=e?.openInNewTab?"_blank":"_self"),this.config.searchIconTreatment&&!this.isRuby&&(this.searchIconTreatment=this.config.searchIconTreatment),this.enableSearchBtnOpenInNewTab=!!this.config.searchBtnOpenInNewTab&&!!e?.openInNewTab,this.canShowCodexBingUpsellByPolicy=!(0,p.Yq)().isAadAccountUser||(e?.isCodexBingUpsellEnabledByPolicy??!1),this.canShowCodexBingButton=!!this.config.childExperienceReferencesWC?.CodexBingChat&&this.canShowCodexBingUpsellByPolicy;const t=window;if(t.chrome&&t.chrome.embeddedSearch&&(this.ntpApiHandle=t.chrome.embeddedSearch.newTabPage,this.searchboxApiHandle=t.chrome.embeddedSearch.searchBox),this.showBingLogo=!this.isDefaultSearchBing&&!this.enableFocusRedirect&&!this.config?.childExperienceReferencesWC?.CodexBingChat,this.isDefaultSearchBing||(0,p.Yq)().CurrentMarket!==h.IY.ZHCN||(this.showBingLogo=!1),this.config.enableContextualSuggest&&this.config.trendingSearchConfig&&(this.config.trendingSearchOnlyInAlways?this.enableTrendingSearchAPICall="always"===e.selectedFeedDisplaySetting:this.enableTrendingSearchAPICall=["always","peek"].includes(e.selectedFeedDisplaySetting||"")),this.canShowCodexBingButton&&(this.codexBingChatTelemetryTags=(0,F.u)("headersearch").getMetadataTag()),this.populateCommonSearchBoxOptions(),this.setTelemetryPersonalizationParam(),this.detectLockscreenAndUpdateFormId(),(0,T.N)()&&window.searchFormSubmitListener&&window.requestAnimationFrame((()=>{this.commonSearchBoxRef?.formElement&&this.commonSearchBoxRef.formElement.removeEventListener("submit",window.searchFormSubmitListener)})),this.config.enableOpenInNewTab&&(0,P.Uo)(s.RL,(e=>{const t=e.openInNewTab?"_blank":"_self";this.searchTarget!==t&&(this.searchTarget=t,this.options=this.options&&{...this.options,target:this.searchTarget})})),this.config.searchBtnOpenInNewTab&&(0,P.Uo)(s.RL,(e=>{const t=e.openInNewTab;null!=t&&t!=this.enableSearchBtnOpenInNewTab&&(this.enableSearchBtnOpenInNewTab=t,this.options=this.options&&{...this.options,searchBtnOpenInNewTab:this.enableSearchBtnOpenInNewTab})})),this.config.outsideCodexButtonStyle&&this.canShowCodexBingButton&&!this.isRuby){const t=e=>{this.outsideCodexButtonStyle=!e||!!this.config.outsideCodexBtnFullPageLayout,this.outsideCodexBtnFullPageLayout=e&&this.config.outsideCodexBtnFullPageLayout};t("always"==e?.selectedFeedDisplaySetting),(0,P.Uo)(s.RL,(e=>{t("always"==e?.selectedFeedDisplaySetting)}))}const n=this.isRuby&&this.config.enableVisionIconRuby||!this.isRuby&&!this.config.enableVisionIconRuby;this.config.visionIconInSearchBoxExp&&n&&(0,M.lr)().then((()=>this.isAPIEnabled().then((e=>{this.isVisionIconEnabled=!!this.config.enableVisionIconInSearchBox&&e,this.isVisionIconEnabled&&(this.visionIconTelemetryTags=(0,F.u)("headervisionsearch",d.wu.Launch,d.Aw.Click).getMetadataTag())}))))}shadowDomPopulated(){if((0,T.N)()){const e=(0,y.Ou)();(0,v.c)((()=>{const t=e[S.nz+"SearchBox"],n=t&&void 0===e.isSSRAborted;this.markVisuallyReady(n?t:void 0,!n)})),(0,x.eC)().then((()=>(0,L.f)(63,g.Al.IsPrerender)))}else(0,w.hf)("SSR.SearchBoxRendered",(0,y.UE)());!this.config.enableClarity&&(0,p.Yq)().ClarityEnabled&&(this.options=this.options&&{...this.options,enableClarity:!0}),this.setPlaceholderText(),(0,f.FY)(m._.searchBox,this);const e=this.commonSearchBoxRef&&this.commonSearchBoxRef.shadowRoot&&this.commonSearchBoxRef.shadowRoot.querySelector?.("#q");e&&(this.inputElement=e,this.canShowCodexBingButton&&this.inputElement.addEventListener("input",this.handInputEvent),(0,f.FY)(m._.searchBoxInput,this.inputElement)),this.enableFocusRedirect?this.registerFocusRedirectHandler():this.config.enableDelayASAfterReveal?(0,M.lr)().then((()=>{this.enableSearchAutoSuggestion=!0})):this.enableSearchAutoSuggestion=!0,Promise.all([(0,R.F_)(),(0,M.lr)()]).then((()=>{this.enableWarmBingUrl=!0})).catch((()=>{b.k.logError("Failed to wait for ATF visually ready and reveal")}))}getExperienceType(){return c.zK8}isAPIEnabled(){return new Promise((e=>{"function"==typeof window.chrome?.edgeCopilotPrivate?.isVisionEnabledForUser?window.chrome?.edgeCopilotPrivate?.isVisionEnabledForUser((t=>{u.M0.addOrUpdateTmplProperty("visionIconEligible"+(this.isRuby?"Ruby":""),t.toString()),e(t)})):(u.M0.addOrUpdateTmplProperty("visionIconEligible"+(this.isRuby?"Ruby":""),"undefined"),e(!1))}))}setPlaceholderText(){if(!this.config.localizedStrings)return;const e=this.canShowCodexBingUpsellByPolicy&&(this.config.enableCopilotCarryTerm||this.config.enableAskCopilotSuggestion),{placeholderText:t,copilotPlaceholderText:n,placeholderTextMSNntp:i,placeholderTextMSNntpv2:r,placeholderTextT1:o,placeholderTextT2:a,tenantMissingEnterprisePlaceholderText:c}=this.config.localizedStrings;if(!(0,p.Yq)().isAadAccountUser||this.config.removeAADPlaceholder)return this.placeholderText=t,this.config&&e&&!this.isRuby&&(this.placeholderText=n),this.config&&!0===this.config.enableWebAPISuggetion&&this.config.enableMSNSuggestions&&(1===this.config.enableMSNSuggestions&&i?this.placeholderText=i:2===this.config.enableMSNSuggestions&&r&&(this.placeholderText=r)),void(1===this.config.placeholderTextTreatment&&o?this.placeholderText=o:2===this.config.placeholderTextTreatment&&a?this.placeholderText=a:3===this.config.placeholderTextTreatment&&(this.placeholderText=""));let d=!1;const u=(0,A.K0)(s._S)?.getCurrentState();u&&(d=!0,this.setEnterprisePlaceholderTextWithAdminSettings(u)),(0,P.Uo)(s._S,(e=>{d=!0,this.setEnterprisePlaceholderTextWithAdminSettings(e)})),d||(this.placeholderText=c)}setEnterprisePlaceholderTextWithAdminSettings(e){if(!this.config.localizedStrings)return;const{tenantMissingEnterprisePlaceholderText:t,tenantAvailableEnterprisePlaceholderText:n}=this.config.localizedStrings;if(this.placeholderText)return;if(!e.settingsDataRecieved)return;const{company:i,isMsbEnabled:r}=e.settings||{};this.placeholderText=r&&i?n.replace(/\{0\}/g,i):t}getFormParameters(){const e={...this.config.additionalFormParamMap};e.refig=u.M0.getRequestId();const{formCodes:t}=this.config;e.form=this.isDefaultSearchBing?t?.bingSearchEngine:t?.nonBingSearchEngine,O.forEach((t=>{const n=(0,l.L)().get(t.toUpperCase())||(0,l.L)().get(t)||"";n&&(e[t]=n)}));const n=(0,E.IS)(),i=n?.enabled?.find((e=>"msEdgePartnerCodeActive_AnyDesk"===e||"msEdgePartnerCodeActive_ExpTester"===e))?.replace("msEdgePartnerCodeActive_","");return i&&(e.EPC=i),e}detectLockscreenAndUpdateFormId(){if((0,p.Yq)().IsHeroNTP){const e=(0,D.F$)()?this.config?.formCodes?.lockscreenWin11:this.config?.formCodes?.lockscreenWin10;e&&this.options?.additionalFormParamMap&&(this.options.additionalFormParamMap.form=e)}}populateCommonSearchBoxOptions(){this.options={...this.config,target:this.searchTarget,enableCodexBingIconStyles:this.enableCodexBingIconStyles,enableContextualSuggest:this.enableContextualSuggest,trendingSearchConfig:this.enableTrendingSearchAPICall?this.config.trendingSearchConfig:void 0,searchBtnOpenInNewTab:this.enableSearchBtnOpenInNewTab,localizedStrings:{...this.strings,placeholderText:this.placeholderText,inputTitle:this.strings?.inputTitle},additionalFormParamMap:this.getFormParameters(),childExperienceReferencesWC:this.config.childExperienceReferencesWC}}registerFocusRedirectHandler(){this.ntpApiHandle&&(this.ntpApiHandle.oninputstart=this.onInputStart,this.ntpApiHandle.oninputcancel=this.onInputCancel,this.ntpApiHandle.isInputInProgress&&this.onInputStart()),this.searchboxApiHandle&&(this.searchboxApiHandle.onkeycapturechange=this.onKeyCaptureChange,this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled,this.searchboxApiHandle.isKeyCaptureEnabled&&this.searchboxApiHandle.startCapturingKeyStrokes()),this.commonSearchBoxRef&&this.commonSearchBoxRef.addEventListener("focus",this.handleFocusEvent),document.body.addEventListener("mousedown",this.handleMouseDownEvent)}setTelemetryPersonalizationParam(){const e={page:{has3PSearch:!this.isDefaultSearchBing,isSearchAB:this.enableFocusRedirect}};u.M0.updatePageMetadata(e)}clickBingIcon(){this.commonSearchBoxRef&&this.commonSearchBoxRef.onSubmit()}disconnectedCallback(){super.disconnectedCallback(),this.canShowCodexBingButton&&this.inputElement?.removeEventListener("input",this.handInputEvent),this.enableFocusRedirect&&(this.commonSearchBoxRef&&this.commonSearchBoxRef.removeEventListener("focus",this.handleFocusEvent),document.body.removeEventListener("mousedown",this.handleMouseDownEvent))}}(0,o.gn)([k.LO],_.prototype,"enableSearchAutoSuggestion",void 0),(0,o.gn)([k.LO],_.prototype,"enableWarmBingUrl",void 0),(0,o.gn)([k.LO],_.prototype,"options",void 0),(0,o.gn)([k.LO],_.prototype,"inputElementHasInput",void 0),(0,o.gn)([k.LO],_.prototype,"currentInputValue",void 0),(0,o.gn)([k.LO],_.prototype,"fakeFocused",void 0),(0,o.gn)([k.LO],_.prototype,"searchVisible",void 0),(0,o.gn)([k.LO],_.prototype,"placeholderText",void 0),(0,o.gn)([k.LO],_.prototype,"searchIconTreatment",void 0),(0,o.gn)([k.LO],_.prototype,"showBingLogo",void 0),(0,o.gn)([k.LO],_.prototype,"canShowCodexBingUpsellByPolicy",void 0),(0,o.gn)([k.LO],_.prototype,"canShowCodexBingButton",void 0),(0,o.gn)([k.LO],_.prototype,"outsideCodexButtonStyle",void 0),(0,o.gn)([k.LO],_.prototype,"outsideCodexBtnFullPageLayout",void 0),(0,o.gn)([k.LO],_.prototype,"isFeedDisabled",void 0),(0,o.gn)([k.LO],_.prototype,"isRuby",void 0),(0,o.gn)([k.LO],_.prototype,"isVisionIconEnabled",void 0);var N=n(49218),B=n(41472),U=n(93703),$=n(49903);const H=N.dy`<div slot=${e=>e.config.searchButtonOnRight?"search-options-left":"search-options"} class="bing-logo-container"><fluent-button class="bing-logo-btn bing-logo-o" ${e=>e.config.searchButtonOnRight?"bing-logo-left":""}" part="button" title=${e=>e.strings&&e.strings.bingIconText} aria-label=${e=>e.strings&&e.strings.bingIconText} appearance="stealth" @click="${e=>e.clickBingIcon()}" @keypress="${e=>e.clickBingIcon()}" data-t="${e=>e.commonSearchBoxRef?.buttonTelemetryTag}" data-customhandled="true"><img src=${()=>`${(0,p.Yq)().StaticsUrl}/latest/icons/BingLogo.svg`}></fluent-button></div>`,W=N.dy`<div slot="${e=>!e.outsideCodexButtonStyle&&e.config?.showCodexButtonInBox?"search-options":"codex-bing-chat"}" data-t="${e=>e.codexBingChatTelemetryTags}" class="${e=>e.isRuby?"search-bing-chat-kumo":""}">${e=>e.options&&e.options.childExperienceReferencesWC?.CodexBingChat&&(0,$.Ot)(e.options.childExperienceReferencesWC.CodexBingChat,{properties:{showCodexButtonInBox:!e.outsideCodexButtonStyle&&e.config?.showCodexButtonInBox,outsideCodexButtonStyle:e.outsideCodexButtonStyle,outsideCodexBtnFullPageLayout:e.outsideCodexBtnFullPageLayout,target:e.searchTarget,isSearchBoxRuby:e.isRuby,searchValue:e.currentInputValue}})}</div>`,G=N.dy`<div slot="search-options" class="vision-icon-container"><button class="vision-search-icon ${e=>e.isRuby?"kumo":""}" data-t="${e=>e.visionIconTelemetryTags}" aria-label=${e=>e.config.localizedStrings?.visionIconAltText} title=${e=>e.config.localizedStrings?.visionIconAltText} @click=${e=>e.clickVisionIcon()}></button></div>`,V=N.dy`<cs-common-search-box ${(0,B.i)("commonSearchBoxRef")} :isRuby=${e=>e.isRuby} :options=${e=>e.options} :enableAutoSuggestion=${e=>e.enableSearchAutoSuggestion} :enableWarmBingUrl=${e=>e.enableWarmBingUrl} :fakeFocused=${e=>e.fakeFocused} :disableSubmit=${e=>e.enableFocusRedirect} :isFeedDisabled=${e=>e.isFeedDisabled} :searchVisible=${e=>e.searchVisible} :placeholderColor=${e=>e.config.placeholderColor} :hoverFocusOutlineStyle=${e=>e.config.hoverFocusOutlineStyle} :hoverFocusDeeperShadowStyle=${e=>e.config.hoverFocusDeeperShadowStyle} :searchIconTreatment=${e=>e.searchIconTreatment} :searchIconColor=${e=>e.config.searchIconColor} :enableDimMask=${e=>e.enableSearchAutoSuggestion&&e.config.enableDimMask} :dimMaskOpacity=${e=>e.config.dimMaskOpacity} :enableConditionalSchBtn=${e=>e.config.enableConditionalSchBtn} :fixSpyGlassNewTabBehavior=${e=>e.config.fixSpyGlassNewTabBehavior} exportparts="root, searchcore" :usePageBreakpoints=${e=>!!e.config.usePageBreakpoints} :outsideCodexBtnFullPageLayout=${e=>e.outsideCodexBtnFullPageLayout} :enableAltBorder=${e=>e.config.enableAltBorder} :enableAltSearchBox=${e=>e.config.enableAltSearchBox} :enableAltSearchboxShadow=${e=>e.config.enableAltSearchboxShadow}>${(0,U.g)((e=>e.isVisionIconEnabled),G)} ${(0,U.g)((e=>e.canShowCodexBingButton&&(!e.inputElementHasInput||e.config.enableCopilotCarryTerm&&e.inputElementHasInput)),W)} ${(0,U.g)((e=>e.showBingLogo),H)}</cs-common-search-box>`;var q=n(78923),j=n(22674);const z=q.i`
.bing-logo-btn{border-radius:0 var(--search-box-radius) var(--search-box-radius) 0}`,K=q.i`
.bing-logo-btn{border-radius:var(--search-box-radius) 0 0 var(--search-box-radius)}`,Q=q.i` :host{--mic-vision-icon:url(${`${(0,p.Yq)().StaticsUrl}latest/icons/MicIconLight.svg`})}.bing-logo-btn{height:46px;background:transparent;padding:0;border:none}.bing-logo-o::part(control){padding-inline-end:11px}.bing-logo-left::part(control){padding-inline-end:0px}.bing-logo-btn > img{margin:12px 2px;height:22px;width:22px;vertical-align:bottom}.search-bing-chat-kumo codex-bing-chat::part(cbb-container){height:48px;border:unset !important;background:unset !important}.search-bing-chat-kumo codex-bing-chat::part(cbb-icon){width:28px;height:28px}.vision-icon-container{height:100%;display:grid;align-items:center;margin-inline-end:8px}.vision-search-icon{cursor:pointer;width:36px;height:36px;border:none;outline:none;background:transparent;border-radius:9px;display:grid;justify-content:center;align-items:center}.vision-search-icon::after{content:"";background-size:contain;background-image:var(--mic-vision-icon);width:24px;height:24px}.vision-search-icon:hover{background:rgba(0,0,0,0.04)}.vision-search-icon:active{background:rgba(0,0,0,0.12)}@media (prefers-color-scheme:dark){.vision-search-icon.kumo::after{background-image:url(${`${(0,p.Yq)().StaticsUrl}latest/icons/MicIconDark.svg`})}}`.withBehaviors(new j.O(z,K)),J={experienceConfigSchema:undefined};i.il.define(r.s.registry)},87208:function(e,t,n){function i(e){return{auctionRidOverride:e.auctionRidOverride,enableWidgetsRegion:e.enableWidgetsRegion,rubyConsumptionOnCohort:r(e),enableWpoAdRank:e.enableWpoAdRank}}function r(e){return e.addUxModeToConsumptionCohort?e.allowedRubyTargetedVersions:void 0}n.d(t,{L:function(){return i},o:function(){return r}})},71037:function(e,t,n){n.d(t,{$l:function(){return i},$u:function(){return d},D1:function(){return T},Dh:function(){return b},GL:function(){return m},JW:function(){return l},KA:function(){return v},KB:function(){return w},Od:function(){return u},Vj:function(){return h},Z:function(){return g},_1:function(){return k},aI:function(){return a},bD:function(){return o},bT:function(){return c},dR:function(){return f},n9:function(){return r},p_:function(){return S},q_:function(){return s},xV:function(){return y},yd:function(){return p}});const i="background",r="pivot",o="search",a="solidHeader",s="top",c="launchChannelStore",d="edgenext-base-V1",u=10,l=56,p=30,h=80,g=42,f=30;var m;!function(e){e[e.NoOverlap=0]="NoOverlap",e[e.PartialOverlap=1]="PartialOverlap",e[e.CompleteOverlap=2]="CompleteOverlap"}(m||(m={}));const y="hasSSRBasePageFeatureBeenCleanedUp",v="ssrBasePageCachingFeatureActive",S="lastUsedActivityId",w={editBackgroundImage:"BgRightClickMenuEditBackgroundImage",viewBackgroundImage:"BgRightClickMenuViewBackgroundImage",refreshPage:"BgRightClickMenuRefreshPage",contextMenu:"BgRightClickContextMenue"},b={widgetsUpsellButton:"WidgetsUpsellButton"};var C;!function(e){e.weather="weather",e.traffic="traffic",e.finance="finance",e.sports="sports",e.cegrowth="cegrowth"}(C||(C={}));const T="productivityHub",k=78},74982:function(e,t,n){n.d(t,{n:function(){return a}});var i=n(1713),r=n(21215),o=n(13218);async function a(){return new Promise((async e=>{if((0,r.N)()&&!o.Al?.IsPrerender)"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.isEdgeChatEnabled&&"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.sendCopilotQuery?window.chrome.edgeMarketingPagePrivate.isEdgeChatEnabled((t=>{e(t)})):e(!1);else{const t=await(0,i.oc)();e(t)}}))}},19735:function(e,t,n){n.d(t,{Ld:function(){return g},PN:function(){return h},kX:function(){return m}});var i=n(71037),r=n(44132),o=n(21215),a=n(15598),s=n(88537),c=n(27687);const d=e=>{const t=!e.isRecommendedSitesEnabled||"off"===e.recommendedSitesDisplaySetting;return e.isFeedAlways&&t&&!e.isTopSitesDisabled},u=e=>{let t=16;if(e.isFeedAlways&&!e.isTopSitesDisabled)t-=16;else if(e.isTopSitesDisabled&&e.isRecommendedSitesEnabled&&"off"!==e.recommendedSitesDisplaySetting)return 10;return t},l=e=>{let t=i.Od+e.topBannerOffsetHeight;return e.enableOneColumn&&(t=i.JW),t},p=e=>{let t=16;return d(e)&&(t=10),t},h=e=>{const{isTwoRowTopSites:t,isOneRowTopSites:n}=((e,t)=>{let n,i;if(t?.actualRowCount){const{actualRowCount:e}=t;n=2===e,i=1===e}else n="tworows"==e,i="onerow"==e;return{isTwoRowTopSites:n,isOneRowTopSites:i}})(e.layoutState.selectedQuickLinksDisplaySetting,e.topSitesLayoutState);return n?60:t?130:0},g=e=>{let t=(0,c.GU)(e.showHeroAboveNav,e.layoutState);return!e.isRecommendedSitesEnabled&&e.isTopSitesDisabled||(t+=24),t},f=e=>d(e)?10:(e=>{const t=!e.isRecommendedSitesEnabled||"off"===e.recommendedSitesDisplaySetting;return e.isFeedAlways&&t&&e.isTopSitesDisabled})(e)?6:e.isRecommendedSitesEnabled?"off"!==e.layoutState.currentBackgroundImageType&&e.childRefs.weatherOneLiner&&"off"===e.layoutState.selectedFeedDisplaySetting?i.Vj:i.yd-i.dR:i.yd,m=e=>{const t={logoRow:0},n=new Array;n.push({height:l(e)}),n.push({height:46,setCallback:e=>{t.searchRow=e}}),n.push({height:u(e)}),e.shouldRenderSuggestionPrompts&&n.push({height:52}),e.isTopSitesDisabled||e.showHeroAboveNav&&!(0,o.N)()||(n.push({height:p(e)}),n.push({height:h(e),setCallback:e=>{t.topSitesRow=e}})),e.displayWidgetsRegion&&(n.push({height:6}),n.push({height:146,setCallback:e=>{t.widgetsRegionRow=e}})),e.isRecommendedSitesEnabled&&(n.push({height:e.isTopSitesDisabled?12:8}),n.push({height:e.recommendedSitesHeight,setCallback:e=>{t.recommendedSitesRow=e}})),e.showHeroAboveNav?(!e.isRecommendedSitesEnabled&&e.isTopSitesDisabled||n.push({height:24}),n.push({height:(0,c.LH)(),setCallback:e=>{t.widgetsRegionRow=e}}),n.push({height:(0,c._T)(e.layoutState)})):n.push({height:f(e)}),e.config.feedPushDownForNonDAU&&(0,s.MG)()&&(0,o.N)()&&!window.isSSRCompleted&&(r.M0.addOrUpdateTmplProperty("featuxaffecting",`${e.config.feedPushDownForNonDAU}`),(0,a.$o)().setItem("featuxaffected",`${e.config.feedPushDownForNonDAU}`),n.push({height:e.config.feedPushDownForNonDAU}));const i=n.map((e=>e.height));return n.forEach(((e,t)=>{e.setCallback&&e.setCallback(t+1)})),{rows:i,rowIndexes:t}}},87158:function(e,t,n){n.d(t,{RG:function(){return c},Y6:function(){return d}});var i=n(42074),r=n(71037),o=n(72263),a=n(27687),s=n(44132);function c(e,t,n){const{selectedQuickLinksDisplaySetting:i}=e,r="tworows"==i;return"off"==i?0:(t>=o.K$.c3||n)&&!r?60:130}function d(e,t=!1){const n=function(e){let t=0;e.layoutState.imageOfTheDayEnabled?(e.hideTopSectionSSRHero||(t+=78),t+=46,t+=32,e.shouldRenderSuggestionPrompts&&(t+=52),e.hideTopSectionSSRHero||(t+=c(e.layoutState,e.columnArrangement,e.isWorkFeed),e.childRefs.recommendedSites&&"off"!==e.recommendedSitesDisplaySetting&&("off"!==e.layoutState.selectedQuickLinksDisplaySetting&&(t+=16),t+=e.recommendedSitesHeight))):(e.hideTopSectionSSRHero||(t+=0,t+=48,t+=72),t+=46,t+=32,t+=32,e.shouldRenderSuggestionPrompts&&(t+=52),e.hideTopSectionSSRHero||(t+=c(e.layoutState,e.columnArrangement,e.isWorkFeed),e.childRefs.recommendedSites&&"off"!==e.recommendedSitesDisplaySetting&&("off"!==e.layoutState.selectedQuickLinksDisplaySetting&&(t+=16),t+=e.recommendedSitesHeight))),e.displayWidgetsRegion&&(t+=146),e.showHeroAboveNav?(!e.isRecommendedSitesEnabled&&e.isTopSitesDisabled||(t+=24),t+=(0,a.GU)(e.showHeroAboveNav,e.layoutState)+(0,a._T)(e.layoutState)):t+=r.yd;return t}(e),o=e.config.maxPeekViewport??262;let d=o;e.config.peekViewportRatio&&e.config.minPeekViewportForRatio&&e.config.maxPeekViewportForRatio&&window.innerHeight>1080&&(d=Math.max(e.config.minPeekViewportForRatio,Math.min(e.config.maxPeekViewportForRatio,window.innerHeight*e.config.peekViewportRatio)),d=Math.round(d),d>o&&s.M0.addOrUpdateTmplProperty("PeekViewportRatioChanged",d.toString()),e.config.justPeekViewRatioTMPL&&(d=o)),e.isWorkFeed&&!t&&(d=e.config.enableWorkTabV2?434:402);let u=window.innerHeight-i.A$-d;return u<n&&(u=n),u}},27687:function(e,t,n){n.d(t,{$b:function(){return g},E0:function(){return d},GU:function(){return h},LH:function(){return p},_T:function(){return l},fN:function(){return u}});var i=n(98130),r=n(28951),o=n(5232),a=n(24032),s=n(22680),c=n(44132);function d(e,t){let n=i.jG.IsHeroNTP&&e.shouldAutoScrollHero&&!(e.heroNoPromoLayout&&["headingsonly","off"].includes(t.selectedFeedDisplaySetting));return g(e)&&(n=n&&e?.showSearchBoxForHero?.keepScroll),n}function u(){return(r.cX.getQueryParameterByName("segment",(0,s.zp)())||"").toLowerCase()}function l(e){const t=e.selectedQuickLinksDisplaySetting;switch(e.selectedFeedDisplaySetting){case"headingsonly":case"off":return"onerow"===t?170:"tworows"===t?85:192;case"peek":return 84;default:return 12}}function p(){return 344+("cegrowth"===u()?27:0)}function h(e,t){return e?l(t)+p():0}function g(e){if(!i.jG.IsHeroNTP||"wind_spot_2"===(0,o.ku)())return!1;const t="0"===(0,a.L)().get("dsp");return e.showSearchBoxForHero?.enableTmpl&&(c.M0.addOrUpdateTmplProperty("showSearchBoxForHero_hero","1"),t&&c.M0.addOrUpdateTmplProperty("showSearchBoxForHero_nbe","1")),!!e.showSearchBoxForHero?.enabled&&(!e.showSearchBoxForHero?.onlyNonBingSearchEngine||t)}},40431:function(e,t,n){n.r(t),n.d(t,{EdgeChromiumPageWC:function(){return Yt},EdgeChromiumPageWCCommonLightTemplate:function(){return Vn},EdgeChromiumPageWCCommonTemplate:function(){return Gn},EdgeChromiumPageWCInlineStyles:function(){return si},EdgeChromiumPageWCStyles:function(){return ci},EdgeChromiumPageWCTemplate:function(){return qn},EdgeChromiumPageWCWithJSDependencyStyles:function(){return oi},OverlapState:function(){return F.GL},SpotlightIcon:function(){return ni},ToolingInfo:function(){return di},getAnaheimLayoutPromotionAndContentSelection:function(){return Ot.GC},getBackgroundImageIsSet:function(){return Ot.T},getHeaderHeightForSSRPrefetch:function(){return Ot.bk},getLayoutState:function(){return Ot.$L},getPrefetchRequest:function(){return Ot.QA},getPrefetchRequestOverride:function(){return Ot.gi},getWidgetLayoutTemplateBundle:function(){return Qt},getWidgetsManager:function(){return zt},getWidgetsRegionQSP:function(){return Ot.fw},isFeedDisabled:function(){return Ot.xt},prefetchAndStoreMainFeed:function(){return Ot.gG},shouldEarlyFeedCallInSSR:function(){return Ot.gY},shouldPrefetch:function(){return Ot.HK},ssrHeaderHeightKey:function(){return Ot.D2}});var i=n(53761),r=n(33940),o=n(523),a=n(70569),s=n(70041),c=n(30594),d=n(13218),u=n(98130),l=n(15598),p=n(42729),h=n(32808),g=n(34934),f=n(80986),m=n(98303),y=n(55447),v=n(24417),S=n(73264),w=n(28951),b=n(42074),C=n(52),T=n(43301),k=n(12686),P=n(26538),A=n(91734),I=n(25487),E=n(42833),R=n(68178),M=n(74604),x=n(12812),L=n(72263),F=n(71037),D=n(82854),O=n(19625),_=n(46751),N=n(81586),B=n(44132),U=n(5302),$=n(33779),H=n(86117),W=n(242),G=n(90631),V=n(82193),q=n(72465),j=n(64527),z=n(83176),K=n(87273),Q=n(26156),J=n(95603),X=n(16495),Y=n(1713),Z=n(27811),ee=n(10545),te=n(22624),ne=n(24032);async function ie(){const e="vp"===(0,ne.L)().get("reqsrc")||!!(0,ne.L)().get("vptest");if(!window.caches||-1!=location.href?.indexOf("enableForceCache=true")||e)return;const t=Date.now(),n=await async function(){let e="";const t=await oe("edgenext-base-V1");t&&t.length>0||(e="edgenext-base-v1-empty.");const n=e?[]:t.filter((e=>e.url&&function(e,t){if(!e||!t)return!1;const n=se(new URL(e)),i=se(new URL(t));if(!n||!i)return!1;return n.href==i.href}(e.url,location.href)));e||n&&0!=n.length||(e="edgenext-base-v1-missing.");const i=await caches.open("edgenext-base-fallback-V1");if(e){const t=ae(new URL(location.href));try{return await i.add(t),e+" NetworkCall"}catch(t){return e+" "+t}}const r=n[0],o=await caches.match(r.url);if(!o)return"Empty cache entry.";const a=ae(new URL(r.url));return await i.put(a,o),"saved."}(),i=Date.now(),r={r:n,ic:await re(),te:i-t};(0,l.$o)().setObject("FallbackNavigationResult",r)}async function re(){const e=await oe("edgenext-base-fallback-V1");if(!(e&&e.length>0))return!1;const t=ae(new URL(location.href)),n=e.filter((e=>e.url&&e.url===t.toString()));return!!(n&&n.length>0)}async function oe(e){if(!window.caches)return[];const t=await caches.open(e);return t&&await t.keys()||[]}function ae(e){return(e=se(e)).searchParams.append("enableForceCache","true"),e}function se(e){return e.searchParams.delete("prerender"),e.searchParams.delete("startpage"),e.searchParams.delete("PC"),e.searchParams.delete("dsp"),e.searchParams.delete("sp"),e.searchParams.delete("adppc"),e.searchParams.delete("ucpdpc"),e.searchParams.delete("fre"),e.searchParams.delete("isFREModalBackground"),e.searchParams.delete("firstlaunch"),e}var ce=n(24318),de=n(98341);const ue={SSRBasePageNetworkRequestFailed:U.kTw,SSRBasePageCacheMatchFailed:U.PiL,PrerenderBasePageNetworkRequestFailed:U.n3q};var le=n(22691),pe=n(33018),he=n(29715),ge=n(72685),fe=n(68995),me=n(88413),ye=n(7124),ve=n(16614),Se=n(52965),we=n(98604),be=n(26197),Ce=n(23210),Te=n(67406),ke=n(24612),Pe=n(80535),Ae=n(88537),Ie=n(20850),Ee=n(55584),Re=n(77016);var Me,xe=n(23946),Le=n(65685),Fe=n(49494),De=n(77770),Oe=n(14969),_e=n(42924),Ne=n(89658);let Be;!function(e){e.topStories="topstory",e.breakingNews="breakingnews",e.socialReplies="socialreplies",e.socialReactions="socialreactions",e.socialFollowers="socialfollowers",e.socialAchievements="socialachievements",e.socialAlerts="socialalerts"}(Me||(Me={}));class Ue{constructor(e){this.resolvePushNotificationsSubscription=async(e,t,n,i,r,o,a)=>{const s=await this.swRegistration.pushManager.getSubscription();if("denied"===Notification.permission)return;if(o.size<1&&(!s||"granted"!==Notification.permission))return;if(s)return void Ue.updateSubscriptions(s,e,o);let c="granted"===Notification.permission;const u=c;let l="";const{defaultNotification:p,defaultNotificationPromptAllow:h,defaultNotificationPromptBlock:g,defaultNotificationPromptDefault:f}=Ue.buildDefaultNotificationPermissionPromptTelemetryElement(a);if(!c){let e;switch(B.M0.sendContentViewEvent(p,Ne.NS.View),l=await Notification.requestPermission(),l){case"granted":e=h,c=!0;break;case"denied":e=g;break;default:e=f}B.M0.sendActionEvent(e,N.Aw.Click,N.wu.Undefined)}if(!c)return;if(fetch(e+"/webpush/key").then((async t=>{if(t.ok){const n=await this.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ue.urlB64ToUint8Array((await t.json()).key)});Ue.updateSubscriptions(n,e,o)}else B.M0.sendAppErrorEvent({...U.fcE,message:"Error fetching key for subscribing to push notifications endpoint",pb:{...U.fcE.pb,customMessage:`HTTP Status: ${t.status}`}})})),!u){const e={body:n,tag:"web-notification",icon:r,data:{url:w.cX.getAbsoluteUrl(i)}};"edge"===d.Al.ClientSettings.browser.browserType?this.swRegistration.showNotification(t,e):new Notification(t,e)}},this.swRegistration=e}static getInstance(){return Be}static initializePushSubscriptionManager(e){"string"==typeof e?this.initializeFromScope(e):this.initializeFromRegistration(e)}static initializeFromRegistration(e){Be=new Ue(e)}static async initializeFromScope(e){await navigator.serviceWorker.ready,Ue.initializePushSubscriptionManager(await navigator.serviceWorker.getRegistration(e))}static urlB64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}static addTelemetryTagsToElement(e,t,n){const i={name:n},r=t?t.addOrUpdateChild(i):null,o=r.render();return Object.keys(o).forEach((t=>{e.setAttribute(t,o[t])})),r}static buildDefaultNotificationPermissionPromptTelemetryElement(e){const t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");t.appendChild(n),t.appendChild(i),t.appendChild(r);const o=Ue.addTelemetryTagsToElement(t,e,"browserNativeNotificationPermissionPrompt");return Ue.addTelemetryTagsToElement(n,o,"Accept"),Ue.addTelemetryTagsToElement(i,o,"Block"),Ue.addTelemetryTagsToElement(r,o,"Default"),{defaultNotification:t,defaultNotificationPromptAllow:n,defaultNotificationPromptBlock:i,defaultNotificationPromptDefault:r}}static async updateSubscriptions(e,t,n){const i=Object.values(Me).filter((e=>!n.has(e)));[{segment:"subscribe",tags:[...n]},{segment:"unsubscribe",tags:i}].forEach((async n=>{if(n.tags.length<1)return;const i=n.tags.join(";"),r=t+"/webpush/news/"+d.Al.Locale+"/v1/webpush/"+n.segment+"?scn=MSNRPSAuth",o=await fetch(r,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Tags:i},body:JSON.stringify({subscription:e})});o.ok?o.json().then((e=>{"Success"!==e.message&&B.M0.sendAppErrorEvent({...U.M7L,message:"Response contained unexpected value when subscribing or unsubscribing from push notifications endpoint",pb:{...U.M7L.pb,customMessage:`Expected response message to be 'Success' but instead was ${e.message} when receiving response from endpoint at ${r}`}})})):B.M0.sendAppErrorEvent({...U.M7L,message:"HTTP error when making subscribe or unsubscribe call from push notifications endpoint",pb:{...U.M7L.pb,customMessage:`Response status was ${o.status} when attempting to communicate with the endpoint at ${r}`}})}))}}var $e=n(67888),He=n(34254),We=n(93441);const Ge=(0,p.k)((function(){window.pageYOffset>0&&qe()}),0);let Ve=!1;function qe(){const e=(0,He.S0)();e&&We.g.updateBelowTheFoldTransitionStart.getActionSender(e).send(!0),Ve=!0,window.removeEventListener("scroll",Ge)}const je={initialize:function(){window.addEventListener("scroll",Ge,{passive:!0})},handleSettingUpdate:function(e){Ve||"always"!==e&&"headingsonly"!==e&&"peek"!==e||qe()}};var ze=n(22680),Ke=n(21215),Qe=n(52185),Je=n(99071),Xe=n(99452),Ye=n(22745),Ze=n(82928),et=n(41281),tt=n(37878),nt=n(27863),it=n(82821),rt=n(87622),ot=n(13329),at=n(46011),st=n(15630),ct=n(97634),dt=n(79089),ut=n(66451),lt=n(64995),pt=n(26682),ht=n(35114),gt=n(26238),ft=n(5232),mt=n(94289),yt=n(10662),vt=n(43261),St=n(25941),wt=n(27026);const bt=1728e5;var Ct=n(61708),Tt=n(17055);let kt;const Pt=6048e5,At=864e5;async function It(e){const{config:t,isSignedOutPromise:n,isFromWidgetLockScreen:i}=e,r=[];if(t)return t.enableLangExpBanner&&function(){const e={id:"LanguageExplainingBanner",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top"},contentModel:{title:"Language Explaining Banner",description:"Почему мой канал на английском языке? Вы видите наш международный канал, так как каналы на русском языке больше не доступны.",contentType:vt.J.CallToAction,dismissContentAction:{label:"Понятно."}}},t=[(0,St.H)("Dismissed",bt),(0,wt.l)("Dismissed",3)];(0,yt.$0)().then((n=>{n.sendInternalPlacement(e,t)}))}(),t.termOfUseBannerConfig?.enabled&&await n&&function(e){const t=!!e.termOfUseBannerConfig?.isSecondBanner,n=e?.localizedStrings?.termOfUseBanner1Description||"We're updating our Terms of Use",i=t?e?.localizedStrings?.termOfUseBanner2Description||"We've updated our Terms of Use":n,r={id:t?"TermOfUseBanner2":"TermOfUseBanner1",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top",bannerType:"LegalCompliance",displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}},closeSurfaceAction:{label:"Close"}},contentModel:{title:i,description:i,contentType:vt.J.CallToAction,logoImage:{url:`${u.jG.StaticsUrl}/latest/nurturing/img/i-logo.png`,altText:"Image Alt Text"},dismissContentAction:{label:e?.localizedStrings?.termOfUseBannerDismBtnLabel||"Dismiss"},engageContentAction:{label:e?.localizedStrings?.termOfUseBannerEngageBtnLabel||"Learn more",actionDelegate:()=>{window.open("https://go.microsoft.com/fwlink/?LinkID=2092201","_blank")}}}},o=t?At:Pt,a=[(0,St.H)("Viewed",o),(0,wt.l)("Dismissed",1),(0,wt.l)("Closed",1),(0,wt.l)("Engaged",1)];(0,yt.$0)().then((e=>{e.sendInternalPlacement(r,a)}))}(t),i&&await async function(e){const{config:t}=e;await(0,Q.hK)();const n=await(0,Q.y3)();if(!n||!n.length)return;await async function(e){let t=!1;const n=new URLSearchParams(window.location.search);n?.get("forceLocationCoachmark")&&(t=!0);const i=await(0,we.h_)(be._.weatherHeroExperience);if(!i)return;if(kt=(0,Ze.K0)(o.S$),!kt)return;const r=kt.getCurrentState();if(r&&1==r?.locationDetectionSetting)B.M0.addOrUpdateTmplProperty("LockScreenLocationTypeRevIp","1");else if(!t)return;const{title:a,engageContentActionLabel:s,dismissContentActionLabel:c}=e.localizedStrings.LockScreenLocationCoachmark,d={id:"lockScreenLocationCoachmark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Ct.dm.Small,position:{coachmarkAnchor:i,anchoringPosition:Ct.RC.Above,hasPointer:!0,pointerPosition:Ct.Jt.Adjacent}},contentModel:{title:a||"Did we get your location right?",description:"",contentType:vt.J.CallToAction,engageContentAction:{label:s,actionDelegate:()=>{}},dismissContentAction:{label:c,actionDelegate:()=>{window.dispatchEvent(new CustomEvent("openWeatherHeroLocationEdit"))}}}},u=[(0,wt.l)("Viewed",3),(0,St.H)("Viewed",3*Tt.y),(0,wt.l)("Dismissed",1),(0,wt.l)("Closed",3),(0,wt.l)("Engaged",1)];(0,yt.$0)().then((e=>{e.sendInternalPlacement(d,u)}))}(t)}(e),()=>{r.forEach((e=>{e()}))}}var Et=n(45916),Rt=n(40473),Mt=n(19735);const xt=new Set(["thumb-down","infopane-flips","scroll-wo-click"]),Lt=async(e,t,n)=>{if(!e||!xt.has(n))return;const i=await(0,we.h_)(be._.personalizeButton);if(!i)return;B.M0.addOrUpdateTmplProperty("cs-cm","1"),B.M0.addOrUpdateTmplProperty(`cs-cm-${n}`,"1"),window.removeEventListener("launchChannelStoreCoachmark",t);const r=await Ft();!r&&void 0===r||0!==r.length||(B.M0.addOrUpdateTmplProperty("cs-cm-fol","1"),e.enableChannelStoreCoachMark&&function(e,t){const{localizedStrings:n}=t;let i;const r=function(e){const t=e.getBoundingClientRect(),n=new m.fH,i=(0,m.Nd)(n.data.innerHeight,"innerHeight"),r=(0,m.Nd)(n.data.innerWidth,"innerWidth");return t.top>=0&&t.left>=0&&t.bottom<=i&&t.right<=r}(e);i=r?{coachmarkAnchor:e,anchoringPosition:Ct.RC.Above,hasPointer:!0,pointerPosition:Ct.Jt.Opposite}:Ct.pY.BottomEnd;const o={url:`${u.jG.StaticsUrl}latest/channel-store/coachmark-bg-2.png`,altText:""},{persNegSigCoachmark:a}=n||{},s=a?.title||"",c=a?.description||"",d=a?.engageBtnLabel||"",l=a?.dismBtnLabel||"",p={id:"personalizeManageText",group:"Default",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Ct.dm.Medium,position:i,enableGradientBorderBottom:!0},contentModel:{title:s,description:c,contentImage:r?void 0:o,contentType:vt.J.CallToAction,engageContentAction:{label:d,actionDelegate:()=>{window.dispatchEvent(new CustomEvent("launchChannelStore"))}},dismissContentAction:{label:l}}},h=2592e6,g=[(0,St.H)("Viewed",h),(0,wt.l)("Viewed",2),(0,wt.l)("Engaged",1)];(0,yt.$0)().then((e=>{e.sendInternalPlacement(p,g)}))}(i,e))};const Ft=async()=>{const e={feedName:"filteredChannels"};let t;try{t=await(st.yg?.fetchChannelFilter("SuperNav",e))}catch(e){return}return t?.subCards||[]};var Dt=n(27906),Ot=n(53790),_t=n(27687),Nt=n(4739),Bt=n(57627),Ut=n(70970),$t=n(82218),Ht=n(87158),Wt=n(74982),Gt=n(87208);const Vt="localhost.msn.com"===(0,ze.Td)(),qt="gaming",jt=(0,z.AF)("feedManager",(()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("libs_core_dist_utilities_NativeAdUtils_js-libs_experiences-telemetry_dist_object-mappings_Con-8f6a01"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_boost-ad-card_BoostAdCard_js-libs_feed-layout_dist_card--fa9230"),n.e("libs_oneservice-card-provider_dist_OneServiceCardProvider_js-libs_super-feed_dist_helpers_Fee-639f7a"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js"),n.e("experiences_edge-chromium-page-wc_dist_lazy-loadings_feedManager_js")]).then(n.bind(n,89634)).then((e=>e.FeedManagerWithClientAd)))),zt=(0,z.AF)("widgetManager",(()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("libs_core_dist_utilities_NativeAdUtils_js-libs_experiences-telemetry_dist_object-mappings_Con-8f6a01"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_boost-ad-card_BoostAdCard_js-libs_feed-layout_dist_card--fa9230"),n.e("libs_oneservice-card-provider_dist_OneServiceCardProvider_js-libs_super-feed_dist_helpers_Fee-639f7a"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js"),n.e("experiences_edge-chromium-page-wc_dist_lazy-loadings_feedManager_js")]).then(n.bind(n,89634)).then((e=>e.FeedManagerForNtpWidgets)))),Kt=(0,z.AF)("layoutTemplates",(()=>n.e("feedDependencies").then(n.bind(n,77726)).then((e=>e.AnaheimLayoutTemplateMap)))),Qt=(0,z.AF)("widgetLayoutTemplates",(()=>n.e("experiences_edge-chromium-page-wc_dist_lazy-loadings_widgetLayoutTemplateMaps_js").then(n.bind(n,7887)).then((e=>e.AnaheimWidgetsLayoutTemplateMap)))),Jt=(0,z.AF)("feedDependenciesGaming",(()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("libs_core_dist_utilities_NativeAdUtils_js-libs_experiences-telemetry_dist_object-mappings_Con-8f6a01"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_boost-ad-card_BoostAdCard_js-libs_feed-layout_dist_card--fa9230"),n.e("libs_oneservice-card-provider_dist_OneServiceCardProvider_js-libs_super-feed_dist_helpers_Fee-639f7a"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js"),n.e("experiences_edge-chromium-page-wc_dist_feedDependenciesGaming_js")]).then(n.bind(n,68780)))),Xt=(0,z.AF)("waterfallCardMappers",(()=>Promise.all([n.e("common-others"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("libs_core_dist_utilities_NativeAdUtils_js-libs_experiences-telemetry_dist_object-mappings_Con-8f6a01"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_boost-ad-card_BoostAdCard_js-libs_feed-layout_dist_card--fa9230"),n.e("experiences_edge-chromium-page-wc_dist_lazy-loadings_waterfallCardMappers_js")]).then(n.bind(n,19392))));class Yt extends he.l{constructor(){super(...arguments),this.isWeatherOneLinerMapped=!1,this.showFeedTranslucent=!0,this.showDarkIcon=!1,this.needDarkThemeIcons=!1,this.enableHiddenRecommendedSitesStyles=!1,this.isTtvrFiredAndCanUseDom=!1,this.showBreakingNews=!1,this.enableSpotlightButton=!1,this.widgetsRegionRequiresTtvrCallback=!1,this.isSignedInMSAUser=!1,this.hideComplianceLink=!1,this.isAppLauncherAllowedByPolicy=!0,this.haveUpdateFeedStateOnScroll=!1,this.onScrollSettablePromise=new E.o,this.onSocialBarReactedSettablePromise=new E.o,this.className="",this.canaryFlightEnabled=!1,this.displayConditionalBanner=!1,this.displayNetworkErrorBanner=!1,this.isOnPersonalizeOrM365Page=!1,this.nowPivotId="",this.hideQuickLinks=!1,this.isNewTabPageContentManagedByPolicy=!1,this.hideWidgets=!0,this.pulseData=[],this.pulseOnHover=!1,this.showSpotlightBackgroundGalleryCard=!1,this.showSpotlightButton=!1,this.showSpotlightHoverMask=!1,this.showSpotlightButtonByHover=!1,this.headerCoreOffset=0,this.stickyHeaderHeight=b.FQ,this.enableNotificationAnimation=!1,this.searchStickyBreakpoint=0,this.scrollCanTrigChannelStoreCoachmark=!1,this.numInfopaneTabChangeClicks=0,this.numFeedRefreshes=0,this.requiresExtraWidth=!1,this.gridRowsMap=new Map,this.enableHiddenWelcomeGreeting=!1,this.displayNetworkErrorWhenFeedDependenciesFailed=!1,this.topSitesQuickLinkEndMarginUsedPadding=0,this.museumCardShown=!1,this.scrollIsPastStyleThreshold=!0,this.userScrolled=!1,this.invisibleTopSites=!1,this.invisibleSearchBox=!1,this.invisibleRecommendedSites=!1,this.invisibleHero=!1,this.msNtpExpBitmask="",this.headingsOnlyHeightReduction=0,this.overriddenFeedConfig=null,this.overlapState={state:0,feedbackState:0},this.isFeedRendered=!1,this.feedHasLoaded=!1,this.shouldRenderToastWC=!1,this.telemetryTags={},this.showRightClickMenu=!1,this.ntpTypeToSearch=!1,this.deferBGIfOffFlightEnabled=d.Al.CurrentFlightSet.has("ntp-bgdsbl-dfr"),this.pageHiddenStartTime=null,this.headerGridHidden=!1,this.hasChangedFeed=!1,this.pageLoadedWithContentDisabled=!1,this.isPageLoadedWithWidgets=!1,this.isHero=u.jG.IsHeroNTP,this.showHeroAboveNav=u.jG.IsHeroNTP&&this.config?.showHeroAboveNav,this.showWidgetsUpsellButton=!1,this.mousemoveListenerRemoved=!1,this.hideWidgetsBasedOnPolicy=!1,this.flyoutOpen=!1,this.noWidgetsData=!1,this.lifecycleExceptionToThrowErrorOnServerSide=!0,this.pivotsNavigated=[],this.widgetsLazyLoaded=!1,this.oneTrustConsentHandler=null,this.isHttpCacheInvalidated=!1,this.animationIconVisibile=!0,this.shouldAutoScroll=!1,this.shouldShrinkHeader=!1,this.windowInnerWidth=0,this.windowInnerHeight=0,this.bgRightClickMenuWidth=0,this.bgRightCLickMenuHeight=0,this.checkNetworkStatus=()=>{const e=window.navigator.connection;e&&0==e.downlink&&this.showNetworkErrorToast()},this.checkNetworkRelatedError=e=>{[44700,22031,22012,223e3,8108,40701,41611,50017,35004,35132,36908,135040,9904,36904,40326,135040,135041].includes(e?.detail?.errorId??0)&&this.showNetworkErrorToast()},this.showNetworkErrorToast=()=>{(0,Ke.N)()&&!d.Al.IsPrerender&&(this.config.enableNetworkErrorCF||(this.displayNetworkErrorBanner=!0,this.onConditionalBannerDisplayChange(!0),this.networkErrorBannerCloseTelemetry=(0,Bt.c)("NetErrBanner",{headline:"Close",type:N.uH.Banner},N.wu.Close,N.Aw.Click,{destinationUrl:""})),window.setTimeout((()=>{window.removeEventListener("appError",this.checkNetworkRelatedError),window.removeEventListener("offline",this.showNetworkErrorToast);navigator.connection.removeEventListener("change",this.checkNetworkStatus)}),300),B.M0.addOrUpdateTmplProperty("netErrToast","1"),(0,l.$o)()?.setItem("netErrToast","1"))},this.skeletonObserverCallback=()=>{this.isFeedContentDisplayed()&&(this.showSkeleton=!1,this.skeletonEleFromSSR&&(this.skeletonEleFromSSR.remove(),this.skeletonEleFromSSR=null),this.skeletonObserver?.disconnect())},this.recommendedSitesSelection=e=>{e?.detail&&(this.recommendedSitesDisplaySetting=e?.detail.key??this.recommendedSitesDisplaySetting,this.updateHeaderGrid(),this.refreshHeaderHeight(),this.calculateTopAndBackgroundStickyBreakpoints())},this.checkThemeColorIcons=()=>{if(this.needDarkThemeIcons=!1,"dark"===u.jG.CanvasTheme&&"hero"===this.layoutState.displayBackgroundImageType)return;if(!(0,Ke.N)()){const e=d.Al.EdgeNTPHeader?.backgroundImage;return void(e&&"Theme"==e.provider&&e.darkIcons&&(this.needDarkThemeIcons=e.darkIcons))}if("theme"!=this.layoutState.currentBackgroundImageType||!this.layoutState.ntpTheme)return;const e=this.layoutState.configData,t=e&&e.enabledFeatures&&e.enabledFeatures.includes("msAllowThemeInstallationFromChromeStore"),n=this.layoutState.ntpTheme&&this.layoutState.ntpTheme.usingDefaultTheme;t&&!n&&(this.needDarkThemeIcons=!this.layoutState.ntpTheme.isNtpBackgroundDark)},this.updateDarkIconValue=e=>{e&&(this.showDarkIcon=!(!e.detail||!this.config.enableHolidayBg||(0,R.Yc)()))},this.turnOffWidgetsRegion=()=>{this.pageSettingsDataConnector?.updateFeedsForWidgetsToggle(!1)},this.updateWidgetsRegion=e=>{e&&this.noWidgetsData!==e.detail&&(this.noWidgetsData=e.detail,this.displayWidgetsRegion=!e.detail,this.updateHeaderGrid(),this.refreshHeaderHeight())},this.manageWidgetsRegion=()=>{if("off"===this.layoutState.selectedFeedDisplaySetting){const e=new URL(Dt.sC.replace(Dt.ej,u.jG.CurrentMarket),Dt.VK),t=(0,ft.ku)();return t&&e.searchParams.set("ocid",t),void window.open(e.href,"_blank")}"myInterests_experienceSettings"===this.nowPivotId?this.scrollToShowFeed():pt.Fv.getInstance().attemptNavItemChange("myInterests_experienceSettings")},this.widgetsRefresh=()=>{this.config?.enableWidgetsRegion&&this.layoutState?.enableWidgetsRegion&&!this.hideWidgetsBasedOnPolicy&&!u.jG.IsHeroNTP?this.widgetsRefreshHandler(!1):(this.widgetsChangedWhileHidden=!0,window.dispatchEvent(new CustomEvent("unblockToggles")))},this.widgetsRefreshHandler=(e=!0)=>{this.widgetsFeedManager?.feedEventAggregator?this.widgetsFeedManager.callRefreshRegionsData({invalidateCache:!0,scrollToTop:e,skipBitMasking:!0},!0).then((()=>{window.dispatchEvent(new CustomEvent("unblockToggles"))})):this.feedManager?.feedEventAggregator&&"off"!==this.layoutState.selectedFeedDisplaySetting&&this.feedManager?.callRefreshRegionsData({invalidateCache:!0,scrollToTop:e,skipBitMasking:!0},!0).then((()=>{window.dispatchEvent(new CustomEvent("unblockToggles"))}))},this.displayQuickLinks=()=>{this.hideQuickLinks=!1,this.topSitesHolder.style.visibility="",this.updateAfterWheelingToDisplayMore()},this.updateFeedLayoutFromDropdown=e=>{const t=e.detail,n=this.layoutState?this.layoutState.currentLayout:C.L_.currentLayout,i=this.layoutState?.selectedFeedDisplaySetting;let r=(0,T.j)(t,this.layoutState.currentBackgroundImageType,this.layoutState.greetingEnabled,this.layoutState.hideDefaultTopSites);if(this.backgroundGalleryEligibility&&"off"!==this.layoutState.currentBackgroundImageType&&(r=tt.p.shouldOverrideLayoutToCustomCache()?"custom":r),n!==r){let e;if("custom"!==r){const i=C.Wi[r];e={currentBackgroundImageType:i.current_background_image_type,originalLayout:n,currentLayout:r,greetingEnabled:i.greeting,imageOfTheDayEnabled:"off"!==i.current_background_image_type,hideDefaultTopSites:i.hide_promoted_links,selectedFeedDisplaySetting:t}}else e={...this.layoutState,originalLayout:n,currentLayout:r,selectedFeedDisplaySetting:t};this.pageSettingsDataConnector?.updateLayout(e)}else this.pageSettingsDataConnector?.updateFeeds(t,i)},this.onMouseenter_backgroundButton=e=>{e?.stopPropagation(),this.closeGalleryTimeout&&window.clearTimeout(this.closeGalleryTimeout),this.showSpotlightBackgroundGalleryCard=!0,this.openBackgroundGallery(),this.maskHoverTimeout&&window.clearTimeout(this.maskHoverTimeout)},this.onMouseout_backgroundButton=e=>{e?.stopPropagation(),this.closeGalleryTimeout&&window.clearTimeout(this.closeGalleryTimeout),this.closeGalleryTimeout=window.setTimeout((()=>{if(this.showSpotlightBackgroundGalleryCard=!1,this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!1),this.bgMask&&e){const{x:t,y:n,height:i,width:r}=this.bgMask.getBoundingClientRect(),{clientX:o,clientY:a}=e;o&&a&&(o<t||o>t+r||a<n||a>n+i)&&(this.maskHoverTimeout&&window.clearTimeout(this.maskHoverTimeout),this.showSpotlightButtonByHover=!1)}}),500)},this.onMouseenter_backgroundMask=e=>{const t=this.headerCoreRef?.shadowRoot?.querySelector?.("common-settings-edgenext")?.shadowRoot?.querySelector?.("cs-common-settings-dialog")?.shadowRoot?.querySelector?.("fluent-button");t?.className?.includes?.("active")||(this.maskHoverTimeout&&window.clearTimeout(this.maskHoverTimeout),this.showSpotlightButtonByHover=!0)},this.onMouseout_backgroundMask=e=>{this.maskHoverTimeout&&window.clearTimeout(this.maskHoverTimeout),this.maskHoverTimeout=window.setTimeout((()=>{this.showSpotlightButtonByHover=!1}),500)},this.updateAfterWheelingToDisplayMore=()=>{this.calculateStickyBreakpoints(),this.refreshHeaderHeight(),window.removeEventListener("wheel",this.quickLinksToggle)},this.updatePulseOnHover=e=>{this.pulseOnHover=e.detail},this.quickLinksToggle=e=>{if("always"!==this.layoutState.selectedFeedDisplaySetting)return;const{selectedQuickLinksDisplaySetting:t}=this.layoutState;if(!["onerow","tworows"].includes(t))return;0===(document.documentElement?document.documentElement:document.body).scrollTop&&e.deltaY<0&&this.hideQuickLinks&&this.displayQuickLinks()},this.dismissNotificationMiniCard=(e="manual")=>{rt.u.dismissNotificationMiniCard(e)},this.areNavTopSitesOverlapping=(0,ye.Z)((()=>{if("hidden"===document.visibilityState||!this.nav||!this.topSitesHolder||"hidden"===this.topSitesHolder.style.visibility||!this.topSitesHolder.children.length||"1"!==this.topSitesHolder.style.opacity&&""!==this.topSitesHolder.style.opacity)return;if(this.topSitesHolder.children[0]&&0===this.topSitesHolder.children[0].offsetHeight)return;const e=this.nav.getBoundingClientRect(),t=this.topSitesHolder.getBoundingClientRect();this.checkAndLogRectsOverlapping(e,t)}),500),this.getWidgetsQSPForBitmasking=()=>{if(this.sharedFeedManager&&this.config.enableWidgetsRegion)return this.sharedFeedManager.widgetsQSPForBitmasking},this.initFeedDependencies=(e,t=!1)=>{this.displayNetworkErrorWhenFeedDependenciesFailed=!1;const n=this.getWidgetsQSPForBitmasking();this.updatePivotsNavigatedAndStampTmpl(e,t);const i=()=>Xt().then((e=>e.getCardMappers()));if(e===qt)this.getFeedDependencyPromise=Promise.all([Jt(),i()]).then((([{FeedManagerWithClientAd:e,GamingLayoutTemplateMap:t},n])=>{const i=t,r=new e({disablePreloadLikelyExperiences:"informational"!==this.layoutState.currentLayout,...n});return this.msNtpExpBitmask&&(r.edgExpMask=this.msNtpExpBitmask),(0,ke.c)()&&r.setPrerenderFeedCallDisabled(!0),{feedManager:r,layoutTemplateMap:i}}));else if(this.isWaterfallFeed(e)&&!t){const t=u.jG.IsHeroNTP||this.widgetsRegionDependencyPromise?Qt:()=>Promise.resolve(void 0);this.getFeedDependencyPromise=Promise.all([jt(),t(),i()]).then((([t,n,i])=>{const r=n,o="informational"!==this.layoutState.currentLayout,a=this.getWidgetsQSPForBitmasking(),s=this.shouldUseSharedFeedManager(e)?this.sharedFeedManager:new t({disablePreloadLikelyExperiences:o,rubyConsumptionOnCohort:(0,Gt.o)(this.config),widgetsQSPForBitmasking:a,...i});return s.isShared=this.shouldShareFeedManager(e),B.M0.addOrUpdateTmplProperty("waterfallFeed_sharedFeedManager",s.isShared?"1":"0"),this.setSharedFeedManager(s),(0,Ke.N)()&&this.config.enableChannelFiltering&&st.yg.setFeedManager(s),this.msNtpExpBitmask&&(s.edgExpMask=this.msNtpExpBitmask),(0,ke.c)()&&s.setPrerenderFeedCallDisabled(!0),this.feedManager=s,{feedManager:s,importLayoutTemplateMap:Qt,layoutTemplateMap:r}}))}else if(t&&this.config.useDedicatedWidgetsManager)this.widgetsRegionDependencyPromise=Promise.all([zt(),Qt(),i()]).then((([e,t,n])=>{const i=new e(n);return this.msNtpExpBitmask&&(i.edgExpMask=this.msNtpExpBitmask),(0,ke.c)()&&i.setPrerenderFeedCallDisabled(!0),this.widgetsFeedManager=i,{feedManager:i,layoutTemplateMap:t}}));else if(t){const t=Qt;this.widgetsRegionDependencyPromise=Promise.all([jt(),t(),i()]).then((([i,r,o])=>{const a=r,s="informational"!==this.layoutState.currentLayout,c=this.shouldUseSharedFeedManager(e)?this.sharedFeedManager:new i({disablePreloadLikelyExperiences:s,widgetsQSPForBitmasking:n,...o});return c.isShared=this.shouldShareFeedManager(e),B.M0.addOrUpdateTmplProperty("widgetsFeed_sharedFeedManager",c.isShared?"1":"0"),this.setSharedFeedManager(c),this.msNtpExpBitmask&&(c.edgExpMask=this.msNtpExpBitmask),(0,ke.c)()&&c.setPrerenderFeedCallDisabled(!0),this.widgetsFeedManager=c,{feedManager:c,importLayoutTemplateMap:t,layoutTemplateMap:a}}))}else this.getFeedDependencyPromise=Promise.all([jt(),Kt(),i()]).then((([e,t,n])=>{const i=t,r=new e({disablePreloadLikelyExperiences:"informational"!==this.layoutState.currentLayout,rubyConsumptionOnCohort:(0,Gt.o)(this.config),...n});return(0,Ke.N)()&&this.config.enableChannelFiltering&&st.yg.setFeedManager(r),this.msNtpExpBitmask&&(r.edgExpMask=this.msNtpExpBitmask),(0,ke.c)()&&r.setPrerenderFeedCallDisabled(!0),{feedManager:r,layoutTemplateMap:i}}));this.tryLoadFeedModuleBundle();(this.enableWidgetsFeedManager&&t?this.widgetsRegionDependencyPromise:this.getFeedDependencyPromise).catch((t=>{const n={...U.dp6.pb,stack:t.stack};(0,ut.Y)(U.dp6.id),(0,$.H)(U.dp6,`Failed to load feedDependencies bundle for ${e}. ${t.message||""}`,void 0,n),this.displayNetworkErrorWhenFeedDependenciesFailed=!0}))},this._scrollToShowFeed=async(e={withRefresh:!1,scrollOnlyAboveTheTargetPosition:!1,withAnimation:!0,disableScroll:!1,showRefreshLoading:!1})=>{e={withRefresh:!1,scrollOnlyAboveTheTargetPosition:!1,withAnimation:!0,disableScroll:!1,showRefreshLoading:!1,...e??{}};const t=(0,fe.Nu)(F.q_);if(t&&!e.disableScroll&&(e?.scrollOnlyAboveTheTargetPosition&&document.documentElement.scrollTop>t-8||window.scrollTo({top:t-8,behavior:e?.withAnimation?"smooth":"auto"})),e?.withRefresh){e.showRefreshLoading&&(this.config.enableLoaderWhenRefreshFlight?this.showSkeleton=!0:this.showPivotRefreshButton=!0);const t=this.enableWidgetsFeedManager&&this.displayWidgetsRegion?await this.widgetsRegionDependencyPromise:await this.getFeedDependencyPromise;if(t?.feedManager){const n=t.feedManager.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!1});this.config.prerenderFeedRefresh&&n.finally((()=>{t.feedManager.isLastResponseSuccessful()?((0,Fe.qO)(8),B.M0.addOrUpdateTmplProperty("invalidfeedforprerender","0")):B.M0.addOrUpdateTmplProperty("invalidfeedforprerender","1")})),e.showRefreshLoading&&n.finally((()=>{this.config.enableLoaderWhenRefreshFlight?this.showSkeleton=!1:this.showPivotRefreshButton=!1}))}else e.showRefreshLoading&&window.setTimeout((()=>{this.config.enableLoaderWhenRefreshFlight?this.showSkeleton=!1:this.showPivotRefreshButton=!1}),1e3);B.M0.sendPageView({page:{name:"IAR",isAutoRefresh:!1}}),window.dispatchEvent(new CustomEvent("RefreshPillResetAbsoluteTimer"))}},this.scrollToShowFeed=()=>{this._scrollToShowFeed()},this.changeContentOffToVisible=()=>{const e=(0,Ze.K0)(o.RL);e&&e.updateFeeds("always","off","scrollDownButton")},this.getExperienceConfigInfo=(e,t=e,n="default")=>({instanceId:e,configRef:{experienceType:t,instanceSrc:n}}),this.setShowWeatherOneLiner=e=>{this.showWeatherOneLiner=e},this.widgetsUpsellButtonClicked=()=>{this.widgetsRegionRequiresTtvrCallback=!0,this.showWidgetsUpsellButton=!1,this.updateHeaderGridForNonAlways(),this.pageSettingsDataConnector?.updateFeedsForWidgetsToggle(!0)},this.topSitesIntersectionObserverCallback=e=>{if(this.topSitesHolder){if("off"===this.layoutState.selectedQuickLinksDisplaySetting)return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");this.topSitesHolder.style.opacity="1",this.topSitesHolder.style.pointerEvents="",this.topSitesHolder.style.zIndex=""}},this.setupTopSitesIntersectionObserver=()=>{if(!this.topSitesHolder)return;const e={root:null,rootMargin:"-117px 0px 0px 0px",threshold:[.99]};this.topSitesObserver=new IntersectionObserver(this.topSitesIntersectionObserverCallback,e),this.topSitesObserver.observe(this.topSitesHolder)},this.getReservedHeaderHeights=()=>{let e=0;const t=this.gridRowsMap.values();for(const n of t){const t=Number(n.split("px")?.[0]);isNaN(t)||(e+=t)}e+=(0,Mt.PN)(this),this.headerHeightNeeded=this.isFeedAlways?this.gridRowHeights.reduce(((e,t)=>e+t),0):e},this.onResize=()=>{this.refreshHeaderHeight(),this.calculateStickyBreakpointsDebounced(),this.renderBackgroundGallery&&this.checkGalleryPageFitAndDisplayToast(),this.renderMarketLanguageToggle&&this.checkMarketToggleFitOnPage(),this.overlapStateChange(),(0,l.$o)()?.setItem(Q.Wb,"true"),B.M0.addOrUpdateTmplProperty("vp-h",`${window?.innerHeight}`),this.debouncedFeedWidthCheck()},this.onScroll=(0,p.k)((()=>{this.handleHideRightClickMenu(),this.config.enableWidgetsRegion&&"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&!this.haveUpdateFeedStateOnScroll&&(P.V.updateFeedStateOnScroll.getActionSender(this.pageSettingsDataConnector).send(!0),this.haveUpdateFeedStateOnScroll=!0),this.onScrollSettablePromise.set();const e=window.scrollY<100,t=window.scrollY>b.FT;if(e==this.scrollIsPastStyleThreshold&&t==this.navIsSticky||(this.scrollIsPastStyleThreshold=e,this.navIsSticky=t,this.refreshTranslucentMode()),this.scrollCanTrigChannelStoreCoachmark){const e=1252;window.scrollY>e&&this.triggerChannelStoreCoachmark("scroll-wo-click")}this.navIsSticky&&B.M0.addOrUpdateTmplProperty("StickyBreakpointTriggered","1");const n=(0,Ke.N)()&&"informational"==this.layoutState.currentLayout&&(0,Q.I9)();this.config.translucentFeed&&"off"!==this.layoutState.currentBackgroundImageType&&"theme"!==this.layoutState.currentBackgroundImageType&&!n&&(0,h.j3)("backgroundImage","displayed"),this.config.complianceHyperlink&&this.updateComplianceLinkStyleOnScroll(),this.updateHeaderCoreOffset();const i=this.headerCoreRef?.shadowRoot?.querySelector?.(".header-end"),r=window.getComputedStyle(i)?.direction,o=i?.getBoundingClientRect(),a="ltr"===r?o?.left:o?.right,s=this.headerCoreRef?.search?.getBoundingClientRect(),c="ltr"===r?s?.right:s?.left,d="ltr"===r?a<c:a>c;(window.innerHeight<this.headerHeight||d)&&window.scrollY>0?this.headerGrid?.classList.add("headerIcon_hidden"):this.headerGrid?.classList.remove("headerIcon_hidden"),this.config.showCodexBingIcon&&this.updateHeaderCoreSearchData(),("focused"===this.layoutState.currentLayout||"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType)&&this.focusFeedBorderScrollFade(),this.overlapStateChange()})),this.onMouseMove=e=>{const t=window.innerHeight;if(!t)return;if(t-Math.floor(t/3)<e.clientY){if(B.M0.addOrUpdateTmplProperty("edgChrmPgLwrThrd","1"),this.mousemoveListenerRemoved=!0,!this.config.enableWidgetsUpsellButton||this.displayWidgetsRegion||this.showWeatherOneLiner||this.feedHasLoaded)return void window.removeEventListener("mousemove",this.onMouseMove);if(void 0===this.showWeatherOneLiner&&this.weatherOnelinerConditionCheck)return;window.removeEventListener("mousemove",this.onMouseMove),(0,Nt.Gl)(this.config.widgetsUpsellFrequencyCap).then((e=>{e&&(this.telemetryTags.widgetsUpsellButton=(0,Bt.X)(F.Dh.widgetsUpsellButton,{headline:F.Dh.widgetsUpsellButton},N.wu.Open,N.Aw.Click)?.getMetadataTag?.(),this.showWidgetsUpsellButton=!0,this.updateHeaderGridForNonAlways(),(0,Nt.uz)())}))}},this.onClickForTrigChannelStoreCoachmark=e=>{if(this.scrollCanTrigChannelStoreCoachmark){e.composedPath().find((e=>"A"===e.tagName))&&(window.removeEventListener("click",this.onClickForTrigChannelStoreCoachmark),this.scrollCanTrigChannelStoreCoachmark=!1)}},this.onClickInfopaneFlipperTab=()=>{this.numInfopaneTabChangeClicks+=1,2===this.numInfopaneTabChangeClicks&&this.triggerChannelStoreCoachmark("infopane-flips")},this.channelStoreOpened=()=>{window.removeEventListener("launchChannelStore",this.channelStoreOpened),window.removeEventListener("launchChannelStoreCoachmark",this.registerChannelStoreCoachmarkCallback)},this.registerChannelStoreCoachmarkCallback=async e=>{const t=e&&e.detail;await Lt(this.config,this.registerChannelStoreCoachmarkCallback,t)},this.onClickInfopaneAnchor=()=>{window.removeEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.removeEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor)},this.buildFocusBorderStyleClasses=()=>"focused"===this.layoutState.currentLayout||"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType?"navAndContent_border_shadow "+(0!=window.scrollY?"navAndContent_noshadow":""):"",this.openBackgroundGallery=()=>{this.backgroundDataConnector&&this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0)},this.updateQuickLinksDisplayOption=e=>{this.pageSettingsDataConnector&&e&&(this.pageSettingsDataConnector.updateQuickLinksDisplayOption(e,J.dE.MANUAL),(0,A.qi)(J.nc.quick_links_options,e))},this.updateComplianceLinkStyleOnScroll=()=>{const e=window.scrollY>0;e!==this.hideComplianceLink&&(this.hideComplianceLink=e,this.hideComplianceLink?this.complianceHyperlink&&this.complianceHyperlink.classList.add("complianceHyperlink_hide"):this.complianceHyperlink&&this.complianceHyperlink.classList.remove("complianceHyperlink_hide"))},this.calculateStickyBreakpointsDebounced=(0,ye.Z)(this.calculateStickyBreakpoints,300),this.getCompanyLogoFromLocalStorage=()=>{const e=(0,l.$o)().supported&&(0,l.$o)().getObject("companyLogo",null);if(!e||!e.default_logo)return"";return!this.layoutState.imageOfTheDayEnabled||!e.light_logo?e.default_logo||"":e.light_logo||""},this.onFlyoutEvent=(e,t)=>{let n;switch(this.flyoutOpen=t,e){case g.tk.settings:case g.tk.feedSettings:case g.tk.signInControl:case g.tk.editWelcomeGreeting:n=this.headerCoreRef?.end;break;case g.tk.search:case g.tk.imageSearch:n=this.headerCoreRef?.core;break;case g.tk.waffle:n=this.headerCoreRef?.start;break;case g.tk.addTopSite:case g.tk.editTopSite:case g.tk.topSiteOverflowPanel:n=this.topSitesHolder;break;case g.tk.museumCard:this.museumCardShown=t;break;case g.tk.locationMarkerCard:n=this.shadowRoot?.getElementById?.("locationMarkerHolder");break;case g.tk.recommendedSitesSetting:n=this.shadowRoot?.getElementById?.("recommendedSites")}if(n&&(n.style.zIndex=t?f.K.Flyout.toString():null),n&&e===g.tk.settings&&(n.style.zIndex=t?f.K.Flyout.toString():null),e===g.tk.topSiteOverflowPanel&&(n.style.zIndex=t?(f.K.Flyout+1).toString():null),e!==g.tk.hamburgerMenu&&e!==g.tk.navOverflow&&e!==g.tk.rewardsDialog&&e!==g.tk.rewardsSignInDialog||this.headerCoreRef&&(this.headerCoreRef.style.zIndex=t?"302":(f.K.Nav+2).toString()),e===g.tk.toast&&(this.topSitesHolder.style.zIndex=t?(f.K.Nav+1).toString():(f.K.Over+3).toString()),e===g.tk.actionMenuOpen){const e=this.shadowRoot?.getElementById?.("g_nav");e?.style&&(e.style.zIndex=t?"0":"")}if(this.displayWidgetsRegion){const e=this.shadowRoot?.getElementById?.("widgets");e?.style&&(e.style.zIndex=t?"1":(f.K.Nav+2).toString())}},this.switchListenerCallback=e=>{B.M0.addOrUpdateTmplProperty("fl","1"),this.isOnPersonalizeOrM365Page=!1,this.isOnM365Page=!1;const t=this.nowPivotId;this.nowPivotId=e?.newSelection?.pivotId||"",this.showHeroAboveNav=u.jG.IsHeroNTP&&this.config?.showHeroAboveNav&&"myFeed"===this.nowPivotId,this.hasChangedFeed=!!t&&t!==this.nowPivotId;const n=this.config.enableNoWorkFeed&&this.hasChangedFeed&&(t===F.D1||this.nowPivotId===F.D1);if(this.refreshTranslucentMode(),(u.jG.IsHeroNTP&&this.showHeroAboveNav||n)&&(this.updateHeaderGrid(),this.refreshHeaderHeight()),e&&e.newSelection){const t=e.newSelection;B.M0.addOrUpdateTmplProperty("fl","2"),this.config.enableGridViewFeed||B.M0.addOrUpdateTmplProperty("pagepivot_selectedPivot",JSON.stringify(t.pivotId)),this.startContentLoad(t.configIndexRef,t.context,void 0,t.pivotId),this.isOnM365Page="productivityhub"===t.pivotId.toLocaleLowerCase(),this.isOnPersonalizeOrM365Page="myInterests"===t.pivotId||this.isOnM365Page||"navigationPage"===t.pivotId}!e.oldSelection||this.transitionFromContentOff||this.isWorkFeed||window.requestAnimationFrame((()=>{this.scrollToShowFeed()})),this.transitionFromContentOff=!1},this.handleColumnArrangementChange=e=>{if(this.columnArrangement=e,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,B.M0.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),(0,Ke.N)()){const e=this.shadowRoot?.querySelector?.("background-image");e&&(e.recommendedSitesHeight=this.recommendedSitesHeight)}B.M0.updatePageMetadata({page:{viewType:(0,M.vi)()}},!0),this.config.companyLogo&&(this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement)),this.updateHeaderGrid(),this.refreshHeaderHeight(),this.updateHeaderCoreData()},this.onHeaderSpaceHolderTransitionEnd=()=>{_e.I.headerTransitionEnd.getActionSender(this.pageSettingsDataConnector).send()},this.onMarketValueChange=async e=>{this.pageSettingsDataConnector||(this.pageSettingsDataConnector=(0,Ze.K0)(o.RL)),e&&this.pageSettingsDataConnector&&(P.V.marketUpdated.getActionSender(this.pageSettingsDataConnector)?.send(e),(0,Fe.yV)(2))},this.checkAndUpdateLanguageToggle=()=>{if("marketmismatch"===u.jG.LanguageRegionMismatch||"marketmismatch"===u.jG.LanguageRegionMismatchExplicit){if("language"==u.jG.MarketMismatchDetail.type){const e=this.targetLanguageOnMismatch(a.R);e&&(this.renderMarketLanguageToggle=!0,this.localeMarket=e,"marketmismatch"===u.jG.LanguageRegionMismatchExplicit?B.M0.addOrUpdateTmplProperty("marketMismatchToggleForExplicitMismatch","1"):"marketmismatch"===u.jG.LanguageRegionMismatch&&B.M0.addOrUpdateTmplProperty("marketMismatchForToggle","1"))}}},this.setOverriddenFeedConfig=e=>{this.overriddenFeedConfig={...e}},this.savePrefsBeforeUnload=()=>{this.saveViewportInPref(),this.saveCopilotSupportedInPref()},this.saveViewportInPref=()=>{if((0,Ke.N)()){const{innerWidth:e,innerHeight:t}=window;X.U.savePreferenceSetting(J.Xm.viewport,{width:e,height:t},!1)}},this.saveCopilotSupportedInPref=e=>{(0,Ke.N)()&&(e?(0,Y.r5)(e):(0,Wt.n)().then((e=>{(0,Y.r5)(e)})))},this.saveViewportForBgRightClickMenu=()=>{if((0,Ke.N)()){const{innerWidth:e,innerHeight:t}=window;this.windowInnerHeight=t,this.windowInnerWidth=e,this.ref_rightClickMenu&&(this.bgRightClickMenuWidth=this.ref_rightClickMenu.clientWidth,this.bgRightCLickMenuHeight=this.ref_rightClickMenu.clientHeight)}},this.focusControlOnWheel=e=>{this.blurGridViewWhenActive(e.target)},this.focusControlOnScrollKeyUp=e=>{"PageDown"!=e.key&&"PageUp"!=e.key||this.blurGridViewWhenActive(e.target)},this.handleSocialBarReaction=e=>{const{id:t,reactionType:n}=e.detail;t&&n&&[_.FE.upvote,_.FE.downvote].includes(n)&&this.onSocialBarReactedSettablePromise.set()},this.openChannelStore=e=>{this.renderChannelStoreEvent=e,window.removeEventListener(F.bT,this.openChannelStore)},this.overlapStateChange=(0,ye.Z)((async()=>{if(!(0,Ke.N)()||!this.navAndContentFeedRef)return void(this.overlapState={state:0,feedbackState:0});const e=((0,m.Nd)((new m.fH).data.innerWidth,"innerWidth")-this.navAndContentFeedRef.getBoundingClientRect().width)/2,t=await(0,we.h_)(be._.floatButtonGroupWC),n=t?t.getBoundingClientRect().width+12:F.Z;let i,r,o;const a=(0,m.Nd)((new m.fH).data.innerHeight,"innerHeight"),s=a-this.navAndContentFeedRef.getBoundingClientRect().top,c=t?t.getBoundingClientRect().height:68;o=a-(t?t.getBoundingClientRect().top:945)-c+5>s?0:1,r=e>=n?0:e<=0?2:1,i=e>=F.Z?0:e<=0?2:1,this.overlapState={state:i&&o,feedbackState:r}}),10),this.lowEndDeviceHandler=e=>{this.isLowEndDevice=e?.detail?.isLowEndDevice??!1},this.handleFeedRefreshWhenPageHiddenVisibilityChange=()=>{if(this.lastDocumentVisibilityState!=document.visibilityState)if(this.lastDocumentVisibilityState=document.visibilityState,"hidden"===document.visibilityState&&null===this.pageHiddenStartTime)this.pageHiddenStartTime=Date.now();else if("visible"===document.visibilityState&&this.pageHiddenStartTime){const e=Date.now()-this.pageHiddenStartTime;let t=0;this.config.pageRefreshIntervalTimeS&&this.config.pageRefreshIntervalTimeS>0&&(t=1e3*this.config.pageRefreshIntervalTimeS),this.config.pageRefreshIntervalTimeS_HED&&this.config.pageRefreshIntervalTimeS_HED>0&&!(0,Q.I9)()&&(t=1e3*this.config.pageRefreshIntervalTimeS_HED),t>0&&"headingsonly"!==this.layoutState.selectedFeedDisplaySetting&&"off"!==this.layoutState.selectedFeedDisplaySetting&&e>=t&&(B.M0.addOrUpdateTmplProperty("FeedReferesh","1"),this.config.enableRefreshWhenPageHidden&&this._scrollToShowFeed({withRefresh:!0,disableScroll:!this.headerGridHidden,showRefreshLoading:!0})),this.pageHiddenStartTime=null}},this.handleFeedRefreshForPrerender=()=>{"hidden"===document.visibilityState&&(0,De.TR)()&&"headingsonly"!==this.layoutState.selectedFeedDisplaySetting&&"off"!==this.layoutState.selectedFeedDisplaySetting&&(this.numFeedRefreshes++,this._scrollToShowFeed({withRefresh:!0,disableScroll:!this.headerGridHidden,showRefreshLoading:!1})),B.M0.addOrUpdateTmplProperty("numfeedrefreshes",this.numFeedRefreshes.toString())},this.isFullPageBlur=()=>!!(this.config.translucentFeed?.enableBlur&&this.showFeedTranslucent&&["always","peek","headingsonly"].includes(this.layoutState?.selectedFeedDisplaySetting)&&this.navIsSticky)||this.showDarkIcon,this.getTheme=()=>this.needDarkThemeIcons?"lightTitle":this.layoutState?.imageOfTheDayEnabled&&!this.isFullPageBlur()?"darkOnBackgroundImage":(0,R.Yc)()?"darkTitle":"lightTitle",this.updateWidgetsDisplayAndStampTmpl=e=>{B.M0.addOrUpdateTmplProperty("widgets",e?"1":"0"),B.M0.addOrUpdateTmplProperty("widgetsPref",e?"1":"0"),this.displayWidgetsRegion=e&&!(this.noWidgetsData||window.noWidgetsData)},this.updateWidgetsDisplayAfterHydration=()=>{this.displayWidgetsRegion=this.displayWidgetsRegion&&!window.ssrNoWidgetsData},this.onCloseSpotlight=()=>{this.showSpotlightBackgroundGalleryCard=!1},this.toggleBgRightClickMenu=e=>{const t=e?.detail?.event;if(B.M0.addOrUpdateTmplProperty("background_image_right_click","1"),t&&this.ref_rightClickMenu){const e=t.composedPath(),n=e?.[0];if(n.classList.contains("header-core")||n.classList.contains("navAndContent")||n.classList.contains("overlayGradient")||n.classList.contains("overlay_hide")){this.showRightClickMenu=!0,this.windowInnerWidth&&this.windowInnerHeight&&this.bgRightClickMenuWidth&&this.bgRightCLickMenuHeight||this.saveViewportForBgRightClickMenu();const e=t.clientY+this.bgRightCLickMenuHeight+20>this.windowInnerHeight?t.clientY-this.bgRightCLickMenuHeight:t.clientY,n=t.clientX+this.bgRightClickMenuWidth+20>this.windowInnerWidth?t.clientX-this.bgRightClickMenuWidth:t.clientX;return this.ref_rightClickMenu.style.top=`${e}px`,this.ref_rightClickMenu.style.left=`${n}px`,B.M0.sendActionEvent(this.ref_rightClickMenu,N.Aw.RightClick,N.wu.Open),!1}this.handleHideRightClickMenu()}return!0},this.handleViewImage=()=>{window.dispatchEvent(new CustomEvent("backgroundImageWCToggle"))},this.handleEditImage=()=>{window.dispatchEvent(new CustomEvent("backgroundImageWCEdit"))},this.handleRefreshPage=()=>{window.location.reload()},this.handleHideRightClickMenu=()=>{this.showRightClickMenu=!1,this.ref_rightClickMenu&&(this.ref_rightClickMenu.style.top="0px",this.ref_rightClickMenu.style.left="-1000px")},this.handleContentCardRightClick=e=>{const{detail:t={}}=e,{actionState:n,event:i,initCardAction:r}=t;this.ref_contentCardActionMenuAnchor&&(this.ref_contentCardActionMenuAnchor.style.top=`${i.pageY}px`,this.ref_contentCardActionMenuAnchor.style.left=`${i.pageX}px`,n.buttonElement=this.ref_contentCardActionMenuAnchor,r(n))}}get isFeedAlways(){return"always"===this.layoutState?.selectedFeedDisplaySetting&&!this.config?.disableFeed&&!this.isWorkFeed}get isWorkFeed(){return this.config.enableNoWorkFeed&&(this.isOnM365Page||this.nowPivotId===F.D1||(0,y.$z)()===F.D1)}get topBannerOffsetHeight(){return this.displayConditionalBanner?46:0}get responsiveSupported(){return this.config.enableResponsiveFeed&&"following"!==this.nowPivotId}get shouldRenderSkeleton(){return(this.config.enableLoaderFlight||this.config.enableLoaderWhenRefreshFlight)&&this.showSkeleton&&!this.isOnM365Page&&("headingsonly"===this.layoutState.selectedFeedDisplaySetting&&this.contentConfigInfo||"headingsonly"!==this.layoutState.selectedFeedDisplaySetting)}get shouldRenderSuggestionPrompts(){const e=this.config?.ntpCSPExp,t=this.config?.enableTurboInteg,n=this.config?.enableNtpCSP,i=this.config?.turboIntegExp;return!(!e&&!i||!this.layoutState?.isCodexBingUpsellEnabledByPolicy)&&(i?B.M0.addOrUpdateTmplProperty("turboIntegExp","1"):e&&B.M0.addOrUpdateTmplProperty("ntpCSPExp","1"),this.layoutState?.showSuggestions&&(n||t))}get enableWidgetsFeedManager(){return this.config?.enableWidgetsRegion||this.showHeroAboveNav}get disableWeatherInHeader(){return this.config?.disableWeatherInHeader||this.config?.disableGreetInLowEndNoFeed&&(0,Q.I9)()&&["headingsonly","off"].includes(this.layoutState?.selectedFeedDisplaySetting)}get enableMouseMoveListener(){return this.config?.enableWidgetsUpsellListener&&("headingsonly"===this.layoutState?.selectedFeedDisplaySetting||"off"===this.layoutState?.selectedFeedDisplaySetting)&&!this.showHeroAboveNav}get topSitesHeightBelowSearchBoxForPeekMode(){return(0,Ht.RG)(this.layoutState,this.columnArrangement,this.isWorkFeed)}get isRecommendedSitesEnabled(){return this.childRefs.recommendedSites&&!this.showSearchBoxForHero&&!(this.showHeroAboveNav&&!(0,Ke.N)())}get recommendedSitesHeight(){return(0,Et.B)(this.isRecommendedSitesEnabled,this.recommendedSitesDisplaySetting)}get heroSegmentType(){return(0,_t.fN)()}get hideTopSectionSSRHero(){return this.showHeroAboveNav&&this.shouldAutoScroll&&!(0,Ke.N)()}get showNavAndContentTemplate(){return"off"!==this.layoutState.selectedFeedDisplaySetting&&!this.config.disableFeed}get weatherOnelinerConditionCheck(){return!this.isNewTabPageContentManagedByPolicy&&!this.disableWeatherInHeader&&this.showWeatherInFeedOff&&!this.childRefs.pulseEdgenext&&this.layoutState.greetingEnabled&&!this.shouldShowNotificationMiniCard&&this.childRefs.weatherOneLiner&&("headingsonly"===this.layoutState.selectedFeedDisplaySetting||"off"===this.layoutState.selectedFeedDisplaySetting)&&!this.feedHasLoaded&&!this.displayWidgetsRegion&&!this.showHeroAboveNav&&!this.showWidgetsUpsellButton}get showSearchBoxForHero(){return(0,_t.$b)(this.config)}get isTopSitesDisabled(){return(0,Rt.u)(this.config,this.layoutState,this.showSearchBoxForHero)}get fixedSearchBox(){return this.showSearchBoxForHero&&this.config?.showSearchBoxForHero?.keepScroll&&!this.userScrolled}async experienceConnected(){if(this.testSSRCrashOnVPtest(),B.M0.addOrUpdateTmplProperty("isNTPLowEndDevice",(0,Q.I9)()?"1":"0"),B.M0.addOrUpdateTmplProperty("isEdgeLowEndDevice",(0,Q.$V)()?"1":"0"),this.delayWelcomeGreeting=this.config.delayWelcomeGreeting&&(0,Q.I9)(),this.showHeroAboveNav=u.jG.IsHeroNTP&&this.config?.showHeroAboveNav,(this.config.earlyLoadSuperComponentConfig||this.config.enableWidgetsRegion)&&await gt.L.initConfig(),(0,Ke.N)()){const e=(0,Q.o8)();mt.L.setMetadatas(e);const{oneSvcUniTunMode:t}=this.config;t?((0,l.$o)().setItem("oneSvcUniTunMode",t.toString()),Qe.Gq.set("oneSvcUniTunMode",t)):((0,l.$o)().removeItem("oneSvcUniTunMode"),Qe.Gq.delete("oneSvcUniTunMode"))}window.shouldResetDwellTimer=u.jG.IsHeroNTP,this.updateStickyHeaderHeight(),(0,H.hy)(!d.Al.IsPrerender,"Header");const e=(0,Pe.R)();if(e&&(this.config.topSitesCollapsibleControlConfig=e),this.config.enableLoaderFlight)if((0,Ke.N)()){this.skeletonEleFromSSR=document?.body?.querySelector("edge-chromium-page").shadowRoot?.querySelector?.("#skeleton-loader");const e=this.isFeedContentDisplayed();this.skeletonEleFromSSR&&e&&(this.skeletonEleFromSSR.remove(),this.skeletonEleFromSSR=null),e||(this.skeletonEleFromSSR||(this.showSkeleton=!0),this.skeletonObserver=new MutationObserver(this.skeletonObserverCallback),this.skeletonObserver.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0}))}else this.showSkeleton=!0;if(this.childRefs=this.config.childRefs,this.updateHeaderCoreSearchData(),this.pageSettingsDataConnector=(0,Ze.K0)(o.RL),(0,Ke.N)()){if((0,Z.G)((e=>this.onMarketValueChange(e)),lt.l),this.initializeDevTools(),"true"!==d.Al.ClientSettings.static_page){const e=(0,Ce.b)(2);(0,Te.Z)(Vt?"service-worker.js":"./ntp/service-worker.js",{enableEnterprisePrecache:d.Al.IsBlendedEnterprise,...this.config.serviceWorker,...(0,Q.i9)()},e,!1,(async()=>{Ue.initializePushSubscriptionManager(e)}),Q.nz)}this.enableSpotlightButton=this.config.enableSpotlightButton,this.reportPerfMarkers(),(this.config?.appendGoogleSites||this.config?.isGoogleTopSitesCtrl)&&"1"===(0,l.$o)()?.getItem("tsAlternate")&&B.M0.addOrUpdateTmplProperty("no_mv_sites","1")}!function(e){if(!e.useEnterpriseCompliance)return;const t=Re._.getInstance().rootReducer.connector(o.zz),n=Ee.s.useEnterpriseCompliance.getActionSender(t);n&&n.send(!0)}(this.config),(0,H.b1)().then((e=>{if(this.isTtvrFiredAndCanUseDom=(0,Ke.N)(),(0,Ke.N)()&&this.shouldAutoScroll&&("peek"!==this.layoutState.selectedFeedDisplaySetting||"off"!==this.quickLinksDisplaySetting||window.isSSRCompleted||this.shouldAutoScroll&&(0,Ke.N)()&&this.scrollDownOnLoad(),this.shouldAutoScroll=!1,window.setTimeout((()=>{window.addEventListener("scroll",(()=>{this.invisibleTopSites=!1,this.userScrolled=!0,this.recommendedSitesHolder&&(this.invisibleRecommendedSites=!1,this.updateNavFeedBorderRadius()),this.invisibleSearchBox=!1}),{once:!0})}),0)),d.Al.IsPrerender)(0,De.lr)().then((()=>{const e=(0,W.Ou)().TTVR+(0,H.TZ)(G.DB);(0,ee.f)(62,d.Al.IsPrerender,!isNaN(e)&&e||performance.now())}));else{const t=e.find((e=>"TTVR"===e[0]))?.[1];(0,ee.f)(62,d.Al.IsPrerender,t)}(0,Ke.N)()&&this.layoutState&&this.config.delayMarketLanguageToggle&&(0,Q.I9)()&&(this.checkAndUpdateLanguageToggle(),this.updateHeaderCoreData()),this.renderMarketLanguageToggle&&B.M0.addOrUpdateTmplProperty("marketToggleLoaded",this.checkMarketToggleFitOnPage()?"1":"0"),(0,Ke.N)()&&this.layoutState&&this.config.delayWelcomeGreeting&&this.delayWelcomeGreeting&&(this.delayWelcomeGreeting=!1,this.updateHeaderCoreData()),(0,Ke.N)()&&(this.updateHeaderGrid(),this.refreshHeaderHeight())})),(0,g.WW)(this.onFlyoutEvent),this.columnArrangement=(0,M.Bn)().currentColumnArrangement,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,B.M0.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),(0,M.Bn)().subscribe(this.handleColumnArrangementChange),je.initialize(),this.recommendedSitesDisplaySetting=await(0,Et.$)(this.config);const t=(0,Ze.K0)(o._S),i=t&&t.getCurrentState();i&&i.settings&&(this.hideWidgetsBasedOnPolicy=!i.settings.isShowCompanyAndIndustry);let r=!1;const a=new E.o;let s=!1;(0,Ye.Uo)(o.RL,(async e=>{if(!e.isLoadCompleted)return;this.layoutState||(this.shouldAutoScroll=(0,_t.E0)(this.config,e)),!(0,Ke.N)()||this.widgetsLazyLoaded||!e.enableWidgetsRegion||"off"!==e.selectedFeedDisplaySetting&&"headingsonly"!==e.selectedFeedDisplaySetting||(this.widgetsLazyLoaded=!0,await Promise.all([n.e("common-feed-libs"),n.e("widgets-region")]).then(n.bind(n,67731))),a.set();const t=this.layoutState;this.layoutState=e,(this.config.enableNtpCSP||this.config.enableTurboInteg)&&this.updateHeaderCoreSearchData(),!t&&e.enableWidgetsRegion&&(this.isPageLoadedWithWidgets=!0),this.pageLoadedWithContentDisabled=this.config.enableWidgetsRegion&&t&&"off"===t.selectedFeedDisplaySetting;const i=this.getShowWidgets();this.config.enableWidgetsRegion&&!t&&this.updateWidgetsDisplayAndStampTmpl(i);const c=Qe.Gq.get("__hydrationPromise__");if(d.Al.CurrentFlightSet.has("prg-usessrlayout")&&(0,Ke.N)()&&window.isSSREnabled&&window.ssrLayoutState&&!window.isHydrationCompleted&&c&&(this.layoutState=window.ssrLayoutState,c.getResultAsync().then((()=>{(0,Ye.T3)(o.RL,e)}))),!t&&!s&&window.ssrLayoutState?.selectedFeedDisplaySetting&&window.ssrLayoutState.selectedFeedDisplaySetting!==e.selectedFeedDisplaySetting){const{primaryAccountInfo:t,...n}=e;(0,$.H)(U.XDw,"SSR Layout mismatch CSR Layout",void 0,{...U.XDw.pb,customMessage:`SSR Layout:${window.ssrLayoutState?.selectedFeedDisplaySetting}; CSR Layout:${e.selectedFeedDisplaySetting}; edgeHeader: ${JSON.stringify(window.edgeNTPHeader)}`,stateInfo:`${JSON.stringify(n)}`}),s=!0}this.config.disableFeed&&(this.layoutState.selectedFeedDisplaySetting="off",this.layoutState.currentLayout="custom"),"off"===e.selectedFeedDisplaySetting&&(this.isFeedRendered=!1),this.shouldRenderToastWC="off"===e.selectedFeedDisplaySetting||"headingsonly"===e.selectedFeedDisplaySetting&&!this.isFeedRendered,this.isAlwaysMode="always"===e.selectedFeedDisplaySetting,this.config.showCodexBingIcon&&this.updateHeaderCoreSearchData(),!this.isAlwaysMode&&this.hideQuickLinks&&this.displayQuickLinks(),this.quickLinksDisplaySetting=e.selectedQuickLinksDisplaySetting,B.M0.addOrUpdateTmplProperty("tsLayout",`${this.quickLinksDisplaySetting}`),this.shouldShrinkHeader="peek"===this.layoutState.selectedFeedDisplaySetting||"onerow"===this.quickLinksDisplaySetting||"tworows"===this.quickLinksDisplaySetting||"off"!==this.recommendedSitesDisplaySetting,this.shouldAutoScroll&&this.shouldShrinkHeader&&((0,Ke.N)()||"off"===this.quickLinksDisplaySetting||(this.invisibleSearchBox=!0),this.invisibleTopSites=!0,"off"!==this.recommendedSitesDisplaySetting&&(this.invisibleRecommendedSites=!0,this.updateNavFeedBorderRadius()));let u,p=!1,h=!1,g=!1,f=!1,m=!1,y=!1;if(t){if(p=t.selectedQuickLinksDisplaySetting!==e.selectedQuickLinksDisplaySetting,h=t.selectedFeedDisplaySetting!==e.selectedFeedDisplaySetting,g=t.imageOfTheDayEnabled!==e.imageOfTheDayEnabled,f=t.currentLayout!==e.currentLayout,m=t.currentBackgroundImageType!==e.currentBackgroundImageType,y=t.showSuggestions!==e.showSuggestions,this.transitionFromContentOff="off"===t.selectedFeedDisplaySetting&&"off"!==e.selectedFeedDisplaySetting,u=this.isWorkFeed&&("always"===t.selectedFeedDisplaySetting&&"peek"===e.selectedFeedDisplaySetting||t.selectedFeedDisplaySetting===e.selectedFeedDisplaySetting),p){const t="onerow"===e.selectedQuickLinksDisplaySetting||"tworows"===e.selectedQuickLinksDisplaySetting;this.handleTopSitesVisibleChange(t,e),(0,l.$o)()?.setItem(Q.Wb,"true")}y&&this.updateHeaderGrid(),this.config.enableWidgetsUpsellListener&&(this.enableMouseMoveListener&&!this.mousemoveListenerRemoved?window.addEventListener("mousemove",this.onMouseMove):"headingsonly"!==e.selectedFeedDisplaySetting&&"off"!==e.selectedFeedDisplaySetting?(this.showWidgetsUpsellButton=!1,window.removeEventListener("mousemove",this.onMouseMove)):e.enableWidgetsRegion&&(this.showWidgetsUpsellButton=!1,this.mousemoveListenerRemoved=!0,window.removeEventListener("mousemove",this.onMouseMove))),this.config?.enableWidgetsRegion&&this.feedManager&&"off"===e.selectedFeedDisplaySetting&&!this.widgetsFeedManager?.widgets?.[0]&&!this.feedManager?.widgets?.[0]&&(this.feedManager=void 0,this.getFeedDependencyPromise=void 0);let n=!1;if(this.config?.enableWidgetsRegion&&t.enableWidgetsRegion!==e.enableWidgetsRegion&&!t.enableWidgetsRegion&&(this.config.useDedicatedWidgetsManager?(n=!0,window.setTimeout((async()=>{this.updateWidgetsDisplayAndStampTmpl(i),await this.ensureWidgetsManagerLoaded(),this.widgetsFeedManager.skipInitialRender=!0,this.refreshWidgetsAndFeed(),this.updateHeaderGrid(),this.refreshHeaderHeight()}),0)):this.widgetsChangedWhileHidden?(this.widgetsRefreshHandler(),this.widgetsChangedWhileHidden=!1):this.feedManager?.widgets?.[0]||(n=!0,window.setTimeout((async()=>{this.updateWidgetsDisplayAndStampTmpl(i),await this.ensureWidgetsManagerLoaded(),this.feedManager?.feedEventAggregator&&!this.widgetsFeedManager?.widgets?.[0]&&"off"!==e.selectedFeedDisplaySetting&&this.feedManager?.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!0},!0),this.widgetsFeedManager?.feedEventAggregator&&!this.widgetsFeedManager?.widgets?.[0]&&this.widgetsFeedManager.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!0},!0),this.updateHeaderGrid(),this.refreshHeaderHeight()}),0))),n||this.updateWidgetsDisplayAndStampTmpl(i),this.config.enableWidgetsRegion&&!this.feedManager&&this.pivotManager&&"off"!==e.selectedFeedDisplaySetting){const{selectedPivot:e}=this.getViewFeedConfigAndPivot();"myFeed"==e&&(B.M0.addOrUpdateTmplProperty("feedReinit","1"),this.pageLoadedWithContentDisabled=!0,this.initFeedDependencies(e))}this.config?.enableWidgetsRegion&&!this.config.useDedicatedWidgetsManager&&!this.feedManager?.waterfall?.[0]&&this.feedManager?.feedEventAggregator&&"off"!==t.selectedFeedDisplaySetting&&this.feedManager.callRefreshRegionsData(),h&&(B.M0.addOrUpdateTmplProperty("feedChanged","1"),(0,l.$o)()?.setItem(Q.Wb,"true"),window.setTimeout((()=>{je.handleSettingUpdate(e.selectedFeedDisplaySetting)}),0)),f&&(B.M0.addOrUpdateTmplProperty("layoutChanged","1"),(0,l.$o)()?.setItem(Q.Wb,"true"))}this.config.enableWidgetsRegion&&Promise.all([(0,H.b1)()]).then((async()=>{this.hideWidgets=!1})),this.isNewTabPageContentManagedByPolicy=this.layoutState.isContentFeedManagedByPolicy,this.isAppLauncherAllowedByPolicy=!1!==this.layoutState.isAppLauncherEnabledByPolicy,u&&!g||(this.updateHeaderGrid(),this.refreshHeaderHeight(),this.refreshTranslucentMode(),this.updateHeaderCoreData(),this.updateHeaderCoreOffset(),this.checkThemeColorIcons(),(0,me.Vo)(r),r=!0),(0,Ke.N)()&&(t&&((p||h||g)&&(this.fireLayoutAnimationComplete(),scrollTo(0,0),await(0,v.rh)(400)),await(0,ge.y)(),this.calculateStickyBreakpoints()),this.config.companyLogo&&this.layoutState.isCompanyLogoEnabledByPolicy&&this.getCompanyLogo(),await(0,ge.y)(),window.setTimeout((()=>this.overlapStateChange())),this.layoutState.configData?.channel&&B.M0.addOrUpdateTmplProperty("edgch",this.layoutState.configData?.channel),this.config.enableNetworkErrorToast||this.config.enableNetworkErrorToastVpTest||this.config.enableNetworkErrorCF?(0,H.b1)().then((()=>{"1"===(0,l.$o)()?.getItem("netErrToast")&&B.M0.addOrUpdateTmplProperty("netErrToast","1"),window.addEventListener("appError",this.checkNetworkRelatedError),window.addEventListener("offline",this.showNetworkErrorToast);navigator.connection.addEventListener("change",this.checkNetworkStatus),this.config.enableNetworkErrorToastVpTest&&window.setTimeout((()=>{window&&window.dispatchEvent(new CustomEvent("appError",{detail:{errorId:44700}}))}),5e3)})):(0,H.b1)().then((()=>{(0,l.$o)()?.removeItem("netErrToast")})),"headingsonly"!==e.selectedFeedDisplaySetting&&"off"!==e.selectedFeedDisplaySetting||"off"===e.currentBackgroundImageType?(this.showSpotlightButton=!1,this.showSpotlightHoverMask=!1):(this.config.enableSpotlightButton&&(this.showSpotlightButton=!0),this.config.enableSpotlightHover&&(this.showSpotlightHoverMask=!0)),(m||p)&&this.triggerHttpCacheRevalidation(!0))})),this.hideQuickLinks=this.config?.autoHideQuickLinksInAlways&&"always"===this.layoutState?.selectedFeedDisplaySetting,this.hideQuickLinks&&window.addEventListener("wheel",this.quickLinksToggle),window.addEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),window.addEventListener("trigger-user-journey-coachmark",this.handleSocialBarReaction),await a.getResultAsync(),!(0,Ke.N)()||window.ssrAdData?.length||window.isSSREnabled||d.Al.IsPrerender||(0,nt.j)(S.U,this.layoutState,this.isWaterfallFeed((0,y.$z)())),B.M0.addOrUpdateTmplProperty("csrLayout",this.layoutState?.selectedFeedDisplaySetting),B.M0.addOrUpdateTmplProperty("ssrLayout",window.ssrLayoutState?.selectedFeedDisplaySetting);const c=(0,Q.aT)(this.layoutState.configData?.enabledFeatures||[]);let p;this.msNtpExpBitmask=(0,Q._W)(c),c.length&&B.M0.addOrUpdateTmplProperty("edgExpMask",c.join("-")),(0,Q.zx)().then((e=>{e?.enabled.includes("msRubyFlightingAllowed")&&B.M0.addOrUpdateTmplProperty("rubyexp","1")})),(0,Ye.Uo)(o.hz,(e=>{this.topSitesLayoutState=e,this.updateHeaderGrid(),this.refreshHeaderHeight(),(0,ge.y)().then((()=>{this.calculateStickyBreakpoints(),this.shouldAutoScroll&&(0,Ke.N)()&&this.scrollDownOnLoad(),!this.shouldAutoScroll&&this.invisibleTopSites&&(0,Ke.N)()&&(this.invisibleTopSites=!1)}))})),window.isSSREnabled&&(p=await te.L.getPreferenceSetting("tscollapsed"));const{anaheimLayoutPromotion:h,anaheimContentSelection:f}=await(0,Ot.GC)(),m=await(0,Ot.T)(),w=await(0,Q.ZR)(),b=await(0,Q.rc)(),C=await(0,Q.Nd)(),T=await(0,Q.Qw)(),R=(0,Q.Kr)();this.enableWidgetsFeedManager&&(this.headerHeroTelemetryObject=(0,Ut.V)("WaterfallViewFeed",{type:N.c9.Module}));const L=e=>!u.jG.IsHeroNTP&&((0,y.$z)()===F.D1||"headingsonly"===e.selectedFeedDisplaySetting||"off"===e.selectedFeedDisplaySetting);if((0,Ke.N)()&&!this.displayWidgetsRegion&&this.config.useTreatmentsFromFeedResponse&&L(this.layoutState)&&!ot.SI.isOptimizationDataReceived()&&Promise.all([(0,He.F_)(),(0,De.lr)()]).then((()=>{L(this.layoutState)&&this.fetchAndStoreWpoTreatments(p,h,f,C,T,R,m,w,b)})),this.config.enableEarlyMainFeedRequest&&(0,Ot.HK)()){const e=void 0;this.fetchAndStoreMainFeed({anaheimLayoutPromotion:h,anaheimContentSelection:f,inEdgeFeatures:C,revertTimes:T,adminDisabled:R,backgroundImageIsSet:m,newProfFreTime:w,newDevFreTime:b,feedYOffset:this.headerHeight?this.headerHeight+50:void 0,isAdb:window.edgeNTPHeader?.isAdb||d.Al.EdgeNTPHeader?.isAdb},e),e&&await e.getResultAsync(),await(0,K.Fu)(d.Al.CurrentFlightSet)}if((0,Ke.N)()&&(this.displayWidgetsRegion||this.showHeroAboveNav)&&this.initFeedDependencies("myFeed",!0),(0,Ke.N)()&&(this.config.prerenderFeedRefresh&&(0,De.TR)()&&(this.feedRefreshId=window.setInterval((()=>{this.handleFeedRefreshForPrerender()}),6e4*this.config.feedRefreshIntervalTimeMin)),window.addEventListener("resize",this.saveViewportInPref),window.addEventListener("beforeunload",this.savePrefsBeforeUnload),this.attachListenerForKeyDownScrollOnFocus(),(0,l.$o)().setItem("LastKnownPV",(new Date).getTime().toString()),Promise.all([(0,He.F_)(),(0,De.lr)()]).then((async()=>{["off","headingsonly"].includes(this.layoutState.selectedFeedDisplaySetting)&&this.triggerHttpCacheRevalidation(),(0,l.$o)().setItem("LastVisuallyReadyMarker",(new Date).getTime().toString());const e=await(document?.hasStorageAccess?.());if(window.navigator.serviceWorker&&void 0!==window.navigator.serviceWorker.controller&&window.navigator.cookieEnabled&&e)ie();else{const t={sw:window.navigator.serviceWorker&&void 0!==window.navigator.serviceWorker.controller,canUseCookies:window.navigator.cookieEnabled&&e};(0,l.$o)().setObject("FallbackNavigationResult",t)}}))),(0,Ke.N)())(0,Ye.Uo)(o.HS,(e=>{void 0!==e.isUserSignedIn&&(this.renderSignInControls=!e.isUserSignedIn,this.updateHeaderCoreData())}));else{const e=(0,Ze.K0)(o.zz);this.renderSignInControls=1===e?.getCurrentState()?.signedIn}!(0,Ke.N)()||!this.childRefs.backgroundGallery||this.config.disableBackgroundGallery||u.jG.IsFrePage&&this.config.disableGalleryFREAndLowEnd||(this.backgroundGalleryEligibility=!0,this.backgroundDataConnector=(0,Ze.K0)(o.xE),this.backgroundDataConnector&&await tt.p.initState(et.f.backgroundDataStateLoaded.getActionSender(this.backgroundDataConnector),this.config),(0,Ye.Uo)(o.xE,(e=>{this.renderBackgroundGallery=e.backgroundGalleryDisplayed}))),this.generateTelemetryTagsForBgRightClickMenu(),(0,H.b1)().then((()=>{this.saveViewportForBgRightClickMenu(),window.addEventListener("resize",this.saveViewportForBgRightClickMenu),document.addEventListener("click",this.handleHideRightClickMenu)})),this.isNewTabPageContentManagedByPolicy=this.layoutState.isContentFeedManagedByPolicy,this.isAppLauncherAllowedByPolicy=!1!==this.layoutState.isAppLauncherEnabledByPolicy;let D=this.layoutState&&this.layoutState.configData;const O=(0,Ze.K0)(o.RL);if(O){const e=await O.getConfigDataAsync();if(void 0===D&&(D=await O.getConfigDataAsync()),(0,Ke.N)()){const t=e?.enabledFeatures?.includes("msUndersideAutoOpenForMsnTopQuestion");if(t?((0,l.$o)().setItem("enableUndersideAutoOpenFromEdge","true"),B.M0.addOrUpdateTmplProperty("enableUndersideAutoOpenFromEdge","1")):(0,l.$o)().setItem("enableUndersideAutoOpenFromEdge","false"),this.config.enableUserTopics){const e=(await(0,A.O3)()).toString();(0,l.$o)().setItem("userTopics",e),X.U.savePreferenceSetting("userTopics",e)}}const t=e?.enabledFeatures?.includes("msNtpExp1"),n=e?.enabledFeatures?.includes("msNtpExp2");t?(B.M0.addOrUpdateTmplProperty("TopSitesDedupeFeatureActive","1"),B.M0.addOrUpdateTmplProperty("TopSitesDedupeTreatmentActive","1")):n&&(B.M0.addOrUpdateTmplProperty("TopSitesDedupeFeatureActive","1"),B.M0.addOrUpdateTmplProperty("TopSitesDedupeControlActive","1")),B.M0.addOrUpdateTmplProperty("headingsOnlyNoBackground",String("headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType))}if(this.config.enableSignInControl&&(0,Ke.N)()&&this.checkSignInStatusAndSetup(D),!this.config.widgetsControl&&(0,Ke.N)()&&(0,l.$o)().removeItem("elwidprom"),(0,H.b1)().then((async()=>{(0,Ke.N)()&&(this.nurturingCleanUp=await It({config:this.config,isSignedOutPromise:this.checkIsSignedOut(),isFromWidgetLockScreen:u.jG.IsHeroNTP,onScrollPromise:this.onScrollSettablePromise.getResultAsync(),onSocialPromise:this.onSocialBarReactedSettablePromise.getResultAsync(),layoutState:this.layoutState,pageSettingsDataConnector:this.pageSettingsDataConnector}))})),this.focusRedirectEnabled=D&&D.inPageSearchBoxType===I.HT.redirect,P.V.updateConfigDataChanged.registerObserver((e=>{const t=e&&e.params;if(!t||t.length<1)return;t[0]===I.HT.redirect!==this.focusRedirectEnabled&&(0,x.Z)()})),window._sugi?((0,Ie.Fg)(this.childRefs.backgroundImage),(0,Ie.Fg)(this.childRefs.welcomeGreeting)):(0,Ie.Fg)(this.childRefs.weatherOneLiner),k.J.updateLayout.registerObserver((async e=>{const t=e&&e.params;t&&t.length<1||this.updateFeedLayoutTelemetry()})),window.addEventListener("feedDropdownChange",this.updateFeedLayoutFromDropdown),this.config.enableWidgetsRegion&&(window.addEventListener("turnOffWidgetsRegion",this.turnOffWidgetsRegion),window.addEventListener("noWidgetsData",this.updateWidgetsRegion),window.addEventListener("manageWidgetsRegion",this.manageWidgetsRegion),window.addEventListener("widgetsRefresh",this.widgetsRefresh)),this.config.enableHolidayBg&&window.addEventListener("holidayBgChanged",this.updateDarkIconValue),this.childRefs.recommendedSites&&window.addEventListener("recommendedSitesSelection",this.recommendedSitesSelection),this.config.showPulseOffPartially&&window.addEventListener("hoverPulse",this.updatePulseOnHover),this.config.enableOverrideRightClick&&window.addEventListener("contentCardRightClick",this.handleContentCardRightClick),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.getLayoutStateAsync().then((e=>this.isAlwaysMode="always"===e.selectedFeedDisplaySetting)),(!this.config.delayMarketLanguageToggle||!(0,Q.I9)())&&this.checkAndUpdateLanguageToggle(),(0,Ke.N)()||(await this.initSSRContentConfigInfo(),await this.tryLoadFeedModuleBundle()),this.updateHeaderCoreData(),(0,Ke.N)()&&this.config.compressionDictionaryEnabled&&document.createElement("link").relList.supports("compression-dictionary")){B.M0.addOrUpdateTmplProperty("sbr","1");const e=e=>performance.getEntriesByType("resource").find((t=>"script"===t.initiatorType&&t.name?.includes(e))),t=["/common.","/microsoft.","/experience.","/vendors."].map((t=>e(t))).map((e=>e?.encodedBodySize||"-1")).join(",");t&&B.M0.addOrUpdateTmplProperty("sbrc",t),Promise.all([(0,De.lr)(),(0,H.b1)()]).then((()=>(0,Q.x5)())).then((e=>e&&B.M0.sendLoadTimeEvent({markers:{size:e.headers.get("content-length"),url:e.url}})))}if(this.config.enableKidsModeTmpl&&B.M0.addOrUpdateTmplProperty("kidsModeConfigsActive","true"),B.M0.addOrUpdateTmplProperty("audienceMode",d.Al?.ClientSettings?.audienceMode?d.Al.ClientSettings.audienceMode:"undefined"),void 0!==this.config.feedPushDownForNonDAU){const e=(0,l.$o)().getItem("featuxaffected");null!==e&&B.M0.addOrUpdateTmplProperty("featuxaffected",e)}(0,Ke.N)()&&this.childRefs?.channelStore&&window.addEventListener(F.bT,this.openChannelStore),B.M0.addOrUpdateTmplProperty("vp-h",`${window?.innerHeight}`),window.addEventListener("backgroundImageWCCloseSpotlight",this.onCloseSpotlight),this.childRefs.recommendedSites&&"off"===this.layoutState.selectedFeedDisplaySetting&&(B.M0.addOrUpdateTmplProperty("headerGrid",this.gridRows),B.M0.addOrUpdateTmplProperty("headerGridRowId",["logoRow","searchRow","topSitesRow","weatherOneLinerRow","scrollDownBtnRow","recommendedSitesRow","widgetsRegionRow"].map((e=>this[e])).join("|")),(this.recommendedSitesRow==this.weatherOneLinerRow||null==this.recommendedSitesRow&&0!==this.recommendedSitesHeight||this.weatherOnelinerConditionCheck&&null==this.weatherOneLinerRow)&&(0,$.H)(U.jWh,"RecommendedSitesPositionError",void 0,{...U.jWh.pb,customMessage:`recommendedSitesRow:${this.recommendedSitesRow},\n                        weatherOneLinerRow: ${this.weatherOneLinerRow},\n                        weatherOnelinerConditionCheck: ${this.weatherOnelinerConditionCheck},\n                        showWeatherInFeedOff: ${this.showWeatherInFeedOff},\n                        greetingEnabled: ${this.layoutState.greetingEnabled},\n                        feedHasLoaded: ${this.feedHasLoaded},\n                        displayWidgetsRegion: ${this.displayWidgetsRegion},\n                        showWidgetsUpsellButton: ${this.showWidgetsUpsellButton},\n                        showWeatherOneLiner: ${this.showWeatherOneLiner}`})),this.ntpTypeToSearch=this.config.ntpTypeToSearch??!1,this.copilotApiSupported=await(0,Wt.n)(),this.saveCopilotSupportedInPref(this.copilotApiSupported),(0,Q.KN)(!1)}getShowWidgets(){return this.isWidgetsVpTest()?(this.hideWidgets=!1,!0):(0,Nt.bt)(this.config,this.layoutState,this.hideWidgetsBasedOnPolicy)}disconnectedCallback(){(0,Ke.N)()&&!this.isConnected||(super.disconnectedCallback(),(0,g.St)(this.onFlyoutEvent),(0,M.Bn)().unsubscribe(this.handleColumnArrangementChange),this.pivotManager&&(this.pivotManager.removeSwitchListener($e.D.onPivotSwitch),this.pivotManager.removeSwitchListener(this.switchListenerCallback)),removeEventListener("scroll",this.areNavTopSitesOverlapping),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.onScroll),window.removeEventListener("wheel",this.quickLinksToggle),window.removeEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),removeEventListener("recommendedSitesSelection",this.recommendedSitesSelection),window.removeEventListener(pt.gQ,this.scrollToShowFeed),window.removeEventListener("resize",this.saveViewportInPref),window.removeEventListener("beforeunload",this.savePrefsBeforeUnload),window.removeEventListener("keyup",this.focusControlOnScrollKeyUp),window.removeEventListener("wheel",this.focusControlOnWheel),window.removeEventListener("trigger-user-journey-coachmark",this.handleSocialBarReaction),window.removeEventListener(F.bT,this.openChannelStore),this.onScrollSettablePromise.set(),this.headerSpaceHolder&&this.headerSpaceHolder.removeEventListener("transitionend",this.onHeaderSpaceHolderTransitionEnd),window.removeEventListener("click",this.onClickForTrigChannelStoreCoachmark),window.removeEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.removeEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor),window.removeEventListener("launchChannelStore",this.channelStoreOpened),window.removeEventListener("launchChannelStoreCoachmark",this.registerChannelStoreCoachmarkCallback),this.enableMouseMoveListener&&window.removeEventListener("mousemove",this.onMouseMove),this.nurturingCleanUp?.(),window.removeEventListener("feedDropdownChange",this.updateFeedLayoutFromDropdown),this.config?.enableLoaderFlight&&this.skeletonObserver&&this.skeletonObserver.disconnect(),this.config?.enableWidgetsRegion&&(window.removeEventListener("turnOffWidgetsRegion",this.turnOffWidgetsRegion),window.removeEventListener("noWidgetsData",this.updateWidgetsRegion),window.removeEventListener("manageWidgetsRegion",this.manageWidgetsRegion),window.removeEventListener("widgetsRefresh",this.widgetsRefresh)),this.config?.enableHolidayBg&&window.removeEventListener("holidayBgChanged",this.updateDarkIconValue),document.removeEventListener("click",this.handleHideRightClickMenu),window.removeEventListener("resize",this.saveViewportForBgRightClickMenu),window.removeEventListener("visibilitychange",this.handleFeedRefreshWhenPageHiddenVisibilityChange),this.config.showPulseOffPartially&&window.removeEventListener("hoverPulse",this.updatePulseOnHover),this.config.enableOverrideRightClick&&window.removeEventListener("contentCardRightClick",this.handleContentCardRightClick),window.removeEventListener("backgroundImageWCCloseSpotlight",this.onCloseSpotlight),this.closeGalleryTimeout&&window.clearTimeout(this.closeGalleryTimeout))}async beforeHydration(){switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":break;default:{const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot(),n=t===qt?{gamingPivotSwitched:!0}:void 0;await this.startContentLoad(e,n,!0,t)}}}async afterHydration(){switch(this.config.enableWidgetsRegion&&!this.config.useDedicatedWidgetsManager&&this.updateWidgetsDisplayAfterHydration(),this.isFeedAlways&&(this.updateHeaderGridRowsForFeedAlways(),this.headerGrid.style&&(this.headerGrid.style.gridTemplateRows=this.gridRows)),this.refreshHeaderHeight(),this.headerGrid.style&&(this.headerGrid.style.height=this.headerHeight+"px",this.headerGrid.style["grid-template-rows"]=this.gridRows),this.headerSpaceHolder.style&&(this.headerSpaceHolder.style.height=this.headerHeight+"px"),this.topSitesHolder.style&&(this.topSitesHolder.style["grid-row"]=this.topSitesRow),this.recommendedSitesHolder&&(this.recommendedSitesHolder.style["grid-row"]=this.recommendedSitesRow),this.heroInNavHolder&&(this.heroInNavHolder.style["grid-row"]=this.widgetsRegionRow),this.weatherOneLinerHolder&&(this.weatherOneLinerHolder.style["grid-row"]=this.weatherOneLinerRow),this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":{const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot();await this.startContentLoad(e,void 0,!0,t);break}}if(void 0!==window?.ssrSizes&&!window.isResized){const e=this.columnArrangement+"",t=new m.fH,n=(0,m.Nd)(t.data.innerWidth,"innerWidth"),i=(0,m.Nd)(t.data.innerHeight,"innerHeight");window.ssrSizes.ssrCol!==e&&(0,$.H)(U.v8K,"SSR - Column count mismatch after hydration.",void 0,{...U.v8K.pb,customMessage:`ssrSizes: {ssrCol: ${window.ssrSizes.ssrCol}, ssrWidth: ${window.ssrSizes.ssrWidth} px, ssrHeight: ${window.ssrSizes.ssrHeight} px},csrSizes: {csrCol: ${e}, csrWidth: ${n} px, csrHeight: ${i} px},breakpoints: ${JSON.stringify((0,M.Bn)().breakpoints)}`})}this.updateHeaderGrid(),this.refreshHeaderHeight()}processExperienceInitializeError(){super.processExperienceInitializeError();const e="Fatal web component experience exception encountered in EdgeChromiumPageWC.",t=new Error(e);(0,ut.Y)(U.aFk.id),(0,$.OO)(t,U.aFk,e)}isFeedContentDisplayed(){const e=(0,we.b_)(be._.gridViewFeed)||document?.body?.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.("grid-view-feed"),t=(0,we.b_)(be._.waterfallViewFeed)||document?.body?.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.("waterfall-view-feed");return!!(e?.shadowRoot?.querySelector?.("cs-super-container")?.shadowRoot?.querySelector?.("cs-personalized-feed")||e?.shadowRoot?.querySelector?.(".heading-group-error")||t?.shadowRoot?.querySelector?.("cs-super-container")||t?.shadowRoot?.querySelector?.(".heading-group-error"))}async initSSRContentConfigInfo(){switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":return void await this.ensureWidgetsManagerLoaded()}await this.handleWidgetsLoad();const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot();this.initFeedDependencies(t),await Promise.all([this.getFeedDependencyPromise,this.widgetsRegionDependencyPromise]),this.contentConfigInfo=e,this.context={},await(0,Ie.Fg)(e)}async handleWidgetsLoad(){if(!this.enableWidgetsFeedManager||this.config?.enableWidgetsRegion&&!this.displayWidgetsRegion&&!this.showHeroAboveNav)return;this.initFeedDependencies("myFeed",!0);const e=this.getExperienceConfigInfo("WidgetsRegion");await(0,Ie.Fg)(e)}async ensureWidgetsManagerLoaded(){this.widgetsFeedManager||(await this.handleWidgetsLoad(),await this.widgetsRegionDependencyPromise)}isWaterfallFeed(e){return!this.config.enableGridViewFeed&&(0,Q.$5)(e)}getViewFeedConfigAndPivot(){const e=(0,y.$z)(),t=this.isWaterfallFeed(e);this.config.enableGridViewFeed||(B.M0.addOrUpdateTmplProperty("page_selectedPivot",JSON.stringify(e)),B.M0.addOrUpdateTmplProperty("page_shouldUseWaterfallFeed",JSON.stringify(t)));const n=e===qt,i=this.getExperienceConfigInfo("GamingGridViewFeed","GridViewFeed","index_GamingGridViewFeed"),r=t?this.getExperienceConfigInfo("WaterfallViewFeed"):this.getExperienceConfigInfo("GridViewFeed");let o;return o=n?i:r,{viewFeedConfig:o,selectedPivot:e}}getWidgetsRegionQSP(){const e=this.pageSettingsDataConnector?.getCurrentState();let t=!!e?.enableWidgetsRegion;return t||(t=!!this.pageSettingsDataConnector?.shouldOverrideWidgetsQSP()),t}async fetchAndStoreWpoTreatments(e,t,n,i,r,o,a,s,c){(0,W.Ou)()[ot.C5.Request]=Math.round(performance.now());const d=B.M0.getPageMetadata()?.contract?.page?.name===qt,l=this.isWaterfallFeed((0,y.$z)());let p={isXFeed:!1,ocid:"anaheim-ntp-feeds",timeoutMs:1e3,feedName:d?qt:"default",pageScenario:"ntp",pageConfiguration:(0,A.yc)(this.layoutState,!1),requestId:B.M0.getRequestId(),disableContent:!0,shouldUseNewWpoEndpoint:!0,wpoSchema:"byregion",column:this.columnArrangement,anaheimLayoutPromotion:t,anaheimContentSelection:n,inEdgeFeatures:i,revertTimes:r,adminDisabled:o,backgroundImageIsSet:a,useWebLayoutEndpoint:!!l,newProfFreTime:s,newDevFreTime:c};if(this.displayWidgetsRegion&&!u.jG.IsHeroNTP&&(p.widgetsOn=this.getWidgetsRegionQSP()),this.copilotApiSupported&&(p.copilotApiSupported=!0),this.isWaterfallFeed((0,y.$z)())){const e={c1:ht.Kx.C1,c2:ht.Kx.C2,c3:ht.Kx.C3,c4:ht.Kx.C4,c5:ht.Kx.C5},t=this.config.enableOneColumn||this.columnArrangement!==L.K$.c1?this.columnArrangement:L.K$.c2,n=(0,it.Qf)(e[t],void 0,void 0,this.config);p={...p,...n}}new at.fy({...(0,Gt.L)(this.config),initialRequest:{timeoutMs:1e3}},!1).fetchFromWpoService(p,!0).then((t=>{t&&((0,W.Ou)()[ot.C5.Response]=Math.round(performance.now()),ot.SI.addWpoOptimizationDataToLocalStorage(t.pageContext,u.jG.AppType,u.jG.CurrentRequestTargetScope,!1,this.config.enbWpoPromotionFromPSL,e,this.config.enbWpoPromForWidgets,this.config.enableWpoPromotNewSave,!0),rt.u.storeWpoNotificationPreviewData(t),(0,Ae._6)(),this.pulseData=t.pulseData,(0,Ke.N)()&&ce.FI.update1sCohort(t,this.config))}))}isFeedDisabled(){const e=this.layoutState?.selectedFeedDisplaySetting;return"headingsonly"===e||"off"===e}verifySSRHeaderHeight(){const e=Qe.Gq.get(Ot.D2);e!==this.headerHeight&&(0,$.H)(U.ACv,"SSR header height mismatch",void 0,{headerHeightUsedInFeedCall:e,currentHeaderHeight:this.headerHeight,selectedFeedDisplaySetting:this.layoutState.selectedFeedDisplaySetting})}async fetchAndStoreMainFeed(e,t,n){const i=()=>{t&&t.set()};if(!n)return;const r=(0,y.$z)();if([qt,F.D1,"following"].includes(r))return this.isOnM365Page=r===F.D1,this.isOnPersonalizeOrM365Page=this.isOnM365Page,void i();if((0,ke.c)())return B.M0.addOrUpdateTmplString("DisablePrerenderFeed:1"),void i();if(this.config.useDedicatedWidgetsManager&&this.displayWidgetsRegion);else if(this.isFeedDisabled())return void i();this.copilotApiSupported=await(0,Wt.n)();const o=await(0,Ot.QA)(e,this.config,this.displayWidgetsRegion,this.copilotApiSupported);let a;ot.SI.enableEarlyMainFeedRequest=!0;const s=(0,at.eW)();if(s)a=s,Qe.Gq.set("__isSSRWpoFeedConsumed__",!0);else{const e=new at.fy({...(0,Gt.L)(this.config),initialRequest:{timeoutMs:o.timeoutInMs}},!1);await at.fy.ensureLock();try{a=await e.fetchFromWpoService(o,!0,null,!1,t)}catch(e){if(e instanceof at.GZ&&(B.M0.addOrUpdateTmplProperty("wpofetchabort",e.silentExit?"silentexit":"continue"),e.silentExit))return;throw e}finally{at.fy.releaseLock()}a&&(a.responseStatus=e.getResponseStatus(),u.jG.IsHeroNTP&&(a.isStatic=e.getIsStatic()))}(0,Ke.N)()&&ce.FI.update1sCohort(a,this.config),ot.SI.storeEarlyWpoFeedData(a),a&&a.pulseData&&(this.pulseData=a.pulseData),this.isWaterfallFeed(r)&&(0,it.s2)(o,a),(0,Ke.N)()||ot.SI.setSSRInitialFeedResponse(a)}async refreshWidgetsAndFeed(){this.config.useDedicatedWidgetsManager&&(at.fy.clearRenderedSegments(),await this.fetchAndStoreMainFeed({},void 0,!0),this.widgetsFeedManager?.waitForInited().then((()=>{this.widgetsFeedManager?.callRefreshRegionsData()})),this.feedManager?.waitForInited().then((()=>{this.feedManager?.callRefreshRegionsData()})))}async checkSignInStatusAndSetup(e){const t=await(this.pageSettingsDataConnector?.getPrimaryAccountInfoAsync(!0));this.isSignedInMSAUser="MSA"===t?.accountType;const n=t&&""===t.accountId,i="UNSUPPORTED_SOVEREIGNTY"!==t?.accountType,r=void 0!==e.isEdgeSignInAllowed&&e.isEdgeSignInAllowed;let o;o=void 0===e.isEdgeSignInAllowed?"-1":!1===e.isEdgeSignInAllowed?"0":"1",B.M0.addOrUpdateTmplProperty("signInPolicy",o);return i&&n&&this.pageSettingsDataConnector?.checkAuthApiIsAvailable()&&r?(this.renderSignInControls=!0,this.updateHeaderGrid(),this.refreshHeaderHeight()):this.renderSignInControls=!1,this.updateHeaderCoreData(),n}async checkIsSignedOut(){const e=await this.getPrimaryAccountInfo();return e&&""===e.accountId}async getPrimaryAccountInfo(){return this.pageSettingsDataConnector?.getPrimaryAccountInfoAsync(!1)}get shouldShowNotificationMiniCard(){return!(this.config.notificationHeadingsOnly&&!this.isFeedDisabled())&&(!1!==this.layoutState.showQuickBrief&&this.config.childRefs.notificationMiniCard&&this.wpoNotificationPreviewData&&(this.columnArrangement===L.K$.c4||this.columnArrangement===L.K$.c5)&&"onerow"===this.quickLinksDisplaySetting&&!rt.u.notificationMiniCardDismissed)}get showWeatherInFeedOff(){return!this.config.childRefs.notificationMiniCard||"c1"===this.columnArrangement||"c2"===this.columnArrangement||"c3"===this.columnArrangement}shadowDomPopulated(){if(!(0,Ke.N)())return;this.config.childRefs.notificationMiniCard&&(this.config.notificationAnimation&&(d.Al.IsPrerender?(0,De.lr)().then((()=>{this.enableNotificationAnimation=!0})):this.enableNotificationAnimation=!0),rt.u.subscribe((e=>{this.wpoNotificationPreviewData=e,this.updateHeaderGrid(),this.refreshHeaderHeight()}))),this.markVisuallyReadyRaf(),(0,we.FY)(be._.headerSpaceHolder,this.shadowRoot?.getElementById?.("headerSpaceHolder"));const e=window._sugi?document.querySelector("cs-ntp")?.shadowRoot?.querySelector?.("background-image"):null;if(this.backgroundOuterHolder=window._sugi?e:this.shadowRoot?.getElementById?.("bgOuterHolder"),(0,we.FY)(be._.backgroundOuterHolder,this.backgroundOuterHolder),(0,we.FY)(be._.backgroundInnerHolder,window._sugi?e:this.shadowRoot?.getElementById?.("bgInnerHolder")),(0,we.FY)(be._.navBar,this.shadowRoot?.getElementById?.("g_nav")),(0,we.FY)(be._.headerGrid,this.shadowRoot?.getElementById?.("headerGrid")),this.topSitesHolder=this.shadowRoot?.getElementById?.("topSitesHolder"),this.heroInNavHolder=this.shadowRoot?.getElementById?.("heroInHeader"),this.recommendedSitesHolder=this.shadowRoot?.getElementById?.("recommendedSites"),this.weatherOneLinerHolder=this.shadowRoot?.getElementById?.("weatherOneLinerHolder"),this.topSitesHolder&&"off"===this.layoutState.selectedQuickLinksDisplaySetting&&(this.topSitesHolder.style.visibility="hidden"),this.enableOneColumn&&(this.conditionalBanner=this.shadowRoot?.querySelector?.(".conditionalBannerHolder"),this.conditionalBanner)){new IntersectionObserver((e=>{const t=e[e.length-1];this.conditionalBannerShown=t.intersectionRatio>.5}),{root:null,rootMargin:"-10px 0px 0px 0px",threshold:.5}).observe(this.conditionalBanner)}if(this.calculateStickyBreakpoints(),this.showSearchBoxForHero&&this.config.showSearchBoxForHero?.hideTopSites||this.setupTopSitesIntersectionObserver(),this.headerGrid=this.shadowRoot?.getElementById?.("headerGrid"),this.headerGrid){const e=this.shadowRoot?.getElementById?.("translucentFeedSentinel"),t={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[.1,1]};new IntersectionObserver((t=>{if(!e||"off"===this.layoutState.selectedFeedDisplaySetting)return;1===t[t.length-1].intersectionRatio||window.innerHeight<this.headerHeight?(this.headerGrid.style.zIndex="1",this.headerGrid.classList.add("headerGrid_visible"),this.headerGrid.classList.remove("headerGrid_hidden"),(0,h.j3)("headerGrid","displayed"),window.setTimeout((()=>{this.headerGrid.style.zIndex=null}),200),this.headerGridHidden=!1):(this.headerGrid.classList.remove("headerGrid_visible"),this.headerGrid.classList.add("headerGrid_hidden"),(0,h.j3)("headerGrid","hidden"),this.headerGridHidden=!0,this.ntpTypeToSearch&&this.blur())}),t).observe(e)}if(this.nav=this.shadowRoot?.getElementById?.("g_nav"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize),window.addEventListener("visibilitychange",this.handleFeedRefreshWhenPageHiddenVisibilityChange),this.enableMouseMoveListener&&window.addEventListener("mousemove",this.onMouseMove),u.jG.IsHeroNTP&&window.addEventListener("telemetryviewportupdated",this.observeRiverVisibility),this.config.childRefs?.channelStore&&(Promise.all([(0,He.F_)(),(0,H.b1)(),(0,De.lr)()]).then((()=>{window.addEventListener("launchChannelStore",this.channelStoreOpened);const e=(0,Q.wl)();e&&e>7&&window.addEventListener("launchChannelStoreCoachmark",this.registerChannelStoreCoachmarkCallback)})),this.scrollCanTrigChannelStoreCoachmark=!0,window.addEventListener("click",this.onClickForTrigChannelStoreCoachmark),window.addEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.addEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor)),this.headerSpaceHolder?.addEventListener("transitionend",this.onHeaderSpaceHolderTransitionEnd),this.initializePivotManager(),(0,we.FY)(be._.complianceHyperlink,this.shadowRoot?.querySelector?.("#complianceHyperlink")),this.complianceHyperlink=(0,we.b_)(be._.complianceHyperlink),this.isRecommendedSitesEnabled&&(this.recommendedSites=this.shadowRoot?.querySelector?.("#recommendedSites"),this.recommendedSites)){(0,we.FY)(be._.recommendedSites,this.recommendedSites);const e={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,.95,.99,1]};new IntersectionObserver((e=>{e[e.length-1].intersectionRatio>.99?(this.invisibleRecommendedSites=!1,this.updateNavFeedBorderRadius()):(this.invisibleRecommendedSites=!0,this.updateNavFeedBorderRadius())}),e).observe(this.recommendedSites)}(0,He.F_)().then((()=>window.requestAnimationFrame((()=>window.setTimeout((()=>{this.updateTopSitesQuickLinkEndMarginUsedPadding(),(0,we.FY)(be._.personalizeButton,this.shadowRoot?.getElementById?.("g_nav")?.querySelector?.("super-nav")?.shadowRoot?.querySelector?.("#myInterests"))}),10))))),this.showSearchBoxForHero&&this.config.showSearchBoxForHero?.hideTopSites||(0,De.lr)().then((()=>{this.areNavTopSitesOverlapping(),window.addEventListener("scroll",this.areNavTopSitesOverlapping)})),(0,He.F_)().then((()=>{const e=this.config?.serviceWorker?.cacheSSRBasePageResponse;e&&async function(){const e=await(0,de.T)({type:"SW_ERROR_DATA"});if(e&&e.length){for(const t of e){const e=ue[t.id];if(!e)continue;const n={...e,message:t.message};t.data&&(n.pb={...n.pb,...t.data}),B.M0.sendAppErrorEvent(n)}B.M0.addOrUpdateTmplProperty("swerr",e.length.toString())}}();const t=!!(0,l.$o)().getItem(F.KA);e&&!t&&(0,l.$o)().setItem(F.KA,"true"),!e&&t&&(0,Q.w4)(F.$u).then((e=>{if(!e)return!1;(0,l.$o)().removeItem(F.KA),(0,l.$o)().removeItem(F.p_),(0,l.$o)().removeItem(F.xV)}))})),this.config.enableScrollPerfMetrics&&(0,Ke.N)()&&Promise.all([(0,H.b1)(),(0,H.e3)(),(0,De.lr)()]).then((()=>B.M0.initScrollPerformanceTrackers({enableScrollInputTracking:this.config.enableScrollInputTracking&&(B.M0.getRequestId()?.startsWith("1")||(0,ze.zp)()?.includes("scrolltest=1")),enableMissedScrollTracking:this.config.enableMissedScrollTracking})));(window&&window.navigator).getBattery().then((e=>{B.M0.addOrUpdateTmplProperty("userOnBatteryPower:",String(!e.charging))})),(0,H.b1)().then((()=>this.overlapStateChange())),this.checkFeedContainerWidth();const t=parseInt(d.Al?.ClientSettings?.browser?.version||"",10);!u.jG.BrowserOptOut&&this.config.enableAdInterestGroupTmpl&&t>=130&&Promise.all([(0,De.lr)(),(0,H.b1)()]).then((()=>{(0,D.hI)()?(this.oneTrustConsentHandler=()=>{this.joinAdInterestGroup(),window.removeEventListener($t.C,this.oneTrustConsentHandler)},window.addEventListener($t.C,this.oneTrustConsentHandler)):window.requestAnimationFrame((()=>{this.joinAdInterestGroup()}))}))}checkAndLogRectsOverlapping(e,t){if(0===e.height||0===e.width||0===t.height||0===t.width)return;!(e.top>t.bottom||e.right<t.left||e.bottom<t.top||e.left>t.right)&&((0,$.H)(U.RtG,"Nav and top sites are overlapping",void 0,{...U.RtG.pb,customMessage:`{"nav": ${JSON.stringify(e)}, "top sites": ${JSON.stringify(t)}, "selectedQuickLinksDisplaySetting": ${this.layoutState.selectedQuickLinksDisplaySetting}}`}),removeEventListener("scroll",this.areNavTopSitesOverlapping))}initializePivotManager(){this.pivotManager=(0,le.l)(null),this.pivotManager&&(B.M0.addOrUpdateTmplProperty("fl","0"),this.pivotManager.addSwitchListener($e.D.onPivotSwitch,pe.I.Telemetry),this.pivotManager.addSwitchListener(this.switchListenerCallback)),window.addEventListener(pt.gQ,this.scrollToShowFeed)}observeRiverVisibility(){const e=document.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.(".navAndContent");if(!e)return;new IntersectionObserver(((t,n)=>{window.shouldResetDwellTimer&&t&&"hidden"!==document.visibilityState&&t.map((t=>{if(t.intersectionRatio>=.01)return B.M0.resetDwellTime(),B.M0.startDwellTime(),e.focus(),(0,W.Ou)().HeroRiverVisible=Math.round(performance.now()),(0,W.Ou)().DocumentFocused=document.hasFocus()?1:0,window.shouldResetDwellTimer=!1,void window.setTimeout((()=>{n.unobserve(e),window.removeEventListener("telemetryviewportupdated",this.observeRiverVisibility)}),0)}))}),{root:null,rootMargin:"0px",threshold:.01}).observe(e)}filterFeedExperiencesToSkip(e){return"devTools"!==e&&"channelStore"!==e}async startContentLoad(e,t,n,i){B.M0.addOrUpdateTmplProperty("fl","3");const r=this.isWaterfallFeed(i)?this.getExperienceConfigInfo("WaterfallViewFeed"):e;if(!(0,ve.Z)(this.lastPivotSelection,{configInfo:r,context:t})){switch(this.lastPivotSelection={configInfo:r,context:t},this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":this.pageLoadedWithContentDisabled=!0,await(0,He.Qm)()}if((0,Ke.N)()&&this.config.enableChannelFiltering){if(!st.yg?.overrideFeedConfig){const{properties:e}=(0,Se.Z)(await S.U.getConfig(r.configRef)||{});e&&st.yg.setFeedConfigOverrider((t=>this.setOverriddenFeedConfig(t(e))))}this.overriddenFeedConfig=null}n||(B.M0.addOrUpdateTmplProperty("fl","4"),(0,Ie.Fg)(r)),this.initFeedDependencies(i),this.config.enableLazyLoadBreakingNews&&(this.showBreakingNews=!0,B.M0.addOrUpdateTmplProperty("lazyLoadBreakingNews","1")),this.contentConfigInfo=r,this.context=t,this.isFeedRendered=!0,this.feedHasLoaded=!0,(0,De.lr)().then((()=>{(0,Q.w$)("FEED_VISIBLE"),this.feedRefreshId&&clearInterval(this.feedRefreshId)}))}}setSharedFeedManager(e){this.sharedFeedManager=e}shouldUseSharedFeedManager(e){return this.shouldShareFeedManager(e)&&this.sharedFeedManager}shouldShareFeedManager(e){return!this.config.useDedicatedWidgetsManager&&(this.isPageLoadedWithWidgets||this.showHeroAboveNav)&&"myFeed"===e&&!this.hasChangedFeed&&!this.pageLoadedWithContentDisabled}fireLayoutAnimationComplete(){window.setTimeout((()=>{_e.I.layoutAnimationComplete.getActionSender(this.pageSettingsDataConnector).send({height:100})}),0)}async reportPerfMarkers(){const e=(0,Ze.K0)(o.Nx);if((0,H.b1)().then((e=>{const t=e.find((e=>"TTVR"===e[0]))?.[1],n=(0,He.S0)();t&&We.g.updatePageComplete.getActionSender(n).send(t),window.dispatchEvent(new CustomEvent("EdgeChromiumTTVR"))})),await(0,xe.f)({incompleteVisualDependencyCallback:e&&e.getIncompleteVisualDependencies||null,contentViewTimeoutOverride:2e3,timeoutOverride:35e3,onBeforeNotifyCallback:()=>{(0,V.o)([["TTVR.BingImage",["TTVR.BackgroundImageWC"]],["TTVR.QuickLinks",["TTVR.TopSitesEdgeNextWC"]]]);const e=(0,W.Ou)();d.Al.IsPrerender||((0,W.zp)("reload")?e["TTVR.E2E"]=e.TTVR:e.tabStartToNavigationStart&&(e["TTVR.E2E"]=e.TTVR+e.tabStartToNavigationStart)),e.timeToSendPrimaryPerfMarkers=performance.now()},maxValidTTVR:24e3}),d.Al.IsPrerender){let e=!1;(0,Oe.eC)().then((()=>{window.setTimeout((()=>{e||(0,$.H)(U.aay,"Prerender Reveal not completed before timeout")}),3e3)})),await(0,De.lr)(),e=!0}this.addE2ETtvrToSecondaryPageTimings();(0,Le.S)({incompleteVisualDependencyCallback:e&&e.getIncompleteVisualDependencies||null,timeoutOverride:35e3}).then((()=>{let e=(0,W.Y9)()["TTVR.NativeAd"];e&&(d.Al.IsPrerender&&(e+=(0,H.TZ)(G.DB)),(0,ee.f)(64,d.Al.IsPrerender,e))}))}addE2ETtvrToSecondaryPageTimings(){const e=(0,W.Ou)(),t=(0,W.Y9)();if(!e||!t)return;const n=e[G.MV],i=e[`${G.MV}.SearchBox`],r=e[G.zJ],o=`${G.MV}.${G.T8}`,a=`${G.MV}.SearchBox.${G.T8}`,s=`${G.zJ}.${G.T8}`,c=(n,i,r,o)=>{e[n]=t[n]=i,(0,q.QP)({name:n,startTime:r,endTime:o})},u=(n,i)=>{e[n]=t[n]=i,(0,q.zI)({name:n,duration:i})};if((0,W.zp)("reload"))return c(o,n,0,n),c(a,i,0,i),void c(s,r,0,r);if(!window?.chrome?.embeddedSearch?.newTabPage?.getTabTimings)return void(0,$.H)(U.IfP,"window.chrome.embeddedSearch.newTabPage.getTabTimings does not exist.");const l=t=>{d.Al.IsPrerender&&(t+=e[G.U4]),n&&u(o,t+n),i&&u(a,t+i),r&&u(s,t+r)},p=e.tabStartToNavigationStart;if(p)l(p);else{const e=Math.round(performance.now());window.chrome.embeddedSearch.newTabPage.getTabTimings(((t,n)=>{if(!t)return void(0,$.H)(U.tkb,"chrome.embeddedSearch.newTabPage.getTabTimings returned false.");if(!n||!n.tabStartToNavigationStart)return void(0,$.H)(U.OWM,"chrome.embeddedSearch.newTabPage.getTabTimings returned invalid timing object.");l(n.tabStartToNavigationStart);const i=Math.round(performance.now()),r=i-e;c(G.OM,r,e,i)}))}}getExperienceType(){return s._lg}updateHeaderGridForNonAlways(){const{selectedFeedDisplaySetting:e,selectedQuickLinksDisplaySetting:t}=this.layoutState,n=this.layoutState.imageOfTheDayEnabled,i=(this.config.topSiteMargin??16)+(this.shouldRenderSuggestionPrompts?96:0),r=this.recommendedSitesHeight,o=this.childRefs.recommendedSites?`${r}px`:"",a="off"===t?"0":"auto",s=this.isTopsitesNeedPadding(t)?"8px":"0px";if(this.gridRowsMap=new Map,!this.hideTopSectionSSRHero)if(n){let e=""+(this.enableOneColumn&&!this.isWorkFeed?"minmax(32px, 15%)":"minmax(78px, 15%)");if(this.config.ntpSearchBoxPosition){e={1:"1fr",2:"0.5fr",3:"1.5fr"}[this.config.ntpSearchBoxPosition]??e}this.gridRowsMap.set("searchBoxPosition",e)}else this.gridRowsMap.set("header","1fr"),this.gridRowsMap.set("logoRow",""+(this.enableOneColumn?"minmax(0px, auto)":"auto")),this.gridRowsMap.set("SearchTopMargin","72px");if(this.gridRowsMap.set("searchRow","46px"),this.gridRowsMap.set("SearchBottomMargin",`${i}px`),n){if(this.hideTopSectionSSRHero||(this.gridRowsMap.set("topSitesRow","auto"),this.gridRowsMap.set("topSitesBottom","1fr")),this.displayWidgetsRegion&&(this.gridRowsMap.set("widgetsRegionRow","146px"),this.gridRowsMap.set("widgetsRegionBottom","peek"===e||this.isWorkFeed?"12px":"40px")),this.childRefs.recommendedSites&&!this.hideTopSectionSSRHero&&(this.gridRowsMap.set("gapBetweenTsAndRs",`${s}`),this.weatherOnelinerConditionCheck?this.gridRowsMap.set("weatherOneLinerRow","64px"):this.showWidgetsUpsellButton?this.gridRowsMap.set("widgetsUpsellButtonRow","64px"):this.gridRowsMap.set("weatherOneLinerRow","0px"),this.gridRowsMap.set("recommendedSitesRow",`${o}`),!this.showNavAndContentTemplate)){const e="0px"!==o&&""!==o?"18px":"";this.gridRowsMap.set("recommendedSitesBottom",`${e}`)}this.isHero&&this.showHeroAboveNav&&!this.invisibleHero&&(!this.isRecommendedSitesEnabled&&this.isTopSitesDisabled||this.gridRowsMap.set("widgetsRegionTop","24px"),this.gridRowsMap.set("widgetsRegionRow","344px"),this.gridRowsMap.set("widgetsRegionBottom",`${(0,_t._T)(this.layoutState)}px`)),this.weatherOnelinerConditionCheck&&!this.childRefs.recommendedSites?this.gridRowsMap.set("weatherOneLinerRow","64px"):this.showWidgetsUpsellButton&&this.gridRowsMap.set("widgetsUpsellButtonRow","64px")}else this.hideTopSectionSSRHero||("off"!==this.layoutState.selectedQuickLinksDisplaySetting?(this.gridRowsMap.set("topSitesRow","auto"),this.childRefs.recommendedSites&&(this.gridRowsMap.set("gapBetweenTsAndRs",`${s}`),this.gridRowsMap.set("recommendedSitesRow",`${o}`))):this.childRefs.recommendedSites&&(this.gridRowsMap.set("topSitesRow",`${a}`),this.gridRowsMap.set("recommendedSitesRow",`${o}`)),this.gridRowsMap.set("topSitesBottom","1fr")),this.displayWidgetsRegion&&(this.gridRowsMap.set("widgetsRegionRow","146px"),this.gridRowsMap.set("widgetsRegionBottom","peek"===e||this.isWorkFeed?"12px":"40px")),!this.isHero||!this.showHeroAboveNav&&this.invisibleHero||(!this.isRecommendedSitesEnabled&&this.isTopSitesDisabled||this.gridRowsMap.set("widgetsRegionTop","24px"),this.gridRowsMap.set("widgetsRegionRow","344px"),this.gridRowsMap.set("widgetsRegionBottom",`${this.showHeroAboveNav?(0,_t._T)(this.layoutState):0}px`)),this.weatherOnelinerConditionCheck?this.gridRowsMap.set("weatherOneLinerRow","64px"):this.showWidgetsUpsellButton&&this.gridRowsMap.set("widgetsUpsellButtonRow","64px");const c=Array.from(this.gridRowsMap.keys()).reduce(((e,t,n)=>(e[t]=n+1,e)),{});["logoRow","searchRow","topSitesRow","weatherOneLinerRow","scrollDownBtnRow","recommendedSitesRow","widgetsRegionRow","widgetsUpsellButtonRow"].forEach((e=>{this[e]=c[e]})),this.gridRows=Array.from(this.gridRowsMap.values()).join(" "),this.getReservedHeaderHeights()}updateHeaderGrid(){return this.isFeedAlways?void this.updateHeaderGridRowsForFeedAlways():void this.updateHeaderGridForNonAlways()}updateHeaderGridRowsForFeedAlways(){const{rows:e,rowIndexes:t}=(0,Mt.kX)(this);this.gridRowHeights=e,this.gridRows=e.map((e=>`${e}px`)).join(" "),this.searchRow=t.searchRow,this.topSitesRow=t.topSitesRow,this.recommendedSitesRow=t.recommendedSitesRow,this.logoRow=t.logoRow,this.widgetsRegionRow=t.widgetsRegionRow}refreshHeaderHeight(){if(!(0,Ke.N)()&&this.shouldAutoScroll&&this.shouldShrinkHeader)return void(this.headerHeight=F._1+(0,_t.GU)(this.showHeroAboveNav,this.layoutState));if(!this.topSitesLayoutState||!this.layoutState)return;if(this.contentOffHeaderHeight=void 0,this.config.disableFeed)return void(this.headerHeight=window.innerHeight);const e=this.invisibleHero;let t,n=!1;switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":t=window.innerHeight-b.A$-this.headingsOnlyHeightReduction,this.showHeroAboveNav&&(n=t<this.headerHeightNeeded+(e?(0,Mt.Ld)(this):0));break;case"peek":t=(0,Ht.Y6)(this);break;case"onscroll":t=window.innerHeight;break;case"off":t=window.innerHeight,this.contentOffHeaderHeight="100vh";break;default:t=this.isWorkFeed?(0,Ht.Y6)(this):this.getHeaderHeightForFeedAlways()}this.invisibleHero=n,e!==this.invisibleHero&&this.updateHeaderGrid(),this.headerHeight=t}refreshTranslucentMode(){const e=this.layoutState.displayBackgroundImageType||this.layoutState.currentBackgroundImageType;if(this.config.translucentFeed&&"off"!==e){this.showFeedTranslucent=!0;const e=this.config.translucentFeed?.enableBlur&&["always","peek","headingsonly"].includes(this.layoutState?.selectedFeedDisplaySetting)&&this.navIsSticky,t=this.config.translucentFeed?.enableBlur&&"myFeed"===this.nowPivotId;this.feedOverrideStyles="",this.recommendedSitesOverrideStyles="",e?this.feedOverrideStyles+="":this.config.translucentFeed?.feedOpacity&&(0,R.Yc)()?this.feedOverrideStyles+="background-color: rgb(36 36 36 / "+(t?"0.5":this.config.translucentFeed?.feedOpacity)+");":this.config.translucentFeed?.feedOpacity&&!(0,R.Yc)()&&(this.feedOverrideStyles+="background-color: rgb(247 247 247 /"+(t?"0.5":this.config.translucentFeed?.feedOpacity)+");"),this.feedOverrideStyles+=this.config.translucentFeed?.feedSidePadding?`padding-left: ${this.config.translucentFeed?.feedSidePadding}; padding-right: ${this.config.translucentFeed?.feedSidePadding};`:"";const n=!(this.childRefs?.recommendedSites&&!this.invisibleRecommendedSites)||this.showHeroAboveNav;this.feedOverrideStyles+=this.config.translucentFeed?.feedBorderRadius&&n?`border-radius: ${this.config.translucentFeed?.feedBorderRadius};`:"",this.feedOverrideStyles+=this.boxShadowStyles,this.recommendedSitesOverrideStyles+=this.isRecommendedSitesEnabled&&this.showHeroAboveNav?`border-radius: ${this.config.translucentFeed?.feedBorderRadius};`:"";(0,Ke.N)()&&"informational"==this.layoutState.currentLayout&&(0,Q.I9)()||(0,h.j3)("backgroundImage","displayed")}else this.feedOverrideStyles="",this.recommendedSitesOverrideStyles="",this.showFeedTranslucent=this.scrollIsPastStyleThreshold&&this.layoutState.imageOfTheDayEnabled&&("headingsonly"===this.layoutState.selectedFeedDisplaySetting||"peek"===this.layoutState.selectedFeedDisplaySetting),(0,h.j3)("backgroundImage",this.showFeedTranslucent?"displayed":"hidden")}get boxShadowStyles(){return this.config.translucentFeed?.enableBlur&&["always","peek","headingsonly"].includes(this.layoutState?.selectedFeedDisplaySetting)&&this.navIsSticky||!this.config.translucentFeed?.feedBoxShadow||this.showHeroAboveNav?"":`box-shadow: ${this.config.translucentFeed?.feedBoxShadow};`}handleTopSitesVisibleChange(e,t){if(this.topSitesHolder){if("always"===t.selectedFeedDisplaySetting&&!e)return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");e?(this.topSitesHolder.style.visibility="",this.topSitesHolder.style.opacity="1"):this.topSitesHolder.style.opacity="0",window.setTimeout((()=>{e||(this.topSitesHolder.style.visibility="hidden"),this.topSitesHolder.style.transition=null}),300)}}getHeaderHeightForFeedAlways(){return this.gridRowHeights?.length||this.updateHeaderGridRowsForFeedAlways(),this.gridRowHeights.reduce(((e,t)=>e+t),0)}getTopBreakpointForFeedAlways(){this.gridRowHeights?.length||this.updateHeaderGridRowsForFeedAlways();return this.gridRowHeights.reduce(((e,t)=>e+t),0)}isTopsitesNeedPadding(e){return"off"!==e&&this.recommendedSitesHeight>0}checkMarketToggleOverlap(e,t,n){const i=e.getBoundingClientRect();let r=!1;if(i){const e=!(i.right<t.left||i.left>t.right),o=n?i.bottom>t.top:i.top<t.bottom;r=e&&o}return r}checkMarketToggleFitOnPage(){if(!this.shadowRoot)return!0;let e=this.shadowRoot?.querySelector?.("market-language-toggle");const t=this.shadowRoot?.querySelector?.("cs-header-core");if(!e){if(!t)return!0;e=t.shadowRoot?.querySelector?.("market-language-toggle")}if(!e||!e.shadowRoot||!e.shadowRoot?.children)return!0;const n=e.shadowRoot?.children[0];if(!n)return!0;e.classList?.remove("overflow");const i=n.getBoundingClientRect(),r=this.headerCoreRef?.search;if(r&&this.checkMarketToggleOverlap(r,i,!1))return e.classList?.add("overflow"),!1;const o=this.shadowRoot?.querySelector?.("background-image");if(o){const t=o.shadowRoot?.querySelector?.(".museumCard");if(t&&this.checkMarketToggleOverlap(t,i,!1))return e.classList?.add("overflow"),!1}const a=this.shadowRoot?.querySelector?.("top-sites-edgenext");return!a||!this.checkMarketToggleOverlap(a,i,!1)||(e.classList?.add("overflow"),!1)}triggerChannelStoreCoachmark(e){window.dispatchEvent(new CustomEvent("launchChannelStoreCoachmark",{detail:e})),this.scrollCanTrigChannelStoreCoachmark=!1,window.removeEventListener("click",this.onClickForTrigChannelStoreCoachmark),window.removeEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.removeEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor)}focusFeedBorderScrollFade(){const e=this.shadowRoot?.querySelector?.(".navAndContent_feed");e&&(0!=window.scrollY?e.classList.add("navAndContent_noshadow"):0==window.scrollY&&e.classList.remove("navAndContent_noshadow"))}checkGalleryPageFitAndDisplayToast(){window.requestAnimationFrame((()=>{innerWidth<dt.Gb&&(this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!1),this.renderGalleryMinimumWidthToast())}))}renderGalleryMinimumWidthToast(){this.displayGalleryMinimumWidthToast=!0,window.setTimeout((()=>{this.displayGalleryMinimumWidthToast=!1}),5e3)}calculateStickyBreakpoints(){0===window.scrollY&&this.calculateSearchStickyBreakpoint(),this.calculateTopAndBackgroundStickyBreakpoints()}calculateSearchStickyBreakpoint(){const e=this.headerCoreRef;if(!e)return;let t=F.Od;t+=this.topBannerOffsetHeight;const n=e.offsetTop;this.searchStickyBreakpoint=n-t+(this.enableOneColumn?this.stickyHeaderHeight:0),(0,fe.Fc)(F.bD,this.searchStickyBreakpoint)}calculateTopAndBackgroundStickyBreakpoints(){const{selectedFeedDisplaySetting:e}=this.layoutState;let t;switch(e){case"always":t=this.getTopBreakpointForFeedAlways()-this.stickyHeaderHeight-this.topBannerOffsetHeight;break;case"peek":t=(0,Ht.Y6)(this,!0)-this.stickyHeaderHeight-this.topBannerOffsetHeight;break;case"headingsonly":t=window.innerHeight-this.stickyHeaderHeight-b.A$-this.topBannerOffsetHeight-this.headingsOnlyHeightReduction;break;default:t=window.innerHeight-this.stickyHeaderHeight-this.topBannerOffsetHeight}const n=t,i=t;(0,fe.Fc)(F.$l,-1),(0,fe.Fc)(F.q_,n+this.stickyHeaderHeight),(0,b.cN)(n+this.stickyHeaderHeight),"off"!==this.layoutState.currentBackgroundImageType?(0,fe.Fc)(F.aI,i):(0,fe.Fc)(F.aI,-1),this.navIsSticky=window.scrollY>n,this.updateHeaderCoreOffset()}scrollDownOnLoad(){if(this.shouldShrinkHeader){let e=this.headerHeight-F._1-(0,_t.GU)(this.showHeroAboveNav,this.layoutState);this.enableOneColumn&&this.fixedSearchBox&&(e-=F.JW-F.Od),window.scroll(0,e)}}updateNavFeedBorderRadius(){this.navAndContentFeedRef?.style&&(this.config.translucentFeed?.feedBorderRadius&&(!this.childRefs?.recommendedSites||this.invisibleRecommendedSites||this.showHeroAboveNav)?this.navAndContentFeedRef.style.borderRadius=this.config.translucentFeed?.feedBorderRadius:this.navAndContentFeedRef.style.borderRadius="0px")}getCompanyLogo(){const e=this.layoutState.currentLayout;this.showBackplate="focused"===e||"custom"===e&&!this.layoutState.imageOfTheDayEnabled||"informational"===e&&this.isLowEndDevice,this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement),this.companyLogoImage=this.getCompanyLogoFromLocalStorage(),this.updateHeaderCoreData()}updateTopSitesQuickLinkEndMarginUsedPadding(){const e=this.shadowRoot?.querySelector?.("background-image")?.shadowRoot?.querySelector?.(".museumCard");e&&window.setTimeout((()=>{"off"===this.layoutState.selectedQuickLinksDisplaySetting&&(e&&e.clientWidth&&(this.topSitesQuickLinkEndMarginUsedPadding+=e.clientWidth),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.updateTopSitesQuickLinkEndMarginUsedPadding(this.topSitesQuickLinkEndMarginUsedPadding))}),300)}async initializeDevTools(){this.config.childRefs.devTools&&Promise.all([(0,H.b1)(),(0,H.e3)(),(0,De.lr)()]).then((()=>(0,v.rh)(2e3))).then((()=>{const e=d.Al.ClientSettings,t=e?.detection?.isMsft||e?.detection?.isCorpNet||u.jG.IsDebug||"int"===e.env;t&&(0,Ie.Fg)(this.config.childRefs.devTools),this.enableDevTools=t}))}updateFeedLayoutTelemetry(){B.M0.updatePageMetadata({feed:{layout:"multicol"}})}async tryLoadFeedModuleBundle(){this.feedModuleImportPromise||(this.feedModuleImportPromise=(0,Je.n)(this.config),await this.feedModuleImportPromise)}updateHeaderCoreData(){const e=this.layoutState.greetingEnabled&&this.childRefs.welcomeGreeting&&!this.isNewTabPageContentManagedByPolicy&&"weather"!==this.heroSegmentType&&!this.disableWeatherInHeader&&!this.displayWidgetsRegion&&!this.delayWelcomeGreeting,t=this.isAppLauncherAllowedByPolicy,n=this.renderSignInControls,i=this.layoutState.isCompanyLogoEnabledByPolicy&&this.showCompanyLogo&&this.config.companyLogo&&!!this.companyLogoImage;this.headerCoreTopStartData={waffleRef:t?this.childRefs.waffle:null,backgroundImageOn:this.layoutState.imageOfTheDayEnabled,enableCompanyLogo:i,companyLogoImage:this.companyLogoImage,showcompanyLogoBackplate:this.showBackplate,companyLogoBackplateColor:this.layoutState.companyLogoBackplateColor,enableClickableCompanyLogo:i&&this.config.enableClickableCompanyLogo};const{settingsButtonText:r,signInButtonText:o,signInButtonTitle:a,closeButtonText:s}=this.strings,c=this.strings.regionAndLanguageTitle??"Region and language";this.headerCoreTopEndData={signInControlRef:n?this.childRefs.signInControl:null,welcomeGreetingRef:e?this.childRefs.welcomeGreeting:null,settingsRef:this.childRefs.settings,marketLanguageToggleRef:this.renderMarketLanguageToggle?this.childRefs.marketLanguageToggleWC:null,localeMarket:this.localeMarket,onMarketValueChange:this.onMarketValueChange,languageToggleHorizontalAlignment:!0,showWGPlaceHolder:!(0,Ke.N)(),strings:{settingsButtonText:r,signInButtonText:o,signInButtonTitle:a,regionAndLanguageTitle:c,closeButtonText:s}},this.enableHiddenWelcomeGreeting=e&&this.headerCoreTopEndData.showWGPlaceHolder}updateHeaderCoreSearchData(){this.headerCoreSearchData={searchConfigRef:this.childRefs.search,showCodexBingIcon:this.config?.showCodexBingIcon,enableCodexBingStyles:this.config?.showCodexBingIcon&&(this.isAlwaysMode||0!=window?.scrollY),suggestionConfigRef:this.shouldRenderSuggestionPrompts?this.childRefs.copilotSuggestionPrompts:void 0}}targetLanguageOnMismatch(e){const t=d.Al.ClientSettings&&d.Al.ClientSettings.market&&d.Al.ClientSettings.market.requestInput,n=u.jG.CurrentMarket.split("-"),i={language:(t.language??"").toLowerCase(),market:(t.region??"").toLowerCase()};if(t&&i){const t={language:i.language,market:n[n.length-1]},r=c.$n.find((e=>e.id==(0,ct.py)(t)));if(r)return r;const o=i.market&&c.$n.find((e=>e.id==(0,ct.py)(i)));if(o)return o;{const t=e.get(i.language);if(t)return c.$n.find((e=>e.id==t[0]))}}}async onConditionalBannerDisplayChange(e){this.displayConditionalBanner=e,this.updateStickyHeaderHeight(),this.updateHeaderCoreOffset(),this.updateHeaderGrid(),this.refreshHeaderHeight(),await(0,ge.y)().then((()=>this.calculateStickyBreakpoints()))}updateStickyHeaderHeight(){this.stickyHeaderHeight=b.FQ,this.enableOneColumn||(this.stickyHeaderHeight+=this.topBannerOffsetHeight)}updateHeaderCoreOffset(){this.headerCoreOffset=0,this.enableOneColumn||(this.headerCoreOffset+=this.topBannerOffsetHeight)}attachListenerForKeyDownScrollOnFocus(){window.addEventListener("keyup",this.scrollOnKeyUp,{once:!0}),window.addEventListener("keyup",this.focusControlOnScrollKeyUp),window.addEventListener("wheel",this.focusControlOnWheel)}scrollOnKeyUp(e){if("PageDown"==e.key||"ArrowDown"==e.key){const t=document?.activeElement;if(!t||"EDGE-CHROMIUM-PAGE"===t.tagName)return;window.setTimeout((()=>{if(0==window.scrollY){const t="PageDown"==e.key?window.innerHeight:window.innerHeight/5;window.scrollBy({top:t,behavior:"smooth"})}}),1)}}blurGridViewWhenActive(e){e&&e.shadowRoot&&e.shadowRoot?.activeElement&&"gridViewFeed"==e.shadowRoot?.activeElement.elementKey&&e.shadowRoot?.activeElement.blur()}joinAdInterestGroup(){B.M0.addOrUpdateTmplProperty("jaig","1"),(navigator?.cookieDeprecationLabel||"cookieDeprecationLabel"in navigator)&&navigator.cookieDeprecationLabel?.getValue?.().then((e=>{if(B.M0.addOrUpdateTmplProperty("ckdp-label",e||"none"),e?.includes("treatment")&&(B.M0.addOrUpdateTmplProperty("ckdp-t-jaig","1"),this.config.enableJoinAdInterestGroup)){const e={owner:"https://bat.bing.com",name:"NTPGroup",lifetimeMs:2592e6,priority:1e3,biddingLogicUrl:"https://bat.bing.com/pa/ps/x/cdn/bidding/bidding-current.js",executionMode:"compatibility",trustedBiddingSignalsUrl:"https://ib.adnxs.com/ps/ib/pa/kv",trustedBiddingSignalsKeys:["ms_u_m_"+(0,O.ej)("MUID"),"ms_u_a_"+(0,O.ej)("APP_ANON")?.substring(2)]};navigator?.joinAdInterestGroup&&"function"==typeof navigator.joinAdInterestGroup&&navigator.joinAdInterestGroup(e,2592e6)}}))}isVpTest(){return"1"===w.cX.getQueryParameterByName("vptest",(0,ze.zp)())}isWidgetsVpTest(){return!(!this.isVpTest()||!this.config?.enableWidgetsRegion||u.jG.IsHeroNTP)&&"1"===w.cX.getQueryParameterByName("ntpwidgets",(0,ze.zp)())}generateTelemetryTagsForBgRightClickMenu(){this.telemetryObject&&(this.telemetryTags.viewBackgroundImage=(0,Bt.X)(F.KB.viewBackgroundImage,{headline:"bg right click menu view background image"},N.wu.More,N.Aw.Click).getMetadataTag?.(),this.telemetryTags.editBackgroundImage=(0,Bt.X)(F.KB.editBackgroundImage,{headline:"bg right click menu edit background image"},N.wu.More,N.Aw.Click).getMetadataTag?.(),this.telemetryTags.refreshPage=(0,Bt.X)(F.KB.refreshPage,{headline:"bg right click menu edit background image"},N.wu.Refresh,N.Aw.Click).getMetadataTag?.(),this.telemetryTags.contextMenu=(0,Bt.X)(F.KB.contextMenu,{headline:"bg right click menu"},N.wu.More,N.Aw.RightClick).getMetadataTag?.())}testSSRCrashOnVPtest(){const e="1"===w.cX.getQueryParameterByName("ssrCrashVptest",location.href);if(!(0,Ke.N)()&&e)throw new Error("Test SSR crash on VP test case")}updatePivotsNavigatedAndStampTmpl(e,t){if(!e)return;const n=t?"w":e.charAt(0);this.pivotsNavigated.push(n),B.M0.addOrUpdateTmplProperty("pivotsNav",this.pivotsNavigated.toString())}async prerenderRefreshCritical(){const e=this.getShowWidgets();if(this.config.useDedicatedWidgetsManager&&at.fy.isPrerenderDsiabled){if(this.noWidgetsData=!1,!e)return;await this.fetchAndStoreMainFeed({},void 0,!0),await this.ensureWidgetsManagerLoaded(),this.widgetsFeedManager.skipInitialRender=!0,this.updateWidgetsDisplayAndStampTmpl(e),await this.widgetsFeedManager.waitForInited(),this.widgetsFeedManager.callRefreshRegionsData(),this.updateHeaderGrid(),this.refreshHeaderHeight()}}checkFeedContainerWidth(){if(this.feedContainerRef){const e=this.feedContainerRef.clientWidth-this.feedContainerRef.getBoundingClientRect().width;this.requiresExtraWidth=e>0,this.requiresExtraWidth&&this.style.setProperty("--extra-feed-width",`${d.Al.CurrentFlightSet.has("ntp-resp-width")?"0.02":e}px`)}}debouncedFeedWidthCheck(){this.requiresExtraWidth=!1,this.feedWidthCheckHandler&&this.feedWidthCheckHandler.cancel(),this.feedWidthCheckHandler=(0,ye.Z)(this.checkFeedContainerWidth,100),this.feedWidthCheckHandler()}triggerHttpCacheRevalidation(e=!1){!window.ssrPageGenTime||!0===e&&!0===this.isHttpCacheInvalidated||(!0===e&&(this.isHttpCacheInvalidated=!0),(window.isCSRFallback||0===(0,j.os)()?.transferSize||"true"===d.Al.ClientSettings.static_page)&&fetch(location.href,{cache:e?"no-cache":"reload"}))}}(0,r.gn)([Xe.LO],Yt.prototype,"isLowEndDevice",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"layoutState",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"columnArrangement",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"quickLinksDisplaySetting",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"headerHeight",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"contentOffHeaderHeight",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"gridRows",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"headerHeightNeeded",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"enableOneColumn",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showPivotRefreshButton",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"closeRefreshAnimation",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"logoRow",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"searchRow",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"topSitesRow",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"widgetsRegionRow",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"recommendedSitesRow",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"weatherOneLinerRow",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"widgetsUpsellButtonRow",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"scrollDownBtnRow",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"isWeatherOneLinerMapped",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showWeatherOneLiner",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showFeedTranslucent",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showDarkIcon",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"needDarkThemeIcons",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"feedOverrideStyles",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"recommendedSitesOverrideStyles",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"enableHiddenRecommendedSitesStyles",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"recommendedSitesDisplaySetting",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"navIsSticky",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"isTtvrFiredAndCanUseDom",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showBreakingNews",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"enableSpotlightButton",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"widgetsRegionRequiresTtvrCallback",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"isSignedInMSAUser",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"pivotManager",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"conditionalBannerShown",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"isAlwaysMode",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"bottomRightCornerClassName",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"className",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"canaryFlightEnabled",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"displayConditionalBanner",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"displayNetworkErrorBanner",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"isOnPersonalizeOrM365Page",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"isOnM365Page",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"nowPivotId",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"isNewTabPageContentManagedByPolicy",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"contentConfigInfo",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"context",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"getFeedDependencyPromise",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"widgetsRegionDependencyPromise",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"hideWidgets",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"pulseData",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"pulseOnHover",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"renderBackgroundGallery",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showSpotlightBackgroundGalleryCard",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showSpotlightButton",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showSpotlightHoverMask",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showSpotlightButtonByHover",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"displayGalleryMinimumWidthToast",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"headerCoreTopStartData",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"headerCoreTopEndData",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"headerCoreSearchData",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"headerCoreOffset",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"stickyHeaderHeight",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"wpoNotificationPreviewData",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"enableNotificationAnimation",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"notSupportLayout",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"gameContainerRef",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"requiresExtraWidth",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"enableHiddenWelcomeGreeting",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"displayNetworkErrorWhenFeedDependenciesFailed",void 0),(0,r.gn)([Xe.lk],Yt.prototype,"topBannerOffsetHeight",null),(0,r.gn)([Xe.lk],Yt.prototype,"responsiveSupported",null),(0,r.gn)([Xe.lk],Yt.prototype,"shouldRenderSkeleton",null),(0,r.gn)([Xe.lk],Yt.prototype,"shouldRenderSuggestionPrompts",null),(0,r.gn)([Xe.LO],Yt.prototype,"enableDevTools",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showSkeleton",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"userScrolled",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"invisibleTopSites",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"invisibleSearchBox",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"invisibleRecommendedSites",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"invisibleHero",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"overriddenFeedConfig",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"overlapState",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"feedHasLoaded",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"shouldRenderToastWC",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"telemetryTags",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showRightClickMenu",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"personalizedTelemetryObject",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"headerHeroTelemetryObject",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"renderChannelStoreEvent",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"ntpTypeToSearch",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"isHero",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showHeroAboveNav",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"showWidgetsUpsellButton",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"flyoutOpen",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"displayWidgetsRegion",void 0),(0,r.gn)([Xe.LO],Yt.prototype,"animationIconVisibile",void 0),(0,r.gn)([Xe.lk],Yt.prototype,"hideTopSectionSSRHero",null),(0,r.gn)([Xe.lk],Yt.prototype,"showNavAndContentTemplate",null),(0,r.gn)([Xe.lk],Yt.prototype,"weatherOnelinerConditionCheck",null),(0,r.gn)([Xe.lk],Yt.prototype,"fixedSearchBox",null),(0,r.gn)([Xe.lk],Yt.prototype,"shouldShowNotificationMiniCard",null),(0,r.gn)([Xe.lk],Yt.prototype,"showWeatherInFeedOff",null);var Zt=n(91042),en=n(59942),tn=n(79744);var nn=n(49903),rn=n(49218);var on=n(89150),an=n(41472),sn=n(93703),cn=n(14004),dn=n.n(cn),un=n(36362),ln=n.n(un),pn=n(33122),hn=n(29321),gn=n(12802),fn=n(77317),mn=n(22735);pn.q,fn.Z,hn.S,gn.h;const yn=(0,tn.M)("TTSR.TopSitesTag",!0),vn=(0,tn.M)("TTSR.HeaderTag",!0),Sn=(0,tn.M)(`${H.nz}Complete`),wn=(0,tn.M)(`${H.nz}SearchBox`,!0),bn=(f.K.Nav+2).toString(),Cn=e=>`--sticky-height:${e.stickyHeaderHeight||108}px;--search-sticky-extra-height:${e.topBannerOffsetHeight}px`,Tn=rn.dy`<div class="refreshPage ${e=>e.closeRefreshAnimation?"hide":""}"><fluent-progress-ring></fluent-progress-ring></div>`,kn=(rn.dy`<div class="doubleWideRiverCard"></div>`,rn.dy`<div class="singleWideRiverCard"></div>`,rn.dy`<div class="fixed-size-card"><div class="card-img skeleton"></div><div class="card-label skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton" style="width: 70%;"></div></div>`),Pn=rn.dy`<div class="skeleton-container ${e=>e.responsiveSupported?"skeleton-responsive":""}" id="skeleton-loader"><div class="skeleton-feed fixed-size-feed ${e=>e.config.enableShimmerForSkeleton?"shimmer":""}">${(0,on.rx)((e=>new Array(39)),kn)}</div></div>`,An=e=>e.config.translucentFeed?.feedSidePadding?.split("px")?.[0],In=e=>`${e.feedOverrideStyles}; --nav-height:${b.A$||50}px; ${Cn(e)}`,En=e=>{if("cegrowth"===e.heroSegmentType)return(0,R.Yc)()?`${u.jG.StaticsUrl}latest/moment-in-time/icons/HeaderIconDark.svg`:`${u.jG.StaticsUrl}latest/moment-in-time/icons/HeaderIconLight.svg`},Rn=rn.dy`<div id="heroInHeader" class="navAndContent ${e=>e.showFeedTranslucent?"navAndContent_tb":""} navAndContent_nb" style="${e=>`grid-row: ${e.widgetsRegionRow};min-height: auto;z-index: 1;border-radius: ${e.config.translucentFeed?.feedBorderRadius};box-shadow:${e.boxShadowStyles};position:relative;display:${e.invisibleHero?"none":""}`}">${e=>(0,nn.Ot)(e.childRefs.widgetsRegion,{properties:{getFeedDependencyPromise:e.widgetsRegionDependencyPromise,styles:`${In(e)}; box-shadow: unset;`,showHero:e.showHeroAboveNav,headerTitle:"cegrowth"===e.heroSegmentType&&e.strings.todaysmoment,headerIcon:En(e)},ttvrMarkerAggregate:"Header",telemetryObject:e.headerHeroTelemetryObject})}</div>`,Mn=rn.dy`<div style="${e=>(e=>e.config.enableFixedImageGutter?`--nav-image-gutter-margin:${e.config.bufferSizeOverride}px;`:"")(e)}" class="navAndContent ${e=>e.showFeedTranslucent?"navAndContent_tb":""} navAndContent_nb ${e=>e.config.enableNoWorkFeed&&e.isOnM365Page?"navAndContent_noWFeed":""} ${e=>e.config.enableResponsiveFeed&&"following"!==e.nowPivotId?"nav-content-responsive":""}"><div class="navAndContent_feed ${e=>"play"===e.nowPivotId?"navAndContent_feed_fullpage":""} ${e=>e.buildFocusBorderStyleClasses()}" style="${e=>In(e)}" ${(0,an.i)("navAndContentFeedRef")}><div class="g_nav_container"><div id="g_nav" style="${e=>e.isOnM365Page?`position:relative;${e.config.enableNoWorkFeed?"":"--m365-column-width:fit-content;"}justify-content:flex-start`:""}" class="nav ${e=>e.className} ${e=>e.config.enableOneColumn?"navStickyOneColumn":""} ${e=>e.conditionalBannerShown?"conditionalBannerShown":""} ${(0,fe.Fl)({stickyClassName:"nav_sticky",breakpointName:F.n9})}><div class="navSized ${e=>e.isOnM365Page?"contentSized":""} ${e=>e.config.enableOneColumn&&!e.responsiveSupported?"contentSizedOneColumn":""} ">${e=>(0,nn.Ot)(e.childRefs.superNav,{attributes:{showFullPageBlur:e.isFullPageBlur(),isSignedInMSAUser:e.isSignedInMSAUser},ttvrMarkerAggregate:"Header"})}</div></div></div>${(0,sn.g)((e=>e.showPivotRefreshButton),Tn)}<div style="${e=>e.isOnM365Page?"margin-top:0;":""} ${e=>e.shouldRenderSkeleton&&e.responsiveSupported?"position:relative;":""}" class="contentBelowNav ${e=>e.isOnM365Page?"":"contentSized"} ${e=>!e.isOnM365Page&&e.config.enableOneColumn?"contentSizedOneColumn":""} ${e=>"play"===e.nowPivotId?"contentSizedFullScreen":""} ${e=>e.config.enableNoWorkFeed&&e.isOnM365Page?"noWorkFeedContent":"contentPlaceHolder"} ${e=>e.requiresExtraWidth?"increased-width":""} " ${(0,an.i)("feedContainerRef")}>${(0,sn.g)((e=>e.shouldRenderSkeleton),Pn)} ${(0,sn.g)((e=>!e.isOnPersonalizeOrM365Page&&e.config.childRefs.superBreakingNews&&(!e.config.enableLazyLoadBreakingNews||e.showBreakingNews)),rn.dy`${e=>(0,nn.Ot)(e.childRefs.superBreakingNews,{attributes:{style:"display: grid; justify-items: center;"},ttvrMarkerAggregate:"Header"})}`)} ${(0,sn.g)((e=>e.config.enableChannelFiltering&&"following"===e.nowPivotId),rn.dy`${e=>(0,nn.Ot)(e.getExperienceConfigInfo("ChannelFilterCard"),{memoize:!1})}`)} ${(0,sn.g)((e=>e.contentConfigInfo),rn.dy` ${(0,sn.g)((()=>window.isSSREnabled),rn.dy`${()=>rn.dy`${rn.dy.partial((0,z.yC)())}`}`)} ${(0,sn.g)((e=>window.isSSREnabled),(e=>{return(t=e.contentConfigInfo)?rn.dy`<script nonce="${()=>window.NONCE_ID}">window.ssrLoadedExperience.publish(${rn.dy.partial(JSON.stringify(t))})</script>`:rn.dy``;var t}))} ${e=>(0,nn.Ot)(e.contentConfigInfo,{includeTelemetryTag:!1,properties:{gamingPivotSwitched:e.context?.gamingPivotSwitched,context:e.context,getFeedDependencyPromise:e.getFeedDependencyPromise,overriddenConfig:e.config.enableChannelFiltering?e.overriddenFeedConfig:null,feedPadding:An(e),isHeroShownOnHeader:e.showHeroAboveNav},memoize:!1})} `)} ${(0,sn.g)((e=>e.displayNetworkErrorWhenFeedDependenciesFailed),rn.dy`<div class="network-error-message">${e=>e.strings.networkErrorMessage}</div>`)}</div></div></div>`,xn=rn.dy`<msn-toast class="backgroundGalleryMinimumWidthToast">${e=>e.strings.backgroundGalleryBelowMinimumWidthToastText}</msn-toast>`,Ln=rn.dy`<cs-header-core :startSection=${e=>e.headerCoreTopStartData} :endSection=${e=>e.headerCoreTopEndData} :searchSection=${e=>e.headerCoreSearchData} :chromiumPageSettingsState=${e=>e.layoutState} :headerCoreTTVRTemplate=${wn} :showFullPageBlur=${e=>e.isFullPageBlur()} :needDarkThemeIcons=${e=>e.needDarkThemeIcons} :isOnM365Page=${e=>e.isOnM365Page} class="translucent ${e=>e.headerCoreSearchData?.enableCodexBingStyles?"bing-chat":""} ${e=>e.fixedSearchBox?"fixed-search":""} " style="grid-row:${e=>e.searchRow};${e=>(e=>`--header-offset:${e.invisibleTopSites?0:e.headerCoreOffset||0}px;--header-top-margin:${F.Od}px;`)(e)}" ${(0,an.i)("headerCoreRef")}></cs-header-core>`,Fn=rn.dy` ${(0,sn.g)((e=>e.topSitesLayoutState&&e.childRefs.topSites&&"off"!==e.quickLinksDisplaySetting),(e=>(0,nn.Ot)(e.childRefs.topSites,{attributes:{selectedQuickLinksDisplaySetting:e.quickLinksDisplaySetting,quickLinksToggleSpacingForBanner:!!e.displayConditionalBanner,showFullPageBlur:e.isFullPageBlur(),needDarkThemeIcons:e.needDarkThemeIcons,quickBriefVisible:!!e.shouldShowNotificationMiniCard},ttvrMarkerAggregate:"Header"})))} ${yn}
`,Dn=rn.dy`<div id="widgets" class="${e=>e.hideWidgets&&"widgets_hidden"} widgetsRegion" style=${e=>`grid-row: ${e.widgetsRegionRow}; z-index: ${e.flyoutOpen?1:bn};`}>${e=>(0,nn.Ot)(e.childRefs.widgetsRegion,{properties:{getFeedDependencyPromise:e.widgetsRegionDependencyPromise,isFollowingFeed:"following"===e.nowPivotId,limitHeight:"off"===e.layoutState.selectedFeedDisplaySetting||"headingsonly"===e.layoutState.selectedFeedDisplaySetting,needsExperienceTtvrCallback:e.widgetsRegionRequiresTtvrCallback},ttvrMarkerAggregate:"Header"})}</div>`,On=rn.dy`${rn.dy.partial('<svg viewBox="0 0 226 48" height="48" width="225"><path key="MicrosoftLogo1" id="microsoft" d="M93.6 9.6v28.8h-5V15.8h-.1l-8.9 22.6h-3.3l-9.1-22.6h-.1v22.6h-4.6V9.6h7.2L78 30.9h.1l8.7-21.3h6.8zm4.1 2.2c0-.8.3-1.5.9-2 .6-.5 1.3-.8 2.1-.8.9 0 1.6.3 2.1.9.5.5.9 1.2.9 2s-.3 1.5-.9 2c-.6.5-1.3.8-2.1.8-.9 0-1.5-.3-2.1-.8-.5-.7-.9-1.4-.9-2.1zm5.4 5.9v20.7h-4.9V17.7h4.9zm14.8 17.2a9.2 9.2 0 0 0 4.8-1.8v4.5c-.8.5-1.7.8-2.7 1-1 .2-2.1.3-3.3.3-3.1 0-5.5-.9-7.4-2.9-1.9-1.9-2.9-4.4-2.9-7.3 0-3.3 1-6.1 2.9-8.2 1.9-2.1 4.7-3.2 8.3-3.2.9 0 1.8.1 2.7.3.9.3 1.7.5 2.2.8v4.7c-.7-.5-1.5-1-2.3-1.3-.8-.3-1.6-.5-2.4-.5-1.9 0-3.5.6-4.7 1.9-1.2 1.3-1.8 2.9-1.8 5.1 0 2.1.5 3.7 1.7 4.9 1.4 1.1 2.9 1.7 4.9 1.7zm18.6-17.5c.4 0 .7 0 1.1.1.3.1.6.1.8.2v4.9c-.3-.2-.6-.3-1.1-.5-.5-.2-1.1-.3-1.8-.3-1.2 0-2.2.5-3 1.5-.8 1-1.3 2.5-1.3 4.7v10.4h-4.9V17.7h4.9V21h.1c.5-1.1 1.1-2 2-2.7.8-.6 1.9-.9 3.2-.9zm2.1 11c0-3.4.9-6.1 2.9-8.1 1.9-2 4.6-3 8.1-3 3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.9-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.2 1.2-1.6 2.9-1.6 5.1zm23.3-5c0 .7.2 1.3.7 1.7.5.4 1.4.9 2.9 1.5 1.9.8 3.3 1.7 4.1 2.6.8 1 1.2 2.1 1.2 3.5 0 1.9-.7 3.5-2.3 4.7-1.5 1.2-3.5 1.8-6.1 1.8-.9 0-1.8-.1-2.9-.3-1.1-.2-1.9-.5-2.7-.8V33c.9.6 1.9 1.1 2.9 1.5 1 .3 1.9.5 2.8.5 1.1 0 1.9-.1 2.4-.5.5-.3.8-.8.8-1.5s-.3-1.3-.8-1.7c-.5-.5-1.6-1-3.1-1.6-1.8-.7-3.1-1.6-3.8-2.5s-1.1-2.1-1.1-3.6c0-1.9.7-3.4 2.2-4.6 1.5-1.2 3.4-1.8 5.7-1.8.7 0 1.5.1 2.4.3.9.1 1.7.4 2.3.6v4.6c-.7-.4-1.4-.8-2.3-1.1-.9-.3-1.7-.5-2.5-.5-.9 0-1.7.2-2.1.5-.4.5-.7.9-.7 1.6zm10.9 5.2c0-3.4.9-6.1 2.9-8.1s4.6-3 8.1-3c3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.8-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.1 1.2-1.6 2.9-1.6 5.1zm32.3-6.5H208v16.7h-4.9V21.7h-3.5v-4h3.5v-2.9c0-2.2.7-3.9 2.1-5.3 1.4-1.4 3.2-2.1 5.4-2.1.6 0 1.1 0 1.6.1s.9.1 1.2.3V12c-.1-.1-.5-.2-.9-.3-.4-.1-.9-.2-1.4-.2-1 0-1.8.3-2.3.9-.5.7-.8 1.6-.8 2.8v2.5h7.3V13l4.9-1.5v6.1h4.9v4h-4.9v9.7c0 1.3.2 2.2.7 2.7.5.5 1.2.8 2.2.8.3 0 .6-.1 1-.2s.7-.3 1.1-.5v4c-.3.2-.8.3-1.5.5-.7.1-1.4.2-2.1.2-2.1 0-3.6-.5-4.6-1.7-1-1.1-1.5-2.7-1.5-4.9V21.7h-.2z"/><path key="MicrosoftLogo2" id="blue" d="M22.8 25.2H0V48h22.8V25.2z" fill="#00A4EF"/><path key="MicrosoftLogo3" id="yellow" d="M48 25.2H25.2V48H48V25.2z" fill="#FFB900"/><path key="MicrosoftLogo4" id="green" d="M48 0H25.2v22.8H48V0z" fill="#7FBA00"/><path key="MicrosoftLogo5" id="red" d="M22.8 0H0v22.8h22.8V0z" fill="#F25022"/></svg>')}`,_n=rn.dy`<div id="notificationMiniCardWrapper">${(0,sn.g)((e=>e.shouldShowNotificationMiniCard),(e=>(0,nn.Ot)(e.childRefs.notificationMiniCard,{properties:{data:e.wpoNotificationPreviewData,onDismiss:e.dismissNotificationMiniCard,showNotificationSettingsOption:"off"!==e.layoutState.selectedFeedDisplaySetting,theme:e.getTheme()}})))}</div>`,Nn=rn.dy` ${(0,sn.g)((e=>!e.config.notificationOnRight),_n)} ${Fn} ${(0,sn.g)((e=>e.config.notificationOnRight),_n)}
`,Bn=rn.dy`<div class="rightClickMenu" style="left:-1000px" data-t="${e=>e.telemetryTags?.contextMenu}" ${(0,an.i)("ref_rightClickMenu")}><div role="button" class="rightClickMenuItem" data-t="${e=>e.telemetryTags?.editBackgroundImage}" @click=${e=>e.handleEditImage()}><span class="rightClickMenuItemIcon">${rn.dy.partial((Un="20",`<svg xmlns="http://www.w3.org/2000/svg" width=${Un} height=${Un} viewBox="0 0 21 20"><path d="M14.5 7.5C14.5 8.32843 13.8284 9 13 9C12.1716 9 11.5 8.32843 11.5 7.5C11.5 6.67157 12.1716 6 13 6C13.8284 6 14.5 6.67157 14.5 7.5ZM13.5 7.5C13.5 7.22386 13.2761 7 13 7C12.7239 7 12.5 7.22386 12.5 7.5C12.5 7.77614 12.7239 8 13 8C13.2761 8 13.5 7.77614 13.5 7.5ZM3.5 6C3.5 4.34315 4.84315 3 6.5 3H14.5C16.1569 3 17.5 4.34315 17.5 6V14C17.5 15.6569 16.1569 17 14.5 17H6.5C4.84315 17 3.5 15.6569 3.5 14V6ZM6.5 4C5.39543 4 4.5 4.89543 4.5 6V14C4.5 14.3726 4.60191 14.7215 4.77937 15.0201L9.44868 10.432C10.0323 9.85859 10.9677 9.85859 11.5513 10.432L16.2206 15.0201C16.3981 14.7215 16.5 14.3726 16.5 14V6C16.5 4.89543 15.6046 4 14.5 4H6.5ZM6.5 16H14.5C14.8692 16 15.2149 15.9 15.5118 15.7256L10.8504 11.1453C10.6559 10.9542 10.3441 10.9542 10.1496 11.1453L5.48824 15.7256C5.78505 15.9 6.13085 16 6.5 16Z"/></svg>`))}</span><span class="rightClickMenuItemContent">${e=>e.strings?.rightClickMenu?.editBackground}</span></div><div role="button" class="rightClickMenuItem" data-t="${e=>e.telemetryTags?.viewBackgroundImage}" @click=${e=>e.handleViewImage()}><span class="rightClickMenuItemIcon">${rn.dy.partial((e=>`<svg xmlns="http://www.w3.org/2000/svg" width=${e} height=${e} viewBox="0 0 13 12"><path d="M7.00765 0.462646L12.1514 0.46412L12.2241 0.476068L12.2776 0.493188L12.3423 0.525025L12.3892 0.557679L12.4406 0.606395L12.465 0.636671L12.5009 0.695879L12.5265 0.763162L12.5389 0.829715L12.5406 0.866717V5.71556C12.5406 5.93872 12.3501 6.11963 12.115 6.11963C11.9061 6.11963 11.7323 5.97669 11.6963 5.78819L11.6894 5.71556V1.84133L2.07561 10.9685H6.15641C6.36536 10.9685 6.53913 11.1114 6.57517 11.2999L6.58203 11.3725C6.58203 11.5709 6.43147 11.7359 6.23292 11.7701L6.15641 11.7766L1.0317 11.7763L0.97344 11.7702L0.886412 11.7461L0.821741 11.7142L0.77481 11.6816L0.723497 11.6329L0.699039 11.6026L0.663203 11.5434L0.637553 11.4761L0.63285 11.4574C0.626669 11.4302 0.623413 11.4017 0.623413 11.3725L0.628062 11.4323L0.624965 11.4071L0.623413 6.5237C0.623413 6.30054 0.813968 6.11963 1.04903 6.11963C1.25797 6.11963 1.43175 6.26257 1.46779 6.45107L1.47464 6.5237V10.3963L11.0867 1.27079H7.00765C6.7987 1.27079 6.62492 1.12785 6.58889 0.939349L6.58203 0.866717C6.58203 0.643555 6.77258 0.462646 7.00765 0.462646Z"/></svg>`)("13"))}</span><span class="rightClickMenuItemContent">${e=>e.strings?.rightClickMenu?.viewBackground}</span></div><fluent-divider class="menu-item-divider" role="separator" aria-orientation="horizontal" orientation="horizontal"></fluent-divider><div role="button" class="rightClickMenuItem" data-t="${e=>e.telemetryTags?.refreshPage}" @click=${e=>e.handleRefreshPage()}><span class="rightClickMenuItemIcon">${rn.dy.partial((e=>`<svg width="${e}" height="${e}" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.59962 0.222652C8.24805 0.398433 8.8418 0.672847 9.38086 1.0459C9.91992 1.41894 10.3838 1.86035 10.7725 2.37011C11.1611 2.87988 11.4629 3.44433 11.6777 4.06347C11.8926 4.68261 12 5.32812 12 6C12 6.55078 11.9287 7.08203 11.7861 7.59375C11.6436 8.10547 11.4424 8.58398 11.1826 9.02929C10.9229 9.4746 10.6104 9.87988 10.2451 10.2451C9.87988 10.6103 9.47461 10.9228 9.0293 11.1826C8.58399 11.4424 8.10547 11.6435 7.59375 11.7861C7.08203 11.9287 6.55078 12 6 12C5.44922 12 4.91797 11.9287 4.40625 11.7861C3.89453 11.6435 3.41601 11.4424 2.9707 11.1826C2.52539 10.9228 2.12012 10.6103 1.75488 10.2451C1.38965 9.87988 1.07715 9.4746 0.817383 9.02929C0.557617 8.58398 0.356447 8.10644 0.213867 7.59668C0.0712892 7.08691 0 6.55469 0 6C0 5.45312 0.0722656 4.92188 0.216797 4.40625C0.361328 3.89063 0.567383 3.40527 0.83496 2.95019C1.10254 2.49512 1.42773 2.08105 1.81054 1.70801C2.19336 1.33496 2.625 1.01562 3.10546 0.75H1.5V0H4.49999V3H3.74999V1.25976C3.29296 1.47851 2.87988 1.75293 2.51074 2.08301C2.1416 2.41308 1.82617 2.78418 1.56445 3.19629C1.30273 3.60839 1.10156 4.05273 0.960936 4.52929C0.820311 5.00586 0.749999 5.49609 0.749999 6C0.749999 6.48046 0.812499 6.94433 0.937499 7.39159C1.0625 7.83886 1.23926 8.25683 1.46777 8.6455C1.69629 9.03417 1.9707 9.38867 2.29101 9.70898C2.61133 10.0293 2.96582 10.3037 3.35449 10.5322C3.74316 10.7607 4.16015 10.9375 4.60546 11.0625C5.05078 11.1875 5.51562 11.25 6 11.25C6.48046 11.25 6.94433 11.1875 7.39159 11.0625C7.83886 10.9375 8.25683 10.7607 8.6455 10.5322C9.03417 10.3037 9.38867 10.0293 9.70898 9.70898C10.0293 9.38867 10.3037 9.03417 10.5322 8.6455C10.7607 8.25683 10.9375 7.83984 11.0625 7.39453C11.1875 6.94922 11.25 6.48437 11.25 6C11.25 5.41406 11.1553 4.8496 10.9658 4.30664C10.7764 3.76367 10.5117 3.26953 10.1719 2.82422C9.83203 2.37891 9.42675 1.99316 8.95605 1.66699C8.48535 1.34082 7.96679 1.09961 7.40039 0.943359L7.59962 0.222652Z"/></svg>`)("13"))}</span><span class="rightClickMenuItemContent">${e=>e.strings?.rightClickMenu?.refreshPage}</span></div></div>`;var Un;const $n=rn.dy`<fluent-button id="widgets-upsell-button" aria-label="${e=>e.strings?.widgetsUpsellButtonText}" class="${e=>"off"!==e.layoutState.currentBackgroundImageType?"widgets-upsell-background-on":"widgets-upsell-background-off"}" @click=${e=>e.widgetsUpsellButtonClicked()} data-t=${e=>e.telemetryTags?.widgetsUpsellButton||""}><span slot="start" class="svg-container">${rn.dy.partial(dn())}</span><span class="text-container">${e=>e.strings?.widgetsUpsellButtonText}</span></fluent-button>`,Hn=rn.dy`<div class="netErrClose"><fluent-button class="toast-close-button" @click="${e=>e.displayNetworkErrorBanner=!1}" data-t=${e=>e.networkErrorBannerCloseTelemetry.getMetadataTag()}>${rn.dy.partial(ln())}</fluent-button></div>`,Wn=rn.dy`<div class="netErrBanner"><div class="netErrInner">${e=>e.strings.networkStatusUnstable}</div><div class="nettErrClose">${Hn}</div></div>`,Gn=rn.dy`<div @contextmenu=${(e,t)=>e.toggleBgRightClickMenu({detail:{event:t.event}})}>${(0,sn.g)((e=>e.childRefs.conditionalBanner),rn.dy`<div class="conditionalBannerHolder">${e=>(0,nn.Ot)(e.childRefs.conditionalBanner,{properties:{onDisplayChange:e.onConditionalBannerDisplayChange.bind(e)}})} ${(0,sn.g)((e=>e.displayNetworkErrorBanner),Wn)}</div>`)}
${(0,sn.g)((e=>e.childRefs.superCoachMark),rn.dy`<div class="superCoachMarkHolder">${e=>(0,nn.Ot)(e.childRefs.superCoachMark)}</div>`)}
${(0,sn.g)((e=>e.childRefs.nurturingCoachMark&&e.isTtvrFiredAndCanUseDom),rn.dy`<div>${e=>(0,nn.Ot)(e.childRefs.nurturingCoachMark,{includeTelemetryTag:!1})}</div>`)}
${(0,sn.g)((e=>e.childRefs.officeCoachmark),rn.dy`<div class="officeCoachmarkHolder">${e=>(0,nn.Ot)(e.childRefs.officeCoachmark)}</div>`)}
${(0,sn.g)((e=>e.displayGalleryMinimumWidthToast),xn)}<div id="headerGrid" style="${e=>`grid-template-rows: ${e.gridRows}; height:${e.contentOffHeaderHeight??e.headerHeight+"px"};`}" role="${e=>"off"===e.layoutState.selectedFeedDisplaySetting?"main":"banner"}"><div class="companyLogoHolder_aboveSearch" style="${e=>e.logoRow?`grid-row: ${e.logoRow};`:""}" ${(0,me.XJ)()}>${(0,sn.g)((e=>"always"!==e.layoutState.selectedFeedDisplaySetting&&!e.layoutState.imageOfTheDayEnabled),On)}</div>${Ln} ${vn}<div id="topSitesHolder" class="${e=>e.isTopSitesDisabled?"hide":""} ${e=>e.childRefs.notificationMiniCard?"enable-notification":""} ${e=>e.enableNotificationAnimation?"notification-anime":""} ${e=>e.config.notificationOnRight?"notification-right":"notification-left"}" style="grid-row: ${e=>e.topSitesRow}; ${e=>(e=>`--top-banner-offset-height:${e.topBannerOffsetHeight||0}px;`)(e)}; ${e=>(e=>e.invisibleTopSites?"visibility:hidden":"")(e)}" ${(0,me.XJ)()} data-clarity-mask="true">${(0,sn.g)((e=>e.childRefs.notificationMiniCard),Nn,Fn)}</div>${(0,sn.g)((e=>e.displayWidgetsRegion),rn.dy`${Dn}`)} ${(0,sn.g)((e=>e.weatherOnelinerConditionCheck),rn.dy`<div id="weatherOneLinerHolder" style="grid-row: ${e=>e.weatherOneLinerRow};" class="oneline-weather-holder-margin ${e=>"off"===e.layoutState.selectedFeedDisplaySetting&&"oneline-weather-holder-content-off"} ${e=>"off"===e.layoutState.selectedFeedDisplaySetting&&"off"!==e.layoutState.currentBackgroundImageType&&"oneline-weather-holder-content-off-bg"}">${e=>(0,nn.Ot)(e.childRefs.weatherOneLiner,{properties:{setShowWeatherOneLiner:e.setShowWeatherOneLiner,needDarkThemeIcons:e.needDarkThemeIcons}})}</div>`)} ${(0,sn.g)((e=>e.showWidgetsUpsellButton),rn.dy`<div id="widgetsUpsellButtonHolder" class="oneline-weather-holder-margin" style="grid-row: ${e=>e.widgetsUpsellButtonRow};">${$n}</div>`)} ${(0,sn.g)((e=>e.childRefs.pulseEdgenext&&(e.layoutState.pulseEnabled&&e.pulseData.length>0||e.isVpTest())&&e.config.showPulseOffPartially&&("off"===e.layoutState.selectedFeedDisplaySetting||"headingsonly"===e.layoutState.selectedFeedDisplaySetting||"peek"===e.layoutState.selectedFeedDisplaySetting)),rn.dy`<div id="pulse" style="grid-row: ${e=>e.weatherOneLinerRow};" class="${e=>e.pulseOnHover&&"off"!==e.layoutState.currentBackgroundImageType?"pulseHoverHolder":"pulseHolder"}">${e=>(0,nn.Ot)(e.childRefs.pulseEdgenext,{properties:{pulseData:e.pulseData}})}</div>`)} ${(0,sn.g)((e=>e.isRecommendedSitesEnabled),rn.dy`<div id="recommendedSites" class="${e=>"off"===e.recommendedSitesDisplaySetting||e.layoutState.isRecommendedSitesManagedByPolicy?"hide":""} unified" style="grid-row: ${e=>e.recommendedSitesRow};${e=>(e=>e.invisibleRecommendedSites?"visibility:hidden":"")(e)}" ${(0,me.XJ)()}>${(0,sn.g)((e=>!e.enableHiddenRecommendedSitesStyles),rn.dy` ${e=>(0,nn.Ot)(e.childRefs.recommendedSites,{properties:{narrowed:!e.layoutState.imageOfTheDayEnabled&&["peek","headingsonly","off"].includes(e.layoutState.selectedFeedDisplaySetting),isOnBackgroundImage:!!e.layoutState.imageOfTheDayEnabled,showFullPageBlur:e.isFullPageBlur(),needDarkThemeIcons:e.needDarkThemeIcons,recommendedSitesWidthAdded:(e.showNavAndContentTemplate||["always","peek"].includes(e.layoutState?.selectedFeedDisplaySetting))&&"off"!==e.layoutState?.currentBackgroundImageType},ttvrMarkerAggregate:"Header"})} `)}</div>`)} ${(0,sn.g)((e=>e.showHeroAboveNav),Rn)} ${e=>{0}} ${(0,sn.g)((e=>e.config.complianceHyperlink),rn.dy`<a href=${e=>(0,en.h_)(e.config.complianceHyperlink.url)} id="complianceHyperlink" class="${e=>e.layoutState.imageOfTheDayEnabled?"complianceHyperlink_imageEnabled":null}" ${(0,me.XJ)()}>${e=>e.config.complianceHyperlink.text}</a>`)} ${(0,sn.g)((e=>e.childRefs.backgroundGallery&&e.renderBackgroundGallery&&!e.showSpotlightBackgroundGalleryCard),rn.dy`<div id="backgroundGalleryContainer" class="forceShowGallery">${e=>(0,nn.Ot)(e.childRefs.backgroundGallery,{memoize:!1,ttvrMarkerAggregate:"Header"})}</div>`)} ${(0,sn.g)((e=>e.showSpotlightHoverMask),rn.dy`<div ${(0,an.i)("bgMask")} class="bgMask" @mouseenter=${(e,t)=>e.onMouseenter_backgroundMask(t.event)} @mouseleave=${(e,t)=>e.onMouseout_backgroundMask(t.event)}></div>`)} ${(0,sn.g)((e=>e.showSpotlightButton||e.showSpotlightButtonByHover),rn.dy`<div class="bgContainer">${(0,sn.g)((e=>e.childRefs.backgroundGallery&&e.renderBackgroundGallery&&e.showSpotlightBackgroundGalleryCard),rn.dy`<div id="backgroundGalleryContainer" class="forceShowGallery" style="padding-right:18px;" @mouseenter=${(e,t)=>e.onMouseenter_backgroundButton(t.event)} @mouseleave=${(e,t)=>e.onMouseout_backgroundButton(t.event)}>${e=>(0,nn.Ot)(e.childRefs.backgroundGallery,{memoize:!1,ttvrMarkerAggregate:"Header",properties:{cardMode:!0}})}</div>`)}<div class="bgButton" @mouseenter=${(e,t)=>e.onMouseenter_backgroundButton(t.event)} @mouseleave=${(e,t)=>e.onMouseout_backgroundButton(t.event)}><span></span></div></div>`)}</div><div ${(0,an.i)("headerSpaceHolder")} id="headerSpaceHolder" style="height:${e=>e.contentOffHeaderHeight??e.headerHeight+"px"};${e=>Cn(e)}"><div id="bgOuterHolder" class="bgOuterHolder" ${(0,fe.Fl)({stickyClassName:"bgOuterHolder_sticky",breakpointName:F.$l})}><div id="bgInnerHolder" style="height: 100vh;">${e=>(0,nn.Ot)(e.childRefs.backgroundImage,{properties:{backgroundGalleryRef:e.childRefs.backgroundGallery,enableBackgroundGalleryCard:e.config.enableBackgroundGalleryCard},attributes:{spaceHolderHeight:e.headerHeight,showFullPageBlur:e.isFullPageBlur(),bgBlurSize:e.config.translucentFeed?.bgBlurSize?e.config.translucentFeed?.bgBlurSize:"0px"},ttvrMarkerAggregate:e.deferBGIfOffFlightEnabled&&"off"===e.layoutState.currentBackgroundImageType?void 0:"Header"})}</div></div></div>${Bn}
${(0,sn.g)((e=>e.config.enableOverrideRightClick),rn.dy`<div id="ContentCardActionMenuAnchor" ${(0,an.i)("ref_contentCardActionMenuAnchor")}></div>`)}<div id="translucentFeedSentinel"></div>${(0,sn.g)((e=>e.showNavAndContentTemplate),Mn)}
${(0,sn.g)((e=>e.childRefs.welcomeGreeting&&e.enableHiddenWelcomeGreeting),rn.dy`<div id="WelcomeGreetingHidden" style="visibility:hidden">${e=>(0,nn.Ot)(e.childRefs.welcomeGreeting,{properties:{rootMaxWidth:0,showFullPageBlur:e.isFullPageBlur(),needDarkThemeIcons:e.needDarkThemeIcons},ttvrMarkerAggregate:"Header"})}</div>${(0,tn.M)("TTSR.WelcomeGreetingLight",!0)}`)}
${(0,sn.g)((e=>e.childRefs.topSites),rn.dy`${e=>(0,nn.Ot)(e.childRefs.edgeShopping)}`)}
${(0,sn.g)((e=>e.enableDevTools),rn.dy`${e=>(0,nn.Ot)(e.childRefs.devTools)}`)}
${e=>(0,nn.Ot)(e.childRefs.sharedLinks,{ttvrMarkerAggregate:"Header"})}
${e=>(0,nn.Ot)(e.childRefs.topSitesBookmarks,{ttvrMarkerAggregate:"Header"})}
${e=>(0,nn.Ot)(e.childRefs.floatButtonGroupWC,{properties:{overlapState:e.overlapState},attributes:{class:"floatButtonGroup",needDarkThemeIcons:e.needDarkThemeIcons}})}
${(0,sn.g)((e=>e.childRefs.dailyBrief),(e=>(0,nn.Ot)(e.childRefs.dailyBrief)))}
${(0,sn.g)((e=>e.childRefs.feedback),rn.dy`${e=>(0,nn.Ot)(e.childRefs.feedback,{properties:{overlapState:e.overlapState,isAutoHide:!e.isAlwaysMode,openBackgroundGallery:e.openBackgroundGallery,updateQuickLinksDisplayOption:e.updateQuickLinksDisplayOption,updateCloudMarketAndClient:mn.ag,getPivotManager:le.l,enableProactiveFeedbackAssist:!0,shouldShowSignInFaq:e.renderSignInControls},attributes:{showFullPageBlur:e.isFullPageBlur(),minWindowWidthForGallery:dt.Gb,expectedWidgetsCardsLocalStorageKey:Zt.Of}})}`)}
${e=>e.renderChannelStoreEvent&&e.childRefs.channelStore&&(0,nn.Ot)(e.childRefs.channelStore,{properties:{showOverlay:!1,renderChannelStoreEvent:e.renderChannelStoreEvent}})}
${(0,sn.g)((e=>e.childRefs.toastWC&&e.shouldRenderToastWC),(e=>(0,nn.Ot)(e.childRefs.toastWC)))}</div>`,Vn=rn.dy` ${(0,sn.g)((e=>e.childRefs.settings),rn.dy`<div>${e=>(0,nn.Ot)(e.childRefs.settings,{ttvrMarkerAggregate:"Header"})}</div>`)} ${(0,sn.g)((e=>e.childRefs.backgroundGallery&&e.renderBackgroundGallery),rn.dy`<div id="backgroundGalleryContainer" class="sugiGalleryContainer">${e=>(0,nn.Ot)(e.childRefs.backgroundGallery,{memoize:!1,ttvrMarkerAggregate:"Header"})}</div>`)}
`,qn=rn.dy` ${(0,sn.g)(window._sugi,Vn,Gn)} ${Sn} ${e=>{}}
`;var jn=n(58106),zn=n(78923),Kn=n(29717),Qn=n(81239),Jn=n(74449),Xn=n(39238);const Yn=(f.K.Over+2).toString(),Zn=(f.K.Over+3).toString(),ei=(f.K.Nav+2).toString(),ti=(f.K.Nav+3).toString(),ni=`${(0,u.Yq)().StaticsUrl}pr-5336706/background-gallery/BackgroundGalleryWhite.svg`,ii=zn.i`
cs-header-core{z-index:${ti}}`,ri=zn.i`
.companyLogoHolder_aboveSearch > svg{fill:white}.translucentSticky{background:#242424}.navAndContent_wb{background:rgba(0,0,0,.5) !important}.doubleWideRiverCard,.singleWideRiverCard{background:#656565}.skeleton{background:#4a4a4a}.copilotRequestAnything{border:1px solid #69A1FA}.copilotRequestAnything span{color:#69A1FA}.copilotCoachMark{border:1px solid #69A1FA}.copilotCoachMark span{color:#69A1FA}.rightClickMenu{background-color:rgb(74,74,74,0.95)}.rightClickMenuItem:hover{background-color:#575757}.menu-item-divider{border-color:rgb(173 173 173)}.rightClickMenuItem .rightClickMenuItemIcon svg{fill:white}.text-container{color:#ffffff}#widgets-upsell-button{background:transparent;border:1px solid rgba(255,255,255,0.2)}#widgets-upsell-button.widgets-upsell-background-on:hover{background:transparent;backdrop-filter:blur(var(--acrylic-blur,300px));border:1px solid rgba(255,255,255,0.2)}#widgets-upsell-button.widgets-upsell-background-off{background:rgba(0,0,0,0)}#widgets-upsell-button.widgets-upsell-background-off:hover{background:rgb(51,51,51);border:1px solid rgba(255,255,255,0.2)}`,oi=zn.i`
${(0,L.vW)(null,L.K$.c2)}{.contentSized{width:${jn._3.toString()}px}.nav-content-responsive .navAndContent_feed{--card-number:2;max-width:${jn.L.toString()}px;min-width:${jn.SP.toString()}px}.increased-width{width:calc(${jn._3.toString()}px + var(--extra-feed-width,0px))}#topSitesHolder{height:100%}.skeleton-container{width:${jn._3.toString()}px}msn-actions-menu::part(menu){max-width:254px}}${(0,L.eH)(L.K$.c3)}{.contentSized{width:${jn.Xn.toString()}px}.nav-content-responsive .navAndContent_feed{--card-number:3;max-width:${jn.Se.toString()}px;min-width:${jn.Iw.toString()}px}.increased-width{width:calc(${jn.Xn.toString()}px + var(--extra-feed-width,0px))}.skeleton-container{width:${jn.Xn.toString()}px}msn-actions-menu::part(menu){max-width:254px}}${(0,L.eH)(L.K$.c4)}{.contentSized{width:${jn.xX.toString()}px}.nav-content-responsive .navAndContent_feed{--card-number:4;max-width:${jn.VD.toString()}px;min-width:${jn.uL.toString()}px}.increased-width{width:calc(${jn.xX.toString()}px + var(--extra-feed-width,0px))}.skeleton-container{width:${jn.xX.toString()}px}msn-actions-menu::part(menu){max-width:295px}}${(0,L.vW)(L.K$.c5,null)}{.contentSized{width:var(--m365-column-width,${jn.sc.toString()}px)}.nav-content-responsive .navAndContent_feed{--card-number:5;max-width:${jn.f5.toString()}px;min-width:${jn.ev.toString()}px}.increased-width{width:calc(${jn.sc.toString()}px + var(--extra-feed-width,0px))}.skeleton-container{width:${jn.sc.toString()}px}msn-actions-menu::part(menu){max-width:295px}}${(0,L.vW)(null,L.K$.c1)}{.contentSizedOneColumn{width:${jn.xs.toString()}px}.nav-content-responsive .navAndContent_feed{--card-number:1;max-width:${jn.M7.toString()}px;min-width:${jn.qt.toString()}px !important}.nav.navStickyOneColumn{top:0}.navStickyOneColumn.conditionalBannerShown{top:30px}.skeleton-container{width:${jn.xs.toString()}px}msn-actions-menu::part(menu){max-width:254px}}`,ai=zn.i` .headerGrid_hidden cs-header-core::part(core){display:grid}.headerGrid_hidden cs-header-core::part(header-search){visibility:visible}`,si=zn.i`
:host(){--breaking-news-height-offset:0}#backgroundGalleryContainer{position:relative;z-index:${f.K.Flyout.toString()}}#backgroundGalleryContainer.forceShowGallery{visibility:visible}.bgMask{position:absolute;z-index:${Yn};height:300px;width:300px;top:calc(35% - 134px);right:calc(15% - 134px)}.bgContainer{position:absolute;z-index:${ei};top:35%;right:15%;display:flex;justify-content:flex-end}.bgButton{width:32px;height:32px;border:1px solid rgba(209,209,209,0.3);background:rgba(26,26,26,0.3);box-sizing:border-box;display:flex;align-items:center;justify-content:center;border-radius:4px}.bgButton:hover{background:#2A2A2A}.bgButton span{width:19px;height:19px;margin-top:1px;margin-right:1px;background:url(${ni})}.gameTemplateContainer{position:relative;z-index:${f.K.Nav.toString()};margin:14px auto}.exploreMoreBtn{width:100vw;display:flex;justify-content:center}.sugiGalleryContainer{display:flex;justify-content:center;align-items:center;height:45vh}.backgroundGalleryMinimumWidthToast{bottom:25px;left:50%;position:fixed;transform:translateX(-50%);width:fit-content;z-index:${f.K.Overlay.toString()}}.bgOuterHolder{height:100%;overflow:hidden;position:fixed;width:100%}.bgOuterHolder_sticky{background:#F7F7F7;height:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));z-index:${f.K.Over.toString()}}#bgInnerHolder{height:100%;opacity:1;overflow:hidden;top:0px;transform:scale(1);width:100%}.coachMarkHolder{left:initial;position:fixed;z-index:${f.K.Flyout.toString()}}.companionIframe{display:none}.companyLogoHolder_aboveSearch{align-self:end;height:48px;opacity:1;width:225px}.companyLogoHolder_aboveSearch > svg{fill:#737373}#complianceHyperlink{bottom:8px;color:${Jn.Q};font-size:10px;justify-self:self-start;padding:0 8px;opacity:1;position:absolute;text-decoration:none;transition:opacity 0.2s;z-index:${Yn}}#complianceHyperlink.complianceHyperlink_imageEnabled,#complianceHyperlink.translucentFeed{color:white;opacity:0.64}#complianceHyperlink.onScroll{transform:translate(-50%,-60px)}.complianceHyperlink_hide{opacity:0 !important}.doubleWideRiverCard,.singleWideRiverCard{background:#dadada;border-radius:8px;height:304px}.doubleWideRiverCard{width:612px}.singleWideRiverCard{width:300px}.blankRiverContainer{display:flex;gap:12px}.blankRiverContainer.fadeOut{opacity:0;transition:opacity 0.5s}.location-marker{bottom:5px;color:white;justify-self:self-start;padding:0 8px;opacity:1;position:absolute;left:36px;text-decoration:none;transition:opacity 0.2s;z-index:${f.K.Nav.toString()}}.conditionalBannerHolder{max-height:200px;position:fixed;top:0;width:100%;z-index:${f.K.Overlay.toString()}}#headerGrid{display:grid;justify-items:center;width:100%}.headerGrid_hidden,.headerIcon_hidden cs-header-core::part(header-start),.headerIcon_hidden cs-header-core::part(header-end){visibility:hidden}.headerGrid_visible{opacity:1}.headerSpaceHolder{transition:height .3s ease-out,visibility 0.3s}#headerSpaceHolder{position:absolute;top:0}.nav{display:flex;height:var(--nav-height);justify-content:center;z-index:${f.K.Nav.toString()}}.navAndContent{align-items:center;background:#F7F7F7;display:flex;flex-direction:column;min-height:100vh;overflow-x:clip;position:relative;transition:background-color 0.4s ease-in-out}.navAndContent.navAndContent_noWFeed{min-height:452px}.navAndContent.navAndContent_tb{background:#00000051}.navAndContent.navAndContent_nb{background:#00000000}.navAndContent_wb{background:rgba(255,255,255,.5) !important;backdrop-filter:blur(10px);transition:unset !important}.navAndContent.navAndContent_nwb{transition:unset}#recommendedSites{align-items:center;display:flex;flex-direction:column}#recommendedSites.hide{display:none}#recommendedSites.unified{z-index:${Yn}}.navAndContent_feed{align-items:center;display:flex;flex-direction:column;transition:background-color 0.4s ease-in-out,opacity 0.4s ease-in-out}.navAndContent_feed_fullpage{width:100%}.navAndContent_border_shadow{border-radius:12px;padding-left:20px;padding-right:20px;box-shadow:rgba(0,0,0,0.35) 0px 0px 15px;transition:1s box-shadow ease}.navAndContent_border_shadow.navAndContent_noshadow{box-shadow:rgb(0 0 0 / 0%) 0px 0px 0px 0px}@media ((min-width:632px) and (max-width:675px)){.navAndContent_border_shadow{width:93%}}@media ((min-width:944px) and (max-width:990px)){.navAndContent_border_shadow{width:95%}}@media ((min-width:1256px) and (max-width:1300px)){.navAndContent_border_shadow{width:96.5%}}@media ((min-width:1568px) and (max-width:1613px)){.navAndContent_border_shadow{width:97%}}.g_nav_container{position:relative;display:flex;justify-content:center;width:100%}.navAndContent_feed > .contentBelowNav{margin-top:var(--nav-height)}.navAndContent_feed_hidden_rs{background:#00000051}.nav{position:absolute;top:0px;width :100%}.nav.nav_sticky{background:#F7F7F7;position:fixed;top:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));width:100%}.navSized{align-items:center;display:flex;gap:5px;min-width:100%;width:100%}.network-error-message{margin-block:24px;font-size:16px;text-align:center}.translucentSticky{background:#F7F7F7;height:108px;position:fixed;top:0px;width:100%;z-index:${f.K.Over.toString()}}#weatherOneLinerHolder,#widgetsUpsellButtonHolder{min-width:0;z-index:302;opacity:1}.oneline-weather-holder-margin{margin-top:auto;margin-bottom:15px}.oneline-weather-holder-content-off{margin-bottom:40px}.oneline-weather-holder-content-off-bg{margin-bottom:20px}#pulse{z-index:302}.pulseHoverHolder{margin-bottom:50px}.pulseHolder{margin-top:auto;margin-bottom:15px}#topSitesHolder{--notification-mini-card-width:208px;--notification-mini-card-height:58px;--notification-mini-card-vertical-gap:0;--notification-mini-card-gap:30px;height:100%;min-width:0;z-index:${Zn};opacity:1}#topSitesHolder.hide{visibility:hidden;opacity:0}#topSitesHolder.enable-notification{display:flex;justify-content:center}#topSitesHolder.enable-notification top-sites-edgenext{max-width:fit-content}#notificationMiniCardWrapper{width:0;margin-top:var(--notification-mini-card-vertical-gap)}#topSitesHolder.notification-anime #notificationMiniCardWrapper{transition:all 0.3s ease-in}#topSitesHolder.notification-left #notificationMiniCardWrapper:has(notification-mini-card:defined){width:var(--notification-mini-card-width);margin-inline-end:var(--notification-mini-card-gap)}#topSitesHolder.notification-left #notificationMiniCardWrapper notification-mini-card{float:right}#topSitesHolder.notification-right #notificationMiniCardWrapper:has(notification-mini-card:defined){width:var(--notification-mini-card-width);margin-inline-start:var(--notification-mini-card-gap)}#topSitesHolder.notification-right #notificationMiniCardWrapper notification-mini-card{float:left}.topSitesZoomHidden{visibility:hidden}.headerGrid_hidden cs-header-core::part(core){top:calc(-1 * var(--header-height));display:none}cs-header-core{z-index:${ei}}cs-header-core.fixed-search::part(header-search){position:fixed}@media (max-width:1097px){#topSitesHolder{height:100%}}.contentSizedFullScreen{width:100%!important}.refreshPage{height:50px;width:50px;margin-top:50px;margin-bottom:-50px}.refreshPage.hide{animation:hideRefreshBtn ease-in both 1s}@keyframes hideRefreshBtn{from{height:50px;opacity:1}to{height:0px;opacity:0}}.refreshPage fluent-progress-ring{margin:8px auto}.weather-current-precipitation-glyph{margin-inline-start:auto;margin-inline-end:4px;fill:currentcolor;filter:invert(var(--iconInvert))}.nocolor-img-aqi,.nocolor-img-nm-aqi{filter:invert(var(--iconInvert))}.nocolor-img-aqi{width:20px !important;height:20px !important}.noWorkFeedContent{min-height:400px}msn-actions-menu::part(menu){width:fit-content;max-width:300px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;position:absolute;right:0px;top:-27px}${oi} .contentPlaceHolder{min-height:100vh}.nav-content-responsive{padding:0 var(--nav-image-gutter-margin,80px)}.nav-content-responsive .navAndContent_feed{width:calc(100% - 40px)}.nav-content-responsive .contentSized{width:100%}.skeleton-container{background:${Xn._B};height:100%;position:absolute;top:43px;z-index:9}.skeleton-responsive{top:-1px;width:100.1%}.skeleton-responsive .skeleton-feed{grid-template-columns:repeat(var(--card-number),auto)}.skeleton-responsive .fixed-size-card{aspect-ratio:300 / 304;height:auto}.skeleton-responsive .fixed-size-card:first-of-type{aspect-ratio:153 / 76}.skeleton-channel{display:flex;position:relative;padding:20px 20px;box-sizing:border-box;overflow:hidden}.skeleton-feed{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px;position:relative;padding-top:8px;box-sizing:border-box;overflow:hidden}.skeleton-header{padding:12px 20px 0}.skeleton-header .card-label{height:15px;width:95px;border-radius:5px}.fixed-size-card{display:flex;flex-direction:column;height:304px;border-radius:5px}.fixed-size-card .card-img{width:100%;height:157px;border-radius:5px}.fixed-size-card .card-label{margin:10px 16px 8px 16px;height:16px;width:100px;border-radius:5px}.fixed-size-card .card-text{margin:5px 16px 0 16px;height:20px;border-radius:5px}.fixed-size-card:first-of-type{grid-column:span 2}.fixed-size-card:first-of-type .card-img{height:100%}.fixed-size-card:first-of-type .card-label,.fixed-size-card:first-of-type .card-text{display:none}.skeleton{display:block;background:#e0e0e0;position:relative;overflow:hidden}.shimmer .skeleton:before{content:"";display:block;position:absolute;top:0;left:-80px;height:100%;width:80px;opacity:0.3;background-image:linear-gradient(to right,transparent,#f5f5f5,transparent);animation:shine 1s infinite}@keyframes shine{to{left:calc(100% + 80px)}}.fixed-size-feed{margin:0 auto}.floatButtonGroup{position:relative}.widgetsRegion{height:146px}.widgets_hidden{opacity:0}.rightClickMenu{position:fixed;background:rgba(255,255,255,0.95);font-size:14px;padding:4px;border-radius:5px;line-height:20px;z-index:999}.rightClickMenuItem{display:grid;grid-template-columns:minmax(32px,auto) 1fr minmax(32px,auto);background:none;padding:6px 0px;cursor:pointer}.rightClickMenuItem .rightClickMenuItemIcon{display:flex;align-items:center;justify-content:center}.rightClickMenuItem .rightClickMenuItemIcon svg{fill:black}.rightClickMenuItem:hover{background:#efeded}#ContentCardActionMenuAnchor{position:absolute;width:1px;height:1px}.svg-container{display:inline-block;margin-inline-end:8px;transform:translateY(2px)}.text-container{color:rgba(0,0,0,0.859);font-size:16px;font-weight:600}#widgets-upsell-button{background:rgba(255,255,255,0.7);border:1px solid lightgray;border-radius:4px}#widgets-upsell-button:hover{border:1px solid rgba(0,0,0,0.22)}.widgets-upsell-background-on{backdrop-filter:blur(var(--acrylic-blur,40px))}#widgets-upsell-button.widgets-upsell-background-on:hover{background:rgba(230,230,230,0.7)}#widgets-upsell-button.widgets-upsell-background-off{background:white}#widgets-upsell-button.widgets-upsell-background-off:hover{background:rgb(245,245,245)}.netErrBanner{display:flex;text-align:center;align-items:center;justify-content:space-between;padding:6px;background:var(--fill-color);border-bottom:1px solid var(--focus-stroke-outer)}.netErrInner{font-size:12px;font-weight:400;line-height:16px;margin-right:16px}.netErrClose{display:inline-flex;align-items:center;justify-content:center}.toast-close-button{padding:4px 8px;background:transparent}.toast-close-button:hover{opacity:0.7}`.withBehaviors((0,Kn.Uu)(ri),new Qn.w("ntpTypeToSearch",!0,ai),new Qn.w("enableSpotlightButton",!0,ii)),ci=si,di={experienceConfigSchema:undefined};(0,i.W)()},53790:function(e,t,n){n.d(t,{$L:function(){return F},D2:function(){return E},GC:function(){return M},HK:function(){return N},QA:function(){return O},T:function(){return L},bk:function(){return U},fw:function(){return D},gG:function(){return _},gY:function(){return B},gi:function(){return x},xt:function(){return R}});var i=n(35114),r=n(37878),o=n(91734),a=n(13218),s=n(73264),c=n(35030),d=n(26156),u=n(24318),l=n(24612),p=n(74604),h=n(72263),g=n(523),f=n(70041),m=n(82928),y=n(55447),v=n(98130),S=n(52185),w=n(21215),b=n(82821),C=n(44132),T=n(13329),k=n(46011),P=(n(71037),n(45916),n(40473),n(19735),n(27687),n(4739)),A=(n(87158),n(74982)),I=n(87208);const E=Symbol();function R(){const e=(0,m.K0)(g.RL),t=e?.getCurrentState(),n=t?.selectedFeedDisplaySetting;return"headingsonly"===n||"off"===n}async function M(){let e="",t="";const n=await(0,d.H1)(!0);return n?.promotion&&(e=n.promotion),n?.selection&&(t=n.selection),{anaheimLayoutPromotion:e,anaheimContentSelection:t}}async function x(){const[{anaheimLayoutPromotion:e,anaheimContentSelection:t},n,i,r,o,s,c]=await Promise.all([M(),L(),(0,d.ZR)(),(0,d.rc)(),(0,d.Nd)(),(0,d.Qw)(),(0,d.Kr)()]);return{anaheimLayoutPromotion:e,anaheimContentSelection:t,inEdgeFeatures:o,revertTimes:s,adminDisabled:c,backgroundImageIsSet:n,newProfFreTime:i,newDevFreTime:r,isAdb:a.Al.EdgeNTPHeader?.isAdb}}async function L(){const e=await(0,d.Zb)(),t=await r.p.getCurrentBackgroundMetadata(),n=t?.provider,i=!!e||"NoBackground"===n;return C.M0.addOrUpdateTmplProperty("backgroundImageIsSet",i?"1":"0"),"NoBackground"===n&&C.M0.addOrUpdateTmplProperty("backgroundImageIsOff","1"),i}function F(){const e=(0,m.K0)(g.RL);return e?.getCurrentState()}function D(){const e=(0,m.K0)(g.RL),t=e?.getCurrentState();let n=!!t?.enableWidgetsRegion;return n||(n=!!e?.shouldOverrideWidgetsQSP()),n}async function O(e,t,n,r){const a=(0,y.$z)(),c={experienceType:(0,d.$5)(a)?f.F11:f.wge,instanceSrc:"default"},u=await s.U.getConfig(c);let l=u?.properties?.riverSectionCardProviderConfig?.initialRequest;if(!l)return;const S=F(),w=(0,d.aT)(S.configData?.enabledFeatures||[]),T=(0,d._W)(w);t.auctionRidOverride&&(l.adRefreshVariant="",l.gdpr=!!window.__tcfapi,l.anaheimPageLayout=S.currentLayout,l.verticalName=v.jG?.HostPage?.verticalKey),n&&!v.jG.IsHeroNTP&&(l.widgetsOn=D(),t.useDedicatedWidgetsManager&&R()&&(l={...l,disableContent:!0})),r&&(l.copilotApiSupported=!0),Object.assign(l,e);const k=(0,p.Bn)().currentColumnArrangement;if(k&&(l.column=k),(0,d.$5)(a)){const e={c1:i.Kx.C1,c2:i.Kx.C2,c3:i.Kx.C3,c4:i.Kx.C4,c5:i.Kx.C5},n=t.enableOneColumn||k!==h.K$.c1?k:h.K$.c2,r=(0,b.Qf)(e[n],void 0,void 0,t);l={...l,...r}}if(l.pageConfiguration=e.pageConfiguration??C.M0.getPageMetadata()?.contract?.page?.config,!l.pageConfiguration&&S){const e=(0,m.K0)(g.RL),t=await e.getPrimaryAccountInfoAsync(!1);l.pageConfiguration=(0,o.yc)(S,"MSA"===t?.accountType)}return T&&(l.edgExpMask=T),l.skipRetry=t.enableSkipRetry,l}async function _(e,t){const n=(0,y.$z)();if(["productivityHub","following"].includes(n))return;if((0,l.c)())return void C.M0.addOrUpdateTmplString("DisablePrerenderFeed:1");const i=F(),r=(0,P.bt)(t,i);if(t.useDedicatedWidgetsManager&&r);else if(R())return;let o;T.SI.enableEarlyMainFeedRequest=!0;const a=(0,k.eW)();if(a)o=a,S.Gq.set("__isSSRWpoFeedConsumed__",!0);else{const i=await(0,A.n)(),a=await O(e,t,r,i),s=new k.fy({...(0,I.L)(t),initialRequest:{timeoutMs:a.timeoutInMs},feedCacheEnabled:t.feedCacheEnabled,feedCacheMaxAgeInMs:t.feedCacheMaxAgeInMs},!1);await k.fy.ensureLock();try{o=await s.fetchFromWpoService(a,!0,null,!1,void 0,s.feedResponseCache)}catch(e){if(e instanceof k.GZ&&(C.M0.addOrUpdateTmplProperty("wpofetchabort",e.silentExit?"silentexit":"continue"),e.silentExit))return;throw e}finally{k.fy.releaseLock()}o&&(o.responseStatus=s.getResponseStatus(),v.jG.IsHeroNTP&&(o.isStatic=s.getIsStatic())),(0,d.$5)(n)&&(0,b.s2)(a,o)}(0,w.N)()&&((0,c.t)(o),u.FI.update1sCohort(o,t)),T.SI.storeEarlyWpoFeedData(o)}function N(){const e=!("enterprise"===v.jG?.CurrentRequestTargetScope?.audienceMode);return!a.Al?.IsPrerender||e}function B(e,t){return!(!0===e?.disableFeed||!e?.enableEarlyFeedSSR||"always"!==t&&"peek"!==t)}async function U(e){throw new Error("getHeaderHeightForSSRPrefetch should only be called on the server")}},45916:function(e,t,n){n.d(t,{$:function(){return a},B:function(){return s}});var i=n(53448),r=n(82928),o=n(523);async function a(e){if(!e.childRefs.recommendedSites)return;let t=!1;const n=(0,r.K0)(o.RL);if(n&&n.getPageSettingsStateAsync){const e=await(n.getPageSettingsStateAsync?.());t=["headingsonly","off"].includes(e?.selectedFeedDisplaySetting||"")}return(0,i.P6)({enableRecommendedSitesSelection:!0,showDefault3Rows:t})}function s(e,t){if(!e)return 0;switch(t){case"onerow":return 52;case"tworows":return 88;case"threerows":return 124;default:return 0}}},40473:function(e,t,n){function i(e,t,n){const{selectedQuickLinksDisplaySetting:i}=t,r=n&&e.showSearchBoxForHero?.hideTopSites;return"off"===i||r}n.d(t,{u:function(){return i}})},4739:function(e,t,n){n.d(t,{Gl:function(){return d},bt:function(){return c},uz:function(){return u}});var i=n(16495),r=n(95603),o=n(52),a=n(98130),s=n(1041);function c(e,t,n=!1){const i="kids"===a.jG?.CurrentRequestTargetScope?.audienceMode;return e?.enableWidgetsRegion&&t?.enableWidgetsRegion&&!n&&!a.jG.IsHeroNTP&&!i}async function d(e){if(!await i.U.isApiAvailableToUse())return!1;if(await(0,s.Of)()===o.Ab.user)return!1;if(!e)return!0;const t=(await i.U.getPreferenceSetting(r.Xm.widgetsUpsell))?.value||{};return(t?.seen||0)<e}async function u(){const e=(await i.U.getPreferenceSetting(r.Xm.widgetsUpsell))?.value,t={seen:(e?.seen||0)+1};await i.U.savePreferenceSetting(r.Xm.widgetsUpsell,t)}},77870:function(e,t,n){n.d(t,{$c:function(){return _},BV:function(){return P},C:function(){return j},Cs:function(){return T},FQ:function(){return $},Hj:function(){return D},IA:function(){return U},If:function(){return s},Ip:function(){return g},Jz:function(){return G},K4:function(){return B},Kq:function(){return I},Lg:function(){return M},Mc:function(){return H},Ny:function(){return u},PE:function(){return C},Py:function(){return i},QC:function(){return y},RX:function(){return V},UG:function(){return p},Yx:function(){return x},aZ:function(){return m},bi:function(){return q},cY:function(){return F},dz:function(){return N},eF:function(){return f},fg:function(){return S},fx:function(){return L},hR:function(){return d},hn:function(){return o},ht:function(){return c},jC:function(){return l},jS:function(){return E},mR:function(){return v},n0:function(){return A},oF:function(){return w},pK:function(){return W},rN:function(){return b},sn:function(){return R},vI:function(){return h},vX:function(){return k},vp:function(){return r},xw:function(){return O}});var i,r,o,a=n(72263);!function(e){e.Enforced="ENFORCED",e.Recommended="RECOMMENDED"}(i||(i={})),function(e){e[e.CuratedTileSource=-5]="CuratedTileSource",e[e.UserAddedTileSource=4]="UserAddedTileSource",e[e.UserAddedTileSourceNewVal=3]="UserAddedTileSourceNewVal",e[e.AlgoGeneratedTileSource=0]="AlgoGeneratedTileSource",e[e.WPOPromotedTileSource=-4]="WPOPromotedTileSource",e[e.PromotedCuratedTileSource=-6]="PromotedCuratedTileSource",e[e.SponsoredPromotedCuratedTileSource=-7]="SponsoredPromotedCuratedTileSource",e[e.SponsoredCuratedTileSource=-8]="SponsoredCuratedTileSource",e[e.AffiliateAutoAppendTileSource=2]="AffiliateAutoAppendTileSource",e[e.NextSitesAlgoGeneratedTileSource=7]="NextSitesAlgoGeneratedTileSource",e[e.AlgoGeneratedCIPromotedMediaTileSource=8]="AlgoGeneratedCIPromotedMediaTileSource"}(r||(r={})),function(e){e[e.DragDrop=1]="DragDrop",e[e.DragDropUnpin=-1]="DragDropUnpin"}(o||(o={}));const s=282,c=386,d="130px",u=8,l=16,p=20,h=10,g=30,f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrsl7EJADAIBGPIEO4/nVt8SCFkgijhvhCsPNQHNUmjWnM0EBCpdYK7i07cSUTYy+I5ARaz705UuQR34A4ggAACCCCA4LL6qhPGV94JYgswAGXGEhq663zFAAAAAElFTkSuQmCC",m=320,y=176,v=1e4,S=1200,w=8,b=84,C=108,T="tsCollapsed",k="tsUnpinned",P="tsDragDrop",A="tsDragDropUnpin",I=32,E=/^(\/\?|\?|&|)/,R={topSitesContainerId:"TopSitesContainer",topSitesId:"TopSitesCommon",topSitesClassSelector:"topSitesCommon",topSiteActionMenuId:"tsam"},M={topSitesDarkOnBackgroundImage:"topSitesDarkOnBackgroundImage",topSitesLightOnBackgroundImage:"topSitesLightOnBackgroundImage",topSitesDark:"topSitesDark",topSitesLight:"topSitesLight",tenSites:"ten-sites",nineSites:"nine-sites",eightSites:"eight-sites",sixSites:"six-sites",twoRowSites:"two-row-sites",feeds3T1SearchBoxWidth:"f3t1tsb",feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled:"qbf3t1tsb",feeds3T1SearchBoxWidthWithAdditionalTile:"f3t1tsbwat",carouselSites:"all-one-line-sites",large:"Large",rubySites:"ruby-sites"},x=["ntp.msn.com","ntp.msn.cn","microsoftedgewelcome.microsoft.com"],L={"go.microsoft.com":["Welcome to Microsoft Edge"],"msn.com":["MSN","MSN"]};var F;!function(e){e[e.topSiteAdLabelBig=0]="topSiteAdLabelBig",e[e.topSiteAdLabelSmall=1]="topSiteAdLabelSmall",e[e.topSiteAdTxtBig=2]="topSiteAdTxtBig",e[e.topSiteAdTxtSmall=3]="topSiteAdTxtSmall"}(F||(F={}));const D=[{title:"YouTube",url:"https://www.youtube.com/",faviconId:"AA1vaJY7"},{title:"Gmail",url:"https://www.gmail.com/",faviconId:"AA1xJdRt"},{title:"Facebook",url:"https://www.facebook.com/",faviconId:"AAbwoox"},{title:"WhatsApp",url:"https://www.whatsapp.com/",faviconId:"AA1xJga5"}],O=[{title:"YouTube",url:"https://www.youtube.com/",faviconId:"AA1vaJY7"},{title:"Facebook",url:"https://www.facebook.com/",faviconId:"AAbwoox"},{title:"WhatsApp",url:"https://www.whatsapp.com/",faviconId:"AA1xJga5"},{title:"Outlook",url:"https://www.outlook.com",faviconId:"AA1vaSFL"}],_=[{url:"https://www.bing.com",exc:["maps"]},{url:"https://www2.bing.com",exc:["maps"]},{url:"https://bing.com",exc:["maps"]},{url:"https://chat.bing.com"},{url:"https://www.google.co.jp",exc:["maps","photos","flights"]},{url:"https://google.com",exc:["maps","photos","flights","mail"]},{url:"https://www.google.com",exc:["maps","photos","flights"]},{url:"https://www.google.com.au",exc:["maps","photos","flights"]},{url:"https://www.google.com.br",exc:["maps","photos","flights"]},{url:"https://www.google.com.fr",exc:["maps","photos","flights"]},{url:"https://www.google.co.uk",exc:["maps","photos","flights"]},{url:"https://www.google.de",exc:["maps","photos","flights"]},{url:"https://www.yahoo.com"},{url:"https://search.yahoo.com"},{url:"https://uk.yahoo.com "},{url:"https://uk.search.yahoo.com"},{url:"https://de.yahoo.com"},{url:"https://de.search.yahoo.com"},{url:"https://fr.yahoo.com"},{url:"https://fr.search.yahoo.com"},{url:"https://ca.yahoo.com"},{url:"https://ca.search.yahoo.com"},{url:"https://au.yahoo.com"},{url:"https://www.yahoo.co.jp"},{url:"https://search.yahoo.co.jp"},{url:"https://www.baidu.com"},{url:"https://www.duckduckgo.com"},{url:"https://yandex.com"},{url:"https://www.yandex.com"},{url:"https://www.yandex.ru"},{url:"https://www.naver.com"},{url:"https://www.microsoft.com/en-us/edge/update"}],N={"https://www.office.com":"AA13Q6AL","https://www.office.com/":"AA13Q6AL"},B={"https://www.office.com":"Microsoft 365","https://www.office.com/":"Microsoft 365"},U={rid:1,dataGenerationTime:null,faviconUrl:"",domain:"",enforcement:void 0,title:"          ",tileSource:0,tileTitleSource:0,url:"",direction:"ltr"},$={onerow:{[a.K$.c1]:{default:{tile:4,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:4}},[a.K$.c2]:{default:{tile:6,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:6}},[a.K$.c3]:{default:{tile:7,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:7}},[a.K$.c4]:{default:{tile:10,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:10}},[a.K$.c5]:{default:{tile:10,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:10}}},tworows:{[a.K$.c1]:{default:{tile:8,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:4}},[a.K$.c2]:{default:{tile:12,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:6}},[a.K$.c3]:{default:{tile:14,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:7}},[a.K$.c4]:{default:{tile:20,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:10}},[a.K$.c5]:{default:{tile:20,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:10}}}},H={onerow:{[a.K$.c1]:{default:{tile:8,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:4}},[a.K$.c2]:{default:{tile:10,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:5}},[a.K$.c3]:{default:{tile:3,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:3}},[a.K$.c4]:{default:{tile:6,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}},[a.K$.c5]:{default:{tile:6,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}}},tworows:{[a.K$.c1]:{default:{tile:8,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:4}},[a.K$.c2]:{default:{tile:10,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:5}},[a.K$.c3]:{default:{tile:6,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:3}},[a.K$.c4]:{default:{tile:12,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}},[a.K$.c5]:{default:{tile:12,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}}}},W={onerow:{[a.K$.c1]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[a.K$.c2]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[a.K$.c3]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[a.K$.c4]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[a.K$.c5]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}}},tworows:{[a.K$.c1]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[a.K$.c2]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[a.K$.c3]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[a.K$.c4]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[a.K$.c5]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}}}},G={[a.K$.c1]:2,[a.K$.c2]:3,[a.K$.c3]:4,[a.K$.c4]:7,[a.K$.c5]:7},V={onerow:{[a.K$.c1]:{default:{tile:4,class:M.rubySites,maxRowTileCount:4}},[a.K$.c2]:{default:{tile:5,class:M.rubySites,maxRowTileCount:5}},[a.K$.c3]:{default:{tile:6,class:M.rubySites,maxRowTileCount:6}},[a.K$.c4]:{default:{tile:8,class:M.rubySites,maxRowTileCount:8}},[a.K$.c5]:{default:{tile:8,class:M.rubySites,maxRowTileCount:8}}},tworows:{[a.K$.c1]:{default:{tile:4,class:M.rubySites,maxRowTileCount:4}},[a.K$.c2]:{default:{tile:5,class:M.rubySites,maxRowTileCount:5}},[a.K$.c3]:{default:{tile:6,class:M.rubySites,maxRowTileCount:6}},[a.K$.c4]:{default:{tile:8,class:M.rubySites,maxRowTileCount:8}},[a.K$.c5]:{default:{tile:8,class:M.rubySites,maxRowTileCount:8}}}},q="https://account.microsoft.com/privacy/ad-settings/",j=[{rid:1,faviconUrl:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/BB1gpoOU.img",title:"BingMock",tileSource:-5,url:"https://www.bing.com",direction:"ltr",domain:"",tileTitleSource:0,dataGenerationTime:void 0,enforcement:""},{rid:2,faviconUrl:"https://img-s-msn-com.akamaized.net/tenant/amp/entityid/AAc9vHK.img",title:"eBayMock",tileSource:-8,url:"https://www.bing.com/alink/link?url=https%3A%2F%2Fwww.ebay.com%2F%3Fmkcid%3D1%26mkrid%3D711-53200-19255-0%26siteid%3D0%26campid%3D5338626679%26customid%3Denus-edge-topsites-dft%26toolid%3D10001%26mkevt%3D1&source=msn-ntp&h=QhO71UBMK%2F9MvItbnRuiijjTJEYqb5e7azgac4kLBco%3D&aff=p&p=mkt%3Aen-us%3Bf%3Afq0r%2F5Jk3xO%2FZ%2FSOOTjxAUleKOGKPn6MO6pkL%2B2ezaw%3D%3Btssls%3Awpod",isSponsored:!0,domain:"",tileTitleSource:0,dataGenerationTime:void 0,direction:"",enforcement:""},{rid:3,faviconUrl:"https://img-s-msn-com.akamaized.net/tenant/amp/entityid/BB1lFz6G.img",title:"QuickbooksMock",tileSource:-8,url:"https://www.bing.com/alink/link?url=https%3A%2F%2Fww55.affinity.net%2Fsssdomweb%3Fenk%3D6383dabdeb5e62aa12e566d10dce117627fcc3ca988d0acb52865e97f89910b5ef2c530cc0fe75dcd6ca59d2f106f2a93acec33b49c3549d297065f2975465e8f2c8d29d83cedfdb%26subid%3Denus-edge-topsites-dft&source=msn-ntp&h=tTk3Viyyso73ydo4a3f0n4rZPaAHAlsGldI2ALISiJM%3D&aff=p&p=mkt%3Aen-us%3Bf%3Afq0r%2F5Jk3xO%2FZ%2FSOOTjxAUleKOGKPn6MO6pkL%2B2ezaw%3D%3Btssls%3Awpod",isSponsored:!0,domain:"",tileTitleSource:0,dataGenerationTime:void 0,direction:"",enforcement:""},{rid:4,faviconUrl:"https://img-s-msn-com.akamaized.net/tenant/amp/entityid/BB1ncNsL.img",title:"WalmartMock",tileSource:-8,url:"https://www.bing.com/alink/link?url=https%3A%2F%2Fww55.affinity.net%2Fsssdomweb%3Fenk%3D6383dabdeb5e62aa12e566d10dce117627fcc3ca988d0acb276a49e0d9b54340bcfb90634a3d10e1b02644a6b1ad86cf3acec33b49c3549d297065f2975465e8f2c8d29d83cedfdb%26subid%3DEN-US-curated-edge-tiles&source=msn-ntp&h=Nj14yhxE2bBfxDkxA%2FneHafeLMFvtM7h9cSstUsvPE0%3D&aff=p&p=mkt%3Aen-us%3Bf%3Afq0r%2F5Jk3xO%2FZ%2FSOOTjxAUleKOGKPn6MO6pkL%2B2ezaw%3D%3Btssls%3Awpod",isSponsored:!0,domain:"",tileTitleSource:0,dataGenerationTime:void 0,direction:"",enforcement:""},{rid:5,faviconUrl:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/AAdTRDX.img",title:"LinkedInMock",tileSource:-5,url:"https://www.linkedin.com?trk=msn-top",direction:"ltr",domain:"",tileTitleSource:0,dataGenerationTime:void 0,enforcement:""},{rid:6,faviconUrl:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/AAcHSdq.img",title:"NetflixMock",tileSource:-5,url:"https://www.netflix.com/",direction:"ltr",domain:"",tileTitleSource:0,dataGenerationTime:void 0,enforcement:""}]},48590:function(e,t,n){n.d(t,{$h:function(){return S},HU:function(){return h},Qf:function(){return v},TP:function(){return m},gM:function(){return f},h4:function(){return p},lR:function(){return u},nw:function(){return y},oy:function(){return l},pI:function(){return b},uN:function(){return d},zT:function(){return g},zz:function(){return c}});var i=n(35081),r=n(77870),o=n(34718);const a=-1,s=[-5,-8,-4,-6,-7];function c(e,t,n){const i={props:{notificationDurationMs:t,closeToastNotificationHandler:n},timerId:null,startTime:t,remainingTime:t,paused:!1};e.currentToastTimerHandle?.timerId&&window.clearTimeout(e.currentToastTimerHandle.timerId),e.currentToastTimerHandle=i,e.currentToastTimerHandle.startTime=Date.now(),t&&t!==1/0&&(e.currentToastTimerHandle.timerId=window.setTimeout((()=>{e.currentToastTimerHandle.props.closeToastNotificationHandler(!0)}),t))}function d(e){e.currentToastTimerHandle&&(e.currentToastTimerHandle.paused||(e.currentToastTimerHandle.timerId&&(window.clearTimeout(e.currentToastTimerHandle.timerId),e.currentToastTimerHandle.remainingTime-=Date.now()-e.currentToastTimerHandle.startTime),e.currentToastTimerHandle.paused=!0))}function u(e){e.currentToastTimerHandle&&e.currentToastTimerHandle.paused&&e.currentToastTimerHandle.remainingTime&&(e.currentToastTimerHandle.props.notificationDurationMs&&e.currentToastTimerHandle.props.notificationDurationMs!==1/0&&(e.currentToastTimerHandle.startTime=Date.now(),e.currentToastTimerHandle.timerId=window.setTimeout((()=>{e.currentToastTimerHandle.props.closeToastNotificationHandler(!0)}),e.currentToastTimerHandle.remainingTime)),e.currentToastTimerHandle.paused=!1)}function l(e,t,n,i,o,a){if(e){const{left:s,right:c,bottom:d,top:u}=e.getBoundingClientRect(),l=t.getBoundingClientRect(),p=i-c>r.aZ,h=i-s>r.aZ;let g=p?s-l.left:c-r.aZ-l.left,f=h?l.right-s-r.aZ:l.right-c;p||h||(a?g=0-l.left:f=0-l.right);const m=o-d-r.oF>n,y=u>=n;let v="auto";m&&(v=d-l.bottom+r.oF+"px"),m||y||(v=-u+"px");const S=m?"auto":l.bottom-d+r.rN+r.oF+"px";return a?`--dialog-left:${g}px;--dialog-top:${v};--dialog-bottom:${S};`:`--dialog-right:${f}px;--dialog-top:${v};--dialog-bottom:${S};`}return a?`--dialog-left:0px; --dialog-top:${r.oF}px;`:`--dialog-right:0px; --dialog-top:${r.oF}px;`}function p(e){if(!e?.mostVisitedAvailable)return[];const t=[],n=new Set,i=new Set,o=new Set,a=new Set;return e.mostVisited.forEach((s=>{const c=e.getMostVisitedItemData(s.rid),d={rid:s.rid,dataGenerationTime:c.dataGenerationTime,faviconUrl:s.faviconUrl,domain:c.domain,title:c.title,tileSource:c.tileSource,tileTitleSource:c.tileTitleSource,url:c.url,direction:c.direction,enforcement:s.enforcement,customImagePart:s.customImagePart};if(0!=c.tileSource)return t.push(d),!o.has(d.url)&&o.add(d.url),!i.has(d.domain)&&i.add(d.domain),void(!a.has(d.title)&&a.add(d.title));const u=(c.domain??v(c.url)).replace("www.","");!n.has(u)&&n.add(u),r.Yx.includes(u)||function(e,t){if(r.fx&&r.fx[e])for(let n=0;n<r.fx[e].length;n++)if(0===r.fx[e][n].localeCompare(t,{sensitivity:"accent"}))return!0;return!1}(u,c.title)||o.has(d.url)||(i.has(d.domain)||n.has(u))&&a.has(d.title)||t.push(d)})),n.clear(),i.clear(),o.clear(),t}function h(e,t,n,r,a){const s=function(e,t,n){const r=e.recommendedSites||[],o=i.Br()||{},a=i.KS()||{},s=new Set,c=n.map((e=>e.url)),d=r.filter((e=>{const t=v(e.url);if(!(a[t]||o[e.url]||c.includes(e.url)||s.has(e.url)))return s.add(e.url),e})),u=n.filter((e=>4===e.tileSource||3===e.tileSource)).length,l=t-u;return d.splice(0,l)}(e,t,n),c=s.map((e=>e.url));let d;n=n.filter((e=>{if(!c.includes(e.url))return e})),d=0===n.length&&0===a.length?1:a.length>0?a[a.length-1].rid+1:n[n.length-1].rid+1e3;const u=s.map((e=>{r.set(d,e);const t=e.faviconId??i.x3(e.faviconUrl);return{...e,faviconUrl:i.Jn(t),tileSource:-4,rid:d++,customImagePart:e.customImagePart??"image"}}));return(0,o.D)(n,u)}function g(e,t,n){if(e&&t){const i=e.fixupAndValidateUrl(t.href);if(i)return e.updateCustomLink(a,i,n||t.hostname),!0}return!1}function f(e,t,n,r,o,a){if(n){if(i.xb(n.url),a&&o(),s.includes(n.tileSource))return void t();r&&n.rid&&r.deleteMostVisitedItem(n.rid)}}function m(e,t,n,r,o){if(s.includes(r))return i.y1(o),void e();if(t&&n){const e=t.getMostVisitedItemData(n),i=e?e.tileSource:null;4===i||3===i?t.undoCustomLinkAction(n):0!==i&&2!==i||t.undoMostVisitedDeletion(n)}}function y(e,t,n,i,r,o){if(t&&i){let s=t.fixupAndValidateUrl(i.href);if(s&&r){return t.getMostVisitedItemData(r)?(s=t.getMostVisitedItemData(r).url!==s?s:"",t.updateCustomLink(r,s,o||i.hostname)):(t.onmostvisitedchange=n,t.updateCustomLink(a,s,o||i.hostname),e()),!0}}return!1}function v(e){try{return new URL(e).hostname}catch{return""}}function S(e,t){const n=e.filter((e=>e.isSponsored));if(0===n.length)return t;const r=n.map((e=>({faviconUrl:e.faviconUrl??i.Jn(e.faviconId),title:e.title,url:e.url,isSponsored:e.isSponsored}))),o=t.filter((e=>e.isSponsored)),a=r.concat(o).filter(((e,t,n)=>t===n.findIndex((t=>t.title?.toLocaleLowerCase()===e.title?.toLocaleLowerCase()))));return t.map((e=>e.isSponsored&&a.length>0?a.shift():e))}const w=new Set(["index","welcome","working","loading","interstitial","redirect","continue","https","access denied","sign in","signin","sign in to your account","signup","signing in","sign up","log in","login","logging in","home","monitored access"]);function b(e,t){let n=e.toLowerCase().trim();if(n.endsWith("...")&&(n=n.slice(0,-3)),w.has(n)){if((t.startsWith("https://")||t.startsWith("http://"))&&(t=new URL(t).hostname),t.startsWith("www.")){const e="www.";t=t.slice(e.length)}return t}return e}},47054:function(e,t,n){n.r(t),n.d(t,{AdLabelType:function(){return F.cY},BlockedDomainAndTitles:function(){return F.fx},BlockedHosts:function(){return F.Yx},CurrentTopSitesEdgeNextWCTemplate:function(){return Ft},DragDropType:function(){return F.hn},GroupPolicySettings:function(){return F.Py},TileSource:function(){return F.vp},ToolingInfo:function(){return Fn},TopSitesClassNameConstants:function(){return F.Lg},TopSitesDataHelper:function(){return Ut},TopSitesEdgeNextWC:function(){return Qt},TopSitesEdgeNextWCInlineStyles:function(){return xn},TopSitesEdgeNextWCStyles:function(){return Ln},TopSitesEdgeNextWCTemplate:function(){return Dt},TopSitesEdgeNextWCWithCarouselStyles:function(){return Mn},TopSitesEdgeNextWCWithJSDependencyStyles:function(){return An},TopSitesElementConstants:function(){return F.sn},TopSitesNextStyles:function(){return Pn},TopSitesResponsiveStyles:function(){return kn},addDialogHeight:function(){return F.If},addDialogWithSubSectionHeight:function(){return F.ht},blockedDomainsPair:function(){return F.$c},carouselColsPerSlideMap:function(){return F.Jz},carouselTilesxColxRowsMap:function(){return F.pK},carouselTopSiteListTemplate:function(){return xt},closeButtonSvg:function(){return Pt},contextMenuWidth:function(){return F.hR},defaultMaxTileForFirstRow:function(){return F.vI},defaultMaxTileForSixteenTopSites:function(){return F.jC},defaultMaxTileForThreeRowsTopSites:function(){return F.Ip},defaultMaxTileForTwentyTopSites:function(){return F.UG},defaultMaxTiles:function(){return F.Ny},defaultOverrideIconsList:function(){return F.dz},defaultTopSiteIcon:function(){return F.eF},dialogWidth:function(){return F.aZ},displayPinIconTopSitesBindingSource:function(){return Rt},edgeExpTopSites:function(){return F.Hj},editDialogHeight:function(){return F.QC},feeds3T1SearchBoxWidthTilesxColxRowsMap:function(){return F.FQ},feeds3T1SearchBoxWidthWithNotificationMiniCardTilesxColxRowsMap:function(){return F.Mc},googleExpTopSites:function(){return F.xw},mockedVPTestTopSites:function(){return F.C},normalTopSiteListTemplate:function(){return Lt},notificationToastDefaultDisplayMs:function(){return F.mR},pinToastDefaultDisplayMs:function(){return F.fg},pinToastTemplate:function(){return It},privacyUrl:function(){return F.bi},rubyTilesxColxRowsMap:function(){return F.RX},tileDialogMargin:function(){return F.oF},titleOverrides:function(){return F.K4},topSiteAddDialogTemplate:function(){return Tt},topSiteEditDialogTemplate:function(){return kt},topSiteShell:function(){return F.IA},topSiteTileHeight:function(){return F.rN},topSiteTileWidth:function(){return F.PE},topSitesBindingSource:function(){return Et},topSitesCollapsedStorageKey:function(){return F.Cs},topSitesDragDropStorageKey:function(){return F.BV},topSitesDragDropUnpinStorageKey:function(){return F.n0},topSitesUndoToastMessageMargin:function(){return F.Kq},topSitesUnpinnedStorageKey:function(){return F.vX},undoToastTemplate:function(){return At},validQueryParameterPrefix:function(){return F.jS}});var i=n(45900),r=n(63070);var o=n(18128),a=n(26810),s=n(33940),c=n(35081),d=n(52),u=n(42729),l=n(34934),p=n(98130),h=n(96315),g=n(15598),f=n(13218),m=n(79678),y=n(78288),v=n(89046),S=n(28951),w=n(74604),b=n(72263),C=n(42833),T=n(68178),k=n(523),P=n(70041);const A=e=>`<img src="${(0,p.Yq)().StaticsUrl}latest/fluent-icons/${e}.svg" aria-hidden="true" />`,I=A("delete_20_regular"),E=A("edit_20_regular"),R=A("eye_off_16_regular"),M=A("pin_16_regular"),x=A("pin_16_filled"),L=A("tray_item_add_20_regular");var F=n(77870),D=n(24318),O=n(10545),_=n(8170),N=n(5302),B=n(242),U=n(86117),$=n(33779),H=n(81586),W=n(57627);const G="curated_topsite",V="user_topsite",q="frequent_topsite",j="promotedcurated_topsite",z="promotedcurated_topsite_sponsored",K="wpopromoted_topsite",Q="curatedleadgen_topsite",J="autoappend_topsite",X="tile",Y="url",Z="context_menu",ee="topsite_remove_toast",te="remove",ne="undoremove",ie="close",re="cancel",oe="rename",ae="save",se="suggestedlink",ce="edit_dialog",de="add_dialog",ue="topsiteaddtile",le="topsite",pe="turnonpreview",he="turnoffpreview",ge="topsitePinToTaskBar",fe="unpin",me="pin",ye="action_menu",ve="carousel",Se="nextflipperclick",we="preflipperclick",be="name_input",Ce="url_input";var Te;!function(e){e.tsn="tsn",e.moreOption="More Options",e.remove="Remove",e.undoRemove="Undo Remove",e.close="Close",e.rename="Rename",e.save="Save",e.cancel="Cancel",e.addSite="Add a site",e.add="Add",e.show="Show",e.suggestedLink="Add a suggested link",e.turnOnPreview="Turn On Preview",e.turnOffPreview="Turn Off Preview",e.container="Container",e.unpin="Unpin",e.pin="Pin",e.topsiteTaskbarpin="TopSite Pin to TaskBar",e.ActionMenu="Action Menu",e.Impression="Impression",e.carouselClick="Carousel click",e.inputName="Click name input",e.inputUrl="Click URL input"}(Te||(Te={}));const ke="tsu";const Pe=e=>{let t,n=!1;switch(e.tileSource){case 4:case 3:t=V;break;case-5:t=G,n=!0;break;case-6:t=j,n=!0;break;case-7:t=z,n=!0;break;case-4:t=K,n=!0;break;case-8:t=Q,n=!0;break;case 2:t=J,n=!0;break;default:t=q}return{tileSourcePrefix:t,isCuratedOrPromoted:n}};var Ae=n(99452),Ie=n(42590),Ee=n(48590),Re=n(98604),Me=n(26197),xe=n(14969),Le=n(49494),Fe=n(22745),De=n(59997),Oe=n(34718),_e=n(44132),Ne=n(70430),Be=n(44070),Ue=n(49218),$e=n(93703),He=n(41472),We=n(89150),Ge=n(11310),Ve=n.n(Ge),qe=n(58908),je=n(29321),ze=n(80009),Ke=n(77317),Qe=n(24112),Je=n(7137),Xe=n.n(Je);qe.v,je.S,Ke.Z,Qe.X,ze.Oj;const Ye=Ue.dy`<span class="badge">${e=>e.badge.children}</span>`,Ze=Ue.dy`<fluent-button class="end-button" appearance="stealth" title="${e=>e.contextMenuLabel}" aria-label="${e=>e.contextMenuLabel}" role="button" @click=${(e,t)=>t.parent.toggleActionMenu&&t.parent.toggleActionMenu(e,t.event)} data-t="${e=>e.toggleActionMenuButtonTelemetryTag}" icon-only>${Ue.dy.partial(Ve())}</fluent-button>`,et=Ue.dy`<div class="image-container"><img src="${e=>e.faviconUrl}" /></div>`,tt=(Ue.dy`<div class="top-site-title"><span class="top-site-title-text">${e=>e.title}</span>${(0,$e.g)((e=>e.badge),Ye)}</div>`,Ue.dy`<a class="control topsite-ruby-link" aria-label="${e=>e.title}" href="${(e,t)=>t.parent.getTopSiteTemplateUrl(e)}" data-t="${e=>e.anchorTelemetryTag}" target="${(e,t)=>t.parent.config.enableOpenInNewTab?t.parent.linkTarget:void 0}" @focus="${(e,t)=>t.parent.handleTopSiteLinkFocus()}">${et}</a>`),nt=Ue.dy`<a class="control topsite-ruby-link" aria-label="${e=>e.title}" href="${(e,t)=>t.parent.getTopSiteTemplateUrl(e)}" data-t="${e=>e.anchorTelemetryTag}" @click=${(e,t)=>t.parent.preventClickOnTopSite(t.event)} @focus="${(e,t)=>t.parent.handleTopSiteLinkFocus()}">${et}</a>`,it=Ue.dy`<div class="top-site-ruby" aria-label="${e=>e.title}" title="${e=>e.title}" data-t="${e=>e.contentViewTelemetryTag}" @mouseenter="${(e,t)=>t.parent.handleTopSiteMouseEnter()}" @click="${(e,t)=>t.parent.logTileActivatedClick(e)}" @auxclick="${(e,t)=>t.parent.logTileActivatedClick(e)}">${(0,$e.g)((e=>e.disableHref),nt,tt)}<div class="site-name"><span>${e=>e.title}</span></div>${(0,$e.g)(((e,t)=>t.parent.canLoadHoverElements&&t.parent.renderTopSiteStartAndEnd),Ue.dy`<span class="end"><div class="top-site-next-g">${Ze}</div></span>`)}</div>`,rt=Ue.dy`<div class="top-site-ruby add-placeholder"><div class="image-container"><a class="control" href="#" @click=${(e,t)=>e.onAddTopSiteClick(t.event)} data-t="${e=>e.addTopSiteButtonTelemetryTag}" aria-label="${(e,t)=>t.parent.strings.ariaLabel_addTile}" title="${(e,t)=>t.parent.strings.ariaLabel_addTile}"><svg width="24" height="24" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.625V6.375H6.375V12H5.625V6.375H0V5.625H5.625V0H6.375V5.625H12Z" /></svg></a></div></div>`,ot=Ue.dy`<msn-top-site-dialog id="topSiteAddDialog" class="ruby-top-sites-dialog" ${(0,He.i)("topSitesAddDialogRef")} cancelText="${e=>e.topSiteAddDialog.cancelText}" headerTitle="${e=>e.topSiteAddDialog.headerTitle}" saveText="${e=>e.topSiteAddDialog.saveText}" closeText="${e=>e.topSiteAddDialog.closeText}" :nameInputData="${e=>e.topSiteAddDialog.nameInputBox}" :urlInputData="${e=>e.topSiteAddDialog.urlInputBox}" :validator = "${e=>e.topSiteAddDialog.validator}" :newOrUpdatedTopSite="${e=>e.topSiteAddDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteAddDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteAddDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteAddDialog.closeButtonTelemetryTag}" :nameInputTelemetryTag="${e=>e.topSiteAddDialog.nameInputTelemetryTag}" :urlInputTelemetryTag="${e=>e.topSiteAddDialog.urlInputTelemetryTag}" :useKumo=${!0} @focus="${(e,t)=>e.topSiteAddDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteAddDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteAddDialog.saveHandler(t.event)}" style="${e=>e.topSiteAddDialogContainerPosition}"></msn-top-site-dialog>`,at=Ue.dy`<msn-top-site-dialog id="topSiteEditDialog" class="ruby-top-sites-dialog" ${(0,He.i)("topSitesEditDialogRef")} cancelText="${e=>e.topSiteEditDialog.cancelText}" headerTitle="${e=>e.topSiteEditDialog.headerTitle}" saveText="${e=>e.topSiteEditDialog.saveText}" closeText="${e=>e.topSiteEditDialog.closeText}" :nameInputData="${e=>e.topSiteEditDialog.nameInputBox}" :newOrUpdatedTopSite="${e=>e.topSiteEditDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteEditDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteEditDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteEditDialog.closeButtonTelemetryTag}" :nameInputTelemetryTag="${e=>e.topSiteEditDialog.nameInputTelemetryTag}" :urlInputTelemetryTag="${e=>e.topSiteEditDialog.urlInputTelemetryTag}" :useKumo=${!0} @focus="${(e,t)=>e.topSiteEditDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteEditDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteEditDialog.saveHandler(t.event)}" style="${e=>e.topSiteEditDialogContainerPosition}"></msn-top-site-dialog>`,st=Ue.dy`<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.84961 6L12 11.1504L11.1504 12L6 6.84961L0.849609 12L0 11.1504L5.15039 6L0 0.849609L0.849609 0L6 5.15039L11.1504 0L12 0.849609L6.84961 6Z"/></svg>`,ct=Ue.dy`<msn-toast id="undo-toast">${(0,We.rx)((e=>e.undoToast.removedText),Ue.dy`<span>${e=>e}</span>`)}<fluent-button ${(0,He.i)("undoButton")} appearance="lightweight" slot="actions" class="toast-navigation-button" title=${e=>e.undoToast.undoButtonLabel} @click=${(e,t)=>e.undoToast.undoTopSiteHandler(t.event)} data-t="${e=>e.undoToast.undoButtonTelemetryTag}">${e=>e.undoToast.undoButtonLabel}</fluent-button><fluent-button apperance="stealth" slot="close-button" class="toast-close-button" title=${e=>e.undoToast.closeButtonLabel} @click=${(e,t)=>e.undoToast.closeHandler(t.event)} data-t="${e=>e.undoToast.closeButtonTelemetryTag}">${st}</fluent-button></msn-toast>`,dt=Ue.dy`<div class="top-sites ${e=>e.twoRowSitesClassName}" role="status"><div id=${F.sn.topSitesId} class="sites ${e=>e.sitesClassName} ${e=>e.topSitesClassName}" data-t="${e=>e.topSiteCommonTelemetryTag}" ${(0,He.i)("topSitesContainer")}>${Ue.dy`${(0,We.rx)((e=>e.topSites),it)}`} ${Ue.dy`${(0,We.rx)((e=>e.topSitesPlaceHolders),rt)}`}</div></div>`,ut=Ue.dy`<div class="root ruby-top-sites ${e=>e.extraAddedSitesClassName} ${e=>e.className}  ${e=>e.moveUpward?"move-upward":""}" id="${F.sn.topSitesClassSelector}" ${(0,He.i)("topSitesRoot")}>${dt}</div><div ${(0,He.i)("dialogRoot")}>${(0,$e.g)((e=>e.isAddDialogOpen),ot)} ${(0,$e.g)((e=>e.topSiteAddedSuccessfully),Ue.dy`<div class="top-site-add-success" aria-live="polite">${e=>e.lastAddedTopSite} added successfully</div>`)} ${(0,$e.g)((e=>e.isEditDialogOpen),at)} ${(0,$e.g)((e=>e.isActionMenuOpen),Ue.dy`<div data-t=${e=>e.topsiteItemContainerTelemetry()}><msn-actions-menu id="actions-menu" :referrerButton=${e=>e.activeContextMenuButtonElement} class="ruby-long-width-menu" :menuItems=${e=>e.actionsMenuProps?.menuItems} ${(0,He.i)("topSiteActionsMenu")} @dismiss-menu=${e=>e.isActionMenuOpen=!1} :isGlyphUrlsPicture=${!0} data-t=${e=>e.actionsMenuTelemetry()}></msn-actions-menu></div>`)}<div ${(0,He.i)("toastContainer")} class="toast-root">${(0,$e.g)((e=>"undo"===e.currentToastTag),ct)}</div></div>`;var lt=n(53095),pt=n.n(lt);qe.v,je.S,Ke.Z,Qe.X,ze.Oj;const ht=Ue.dy`<span class="badge">${e=>e.badge.children}</span>`,gt=Ue.dy` ${e=>"topSiteAdLabelSmall"!==e.adLabelType?Ue.dy`<span class="dot-separator"> · </span>`:null}<msn-native-ad-ad-label class="${e=>"topSiteAdLabelSmall"===e.adLabelType?"ad-link-label top-site-ad-label":"ad-link-label"}" type="${e=>e.adLabelType}" tel-metadata="${e=>e.anchorTelemetryTag}" privacy-url=${e=>F.bi}></msn-native-ad-ad-label>`,ft=(e,t)=>{const n=[];return n.push("top-site-f3v1b"),n.push("top-site-s2ts"),n.join(" ")},mt=Ue.dy`<fluent-button class="start-button" appearance="stealth" aria-lable="${e=>e.pinLabel}" role="button" data-t="${e=>e.pinActionButtonTelemetryTag}" icon-only>${Ue.dy` ${(0,$e.g)((e=>1===e.dragDropType),Ue.dy`${Ue.dy.partial(Xe())}`)} `}</fluent-button>`,yt=Ue.dy`<fluent-button class="end-button" appearance="stealth" title="${e=>e.contextMenuLabel}" aria-label="${e=>e.contextMenuLabel}" role="button" @click=${(e,t)=>t.parent.toggleActionMenu&&t.parent.toggleActionMenu(e,t.event)} data-t="${e=>e.toggleActionMenuButtonTelemetryTag}" icon-only>${Ue.dy.partial(Ve())}</fluent-button>`,vt=Ue.dy`<div class="top-site-title"><span class="top-site-title-text">${e=>e.title}</span>${(0,$e.g)((e=>e.adLabelType&&e.isSponsored&&2!==e.tileSource),gt)} ${(0,$e.g)((e=>e.badge),ht)}</div>`,St=Ue.dy`<a class="control" href="${(e,t)=>t.parent.getTopSiteTemplateUrl(e)}" data-t="${e=>e.anchorTelemetryTag}" target="${(e,t)=>t.parent.config.enableOpenInNewTab?t.parent.linkTarget:void 0}" @focus="${(e,t)=>t.parent.handleTopSiteLinkFocus()}">${vt}</a>`,wt=Ue.dy`<a class="control" href="${(e,t)=>t.parent.getTopSiteTemplateUrl(e)}" data-t="${e=>e.anchorTelemetryTag}" @click=${(e,t)=>t.parent.preventClickOnTopSite(t.event)} @focus="${(e,t)=>t.parent.handleTopSiteLinkFocus()}">${vt}</a>`,bt=Ue.dy`<div title="${e=>e.title}" aria-label="${e=>e.title}" class="top-site-next small-top-sites pill-top-site pinned-top-site ${(e,t)=>t.parent.config.backgroundOpacity?`tstb-${t.parent.config.backgroundOpacity}`:""} ${(e,t)=>t.parent.config.enableCircleShadeIcon?"tscsi":""} ${ft} ${(e,t)=>t.parent.topSitesClassName}" href="${(e,t)=>t.parent.getTopSiteTemplateUrl(e)}" data-t="${e=>e.contentViewTelemetryTag}" @mouseenter="${(e,t)=>t.parent.handleTopSiteMouseEnter()}" @click="${(e,t)=>(t.parent.topSitesPromotedManager.handleTopSiteClick(e.url),!0)}">${(0,$e.g)(((e,t)=>t.parent.canLoadHoverElements&&(t.parent.renderTopSiteStartAndEnd&&1===e.dragDropType||e.promote)),Ue.dy`<span class="start"><div class="top-site-next-g">${mt}</div></span>`)}<div class="content-container ${(e,t)=>t.parent.topSitesClassName}" @click="${(e,t)=>t.parent.logTileActivatedClick(e)}" @auxclick="${(e,t)=>t.parent.logTileActivatedClick(e)}"><div class="image-container"><div class="image"><img src="${e=>e.faviconUrl}" /></div></div><div class="title-container">${(0,$e.g)((e=>e.disableHref),wt,St)}</div></div>${(0,$e.g)(((e,t)=>t.parent.canLoadHoverElements&&t.parent.renderTopSiteStartAndEnd),Ue.dy`<span class="end"><div class="top-site-next-g">${yt}</div></span>`)}</div>`,Ct=Ue.dy`<div class="top-site-next small-top-sites pill-top-site drag-locked add-placeholder ${(e,t)=>t.parent.config.backgroundOpacity?`tstb-${t.parent.config.backgroundOpacity}`:""} ${(e,t)=>t.parent.config.enableCircleShadeIcon?"tscsi":""} ${ft} ${(e,t)=>t.parent.topSitesClassName}"><div class="content-container ${(e,t)=>t.parent.topSitesClassName}"><div class="image-container"><div class="image new-add-image"><svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.625V6.375H6.375V12H5.625V6.375H0V5.625H5.625V0H6.375V5.625H12Z" /></svg></div></div><div class="title-container"><a class="control" href="#" @click=${(e,t)=>e.onAddTopSiteClick(t.event)} data-t="${e=>e.addTopSiteButtonTelemetryTag}" aria-label="${(e,t)=>t.parent.strings.ariaLabel_addTile}" title="${(e,t)=>t.parent.strings.ariaLabel_addTile}"><div class="top-site-title"><span class="top-site-title-text">${(e,t)=>t.parent.getAddShortcutTitle()}</span></div></a></div></div></div>`,Tt=Ue.dy`<msn-top-site-dialog id="topSiteAddDialog" ${(0,He.i)("topSitesAddDialogRef")} cancelText="${e=>e.topSiteAddDialog.cancelText}" headerTitle="${e=>e.topSiteAddDialog.headerTitle}" saveText="${e=>e.topSiteAddDialog.saveText}" closeText="${e=>e.topSiteAddDialog.closeText}" :nameInputData="${e=>e.topSiteAddDialog.nameInputBox}" :urlInputData="${e=>e.topSiteAddDialog.urlInputBox}" :newOrUpdatedTopSite="${e=>e.topSiteAddDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteAddDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteAddDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteAddDialog.closeButtonTelemetryTag}" :nameInputTelemetryTag="${e=>e.topSiteAddDialog.nameInputTelemetryTag}" :urlInputTelemetryTag="${e=>e.topSiteAddDialog.urlInputTelemetryTag}" @focus="${(e,t)=>e.topSiteAddDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteAddDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteAddDialog.saveHandler(t.event)}" style="${e=>e.topSiteAddDialogContainerPosition}">${(0,$e.g)((e=>e.config.suggestedTopSiteList&&e.config.suggestedTopSiteList.length>0),Ue.dy`<div slot="subSection"><h3 class="suggestion-title">${e=>e.strings.addDialogSubHeading}</h3><div class="suggestion-body">${(0,We.rx)((e=>e.config.suggestedTopSiteList),Ue.dy`<div tabIndex="0" class="suggested-top-site"><div class="top-site-next" href="${e=>e.url}" title="${e=>e.title}" aria-label="${e=>e.title}" tabIndex="-1" @click=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)} @keydown=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)}><div class="content-container"><div class="image"><img src="${e=>(0,c.Jn)(e.faviconId)}" alt="${e=>e.title}" /></div><div class="title-container"><div class="control" data-t="${e=>e.suggestedLinkTelemetryTag}"><div class="top-site-title"><span class="top-site-title-text">${e=>e.title}</span>${(0,$e.g)((e=>e.adLabelType&&e.isSponsored),gt)} ${(0,$e.g)((e=>e.badge),ht)}</div></div></div></div></div></div>`)}</div></div>`)}</msn-top-site-dialog>`,kt=Ue.dy`<msn-top-site-dialog id="topSiteEditDialog" ${(0,He.i)("topSitesEditDialogRef")} cancelText="${e=>e.topSiteEditDialog.cancelText}" headerTitle="${e=>e.topSiteEditDialog.headerTitle}" saveText="${e=>e.topSiteEditDialog.saveText}" closeText="${e=>e.topSiteEditDialog.closeText}" :nameInputData="${e=>e.topSiteEditDialog.nameInputBox}" :newOrUpdatedTopSite="${e=>e.topSiteEditDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteEditDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteEditDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteEditDialog.closeButtonTelemetryTag}" :nameInputTelemetryTag="${e=>e.topSiteEditDialog.nameInputTelemetryTag}" :urlInputTelemetryTag="${e=>e.topSiteEditDialog.urlInputTelemetryTag}" @focus="${(e,t)=>e.topSiteEditDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteEditDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteEditDialog.saveHandler(t.event)}" style="${e=>e.topSiteEditDialogContainerPosition}"></msn-top-site-dialog>`,Pt=Ue.dy`<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.84961 6L12 11.1504L11.1504 12L6 6.84961L0.849609 12L0 11.1504L5.15039 6L0 0.849609L0.849609 0L6 5.15039L11.1504 0L12 0.849609L6.84961 6Z"/></svg>`,At=Ue.dy`<msn-toast id="undo-toast">${(0,We.rx)((e=>e.undoToast.removedText),Ue.dy`<span>${e=>e}</span>`)}<fluent-button ${(0,He.i)("undoButton")} appearance="stealth" slot="actions" class="toast-navigation-button" title=${e=>e.undoToast.undoButtonLabel} @click=${(e,t)=>e.undoToast.undoTopSiteHandler(t.event)} data-t="${e=>e.undoToast.undoButtonTelemetryTag}">${e=>e.undoToast.undoButtonLabel}</fluent-button><fluent-button appearance="stealth" slot="close-button" class="toast-close-button" title=${e=>e.undoToast.closeButtonLabel} @click=${(e,t)=>e.undoToast.closeHandler(t.event)} data-t="${e=>e.undoToast.closeButtonTelemetryTag}">${Pt}</fluent-button></msn-toast>`,It=Ue.dy`<msn-toast id="pin-toast">${(0,We.rx)((e=>e.pinToast.pinText),Ue.dy`<span>${e=>e}</span>`)}<fluent-button appearance="stealth" slot="close-button" class="toast-close-button" title=${e=>e.pinToast.closeButtonLabel} @click=${(e,t)=>e.pinToast.closeHandler(t.event)} data-t="${e=>e.pinToast.closeButtonTelemetryTag}">${Pt}</fluent-button></msn-toast>`,Et=e=>e.topSites,Rt=e=>e.topSites.map((e=>({...e,displayPinIcon:!0}))),Mt=Ue.dy`<div class="fliper">${Ue.dy.partial(pt())}</div>`;const xt=Ue.dy`<msft-stripe speed="3600" part="msft-stripe" ${(0,He.i)("ref_stripe")} class="${e=>`${e.enableQuickBrief?"strip-with-quick-brief":""}${e.config.enableShowFlipperOpacity?"strip-with-opacity-flipper":""}`}"><div slot="previous-flipper">${Ue.dy`<div class="pre-fliper" role="button" @click="${e=>e.onFlipperClick(!1)}" aria-label=${e=>e.carouselProps?.preFlipperText} title=${e=>e.carouselProps?.preFlipperText} data-t="${e=>e.carouselProps?.clickCarouselPreButtonTag}">${Mt}</div>`}</div><div slot="next-flipper">${Ue.dy`<div class="next-fliper" role="button" @click="${e=>e.onFlipperClick(!0)}" aria-label=${e=>e.carouselProps?.nextFlipperText} title=${e=>e.carouselProps?.nextFlipperText} data-t="${e=>e.carouselProps?.clickCarouselNextButtonTag}">${Mt}</div>`}</div><div class="top-sites ${e=>e.twoRowSitesClassName}" role="status"><div id=${F.sn.topSitesId} class="sites ${e=>e.sitesClassName} ${e=>e.topSitesClassName}" data-t="${e=>e.topSiteCommonTelemetryTag}" ${(0,He.i)("topSitesContainer")}>${Ue.dy`${(0,We.rx)(Et,bt)}`}</div></div></msft-stripe><div class="top-sites ${e=>e.twoRowSitesClassName}"><div class="sites">${Ue.dy`${(0,We.rx)((e=>e.topSitesPlaceHolders),Ct)}`}</div></div>`,Lt=Ue.dy`<div class="top-sites ${e=>e.twoRowSitesClassName}" role="status"><div id=${F.sn.topSitesId} class="sites ${e=>e.sitesClassName} ${e=>e.topSitesClassName}" data-t="${e=>e.topSiteCommonTelemetryTag}" ${(0,He.i)("topSitesContainer")}>${Ue.dy`${(0,We.rx)(Et,bt)}`} ${Ue.dy`${(0,We.rx)((e=>e.topSitesPlaceHolders),Ct)}`}</div></div>`,Ft=Ue.dy`<div class="root ${e=>e.extraAddedSitesClassName} ${e=>e.className}  ${e=>e.moveUpward?"move-upward":""}" id="${F.sn.topSitesClassSelector}" ${(0,He.i)("topSitesRoot")}>${(0,$e.g)((e=>e.config.enableCarouselTopSite),xt)} ${(0,$e.g)((e=>!e.config.enableCarouselTopSite),Lt)}</div><div ${(0,He.i)("dialogRoot")}>${(0,$e.g)((e=>e.isAddDialogOpen),Tt)} ${(0,$e.g)((e=>e.topSiteAddedSuccessfully),Ue.dy`<div class="top-site-add-success" aria-live="polite">${e=>e.lastAddedTopSite} added successfully</div>`)} ${(0,$e.g)((e=>e.isEditDialogOpen),kt)} ${(0,$e.g)((e=>e.isActionMenuOpen),Ue.dy`<div data-t=${e=>e.topsiteItemContainerTelemetry()}><msn-actions-menu id="actions-menu" :referrerButton=${e=>e.activeContextMenuButtonElement} class="long-width-menu" :menuItems=${e=>e.actionsMenuProps?.menuItems} ${(0,He.i)("topSiteActionsMenu")} @dismiss-menu=${e=>e.isActionMenuOpen=!1} :isGlyphUrlsPicture=${!0} data-t=${e=>e.actionsMenuTelemetry()}></msn-actions-menu></div>`)}<div ${(0,He.i)("toastContainer")} class="toast-root">${(0,$e.g)((e=>"undo"===e.currentToastTag),At)} ${(0,$e.g)((e=>"pin"===e.currentToastTag),It)}</div></div>`,Dt=Ue.dy` ${(0,$e.g)((e=>e.isRuby),ut,Ft)}
`;class Ot{constructor(e,t){this.onTouchStart=()=>{this.sortableService&&this.sortableService.destroy(),this.sortableService=null,document.addEventListener("mousemove",this.onMouseMove)},this.onMouseMove=()=>{this.initializeService(),document.removeEventListener("mousemove",this.onMouseMove)},this.onUnloadPage=()=>{this.clearTopsiteByUnpinnedSites(),this.clearUnpinStorage()},this.component=e,this.container=t.container,this.disableDragDrop=t.disableDragDrop,this.webStorage=(0,g.$o)(),this.bindEvents()}bindEvents(){window.addEventListener("beforeunload",this.onUnloadPage),document.addEventListener("touchstart",this.onTouchStart),document.addEventListener("mousemove",this.onMouseMove)}unBindEvents(){window.removeEventListener("beforeunload",this.onUnloadPage),document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("mousemove",this.onMouseMove)}getDataFromStorage(e){try{const t=this.webStorage.getItem(e);if(t){return JSON.parse(t)}}catch(e){_e.M0.sendAppErrorEvent({...N.OF8,message:"Cannot read/write storage for topsite drag drop service",pb:{...N.OF8.pb,customMessage:`Cannot get drag drop service data, msg: ${e.message||JSON.stringify(e)}`}})}}saveDataToStorage(e,t){try{this.webStorage.setItem(e,JSON.stringify(t))}catch(e){_e.M0.sendAppErrorEvent({...N.OF8,message:"Cannot read/write storage for topsite drag drop service",pb:{...N.OF8.pb,customMessage:`Cannot save data to topsites, msg: ${e.message||JSON.stringify(e)}`}})}}reorderItems(e,t,n){Array.isArray(e)&&e.splice(t,0,e.splice(n,1)[0])}getValidTopSitesFromStorageData(){const e=this.getDataFromStorage(F.BV)||{},t=(e.data??[]).filter((e=>e.slot>=0)).sort(((e,t)=>e.slot-t.slot)).reduce(((e,t)=>"rid"in t||"url"in t||"faviconUrl"in t?((0===e.length||e[e.length-1].slot!==t.slot)&&e.push(t),e):e),[]);return{...e,data:t}}getFixedTopSites(){const{data:e}=this.getValidTopSitesFromStorageData();return e||[]}getTopSites(e,t){let n=e;const{data:i}=this.getValidTopSitesFromStorageData();if(!i)return e;const r=i.filter((e=>e.slot<t)),o=(0,Ne.Z)(e,r,"url");return n=[...(0,Oe.$)(o,r)],n=n.filter((e=>e)).slice(0,t),n}removeTopSiteFromStorage(e,t){const n=this.getDataFromStorage(e)||{},i=n.data;i&&(n.data=i.filter((e=>e.rid!==t.rid)),this.saveDataToStorage(e,n))}clearUnpinStorage(){this.saveDataToStorage(F.n0,{})}clearTopsiteByUnpinnedSites(){const e=(this.getDataFromStorage(F.n0)||{}).data;e&&e.forEach((e=>{this.removeTopSite(e)}))}addTopSite(e,t){let n=this.getValidTopSitesFromStorageData(),i=n.data;if(i||(i=[],n={data:i}),t){i.filter((t=>t.rid!==e.rid&&t.slot>=Math.min(e.fromIndex,e.toIndex)&&t.slot<=Math.max(e.fromIndex,e.toIndex))).forEach((t=>e.fromIndex>e.toIndex?t.slot++:t.slot--))}const r=i.find((t=>t.rid===e.rid));r?Object.assign(r,e):i.push(e),n.data=(0,Be.Z)(i,"rid"),this.saveDataToStorage(F.BV,n),this.removeUnpinnedTopSite(e)}removeTopSite(e){this.removeTopSiteFromStorage(F.BV,e)}addUnpinnedTopSite(e){let t=this.getDataFromStorage(F.n0)||{},n=t.data;n||(n=[],t={data:n}),n.push(e),this.saveDataToStorage(F.n0,t)}removeUnpinnedTopSite(e){this.removeTopSiteFromStorage(F.n0,e)}updateTopSites(e){const t=this.getValidTopSitesFromStorageData(),n=t.data;if(!n)return;const i=n.find((t=>t.rid===e.rid));i&&Object.assign(i,e),this.saveDataToStorage(F.BV,t)}async initializeService(){if(this.sortableService||this.disableDragDrop)return;let e;if(e=this.container instanceof Promise?await this.container:this.container,!e)return;const{Sortable:t}=await n.e("node_modules_sortablejs_modular_sortable_esm_js").then(n.bind(n,54958)),i=new Image;i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",this.sortableService=t.create(e,{animation:150,chosenClass:"drag-chosen",dragClass:"drag-dragged",delay:100,touchStartThreshold:5,delayOnTouchOnly:!0,filter:".drag-locked",setData:e=>{e.setDragImage(i,0,0)},onMove:e=>{if(e.related||e.dragged)return!e.related.classList.contains("drag-locked")&&!e.dragged.classList.contains("drag-locked")&&(e.related.classList.add("drag-chosen__no-hover"),!0)},onEnd:t=>{const{oldIndex:n,newIndex:i}=t;Array.from(e.children)?.forEach((e=>{e.classList?.remove("drag-chosen__no-hover")}));const r=this.component.topSites;if(r&&0!==r.length&&-1!==n&&-1!==i&&n!==i){_e.M0.addOrUpdateTmplProperty("tpsdrag","1");if(!this.component.getUserSelectedSetting())return;const e={...r[n],slot:i,fromIndex:n,toIndex:i,dragDropType:1};this.addTopSite(e,!0);const o=this.component.$fastController.subscribers?.topSites;if(o){const e=[...this.component.topSites];this.reorderItems(e,i,n);let r=[];if(o.spillover)r=o.spillover;else{const{sub1:e,sub2:t}=o;r=[e,t].filter((e=>e))}const a=r.filter((e=>e.subject===Et))[0];if(a){const e=a.sub1.views,r=e[n].firstChild.parentNode;if(i<n)r.insertBefore(e[i].firstChild,t.item.nextSibling),r.insertBefore(e[n].firstChild,t.item),r.insertBefore(e[n].lastChild,t.item.nextSibling);else{const o=e[i+1];o&&r.insertBefore(o.firstChild,t.item.nextSibling),r.insertBefore(e[n].firstChild,t.item),r.insertBefore(e[n].lastChild,t.item.nextSibling)}this.reorderItems(e,i,n),this.component.getOrUpdateTopSites()}}_e.M0.sendActionEvent(t.item)}},onChange:e=>{this.component.setActiveTopSiteElement(e.item)}})}destroy(){this.sortableService&&this.sortableService.destroy(),this.sortableService=null,this.unBindEvents()}}var _t=n(16243),Nt=n(33141);const Bt="TSNP1.topsites";class Ut{constructor(){try{this.storage=window.localStorage}catch(e){}}write(e,t){if(this.storage)try{this.storage[e]=t}catch(e){}}writeJsonKey(e,t){return this.write(e,JSON.stringify(t))}readJsonKey(e,t=void 0){const n=this.storage?.[e];return n?JSON.parse(n):t}getTopSites(){return this.readJsonKey(Bt,[])}writeTopSites(e){this.writeJsonKey(Bt,e)}}var $t=n(22624);const Ht="promotedSitesRecord";var Wt;!function(e){e.APPEAR="APPEAR",e.CLICK="CLICK"}(Wt||(Wt={}));class Gt{constructor(e,t=2592e6){this.enableHidePromotedSites=!1,this.promotedSitesRecord={},this.workFinished=!1,this.lastDecideResultMap={},this.appearCountToHidePromoted=e,this.enableHidePromotedSites=this.appearCountToHidePromoted&&this.appearCountToHidePromoted>=2,this.recoverTime=t}handleTopSiteClick(e){this.enableHidePromotedSites&&this.promotedSitesRecord[e]&&(this.promotedSitesRecord[e].isClicked=!0,this.saveRecordToPsl(Wt.CLICK))}async initHidePromotedSites(){if(!this.enableHidePromotedSites)return;const e=await $t.L.getPreferenceSetting(Ht);if(!e)return;const t=JSON.parse(e.value);Date.now()-e.timestamp>this.recoverTime?this.promotedSitesRecord={}:this.promotedSitesRecord=t}shouldHide(e){if(this.lastDecideResultMap[e])return this.lastDecideResultMap[e];if(!this.enableHidePromotedSites)return this.lastDecideResultMap[e]=!1,!1;this.promotedSitesRecord[e]||(this.promotedSitesRecord[e]={appearCount:0,isClicked:!1,timestampList:[]});const t=this.promotedSitesRecord[e];return t.appearCount>=this.appearCountToHidePromoted&&!t.isClicked?(this.lastDecideResultMap[e]=!0,!0):(this.lastDecideResultMap[e]=!1,this.updateRecord(e),!1)}updateRecord(e){if(this.workFinished)return;if(!this.enableHidePromotedSites)return;const t=this.promotedSitesRecord[e];this.promotedSitesRecord[e]={appearCount:t.appearCount+1,isClicked:t.isClicked,timestampList:t.timestampList.concat(Date.now())}}saveRecordToPsl(e=Wt.APPEAR){this.workFinished&&e===Wt.APPEAR||this.enableHidePromotedSites&&($t.L.savePreferenceSetting(Ht,{setting:Ht,source:e,value:JSON.stringify(this.promotedSitesRecord),timestamp:Date.now()}),this.workFinished=!0)}}var Vt=n(29715),qt=n(21215),jt=n(22680),zt=n(82928),Kt=n(80535);class Qt extends Vt.l{constructor(){super(...arguments),this.dataHelper=new Ut,this.hoverTelemtryTimer=null,this.linkTarget="_self",this.enableQuickBrief=!1,this.widthPerPage=92,this.carouselPageIndex=0,this.carouselColsPerSlide=0,this.scrollDirection=window.document.dir===De.N.rtl?-1:1,this.darkModeQuery=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),this.isDarkMode=this.darkModeQuery.matches,this.isRuby=D.FI.isRuby,this.extraAddedSitesClassName="",this.topSitesEndMarginUsedPadding=0,this.actionMenuOpenTime=void 0,this.isActionMenuOpen=!1,this.isEditDialogOpen=!1,this.isUndoToastOpen=!1,this.isPinToastOpen=!1,this.topSiteMapper=new Map,this.topSites=[],this.currentToastTag=void 0,this.toastExpirationTimerHost={currentToastTimerHandle:null},this.moveUpward=!1,this.topSiteAddedSuccessfully=!1,this.addTopSiteDialogListener=!1,this.editTopSiteDialogListener=!1,this.numberPromotedSites=0,this.disablePromoteTopSites=!1,this.isMinVisitAffiliateSitesFeatureActive=!1,this.appendGoogleSitesOnNTP=!1,this.blockGoogleTopSitesExp=!1,this.isDisableDefaultInProgress=!1,this.getUserSelectedSetting=()=>this.userSelectedSetting,this.setActiveTopSiteElement=e=>{this.activeTopSiteElement=e},this.renderTopSiteStartAndEnd=!1,this.canLoadHoverElements=!1,this.topSitesPromotedManager=null,this.closeFlyouts=(0,u.k)((()=>{this.isActionMenuOpen&&this.toggleActionMenu(null),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog()}),400),this.closeToast=(e=!1)=>{this.currentToastTag=null,e&&(0,l.Gg)(l.tk.toast,!1),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog(),this.activeContextMenuButtonElement?.focus(),this.toastContainer?.removeEventListener("focus",this.handleToastFocus,!0),this.toastContainer?.removeEventListener("blur",this.handleToastBlur,!0)},this.generateActionsMenuProps=async()=>({menuItems:await this.getActionMenuItem(),onDismiss:this.toggleActionMenu}),this.getActionMenuItem=async()=>{const e=this.activeTopSiteItem&&[-5,-6].includes(this.activeTopSiteItem.tileSource),t=this.activeTopSiteItem&&(-8===this.activeTopSiteItem.tileSource||-7===this.activeTopSiteItem.tileSource),i=p.jG.CurrentMarket===h.IY.ENUS,{checkTopsitesTail:r,findActiveSiteIndex:o,pinAction:a,pinToTaskBarHandler:s,togglePinToast:c}=await n.e("experiences_top-sites-edgenext-wc_dist_TopSitesEdgeNextWC_actionMenu_js-experiences_spotlight-76d58f").then(n.bind(n,52381)),d={id:"Remove",title:this.strings.removeLabelText,glyph:I,onClick:e=>{r(o(this.activeTopSiteItem,this.topSites),this.dragDropService,this.topSites),"https://www.office.com"==this.activeTopSiteItem.url&&(this.deletedUrlLookup[this.activeTopSiteItem.url]=!0,this.webStorage.setObject("removedTopSiteUrls",this.deletedUrlLookup)),-6!=this.activeTopSiteItem.tileSource&&-7!=this.activeTopSiteItem.tileSource||(this.numberPromotedSites--,(0,g.$o)().setItem(F.vX,this.numberPromotedSites.toString())),this.dragDropService&&"slot"in this.activeTopSiteItem&&this.dragDropService.removeTopSite(this.activeTopSiteItem),(0,Ee.gM)(e,this.getOrUpdateTopSites,this.activeTopSiteItem,this.ntpApiHandle,this.toggleUndoToast.bind(this,!0),!0),this.onMostVisitedHandler()},telemetryTag:this.topSiteActionTelemetryContext?.removeTopSite?.getMetadataTag()},u={id:"Rename",title:this.strings.renameLabelText,glyph:E,onClick:e=>{this.toggleEditDialog(e)},telemetryTag:this.topSiteActionTelemetryContext?.editDialog?.getMetadataTag()},l=[u,d];if(e){const e={id:"Hide",title:i?this.strings.hidePromotedCuratedLabelText:this.strings.hideCuratedLabelText,glyph:R,onClick:e=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext?.removeCurated?.getMetadataTag()};l.push(e)}if(t){const e={id:"Hide",title:i?this.strings.hideSponsoredCuratedLabelText:this.strings.hideCuratedLabelText,glyph:R,onClick:e=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext?.removeCurated?.getMetadataTag()};l.push(e)}const f={id:"Pin",title:1===this.activeTopSiteItem?.dragDropType?this.strings.unpinSite:this.strings.pinSite,glyph:1===this.activeTopSiteItem?.dragDropType?x:M,onClick:e=>{a(this.dragDropService,this)},telemetryTag:this.topSiteActionTelemetryContext?.pinningTopSiteInQuickLinks?.getMetadataTag()};if(l.push(f),this.isRuby)return[u,d];if(this.config.enablePinningTopSite){const e={id:"PinToTaskBar",title:this.strings.pinToTaskBar,glyph:L,onClick:e=>{s(this.activeTopSiteItem),c(this)},telemetryTag:this.topSiteActionTelemetryContext?.pinningTopSite?.getMetadataTag()};l.push(e)}return l},this.getOrUpdateTopSites=()=>{this.topSites=this.getTopSites(),this.currentTilesNumber=this.topSites?.length??0,this.topSitesPlaceHolders=this.getTopSitesPlaceHolders()},this.handleClick=e=>{this.isActionMenuOpen&&(!this.topSiteActionsMenu||this.topSiteActionsMenu.contains(e.target)||this.activeContextMenuButtonElement.contains(e.target)||!e.composedPath()||e.composedPath().includes(this.activeContextMenuButtonElement)||this.toggleActionMenu(this.activeTopSiteItem,e)),this.topSites&&this.topSites.length>0&&this.ShowPinningWizardCampaign()},this.lowEndDeviceHandler=e=>{this.isLowEndDevice=e?.detail?.isLowEndDevice??!1},this.onMostVisitedHandler=()=>{this.getOrUpdateTopSites()},this.toggleActionMenu=async(e,t)=>{this.activeTopSiteElement=!this.isActionMenuOpen&&t?t.currentTarget.parentElement.parentElement:this.activeTopSiteElement,this.activeTopSiteItem=e,this.isActionMenuOpen?(window.removeEventListener("scroll",this.closeFlyouts),this.actionsMenuProps=void 0):(this.actionMenuOpenTime=performance?.now(),window.addEventListener("scroll",this.closeFlyouts),t&&t.currentTarget&&_t.u.addElement(t.currentTarget),this.topSiteActionTelemetryContext&&this.activeTopSiteItem&&(this.topSiteActionTelemetryContext=((e,t,n)=>{const{tileSourcePrefix:i,isCuratedOrPromoted:r}=Pe(t),{removeTopSite:o,editDialog:a,closeEditDialog:s,saveEdit:c,cancelEdit:d,turnOffPreview:u,turnOnPreview:l,pinningTopSiteInQuickLinks:p,undoRemoveTopSite:h,closeRemoveToast:g,pinningTopSite:f}=e;o.contract.name=`${i}_${te}`,h.contract.name=`${i}_${ne}`,g.contract.name=`${i}_${ee}`,a.contract.name=`${i}_${oe}`,s.contract.name=`${i}_${ce}_${ie}`,c.contract.name=`${i}_${ce}_${ae}`,d.contract.name=`${i}_${ce}_${re}`,u.contract.name=`${i}_${he}`,l.contract.name=`${i}_${pe}`,f.contract.name=`${i}_${me}`,p.contract.name=`${i}_${ge}`;const m=!t.pinActionButtonTelemetryTag;return n&&(p.contract.name=m?`${i}_${me}`:p.contract.name=`${i}_${fe}`),r&&(o.contract.content.headline=`${Te.remove}_${t.title}`,h.contract.content.headline=`${Te.undoRemove}_${t.title}`,g.contract.content.headline=`${Te.close}_${t.title}`,a.contract.content.headline=`${Te.rename}_${t.title}`,s.contract.content.headline=`${Te.close}_${t.title}`,c.contract.content.headline=`${Te.save}_${t.title}`,d.contract.content.headline=`${Te.cancel}_${t.title}`,u.contract.content.headline=`${Te.turnOffPreview}_${t.title}`,l.contract.content.headline=`${Te.turnOnPreview}_${t.title}`,f.contract.content.headline=`${Te.topsiteTaskbarpin}_${t.title}`,p.contract.content.headline=`${Te.pin}_${t.title}`,n&&(p.contract.content.headline=m?`${Te.pin}_${t.title}`:`${Te.unpin}_${t.title}`),o.contract.destinationUrl=`${t.url}`,h.contract.destinationUrl=`${t.url}`,g.contract.destinationUrl=`${t.url}`,a.contract.destinationUrl=`${t.url}`,s.contract.destinationUrl=`${t.url}`,c.contract.destinationUrl=`${t.url}`,d.contract.destinationUrl=`${t.url}`,u.contract.destinationUrl=`${t.url}`,l.contract.destinationUrl=`${t.url}`,f.contract.destinationUrl=`${t.url}`,p.contract.destinationUrl=`${t.url}`),e})(this.topSiteActionTelemetryContext,this.activeTopSiteItem,this.isRuby)),this.activeContextMenuButtonElement=t.currentTarget,this.generateActionsMenuProps().then((e=>{this.actionsMenuProps=e}))),this.isActionMenuOpen=!this.isActionMenuOpen,(0,l.Gg)(l.tk.actionMenuOpen,this.isActionMenuOpen)},this.toggleAddDialog=e=>{const t=!this.isAddDialogOpen&&e?e.currentTarget.parentElement.parentElement:null;if(this.isAddDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{window.addEventListener("scroll",this.closeFlyouts),e&&e.currentTarget&&_t.u.addElement(e.currentTarget);const n=document.dir===De.N.ltr,i=this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0?F.ht:F.If,r=(0,Ee.oy)(t,this.topSitesRoot,i,document.documentElement.clientWidth,document.documentElement.clientHeight,n);this.topSiteAddDialogContainerPosition=r,this.addTopSiteButtonRef=e?.currentTarget}this.isAddDialogOpen=!this.isAddDialogOpen,this.isAddDialogOpen||(this.isEditDialogOpen&&this.toggleEditDialog(),"undo"===this.currentToastTag&&this.toggleUndoToast(),this.addTopSiteButtonRef&&window.setTimeout((()=>this.addTopSiteButtonRef.focus()),0)),(0,l.Gg)(l.tk.addTopSite,this.isAddDialogOpen),this.topSiteAddDialog.newOrUpdatedTopSite={name:"",url:""}},this.toggleEditDialog=e=>{if(this.isEditDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{window.addEventListener("scroll",this.closeFlyouts),e&&e.currentTarget&&_t.u.addElement(e.currentTarget),this.topSiteEditDialog.newOrUpdatedTopSite={name:this.activeTopSiteItem.title,url:this.activeTopSiteItem.url},this.topSiteEditDialog.nameInputBox.value=this.activeTopSiteItem.title;const t=document.dir===De.N.ltr,n=(0,Ee.oy)(this.activeTopSiteElement,this.topSitesRoot,F.QC,document.documentElement.clientWidth,document.documentElement.clientHeight,t);this.topSiteEditDialogContainerPosition=n}this.isEditDialogOpen=!this.isEditDialogOpen,this.isEditDialogOpen||(this.isAddDialogOpen&&this.toggleAddDialog(),"undo"===this.currentToastTag&&this.toggleUndoToast()),(0,l.Gg)(l.tk.editTopSite,this.isEditDialogOpen)},this.updateToastContainer=()=>{const e=this.topSitesRoot;if(!e)return!1;const t=e.getBoundingClientRect(),n=`top: ${Math.ceil(t.bottom)+window.scrollY+F.Kq}px`;return this.toastContainer.setAttribute("style",n),this.toastContainer.addEventListener("focus",this.handleToastFocus,!0),this.toastContainer.addEventListener("blur",this.handleToastBlur,!0),!0},this.handleToastFocus=e=>{this.toastContainer.contains(e.target)&&((0,Ee.uN)(this.toastExpirationTimerHost),window.addEventListener("keydown",this.handleToastKeyDown,!0))},this.handleToastBlur=e=>{this.toastContainer.contains(e.relatedTarget)||((0,Ee.lR)(this.toastExpirationTimerHost),window.removeEventListener("keydown",this.handleToastKeyDown,!0))},this.handleToastKeyDown=e=>{this.toastContainer&&"Escape"===e.key&&this.closeToast()},this.toggleUndoToast=e=>{(e||"undo"!==this.currentToastTag)&&this.toastContainer&&this.updateToastContainer()?(this.isActionMenuOpen=!1,this.undoToast=this.generateUndoToastProps(),_t.u.addElement(this.toastContainer),this.currentToastTag="undo",(0,Ee.zz)(this.toastExpirationTimerHost,this.undoToast.notificationDurationMs,this.closeToast),window.setTimeout((()=>{this.undoButton.focus()}),100)):this.closeToast(),(0,l.Gg)(l.tk.toast,"undo"===this.currentToastTag)},this.saveTopSitesTP1Data=()=>{this.dataHelper.writeTopSites(this.topSites)},this.onBreakpointCallback=e=>{this.columnArrangement=e,this.carouselColsPerSlide=F.Jz[e],this.carouselPageIndex=0,this.scrollToPosition(),this.reRenderTopsite()},this.getCurrentLayoutConfig=()=>{const e=this.chromiumPageSettingState?.selectedFeedDisplaySetting,t=this.userSelectedSetting&&"off"!==this.userSelectedSetting?this.userSelectedSetting:"onerow",n=this.tilesxColxRowsMap[t];if(!n)return _e.M0.sendAppErrorEvent({...N.A$C,message:"Can't find layout config for topsites",pb:{...N.A$C.pb,userSelectedSetting:this.userSelectedSetting,chromiumPageSettingStatePresent:!!this.chromiumPageSettingState,selectedQuickLinksDisplaySetting:this.chromiumPageSettingState?.selectedQuickLinksDisplaySetting}}),null;const i=n[this.columnArrangement];return i[e]??i.default},this.onResize=()=>{this.closeFlyouts()},this.themeChanged=e=>{this.isDarkMode=!!e?.matches}}async experienceConnected(){(0,B.Ou)().TopSitesConnected=performance?.now();const e=!f.Al.IsPrerender;if(this.wpoConfig=(0,Kt.DU)(),this.isRuby&&this.config.curatedSitesRuby&&(this.config.curatedSites=this.config.curatedSitesRuby),this.wpoConfig){const e=this.wpoConfig.recommendedSites?.filter((e=>!e.isSponsored))??[];if(this.config={...this.config,...this.wpoConfig,recommendedSites:e},_e.M0.addOrUpdateTmplProperty("wpoRecEn",this.wpoConfig.enableRecommendedSites?"1":"0"),_e.M0.addOrUpdateTmplProperty("wpoRecTtls",e?.map((e=>e.title))?.toString()||"X"),this.wpoConfig.recommendedSites?.length>0){const e=(0,Ee.$h)(this.wpoConfig.recommendedSites,this.config.curatedSites);this.config={...this.config,curatedSites:e}}}this.topSitesPromotedManager=new Gt(this.config.appearCountToHidePromoted),await this.topSitesPromotedManager.initHidePromotedSites(),e&&(this.topSites=this.dataHelper.getTopSites()),this.isTP1DataUsed=e&&this.topSites.length>0,this.isTP1DataUsed?(await this.waitForSelectedQuickLinksReady(),this.chromiumPageSettingState=(0,zt.K0)(k.RL).getCurrentState(),this.userSelectedSetting=this.chromiumPageSettingState.selectedQuickLinksDisplaySetting||this.selectedQuickLinksDisplaySetting,(0,B.Ou)().TopSitesConnectedFirstGetTopSites=performance?.now(),(0,qt.N)()&&(0,xe.eC)().then((()=>(0,O.f)(11,f.Al.IsPrerender)))):await this.subscribeToChromiumPageState(),this.columnArrangement=(0,w.Bn)().currentColumnArrangement,this.numberPromotedSites=this.config.promoteCurated;const t=(0,g.$o)().getItem(F.vX),n=Number(null==t?void 0:t);if(this.disablePromoteTopSites=!isNaN(n)&&0===n,!this.disablePromoteTopSites&&this.numberPromotedSites>n&&(this.numberPromotedSites=n),this.enableSixteenTopSites?(this.maxTiles=F.jC,this.extraAddedSitesClassName="tworows"===this.userSelectedSetting&&this.columnArrangement>="c4"?null:F.Lg.tenSites):(this.maxTiles=F.Ny,this.extraAddedSitesClassName=F.Lg.eightSites),this.config.enableOneColumn&&this.columnArrangement===b.K$.c1&&(this.extraAddedSitesClassName=F.Lg.sixSites),this.topSitesLayoutDataConnector=(0,zt.K0)(k.hz),(0,Fe.Uo)(k.hz,(e=>{this.topSitesLayoutState=e})),this.topSitesLayoutDataConnector?.updateMaxTiles?.(this.maxTiles),this.pageSettingsConnector=(0,zt.K0)(k.RL),this.isTP1DataUsed){const e=this.getCurrentLayoutConfig();e&&(this.maxTiles=e.tile,this.extraAddedSitesClassName=e.class),this.topSites.length>=this.maxTiles&&(this.topSites=this.topSites.slice(0,this.maxActualTile))}const i=window;if(i.chrome&&i.chrome.embeddedSearch&&(this.ntpApiHandle=i.chrome.embeddedSearch.newTabPage),i.chrome&&i.chrome.ntpSettingsPrivate&&(this.ntpSettingsPrivateApiHandle=i.chrome.ntpSettingsPrivate),this.ntpApiHandle&&(this.ntpApiHandle.onmostvisitedchange=this.onMostVisitedHandler),this.minimumTopSites=F.Ny-1,!(0,qt.N)()){const e=this.getCurrentLayoutConfig();return this.maxTiles=e?.tile,this.extraAddedSitesClassName=e.class,void this.getOrUpdateTopSites()}this.isTP1DataUsed?(this.currentTilesNumber=this.topSites?.length??0,this.topSitesPlaceHolders=this.getTopSitesPlaceHolders()):(this.getOrUpdateTopSites(),(0,B.Ou)().TopSitesConnectedFirstGetTopSites=performance?.now(),(0,qt.N)()&&(0,xe.eC)().then((()=>(0,O.f)(11,f.Al.IsPrerender)))),this.topSiteAddedSuccessfully=!1,(0,Re.FY)(Me._.topSites,this),this.processMinimumVisitAffiliateFeatureState(),this.isMinVisitAffiliateSitesFeatureActive&&this.persistMinVisitAffiliateInfo(),this.initCanLoadHoverElements(),this.isDarkMode=!!this.darkModeQuery?.matches,this.darkModeQuery.addEventListener("change",this.themeChanged),this.checkTopSitesIcon()}async subscribeToChromiumPageState(){const e=new C.o;(0,Fe.Uo)(k.RL,(t=>{if(!t.isLoadCompleted)return;if(e.set(),this.chromiumPageSettingState=t,t&&t.configData){if(t.configData.enabledFeatures&&(this.blockGoogleTopSitesExp=t.configData.enabledFeatures.includes("msNtpExpBlockTopSitesPromotions"),t.configData.enabledFeatures.includes("msNtpUseGoogleTopSites")))if(this.appendGoogleSitesOnNTP=!0,this.wpoConfig?.recommendedSites?.length>0&&this.config.curatedSitesEdgeExp){const e=(0,Ee.$h)(this.wpoConfig.recommendedSites,this.config.curatedSitesEdgeExp);this.config.curatedSites=e}else this.config.curatedSites=this.config.curatedSitesEdgeExp??this.config.curatedSites;this.ntpApiVersion=t.configData.apiVersion}const n=t&&t.selectedQuickLinksDisplaySetting;this.enableSixteenTopSites&&this.userSelectedSetting!==n&&(this.userSelectedSetting&&(this.userSelectedSetting=n,"tworows"===this.userSelectedSetting&&(this.maxTiles=F.jC),this.getOrUpdateTopSites()),this.userSelectedSetting=n),this.chromiumPageSettingLayoutState&&this.chromiumPageSettingLayoutState!=t&&this.reRenderTopsite(),this.chromiumPageSettingLayoutState=t,this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding&&this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding!=this.topSitesEndMarginUsedPadding&&(this.topSitesEndMarginUsedPadding=this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding),_e.M0.addOrUpdateTmplProperty("tsHideDefault",""+(t.hideDefaultTopSites?1:0)),this.config.enableOpenInNewTab&&(this.linkTarget=t.openInNewTab?"_blank":"_self"),this.isRuby&&(this.isDarkMode=(0,T.Yc)())})),window.isSSREnabled&&await e.getResultAsync()}disconnectedCallback(){super.disconnectedCallback(),this.dragDropService?.destroy(),this.dragDropService=null,window.removeEventListener("resize",this.onResize),window.removeEventListener("mouseup",this.handleClick,!1),window.removeEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),this.darkModeQuery.removeEventListener("change",this.themeChanged)}async prerenderRefreshCritical(){return this.initializeTopSitesState()}getApproxTTVRValue(e){const t=(0,B.Ou)();if(t.isSSRCompleted)return t[U.nz+(e||this.getExperienceType())]||t[U.nz+"Complete"]}async shadowDomPopulated(){if(!(0,qt.N)())return;window.addEventListener("resize",this.onResize),window.addEventListener("mouseup",this.handleClick,!1),window.addEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),n.e("experiences_top-sites-edgenext-wc_dist_TopSitesEdgeNextWC_addDialog_js-experiences_top-sites--c06b42").then(n.bind(n,8865)).then((({generateTopSiteAddDialogProps:e})=>{this.topSiteAddDialog=e(this.activeTopSiteElement,this)})),n.e("experiences_top-sites-edgenext-wc_dist_TopSitesEdgeNextWC_addDialog_js-experiences_top-sites--c06b42").then(n.bind(n,77843)).then((({generateTopSiteEditDialogProps:e})=>{this.topSiteEditDialog=e(this.activeTopSiteElement,this)})),this.config.enableCarouselTopSite&&(this.carouselProps=this.generateCarouselProps()),(0,w.Bn)().subscribe(this.onBreakpointCallback),this.topSitesContainerPromise=new Promise((e=>this.topSitesContainerPromiseResolver=e)),this.dragDropService||this.initializeDragDropService();const e=this.getOverrideIconList();if(e&&e.length>0&&e.forEach((e=>{e.identifierHosts.forEach((t=>{this.topSiteMapper.set(t,e.faviconUrl??c.Jn(e.faviconId))}))})),this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0&&(this.config.suggestedTopSiteList=((e,t)=>{if(!e)return t;for(const e of t){const t=(0,W.X)(`${le}_${de}_${se}`,{headline:Te.suggestedLink,type:H.uH.TopSites},H.wu.Save,H.c9.ActionButton,ke);e.suggestedLinkTelemetryTag=t.getMetadataTag()}return t})(this.telemetryObject,this.config.suggestedTopSiteList)),this.initializeTopSitesState(),this.isTP1DataUsed?window.requestAnimationFrame((()=>{this.markVisuallyReady(),_e.M0.observeSingleElement(this.topSitesRoot)})):window.requestAnimationFrame((()=>{window.setTimeout((()=>{this.markVisuallyReady(),_e.M0.observeSingleElement(this.topSitesRoot)}))})),this.columnArrangement=(0,w.Bn)().currentColumnArrangement,this.renderTopSiteStartAndEnd=!0,this.carouselColsPerSlide=F.Jz[this.columnArrangement],this.isTP1DataUsed){const e=this.topSites?.length??0;(0,m.C)((()=>{this.subscribeToChromiumPageState(),this.getOrUpdateTopSites();(this.topSites?.length??0)-e>1&&(0,$.H)(N.VKG,"TopSites don't get enough data from TP1",void 0,{...N.VKG.pb,tp1DataLength:this.topSites.length,maxTiles:this.maxTiles,columnArrangement:this.columnArrangement,shouldSampleErrorsForTreatement1:!0})}))}else this.reRenderTopsite();this.registerElements(),window.addEventListener("beforeunload",this.saveTopSitesTP1Data,{once:!0})}registerElements(){if((0,p.Yq)().ClarityEnabled){const e=this.shadowRoot?.getElementById?.(F.sn.topSitesId);e&&e.setAttribute("data-clarity-mask","true")}this.topSitesContainerPromiseResolver(this.topSitesContainer)}quickBriefVisibleChanged(){this.enableQuickBrief=this.quickBriefVisible,this.$fastController.isConnected&&this.reRenderTopsite(!0)}get shouldHidePlaceholders(){return this.config?.qbHideAdd&&this.quickBriefVisible}get isCopilotThemeEnabled(){return(0,y.q6)()&&this.isRuby}get maxActualTile(){return this.shouldHidePlaceholders?this.maxTiles:this.maxTiles-1}get tilesxColxRowsMap(){return this.isRuby?F.RX:this.config.enableCarouselTopSite?F.pK:this.quickBriefVisible?F.Mc:F.FQ}getExperienceType(){return P.gLP}get className(){return this.isLowEndDevice&&"informational"==this.chromiumPageSettingState?.currentLayout?this.isDarkMode?F.Lg.topSitesDark:F.Lg.topSitesLight:this.needDarkThemeIcons?F.Lg.topSitesLight:!this.chromiumPageSettingState?.imageOfTheDayEnabled&&!this.chromiumPageSettingState?.displayBackgroundImageType||this.showFullPageBlur?this.isDarkMode?F.Lg.topSitesDark:F.Lg.topSitesLight:this.isDarkMode?F.Lg.topSitesDarkOnBackgroundImage:F.Lg.topSitesLightOnBackgroundImage}get enableSixteenTopSites(){return!!this.chromiumPageSettingState?.ntpPrefOptionApiAvailability}get twoRowSitesClassName(){return this.selectedQuickLinksDisplaySetting&&"tworows"==this.selectedQuickLinksDisplaySetting?this.topSites?.length<=this.minimumTopSites?"":F.Lg.twoRowSites:""}get topSitesClassName(){return this.isInformationalLayout?"information-layout":""}get isInformationalLayout(){return!("always"!=this.chromiumPageSettingState?.selectedFeedDisplaySetting)}generateUndoTopSiteHandler(){return this.isDisableDefaultInProgress?(this.disableCurated(),void(this.isDisableDefaultInProgress=!1)):this.dragDropService&&"slot"in this.activeTopSiteItem?(this.dragDropService.addTopSite(this.activeTopSiteItem),this.toggleUndoToast(),void this.getOrUpdateTopSites()):(-6!=this.activeTopSiteItem.tileSource&&-7!=this.activeTopSiteItem.tileSource||(this.numberPromotedSites++,(0,g.$o)().setItem(F.vX,this.numberPromotedSites.toString())),(0,Ee.TP)(this.getOrUpdateTopSites,this.ntpApiHandle,this.activeTopSiteItem.rid,this.activeTopSiteItem.tileSource,this.activeTopSiteItem.url),void this.toggleUndoToast())}generateUndoToastProps(){const e=this.activeTopSiteItem.title,t=e.length>20?`${e.substring(0,20)}…`:e,n=this.strings.undoRemovedFormat;let i=(0,v.Z)(n,t);return this.isDisableDefaultInProgress&&(i=[this.strings.undoDisableDefault]),{closeButtonLabel:this.strings.closeButtonText,closeButtonTelemetryTag:this.topSiteActionTelemetryContext?.closeRemoveToast?.getMetadataTag(),closeHandler:()=>{this.closeToast()},notificationDurationMs:F.mR,removedText:i,undoButtonLabel:this.strings.undoLabelText,undoButtonTelemetryTag:this.topSiteActionTelemetryContext?.undoRemoveTopSite?.getMetadataTag(),undoTopSiteHandler:()=>{this.generateUndoTopSiteHandler()}}}generateCarouselProps(){return{preFlipperText:this.strings?.preFlipper||"Previous sites",nextFlipperText:this.strings?.nextFlipper||"Next sites",clickCarouselNextButtonTag:this.topSitesTelemetryContext?.clickCarouselNextButton?.getMetadataTag(),clickCarouselPreButtonTag:this.topSitesTelemetryContext?.clickCarouselPreButton?.getMetadataTag()}}mockTopSites(){return"1"===S.cX.getQueryParameterByName("mockTopSites",(0,jt.zp)())}getOrderedTopSites(){let e=[];if(this.mockTopSites())return F.C;if(!(0,qt.N)())return Array(this.maxActualTile).fill(F.IA).map(((e,t)=>({...e,rid:t+1})));if(e=(0,Ee.h4)(this.ntpApiHandle),(this.appendGoogleSitesOnNTP||!this.blockGoogleTopSitesExp&&this.config?.appendGoogleSites)&&(e=e.filter((e=>"www.office.com"!==e.domain))),(this.config?.appendGoogleSites||this.config?.isGoogleTopSitesCtrl)&&!this.blockGoogleTopSitesExp){0===e.filter((e=>"www.office.com"!==e.domain)).length&&(_e.M0.addOrUpdateTmplProperty("no_mv_sites","1"),(0,g.$o)().setItem("tsAlternate","1"))}if(!this.blockGoogleTopSitesExp&&this.config?.appendGoogleSites)if(this.wpoConfig?.recommendedSites?.length>0&&this.config.curatedSitesCSExp){const e=(0,Ee.$h)(this.wpoConfig.recommendedSites,this.config.curatedSitesCSExp);this.config.curatedSites=e}else this.config.curatedSites=this.config.curatedSitesCSExp??this.config.curatedSites;e=this.removeBlockedSites(e);let t=1;const n=new Map,i=new Set,r=this.numberPromotedSites;let o=r>0&&!this.disablePromoteTopSites;const a=[];this.updateAffiliateAutoAppendTileSource(e);const s=this.getCurrentLayoutConfig(),d=this.shouldHidePlaceholders?s.tile:s.tile-1,u=this.chromiumPageSettingState?.hideDefaultTopSites;let l=e.length>=d,p=!1;if(!u&&e&&this.config&&(e.length<d||o)&&this.config.curatedSites){c.j3(this.config,e),e.length+r<d&&o&&(o=!1,l=!1,p=!0);const s=e.length;s>0&&(t=e[s-1].rid+1e3);const u=c.Ej();if(u.forEach((e=>{e.isSponsored&&i.add(e.url)})),!o){const i=this.dedupeCuratedSitesByTitle(u,e).slice(0,this.maxActualTile-e.length).map((e=>(n.set(t,e),this.mapCuratedSiteToTopsites(t++,e,!1))));e.push(...i)}const h=this.dedupeCuratedSitesByTitle(u,e);h.sort(((e,t)=>(e.isSponsored=e.isSponsored??!1,t.isSponsored=t.isSponsored??!1,Number(t.isSponsored)-Number(e.isSponsored))));const g=h.slice(0,r).map((e=>(n.set(t,e),this.mapCuratedSiteToTopsites(t++,e,!0))));a.push(...g)}this.config.enableRecommendedSites&&!u&&(e=(0,Ee.HU)(this.config,this.maxTiles,e,n,a));const h=new Set([0,7,8,2,-5,-8,-4]),f=new Set([4,3]);let m=s.tile;const y=(0,qt.N)()?this.dragDropService?.getFixedTopSites?.()??[]:[];y.forEach((e=>{-8!=e.tileSource&&!e.isSponsored||i.has(e.url)||(e.isSponsored=!1,e.tileSource=-5)}));let v=y.filter((e=>e.slot<m)),S=(0,Ne.Z)(e,v,"url"),w=S.filter((e=>f.has(e.tileSource)));w.length+y.filter((e=>e.slot<s.tile)).length<s.tile&&!this.shouldHidePlaceholders&&(m=s.tile-1,v=y.filter((e=>e.slot<m)),S=(0,Ne.Z)(e,v,"url"),w=S.filter((e=>f.has(e.tileSource))));const C=v.length,T=Math.min(m-C,w.length),k=m-C-T;let P=0,A=0,I=S.reduce(((e,t)=>(h.has(t.tileSource)&&A<k&&(t.title=(0,Ee.pI)(t.title,t.domain??t.url),e.push(t),A+=1),f.has(t.tileSource)&&P<T&&(e.push(t),P+=1),e)),[]);if(p){0==I.filter((e=>-5==e.tileSource)).length&&(o=!0,l=!0)}const E=new Map;if(o&&a.length>0)for(let e=r,t=0;e>0&&t<a.length;e--,t++)E.set(d-e,a[t]);"onerow"===this.userSelectedSetting&&T>0&&(this.columnArrangement===b.K$.c1||this.columnArrangement===b.K$.c2)&&(I=this.getOneColOrTwoColTopSites(S,T,k,m,o?a:[])),e=[...(0,Oe.$)(I,v)];let R=0===T;if(R=k>=r,R&&E.size>0&&E.forEach(((t,n)=>{3!=e[n]?.tileSource&&4!=e[n]?.tileSource||(R=!1)})),o&&R&&E.size>0&&(E.forEach(((t,n)=>{this.topSitesPromotedManager.shouldHide(t.url)||(e.splice(n,0,t),e.pop())})),this.topSitesPromotedManager.saveRecordToPsl()),l&&R&&_e.M0.addOrUpdateTmplString("promotedTopSites"),this.config.enableCarouselTopSite&&o&&R&&E.size>0){const t=[-6,-7],n=e.length;for(let i=this.numberPromotedSites;i>=1;i--)t.includes(e[n-i].tileSource)&&([e[this.carouselColsPerSlide-i],e[n-i]]=[e[n-i],e[this.carouselColsPerSlide-i]])}return e}mapCuratedSiteToTopsites(e,t,n){return{rid:e,dataGenerationTime:void 0,faviconUrl:t.faviconUrl??c.Jn(t.faviconId),domain:void 0,title:t.title,tileSource:this.getTileSource(n,t.isSponsored),tileTitleSource:void 0,url:t.url,direction:t.direction,enforcement:void 0,isSponsored:t.isSponsored}}getRubyOrderedTopSites(){let e=[];if(!(0,qt.N)())return Array(this.maxActualTile).fill(F.IA).map(((e,t)=>({...e,rid:t+1})));e=(0,Ee.h4)(this.ntpApiHandle),e=this.removeBlockedSites(e);let t=1;const n=new Map;let i=this.maxTiles?this.maxTiles-1:F.Ny-1;const r=this.getCurrentLayoutConfig();i=this.shouldHidePlaceholders?r.tile:r.tile-1;const o=this.chromiumPageSettingState?.hideDefaultTopSites;if(!o&&e&&this.config&&e.length<i&&this.config.curatedSites){c.j3(this.config,e);const i=e.length;i>0&&(t=e[i-1].rid+1e3);const r=c.Ej().map((e=>(n.set(t,e),{rid:t++,dataGenerationTime:void 0,faviconUrl:e.faviconUrl??c.Jn(e.faviconId),domain:void 0,title:e.title,tileSource:this.getTileSource(!1,e.isSponsored),tileTitleSource:void 0,url:e.url,direction:e.direction,enforcement:void 0,isSponsored:e.isSponsored})));e.push(...r)}const a=new Set([0,7,8,2,-5,-8,-4]),s=new Set([4,3]);let d=r.tile;const u=(0,qt.N)()?this.dragDropService?.getFixedTopSites?.()??[]:[];u.forEach((e=>{(-8==e.tileSource||e.isSponsored)&&(e.isSponsored=!1,e.tileSource=-5)}));let l=u.filter((e=>e.slot<d)),p=(0,Ne.Z)(e,l,"url"),h=p.filter((e=>s.has(e.tileSource)));h.length+u.filter((e=>e.slot<r.tile)).length<r.tile&&!this.shouldHidePlaceholders&&(d=r.tile-1,l=u.filter((e=>e.slot<d)),p=(0,Ne.Z)(e,l,"url"),h=p.filter((e=>s.has(e.tileSource))));const g=l.length,f=Math.min(d-g,h.length),m=d-g-f;let y=0,v=0,S=p.reduce(((e,t)=>(a.has(t.tileSource)&&v<m&&(t.title=(0,Ee.pI)(t.title,t.domain??t.url),e.push(t),v+=1),s.has(t.tileSource)&&y<f&&(e.push(t),y+=1),e)),[]);return"onerow"===this.userSelectedSetting&&f>0&&(this.columnArrangement===b.K$.c1||this.columnArrangement===b.K$.c2)&&(S=this.getOneColOrTwoColTopSites(p,f,m,d,[])),e=[...(0,Oe.$)(S,l)],e}getOneColOrTwoColTopSites(e,t,n,i,r){const o=new Set([-5,-4,0,7,8,2]),a=new Set([-8,-7]),s=new Set([4,3]);let c=[];const d=[],u=[];let l=[],p=0;for(const n of e)a.has(n.tileSource)?l.push(n):o.has(n.tileSource)?d.push(n):s.has(n.tileSource)&&p<t&&(u.push(n),p+=1);this.columnArrangement===b.K$.c1&&l.length<1?l=r.slice(0,1):this.columnArrangement===b.K$.c2&&l.length<2&&(l=r.length>l.length?r.slice(0,2):l);const h=l.length+d.length-n;h>0&&d.splice(0,h);const g=d.slice(0,i-(u.length+l.length));return c=[...u,...l,...g],c}getTopSites(){const e=this.isRuby?this.getRubyOrderedTopSites():this.getOrderedTopSites();if(!e?.length)return this.userSelectedSetting&&"off"==this.userSelectedSetting||this.zeroTopSitesErrorHandler(),[];const t=[],n=this.maxActualTile;return e.forEach(((e,i)=>{if(n<i)return;if(this.config.overrideIconsList?.length>0&&this.topSiteMapper.size>0)if(this.topSiteMapper.get(e.url))e.faviconUrl=this.topSiteMapper.get(e.url);else{const t=(0,Ee.Qf)(e.url);this.topSiteMapper.get(t)&&(e.faviconUrl=this.topSiteMapper.get(t))}F.dz&&F.dz[e.url]&&(e.faviconUrl=c.Jn(F.dz[e.url])),F.K4&&F.K4[e.url]&&(e.title=F.K4[e.url]);const r=new Nt.D(e.url),{topSitesAffiliates:o,affiliateLinkOverrides:a}=this.config;o&&o[r.domainPathAndQuery]&&"/"!==o[r.domainPathAndQuery]&&2===e.tileSource&&F.jS.test(o[r.domainPathAndQuery])&&(e.url=e.url.replace(/\/$/,"")+o[r.domainPathAndQuery]),a&&this.handleAffiliateOverrides(r,e);const s={...e,adLabelType:this.config.adLabelType},d=this.userSelectedSetting?this.tilesxColxRowsMap[this.userSelectedSetting]?.[this.columnArrangement]?.default?.maxRowTileCount:null,u=((e,t,n,i)=>{if(!e)return;const{tileSourcePrefix:r,isCuratedOrPromoted:o}=Pe(t),a=H.uH.TopSites;let s=Te.tsn,c=ke;o&&(s=t.title,c=t.url);const d=i?Math.floor(n/i)+1:null,u=i?n%i+1:null;return{topSiteTile:(0,W.c)(`${r}_${X}`,{headline:s,type:a},H.wu.View,H.Aw.View,{overrideDestinationUrl:c,ext:{hl:s,row:d,col:u}}),destination:(0,W.c)(`${r}_${Y}${"https://www.bing.com/work"===t.url?">top-sites-bookmarks-tile-click":""}`,{headline:s,type:a},H.wu.Navigate,H.Aw.Click,{overrideDestinationUrl:c}),moreOption:(0,W.c)(`${r}_${Z}`,{headline:`${Te.moreOption}_${s}`,type:a},H.wu.More,{overrideDestinationUrl:c}),unpin:(0,W.c)(`${r}_${fe}`,{headline:`${Te.unpin}_${s}`,type:a},H.wu.Unpin,{overrideDestinationUrl:c}),pin:(0,W.c)(`${r}_${me}`,{headline:`${Te.pin}_${s}`,type:a},H.wu.Pin,{overrideDestinationUrl:c})}})(this.telemetryObject,s,i,d);let l=(-6===s.tileSource||-7===s.tileSource)&&u&&u.unpin&&u.unpin.getMetadataTag();1===s.dragDropType&&(l=u&&u.pin&&u.pin.getMetadataTag()),t.push({...s,contextMenuLabel:this.strings.contextMenuLabel,contentViewTelemetryTag:u&&u.topSiteTile&&u.topSiteTile.getMetadataTag(),anchorTelemetryTag:u&&u.destination&&u.destination.getMetadataTag(),toggleActionMenuButtonTelemetryTag:u&&u.moreOption&&u.moreOption.getMetadataTag(),promote:1===s.dragDropType,pinLabel:1===s.dragDropType?this.strings.unpinSite:this.strings.pinSite,pinActionButtonTelemetryTag:l})})),t}handleAffiliateOverrides(e,t){const n=this.config.affiliateLinkOverrides;0===t.tileSource&&n[e.domainAndPath]&&"/"!==n[e.domainAndPath]&&this.config.enableAffiliateOverride&&!e.hasQuery&&(t.url=n[e.domain],t.tileSource=2,t.isSponsored=!0,_e.M0.addOrUpdateTmplProperty("tsaffov","4"))}getTopSitesPlaceHolders(){const e=[];if(this.currentTilesNumber<this.maxTiles&&(e.push({addTileSupported:!0,onAddTopSiteClick:this.toggleAddDialog,addTileLabel:this.strings.addTileLabel,ariaLabel:this.strings.ariaLabel_addTile,addTopSiteButtonTelemetryTag:this.topSitesTelemetryContext?.topSitePlaceHolderAddSite?.getMetadataTag()}),this.currentTilesNumber++),this.topSitesLayoutDataConnector){let e=0;if("onerow"==this.selectedQuickLinksDisplaySetting||"tworows"==this.selectedQuickLinksDisplaySetting){const t=this.tilesxColxRowsMap[this.selectedQuickLinksDisplaySetting][this.columnArrangement]?.default?.maxRowTileCount;t&&(e=this.currentTilesNumber>t?2:1)}else"off"==this.selectedQuickLinksDisplaySetting&&(e=0);e!==this.topSitesLayoutState.actualRowCount&&this.topSitesLayoutDataConnector?.updateActualRowCount(e)}return e}disableCurated(){this.isDisableDefaultInProgress=!0;const e=this.chromiumPageSettingState,t={hideDefaultTopSites:!e.hideDefaultTopSites,currentBackgroundImageType:e.currentBackgroundImageType,originalLayout:e.currentLayout,currentLayout:"custom",greetingEnabled:e.greetingEnabled,imageOfTheDayEnabled:e.imageOfTheDayEnabled,selectedQuickLinksDisplaySetting:e.selectedQuickLinksDisplaySetting,selectedFeedDisplaySetting:e.selectedFeedDisplaySetting};this.pageSettingsConnector&&(this.pageSettingsConnector.updateLayout(t),this.getOrUpdateTopSites(),this.toggleUndoToast(),this.isDisableDefaultInProgress=!1,(0,Le.ih)(P.gLP))}getAddShortcutTitle(){return this.isRuby?this.strings?.rubyAddText??"New":this.strings?.addShortcutTitle?this.strings.addShortcutTitle:"Add shortcut"}async waitForSelectedQuickLinksReady(){const e=new C.o,t=n=>{n.isLoadCompleted&&n.selectedQuickLinksDisplaySetting&&((0,Fe.q1)(k.RL,t),e.set())};(0,Fe.Uo)(k.RL,t),await e.getResultAsync()}initializeTopSitesState(){this.sitesClassName="expanded-sites",this.topSitesTelemetryContext=(e=>{if(!e)return;const t=H.uH.TopSites;return{topSitePlaceHolderAddSite:(0,W.c)(ue,{headline:Te.addSite,type:t},H.wu.Add,{overrideDestinationUrl:ke}),topSiteCommon:(0,W.c)(`${le}`,{headline:Te.container,type:t},H.wu.View,{overrideDestinationUrl:ke}),saveAdd:(0,W.c)(`${le}_${de}_${ae}`,{headline:Te.add,type:t},H.wu.Save,{overrideDestinationUrl:ke}),cancelAdd:(0,W.c)(`${le}_${de}_${re}`,{headline:Te.cancel,type:t},H.wu.Cancel,{overrideDestinationUrl:ke}),closeAddDialog:(0,W.c)(`${le}_${de}_${ie}`,{headline:Te.close,type:t},H.wu.Close,{overrideDestinationUrl:ke}),clickCarouselNextButton:(0,W.c)(`${le}_${ve}_${Se}`,{headline:Te.carouselClick,type:t},H.wu.Click,{overrideDestinationUrl:ke}),clickCarouselPreButton:(0,W.c)(`${le}_${ve}_${we}`,{headline:Te.carouselClick,type:t},H.wu.Click,{overrideDestinationUrl:ke}),clickAddNameInput:(0,W.c)(`${le}_${de}_${be}`,{headline:Te.inputName,type:t},H.wu.Click,{overrideDestinationUrl:ke}),clickAddUrlInput:(0,W.c)(`${le}_${de}_${Ce}`,{headline:Te.inputUrl,type:t},H.wu.Click,{overrideDestinationUrl:ke})}})(this.telemetryObject),this.topSiteActionTelemetryContext=(e=>{if(!e)return;const t=H.uH.TopSites;return{removeTopSite:(0,W.c)(`${te}`,{headline:`${Te.remove} ${Te.tsn}`,type:t},H.wu.Remove,{overrideDestinationUrl:ke}),undoRemoveTopSite:(0,W.c)(`${ee}_${ne}`,{headline:`${Te.undoRemove} ${Te.tsn}`,type:t},H.wu.UndoRemove,{overrideDestinationUrl:ke}),closeRemoveToast:(0,W.c)(`${ee}_${ie}`,{headline:Te.close,type:t},H.wu.Close,{overrideDestinationUrl:ke}),editDialog:(0,W.c)(`${le}_${oe}`,{headline:`${Te.rename} ${Te.tsn}`,type:t},H.wu.Rename,{overrideDestinationUrl:ke}),closeEditDialog:(0,W.c)(`${le}_${ce}_${ie}`,{headline:Te.close,type:t},H.wu.Close,{overrideDestinationUrl:ke}),saveEdit:(0,W.c)(`${le}_${ce}_${ae}`,{headline:Te.save,type:t},H.wu.Save,{overrideDestinationUrl:ke}),cancelEdit:(0,W.c)(`${le}_${ce}_${re}`,{headline:Te.cancel,type:t},H.wu.Cancel,{overrideDestinationUrl:ke}),turnOnPreview:(0,W.c)(`${le}_${pe}`,{headline:Te.turnOnPreview,type:t},H.wu.TurnOn,{overrideDestinationUrl:ke}),turnOffPreview:(0,W.c)(`${le}_${he}`,{headline:Te.turnOffPreview,type:t},H.wu.TurnOff,{overrideDestinationUrl:ke}),pinningTopSite:(0,W.c)(`${le}_${ge}`,{headline:Te.topsiteTaskbarpin,type:t},H.wu.Pin,{overrideDestinationUrl:ke}),pinningTopSiteInQuickLinks:(0,W.c)(`${le}_${me}`,{headline:Te.pin,type:t},H.wu.Pin,{overrideDestinationUrl:ke}),clickEditNameInput:(0,W.c)(`${le}_${be}`,{headline:Te.inputName,type:t},H.wu.Click,H.Aw.Click,{overrideDestinationUrl:ke})}})(this.telemetryObject),this.topSiteCommonTelemetryTag=this.topSitesTelemetryContext?.topSiteCommon?.getMetadataTag()}ShowPinningWizardCampaign(){_.MN.notifyTriggerEvent(_.j0.NTP_TOP_SITES_CLICK).then((e=>{e&&!e.success&&(0,$.H)(N.Qc1,"TopSitesEdgeNextWC: "+e.Message)})).catch((e=>{(0,$.OO)(e,N.Qc1,"TopSitesEdgeNextWC: Failed to call window.chrome.edgeNurturingPrivate.NotifyTriggerEvent chromium API")}))}reRenderTopsite(e=!1){const t=this.getCurrentLayoutConfig();this.maxTiles=t.tile,this.extraAddedSitesClassName=t.class,e?this.getOrUpdateTopSites():this.renderTopsite()}renderTopsite(){window.requestAnimationFrame((()=>{window.setTimeout((()=>{this.getOrUpdateTopSites()}),0)}))}zeroTopSitesErrorHandler(){(0,$.H)(N.xKE,"Zero top sites returned",void 0,{shouldSampleErrorsForTreatement1:!0})}initializeDragDropService(){this.dragDropService=new Ot(this,{container:this.topSitesContainerPromise,disableDragDrop:!this.config.draggable}),this.dragDropService.initializeService()}shouldDropTopSite(e){const t=0==e.url.indexOf("http://")?e.url.replace("http://","https://"):e.url,n=this.config.blockedDomains||F.$c;if(n)for(let e=0;e<n.length;e++){const i=n[e];if(t.startsWith(i.url)&&(!i.exc||!i.exc.find((e=>t.includes(e)))))return!0}return!1}removeBlockedSites(e){return e?e.filter((e=>{if(0==e.tileSource){if(this.shouldDropTopSite(e))return _e.M0.addOrUpdateTmplProperty("RemSE","1"),!1;if(this.config.enableAffiliateOverride&&this.config.affiliateLinkOverrides)return!Object.values(this.config.affiliateLinkOverrides).includes(e.url)}return!0})):null}getTileSource(e,t){return e?t?-7:-6:t?-8:-5}updateAffiliateAutoAppendTileSource(e){const{topSitesAffiliates:t}=this.config;e.forEach((e=>{const n=new Nt.D(e.url);t[n.domain]&&"/"!==t[n.domain]&&0==e.tileSource&&(e.tileSource=2,e.isSponsored=!0)}))}getOverrideIconList(){const e=[];for(const t of this.config?.overrideIconsList)e.push(t);return(this.config?.curatedSites?.filter((e=>e.isSponsored)).map((e=>({faviconUrl:e.faviconUrl,faviconId:e.faviconId,identifierHosts:[e.url]})))??[]).concat(e)}focusedAndNotAlways(){const{selectedFeedDisplaySetting:e,currentBackgroundImageType:t}=this.chromiumPageSettingState;return["peek","headingsonly","off"].includes(e)&&"off"===t}topsiteItemContainerTelemetry(){if(this.isActionMenuOpen&&this.activeTopSiteItem)return this.activeTopSiteItem.anchorTelemetryTag}actionsMenuTelemetry(){if(this.isActionMenuOpen&&this.activeTopSiteItem){const e=this.topSites.findIndex((e=>e.url===this.activeTopSiteItem.url));if(e>=0)return function(e,t){return(0,W.c)(`${ye}_${t}`,{headline:Te.ActionMenu,type:H.uH.TopSites},H.wu.Show,{overrideDestinationUrl:ke})}(this.telemetryObject,e+1).getMetadataTag()}}preventClickOnTopSite(e){e?.preventDefault()}getTopSiteTemplateUrl(e){return e.url}processMinimumVisitAffiliateFeatureState(){if(!this.pageSettingsConnector||!this.chromiumPageSettingState)return;const e=this.pageSettingsConnector.isMinimumVisitAffiliateSitesPreferenceAvailable(),t=this.chromiumPageSettingState.configData?.enabledFeatures?.includes("msAffiliateSitesMinVisitCountReduction");this.isMinVisitAffiliateSitesFeatureActive=e&&t}persistMinVisitAffiliateInfo(){const e=[];let t=!1;this.config?.topSitesAffiliates&&(t=!0,this.parseAffiliateSites(e,"autoAppend")),this.config?.enableAffiliateOverride&&this.config?.affiliateLinkOverrides&&(t=!0,this.parseAffiliateSites(e,"override")),t&&this.ntpSettingsPrivateApiHandle?.setPref&&this.ntpSettingsPrivateApiHandle.setPref(d._9.minVisitAffiliateSites,e)}parseAffiliateSites(e,t){const{affiliateLinkOverrides:n,topSitesAffiliates:i}=this.config,r="override"===t?n:i;Object.entries(r).forEach((n=>{if(!n[0]||!n[1]||"/"===n[1])return;const i={domainAndMaybePath:"https://"+n[0]+"/",url:"override"===t?n[1]:"https://"+n[0]+n[1]};e.push(i)}))}scrollToPosition(){this.ref_stripe?.scrollToPosition(this.scrollDirection*this.widthPerPage*this.carouselPageIndex)}onFlipperClick(e){const t=this.carouselPageIndex+(e?this.carouselColsPerSlide:-this.carouselColsPerSlide);this.carouselPageIndex=Math.max(0,t),this.scrollToPosition()}initCanLoadHoverElements(){this.config.enableElementsLazyLoad||(this.canLoadHoverElements=!0)}handleTopSiteMouseEnter(){this.canLoadHoverElements||=!0}handleTopSiteLinkFocus(){this.canLoadHoverElements||=!0}logTileActivatedClick(e){const t=window?.chrome?.ntpSettingsPrivate?.logTopSitesTileActivated,n=window?.chrome?.ntpSettingsPrivate?.TopSitesTileSource;if(t&&n){let i=n.OTHER;0===e.tileSource||2===e.tileSource?i=n.MOST_VISITED:3===e.tileSource?i=n.CUSTOM_LINK:7===e.tileSource&&n.NEXT_SITES?i=n.NEXT_SITES:8===e.tileSource&&n.PROMOTED_MEDIA_SITES&&(i=n.PROMOTED_MEDIA_SITES);const r=this.topSites.indexOf(e);if(-1!==r)if(isNaN(this.ntpApiVersion)||this.ntpApiVersion<1)t(i,r);else{t(i,r,this.topSites.filter((t=>t.tileSource===e.tileSource)).indexOf(e),e.url)}}return!0}dedupeCuratedSitesByTitle(e,t){const n=t.map((e=>e.title?.toLocaleLowerCase())),i=e.filter((e=>!n.includes(e.title?.toLocaleLowerCase())));return _e.M0.addOrUpdateTmplProperty("tsDedupeCount",String(e.length-i.length)),i}checkTopSitesIcon(){window.setTimeout((()=>{const e=this.isRuby?this.shadowRoot?.querySelectorAll?.(".top-site-ruby"):this.shadowRoot?.querySelectorAll?.(".top-site-next"),t=Array.from(e).map(((e,t)=>{const n=this.isRuby?e.getAttribute("aria-label"):e.getAttribute("title"),i=e.querySelector(".image-container img");return{title:n,src:i?i.getAttribute("src"):"",index:t}})).filter((e=>!!e.title)).map((({title:e,src:t,index:n})=>{const i=this.topSites.find((t=>t.title===e));if(i)return i.faviconUrl===t?null:{...i,index:n}})).filter((e=>!!e));if(t.length){const e=t.reduce(((e,t)=>`${e}|${t.rid}_${t.index}`),`count_${t.length}`);_e.M0.addOrUpdateTmplProperty("tsIconMismatch",e)}}),3e3)}}(0,s.gn)([Ae.LO],Qt.prototype,"isLowEndDevice",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"linkTarget",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"ref_stripe",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"enableQuickBrief",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"carouselProps",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"isDarkMode",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"isRuby",void 0),(0,s.gn)([(0,Ie.Lj)({mode:"boolean"})],Qt.prototype,"quickBriefVisible",void 0),(0,s.gn)([Ae.lk],Qt.prototype,"shouldHidePlaceholders",null),(0,s.gn)([Ae.lk],Qt.prototype,"isCopilotThemeEnabled",null),(0,s.gn)([Ae.LO],Qt.prototype,"actionsMenuProps",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"activeTopSiteItem",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"activeTopSiteElement",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"activeContextMenuButtonElement",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"maxTiles",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"chromiumPageSettingState",void 0),(0,s.gn)([(0,Ie.Lj)({mode:"boolean"})],Qt.prototype,"needDarkThemeIcons",void 0),(0,s.gn)([Ae.lk],Qt.prototype,"className",null),(0,s.gn)([Ae.LO],Qt.prototype,"extraAddedSitesClassName",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"currentTilesNumber",void 0),(0,s.gn)([(0,Ie.Lj)({mode:"boolean"})],Qt.prototype,"showFullPageBlur",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"userSelectedSetting",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"isAddDialogOpen",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"isActionMenuOpen",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"isEditDialogOpen",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"isUndoToastOpen",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"isPinToastOpen",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"isLtr",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"ntpApiHandle",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"sitesClassName",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"topSiteAddDialog",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"topSiteEditDialog",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"topSiteMapper",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"topSites",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"topSitesPlaceHolders",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"currentToastTag",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"undoToast",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"pinToast",void 0),(0,s.gn)([Ie.Lj],Qt.prototype,"selectedQuickLinksDisplaySetting",void 0),(0,s.gn)([(0,Ie.Lj)({mode:"boolean"})],Qt.prototype,"quickLinksToggleSpacingForBanner",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"moveUpward",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"topSiteAddedSuccessfully",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"lastAddedTopSite",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"topSiteAddDialogContainerPosition",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"topSiteEditDialogContainerPosition",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"topSiteCommonTelemetryTag",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"renderTopSiteStartAndEnd",void 0),(0,s.gn)([Ae.LO],Qt.prototype,"canLoadHoverElements",void 0),(0,s.gn)([Ae.lk],Qt.prototype,"topSitesClassName",null),(0,s.gn)([Ae.lk],Qt.prototype,"isInformationalLayout",null);var Jt=n(65517),Xt=n(97186),Yt=n(2696),Zt=n(33442),en=n(92531),tn=n(26512),nn=n(35680),rn=n(17993),on=n(42689),an=n(27460),sn=n(22674),cn=n(80260),dn=n(27782),un=n(38492),ln=n(26738),pn=n(80303),hn=n(78923),gn=n(42821),fn=n(18833),mn=n(22798),yn=n(81239);const vn="40px",Sn=hn.i` .ruby-top-sites{.top-site-ruby{border-radius:20px;background:rgba(242,236,232,0.6);border-color:rgba(255,255,255,1)}}@media (prefers-color-scheme:dark){.ruby-top-sites{.top-site-ruby{background:rgba(29,33,47,0.6);border-color:rgba(69,81,114,0.25)}}}`,wn=hn.i` .ruby-top-sites{.top-sites{--top-site-column-gap:40px;--top-site-pill-width:50px}.top-site-ruby{padding:${gn.Wc8};border-radius:${gn.gi8};border:${gn.L$O} solid ${gn.AkU};.site-name{bottom:calc(-14px - ${gn.f_1})}.control{border-radius:${gn.liq}}}`.withBehaviors(new fn.w(Sn)),bn=hn.i` .ruby-top-sites{margin-bottom:${vn};.top-sites{--top-site-column-gap:24px;--top-site-pill-width:48px}.top-site-ruby{display:block;cursor:pointer;width:var(--top-site-pill-width,48px);height:var(--top-site-pill-width,48px);border-radius:${gn.uPz};border:${gn.L$O} solid ${gn.pZi};background:${gn.iZy};display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;box-sizing:border-box;.image-container{display:flex;align-items:center;justify-content:center;width:24px;height:24px;img{width:100%}svg path{fill:${gn.sT8}}}.control{color:${gn.sT8};box-sizing:content-box;font-family:inherit;font-size:12px;font-weight:400;line-height:16px;white-space:nowrap;overflow:hidden;padding:0;text-overflow:ellipsis;text-decoration:none;height:24px;width:24px}.start{position:absolute;top:2px;right:10px;width:15px;height:15px;opacity:0}.end{position:absolute;top:-10px;right:-11px;width:13px;height:13px;opacity:0}& .control:after{bottom:0;content:"";height:calc(100% + 24px);left:0;position:absolute;right:0;top:0;width:100%;z-index:2}.site-name{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:64px;width:auto;background-color:transparent;color:${gn.sT8};text-align:center;border-radius:6px;padding:0px 6px;position:absolute;z-index:1;bottom:-24px;left:50%;transform:translateX(-50%);white-space:nowrap;font-weight:${gn.FdD};font-size:${gn.jlV};line-height:${gn.jpO}}}.top-site-ruby .top-site-title span{display:inline-block;max-width:64px;overflow:hidden;text-overflow:ellipsis}.top-site-ruby:active .start,.top-site-ruby:active .end,.top-site-ruby:focus .start,.top-site-ruby:focus .end,.top-site-ruby:hover .start,.top-site-ruby:hover .end,.top-site-ruby:hover fluent-button,.top-site-ruby .start:active,.top-site-ruby .end:active,.top-site-ruby .start:focus-within,.top-site-ruby .end:focus-within{background:transparent;opacity:1;outline:none}.start-button svg path,.end-button svg path{fill:${gn.sT8}}}.ruby-top-sites-dialog{--top-site-dialog-width:357px;--top-site-dialog-button-width:65px;--top-site-dialog-margin-top:-${vn};--control-corner-radius:12;--neutral-fill-rest:rgba(246,249,252,1);--neutral-foreground-rest:#262626;--neutral-layer-floating:#ffffff}fluent-button.toast-navigation-button::part(control):focus-visible{box-shadow:none}fluent-button.toast-navigation-button::part(content):focus-visible::before{height:0}#topSiteEditDialog.ruby-top-sites-dialog{--top-site-dialog-height:192px}#topSiteAddDialog.ruby-top-sites-dialog{--top-site-black-plate-width:40px;--top-site-black-plate-height:40px}.suggestion-body.kumo{.top-site-next{width:84px;height:max-content;box-shadow:none;box-sizing:border-box;cursor:pointer}.content-container{width:84px;height:84px;border:1px solid #DADEE5;border-radius:8px;justify-content:center}.top-site-title{width:84px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}.suggestion-body.kumo .top-site-next:hover{background:unset}@media (prefers-color-scheme:dark){.ruby-top-sites-dialog{--neutral-fill-rest:#363636;--neutral-foreground-rest:#f5f5f5;--neutral-layer-floating:#242424}}@media (forced-colors:active){fluent-button.toast-navigation-button::part(control),fluent-button.toast-close-button::part(control){border-width:1px;box-shadow:none}fluent-button.toast-close-button::part(control):focus-visible,fluent-button.toast-close-button::part(control):active,fluent-button.toast-close-button::part(control):hover,fluent-button.toast-navigation-button::part(control):focus-visible,fluent-button.toast-navigation-button::part(control):active,fluent-button.toast-navigation-button::part(control):hover{forced-color-adjust:none;background-color:${mn.H.Highlight};border-color:${mn.H.ButtonText};color:${mn.H.HighlightText}}}`.withBehaviors(new yn.w("isCopilotThemeEnabled",!0,wn));var Cn=n(80986);const Tn=e=>{const{r:t,g:n,b:i}=(0,Xt.lu)((0,T.Yc)()?Jt.Ve:Jt.dw);return new Yt.h(t,n,i,e).toStringWebRGBA()},kn=hn.i` .top-sites-responsive-pin-icon{flex-shrink:0;display:none;margin:0 5px}.top-sites .top-sites-responsive-pin-icon{line-height:26px}.top-sites .top-sites-responsive-pin-icon svg{width:14px;height:14px}`,Pn=hn.i` .top-site-next{background-color:transparent;border-radius:4px;box-shadow:none;display:flex;height:var(--top-site-height,84px);justify-content:center;width:var(--top-site-width,108px);position:relative;border:calc(${tn.H} * 1px) solid transparent}.top-site-next:hover{background:var(--top-site-fill-hover,${nn.Xi})}.top-site-next.top-site-f3v1b:hover{background:unset}.top-site-next:has(.control:focus){outline:none;border-color:${rn.yG}}.top-site-next .control:focus{outline:none;border:none}.top-site-next .start,.top-site-next .end{position:absolute;top:var(--top-site-margin,9px);z-index:${(Cn.K.Default+2).toString()};opacity:0}.top-site-next.small-top-sites.top-site-f3v1b .start{top:var(--top-site-action-top-position);left:var(--top-site-action-border-position)}.top-site-next.small-top-sites.top-site-f3v1b .end{top:var(--top-site-action-top-position);right:var(--top-site-action-border-position)}.top-site-next .pinned-top-site .start{pointer-events:none}.top-site-next:active .start,.top-site-next:active .end,.top-site-next:focus .start,.top-site-next:focus .end,.top-site-next:hover .start,.top-site-next:hover .end,.top-site-next:hover fluent-button,.top-site-next .start:active,.top-site-next .end:active,.top-site-next .start:focus-within,.top-site-next .end:focus-within{background:transparent;opacity:1;outline:none}.top-site-next .content-container{transition:all 0.2s ease-in-out;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;width:100%;height:100%;padding:10px 12px;border-radius:4px}.top-site-next .content-container.information-layout{padding:8px 10px;justify-content:center}.top-site-next .image{align-items:center;box-sizing:border-box;width:var(--top-site-black-plate-width,44px);height:var(--top-site-black-plate-height,44px);justify-content:center;display:flex}.top-site-next .image img{margin:0 auto;max-width:24px;height:24px}.top-site-next .title-container{display:flex;justify-content:center;margin:2px 0 0 0;width:100%}.top-site-next .control{box-sizing:content-box;color:var(--top-site-color,${on.C});font-family:inherit;font-size:12px;font-weight:400;line-height:16px;max-height:16px;max-width:100%;white-space:nowrap;overflow:hidden;padding:0;text-overflow:ellipsis;text-decoration:none}.top-site-next .control:after{bottom:0;content:"";height:100%;left:0;position:absolute;right:0;top:0;width:100%;z-index:1}.top-site-next .top-site-next-g{display:grid;gap:5px;align-items:center;grid-auto-flow:column}.top-site-next .pinned-container{display:flex;width:0;margin-inline-end:2px;flex-direction:row-reverse}.top-site-next .pinned-indicator{height:12px;width:12px;align-self:center;display:flex}.top-site-next .pinned-indicator-svg svg{width:12px;height:12px}.ad-link-label{z-index:2}.top-site-next.tstb-80{.image,.image.new-add-image{background:${Tn(.8)}}&:hover{.image,.image.new-add-image{background:${an.s}}}}.top-site-next.tstb-60{.image,.image.new-add-image{background:${Tn(.6)}}&:hover{.image,.image.new-add-image{background:${an.s}}}}.top-site-next.tstb-40{.image,.image.new-add-image{background:${Tn(.4)}}&:hover{.image,.image.new-add-image{background:${an.s}}}}.top-site-next.tscsi{.image{border-radius:50%}}`,An=hn.i`
${(0,b.vW)(b.K$.c3,null)}{.move-upward.six-sites{--top-sites-grid-template-column:6}}${(0,b.vW)(b.K$.c3,null)}{.move-upward.nine-sites{--top-sites-grid-template-column:9}}.${F.Lg.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:4}${(0,b.vW)(b.K$.c2,null)}{.${F.Lg.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:6}}${(0,b.vW)(b.K$.c3,null)}{.${F.Lg.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:7}}${(0,b.vW)(b.K$.c4,null)}{.${F.Lg.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:10}}.${F.Lg.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:4}${(0,b.vW)(b.K$.c2,null)}{.${F.Lg.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:5}}${(0,b.vW)(b.K$.c3,null)}{.${F.Lg.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:3}}${(0,b.vW)(b.K$.c4,null)}{.${F.Lg.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:6}}.${F.Lg.rubySites}{--top-sites-grid-template-column:4}${(0,b.vW)(b.K$.c2,null)}{.${F.Lg.rubySites}{--top-sites-grid-template-column:5}}${(0,b.vW)(b.K$.c3,null)}{.${F.Lg.rubySites}{--top-sites-grid-template-column:6}}${(0,b.vW)(b.K$.c4,null)}{.${F.Lg.rubySites}{--top-sites-grid-template-column:8}}`,In=hn.i``,En=hn.i`
msft-stripe .pre-fliper{position:absolute;left:-12px;top:calc(50% - 54px/2 - 1.5px);transform:rotate(0deg)}msft-stripe .next-fliper{position:absolute;right:80px;top:calc(50% - 54px/2 - 1.5px);transform:rotate(180deg)}`,Rn=hn.i` msft-stripe .fliper{background:#3b3b3b;fill:#fff}msft-stripe .fliper:hover{background:#383838}msn-actions-menu::part(icon){filter:invert(1)}`,Mn=hn.i` .all-one-line-sites{padding:0 24px}.all-one-line-sites .top-sites{--top-site-column-gap:13px}msft-stripe{margin-right:11px;--scroll-fade-next:none;--scroll-fade-previous:none}msft-stripe.strip-with-quick-brief{padding-right:15px}msft-stripe .fliper{display:flex;align-items:center;justify-content:center;background-color:white;width:24px;height:40px;border-radius:4px;cursor:pointer;box-shadow:0px 0px 2px 0px rgba(0,0,0,0.12),0px 2px 4px 0px rgba(0,0,0,0.14)}msft-stripe .fliper svg{width:20px;height:20px}msft-stripe .pre-fliper{position:absolute;left:-33px;padding-left:16px;top:calc(50% - 54px/2 - 1.5px);transform:rotate(180deg);opacity:0;transition:all .5s}.all-one-line-sites:hover msft-stripe .pre-fliper{opacity:1}msft-stripe .next-fliper{position:absolute;right:-125px;padding-left:16px;top:calc(50% - 54px/2 - 1.5px);opacity:0;transition:all .5s}.all-one-line-sites:hover msft-stripe .next-fliper{display:block;opacity:1}msft-stripe.strip-with-opacity-flipper .pre-fliper,msft-stripe.strip-with-opacity-flipper .next-fliper{display:block;opacity:0.5}msft-stripe::part(scroll-prev),msft-stripe::part(scroll-next){z-index:99}msft-stripe::part(heading-container){margin:0}msft-stripe::part(scroll-view){max-width:181px}${(0,b.eH)(b.K$.c1)}{msft-stripe::part(scroll-view){max-width:181px}}${(0,b.eH)(b.K$.c2)}{msft-stripe::part(scroll-view){max-width:271px}}${(0,b.eH)(b.K$.c3)}{msft-stripe::part(scroll-view){max-width:365px}}${(0,b.eH)(b.K$.c4)}{msft-stripe::part(scroll-view){max-width:641px}}${(0,b.eH)(b.K$.c5)}{msft-stripe::part(scroll-view){max-width:641px}}.${F.Lg.carouselSites}{--top-sites-grid-template-column:20}${(0,b.vW)(b.K$.c1,null)}{.${F.Lg.carouselSites}{--top-sites-grid-template-column:20}}${(0,b.vW)(b.K$.c2,null)}{.${F.Lg.carouselSites}{--top-sites-grid-template-column:20}}${(0,b.vW)(b.K$.c3,null)}{.${F.Lg.carouselSites}{--top-sites-grid-template-column:20}}${(0,b.vW)(b.K$.c4,null)}{.${F.Lg.carouselSites}{--top-sites-grid-template-column:20}}`.withBehaviors(new sn.O(In,En),new pn.Y(null,Rn)),xn=hn.i` :host{width:100%;--menu-max-width:210px;--menu-min-width:160px;--top-site-dialog-z-index:900}.long-width-menu{--menu-max-width:360px}.ruby-long-width-menu{--menu-max-width:360px;--menu-min-width:246px;--control-corner-radius:12}.ruby-long-width-menu::part(menu){--fill-color:#ffffff}msn-actions-menu::part(menu-region){z-index:700}.root{display:flex;background-color:transparent;flex-direction:row;justify-content:center;position:relative;transition:transform .3s ease-out;z-index:301;--top-site-margin:4px;--outline-width:2}.expanded-sites{opacity:1;visibility:inherit}.expanded-sites-large{opacity:1;visibility:inherit}.dot-separator{margin-left:2px;margin-right:2px;font-size:9px}msft-top-site-placeholder fluent-button::part(content){height:16px}.add-button{width:100%;height:100%}.add-button svg{width:16px;height:16px;pointer-events:none}.add-button span{display:none}.add-dialog-show{display:block}.add-dialog-hide{display:none}.sites{display:grid;grid-template-columns:repeat(var(--top-sites-grid-template-column,8),auto);transition:opacity 0.3s ease-out;row-gap:8px;overflow:hidden}.top-sites > .sites{row-gap:10px;column-gap:var(--top-site-column-gap);overflow:visible;transition:none}.sites .start-button,.sites .end-button{width:24px;height:24px;min-width:24px;display:flex;justify-content:center}.sites .end-button-medium{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px}.sites .end-button-large{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px;--top-site-color:${(0,T.Yc)()?"#FFFFFF":"#000000"}}.sites .start-button:hover,.sites .end-button:hover{background:var(--top-site-action-icon-hover,${cn.Qp})}.sites .option-icon{width:14px;height:14px}.sites path{fill:var(--top-site-color,${on.C})}@media screen and (-ms-high-contrast:active){.sites path{fill:currentColor}}.sites fluent-button{background:transparent}.suggestion-title{font-weight:600;font-size:${dn.c};line-height:20px}.suggestion-body{margin-top:16px;display:flex}.suggestion-body msft-top-site,.suggestion-body .top-site-next{transition:all 0.2s ease-in-out;border-radius:4px;background:${an.s};box-shadow:0px 1.6px 3.6px rgb(0 0 0 / 13%),0px 0px 2.9px rgb(0 0 0 / 11%);cursor:default;width:104px}.suggestion-body .suggested-top-site{margin-inline-end:12px}.suggestion-body .suggested-top-site:last-child{margin-inline-end:0px}.suggestion-body msft-top-site:hover,.suggestion-body .top-site-next:hover{background:${an.s};box-shadow:0px 3.2px 7.2px rgb(0 0 0 / 13%),0px 0px 3.8px rgb(0 0 0 / 11%)}.suggestion-body .top-site-next .control{display:inline}.toast-root{position:absolute;left:50%;transform:translate(-50%,0);width:fit-content;max-width:95%;z-index:700;--fill-color:${(()=>{const e=(0,Zt.$B)((()=>Jt.m0))(en.ZP);return(0,T.Yc)()?Jt.P5:e})()};--neutral-foreground-rest:${(()=>{const e=(0,Zt.$B)((()=>Jt.m0))(en.ZP);return(0,T.Yc)()?e:Jt.P5})()};--accent-foreground-rest:${(0,T.Yc)()?"#006CBE":"#63ADE5"};--toast-message-max-width:287px}msn-toast::part(toast-root){color:${on.C};background:${un.I};outline:1px solid rgba(0,0,0,0.1)}.toast-close-button{background:transparent}fluent-button.toast-navigation-button::part(control){border:2px solid transparent}fluent-button.toast-navigation-button::part(control):focus-visible{border:2px solid var(--focus-stroke-outer);box-shadow:0 0 0 2px var(--focus-stroke-outer)}fluent-button.toast-navigation-button::part(content)::before{height:0}.toast-navigation-button{margin-inline-start:4px;background:transparent;color:${ln.go}}.toast-navigation-button-accent{margin-inline-start:4px;--design-unit:3.2;--control-corner-radius:4}.top-sites{position:relative;--top-site-backplate-color:rgba(255,255,255,0.8);--top-site-backplate-border-color:rgba(0,0,0,0.05);--top-site-pill-width:77px;--top-site-pill-height:58px;--top-site-column-gap:6px;--top-site-border-width:1px}.top-sites.top-site-s2tss{--top-site-pill-width:81px;--top-site-pill-height:62px}.top-sites > .sites{--top-site-pill-calculated-width:calc(var(--top-site-pill-width) + var(--top-site-border-width) * 2);max-width:calc(var(--top-site-pill-calculated-width) * var(--top-sites-grid-template-column) + var(--top-site-column-gap) * (var(--top-sites-grid-template-column) - 1));grid-template-columns:repeat(auto-fit,var(--top-site-pill-calculated-width))}@media (prefers-color-scheme:dark){.top-sites{--top-site-backplate-color:rgba(0,0,0,0.4)}.ruby-long-width-menu::part(menu){--fill-color:#242424}}.topSitesLightOnBackgroundImage{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(234,234,234,0.42);--top-site-placeholder-backplate-fill:rgba(229,229,229,0.7);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDarkOnBackgroundImage{--top-site-fill-hover:rgba(66,66,66,0.4);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(36,36,36,0.42);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDark{--top-site-fill-hover:rgba(0,0,0,0.3);--top-site-color:#FFFFFF;--top-site-placeholder-backplate-fill:transparent}.topSitesLight{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:rgba(0,0,0,0.83);--top-site-placeholder-backplate-fill:transparent}.with-back-plate path{fill:${on.C}}.top-site-next.drag-chosen:not(.top-site-f3v1b){background:var(--top-site-fill-hover,var(--neutral-fill-hover))}.top-site-next.drag-chosen__no-hover{background:transparent !important}.top-site-next.drag-dragged{background:transparent}.top-site-next.small-top-sites{height:80px;width:104px}.top-site-next.small-top-sites.information-layout{height:75px;width:99px}msft-top-site::part(image),.top-site-next .image{background:${an.s};border-radius:4px}msft-top-site::part(image),.add-placeholder.top-site-f3v1b .image{background:transparent}msft-top-site::part(image),.add-placeholder.top-site-f3v1b .image.new-add-image{background:${an.s}}msft-top-site::part(imageMSB){background:#0078D4;border-radius:4px}.top-site-next.pill-top-site .image{box-shadow:0px 2px 4px rgb(0 0 0 / 10%);border-radius:12px}.top-site-next.pill-top-site fluent-button{border-radius:4px}.top-site-next.pill-top-site{border-radius:6px}.top-site-next.pinned-top-site .start{pointer-events:none}.top-site-next .control{padding:0;margin:0}.top-site-next .top-site-title{display:flex;justify-content:center;align-items:center}.top-site-next .top-site-title-large-tile{display:flex;justify-content:center;align-items:center;color:${(0,T.Yc)()?"white":"black"};--top-site-color:${(0,T.Yc)()?"white":"black"}}.top-site-next .top-site-title span{overflow:hidden;text-overflow:ellipsis}.top-site-next .top-site-title-large-tile a{overflow:hidden;text-overflow:ellipsis}.top-site-next .badge{padding:1px 5px;border-radius:12px;flex:none;min-width:16px;background-color:#EDEDED;color:#0078D4;margin-inline-start:4px;font-size:10px;line-height:13px;height:16px;font-weight:400;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;max-width:215px;transition:all 0.2s ease-in-out}msft-top-site-placeholder{height:88px}msft-top-site-placeholder.small-top-sites{height:84px}msft-top-site-placeholder.small-top-sites.information-layout{height:75px;width:99px}.top-site-next.small-top-sites.top-site-f3v1b{--top-site-black-plate-height:36px;--top-site-black-plate-width:36px;--top-site-hover-backplate-width:90px;--top-site-hover-backplate-height:78px;--top-site-action-icon-hover:rgba(0,0,0,0.05);--top-site-action-top-position:-5px;--top-site-action-border-position:-4px;--top-site-anchor-left-fix:-10px;--top-site-fill-hover:transparent;width:var(--top-site-pill-width);height:var(--top-site-pill-height)}.top-site-next.small-top-sites.top-site-f3v1b.top-site-s2ts{--top-site-black-plate-height:40px;--top-site-black-plate-width:40px;--top-site-action-border-position:-6px}.top-site-next.small-top-sites.top-site-f3v1b .image svg{--top-site-color:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{--top-site-color:#242424}@media (prefers-color-scheme:light){.top-site-next.small-top-sites.top-site-f3v1b .image svg{--top-site-fill-hover:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{--top-site-color:#242424}}@media (prefers-color-scheme:dark){.top-site-next.small-top-sites.top-site-f3v1b .image svg{--top-site-color:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{--top-site-color:#ADADAD}.top-site-next.small-top-sites.top-site-f3v1b{--top-site-action-icon-hover:rgba(255,255,255,0.05)}}.top-site-next.small-top-sites.top-site-f3v1b::before{transition:all 0.5s ease-in-out}.top-site-next.small-top-sites.top-site-f3v1b .content-container{padding:0}.top-site-next.small-top-sites.top-site-f3v1b .content-container{justify-content:center}.top-site-next.small-top-sites.top-site-f3v1b .image img{max-width:24px;height:24px}.top-site-next.small-top-sites.top-site-f3v1b .image svg{width:20px;height:20px}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{width:15px;height:15px}@media (max-width:1097px){:host{--top-sites-grid-template-column:4}.ten-sites{--top-sites-grid-template-column:5}.eight-sites{--top-sites-grid-template-column:8}.six-sites{--top-sites-grid-template-column:3}}@media (min-width:1098px){:host{--top-sites-grid-template-column:8}.ten-sites{--top-sites-grid-template-column:10}.expanded-sites{min-height:90px}.expanded-sites.information-layout{min-height:75px}.expanded-sites-large{min-height:72.9px}}.top-sites > .expanded-sites{min-height:unset}.top-site-add-success{position:absolute;top:40px;left:-10000px}.pinned-indicator{width:12px;height:12px}#dismissButtonId{margin-top:1px}.topsite-info{float:inline-end}.top-site-next .start{inset-inline-start:var(--top-site-margin,9px)}.top-site-next .end{inset-inline-end:var(--top-site-margin,9px)}msn-actions-menu::part(icon-img){width:20px}${An} ${kn} ${Pn} ${Mn} ${bn}
`,Ln=xn,Fn={experienceConfigSchema:undefined};i.D.define(r.H.registry),o.tH.define(a.j.registry)},33141:function(e,t,n){n.d(t,{D:function(){return a},X:function(){return o}});var i=n(55025);const r=/www\d*\./i,o=/^https?:/i;class a{constructor(e){if(!i.b.isNotNullOrUndefined(e))return;let t;try{t=new URL(e.trim())}catch{t=void 0}if(!t||!e.toLocaleLowerCase().startsWith(t.origin.toLocaleLowerCase()))try{t=new URL("http://"+e)}catch{t=void 0}if(!t||!t.host||!o.test(t.protocol))return;const n=t.hostname.replace(r,"");this.url=t.href.replace(/\/$/,""),this.domain=n,this.domainAndPath=this.domain+t.pathname.replace(/[\s/]+$/g,""),this.domainPathAndQuery=this.domainAndPath+t.search,this.hasQuery=!!t.search}}},35081:function(e,t,n){n.d(t,{Br:function(){return v},Ej:function(){return m},Jn:function(){return k},KS:function(){return y},j3:function(){return T},x3:function(){return P},xb:function(){return S},y1:function(){return w}});var i=n(77870),r=n(15598),o=n(24032),a=n(98130),s=n(33141);const c="//img-s-msn-com.akamaized.net/tenant/amp/entityid/",d="//img-s.msn.cn/tenant/amp/entityid/",u="removedTopSiteUrls",l={};let p,h,g,f;function m(){return p}function y(){return h}function v(){return g}function S(e){e&&(g[e]=!0,f.setObject(u,g))}function w(e){e&&(delete g[e],f.setObject(u,g))}f=(0,r.$o)(),g=f.getObject(u)||{},h={};const b=["aka.ms","bing.com","ww55.affinity.net","sovrn.co","clkde.tradedoubler.com","clk.tradedoubler.com","awin1.com","ad.soicos.com"],C=["bing.com/alink/link"];function T(e,t){if(t&&t.forEach((e=>{const t=l[e.url]??new s.D(e.url);b.includes(t.domain)||(h[t.domain]=!0),g[e.url]=!0,!l[e.url]&&(l[e.url]=t)})),p=[],!e.curatedSites)return;const n={};for(const e in h)A(n,e);for(const e in g){if(!e||n[e])return;const t=l[e]??new s.D(e);!l[e]&&(l[e]=t),C.includes(t.domainAndPath)||A(n,t.domainAndPath),n[e]=!0}p=new Array;const i=!("0"===(0,o.L)().get("dsp"));e.curatedSites.forEach((r=>{const o=r.faviconId||P(r.faviconUrl),a={...r,faviconUrl:o?k(o):r.faviconUrl},c=new s.D(a.url);if(!n[c.domain]&&!n[c.domainAndPath]&&!n[a.url]){if(e.addBingForNonBingSearchEngine&&"Bing"===a.title&&i)return;p.push(a)}a.isSponsored&&t.forEach((e=>{if(e.url===a.url&&0==e.tileSource){const t=a.faviconId||P(a.faviconUrl);e.title=a.title,e.faviconUrl=t?k(t):a.faviconUrl}}))}))}function k(e){if(e){return null!=a.jG&&a.jG.IsChinaCompliance?`${d}${e}.img`:`${c}${e}.img`}return i.eF}function P(e){if(e){return(e&&e.match(/cms\/api\/amp\/image\/([a-z0-9]+)$/i)||{})[1]}return null}function A(e,t){t&&!e[t]&&(e[t]=!0)}},34718:function(e,t,n){n.d(t,{$:function(){return o},D:function(){return r}});var i=n(7522);function r(e,t){const n=e.length+t.length,i=[];let r=0,o=0,a=0;for(let s=0;s<n;s++)o<t.length&&t[o].locationIndex===a?i[a++]=t[o++]:r<e.length?i[a++]=e[r++]:i[a++]=t[o++];return i}function o(e,t){const n=[];let r=0,o=0;const a=(0,i.Z)(t,"slot"),s=e.length+t.length;for(let t=0;t<s;t++)t>=a[o]?.slot?n.push(a[o++]):r<e.length&&n.push(e[r++]);for(;o<a.length;)n.push(a[o++]);return n}},24108:function(e,t,n){n.d(t,{Z:function(){return c}});const i=["/ads-prebid.js","/istripper.js","/javascript/fropo.js","/nb/f_ls.js","/prebid-add.js","/prebid-ads/adsensebase.js","/prebid-article-ad-ad-300x250.js","/reclama/ads.js","/safu/safu.js","/wp-content/plugins/wp-banners/js/wp-banners.js","/zlk/zlk.js"],r=["/adex.js","/adgpt.js","/ados.js","/ads/stickyLb.js","/ane-popup-banner/ane-popup-banner.js","/ane-preroll/preroll.js","/arcads.js","/awe2.js","/clever_ads.js","/cnads.js","/dfp/dc.js","/doublepimp2.js","/eureka/eureka.js","/exopopunderdesktop.js","/expop.js","/fload.js","/fro_lo.js","/frontend_loader.js","/gpt.min.js","/invoke-2.js","/js/m/i-def.js","/js/youmuffpu.js","/js3caf.js","/kampyle.js","/keyade.js","/lib/ad.js","/markpop.js","/moatsdk.min.js","/nugg.min.js","/nwm-fcn.min.js","/nwm-pw2.min.js","/p8network.js","/popu.js","/popup2.js","/popup3.js","/punder.js","/pustrck.js","/scripts/chatur.js","/soralink.js","/suv4.js","/taboola_ads.js","/tardisrocinante/austin.js","/utep_ad.js","/weborama.js","/wp-content/plugins/bhcb/lock.js","/xpopup.js","/_adverts.js","/_rebid.js","/cmbdv2.js","/push-skin/skin.min.js","/pop2.js","/banger.js","/detroitchicago/anaheim.js","/detroitchicago/boise.js","/detroitchicago/houston.js","/detroitchicago/memphis.js","/detroitchicago/minneapolis.js","/detroitchicago/raleigh.js","/detroitchicago/rochester.js","/detroitchicago/tampa.js","/_js/prbd_6.19.0.js","/prebid14.js","/prebid_ver.js","/pubfig.js","/pubfig.min.js","/_prebid.js","/~Prebid.js","/datomata.widget.js","/abtest_ab.js","/adb.min.js","/adblock-relief.js","/blockblock/blockblock.jquery.js","/fuckadb.js"];var o=n(77993),a=n(98130);class s{Impacts(){const e=this.GetConfig();return new Promise(function(t,n){const i=[this.CheckLoadStatus(e.EasyList),this.CheckLoadStatus(e.UboSpecial),this.CheckLoadStatus(e.Param)];Promise.all(i).then((e=>{t(e[0]||e[1]||e[2])})).catch((e=>{n(e)}))}.bind(this))}CheckLoadStatus(e){const t=document.createElement("script");t.src=e.urls,document.body.appendChild(t);return(async(e,t)=>{const n=new Promise(((t,n)=>{setTimeout(t,e,!1)}));return Promise.race([t,n])})(500,new Promise((function(n,i){t.onload=function(){document.getElementById(e.id)?n(!1):n(!0)},t.onerror=function(){n(!0)}})))}GetConfig(){const e=`${(0,a.Yq)().StaticsUrl}latest/adboxes`,t=this.Sample(r),n=this.Sample(i),o=this.Sample(r);return{UboSpecial:{urls:e+"/ubo"+n,id:btoa(n)},EasyList:{urls:e+"/egb"+t,id:btoa(t)},Param:{urls:e+"/general.js?"+o,id:btoa(o)}}}Sample(e){return e[Math.floor(Math.random()*e.length)]}}var c=new class{constructor(){this.adbTime=0,this.getAdbStatus=()=>(this.hasAdbStatus||(this.adbStatus=this.checkAdbStatus(),this.hasAdbStatus=!0),this.adbStatus),this.getAdbLoggedTime=()=>{const e=o.Z.get("AlgoRes");return e&&"ABD=V=0"!=e&&(this.adbTime=Number(e.split("=")[2])),this.adbTime},this.executeDetector=async()=>{const e=new s,t=await e.Impacts();this.setCookie(t)},this.appendAdbStatusToUrl=e=>{if(!e||0===e.length||!this.getAdbStatus())return e;const t=new URL(e),n=t.searchParams.get("rlink");if(!n)return e;const i=decodeURIComponent(n);if(!(i.includes("www.bing.com/aclick?ld=")||i.includes("www.bing.com/ac?ld=")||i.includes("www.bing.com/ck?ld=")||i.includes("www.bing.com/ack?ld=")||i.includes("www.bing.com/clk?ld=")||i.includes("www.bing.com/aclk?ld=")||i.includes("www.bing.com/click?ld=")))return e;const r=n.concat("&adb=1");return t.searchParams.set("rlink",r),t.toString()},this.checkAdbStatus=()=>{const e=o.Z.get("AlgoRes");return!(!e||"ABD=V=0"===e)},this.setCookie=e=>{if(e){const e=(new Date).getTime();o.Z.set("AlgoRes",`ABD=V=${e}`,{expires:30})}else o.Z.set("AlgoRes","ABD=V=0",{expires:30})}}}},6734:function(e,t,n){n.d(t,{B:function(){return a},_:function(){return o}});var i=n(33779),r=n(5302);const o=e=>{if(!e)return;const t=(e=>{try{return{success:!0,data:JSON.parse(e)}}catch(e){return{success:!1,error:e}}})(e);if(t.success)return t.data;(0,i.H)(r.P14,"Failed to parse MSN_KV",`Failed to parse MSN_KV: ${e}`,{error:t.error,msn_kv:e})},a=(e,t)=>{if(91===t)return e.description?"DTS_91_3":"DTS_91_1"}},72664:function(e,t,n){n.d(t,{c1:function(){return a}});var i=n(94289),r=n(59571),o=n(13218);const a=(e,t,n)=>{if(e?.passIsAppTrafficSignal||t?.enablePageObject||e?.passRequestModelSignals||e?.passVAXandrMigrationSignals||e?.passDeviceOS)try{const i=s(e,t,n);return Object.keys(i).length?JSON.stringify(i):""}catch(e){return}},s=(e,t,n)=>{const i={};if(e?.passIsAppTrafficSignal&&t?.isAppTraffic&&(i.app={isApp:t?.isAppTraffic}),t?.enablePageObject&&(i.page=c(t)),e?.passRequestModelSignals){const e=n?.auctionLevelSignals;e&&(i.requestModelSignals={vpSize:e?.vpSize?{w:e?.vpSize?.w,h:e?.vpSize?.h}:void 0,isPrerender:e?.isPrerender||void 0,isSSR:e?.isSSR||void 0,ocid:e?.ocid||void 0})}const r={};return e?.passVAXandrMigrationSignals&&(r.vaXandrMigration=!0),Object.keys(r).length>0&&(i.flightSignals=r),e?.passDeviceOS&&t?.device&&(i.deviceRequest=t.device),i},c=e=>{const t=d(),n={};return t&&(n.type=t),e?.pageLayout&&(n.layout=e?.pageLayout),n},d=()=>i.L.getMetadata(r.l.PageType)||o.Al.ClientSettings?.pagetype},40322:function(e,t,n){n.d(t,{pg:function(){return S}});var i=n(13218),r=n(19625),o=n(38300),a=n(44132);const s="fr-fr",c="fr",d=32,u=1126,l="prg-ad-fr-muid-rf",p="cprg-ad-fr-muid";var h;function g(){return i.Al.Locale===s}function f(){return i.Al.ClientSettings?.geo_country?.toLowerCase()===c}function m(){const e=(0,r.aW)();if(!e)return!1;try{const t=window.otIabModule?.tcfSdkRef.tcString().decode(e),n=t?.vendorConsents.set_.has(d),i=t?.vendorConsents.set_.has(u);return!(!n&&!i)}catch(e){return a.M0.sendClientLogEvent({message:`Error parsing consent cookie for targeting vendor, error: ${e}`,type:"warning"}),!1}}function y(){return!(!i.Al.CurrentFlightSet||!i.Al.CurrentFlightSet.has(l)&&!i.Al.CurrentFlightSet.has(p))}function v(){if(y()&&(a.M0.addOrUpdateTmplProperty("isFrMarket",g()?"1":"0"),a.M0.addOrUpdateTmplProperty("isFrIp",f()?"1":"0")),i.Al.CurrentFlightSet?.has(l))return{shouldMask:!1,reason:"Current flight set allows passing identifiers"};const e=!(0,r.aW)()||function(){const e=(0,r.ej)(o.yV.BrowserOptOut);return!(!e||"1"!==e)}();return g()?e?{shouldMask:!0,reason:"fr-fr market: pre-consent or browser opted out"}:m()?{shouldMask:!1,reason:"fr-fr market: vendor consent accepted"}:{shouldMask:!0,reason:"fr-fr market: vendor consent rejected"}:f()?e?{shouldMask:!0,reason:"French IP: pre-consent or browser opted out"}:window.__tcfapi&&"function"==typeof window.__tcfapi?m()?{shouldMask:!1,reason:"French IP: GDPR market: vendor consent accepted"}:{shouldMask:!0,reason:"French IP: GDPR market: vendor consent rejected"}:{shouldMask:!1,reason:"French IP: Non-GDPR market"}:{shouldMask:!1,reason:"Not subject to French or GDPR consent restrictions"}}!function(e){e.FLIGHT_DISABLED="Current flight set allows passing identifiers",e.FR_MARKET_PRE_CONSENT="fr-fr market: pre-consent or browser opted out",e.FR_MARKET_VENDOR_ACCEPTED="fr-fr market: vendor consent accepted",e.FR_MARKET_VENDOR_REJECTED="fr-fr market: vendor consent rejected",e.FR_IP_PRE_CONSENT="French IP: pre-consent or browser opted out",e.FR_IP_GDPR_VENDOR_ACCEPTED="French IP: GDPR market: vendor consent accepted",e.FR_IP_GDPR_VENDOR_REJECTED="French IP: GDPR market: vendor consent rejected",e.FR_IP_NON_GDPR="French IP: Non-GDPR market",e.NON_RESTRICTED="Not subject to French or GDPR consent restrictions"}(h||(h={}));const S={validateIdentifierUsage:v,maskIdentifiers:function(e){const t=v();if(y()){const e=i.Al.CurrentFlightSet.has(l)?"1":"0",n=i.Al.CurrentFlightSet.has(p)?"1":"0",r=t.shouldMask?"1":"0";a.M0.addOrUpdateTmplProperty("maskValue",`${e}_${n}_${r}`)}return t.shouldMask?void 0:e}}},93206:function(e,t,n){n.d(t,{W:function(){return o}});var i=n(19625),r=n(40322);function o(e){const t=e||(0,i.jG)();return r.pg.maskIdentifiers(t)}},64411:function(e,t,n){n.d(t,{A:function(){return y}});n(34757);var i=n(30688),r=n(13218);const o="undefined"!=typeof window?function(){const e={positions:[],beacons:{},clickBeacons:{},elements:{},timer:null,watch:null,paused:!1,supportsIO:!(window.location.search.indexOf("useLegacyTracking=1")>-1)&&"IntersectionObserver"in window,viewedBeaconHistory:new Set},t="background: #fff; border-radius: 2px; color: #5f6a96; padding: 4px;";let n=!1;window&&(n=window.location.search.toLowerCase().indexOf("debug=1",0)>-1);const i=function(e){"NOT_PROVIDED"!==e&&((new Image).src=e)},r=function(t){const n=e.clickBeacons[t]||[];if(n.length)for(let e=0,t=n.length;e<t;e++)i(n[e])},a=function(e,t){const n=(new Date).getTime()/1e3|0,i=Math.floor(9007199254740990*Math.random()),r=t&&t.index||0;return e.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r)).replace("{REQUEST_ID}",i).replace("[timestamp]",n).replace("[CACHEBUSTER]",n).replace("[RANDOM_NUMBER]",i)},s=function(e,t,n){const i=function(e,t){const n=t+1,i=Math.floor(e.width/n),r=Math.floor(e.height/n),o=Math.max(0,e.left),a=e.top,s=[];for(let e=1;e<n;e++){const t=o+i*e;for(let e=1;e<n;e++){const n=a+r*e;s[s.length]=[t,n]}}return s}(t,10);let r=0;for(let t=0,n=i.length;t<n;t++){const n=i[t][0],o=i[t][1];c(e,n,o)||r++}const o=100*n;return!(100-r/i.length*100>=o)},c=(e,t,n)=>{if(!!e.shadowRoot){const i=e.shadowRoot.elementFromPoint(t,n);return e.shadowRoot.contains(i)||e.contains(i)}const i=document.elementFromPoint(t,n);return!(!i||"MSFT-FEED-LAYOUT"!==i.tagName.toUpperCase()&&"VIEWS-NATIVE-AD"!==i.tagName.toUpperCase()&&"EDGE-CHROMIUM-PAGE"!==i.tagName.toUpperCase())},d=function(e,t){const n=function(){const e=document,t=window,n=e.body,i=e.documentElement;return{height:t.innerHeight||i.clientHeight||n&&n.clientHeight,width:t.innerWidth||i.clientWidth||n&&n.clientWidth}}(),i=e.getBoundingClientRect(),r=Math.max(0,Math.min(i.bottom,n.height)-Math.max(i.top,0)),o=Math.max(0,Math.min(i.right,n.width)-Math.max(i.left,0)),a=r/(i.height||e.offsetHeight)||0,c=o/(i.width||e.offsetWidth)||0;return!window.disableObstructionDetection&&window.addEventListener&&s(e,i,t)?0:Math.max(0,a+c-1)},u=function(e,t,n){return window.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},l=function(){const i=e.positions.length;for(let o=0;o<i;o++){const i=e.positions[o];if(!e.paused&&i){const a=i.uid,s=i.node;if(!s)continue;if(e.elements[a]||(e.elements[a]=s,e.clickBeacons[a]&&u(s,"click",(function(){r(a)}))),d(s,i.threshold)<i.threshold)i.history=null;else{i.history||(i.history=Date.now(),n&&console.log("%c[ Gemini: Started - "+i.history+" ]",t));const r=(Date.now()-i.history)/1e3;if(n&&console.log("%c[ Gemini: Tracking - "+r+" ]",t),r>=i.duration&&(n&&console.log("%c[ Gemini: Tracking - "+r+" ]",t),i.timer&&(clearInterval(i.timer),i.timer=null),i.observer&&i.observer.unobserve(s),e.viewedBeaconHistory.has(i.uid)||(e.viewedBeaconHistory.add(i.uid),i.callback(i)),i.history=Date.now(),e.positions.splice(o,1),o-=1,!e.positions.length)){n&&console.log("%c[ Gemini: Finished - "+i.history+" ]","background: #eb2e2e; border-radius: 2px; color: #fff; padding: 4px;"),e.timer&&(clearInterval(e.timer),e.timer=null);break}}}}},p=function(e){const t=e.node;if(!e.observer){const n=new IntersectionObserver((function(t){return function(t){const n=t[t.length-1];n.isIntersecting?n.isIntersecting&&!e.timer&&(e.timer=setInterval(l,150)):(clearInterval(e.timer),e.timer=null,e.history=null)}(t)}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});n.observe(t),e.observer=n}},h=function(t,r,s,c,d,u){const l=s.a,h=s.c,g=s.d,f=s.p,m=s.t,y=e.beacons,v=e.positions,S=f/100;y[t]||(y[t]={});y[t][r]={urls:c,threshold:S,duration:g,type:m,consecutive:h,audio:l};const w={uid:t,threshold:S,duration:g,consecutive:h,audio:l,callback:function(){const e=y[t][r],s=e.urls,c=s.length,d=o.beaconCallback;for(let o=0;o<c;o++){const c=s[o];i(a(c,u)),"function"==typeof d&&d(y[t][r],t,r,c),n&&console.log("%c[ Gemini: $$$$ ]\n"+JSON.stringify({url:c,rule:r,threshold:e.threshold,duration:e.duration,consecutive:e.consecutive},null,2),"background: #5c71d9; border-radius: 2px; color: #fff; padding: 4px;")}},node:d,history:null};v.push(w),e.supportsIO&&p(w)},g=function(t,n,i){const r=n.rules,o=r.viewabilityDefStatic,a=r.viewabilityDefStatic3P,s=n.tag,c=s.clickTrackingUrl,d=s.imprTrackingUrl,u=s.imprTrackingUrls,l=n.actionUrls,p=n.beacon;if(l&&l.PARTIAL_VIEW){const e=l.PARTIAL_VIEW;h(t,"viewabilityDefStaticPartial",{p:.01,d:0,t:21},e,i,n)}if(o||p||l&&l.IMPR_INTERNAL){const e="viewabilityDefStatic",r=o||{c:1,d:1,p:50};let a=[];p&&p.length&&a.push(p),l&&l.IMPR_INTERNAL&&(a=a.concat(l.IMPR_INTERNAL)),u&&u.length?a=a.concat(u):d&&(d instanceof Array?a=a.concat(d):a.push(d)),h(t,e,r,a,i,n)}if(a&&l&&l.STATIC_VIEW_3P){const e=a.length;for(let r=0;r<e;r++){const e=l.STATIC_VIEW_3P.slice(),o=a[r],s="viewabilityDefStatic3P:"+r,c=a[r].t;for(let t=0,n=e.length;t<n;t++)e[t]=(g=e[t],f=c,g.replace("$(S_VIEW_TYPE)",f));h(t,s,o,e,i,n)}}var g,f;let m=[];l&&l.CLICK_INTERNAL&&(m=m.concat(l.CLICK_INTERNAL)),c&&c.length&&(m=m.concat(c)),e.clickBeacons[t]=m},f=function(e,t){const n=e.ads,i=e.section.id,r=n.length;for(let e=0;e<r;e++){const r=n[e],o=r.customId||"gemini-"+i+"-"+(r.creativeId||r.demandSourceCreativeId||r.dynamicProductAdId||0)+"-"+r.index,a=t;r.tag="string"==typeof r.tag?JSON.parse(r.tag):r.tag,r.beacon=r.beacon.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r.index)),g(o,r,a)}},m=function(t,i){const r=t instanceof Array;if(!t||r&&!t.length||t&&"object"!=typeof t)return;t&&!r&&(t=[t]);const o=t.length;for(let e=0;e<o;e++){const n=t[e],r=n.sectionads;if(r)for(let e=0;e<r.length;e++)f(r[e],i);else f(n,i)}return"IntersectionObserver"in window||e.timer||(n&&console.log("%c[ Gemini: Start Watching ]","background: #55ae3f; border-radius: 2px; color: #fff; padding: 4px;"),e.timer=setInterval(l,150)),this};return window.Gemini=m,"hidden"in document&&document.addEventListener("visibilitychange",(function(){return e.paused=document.hidden})),m.version="2.0",m}():null;var a=n(42122),s=n(33779),c=n(5302),d=n(38300),u=n(98491),l=n(43319),p=n(21215),h=n(22680),g=n(44132),f=n(89658),m=n(4631);class y{static#e=this.allVisiBeaconsFiredOnPage=new Set;static#t=this.allServeBeaconsFiredOnPage=new Set;constructor(e){this.config=e,this.visiJsonTrackingData=new Map,this.userActionLog=new u.Km,this.beaconsProcessed=new Map,this.currentVideoDom=new Map,this.onObserve=(e,t)=>(n,r)=>{n&&n.forEach((n=>{a.k.logCallback((()=>"IntersectionRatio: "+n.intersectionRatio.toString()));let o=1e3;(0,i.C)()&&(o=0),n.intersectionRatio>=.5?this.timerId=window.setTimeout(((n,i)=>{this.fireVisibilityBeacon(n,i),this.userActionLog.fireImpressionLog(e,t,i)}),o,r,n.target):this.timerId&&clearTimeout(this.timerId)}))}}async sendBeaconForAdServed(e){const{beaconsJson:t,beaconsSupportHttpPOST:n}=e;this.fireAdServedTrackingCall(t,n)}async fireAdServedTrackingCall(e,t){if(e&&e.length>0)try{const t=JSON.parse(e),n=t&&t.trb;if(n)for(let e=0;e<n.length;e++){const i=n[e];window.servedBeaconUrls?.includes(i)||(this.beaconsProcessed&&this.beaconsProcessed.has(i)&&this.beaconsProcessed.get(i)===d.hE.BeaconTypeAdServed||y.allServeBeaconsFiredOnPage&&y.allServeBeaconsFiredOnPage.has(i)||this.fireTrackingBeacon(n[e],d.hE.BeaconTypeAdServed,t.e))}}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire ad served call",`Fail to parse beacon json tracking data: ${e}`))}}fireClickTrackingCall(e,t){if(e&&e.length>0)try{const n=JSON.parse(e),i=JSON.parse(t),r=n&&n.tcb,o=i&&i.e;if(r)for(let e=0;e<r.length;e++)this.fireTrackingBeacon(r[e],d.hE.BeaconTypeClick,o)}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire ad clicked call",`Fail to parse beacon click json: ${e}`))}}fireUserActionBeacon(e){this.fireTrackingBeacon(e,d.hE.UserActionEvent,!1)}visibilityObserver(e,t,n){const i=document.querySelector(e.replace(/\s/g,".")),r=e.slice(1,e.length);i&&this.elementVisibilityObserver(i,t,void 0,r,n)}visibilityCarouselObserver(e,t){e&&t&&this.elementVisibilityObserver(e,t)}elementVisibilityObserver(e,t,n,i,r,o,a,d,u){if(this.visiJsonTrackingData.set(e,t),n)try{!function(e,t){window.Gemini&&window.Gemini(e,t)}(JSON.parse(n),e)}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to invoke gemini caller",`Fail to parse beacon gemini json: ${n}`))}const l={root:null,rootMargin:"0px",threshold:.5};let p;return this.doubleVerifyConfig=u,this.onObserve=this.onObserve.bind(this),this.fireVisibilityBeacon=this.fireVisibilityBeacon.bind(this),this.loadPolyfills().then((()=>{p=new IntersectionObserver(this.onObserve(a,d),l),p.observe(e),r&&r.length>0&&(this.trackBingViewability=this.trackBingViewability.bind(this),this.trackBingViewability(e,i,r,!0,this.beaconsProcessed,o,t))})),()=>p?.disconnect()}checkVideoElementChanged(e,t,n){const i=e&&e.querySelector("native-ad-video-player")&&e.querySelector("native-ad-video-player").shadowRoot,r=i&&i.querySelector("content-video-player")&&i.querySelector("content-video-player").shadowRoot?i.querySelector("content-video-player").shadowRoot.querySelector("video"):null,o=n?n.get(e):null;n&&r!=o&&(t.element=r,t.videoParenentElement=i&&i.host&&i.host.parentElement,window&&window.MSANTracker&&window.MSANTracker.TrackElements&&(window.MSANTracker.PlayUtils.untrackElement(o),window.MSANTracker.TrackElements([t],window)),n.set(e,r))}trackBingViewability(e,t,n,i,r,o,a){const s=(this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.triggerType)??"play",c=(this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.durationMs)??2e3,u=!!o,l=t?t.concat(" video"):"";let p=e,h=null;i&&u&&(null==this.currentVideoDom&&(this.currentVideoDom=new Map),p=e&&e.querySelector("native-ad-video-player")&&e.querySelector("native-ad-video-player").shadowRoot,h=p&&p.querySelector("content-video-player")&&p.querySelector("content-video-player").shadowRoot&&p.querySelector("content-video-player").shadowRoot.querySelector("video"),this.currentVideoDom.set(e,h));let g=[];const f=[];let m=[],y=[];if(n&&n.length>0)for(let e=0;e<n.length;e++){const t=n[e];r&&r.has(t)&&r.get(t)===d.hE.BeaconTypeVisibility||(u?m.push({type:"videoView",triggerType:s,url:t,percentage:50,duration:c}):f.push({type:"view",triggerType:"view",url:t,percentage:50,duration:1e3}),null!=r&&i&&r.set(t,d.hE.BeaconTypeVisibility),y.push({beaconUrl:t,type:d.hE.BeaconTypeVisibility}))}if(u){const{bingBeacons:n,servedBeacons:s,videoTrackedUrls:c}=this.getBeaconsForVideo(o,r,i,a);m=m.concat(n),y=y.concat(c),g=[{impid:t,element:i?e:null,beacons:s},{impid:i?t:l,element:i?h:null,videoParenentElement:i?p&&p.host&&p.host.parentElement:null,beacons:m}]}else g=[{impid:t,element:i?e:null,beacons:f}];if(window&&window.MSANTracker&&window.MSANTracker.TrackElements&&window.MSANTracker.TrackElements(g,window),i&&u){const n={impid:t,element:h,videoParenentElement:p&&p.host&&p.host.parentElement,beacons:m};setInterval(this.checkVideoElementChanged,100,e,n,this.currentVideoDom)}return y}getBeaconsForVideo(e,t,n,i){const o=(this.config&&this.config.VideoAd&&this.config.VideoAd.mobileEnable)??!0,a=(this.config&&this.config.VideoAd&&this.config.VideoAd.impression&&this.config.VideoAd.impression.durationMs)??1e3;let u=[];const l=[],{bingBeacons:p,videoUrls:h}=this.generateVideoBeaconsFromVast(e,t,n);u=u.concat(h);const f=i,m=r.Al&&r.Al.ClientSettings||{},y=m.browser&&"true"===m.browser.ismobile||"phone"===m.deviceFormFactor;if(f&&f.length>0)try{const e=JSON.parse(f);if(e){const i=e.trb;if(i)for(let r=0;r<i.length;r++){const s=i[r];t&&t.has(s)&&t.get(s)===d.hE.BeaconTypeAdServed||(l.push({type:"videoImpression",triggerType:"view",url:e.e?s:decodeURIComponent(s),percentage:50,duration:o&&y?300:a}),null!=t&&n&&t.set(s,d.hE.BeaconTypeAdServed),u.push({beaconUrl:s,type:d.hE.BeaconTypeAdServed}))}}}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire video tracked beacon",`Fail to parse beacon json tracking data: ${f}`))}return{bingBeacons:p,servedBeacons:l,videoTrackedUrls:u}}getMilliseconds(e){const t=e.split(".");let n=0;const i=t[0];t.length>1&&(n+=Number(t[1]));const r=i.split(":");return n+1e3*(3600*Number(r[0])+60*Number(r[1])+Number(r[2]))}generateVideoBeaconsFromVast(e,t,n){const i=[],r=[],o=this.getMilliseconds(e.Duration);if(e.TrackingEvents)for(let a=0;a<e.TrackingEvents.length;a++)if(e.TrackingEvents[a]){const s=e.TrackingEvents[a].value;if(t&&t.has(s)&&t.get(s)===d.hE.BeaconTypeVideoProgress)continue;let c="";switch(e.TrackingEvents[a].event&&(c=e.TrackingEvents[a].event.toLowerCase()),c){case d.hE.StartEvent:i.push({type:"start",triggerType:"play",url:s,percentage:50,duration:0});break;case d.hE.FirstQuartileEvent:i.push({type:"quartile",triggerType:"play",url:s,percentage:50,duration:Math.ceil(o/4)});break;case d.hE.MidPointEvent:i.push({type:"quartile",triggerType:"play",url:s,percentage:50,duration:Math.ceil(o/2)});break;case d.hE.ThirdQuartileEvent:i.push({type:"quartile",triggerType:"play",url:s,percentage:50,duration:Math.ceil(o/4*3)});break;case d.hE.CompleteEvent:i.push({type:"complete",triggerType:"play",url:s,percentage:50,duration:o});break;case d.hE.ProgressEvent:e.TrackingEvents[a].offset&&i.push({type:"progress",triggerType:"play",url:s,percentage:50,duration:this.getMilliseconds(e.TrackingEvents[a].offset)})}null!=t&&n&&t.set(s,d.hE.BeaconTypeVideoProgress),r.push({beaconUrl:s,type:d.hE.BeaconTypeVideoProgress})}return{bingBeacons:i,videoUrls:r}}firePageMonetizedTelemetry(e){if(!e?.getAttribute)return;const t=e.getAttribute(f.qP);try{const n=JSON.parse(t),i=n?.ism;i&&g.M0.sendContentViewEvent(e.parentElement,f.NS.Partial)}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to set isMonetized flag",`Fail to parse telemetryObject json: ${t}`))}}fireVisibilityBeacon(e,t){if(a.k.logCallback((()=>"ad visible for 1 second")),this.firePageMonetizedTelemetry(t),this.visiJsonTrackingData&&this.visiJsonTrackingData.get(t))try{const e=JSON.parse(this.visiJsonTrackingData.get(t)),n=e&&e.tvb,i=(0,m.TI)(this.doubleVerifyConfig);if(i?.shouldAttach&&(0,m.G_)(i?.dvTrackers,this.doubleVerifyConfig?.nativeAdId,c.ODI),n)for(let t=0;t<n.length;t++){const i=n[t];window.viewedBeaconUrls?.includes(i)||(this.beaconsProcessed&&this.beaconsProcessed.has(i)&&this.beaconsProcessed.get(i)===d.hE.BeaconTypeVisibility||y.allVisiBeaconsFiredOnPage&&y.allVisiBeaconsFiredOnPage.has(i)||this.fireTrackingBeacon(i,d.hE.BeaconTypeVisibility,e.e))}}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire visibility beacon",`Fail to parse beacon json tracking data: ${this.visiJsonTrackingData.get(t)}`))}e&&e.unobserve(t)}fireRequestLevelBeacons(e){e&&e.forEach((e=>{e&&this.fireRequestLevelBeaconCall(e)}))}fireJSTrackers(e,t=!1){if(e&&e.length>0)try{const n=JSON.parse(e),i=n&&n.tjb;if(!Array.isArray(i))return;for(const e of i)e&&"string"==typeof e&&(this.beaconsProcessed&&this.beaconsProcessed.has(e)&&this.beaconsProcessed.get(e)===d.hE.BeaconTypeJsTracker||(t&&this.isXandrVisibilityTracker(e)?this.fireXandrJSTracker(e):this.fireJSTracker(e)))}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire jstrackers",`Fail to parse beacon json tracking data: ${e}`))}}async fireJSTracker(e){return new Promise(((t,n)=>{if(!(0,p.N)())return;const i=(0,h.b0)(e,void 0,!0,void 0);i.onload=()=>{a.k.logCallback((()=>"Added jsTracker url: "+e)),this.beaconsProcessed.set(e,d.hE.BeaconTypeJsTracker),t()},i.onerror=t=>{g.M0.sendAppErrorEvent({...c.is$,message:"Failed to load partner jsTracker file",pb:{...c.is$.pb,customMessage:`Error occurred while loading ad partner trackerJS file: ${e}`}}),n(t)},document.body.appendChild(i)}))}async fireRequestLevelBeaconCall(e){if(e){a.k.logCallback((()=>"Firing encoded requestlevel beacon: "+e));let t=await new Image(1,1);t.src=e,t=null}}firePostTrackingBeacon(e,t,n){let i=d.hE.BeaconFormatEncoded;n||(e=decodeURIComponent(e),i=d.hE.BeaconFormatDecoded),e&&(a.k.logCallback((()=>"Firing "+i+" "+t+" beacon, beaconUrl: "+e)),navigator.sendBeacon(e),this.beaconsProcessed.set(e,t))}fireTrackingBeacon(e,t,n){let i=d.hE.BeaconFormatEncoded;n||(e=decodeURIComponent(e),i=d.hE.BeaconFormatDecoded),e&&(a.k.logCallback((()=>"Firing "+i+" "+t+" beacon, beaconUrl: "+e)),this.fireBeaconCall(e,t))}fireBeaconCall(e,t){try{let t=new Image(1,1);t.src=e,t=null}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.AIp,"Invalid beacon URL",`Fail to parse beacon json tracking data: ${e}`))}finally{this.beaconsProcessed.set(e,t),t===d.hE.BeaconTypeVisibility&&y.allVisiBeaconsFiredOnPage.add(e),t===d.hE.BeaconTypeAdServed&&y.allServeBeaconsFiredOnPage.add(e)}}supportsIntersectionObserver(){return"IntersectionObserver"in n.g&&"IntersectionObserverEntry"in n.g&&"intersectionRatio"in IntersectionObserverEntry.prototype}loadPolyfills(){const e=[];return this.supportsIntersectionObserver()||e.push(n.e("node_modules_intersection-observer_intersection-observer_js").then(n.t.bind(n,76583,23))),Promise.all(e)}isXandrVisibilityTracker(e){return e.includes("trk.js")}fireXandrJSTracker(e){document.addEventListener(l.gL,(t=>{const n=this.extractAdIdFromXandrTrackerUrl(e);t.detail.adUniqueIds.includes(n)&&this.fireJSTracker(this.replaceXandrVisibilityTrackerParam(n,e))}))}replaceXandrVisibilityTrackerParam(e,t){const n=`dom_id=${e};`,i=`dom_elt_var=${e};`;return t.replace(n,i)}extractAdIdFromXandrTrackerUrl(e){const t=e.match(/dom_id=([a-zA-Z0-9_-]+);/)?.[1];return t||(0,s.H)(c.C$l,"Xandr visibility tracker URL doesn't have ad id","dom_id parameter is empty",{trackerUrl:e}),t}get intersectionObserver(){return this.loadPolyfills()}}},57167:function(e,t,n){n.d(t,{UF:function(){return d}});var i=n(47898),r=n(62042),o=n(21215);let a,s=!1;const c=new Promise((e=>{a=e}));async function d(){switch(await async function(){s||(i.A.subscribe(i.U.CookieConsentStatus,(e=>{e!==r._.Unknown&&a()})),s=!0);const e=i.A.get(i.U.CookieConsentStatus);return e!==r._.Unknown?e:((0,o.N)()&&await c,i.A.get(i.U.CookieConsentStatus))}()){case r._.Required:return!0;case r._.NotRequired:return!1;default:return}}},43499:function(e,t,n){n.d(t,{N:function(){return o}});var i=n(38300),r=n(19625);class o{updateMsaOptOutCookie(e){if(!this.getMsaOptoutCookieData()&&e&&e.optout){const t=!0===e.optout.msaOptOut?"1":"0";this.setMsaOptoutCookie(t)}}getMsaOptoutCookieData(){const e=(0,r.ej)(i.yV.MSAOptOut);return e&&e.length>0?e:null}setMsaOptoutCookie(e){e&&e.length>0&&(0,r.sq)(i.yV.MSAOptOut,e,1,null,"/")}getBrowserOptoutStatus(){const e=(0,r.ej)(i.yV.BrowserOptOut);return!(!e||"1"!==e)}setUserOptOutSettings(){const e=this.getBrowserOptoutStatus(),t=this.getMsaOptoutCookieData(),n=!(!t||"1"!==t),r=(e||n).toString().toLowerCase();let o="";e&&(o="b|"),n&&(o+="m");const a=i.Lr.UserOptOut+":"+r+";"+i.Lr.UserOptOutOptions+":"+o;if(document.head.attributes["data-info"]){const e=document.head.attributes["data-info"].value.split(";");e.find((e=>e.indexOf(i.Lr.UserOptOut)>-1))?e.find((e=>e.indexOf(i.Lr.UserOptOut)>-1))!==i.Lr.UserOptOut+":"+r&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOut+":false",i.Lr.UserOptOut+":"+r).replace(i.Lr.UserOptOut+":true",i.Lr.UserOptOut+":"+r)):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+i.Lr.UserOptOut+":"+r,e.find((e=>e.indexOf(i.Lr.UserOptOutOptions)>-1))?e.find((e=>e.indexOf(i.Lr.UserOptOutOptions)>-1))!==i.Lr.UserOptOutOptions+":"+o&&(e.includes(i.Lr.UserOptOutOptions+":")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":",i.Lr.UserOptOutOptions+":"+o):e.includes(i.Lr.UserOptOutOptions+":b|")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":b|",i.Lr.UserOptOutOptions+":"+o):e.includes(i.Lr.UserOptOutOptions+":b|m")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":b|m",i.Lr.UserOptOutOptions+":"+o):e.includes(i.Lr.UserOptOutOptions+":m")&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":m",i.Lr.UserOptOutOptions+":"+o))):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+i.Lr.UserOptOutOptions+":"+o}else document.head.setAttribute("data-info",a)}}},4631:function(e,t,n){n.d(t,{G_:function(){return v},OW:function(){return w},TI:function(){return y},lV:function(){return S},yF:function(){return m}});var i=n(21215),r=n(31404),o=n(44132),a=n(26156),s=n(33779),c=n(5302),d=n(98130);const u=/^[a-zA-Z0-9_-]*(?:infopane|info)-\d+/,l={original:"latest/js/thirdparty/doubleverify/msftdvbm.js"},p=new Map,h=20;let g;const f=["cs-responsive-card","msft-content-card","cs-native-ad-card","cs-responsive-infopane","cs-native-ad-card-24","cs-content-card","msft-native-ad","cs-infopane-dense-card","cs-infopane-card-28"];function m(e,t,n){if(!e)return;const i=S(e).get("DV");if(i&&i.length>0){const e=i[0]?.ext?.verificationParameters,r=`p:${b(e)||"null"}|i:${t||"null"}|f:${n}`;(0,s.H)(c.Lm2,`DoubleVerify trackers present but skipped processing. ${r}`,void 0,{...c.Lm2.pb,userImpacting:!0})}}function y(e){if(!e)return{shouldAttach:!1};const t=e.eventTrackers&&e.eventTrackers.length>0,n=!!e.nativeAdId,i=n&&w(e.nativeAdId),r=e.enableInfopaneDVBeacon;if(!t||!i||n&&r||m(e.eventTrackers,e.nativeAdId,r),!function(e){return!!(e.enableInfopaneDVBeacon&&e.nativeAdId&&w(e.nativeAdId)&&e.eventTrackers&&e.eventTrackers.length>0)}(e))return{shouldAttach:!1};const o=S(e.eventTrackers),a=o.has("DV");return{shouldAttach:a,dvTrackers:a?o.get("DV"):void 0}}function v(e,t,n){if(!(0,i.N)()||!e||!t)return;const u=o.M0.getRequestId(),m=`${t}`;if(p.has(u)&&p.get(u)?.has(m))return;p.has(u)||(p.set(u,new Set),function(){if(p.size>h){const e=p.size-h;Array.from(p.keys()).slice(0,e).forEach((e=>{p.delete(e)}))}}()),p.get(u)?.add(m);const y=(0,r.Et)(n,"attachDVScript")(((e,t,n)=>{const i=e[0]?.ext?.verificationParameters,r=b(i),u=function(e,t){if(!e||!t)return;const n=function(){if(void 0===g){const e=function(){let e=(0,d.Yq)().StaticsUrl;return e.endsWith("/")||(e+="/"),`${e}${l.original}`}();if("edgeChromium"===d.jG.AppType){const t=(0,a.nz)(e,"DvUrlPolicy"),n=t||void 0;if(!n||"about:blank#error"===n)return void(0,s.H)(c.ODI,"DV script url is not trusted type compliant.");g=n}else g=e}return g}();if(!n)return;try{const i=e.split(";").filter((e=>e.includes(":"))).map((e=>e.split(":"))).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),r=new URL(n),o=new URLSearchParams(i);o.set("tagType","display"),o.set("mon","1"),o.set("blk","0"),o.set("ee_dp_js","1");const a=o.toString();return r.hash=`${a}&btreg=${t}&bttag=${f.join("|")}`,r.toString()}catch(e){return void(0,s.H)(c.ODI,`Failed to construct DV script URL: ${e}`)}}(i,n);if(!u)return void(0,s.H)(t,"Failed to create sanitized DV script URL");const p=document.createElement("script");p.async=!0,p.src=u,p.onerror=e=>{(0,s.H)(t,`Failed to download DV JS ${e}`)},document.body.appendChild(p),r&&o.M0.addOrUpdateTmplProperty("dvattachedid",r)}));y(e,n,t)}function S(e){const t=new Map;return e.forEach((e=>{const n=e?.ext?.vendorKey;n&&!t.has(n)&&t.set(n,[]),n&&t.get(n)?.push(e)})),t}function w(e){return!!e&&u.test(e.toLowerCase())}function b(e){if(e)try{const t=e.split(";");for(const e of t){const[t,n]=e.split(":");if(t&&"plc"===t.trim()&&n)return n.trim()}}catch(e){return}}},77818:function(e,t,n){n.d(t,{c:function(){return tt},d:function(){return nt}});var i,r=n(33940),o=n(33779),a=n(5302),s=n(86117),c=n(90631),d=n(242),u=n(38300),l=n(69497),p=n(79403),h=n(22680),g=n(21215),f=n(52185),m=n(98130),y=n(44132);!function(e){e.success="success",e.leadgen="leadgen",e.cmsBackfill="cmsBackfill",e.fail="fail",e.collapse="collapse"}(i||(i={}));const v={},S=(e,t)=>{m.jG.CurrentRequestTargetScope?.pageExperiments?.includes("prg-ad-cms-cnt")&&(v[t]||(v[t]={[i.success]:0,[i.leadgen]:0,[i.cmsBackfill]:0,[i.fail]:0,[i.collapse]:0}),v[t][e]++,y.M0.sendClientLogEvent({pb:{clientLogName:"NativeAdCMSBackfillCount",region:t,...v[t]}}))};var w,b=n(28951),C=n(13218),T=n(93516),k=n(26671),P=n(90351),A=n(64411),I=n(83405),E=n(73344);!function(e){e.SlideshowPreview="ss",e.ArticlePreview="ar",e.VideoPreview="vi"}(w||(w={}));var R=n(32308);class M{constructor(){this.cmsProviderCache=new Map}async getCMSList(e,t){if(!e)return void(0,o.H)(a.Cfk,"Get CMSAd content failed",`No backfill id found, listId: ${e}`,{shouldSampleErrorsForTreatement1:!0});let n={};try{const i={method:"GET",headers:{}},r=await(0,R.w)((async()=>{const t=new URL(`${u.ZG.CMSListServiceUrl}${e}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),r=f.Gq.get("afdprotocol");r&&t.searchParams.set("afdprotocol",r);const s=await fetch(t.toString(),i);if(n={url:s.url,status:s.status,statusText:s.statusText},s.ok)return s.json();(0,o.H)(a.Cfk,"Get CMSAd content failed",`Invalid response from CMS, listId: ${e}`,{shouldSampleErrorsForTreatement1:!0,...n})}),"getCMSList");if(!r)return void(0,o.H)(a.Cfk,"Get CMSAd content failed",`Invalid response.json(), listId: ${e}`,{shouldSampleErrorsForTreatement1:!0,...n});const s=r;return this.translateToCMSItem(s,e,t,u.Lr.PrivacyUrl)}catch(t){return void(t instanceof TypeError?(0,o.H)(a.Cfk,"Get CMSAd content failed",`Contruct URL failed  ${t}, id: ${e}`,{shouldSampleErrorsForTreatement1:!0,...n,baseUrl:m.jG.ContentServiceUrlBase,path:u.ZG.CMSListServiceUrl}):(0,o.H)(a.Cfk,"Get CMSAd content failed",`Error while fetching CMS Native Ad ${t}, id: ${e}`,{shouldSampleErrorsForTreatement1:!0,...n}))}}async translateToCMSItem(e,t,n,i){if(!e||!e.list||0===e.list.length)return void(0,o.H)(a.Cfk,"Get CMSAd content failed",`No CMS Response returned from ${t}`,{shouldSampleErrorsForTreatement1:!0});const r=[];for(const t of e.list){let e=!1;const o=t.extendedProperties;if(o)for(const t of o)if(t.key&&t.key.indexOf("is_content")>-1&&t.values&&t.values.indexOf("true")>-1){e=!0;break}let a;if(null!=t.link&&null!=t.link.title&&t.link.href&&null!=t.link.image&&null!=t.link.image.href){const n=this.getCMSContentId(t.link.image.href);let r,o;if(t.link.ad)if(t.link.ad.providerHref&&t.link.ad.providerHref.href){const e=this.getCMSContentId(t.link.ad.providerHref.href);e?r=await this.fetchProviderName(e):t.link.ad.sponsorText&&(r=t.link.ad.sponsorText)}else t.link.ad.sponsorText&&(r=t.link.ad.sponsorText);o=r||(null!=t.link.kicker?t.link.kicker:u.ZG.DefaultProviderName),a={title:t.link.title,url:t.link.href,provider:{name:o},imageUrl:n?(0,E.zz)(n,{width:624,height:350,enableDpiScaling:!1}):t.link.image.href,isContent:e,privacyUrl:i}}else if(null!=t.reference&&null!=t.reference.href){const r=this.getCMSContentId(t.reference.href);if(null!=r){const t=await this.getCMSContent(r);if(!t)continue;a={title:t.title,url:this.constructDestinationUrl(t,n),provider:this.constructProvider(t),imageUrl:this.constructImageUrl(t),isContent:e,privacyUrl:i}}}a&&a.title&&a.imageUrl&&a.url&&r.push(a)}return{id:e._id,items:r}}async getCMSContent(e){try{const t=new URL(this.getContentServiceUrlBase().search,`${this.getContentServiceUrlBase()}${u.ZG.CMSContentServiceURl}${e}/`),n=await fetch(t.toString());if(!n||!n.ok)return void(0,o.H)(a.Cfk,"Get CMSAd content failed",`Failed to fetch CMS content, cmsId: ${e}`,{shouldSampleErrorsForTreatement1:!0});const i=await n.json();return i||void(0,o.H)(a.Cfk,"Get CMSAd content failed",`Invalid JSON response to get CMS content, cmsId: ${e}`,{shouldSampleErrorsForTreatement1:!0})}catch(t){return void(0,o.H)(a.Cfk,"Get CMSAd content failed",`Error while fetching CMS content ${t}, cmsId: ${e}`,{shouldSampleErrorsForTreatement1:!0})}}constructDestinationUrl(e,t){const{category:n}=e,i=n&&n.product||"news",r=n&&n.label||"other",o=w[e.type]||"xx";return`https://www.msn.com/${t}/${b.cX.encodeURIComponentForPrime(i||"")}/${b.cX.encodeURIComponentForPrime(r||"")}/${b.cX.encodeURIComponentForPrime(e.title||"")}/${o}-${e.id}`}constructProvider(e){const{name:t,logo:n}=e.provider;return{name:t,logo:n&&n.id?{src:`${I.E.prod}${n.id}?w=16&h=16`,alt:t}:void 0}}constructImageUrl(e){if(e.images&&!(e.images.length<1)&&e.images[0].id)return(0,E.zz)(e.images[0].id,{width:624,height:350,focalRegion:e.images[0].focalRegion,enableDpiScaling:!1})}getCMSContentId(e){return e&&e.indexOf("cms/api/amp")>-1?e.substring(e.lastIndexOf("/")+1):null}async fetchProviderName(e){try{if(this.cmsProviderCache.get(e))return this.cmsProviderCache.get(e);const t={method:"GET",headers:{}},n=await(0,R.w)((async()=>{const n=new URL(`${u.ZG.CMSListServiceUrl}${e}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),i=await fetch(n.toString(),t);if(i.ok)return i.json();(0,o.H)(a.Cfk,"Get CMSAd content failed",`Invalid response from CMS. status: ${i.status}, statusText: ${i.statusText}, url: ${i.url}`,{shouldSampleErrorsForTreatement1:!0})}),"getProviderName");if(!n)return void(0,o.H)(a.Cfk,"Get CMSAd content failed",`Invalid response.json(), cmsId: ${e}`,{shouldSampleErrorsForTreatement1:!0});const i=n;return i?(this.cmsProviderCache.set(e,i.displayName),i.displayName):void(0,o.H)(a.Cfk,"Get CMSAd content failed",`Failed to parse JSON response, cmsId: ${e}`,{shouldSampleErrorsForTreatement1:!0})}catch(t){return void(0,o.H)(a.Cfk,"Get CMSAd content failed",`Error while fetching Provider name  ${t}, cmsId: ${e}`,{shouldSampleErrorsForTreatement1:!0})}}getContentServiceUrlBase(){let e=m.jG.ContentServiceUrlBase;return e&&!e.toString().includes("localhost")||(e=new URL(u.Lr.DefaultContentServiceBaseUrl)),e}}var x=n(97265),L=n(19625),F=n(53915);class D{async getLeadgenAds(e){if(!e||!e.placements||e.placements.length<1)return void y.M0.sendAppErrorEvent((0,o.Tr)(a.ru5,"Get Leadgen content failed","No placements found in the request"));let t;try{const n=m.jG.HostPage.originalUrl;t=(0,F.bj)(n);const i=this.getMuid(e.muid),r=(0,C.nP)().CurrentFlights,{w:s,h:c}=e.placements[0].img||{},d={id:t,url:n,scoreCategories:e.scoreCategories,market:e.locale,user:i,fdhead:r,w:s,h:c},l=JSON.stringify(d),p=new URL(u.Lr.LeadgenEndpoint,`${m.jG.AssetsUrl}/service/Finance/`),h="finance-utils-peregrine",g=x.$D.getOneServiceParamsWithoutAuth(null,h,!1);p.search=b.cX.keyValueArrayToQueryString(g);const f=(0,R.w)((async()=>{const e=await fetch(p,{method:"POST",body:l,timeoutMs:u.Lr.LeadgenAdServiceTimeout});if(e.ok)return e.json();y.M0.sendAppErrorEvent((0,o.Tr)(a.ru5,"Get Leadgen content failed",`Invalid response from Leadgen, ${e.statusText}, contentId: ${t}`))}),"getLeadgenAds"),v=await f;if(!v)return void y.M0.sendAppErrorEvent((0,o.Tr)(a.ru5,"Get Leadgen content failed",`contentId: ${t}`));return v.items}catch(e){return void y.M0.sendAppErrorEvent((0,o.Tr)(a.ru5,"Get Leadgen content failed",`Error while fetching Leadgen Ad  ${e}, contentId: ${t}`))}}getMuid(e){return e||(0,L.jG)()}}var O=n(16715),_=n(5884),N=n(523),B=n(22011),U=n(77016),$=n(82449),H=n(87797);const W=e=>{const{region:t}=e;return(({region:e})=>[[$.lG.PlacementRegion,e]].filter((([e,t])=>t)).map((([e,t])=>({key:$.N5.current[e],value:Array.isArray(t)?t:[t]}))))({region:t})};var G,V,q=n(22691),j=n(33018),z=n(44018),K=n(81489);!function(e){e[e.adFetchInitializedCnt=0]="adFetchInitializedCnt",e[e.adRequestedCnt=1]="adRequestedCnt",e[e.adAvailableCnt=2]="adAvailableCnt",e[e.adNobidCnt=3]="adNobidCnt",e[e.adErrorCnt=4]="adErrorCnt",e[e.adRequestFailureCnt=5]="adRequestFailureCnt",e[e.adBadRequestCnt=6]="adBadRequestCnt",e[e.adTimeoutCnt=7]="adTimeoutCnt",e[e.adResponseReceivedCnt=8]="adResponseReceivedCnt",e[e.adBeforeFetchCnt=9]="adBeforeFetchCnt"}(G||(G={})),function(e){e[e.adRequestedCnt=0]="adRequestedCnt",e[e.adAvailableCnt=1]="adAvailableCnt",e[e.adNoBidCnt=2]="adNoBidCnt",e[e.adTimeoutCnt=3]="adTimeoutCnt",e[e.adErrorCnt=4]="adErrorCnt",e[e.adReturnedFromCacheCnt=5]="adReturnedFromCacheCnt",e[e.adEmptyResponseErrorCnt=6]="adEmptyResponseErrorCnt",e[e.adResponseFormatErrorCnt=7]="adResponseFormatErrorCnt",e[e.adInvalidResponseCnt=8]="adInvalidResponseCnt"}(V||(V={}));class Q{constructor(){this.hasRegisteredEventListener=!1,this.xdrLogValues=[],this.msxLogValues=[],this.adReqCnt=0,this.reportXandrAdsRequestBeforeUnload=()=>{y.M0?.sendLoadTimeEvent&&y.M0.sendLoadTimeEvent({markers:{naAdReq:this.adReqCnt,xdrna:this.xdrLogValues.join("-"),msxna:this.msxLogValues.join("-")}})},this.logCount=(e,t=1)=>{if(0===this.xdrLogValues.length){const e=Object.values(G).filter((e=>"number"==typeof e)).length;this.xdrLogValues=new Array(e).fill(0)}this.registerLogFlushEventListenerIfNeeded(),e in G&&(this.xdrLogValues[e]+=t)},this.logCountForMSX=(e,t=1)=>{if(0===this.msxLogValues.length){const e=Object.values(V).filter((e=>"number"==typeof e)).length;this.msxLogValues=new Array(e).fill(0)}this.registerLogFlushEventListenerIfNeeded(),e in V&&(this.msxLogValues[e]+=t)},this.logRequestLevelCount=()=>{this.registerLogFlushEventListenerIfNeeded(),this.adReqCnt+=1}}static getInstance(){return f.Gq.get("__LogHelper__",(()=>new Q))}registerLogFlushEventListenerIfNeeded(){this.hasRegisteredEventListener||(this.hasRegisteredEventListener=!0,window.addEventListener("beforeunload",this.reportXandrAdsRequestBeforeUnload,{once:!0}))}}const J=(0,K.h)(Q);var X=n(42833),Y=n(94769),Z=n(64703);const ee="https://ib.msn.com",te=()=>`${ee}/ut/v3`;var ne=n(42122);const ie=(e,t,n,i,r)=>{if(!t||!n)return;if(t.divid=t.divid||t.divName,t.msnSdkName=i,r){if(n[e]&&n[e].length)for(let i=0;i<n[e].length;i++)n[e][i](t);return}let o=5;const a=setInterval((()=>{if(n[e]&&n[e].length){for(let i=0;i<n[e].length;i++)n[e][i](t);clearInterval(a)}else o--||clearInterval(a)}),500)};var re;!function(e){e.AdReturned="adAvailable",e.AdNotReturned="adNotReturned"}(re||(re={}));const oe=new Map;let ae=!1;const se=(e,t,n)=>{oe.has(e)||oe.set(e,new Map),oe.get(e).set(t,n)},ce=(e,t)=>oe.get(e)?.get(t);var de=n(15848),ue=n(72664);const le=new class{constructor(){this.fetchCalled=!1,this.baseUrl="https://api.msn.com/segments/recoitems/LiveRampObjectStoreCaller",this.oneServiceOcid="peregrine",this.noEnvelopeIdConst="_"}fetchAndOutputEnvelopeId(){if(this.fetchCalled)return;this.fetchCalled=!0;if(!(0,L.ej)(u.yV.LiverampEnvelopeId)&&this.isCookieSetAllowed()){const e=this.fetchEnvelopeIdFromObjectStore();this.liverampCookieSetPromise=this.setCookie(u.yV.LiverampEnvelopeId,e)}}getEnvelopeIdFromCookie(){const e=(0,L.ej)(u.yV.LiverampEnvelopeId);return e===this.noEnvelopeIdConst?null:e}async finishLiverampCookieSet(){this.liverampCookieSetPromise&&await this.liverampCookieSetPromise}async fetchEnvelopeIdFromObjectStore(){const e={method:"GET",headers:await x.$D.getOneServiceHeaders(),credentials:"include"},t=this.getServiceUrl();let n,i;try{n=await(0,R.w)((async()=>{const n=await fetch(t.href,e);if(i=n.headers.get("ddd-debugid"),200!=n.status)return 404==n.status||(0,o.H)(a.t7r,`Unexpected response from OneService call. Status: ${n.status}`,void 0,{...a.t7r.pb,debugId:i}),null;try{const e=await n.text();let t=JSON.parse(e)[0].data;return'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),t}catch{return(0,o.H)(a.t7r,"OneService response is not in expected format.",void 0,{...a.t7r.pb,debugId:i}),null}}),"liverampObjectStoreCall")}catch(e){return(0,o.H)(a.t7r,`Error sending OneService request. Error: ${e}`,void 0,{...a.t7r.pb,debugId:i}),null}return n}async setCookie(e,t){let n=await t;n||(n=this.noEnvelopeIdConst);(0,L.sq)(e,n,1,".msn.com","/",!0)||(0,o.H)(a.lxu,"Unable to set LiverampEnvelopeId Cookie.",void 0,{...a.t7r.pb})}getServiceUrl(){const e=new URL(this.baseUrl);return[...x.$D.getCommonParams2(this.oneServiceOcid,!0)].forEach((t=>{t.value&&e.searchParams.set(t.key,t.value)})),e.searchParams.set("ocid",this.oneServiceOcid),e}isCookieSetAllowed(){try{return(0,L.sq)(u.yV.LiverampEnvelopeId,this.noEnvelopeIdConst,1,".msn.com","/",!0)}catch(e){return!1}}};var pe=n(40322);const he=(e,t,n)=>{t&&e.push({id:t,source:n})},ge=e=>{if(!e)return"";return e.split("-")[0]},fe=e=>{const{anid:t,bidTimeout:n,enableContent:i,enableDevice:r,enablePrivateAuction:o,envelopeId:a,disable1pXandrDomainEndpoint:s,isMobile:c,keywords:d,locale:l,msft:p,muid:g,oathAsid:f,trackingManagement:m}=e||{},y=pe.pg.maskIdentifiers(t),v=pe.pg.maskIdentifiers(g),S={member:u.Se,user:{...v&&{externalUid:v},externalImpId:f,userIds:[]},keywords:d,trackingManagement:m,msft:p,...i&&{content:{language:ge(l)}},...r&&{device:{deviceType:c?"1":"2",useragent:(0,h.ij)()}}},w=b.cX.getParamsWithItems(location.search,!0,"citem").find((({key:e})=>"testAds"===e));w&&"true"===w.value&&(S.test=!0);const T=((e,t)=>{const n=[];return he(n,e,"msft_muid"),he(n,t,"msft_anid"),n})(v,y);return T?.length>0&&S.user.userIds.push({type:"extendedIDs",eids:T}),a&&S.user.userIds.push({type:"liveramp",id:a}),n>0&&(S.auctionTimeout=n),C.Al.CurrentFlightSet?.has(B.oS)||s||(S.use1pEndpoint=!0),o&&(S.topics={enabled:!0},S.privateAuction={enabled:!0,sellerTimeout:500}),S},me=()=>{const e=["ads-xdr-","prg-ad-xan-"];return Array.from(C.Al.CurrentFlightSet).filter((t=>e.some((e=>t.startsWith(e)))))};function ye(e){const t=le.getEnvelopeIdFromCookie(),n=(new Date).getTime()+"|"+(9*Math.random()+1)*Math.pow(10,17),i=(e=>{const{pageType:t,rid:n,locale:i}=e||{};return{page_type:t,rid:n,user_locale:i,rebroadcast_origin:"MSN",flight:me(),...(0,de.z1)()||{}}})(e),r=(e=>{const{verticalName:t,audienceMode:n,ocid:i,impressedCrids:r,browserOptout:o,authCookieName:a,pagelayout:s}=e||{},c={vertical:t,audience_mode:n,ocid:i,impressed_crids:r||[],toptout:o?1:0,flights:C.Al.AdsNumberLines};a&&(c.auth_cookie_name=a);const d={pageLayout:s,enablePageObject:!0},u=(0,ue.c1)(void 0,d);return u&&(c.msan_kv=u),c})(e),o={anid:e.anid,bidTimeout:e.bidTimeout,disable1pXandrDomainEndpoint:!0,enableContent:!0,enableDevice:!0,envelopeId:t,isMobile:e.isMobile,keywords:i,locale:e.locale,msft:r,muid:e.muid,oathAsid:n,trackingManagement:{native:{loadViewabilityScriptAt:"impression"}}};return fe(o)}var ve=n(75115);const Se="1.2",we=(e,t)=>"tg:"+e+";p:7HD66FC;r:"+t,be=(e,t)=>({pos:e,...(0,de.Qg)({region:t,position:e?.toString()})||{}});function Ce(e,t){const{img:n,assets:i,targetId:r,tagCode:o,region:a,regionIndex:s}=e,c=function(e,t){const n={ver:Se,privacy:1,assets:[]};if(e?.length)n.assets=e.map(((e,t)=>({id:t+1,required:e.required?1:0,...e.title&&{title:{len:140}},...e.img&&{img:{type:e.img.type,w:e.img.w,h:e.img.h}},...e.data&&{data:{type:e.data.type,len:e.data.len}}})));else{n.assets.push({id:1,required:1,title:{len:140}}),n.assets.push({id:2,required:1,data:{type:ve.hy.providerName.data.type}});const e=(t?.w??0)>0&&(t?.h??0)>0;n.assets.push({id:3,required:e?1:0,img:{type:ve.hy.img.img.type,w:t?.w??0,h:t?.h??0}})}return{ortb:n}}(i?.[0],n);return{targetId:r,member:u.Se,invCode:o,native:c,extInvCode:m.jG?.LocaleContentMarket?.market||"CO",allowSmallerSizes:!1,nobidIfUnsold:!0,trafficSourceCode:we(o,t.rid),keywords:be(Number(s),a)}}class Te{constructor(){this.events=[]}static getInstance(){return f.Gq.get("__NativeAdXandrWrapper__",(()=>new Te))}async loadSdkAsync(){return(0,Z.di)()?Promise.resolve(!0):(0,Z.mP)().then((()=>!!(0,Z.di)())).catch((()=>!1))}setEndpoint(e){globalThis.apntag.setEndpoint(e)}configPlacements(e,t){const n=ye(t);this.runCommand((()=>globalThis.apntag.setPageOpts(n)));const i=(0,Z.me)();i&&this.runCommand((()=>globalThis.apntag.setTrkjsEndpoint(i)));const r=[];return e.forEach((e=>{this.runCommand((()=>this.removeAllEventListeners(e.targetId)));const n=Ce(e,t);r.push(n),this.runCommand((()=>globalThis.apntag.defineTag(n))),this.attachEventHandlers(e.targetId,t.isPrerenderAdBeforeReveal)})),r}startAdServerCalls(e){globalThis&&globalThis.apntag&&this.runCommand((()=>{const t=!0===C.Al.IsPrerender?performance.now()-(0,s.TZ)(c.DB):performance.now();e.forEach((e=>se(e.targetId,"NAdInitiate",t))),globalThis.apntag.loadTags(e.map((e=>e.targetId)))}))}fireServeBeacon(e){globalThis&&globalThis.apntag&&globalThis.apntag.fireImpressionTrackers(e)}attachClickBeacon(e,t){globalThis&&globalThis.apntag&&globalThis.apntag.attachClickTrackers(e,t)}addEventListener(e,t){((e,t,n,i=!1)=>{i?n[e]?n[e].push(t):n[e]=[t]:e&&"function"==typeof t&&n&&(ne.k.log(`DisplayAd: addEventListener eventName: ${e} callback: ${t} events: ${n}`),n[e]&&n[e][0].toString()!=t.toString()?n[e].push(t):n[e]=[t])})(e,t,this.events)}removeAllEventListeners(e){["adRequested","adAvailable","adError","adRequestFailure","adNoBid"].forEach((t=>{globalThis.apntag.offEvent(t,e)}))}attachEventHandlers(e,t){const n=this.events;globalThis.apntag.onEvent("adRequested",e,(()=>{se(e,t?"TTNativeAd.Background.Request":"TTNativeAd.Request",(0,p.v0)(C.Al.IsPrerender&&!t,performance.now())),J.logCount(G.adRequestedCnt)})),globalThis.apntag.onEvent("adAvailable",e,(i=>{se(e,"TTNativeAd.Response",(0,p.v0)(C.Al.IsPrerender&&!t,performance.now())),((e,t=!1)=>{if(ae)return;const n=te(),i=performance?.getEntriesByName?.(n)?.[0];if(i){const e=i.serverTiming?.[0]?.duration;e&&(0,s.su)("NAdServerLatency",e)}const r=ce(e,"TTNativeAd.Response");if(r){ae=!0;let n=!0;const i=ce(e,"NAdInitiate"),c=t?"TTNativeAd.Background.Request":"TTNativeAd.Request",d=ce(e,c);i&&d||((0,o.H)(a.vaV,"Unable to find cached request marker for a new ad response"),n=!1),(0,s.su)("TTNativeAd.Response",r),n&&((0,s.su)("NAdInitiate",i),(0,s.su)(c,d),(0,s.su)("NAdInitiateToReq",d-i),(0,s.su)("NAdFetch",r-d),(0,s.su)("NativeAd.ApiDuration",r-d))}else(0,o.H)(a.vaV,"Unable to find cached response marker for a new ad response")})(e,t),J.logCount(G.adAvailableCnt),ie(re.AdReturned,i,n,"xandr",!0)})),globalThis.apntag.onEvent("adError",e,(e=>{this.adNotReturned(e,n),J.logCount(G.adErrorCnt)})),globalThis.apntag.onEvent("adRequestFailure",e,(e=>{this.adNotReturned(e,n),J.logCount(G.adRequestFailureCnt)})),globalThis.apntag.onEvent("adNoBid",e,(e=>{this.adNotReturned(e,n),J.logCount(G.adNobidCnt)})),globalThis.apntag.onEvent("adBadRequest",e,(e=>{this.adNotReturned(e,n),J.logCount(G.adBadRequestCnt)}))}adNotReturned(e,t){ie(re.AdNotReturned,e,t,"xandr")}runCommand(e){globalThis.apntag.anq.push(e)}}const ke=(0,K.h)(Te);class Pe{constructor(){this.groupedAdRequests={},this.adRequestsInfoById={},this.initialized=!1,this.handleAdNotReturned=e=>{const t=e.targetId;if(!t||!this.adRequestsInfoById[t])return;const{_groupKey:n,_cancelled:i}=this.adRequestsInfoById[t];i||(this.adRequestsInfoById[t]={...this.adRequestsInfoById[t],_fetched:!0,fetchedData:null},this.updateGroupInfoOnAdUpdate(n))},this.handleAdReturned=e=>{const t=e.targetId;if(!t||!this.adRequestsInfoById[t])return;const{_groupKey:n,_onAvailable:i,_cancelled:r}=this.adRequestsInfoById[t];if(r)return;const o=i&&i(this.adRequestsInfoById[t].initialData,e);this.adRequestsInfoById[t]={...this.adRequestsInfoById[t],_fetched:!0,fetchedData:o},this.updateGroupInfoOnAdUpdate(n)}}initialize(e){this.initialized||(this.sdkWrapper=e,this.sdkWrapper.addEventListener(re.AdReturned,this.handleAdReturned),this.sdkWrapper.addEventListener(re.AdNotReturned,this.handleAdNotReturned),this.initialized=!0)}registerPlacements(e,t,n){const i=[];let r=0;e.forEach((e=>{const{targetId:t}=e||{};r+=1,i.push(t)}));const o=(()=>{if(window.location.href.includes("xdruuid="))return window.location.href.split("xdruuid=")[1].split("&")[0];let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))})();this.groupedAdRequests[o]={targetIds:i,pendingCount:r,onCompleteAll:t},e.forEach((e=>{const{targetId:t}=e;this.adRequestsInfoById[t]={initialData:{...e},fetchedData:null,_fetched:!1,_groupKey:o,_onAvailable:n,_cancelled:!1}}))}unregisterPlacements(e){let t;return e.forEach((e=>{const{targetId:n}=e;n&&(this.sdkWrapper&&this.sdkWrapper.removeAllEventListeners(n),this.adRequestsInfoById[n]._cancelled=!0,t||(t=this.adRequestsInfoById[e.targetId]._groupKey))})),this.collectGroupResults(t)}collectGroupResults(e){if(!e)return null;const t=this.groupedAdRequests[e];if(!t||!t.targetIds||0==t.targetIds.length)return null;const n={data:[]};return t.targetIds.forEach((e=>{const t=this.adRequestsInfoById[e];if(t&&t._fetched){const e={initialData:t.initialData,fetchedData:t.fetchedData};n.data.push(e)}})),n}updateGroupInfoOnAdUpdate(e){const t=this.groupedAdRequests[e];t.pendingCount-=1,0===t.pendingCount&&t.onCompleteAll(this.collectGroupResults(e))}}var Ae=n(10034);const Ie=(e,t,n)=>e&&0!==e.length?e.filter((e=>e.event===t&&e.method===n)).map((e=>e.url)):[],Ee=e=>{const t=(n=e.imptrackers,i=e.eventtrackers,n?.length>0?n:Ie(i,1,1));var n,i;const r=((e,t)=>{if(e)return[(e=>{const t=e.match(/<script.*?src=["'](.*?)["']/i);return t?t[1]:e})(e)];return Ie(t,1,2)})(e.jstracker,e.eventtrackers),o=(e=>Ie(e,2,1))(e.eventtrackers);return{impressionTrackers:t,javascriptTrackers:r,viewabilityTrackers:o}},Re=(e,t)=>{const n=12085===e.buyerMemberId?"https://account.microsoft.com/privacy/ad-settings":"https://monetize.xandr.com/privacy-center/captcha?next_page=/privacy-center/delete";const i=(e=>{const{rid:t,locale:n,region:i,index:r,relativeIndex:o,pageType:a,tagCode:s,auctionId:c,buyerMemberId:d,bidderId:u,msxCreativeId:l,isPrebidServerBid:p}=e||{},h=m.jG.CurrentRequestTargetScope?.browser?.browserType,g=p?d:0;return(0,Ae.$A)("https://g.msn.com/neg/0?type=adsfb",{rid:t,r:i,i:r?.toString(),p:a,l:n,d:u?.toString(),b:h,a:c,ii:o?.toString(),c:l,tid:s,m:g?.toString()})})({rid:t.rid,locale:t.locale,region:t.region,index:t.index,relativeIndex:t.relativeIndex,pageType:t.pageType,tagCode:t.tagCode,auctionId:e.auctionId,buyerMemberId:e.buyerMemberId,bidderId:e.msft?.bidder_id,msxCreativeId:e.msft?.msx_creative_id,isPrebidServerBid:e.is_prebid_server_bid}),r=((e,t)=>{const{impressionTrackers:n,javascriptTrackers:i,viewabilityTrackers:r}=Ee(e),s={clickUrl:e.link.url,clickTrackers:e.link.clicktrackers,[ve.aT.providerName]:{value:""},[ve.aT.img]:{w:0,h:0,url:""},impressionTrackers:n,javascriptTrackers:i,privacyLink:e.privacy,title:{text:""},transformedAssets:[],viewabilityTrackers:r},c={};t.assets.forEach((e=>{e.data?c[e.id]={type:"data",subType:e.data.type}:e.img?c[e.id]={type:"img",subType:e.img.type}:e.title&&(c[e.id]={type:"title"})}));const d=[{type:"title"},{type:"img",subType:3}],u=[];return e.assets.forEach((e=>{const t=c[e.id];if(t){const{type:n,subType:i}=t,r=e[n],o="img"===n?"image":n;s[i?`${o}-${i}`:o]=r,d.some((e=>e.type===n&&(!e.subType||e.subType===t.subType)))||u.push({required:e.required,[n]:{...r,type:t.subType}})}else(0,o.H)(a.KMm,"Unable to find matched request info","assets error",{asset:e})})),s.transformedAssets=u,s})(e.native?.ortb,t.tagObject?.native?.ortb),s=r.title.text,c=r[ve.aT.providerName].value,d=r[ve.aT.img],u={url:r.clickUrl,sourceName:c,title:s,imageUrl:d.url,uniqueId:e.targetId,adChoicesUrl:r.privacyLink||n,clickBeacons:JSON.stringify({tcb:r.clickTrackers}),assets:r.transformedAssets};return{beaconsJson:JSON.stringify({e:!0,tjb:r.javascriptTrackers,trb:r.impressionTrackers,tvb:r.viewabilityTrackers}),crids:e.msft?.crids||[],feedbackUrl:i,id:t.id,imageWidth:d.w,imageHeight:d.h,index:t.index,items:[u],locale:t.locale,msft:e.msft,pageType:t.pageType,privacyUrl:n,region:t.region}};class Me{static getInstance(){return f.Gq.get("__NativeAdSdkService__",(()=>new Me))}async fetchAds(e,t){return e&&e.placements&&0!==e.placements.length?ke.loadSdkAsync().then((n=>{if(!n)return null;(0,Z.yo)(),ke.setEndpoint(ee),this.eventHub||(this.eventHub=new Pe,this.eventHub.initialize(ke));const i=this.buildPlacementsToFetch(e,t),r=ke.configPlacements(i,t),s=this.buildPlacementsRegisteredToEventHub(i,r,t),c=this.getRequestTimeout(t),d=new X.o(c);if(this.eventHub.registerPlacements(s,(e=>d.set(e)),this.calculateUpdates),"undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("resource")){const e=new PerformanceObserver((t=>{t.getEntries().forEach((t=>{t.name===te()&&(t.duration>c&&(0,o.H)(a.ebQ,"Xandr endpoint timed out",`duration: ${t.duration}`),e.disconnect())}))}));e.observe({entryTypes:["resource"]})}return ke.startAdServerCalls(i),J.logCount(G.adFetchInitializedCnt,i.length),d.getResultAsync().then((e=>{if(void 0===e){const e=this.eventHub.unregisterPlacements(s);return this.logResponseTimeout(i,e?.data||[],c),this.formatAdResponse(e)}return J.logCount(G.adResponseReceivedCnt,e?.data?.length||0),0===e?.data?.length&&(this.logResponseEmpty(s),(0,o.H)(a.Mly,"Empty response from Xandr sdk","")),this.formatAdResponse(e)}))})).catch((e=>((0,o.OO)(e,a.yOM,""),null))):((0,o.H)(a.JVh,"Empty placements in ad request"),Promise.resolve(null))}buildPlacementsToFetch(e,t){const n=[];return e.placements.forEach((e=>{const{indices:i,img:r,region:o,allIndices:a,diceRoll:s}=e;let{adContainerIds:c,assets:d}=e;c||(c=i.map((e=>`${t.pageType}-${o}-${e}-${(0,Y.pW)()}`))),i&&i.length&&c&&c.length&&i.forEach(((e,i)=>{const u=Number(e);n.push({region:o,regionIndex:e,mappedPosition:u,targetId:c[i],img:r,allIndices:a,diceRoll:s,assets:d,tagCode:`${t.pageType}-${o}-${u}`.toLowerCase()})}))})),n}buildPlacementsRegisteredToEventHub(e,t,n){const i=[];return e.forEach(((e,r)=>{const{region:o,regionIndex:a,targetId:s,tagCode:c}=e;i.push({targetId:s,region:o,index:Number(a),relativeIndex:r+1,pageType:n.pageType,id:`extcontentsponcon_${n.pageType}_${o}_${a}`,rid:n.rid,locale:n.locale,tagCode:c,tagObject:t[r]})})),i}calculateUpdates(e,t){return((e,t)=>{const n=t?.native?.ortb;if(!n)return(0,o.H)(a.KMm,"Unexpected data in Xandr native ad response","missing ortb"),!1;if(!n?.link?.url)return(0,o.H)(a.KMm,"Unexpected data in Xandr native ad response","missing click url"),!1;if(!n.assets||!e?.native?.ortb?.assets)return(0,o.H)(a.KMm,"Unexpected data in Xandr native ad response","missing assets"),!1;const i=e.native.ortb.assets,r=n.assets;return!i.filter((e=>1===e.required)).some((n=>{const i=r.find((e=>e.id===n.id));return i?!!(n.data&&!i.data||n.img&&!i.img||n.title&&!i.title)&&((0,o.H)(a.KMm,"Unexpected data in Xandr native ad response","assets error",{mismatchAssetId:n.id,tag:JSON.stringify(e),adObj:JSON.stringify(t)}),!0):((0,o.H)(a.KMm,"Unexpected data in Xandr native ad response","assets error",{missingAssetId:n.id,tag:JSON.stringify(e),adObj:JSON.stringify(t)}),!0)}))})(e?.tagObject,t)?Re(t,e):{}}formatAdResponse(e){return{placements:(e?.data||[]).map((e=>e.fetchedData)).filter((e=>e&&Object.keys(e).length>0))}}getRequestTimeout(e){return e.fetchTimeout??u.il.Timeout}logResponseTimeout(e,t,n){const i=e.filter((e=>!t.find((t=>t.targetId===e.targetId)))).map((e=>e.targetId));(0,o.H)(a.$Dp,"Timeout calling Xandr sdk",`missing placements: (${i.join(",")}) timeout: ${n}ms`),J.logCount(G.adTimeoutCnt,i.length)}logResponseEmpty(e){const t=e.map((e=>`${e.region}-${e.index}`)).join(",");(0,o.H)(a.Mly,"Empty response from Xandr sdk",t)}}const xe=(0,K.h)(Me);var Le=n(59002),Fe=n(57167),De=n(43499),Oe=n(4);const _e=(e,t,n,i={},r,o)=>{const a=t?.placementLevelSignals?.[n],s=e?.auctionLevelSignals;if(r?.passExtraAdSignals&&(a&&(i.modelSignals={coords:a?.coords?{x:a.coords.x,y:a.coords.y}:void 0,isCoordsInv:a?.isCoordsInvalidated||void 0,cardSize:a?.cardSize||void 0,pageRegion:a?.pageRegion||void 0}),s&&!r.passRequestModelSignals&&(i.requestModelSignals={vpSize:s?.vpSize?{w:s?.vpSize?.w,h:s?.vpSize?.h}:void 0,isPrerender:s?.isPrerender||void 0,isSSR:s?.isSSR||void 0,ocid:r?.passAdOcidRegSize&&s?.ocid||void 0})),r?.passBrandSafetySignals&&(i.brandSafety={adjCardIds:a?.adjacentCardIds?.length?[...a.adjacentCardIds]:void 0,isPartialAdjList:a?.isPartialBrandSafety||void 0}),r?.passDTSignals){const e=(0,T.yw)(t.region),n=r.dtsRequestConfig?.find((t=>t.region===e));n?.dtsTemplateConfig&&(i.dts=Ne(n.dtsTemplateConfig))}return Ue(i),e?.passUnstableGalleryAdSignal&&t.region===Oe.yp.interstitialgallery&&$e(i,!e?.isStableGAInterstitialAds),i},Ne=e=>({templates:e.map((({dtsTemplateId:e,assets:t,lineCountConstraints:n})=>{const i={id:e,assets:(0,T.Z)(t)?t.map(Be):[]};return Array.isArray(n)&&(i.lcconstrs=n.map((({assetIds:e,lineCountLimit:t})=>({assetkeys:e,lclimit:t})))),i}))}),Be=e=>{switch(e.type){case"title":return{id:e.assetId,required:e.required,title:{len:e.length,ext:{linelen:e.lineLen}}};case"image":return{id:e.assetId,required:e.required,img:{type:e.subTypeId,w:e.imageSize.w,h:e.imageSize.h}};default:return{id:e.assetId,required:e.required,data:{type:e.subTypeId,len:e.length,ext:{linelen:e.lineLen}}}}},Ue=e=>{e.device={pxratio:Math.round(100*(0,h.x_)())/100}},$e=(e,t)=>{e.modelSignals=e.modelSignals||{},e.modelSignals={isUnstableGAAd:t}};var He=n(12031),We=n(15598);const Ge=async(e,t,n,i,r,s,c,d)=>{if(r){const e=r.serverTiming&&r.serverTiming[0]?.duration;if(e&&c("NAdServerLatency",e),i>-1){const e=(0,p.v0)(t&&!n,r.requestStart),o=e-i;c("NAdInitiateToReq",o>0?o:0),s||d(n?"TTNativeAd.Background.Request":"TTNativeAd.Request",0,e)}c("TTNativeAd.Response",(0,p.v0)(t&&!n,r.responseEnd)),r.isApproximate||d("NAdFetch",r.fetchStart,r.responseEnd),c("NativeAd.ApiDuration",r?.duration)}else"winWidgets"!==m.jG.AppType&&(0,o.H)(a.iVH,"Unable to find performance entry for RTB request","",{shouldSampleErrorsForTreatement1:!0})};function Ve(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}var qe=n(93206);class je{get sourceUrl(){if(this._sourceUrl)return this._sourceUrl;this._sourceUrl=m.jG.HostPage.originalUrl;const e=m.jG.CurrentRequestTargetScope.pageType,t=m.jG.HostPage.verticalKey;if(e&&t&&(!this.config?.fixAuctionSrcUrl||!this._sourceUrl)){const n=e.toLowerCase();(n.indexOf("dhp")>-1||n.indexOf("ntp")>-1)&&(this._sourceUrl="https://"+m.jG.HostPage.hostName+"/"+t+"/"+e)}return this._sourceUrl}get pageType(){if(this._pageType)return this._pageType;const e=m.jG.CurrentRequestTargetScope.pageType,t=m.jG.CurrentRequestTargetScope.ocid;switch(m.jG.AppType){case"edgeChromium":this._pageType="edgechrntp";break;case"views":if((0,O.wq)()&&["article","gallery","video","videoinf"].includes(e)){const t=(0,z.v)();"article"===e?this._pageType="iOS"===t?.platform?"saiar":"saaar":"gallery"===e?this._pageType="iOS"===t?.platform?"saiga":"saaga":"video"===e?this._pageType="iOS"===t?.platform?"saiwatch":"saawatch":"videoinf"===e&&(this._pageType="iOS"===t?.platform?"saivi":"saavi")}else if("article"===e)this._pageType=this.isWindowsViewsPage(t)?"winar":"webcompar";else if("gallery"===e)this._pageType=this.isWindowsViewsPage(t)?"winga":"webcompga";else if("video"==e||"video-widget"==e&&m.jG.IsChinaCompliance)this._pageType="watch";else{new Set(["topic","source"]).has(e)&&(this._pageType="vlp")}break;case"gaming":case"hub":case"sports":this._pageType="vlp";break;case"windows":location.href.includes("feed/interest/following")?this._pageType="Winweb":this._pageType=e;break;case"winWidgets":return"gallery"===e?"prongga":"prongar";default:this._pageType=e}return this._pageType}constructor(e){this.config=e,this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,this.isXandrMigrationControlFlight=C.Al?.CurrentFlightSet?.has("ads-ntpsupplyc"),this.beaconService=new A.A,this.cookieService=new De.N,this.ecasession=u.Lr.Ecasession;const t=U._.getInstance().rootReducer;if("edgeChromium"===m.jG.AppType){const e=t.connector(N.RL);e&&(this.anaheimPageLayout=e.getCurrentState().currentLayout),this.config?.sendAdBlockDetectionFromEdge&&e&&(this.isAdBlock=e.getCurrentState()?.configData?.isAdblockerEnabled)}this._pageType=e?.adPageType,(0,q.l)().addSwitchListener(this.onPivotSwitch.bind(this),j.I.Monetization)}validEdgeChromiumPageType(e){return"edgechrntp"===e||"edgechrntpruby"===e}async fetchSAMAds(e,t=!1,n=!1,i=null,r,d,l,p){if(!e||!e.placements||e.placements.length<1)return void(0,o.H)(a.rmC,"Invalid request to fetch native ads","No placements found in the request");const h=e.pageType||this.pageType;if(!h)return void(0,o.H)(a.rmC,"Invalid request to fetch native ads","No page type found");const f="ru-xl"===e.locale?"en-xl":e.locale,y=m.jG?.HostPage?.verticalKey,v=m.jG?.CurrentRequestTargetScope?.audienceMode,S=m.jG?.CurrentRequestTargetScope?.ocid,w=this.riverNativeAdCount,b=this.reservedRiverNativeAdCount,T=this.dualWideRiverNativeAdCount,k=this.halfRiverNativeAdCount,P=pe.pg.maskIdentifiers(this.getMuid(e.muid)),A=pe.pg.maskIdentifiers(e.anid);this._isSuperAppPage=this.isSuperAppPage(h,e.appName),this._isChannelAppPage=this.isChannelAppPage(h,e.appName),this._isMsnHpMobileAppPage=this.isMsnHpMobileAppPage(h,e.appName);const I=this._isSuperAppPage||this._isChannelAppPage||this._isMsnHpMobileAppPage||!(!C.Al.ClientSettings||!C.Al.ClientSettings.deviceFormFactor||"phone"!==C.Al.ClientSettings.deviceFormFactor),E=this.getImpressionId(),R=!this._isSuperAppPage&&this.cookieService.getBrowserOptoutStatus(),M=!this._isSuperAppPage&&await(0,Fe.UF)();if((this.isXandrMigrationControlFlight||e.enableNativeAdXandr||this.config?.enableNativeAdXandr)&&J.logRequestLevelCount(),e.enableNativeAdXandr||this.config?.enableNativeAdXandr){const t=e.tmaxbidder??e.tmax??0,n=this.config?.auctionTimeoutOverride??u.il.Timeout,i=this.getMuidIfNoCookieWall(P,M),o={anid:this.getAnidIfNoCookieWall(A,M),authCookieName:M?null:this.getAuthCookieName(),audienceMode:v,bidTimeout:t,browserOptout:R,fetchTimeout:n,impressedCrids:He.k.getDedupeIds(),isMobile:I,locale:f,muid:i,ocid:S,pagelayout:this.anaheimPageLayout,pageType:h,rid:E,verticalName:y,isPrerenderAdBeforeReveal:r},a=this.getPlacementsForXandr(e),s={placements:a};return J.logCount(G.adBeforeFetchCnt,a.reduce(((e,t)=>e+t.indices.length),0)),xe.fetchAds(s,o)}const x=this.isNotMyFeed(),F=e.partnerId||m.jG.CurrentRequestTargetScope.pageType,{anaheimColLayout:D}=e,O=!!window.__tcfapi;M||this._isSuperAppPage||!t||(this.ecasession=(0,L.ej)(u.yV.TaboolaSessionCookieName)||this.ecasession),void 0===this.isAdBlock&&(this.config&&this.config.sendAdBlockDetection?this.isAdBlock=function(){if((0,We.$o)().supported){const e=(0,We.$o)().getObject("BT_AA_DETECTION",void 0);if(void 0!==e)return!1===e.acceptable}return!1}():this.isAdBlock=!1);const _={adRefreshVariant:e.adRefreshVariant??"",locale:f,rid:E,partnerId:F,content:{sourceUrl:this.sourceUrl,pageType:h,previousReservedRiverNativeAdCount:b,previousRiverDualWideNativeAdCount:T,previousRiverHalfNativeAdCount:k,previousRiverNativeAdCount:w,verticalName:y,anaheimPageLayout:this.anaheimPageLayout,anaheimColLayout:D,isXfeed:x,audienceMode:v},user:{browserOptOut:R,isAdblock:this.isAdBlock,gdpr:O,...P&&{muid:P}},placements:this.getPlacements(e,h),extensions:this.getExtensions(this.lastResponseMetadata,this.ecasession),isCookieWallPresent:M,isPeregrine:!0,device:{isMobile:I}};(0,Le.Z)(e.tmax)&&(_.tmax=e.tmax),(0,Le.Z)(e.tmaxbidder)&&(_.tmaxbidder=e.tmaxbidder);this.config&&this.config.enablePrerenderAdsAuctionFlag&&(0,g.N)()&&(_.content.prerender=r?1:0);const N=(0,L.ej)(u.il.BCPCookieKey);"bingHomepage"===m.jG.AppType&&N&&(_.user.bcp=N),this._isSuperAppPage&&(_.app={adid:e.adid,anid:e.anid,muid:e.muid,sapphireid:e.sapphireid,version:e.clientVersion,bundle:e.packageName}),(0,g.N)()&&(C.Al?.CurrentFlightSet?.has("prg-ads-dupe-ck")?_.extensions.impressedCrids=He.k.getDedupeIds(e?.placements[0]?.region,h):_.extensions.impressedCrids=He.k.getDedupeIds(e?.placements[0]?.region),C.Al?.CurrentFlightSet?.has("prg-ads-dupe-hit")&&(e.impressedCrids=_.extensions.impressedCrids));const U={};U.isAppTraffic=this._isSuperAppPage,C.Al.CurrentFlightSet?.has(B.HR)||(U.enablePageObject=!0),this.config?.passDeviceOS&&await this.getDeviceOSInfo(U);const $=(0,ue.c1)(this.config,U,e);$&&(_.extensions.msan_kv=$),this.config?.enableAdTargetingKeywords&&(_.keywords=(0,H.km)(((e,t)=>({key:e,value:Array.isArray(t)?t:[t]}))));const W=i||u.Lr.SamDomain,q=n?u.Lr.SamOpenRtbEndpoint:u.Lr.SamEndpoint,j=new URL(q,W),z=n?this.createOpenRtbRequest(_):_,K=JSON.stringify(z),Q=!0===C.Al.IsPrerender?performance.now()-(0,s.TZ)(c.DB):performance.now();(0,s.su)("NAdInitiate",Q),this.stampSamRequestIndices(e.placements);const X=e.placements.reduce(((e,t)=>e+t.indices.length),0);return this.isXandrMigrationControlFlight&&J.logCountForMSX(V.adRequestedCnt,X),this.fetchSAMAdsCSR(K,f,P,j.href,h,z,r,n,d,l,p,X)}async getDeviceOSInfo(e){const t=await navigator.userAgentData.getHighEntropyValues(["architecture","platform","platformVersion"]),{platformVersion:n,architecture:i,platform:r}=t||{};n&&i&&r||(0,o.H)(a.ZG6,"Fail to retrieve OS info [Request_level_MSAN_KV]",null,{platformDetails:t}),e.device={osv:t?.platformVersion,arch:t?.architecture,os:t?.platform}}stampSamRequestIndices(e){let t="";e.forEach((e=>e.indices.forEach((n=>{t+=`${e.region}-${n}|`})))),y.M0.addOrUpdateTmplString(t)}processAdResponse(e,t,n){if(200!==e.status)return 204===e.status?((0,o.H)(a.jZQ,"Get 204 error from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}, request: ${t}`,{shouldSampleErrorsForTreatement1:!0}),this.isXandrMigrationControlFlight&&J.logCountForMSX(V.adNoBidCnt,n),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):((0,o.H)(a.I2B,"Invalid response from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}, request: ${t}`,{shouldSampleErrorsForTreatement1:!0}),void(this.isXandrMigrationControlFlight&&J.logCountForMSX(V.adInvalidResponseCnt,n)));try{const t=JSON.parse(e.response);if(!t)return(0,o.H)(a.K8d,"Invalid json response from SAMRTB",`Status: ${e.status}, Invalid json: ${e.response}`),void(this.isXandrMigrationControlFlight&&J.logCountForMSX(V.adEmptyResponseErrorCnt,n));const i=t.metaData;if(this.processMetaData(i),this.beaconService.fireRequestLevelBeacons(i.requestLevelBeaconUrls),this.isXandrMigrationControlFlight){const e=t.placements.length;J.logCountForMSX(V.adAvailableCnt,e),e<n&&J.logCountForMSX(V.adNoBidCnt,n-e)}return t}catch(t){return(0,o.OO)(t,a.ryt,"Failed to process SAMRTB response",`Status: ${e.status}, json: ${e.response}`),void(this.isXandrMigrationControlFlight&&J.logCountForMSX(V.adResponseFormatErrorCnt,n))}}processOpenRtbAdResponse(e,t){if(200!==t.status)return 204===t.status?((0,o.H)(a.jZQ,"Get 204 error from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}`,{shouldSampleErrorsForTreatement1:!0}),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):void(0,o.H)(a.I2B,"Invalid response from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}`,{shouldSampleErrorsForTreatement1:!0});try{const n=JSON.parse(t.response);if(!n)return void(0,o.H)(a.K8d,"Invalid json response from SAMRTB",`Status: ${t.status}, Invalid json: ${t.response}`);const i=this.convertOpenRtbResponseToNativeAdResponse(e,n),r=i.metaData;return this.processMetaData(r),this.beaconService.fireRequestLevelBeacons(r.requestLevelBeaconUrls),i}catch(e){return void(0,o.OO)(e,a.ryt,"Failed to process SAMRTB response",`Status: ${t.status}, json: ${t.response}`)}}createOpenRtbRequest(e){const t=JSON.stringify({native:{assets:[{id:1,img:{type:3}}]}});let n=1;const i=e.placements.flatMap((i=>i.indices.map((r=>({id:(n++).toString(),tagid:`${e.content.pageType}-${i.region}-${r}`,native:{request:t},ext:{msn:{index:r,region:i.region}}}))))),r={url:e.content.sourceUrl,ext:{locale:e.locale,msn:{pageType:e.content.pageType,verticalName:e.content.verticalName,anaheimPageLayout:e.content.anaheimPageLayout,isXfeed:e.content.isXfeed,audienceMode:e.content.audienceMode,isPeregrine:e.isPeregrine,previousReservedRiverNativeAdCount:e.content.previousReservedRiverNativeAdCount,previousRiverDualWideNativeAdCount:e.content.previousRiverDualWideNativeAdCount,previousRiverHalfNativeAdCount:e.content.previousRiverHalfNativeAdCount,previousRiverNativeAdCount:e.content.previousRiverNativeAdCount,partnerId:e.partnerId}}},o={id:u.Lr.PublisherId},a={id:Ve(),imp:i,user:{dnt:e.user.browserOptOut?1:0,ext:{anid:"",muid:e.user?.muid,msn:{isCookieWallPresent:e.isCookieWallPresent,bcp:e.user.bcp}}},device:{devicetype:e.device.isMobile?1:2,ext:{isAdBlock:e.user.isAdblock}},ext:{sessionId:e.rid,admConfiguration:{useAdmObject:!0,useMultipleAdms:!0,maxAdmCount:999},msn:{adRefreshVariant:e.adRefreshVariant,metadata:e.extensions}}};return this._isSuperAppPage?a.app={id:u.Lr.AppId,bundle:e.app.bundle,ver:e.app.version,content:r,publisher:o,ext:{msn:{adid:e.app.adid,sapphireId:e.app.sapphireid}}}:a.site={content:r,publisher:o},a}createSamRtbXmlHttpRequest(e,t,n){const i=new XMLHttpRequest;i.open(u.il.Method,n,!0),i.withCredentials=!0,i.timeout=this.config&&this.config.auctionTimeoutOverride?this.config.auctionTimeoutOverride:u.il.Timeout,i.setRequestHeader(u.il.ContentTypeKey,u.il.ContentType),C.Al.CurrentFlightSet?.has(B.$e)||i.setRequestHeader(u.il.FlightIdKey,C.Al.CurrentFlights),i.setRequestHeader(u.il.AdsNumberLineKey,C.Al.AdsNumberLines),i.setRequestHeader(u.il.CacheControlKey,u.il.CacheControl),i.setRequestHeader(u.il.MarketKey,e);const r=(0,qe.W)(t);r&&i.setRequestHeader(u.il.ClientIdKey,r);const o=this.getAuthCookieName();return o&&i.setRequestHeader(u.il.AuthCookieNameKey,o),i}async fetchSAMAdsCSR(e,t,n,i,r,c,d,u,l,p,h,g){if(p&&!u&&h){const t=await p.tryReadCache(e,C.Al.CurrentFlights,i,d);if(t){this.isXandrMigrationControlFlight&&J.logCountForMSX(V.adReturnedFromCacheCnt,g);try{return this.processAdResponse(await(async e=>({status:e.status,statusText:e.statusText,response:await e.text()}))(t),e,g)}catch(e){(0,o.OO)(e,a.ryt,"Failed to read cached response from SAMRTB call",`pageType: ${r}`)}}}return new Promise((h=>{try{const f=this.createSamRtbXmlHttpRequest(t,n,i);f.onload=()=>{(async(e,t,n=!1)=>{const i=performance.getEntriesByName&&performance.getEntriesByName(e)&&performance.getEntriesByName(e)[0],r=(0,s.O0)("NAdInitiate");Ge(0,t,n,r,i,!1,((e,t)=>{(0,s.su)(e,t)}),((e,t,n)=>{(0,s.O_)(e,t,n)}))})(i,C.Al.IsPrerender,d),u?h(this.processOpenRtbAdResponse(c,f)):(p&&200===f.status&&requestIdleCallback((()=>p.writeCache((e=>{const t={};return e.getAllResponseHeaders().split("\n").forEach((e=>{const[n,i]=e.split(": ");n&&i&&(t[n]=i)})),new Response(e.responseText,{status:e.status,statusText:e.statusText,headers:new Headers(t)})})(f),e,C.Al.CurrentFlights,i,d))),h(this.processAdResponse(f,e,g)))},f.ontimeout=()=>{(0,o.H)(a.e6B,"Timeout calling SAMRTB Ajax",`pageType: ${r}, status: ${f.status}, StatusText: ${f.statusText}, StartTime: ${m}, EndTime: ${(new Date).toISOString()}, url: ${i}`,{shouldSampleErrorsForTreatement1:!0}),this.isXandrMigrationControlFlight&&J.logCountForMSX(V.adTimeoutCnt,g),h(void 0)},f.onerror=()=>{(0,o.H)(a.I2B,"Error calling SAMRTB Ajax",`pageType: ${r}, status: ${f.status}, StatusText: ${f.statusText}, StartTime: ${m}, EndTime: ${(new Date).toISOString()}, url: ${i}`,{shouldSampleErrorsForTreatement1:!0}),this.isXandrMigrationControlFlight&&J.logCountForMSX(V.adErrorCnt,g),h(void 0)};const m=(new Date).toISOString();f.send(e),l&&l()}catch(e){(0,o.OO)(e,a.ryt,"Failed to get response from SAMRTB call",`pageType: ${r}, url: ${i}`),h(void 0)}}))}convertOpenRtbResponseToNativeAdResponse(e,t){const n=t.seatbid?.flatMap((e=>e.bid))?.filter((e=>e.ext.admObjects.length>0))??[],i=new Map;e.imp.forEach((e=>i.set(e.id,e)));return{placements:n.map((e=>{const t=e.ext.admObjects[0].native.ext.msn.mappedRegion,n=e.ext.admObjects.flatMap((e=>e.native.eventtrackers)),{geminiViewabilityDataJson:r,beaconsSupportHttpPOST:o}=e.ext.admObjects[0].native.ext.msn,a=e.ext.admObjects[0].native.privacy,s=[],c=[],d=[],u=[];n?.forEach((e=>{e.ext?.msn?.isBingTracker&&2==e.event?u.push(e.url):2==e.method?d.push(e.url):1==e.event&&1==e.method?s.push(e.url):2==e.event&&1==e.method&&c.push(e.url)}));const l=e.ext.admObjects.flatMap((e=>e.native.link.clicktrackers)),p=e.ext.admObjects[0].native.ext.msn.fireEncodedBeacons,h=JSON.stringify({tvb:c,trb:s,tcb:l,tjb:d,p:e.ext.bidderId,e:p}),g=e.ext.admObjects.map((e=>{const t=e.native,n={title:null,adSelectionReason:t.ext.msn.adSelectionReason,description:null,url:t.link.url,sourceName:null,adChoicesUrl:t.ext.adChoicesUrl,imageUrl:null,imageHeight:null,imageWidth:null,images:null,clickBeacons:null,uniqueId:t.ext.msn.uniqueId,beaconsJson:null,originalImageWidth:null,originalImageHeight:null,verificationParameters:t.ext.msn.verificationParameters,ext:t.ext.msn.ext,assets:[],eventtrackers:t?.ext?.msn?.eventtrackers};return n.clickBeacons=JSON.stringify({tcb:t.link.clicktrackers}),e.native.assets.forEach((e=>{if(e.ext.msn.isRtbAsset)e.img?n.assets.push({w:e.img.w,h:e.img.h,url:e.img.url,alt:e.img.ext.alt,ext:e.img.ext.msn}):n.assets.push(e);else if(e.data){const t=e.data.value;switch(e.data.type){case 1:n.sourceName=t;break;case 2:n.description=t}}else if(e.img){const{url:t,w:i,h:r}=e.img;switch(e.img.type){case 3:n.imageUrl=t,n.imageWidth=i,n.imageHeight=r,n.originalImageHeight=e.img.ext.msn.originalImageHeight,n.originalImageWidth=e.img.ext.msn.originalImageWidth;break;case 600:n.images||(n.images=[]),n.images.push({url:t,alt:e.img.ext.alt,ext:e.img.ext.msn})}}else null!=e.title&&(n.title=e.title.text)})),n})),f=i.get(e.impid);return{items:g,privacyUrl:a,adServedUrls:s,jsTrackerUrls:d,visibilityUrls:c,beaconsJson:h,bingTrackerUrls:u,beaconsSupportHttpPOST:o,geminiViewabilityDataJson:r,region:t,index:f.ext.msn.index}})),metaData:t.ext?.msn?.metadata}}updatePlacementStrictIndices(e,t){Oe.VR.includes(e.region)&&(t.isStrictIndices=!0),void 0!==e.isStrictIndices&&(t.isStrictIndices=e.isStrictIndices)}updateRequestedPlacementsInfo(e){const t=e.region.toLocaleLowerCase();t===u.Lr.RiverRegion?this.riverNativeAdCount+=e.indices.length:t===u.Lr.ReservedRiver?this.reservedRiverNativeAdCount+=e.indices.length:t===u.Lr.RiverDoubleWide?this.dualWideRiverNativeAdCount+=e.indices.length:t!==u.Lr.RiverHalf&&t!==u.Lr.RiverHalfTextOnly||(this.halfRiverNativeAdCount+=e.indices.length)}getPlacementsForXandr(e){const t=[];return e.placements.forEach((e=>{if(e.region&&e.indices&&e.indices.length){const{adContainerIds:n,indices:i,img:r,assets:o,region:a}=e,s={region:a,indices:i,img:r,adContainerIds:n,assets:o};this.updatePlacementStrictIndices(e,s),t.push(s),this.updateRequestedPlacementsInfo(e)}})),t}getPlacements(e,t){const n=[];return e.placements.forEach((i=>{if(i.region&&i.indices&&i.indices.length){const{assets:r,indices:o,img:a,extensions:s}=i;let c=i.region;const d=this.config?.adPlacementMapper?.some((e=>e.mappedRegion===i.region));d||(c=this.validEdgeChromiumPageType(t)&&u.d5[i.region]||i.region);const l=a?{assets:r,region:c,indices:o,img:a}:{assets:r,region:c,indices:o};s&&(l.extensions=s),this.config?.enableAdTargetingKeywords&&(l.keywords=W({region:c})),this.updatePlacementStrictIndices(i,l),n.push(l),this.updateRequestedPlacementsInfo(i),l.msan_kvs=((e,t,n,i)=>{try{const r=[];return t?.indices&&Array.isArray(t.indices)&&t.indices.forEach(((o,a)=>{let s={};s=_e(e,t,a,s,n,i),r.push(JSON.stringify(s))})),r}catch(e){return[]}})(e,i,this.config)}})),n}processMetaData(e){if(this._isSuperAppPage||this._isChannelAppPage||this._isMsnHpMobileAppPage)return;const t=e&&e.taboola&&e.taboola.sessionId;!this.isCookieWallPresent&&t&&(0,L.sq)(u.yV.TaboolaSessionCookieName,t,.042),this.lastResponseMetadata=this.mergeMetadata(this.lastResponseMetadata,e),this.cookieService.updateMsaOptOutCookie(e)}mergeMetadata(e,t){return e?t?(t.taboola=this.mergePartnerMetadata(e.taboola,t.taboola),t):e:t}mergePartnerMetadata(e,t){return t=t||{},e&&e.sessionId&&!t.sessionId&&(t.sessionId=e.sessionId),t}getImpressionId(){return this.config&&this.config.auctionRidOverride&&m.jG.ActivityIdLowerCaseNoHypens?m.jG.ActivityIdLowerCaseNoHypens:this.lastResponseMetadata&&this.lastResponseMetadata.pageViewId?this.lastResponseMetadata.pageViewId:y.M0.getRequestId()}clearPreviousInfo(){this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,this.lastResponseMetadata?.pageViewId&&delete this.lastResponseMetadata.pageViewId}getExtensions(e,t){const n={taboola:(e=e||{taboola:{}}).taboola};return n.taboola.sessionId||(n.taboola.sessionId=t),n}getMuid(e){return this.isCookieWallPresent?null:e||(0,qe.W)()}getMuidIfNoCookieWall(e,t){return t?null:e||(0,qe.W)()}getAnidIfNoCookieWall(e,t){return t?null:e||null}getAuthCookieName(){return!this._isSuperAppPage&&(0,L.ej)(u.yV.AppAnonCookieExist)?pe.pg.maskIdentifiers(_.Ji):null}onPivotSwitch(e){if(!e.oldSelection)return;const t=e.newSelection.pivotId;t&&t.toLowerCase()!==u.E7.EditInterestPivotId&&(this.pivotId=t)}isNotMyFeed(){return!!this.pivotId&&this.pivotId.toLowerCase()!==u.E7.MyFeedPivotId&&this.pivotId.toLowerCase()!==u.E7.StripeMyFeedPivotId}isWindowsViewsPage(e){return!!e&&("windirect"===(e=e.toLowerCase())||e.startsWith("winp"))}isSuperAppPage(e,t){return!!(e&&["saa","sai","mmx","mobilefeededge"].includes(e.toLowerCase())&&["SuperAppHP","SuperAppViews"].includes(t))}isChannelAppPage(e,t){return!(!e||!["outlookfeed"].includes(e.toLowerCase())||"Channel"!==t)}isMsnHpMobileAppPage(e,t){return!(!e||!["mobilefeed"].includes(e.toLowerCase())||"prime_mobile"!==t)}}var ze=n(25341),Ke=n(89136),Qe=n(31404),Je=n(53552);const Xe=new class{constructor(){this.requestQueue=[],this.isProcessing=!1}async enqueueTask(e,...t){return new Promise(((n,i)=>{this.requestQueue.push((async()=>{try{const i=await e(...t);n(i)}catch(e){i(e)}})),this.processQueue()}))}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.requestQueue.length>0;){const e=this.requestQueue.shift();e&&await e()}this.isProcessing=!1}}};var Ye=n(77770),Ze=n(6734);const et=(e,t)=>{e?.impressedCrids?.length&&t?.placements?.length&&t.placements.forEach((t=>{if(!t?.crids?.length)return;const n=t.crids?.filter((t=>e.impressedCrids?.includes(t)));if(n.length>0){(e=>{(0,o.H)(a.bQm,"Dupe crids from MSX detected",void 0,{...a.bQm.pb,ext:e},!1)})({dupeCrids:n.join(","),region:t?.region,index:t?.index,imageUrl:t?.items?.[0]?.imageUrl,title:t?.items?.[0]?.title,url:t?.items?.[0]?.url,adRequestCrids:e?.impressedCrids?.join(",")})}}))};class tt{constructor(e,t,n){this.adTemplateConfig=e,this.adServiceConfig=t,this.adBeaconServiceConfig=n,this.beaconService=new A.A(this.adBeaconServiceConfig),this.cmsService=new M,this.leadgenAdService=new D,this.samService=new je(this.adServiceConfig),this.templateService=new ze.E,this.cmsNativeAdsItemsMap=new Map,this.cmsRetryCount=0,this.backfillIndex=0,this.leadgenIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList=[],this.callbackList=[]}resetNativeAdService(){this.backfillIndex=0,this.leadgenIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList.length=0,this.callbackList.length=0,this.samService.clearPreviousInfo()}async fetchNativeAds(e,t,n=!1,i){if(!e||!e.placements||0===e.placements.length)return void(0,o.H)(a.Zmj,"Fetch NativeAd failed","No placements found in the request");const r=b.cX.getParamsWithItems((0,h.zp)(),!0,"citem"),s="true"===r.find((({key:e})=>"nativeAdDebug"===e))?.value;if(e.locale||(e.locale=C.Al.Locale),"ru-xl"===e.locale&&(e.locale="en-xl"),!e.locale)return void(0,o.H)(a.Zmj,"Fetch NativeAd failed",`No locale found, headData.Locale: ${C.Al.Locale}, adRequest.locale: ${e.locale}`);this.adServiceConfig?.enableNativeAdXandr&&(e.enableNativeAdXandr=!0);const c=this.buildAdResponse(e);!this.leadgenItems&&e.enableNativeAdLeadgen&&(this.leadgenItems=await this.leadgenAdService.getLeadgenAds(e));const d=!this.leadgenItems||0==this.leadgenItems.length;let l=m.jG.IsChinaCompliance?"https://srtb.msn.cn/":null;!m.jG.IsChinaCompliance&&C.Al.CurrentFlightSet.has("prg-ads-ipv6dmn")&&(l="https://srtb-ax.msn.com/");const{enableBlockingQueue:p}=this.adTemplateConfig||{},g=()=>this.samService.fetchSAMAds(e,!1,!1,l,null,t,i);let f;f=p?Xe.enqueueTask((()=>g().then(this.updateCridsInDedupeManager.bind(this)))):d?g():Promise.resolve(void 0);const y=e.locale,v=u.Wi[y];if(!this.cmsItems&&!n){const e=await this.cmsService.getCMSList(v,y);e&&(this.cmsItems=e.items)}const S=await f;return C.Al.CurrentFlightSet.has("prg-ads-dupe-hit")&&et(e,S),this.updateAdResponse(c,this.leadgenItems,this.cmsItems,v,e,S,n),s?{...c,debugInfo:{adRequest:e}}:c}updateCridsInDedupeManager(e){return(0,g.N)()&&e?.placements&&e.placements.forEach((e=>{He.k.addDedupeIds(e?.crids)})),e}updateAdResponse(e,t,n,r,d,u,p){const h=!n||0==n.length,g=!u||!u.placements||0==u.placements.length,f=!t||0==t.length,{enableNativeAdXandr:m,enableExtraImageData:v,enableNativeAdLeadgen:w}=d;if(h&&!p)if(w){if(f&&g)return void(0,o.H)(a.v73,"Fetch NativeAd failed",`Unable to retrieve backfill list id: ${r}, SAM response and Leadgen response`);f?(0,o.H)(a.ru5,"Fetch Leadgen ads failed",`Unable to retrieve backfill list id: ${r} and Leadgen response`):(0,o.H)(a.v73,"Unable to retrieve backfill list",`Backfill list id: ${r}`)}else{if(g)return void(0,o.H)(a.v73,"Fetch NativeAd failed",`Unable to retrieve backfill list id: ${r} and SAM response`);(0,o.H)(a.v73,"Unable to retrieve backfill list",`Backfill list id: ${r}`)}const b=this.mapSAMPlacements(u);return e.pageViewId=u&&u.metaData&&u.metaData.pageViewId,e.placements.forEach((r=>{const d=r.region+r.regionIndex,u=b.get(d);let g;if(this.adServiceConfig?.enableBuyDirectAd&&"infopane"==r.region&&this.buyDirectItems&&(g=e.buyDirectAdIndex?.findIndex((e=>e===r.regionIndex))),this.adServiceConfig?.enableBuyDirectAd&&"infopane"==r.region&&this.buyDirectItems&&"number"==typeof g&&-1!=g&&this.buyDirectItems?.[g]){const e=this.buyDirectItems[g],t={title:e.title,destinationUrl:e.url+`&PageId=${y.M0.getRequestId()}&ct=ShoppingNTPInfopane`,imageUrl:this.updateImageUrl(r,e.imageUrl),providerName:e.provider?.name||"Buy with Microsoft"};r.items.push(t),r.privacyUrl=e.privacyUrl,r.isBackfill=!1}else if(!f&&t[this.leadgenIndex%t.length]){const e=t[this.leadgenIndex%t.length];this.leadgenIndex++;const n={title:e.title,destinationUrl:e.url,imageUrl:e.imageUrl,providerName:e.sourceName,noAdLabel:e.noAdLabel};r.items.push(n),this.updateTemplate(r),S(i.leadgen,d)}else if(u&&u.items&&u.items.length>0){u.items.forEach((e=>{const t={title:e.title,description:e.description,destinationUrl:e.url,imageUrl:e.imageUrl,providerName:e.sourceName,adChoiceIconUrl:e.adChoicesUrl,originalImageHeight:e.originalImageHeight,originalImageWidth:e.originalImageWidth,imageHeight:e.imageHeight,imageWidth:e.imageWidth,clickBeacons:e.clickBeacons,uniqueId:e.uniqueId,feedbackUrl:m?u.feedbackUrl:(0,T.pP)(e.clickBeacons??e?.ClickBeacons,e?.feedback_url),verificationParameters:e.verificationParameters,cashback:e.cashback,noAdLabel:e.noAdLabel,privacyUrl:u.privacyUrl,eventtrackers:e?.eventtrackers};(0,T.x4)(t,e.assets),v&&(t.originalImageHeight=e.originalImageHeight,t.originalImageWidth=e.originalImageWidth,t.providerId=u.providerId,t.isProductAd=Boolean(t.assets?.price),t.images=e.images),r.items.push(t)})),r.privacyUrl=u.privacyUrl,r.adServedUrls=u.adServedUrls,r.jsTrackerUrls=u.jsTrackerUrls,r.visibilityUrls=u.visibilityUrls,r.beaconsJson=u.beaconsJson,r.bingTrackerUrls=u.bingTrackerUrls,r.beaconsSupportHttpPOST=u.beaconsSupportHttpPOST,r.geminiViewabilityDataJson=u.geminiViewabilityDataJson,r.providerId=u.providerId,r.crids=u.crids,r.iasId=Ve(),this.updateTemplate(r),this.beaconService.sendBeaconForAdServed({beaconsJson:r.beaconsJson,beaconsSupportHttpPOST:r.beaconsSupportHttpPOST}),this.beaconService.fireJSTrackers(u.beaconsJson,e.shouldUseWindowVisibilityTrackingForXandr);const t=!0===C.Al.IsPrerender?performance.now()-(0,s.TZ)(c.DB):performance.now();(0,s.su)("TTNativeAd.Serve",t),S(i.success,d)}else if(h)p?S(i.collapse,d):((0,o.H)(a.m9g,"Unable to backfill invalid sam placement",`Placement key: ${d}`),this.updateTemplate(r),S(i.fail,d));else{const e=this.backfillIndex++%n.length,t=n[e],o={title:t.title,destinationUrl:t.url,imageUrl:this.updateImageUrl(r,t.imageUrl),providerName:t.provider?t.provider.name:"",isCMSAd:!0};r.items.push(o),r.privacyUrl=t.privacyUrl,this.updateTemplate(r),S(i.cmsBackfill,d)}r.isBackfill&&(r.adAuctionType=l._.cmsAd)})),e}updateTemplate(e){e.items?.length>0&&this.templateService.updateTemplate(e,this.adTemplateConfig)}addToCallbackList(e){e&&e.length>0&&this.callbackList.push(...e)}async fetchSamAds(e,t=!1,n,i,r,s){if(!e||!e.placements||0===e.placements.length)return void(0,o.H)(a.Zmj,"Fetch NativeAd failed","No placements found in the request");if(e.locale||(e.locale=C.Al.Locale),"ru-xl"===e.locale&&(e.locale="en-xl"),!e.locale)return void(0,o.H)(a.Zmj,"Fetch NativeAd failed",`No locale found, headData.Locale: ${C.Al.Locale}, adRequest.locale: ${e.locale}`);this.addToCallbackList(n),this.locale=e.locale;let c=m.jG.IsChinaCompliance?"https://srtb.msn.cn/":null;!m.jG.IsChinaCompliance&&C.Al.CurrentFlightSet.has("prg-ads-ipv6dmn")&&(c="https://srtb-ax.msn.com/");const{enableBlockingQueue:d}=this.adTemplateConfig||{},u=()=>this.samService.fetchSAMAds(e,t,!1,c,i,null,r,s);let p;p=d?Xe.enqueueTask((()=>u().then(this.updateCridsInDedupeManager.bind(this)))):u();const h=this.buildAdResponse(e),g=await p;return C.Al?.CurrentFlightSet?.has("prg-ads-dupe-hit")&&et(e,g),!C.Al?.CurrentFlightSet?.has("prg-ads-deref-rf")&&d&&g?.placements?.forEach((e=>{e.adAuctionType=l._.clientAuctionAd})),{placeHolderResponse:h,samResponse:g}}async fetchCmsAds(e,t,n){if(!e||!e.placements||0===e.placements.length)return void(0,o.H)(a.Zmj,"Fetch NativeAd failed","No placements found in the request");let i=C.Al.Locale;if("ru-xl"===i&&(i="en-xl"),!this.cmsNativeAdsItemsMap.has(t)){const e=await this.cmsService.getCMSList(t,i);e&&e.id&&e.items&&this.cmsNativeAdsItemsMap.set(t,e.items)}const r=this.buildAdResponse(e),s=this.cmsNativeAdsItemsMap.has(t)?this.cmsNativeAdsItemsMap.get(t):[];for(const e of r.placements){const t=n.shift();let r,o;if(t){let e=parseInt(t,10);if(e)e=Math.max(e-1,0),e=e<s.length?e:e%s.length,r=s[e];else{if(!this.cmsNativeAdsItemsMap.has(t)){const e=await this.cmsService.getCMSList(t,i);e&&e.id&&e.items&&this.cmsNativeAdsItemsMap.set(t,e.items)}const e=this.cmsNativeAdsItemsMap.has(t)?this.cmsNativeAdsItemsMap.get(t):[];r=(0,k.Z)(e)[0],r||(r=s[this.cmsAdsCounter%s.length])}}else r=s[this.cmsAdsCounter%s.length];r&&(o={title:r.title,destinationUrl:r.url,imageUrl:this.updateImageUrl(e,r.imageUrl),providerName:r.provider?r.provider.name:""},e.items.push(o),e.privacyUrl=r.privacyUrl),this.updateTemplate(e),this.cmsAdsCounter++}return r}updateSamAdResponse(e,t,n){const i=this.cmsItems,r=this.mapSAMPlacements(t),c=!i||0==i.length;return e.pageViewId=t&&t.metaData&&t.metaData.pageViewId,e.placements.forEach((t=>{this.adServiceConfig?.enableAdsWaterfall&&"river"===t.region&&t.regionIndex===this.adServiceConfig?.tallAdsIndex&&(t.region="rivert");const u=t.region+t.regionIndex,h=r.get(u);let f;if(this.adServiceConfig?.enableBuyDirectAd&&"infopane"==t.region&&this.buyDirectItems&&(f=e.buyDirectAdIndex?.findIndex((e=>e===t.regionIndex))),this.adServiceConfig?.enableBuyDirectAd&&"infopane"==t.region&&this.buyDirectItems&&"number"==typeof f&&-1!=f&&this.buyDirectItems?.[f]){const e=this.buyDirectItems[f],n={title:e.title,destinationUrl:e.url+`&PageId=${y.M0.getRequestId()}&ct=ShoppingNTPInfopane`,imageUrl:this.updateImageUrl(t,e.imageUrl),providerName:e.provider?.name||"Buy with Microsoft"};t.items.push(n),t.privacyUrl=e.privacyUrl,t.isBackfill=!1}else if(h&&h.items&&h.items.length>0){h.items.forEach((e=>{const n={title:e.title,adSelectionReason:e.adSelectionReason,description:e.description,destinationUrl:e.url,providerName:e.sourceName,adChoiceIconUrl:e.adChoicesUrl,imageUrl:e.imageUrl,imageHeight:e.imageHeight,imageWidth:e.imageWidth,images:e.images,clickBeacons:e.clickBeacons,uniqueId:e.uniqueId,beaconsJson:e.beaconsJson,feedbackUrl:(0,T.pP)(e.clickBeacons??e?.ClickBeacons,e?.feedback_url),originalImageWidth:e.originalImageWidth,originalImageHeight:e.originalImageHeight,verificationParameters:e.verificationParameters,ext:e.ext,adScenarioType:e.adScenarioType,cashback:e.cashback,noAdLabel:e.noAdLabel,eventtrackers:e?.eventtrackers},i=h?.msft?.msn_kv,r=(0,Ze._)(i);if(this.adServiceConfig?.readAdScenarioTypeFromMsnKv){if(!!n.adScenarioType&&!!!r?.adScenarioType&&(0,o.H)(a.lYA,"adScenarioType is missing in msn_kv","",{adScenarioType:n.adScenarioType,samPlacement:JSON.stringify(h),csr:(0,g.N)()}),r){const e=r.adScenarioType;e&&(n.adScenarioType=e)}}r?.dts&&(n.dts=r.dts),tt.updateAssetVideoField(n,e.assets),(0,T.x4)(n,e.assets,this.adServiceConfig?.passVAXandrMigrationSignals),this.adTemplateConfig.enableVAPhase2&&this.adTemplateConfig.supportedAdScenarioTypes.includes(e.adScenarioType)&&(y.M0.addOrUpdateTmplProperty("va_v2_response","1"),(0,Je.k)(n,e.assets,this.adServiceConfig?.passVAXandrMigrationSignals)),this.adServiceConfig?.enableNativeAdXandr&&(n.feedbackUrl=h.feedbackUrl),t.items.push(n)}));const e=(0,Ke.dQ)(t,0);t.videoViewabilityData=e?e.ViewabilityProps:null,t.privacyUrl=h.privacyUrl,t.adServedUrls=h.adServedUrls,t.jsTrackerUrls=h.jsTrackerUrls,t.visibilityUrls=h.visibilityUrls,t.beaconsJson=h.beaconsJson,t.bingTrackerUrls=h.bingTrackerUrls,t.beaconsSupportHttpPOST=h.beaconsSupportHttpPOST,t.geminiViewabilityDataJson=h.geminiViewabilityDataJson,t.providerId=h.providerId,t.crids=h.crids,t.adAuctionType=h.adAuctionType;const i=(0,p.v0)(C.Al.IsPrerender&&!n);n?((0,s.su)("TTNativeAd.Background.Serve",i),(0,Ye.lr)().then((()=>{const e=(0,d.Ou)().TTPR;e?(0,s.su)("TTNativeAd.Serve",e):(0,o.H)(a.iVH,"Could not find TTPR to set TimeToServeAd","",{shouldSampleErrorsForTreatement1:!0})}))):(0,s.su)("TTNativeAd.Serve",i)}else if(c)this.handleCmsStandyPlacement(t);else{const e=this.backfillIndex++%i.length,n=i[e],r={title:n.title,destinationUrl:n.url,imageUrl:this.updateImageUrl(t,n.imageUrl),providerName:n.provider?n.provider.name:""};t.items.push(r),t.privacyUrl=n.privacyUrl,t.isBackfill=!0,t.adAuctionType=l._.cmsAd}this.updateTemplate(t)})),e}handleCmsStandyPlacement(e){if(this.cmsItems){const t=this.cmsItems;for(const n of this.callbackFnPlacementList){const i=t[this.backfillIndex++%t.length];if(i){const t={title:i.title,destinationUrl:i.url,imageUrl:this.updateImageUrl(e,i.imageUrl),providerName:i.provider?i.provider.name:""};n.items.push(t),n.privacyUrl=i.privacyUrl,n.isBackfill=!0,n.adAuctionType=l._.cmsAd,this.updateTemplate(n)}}this.callbackList.forEach((e=>{e(this)})),this.callbackList=[],this.callbackFnPlacementList=[]}else e&&this.callbackFnPlacementList.push(e)}loadCmsBackFillList(){let e=this.locale?this.locale:C.Al.Locale;"ru-xl"===e&&(e="en-xl");const t=u.Wi[e];if(t&&!this.cmsItems&&this.cmsService.getCMSList(t,e).then((e=>{e?(this.cmsItems=e.items,this.handleCmsStandyPlacement()):++this.cmsRetryCount<10&&this.loadCmsBackFillList()})),this.adServiceConfig.enableBuyDirectAd){const e=this.locale?this.locale:C.Al.Locale;let t="AA13DgW5";"zh-cn"==e&&(t="BB1m89wA"),this.cmsService.getCMSList(t,e).then((e=>{e&&(this.buyDirectItems=e.items)}))}}async tryGetCmsList(e=0){let t=this.locale?this.locale:C.Al.Locale;"ru-xl"===t&&(t="en-xl");const n=u.Wi[t];if(!n||!t)return;const i=await this.cmsService.getCMSList(n,t);return i||(e<5?await this.tryGetCmsList(++e):void 0)}mapSAMPlacements(e){const t=new Map;return e&&e.placements&&e.placements.forEach((e=>{e.region&&e.index&&t.set(e.region+e.index,e)})),t}buildAdResponse(e){const t=[];e.placements.forEach((e=>{e.region&&e.indices&&e.indices.length&&e.indices.forEach((n=>{const i={region:e.region,regionIndex:n,imageHeight:e.img&&e.img.h&&e.img.h.toString(),imageWidth:e.img&&e.img.w&&e.img.w.toString(),items:[]};t.push(i)}))}));const n=m.jG.LocaleDisplayLanguageString;return{placements:t,adLabelText:(0,T.En)(n,this.adServiceConfig?.overrideAdLabelText,this.adServiceConfig?.enableAdSponsoredText),isGreyAdsLabelEnabled:u.Eg.includes(e.locale),shouldUseWindowVisibilityTrackingForXandr:Boolean(e.shouldUseWindowVisibilityTrackingForXandr),privacyUrl:u.Lr.PrivacyUrl}}async loadBuyDirectAd(){const e=this.locale?this.locale:C.Al.Locale;if(!this.buyDirectItems){let t="AA13DgW5";"zh-cn"==e&&(t="BB1m89wA");const n=await this.cmsService.getCMSList(t,e);n&&(this.buyDirectItems=n.items)}}updateImageUrl(e,t){return e&&e.imageWidth&&e.imageHeight&&t?t.replace("w=624","w="+e.imageWidth).replace("h=350","h="+e.imageHeight):t}static updateAssetVideoField(e,t){t&&t.length>0&&t.forEach((t=>{const n=(0,P.Z)(t,"video.vasttag");n&&(e.video=n)}))}getAdTagStyleByLocale(e){const t=m.jG.LocaleDisplayLanguageString;let n=e??C.Al.Locale;return"ru-xl"===n&&(n="en-xl"),{adLabelText:(0,T.En)(t,this.adServiceConfig?.overrideAdLabelText,this.adServiceConfig?.enableAdSponsoredText),isGreyAdsLabelEnabled:u.Eg.includes(n)}}}(0,r.gn)([(0,Qe.Et)(a.rEw,"fetchNativeAds")],tt.prototype,"fetchNativeAds",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"updateAdResponse")],tt.prototype,"updateAdResponse",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"updateTemplate")],tt.prototype,"updateTemplate",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"fetchSamAds")],tt.prototype,"fetchSamAds",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"fetchCmsAds")],tt.prototype,"fetchCmsAds",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"updateSamAdResponse")],tt.prototype,"updateSamAdResponse",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"handleCmsStandyPlacement")],tt.prototype,"handleCmsStandyPlacement",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"loadCmsBackFillList")],tt.prototype,"loadCmsBackFillList",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"tryGetCmsList")],tt.prototype,"tryGetCmsList",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"mapSAMPlacements")],tt.prototype,"mapSAMPlacements",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"buildAdResponse")],tt.prototype,"buildAdResponse",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"updateImageUrl")],tt.prototype,"updateImageUrl",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"getAdTagStyleByLocale")],tt.prototype,"getAdTagStyleByLocale",null),(0,r.gn)([(0,Qe.Et)(a.rEw,"updateAssetVideoField")],tt,"updateAssetVideoField",null);const nt=(0,Qe.Et)(a.Evv,"getNativeAdService")(((e,t)=>{const n=f.Gq.get("__NativeAdServiceInstance__",(()=>new tt(e||{},t)));return n.resetNativeAdService(),n}))},12031:function(e,t,n){n.d(t,{k:function(){return s}});var i=n(13218),r=n(33779),o=n(5302);class a{constructor(){this.dedupeIdsAdLevel=[],this.cacheSize=0}get size(){return this.cacheSize}setCacheSize(e,t){for(this.cacheSize=e,this.excludedRegions=t;this.dedupeIdsAdLevel.length>e;)this.dedupeIdsAdLevel.shift()}clear(){this.dedupeIdsAdLevel=[]}addToAdLevelCache(e){const t=this.dedupeIdsAdLevel.findIndex((t=>t.length===e.length&&t.every(((t,n)=>t===e[n]))));t>-1?(this.dedupeIdsAdLevel.splice(t,1),this.dedupeIdsAdLevel.push(e)):(this.dedupeIdsAdLevel.length===this.cacheSize&&this.dedupeIdsAdLevel.shift(),this.dedupeIdsAdLevel.push(e))}addDedupeIds(e,t){!this.cacheSize||!e||0==e.length||t&&this?.excludedRegions?.includes(t)||this.addToAdLevelCache(e)}getDedupeIds(e){if(e&&this.excludedRegions?.includes(e))return[];if(i.Al?.CurrentFlightSet?.has("prg-ads-dupe-hit")){const e=this.dedupeIdsAdLevel.flat();return Array.from(new Set(e))}return this.dedupeIdsAdLevel.flat()}}const s=new class{constructor(){this.prefixOverride=[],this.overrideCaches=new Map,this.defaultCache=new a}initializeCache(e,t,n){this.defaultCache.setCacheSize(e,t),this.prefixOverride=n??[],this.overrideCaches.clear();for(const e of this.prefixOverride){const t=new a;t.setCacheSize(e.dedupeCacheSize,e.excludedRegions),this.overrideCaches.set(e.prefix,t)}}get isInitialized(){return this.defaultCache.size>0||this.overrideCaches.size>0}clearCache(){this.defaultCache.clear();for(const e of this.overrideCaches.values())e.clear();this.overrideCaches.clear(),this.prefixOverride=[]}addDedupeIds(e,t){if(!e||0===e.length)return;if(0===this.prefixOverride.length)return void this.defaultCache.addDedupeIds(e,t);const n=new Map;for(const t of e){const e=t.split("_");if(!e||e.length<2){(0,r.H)(o.M84,"Unexpected dedupe crid prefix","Invalid dedupe crid entry format (too short)",t);continue}e.length>2&&(0,r.H)(o.M84,"Unexpected dedupe crid prefix","Suspicious dedupe crid entry format (too long)",t);const i=e[0];let a=n.get(i);a||(a=[],n.set(i,a)),a.push(t)}for(const[e,i]of n.entries()){const n=this.overrideCaches.get(e);n&&n.addDedupeIds(i,t)}}getDedupeIds(e,t){if(0===this.prefixOverride.length)return i.Al?.CurrentFlightSet?.has("prg-ads-dupe-ck")&&(0,r.H)(o.IUw,"Unexpected dedupe old path been used","Dedupe cache prefix override is empty",{region:e,pageType:t}),this.defaultCache.getDedupeIds(e);const n=[];for(const t of this.overrideCaches.values())n.push(...t.getDedupeIds(e));return n}}},25341:function(e,t,n){n.d(t,{E:function(){return fn}});var i=n(33940),r=n(75115),o=n(61932),a=n(5302),s=n(33779),c=n(90351),d=n(25193),u=n(52965),l=n(72554),p=n(13578),h=n(92170),g=n(11935),f=n(4935),m=n(40252),y=n(31011),v=n(4);const S={configType:"prg-d-rating-n-y",region:[v.yp.river],template:(e,t)=>"msn-default-rating-nondr-yellow-static",requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},w={configType:"prg-h-rating-n-r",region:[v.yp.river],template:(e,t)=>"msn-highlight-rating-nondr-red",requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},b={configType:"prg-h-rating-n-y",region:[v.yp.river],template:(e,t)=>"msn-highlight-rating-nondr-yellow",requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},C={configType:"prg-h-rating-nys",region:[v.yp.river],template:(e,t)=>"msn-highlight-rating-nondr-yellow-static",requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},T={configType:"prg-promo-ndr",region:[...v.Fg],template:(e,t)=>"msn-special-offer-nondr",requiredAssetsAll:[r.aT.specialOffer],supportedAssets:[r.aT.specialOffer]},k={configType:"prg-promo-ndr2",region:[...v.Fg],template:(e,t)=>"msn-special-offer-nondr-with-exp",requiredAssetsAll:[r.aT.specialOffer],supportedAssets:[r.aT.specialOffer]},P={configType:"prg-ad-condition",region:[v.yp.river],template:"msn-condition-nondr",requiredAssetsAll:[r.aT.condition]},A={configType:"prg-ad-return",region:[v.yp.river],template:"msn-return-policy-nondr",requiredAssetsAll:[r.aT.returnPolicy]},I={configType:"prg-ad-sold",region:[v.yp.river],template:"msn-sold-nondr",requiredAssetsAll:[r.aT.sold]},E={configType:"prg-fship-in-b-n",region:[v.yp.river],template:"msn-freeshipping-inline-nondr",requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},R={configType:"prg-fship-in-t-n",region:[v.yp.river],template:"msn-freeshipping-plain-text-nondr",requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},M={configType:"prg-fship-tl-n",region:[v.yp.river],template:"msn-freeshipping-top-left-nondr",requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},x={configType:"prg-fship-tr-n",region:[v.yp.river],template:"msn-freeshipping-top-right-nondr",requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]};var L=n(21230);const F={name:"gamification-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...L.u,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"gamification",layout:{mode:"pixel",bottom:"35",width:"300",zIndex:4}}]}]},D=(e,t,n)=>({modifier:(e,t)=>{t.template.useClickInGamify=n},configType:e,region:[v.yp.river],template:"msn-gamification",discountThreshold:t,requiredAssetsAll:[r.aT.price,r.aT.salePrice],supportedAssets:[r.aT.price,r.aT.salePrice,r.aT.discount],dynamicRenderingConfig:()=>F}),O=D("prg-wpo-gamify-c",v.XP.gamification,!0),_=D("prg-wpo-gamify-h",v.XP.gamification,!1),N={name:"hotspot-single-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...L.u,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:0,scaleTo:1,durationString:".3s",delayTimeMs:0},children:[{name:"hotspot-single"}]}]},{name:"ad-title"}]}]}]}]},B=(e,t)=>({configType:e,region:[v.yp.river],requiredAssetsAll:[r.aT.price,r.aT.salePrice],template:"msn-hotspot-single",supportedAssets:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:t,dynamicRenderingConfig:()=>N}),U=B("prg-wpo-hs",v.XP.default),$=B("prg-wpo-hs10",v.XP.hotspotSingle10),H={configType:"prg-ad-ctav3",region:[...v.cE,...v.Fg],maxAdCount:3,template:(e,t)=>"msn-call-to-action-v3"},W={configType:"prg-ad-cta-pa",region:[...v.Fg],requiredAssetsAll:[r.aT.price],maxAdCount:3,template:(e,t)=>"msn-call-to-action-v3-pa"};var G=n(67552),V=n(82356);const q={name:"feedv2-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"302",height:"157",zIndex:1}},{name:"color-mask",alwaysPresent:!0,feedV2:!0,layout:{mode:"pixel",left:"0",top:"157",width:"300",height:"147",zIndex:1}},{name:"ad-title",isFeedV2:!0,titleFontSize:18,layout:{mode:"pixel",top:"169",zIndex:1}},{name:"see-more",isFeedV2:!0,layout:{mode:"pixel",top:"8",height:"31",left:"260",zIndex:5}},(0,V.It)((0,V.ZV)(G.l,"end-action-part",2,[],1),["ad-label","provider-name","ad-choice"],[{isFeedV2:!0},{isFeedV2:!0},{isFeedV2:!0,layout:{zIndex:5,marginInlineEnd:10}}])]}]},j={configType:"prg-scards",region:[...v.Fg],template:"feedv2-template",dynamicRenderingConfig:()=>q},z=(0,V.RM)(q,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:18,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),K={configType:"prg-scardsul",region:[...v.Fg],template:"feedv2-template",dynamicRenderingConfig:()=>z},Q=(0,V.RM)(q,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:20,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),J={configType:"prg-scardshov",region:[...v.Fg],template:"feedv2-template",dynamicRenderingConfig:()=>Q};var X,Y,Z,ee,te,ne;!function(e){e.ROW="row",e.ROW_REVERSE="row-reverse",e.COLUMN="column",e.COLUMN_REVERSE="column-reverse"}(X||(X={})),function(e){e.FLEX="flex",e.INLINE_FLEX="inline-flex"}(Y||(Y={})),function(e){e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.CENTER="center",e.SPACE_BETWEEN="space-between",e.SPACE_AROUND="space-around",e.SPACE_EVENLY="space-evenly"}(Z||(Z={})),function(e){e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.CENTER="center",e.STRETCH="stretch",e.BASELINE="baseline"}(ee||(ee={})),function(e){e.NOWRAP="nowrap",e.WRAP="wrap",e.WRAP_REVERSE="wrap-reverse"}(te||(te={})),function(e){e.AUTO="auto",e.STRETCH="stretch",e.CENTER="center",e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.BASELINE="baseline",e.INITIAL="initial",e.INHERIT="inherit"}(ne||(ne={}));const ie={name:"ad-slug-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-label",layout:{mode:"pixel",top:"270",height:"31",zIndex:5,marginInlineStart:"16",marginInlineEnd:"8"}},{name:"ad-choice",layout:{mode:"pixel",top:"267",height:"31",zIndex:5,marginInlineStart:"231",marginInlineEnd:"8"}},{name:"see-more",layout:{mode:"pixel",top:"262",height:"31",zIndex:5,marginInlineStart:"256"}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"background-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div-wrapper",marginBottom:"6",marginLeft:"16",marginRight:"16",width:"260",children:[{name:"favicon-provider-name",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-favicon",layout:{mode:"flex"}},{name:"provider-name",layout:{mode:"flex",flex:1,marginInline:"6",minWidth:"0"},customStyleClass:"white-12-flex-layout",keepOpacity:!0}]}]},{name:"ad-title",twoLine:!0}]}]}]},re={configType:"prg-wpo-ad-slug3",region:[v.yp.river,v.yp.rivercms,v.yp.resriver],template:"msn-ad-slug-v3",dynamicRenderingConfig:()=>ie},oe={configType:"prg-wpo-ad-slug4",region:[v.yp.river,v.yp.resriver,v.yp.rivercms],template:"msn-ad-slug-v4",dynamicRenderingConfig:()=>ie};var ae=n(25345),se=n(58721);const ce={maxAdCount:3,template:(e,t)=>v.cE.includes(t.region)?"msn-info-pane-dynamic-rendering":"msn-decoration-dynamic",region:[...v.vn],dynamicRenderingConfig:e=>v.cE.includes(e.region)?ae.v:se.$},de=[{...ce,configType:"prg-ads-deco",supportedAssets:[r.aT.rating,r.aT.freeShipping,r.aT.review]},{...ce,configType:"prg-ads-no-deco"}],ue={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"div-text",inlineStyle:"font-size:14px;line-height:16px;letter-spacing:0.7px",text:"nativeAdBingRewardsText",layout:{mode:"pixel",left:"16",top:"16",zIndex:2}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"footer-wrapper",layout:{mode:"pixel",top:"264",height:"31",width:"100%",zIndex:5},children:[{name:"footer",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,alignItems:ee.CENTER,height:"31"},children:[{name:"start-action-part",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"join-now",layout:{mode:"pixel",left:"16",zIndex:2}}]},{name:"end-action-part",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW_REVERSE,alignItems:ee.CENTER},children:[{name:"ad-choice",layout:{mode:"flex",paddingRight:"6"}},{name:"div-text",inlineStyle:"font-size:12px;color:rgba(255,255,255,0.7);padding-right:11px",text:"nativeAdPromotedByText",layout:{mode:"flex"}}]}]}]}]}]},le={configType:"prg-amplify",region:[v.yp.riverAmplify,v.yp.rightRailAmplify],template:"msn-amplify",dynamicRenderingConfig:()=>ue},pe=e=>({name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:1.5,scaleTo:1,durationString:"1s",duration:1500,delayTimeMs:500},intersectionRootMargin:"0px 0px 0px 0px",children:[e]}),he=e=>(0,V.BH)(e,V.Oz.byName("product-image"),pe),ge=he(se.$),fe=he(ae.v);var me,ye,ve,Se,we,be,Ce;!function(e){e[e["Segoe UI"]=1]="Segoe UI",e[e.Tenorite=2]="Tenorite",e[e.Lora=3]="Lora"}(me||(me={})),function(e){e[e["scale-up"]=1]="scale-up",e[e["scale-down"]=2]="scale-down",e[e["scale-up-down"]=3]="scale-up-down"}(ye||(ye={})),function(e){e[e["#036AC4"]=1]="#036AC4",e[e["#B26200"]=2]="#B26200",e[e["#508128"]=3]="#508128",e[e["#158389"]=4]="#158389",e[e["#C84C56"]=5]="#C84C56",e[e["#12875E"]=6]="#12875E",e[e["#666666"]=7]="#666666"}(ve||(ve={})),function(e){e[e.cube=2]="cube",e[e.box=3]="box",e[e.truck=4]="truck"}(Se||(Se={})),function(e){e[e.normal=1]="normal",e[e.small=2]="small",e[e.large=3]="large"}(we||(we={})),function(e){e[e.default=1]="default",e[e["5-star-with-button"]=2]="5-star-with-button",e[e["1-star-with-button"]=3]="1-star-with-button",e[e["1-star-with-shadow"]=4]="1-star-with-shadow"}(be||(be={})),function(e){e.normal="265",e.small="270",e.large="255"}(Ce||(Ce={}));var Te=n(31404);const ke=(0,Te.Et)(a.Evv,"personalizedV2Override")((e=>{(0,p.Z)(e.items?.[0]?.ext?.adCreativeV2)||(e.items[0].ext.adCreative=JSON.parse(e.items[0].ext.adCreativeV2))})),Pe=(0,Te.Et)(a.Evv,"isPersonalizedAvailable")(((e,t)=>e.items?.[0]?.ext?.adCreative?.templateId===t&&!!e.items?.[0]?.ext?.adCreative?.templateConfig)),Ae=(0,Te.Et)(a.Evv,"isShippingConfig")((e=>!!e.items[0]?.assets?.freeShipping&&!!e.items?.[0]?.ext?.adCreative?.templateConfig?.shipping&&!e.items?.[0]?.ext?.adCreative?.templateConfig?.shipping?.suppress)),Ie=(0,Te.Et)(a.Evv,"isRatingConfig")((e=>!!e.items[0]?.assets?.rating&&!!e.items?.[0]?.ext?.adCreative?.templateConfig?.ratings&&!e.items?.[0]?.ext?.adCreative?.templateConfig?.ratings?.suppress)),Ee=(0,Te.Et)(a.Evv,"getPersonalizedConfig")(((e,t)=>{if(Pe(e,t)){const[t]=e.items;return t.ext.adCreative.templateConfig}return null}));var Re;!function(e){const t=(0,Te.Et)(a.Evv,"processDecorations");e.processDecorations=t(((e,t)=>(0,V.Tb)(t,"ad-decoration",{fontSizes:{price:e.price?.fontSize,salePrice:e.saleprice?.fontSize},fontFamily:me[e.font]})));const n=(0,Te.Et)(a.Evv,"getAnimationDuration")((e=>e?{duration:e,durationString:e/1e3+"s"}:{})),i=(0,Te.Et)(a.Evv,"getAnimationScale")(((e,t)=>e&&t?{scaleFrom:e,scaleTo:e-t}:{})),r=(0,Te.Et)(a.Evv,"getLocationAlignRight")((e=>{if(2==e)return{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,justifyContent:Z.FLEX_END}})),o=(0,Te.Et)(a.Evv,"getLocation")(((e,t)=>3==e?{mode:"pixel",bottom:Ce[t||"normal"]}:4==e?{mode:"pixel",bottom:Ce[t||"normal"],right:"16"}:void 0)),s=(0,Te.Et)(a.Evv,"getDelayTime")((e=>e?{delayTimeMs:e}:{})),c=(0,Te.Et)(a.Evv,"processAnimationImage");e.processAnimationImage=c(((e,t)=>{if(!e.image)return t;return(0,V.BH)(t,V.Oz.byName("animation-decorator"),(t=>{if(e.image.suppress)return{};const{animation:r}=e.image,o={...t,animationType:ye[r?.type]||t.animationType,animationConfig:{...t.animationConfig,...i(r?.scaleFrom,r?.scaleBy),...n(r?.duration),...s(r?.delayTimeMS)}};if(!r?.scaleFrom&&"scale-down"===o.animationType){const e=t.animationConfig.scaleFrom;t.animationConfig.scaleFrom=t.animationConfig.scaleTo,t.animationConfig.scaleTo=e}return o}))}));const d=(0,Te.Et)(a.Evv,"processFreeShipping");e.processFreeShipping=d(((e,t)=>{if(!e.shipping||e.shipping.suppress)return t;const{color:n,location:i}=e.shipping,a=Se[e.shipping.icon],s=(0,V.Tb)(t,"div-wrapper",{layout:{...r(i)}});return(0,V.Tb)(s,"free-shipping",{fontFamily:me[e.font],color:ve[n||"1"],icon:a,layout:{...o(i)}})}));const u=(0,Te.Et)(a.Evv,"processRating");e.processRating=u(((e,t)=>{if(!e.ratings||e.ratings.suppress)return t;const{color:n,elementStyle:i,elementSize:a,location:s,displayReviewCount:c}=e.ratings,d=we[a],u=(0,V.Tb)(t,"div-wrapper",{layout:{...r(s)}});return(0,V.Tb)(u,"rating",{fontFamily:me[e.font],color:ve[n||"1"],elementStyle:be[i],elementSize:d,displayReviewCount:c,layout:{...o(s,d)}})}));const l=(0,Te.Et)(a.Evv,"processTitle");e.processTitle=l(((e,t)=>(0,V.Tb)(t,"ad-title",{fontFamily:me[e.font]})))}(Re||(Re={}));const Me=[Re.processDecorations,Re.processTitle],xe=(0,Te.Et)(a.Evv,"processPersonalizedConfig")(((e,t,n,i=Me)=>{const r=Ee(e,t);return r?(0,f.Z)(i,((e,t)=>t(r,e)),n):n})),Le=(0,Te.Et)(a.Evv,"removeAssets")((e=>{for(const t of e.items){if(!e.enableNativeAdWC&&!e?.template?.enableVA){delete t.assets?.price,delete t.assets?.salePrice;continue}const n=t.ext?.adCreative?.templateConfig;if(n){const{price:e,saleprice:i}=n;e?.suppress&&delete t.assets?.price,i?.suppress&&delete t.assets.salePrice}}return e})),Fe=(0,Te.Et)(a.Evv,"processConfig")(((e,t,n)=>xe(e,t,n,[Re.processTitle,Re.processAnimationImage,Re.processDecorations,Re.processFreeShipping,Re.processRating]))),De={configType:"prg-ani-img",qualifier:(e,t)=>Pe(t,"animatedimageryinf")||Pe(t,"animatedimageryriver"),region:[v.yp.river,v.yp.resriver,v.yp.infopane,v.yp.resinfopane],template:"msn-animated-imagery",supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:e=>"infopane"===e.region||"resinfopane"===e.region?Fe(e,"animatedimageryinf",fe):Fe(e,"animatedimageryriver",ge),modifier:(e,t)=>{Le(t)}},Oe=(0,V.RM)(se.$,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:ee.CENTER,bottom:"52",zIndex:2}},{name:"call-to-action",layout:{mode:"flex",display:Y.FLEX,paddingRight:"16"}}]}]}),_e={configType:"prg-ad-cta",region:[...v.Fg],requiredAssetsAll:[r.aT.price],template:"msn-ad-cta",supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:()=>Oe},Ne=(0,V.RM)(se.$,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"div",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:ee.CENTER,bottom:"52",zIndex:2}},{name:"ad-title-mask"},{name:"call-to-action",ctaMode:"arrow",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:Y.FLEX,paddingRight:"16"}}]}]}),Be={configType:"prg-ad-cta-ic",region:[...v.Fg],requiredAssetsAll:[r.aT.price],template:"msn-ad-cta-icon",dynamicRenderingConfig:()=>Ne},Ue={configType:"prg-ad-cta-lm",region:[...v.Fg],requiredAssetsAll:[r.aT.price],template:"msn-ad-cta-learn-more",dynamicRenderingConfig:()=>Oe},$e=(0,V.RM)(Oe,"call-to-action",{name:"call-to-action",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:Y.FLEX,paddingRight:"16"}}),He={configType:"prg-ad-cta-lmd",region:[...v.Fg],requiredAssetsAll:[r.aT.price],template:"msn-ad-cta-learn-more-dark-mode",dynamicRenderingConfig:()=>$e},We=(0,V.As)(Oe,["call-to-action","product-image"],[{name:"call-to-action",ctaMode:"mask"},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!1}]),Ge={configType:"prg-ad-cta-m",region:[...v.Fg],requiredAssetsAll:[r.aT.price],template:"msn-ad-cta-mask-mode",supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:()=>We},Ve={configType:"prg-ad-cta-st",region:[...v.Fg],requiredAssetsAll:[r.aT.price,r.aT.shortTitle],template:"msn-ad-cta-short-title",dynamicRenderingConfig:()=>$e},qe={configType:"prg-ad-ctav2",region:[...v.Fg],template:"msn-call-to-action-v2",dynamicRenderingConfig:()=>Ne},je=[{configType:"prg-ad-logo-c",template:"msn-logo-c",region:[...v.Fg],qualifier:(e,t)=>!!t.items?.[0]?.assets?.logo?.url,requiredAssetsAll:[r.aT.logo]},{configType:"prg-ad-z-c",template:"msn-z-index-c",region:[v.yp.river],qualifier:(e,t)=>(0,v.Ue)(t),requiredAssetsAll:[r.aT.transparentImage]},{configType:"prg-promo-ndr-c",template:"msn-special-offer-c",region:[...v.Fg],requiredAssetsAll:[r.aT.specialOffer]},{configType:"prg-fship-c",template:"msn-freeshipping-c",region:[v.yp.river],requiredAssetsAll:[r.aT.freeShipping]},{configType:"prg-rating-c",template:"msn-rating-c",region:[v.yp.river],requiredAssetsAll:[r.aT.rating]},{configType:"prg-trendingc",template:"msn-trending-c",region:[...v.Fg],requiredAssetsAll:[r.aT.viewed]},{configType:"prg-ad-sh-v1-c",template:"msn-sale-highlight-v1-c",region:[...v.Fg,...v.cE],requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:v.XP.saleHighlight15,maxAdCount:1},{configType:"prg-ad-sh-v3v4-c",template:"msn-sale-highlight-v3v4-c",region:[...v.Fg],qualifier:(e,t)=>(0,v.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:v.XP.saleHighlight15,maxAdCount:1},{configType:"prg-ad-combo-c",region:[...v.Fg],template:(e,t)=>(0,v.J2)(t),requiredAssetsAny:[r.aT.rating,r.aT.specialOffer,r.aT.freeShipping]},{configType:"prg-ad-condition-c",region:[v.yp.river],template:"msn-condition-nondr-c",requiredAssetsAll:[r.aT.condition]},{configType:"prg-ad-return-c",region:[v.yp.river],template:"msn-return-policy-nondr-c",requiredAssetsAll:[r.aT.returnPolicy]},{configType:"prg-ad-sold-c",region:[v.yp.river],template:"msn-sold-nondr-c",requiredAssetsAll:[r.aT.sold]},{configType:"prg-ad-combo-t-c",region:[...v.Fg],template:(e,t)=>(0,v.ZV)(t),requiredAssetsAny:[r.aT.sold,r.aT.returnPolicy,r.aT.condition]},{configType:"prg-ad-ris1-c",region:v.Fg,supportedAssets:[r.aT.price],modifier:(e,t)=>{(0,v.dj)(t,!0)}},{configType:"prg-ad-desc-c",region:v.Fg,template:(e,t)=>(0,v.PY)(t)},{configType:"prg-ad-align-rf",region:v.Fg,template:(e,t)=>"msn-native-ad-align-rf"},{configType:"prg-ad-ai-imgs-c",region:[...v.Fg,...v.cE],template:"msn-native-ad-ai-img",requiredAssetsAll:[r.aT.transparentImage]},{configType:"prg-ad-ai-imgf-c",region:[...v.Fg,...v.cE],template:"msn-native-ad-ai-img",requiredAssetsAll:[r.aT.transparentImage]}],ze={configType:"default",region:[v.yp.infopane,v.yp.resinfopane],maxAdCount:2,template:(e,t)=>t.enableNativeAdWC?"msn-animated-imagery":"msft-content-card",supportedAssets:[],dynamicRenderingConfig:e=>{if(e.enableNativeAdWC)return Fe(e,"animatedimageryinf",fe)},modifier:(e,t)=>{Le(t)}},Ke={configType:"default",region:[v.yp.river,v.yp.resriver],template:"msft-content-card"},Qe={configType:"prg-dr-combined",region:v.vn,template:(e,t)=>v.cE.includes(t.region)?"msn-info-pane-dynamic-rendering":"msn-decoration-dynamic",dynamicRenderingConfig:e=>v.cE.includes(e.region)?ae.v:se.$,modifier:(e,t)=>{t.enableNativeAdWC=!0}},Je={configType:"prg-ad-combo",region:[v.yp.river],template:(e,t)=>(0,v.JU)(t),requiredAssetsAny:[r.aT.freeShipping,r.aT.rating,r.aT.specialOffer],dynamicRenderingConfig:e=>(0,v.R)(e),modifier:(e,t)=>(0,v.$u)(t,!0)},Xe={configType:"prg-dr-infopane",region:[v.yp.infopane,v.yp.resinfopane],maxAdCount:3,template:"msn-info-pane-dynamic-rendering",supportedAssets:[r.aT.rating,r.aT.freeShipping,r.aT.review],dynamicRenderingConfig:()=>ae.v},Ye=[{configType:"prg-ads-tel-i",region:v.cE,template:"msn-ad-dr-perf",dynamicRenderingConfig:()=>ae.v},{configType:"prg-ads-tel-r",region:v.Fg,template:"msn-ad-dr-perf",dynamicRenderingConfig:()=>se.$}],Ze={configType:"prg-ad-eb",region:[...v.Fg,...v.cE],template:"msn-elite-badge",requiredAssetsAll:[r.aT.eliteBadge],supportedAssets:[r.aT.eliteBadge],maxAdCount:3,dynamicRenderingConfig:e=>v.cE.includes(e.region)?ae.v:se.$},et=(0,V.ZV)(se.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]),tt={configType:"prg-dr-fship",qualifier:(e,t)=>Pe(t,"shippingriver"),region:[v.yp.river],template:"msn-freeshipping-dr",requiredAssetsAll:[r.aT.freeShipping],dynamicRenderingConfig:e=>Fe(e,"shippingriver",et)},nt={name:"highlight-rating-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...L.u,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"highlight-rating"}]},{name:"ad-title",oneLineTitle:!0}]}]}]}]},it={configType:"prg-wpo-h-rating",region:[v.yp.river],requiredAssetsAll:[r.aT.rating],template:"msn-highlight-rating-card",supportedAssets:[r.aT.rating],dynamicRenderingConfig:()=>nt},rt=(0,V.It)(ae.v,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),ot=(0,V.It)(se.$,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),at={configType:"prg-ad-hover",region:[...v.vn],template:"msft-content-card",dynamicRenderingConfig:e=>v.cE.includes(e?.region)?rt:ot},st={name:"default-infopane-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1",trimBottom:!0},{name:"gradient-mask",paddingTop:"90",layout:{mode:"pixel",bottom:"0",width:"100%",zIndex:2},children:[{name:"ad-title",lineHeight:"36",titleFontSize:"28",oneLineTitle:!0}]},G.l]}]},ct={configType:"prg-infopaneDoubleCard19",region:v.cE,maxAdCount:3,template:"msn-card-19-by-10",dynamicRenderingConfig:()=>st},dt=(0,V.It)(st,["footer","ad-title"],[{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"17",height:"31",width:"100%"}},{lineHeight:"44"}]),ut={configType:"prg-infopane-db",region:[v.yp.riverdb],maxAdCount:3,template:"msn-card-19-by-10",dynamicRenderingConfig:()=>dt,modifier:(e,t)=>{t.enableNativeAdWC=!0}},lt=(0,V.FT)(se.$,"end-action-part",0,[{name:"like-button",layout:{zIndex:5}}]),pt={configType:"prg-ad-like",region:[v.yp.river,v.yp.resriver],template:"msn-like-button",dynamicRenderingConfig:()=>lt},ht={name:"logo-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...L.u,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"logo",width:"42",height:"42",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}},{name:"logo-title-wrapper",layout:{mode:"pixel",left:"54",bottom:"54",zIndex:2},children:[{name:"logo-title-flex-wrapper",layout:{mode:"flex",height:"42",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",titleFontSize:"20",twoLine:!0}]}]}]}]},gt={qualifier:(e,t)=>!!t.items?.[0]?.assets?.logo?.url,configType:"prg-ad-logo",region:[...v.Fg],template:"msn-native-ad-logo",requiredAssetsAll:[r.aT.logo],dynamicRenderingConfig:()=>ht,modifier:(e,t)=>{t.items&&t.items[0]}},ft=(0,V.RM)(ht,"logo",{name:"logo",width:"42",height:"42",borderRadius:"6",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}}),mt={qualifier:(e,t)=>!!t.items?.[0]?.assets?.logo?.url,configType:"prg-ad-logo-r",region:[...v.Fg],template:"msn-native-ad-logo-radius",requiredAssetsAll:[r.aT.logo],dynamicRenderingConfig:()=>ft},yt={configType:"prg-ad-combo2",region:v.Fg.concat(v.cE),template:(e,t)=>(0,v.uH)(t),requiredAssetsAny:[r.aT.rating,r.aT.specialOffer,r.aT.freeShipping,r.aT.discount],maxAdCount:1,modifier:(e,t)=>(0,v.$u)(t)},vt=(e,t)=>{const n=(0,V.As)(se.$,["gradient-mask","provider-name","ad-label"],[{name:"gradient-mask",peSeasonalColorMode:`peSeasonalColorMode${e}`,layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout",adLabelTextOpacity:"1",isSeasonal:!0},{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5},adLabelTextOpacity:"1",isSeasonal:!0}]);return(0,V.FT)(n,"default-template",3,[{name:"product-image",patternMode:`patternMode${t}`,useTransparentImage:!0,layout:{position:"absolute",bottom:0,width:"100%",height:121,zIndex:2,pointerEvents:"none"}}])},St=(vt("1","1"),vt("2","1"),vt("3","1"),vt("4","1"),vt("1","2"),vt("2","2"),vt("3","2"),vt("4","2"),{configType:"prg-ads-seasonal",qualifier:(e,t)=>wt(t),region:[...v.Fg],template:(e,t)=>"msn-pe-seasonal",dynamicRenderingConfig:e=>{const t=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.color"),n=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.elementStyle");return vt(t,n)}}),wt=(0,Te.Et)(a.Evv,"isPersonalizedAvailable")((e=>"seasonal"===(0,c.Z)(e,"items[0].ext.adCreative.templateId")&&!!e.items?.[0]?.ext?.adCreative?.templateConfig&&!1===(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.suppress"))),bt={configType:"prg-ads-seav1",region:[...v.Fg],template:(e,t)=>"msn-pe-seasonal-v1",dynamicRenderingConfig:e=>vt("3","1")},Ct={configType:"prg-ads-seav1-p",region:v.Fg,template:(e,t)=>"msn-pe-seasonal-v1p",qualifier:(e,t)=>t.providerId&&"bing"===t.providerId.toLowerCase(),dynamicRenderingConfig:e=>vt("3","1")},Tt=(0,V.FT)(se.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating"}]}]),kt={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},Pt=e=>Pe(e,"shippingriver"),At={configType:"prg-ads-personal",qualifier:(e,t)=>Pt(t)||Pe(t,"ratingsriver"),region:[v.yp.river],template:(e,t)=>Pt(t)?"msn-freeshipping-dr":"msn-rating-dr",supportedAssets:[r.aT.freeShipping,r.aT.rating,r.aT.review],dynamicRenderingConfig:e=>{const t=Ae(e)?et:kt,n=Ie(e)?Tt:kt;return Pt(e)?Fe(e,"shippingriver",t):Fe(e,"ratingsriver",n)}},It={configType:"prg-wpo-deco-dr",region:[v.yp.river,v.yp.infopane,v.yp.resriver,v.yp.resinfopane],template:"msn-decoration-dynamic",requiredAssetsAny:[r.aT.rating,r.aT.freeShipping,r.aT.review],dynamicRenderingConfig:()=>se.$},Et={configType:"prg-dr-rating",qualifier:(e,t)=>Pe(t,"ratingsriver"),region:[v.yp.river],template:"msn-rating-dr",requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating,r.aT.review],dynamicRenderingConfig:e=>Fe(e,"ratingsriver",Tt)},Rt=e=>(0,V.FT)(e?ae.v:se.$,e?"default-infopane-template":"default-template",0,[{name:"sale-highlight-badge",layout:{mode:"pixel",top:"16",left:"16",zIndex:2}}]),Mt=Rt(!1),xt=Rt(!0),Lt={configType:"prg-ad-sh-v1",region:[...v.Fg,...v.cE],template:"msn-sale-highlight-v1",requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:v.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>v.cE.includes(e.region)?xt:Mt},Ft={name:"sale-highlight-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:Y.FLEX,alignItems:ee.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3},children:[{name:"ad-title"}]}]}]},Dt={name:"sale-highlight-v3-template",children:[...L.u.filter((e=>"product-image"!==e.name)),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,alignItems:ee.CENTER,justifyContent:Z.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},Ot={configType:"prg-ad-sh-v3",region:[...v.Fg],template:"msn-sale-highlight-v3",qualifier:(e,t)=>(0,v.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:v.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>(0,v.Up)(e)?Ft:Dt},_t={name:"sale-highlight-v4-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:Y.FLEX,alignItems:ee.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{adBackgroundColor:"#2E2E2E",width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.7",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,V.Tb)(G.l,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]}]},Nt={name:"sale-highlight-v4-template",children:[...L.u.filter((e=>"product-image"!==e.name)),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,alignItems:ee.CENTER,justifyContent:Z.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1,adBackgroundColor:"#2E2E2E"}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,V.Tb)(G.l,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]},Bt={configType:"prg-ad-sh-v4",region:[...v.Fg],template:"msn-sale-highlight-v4",qualifier:(e,t)=>(0,v.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:v.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>(0,v.Up)(e)?_t:Nt},Ut={configType:"prg-wpo-ss",region:[v.yp.river],template:"msn-slideshow-card",modifier:(e,t)=>{t.slideshowProps=t.template.slideshowProps={autoScroll:!0,autoScrollIntervalMs:3e3,maxImageCount:5,enableSlideshowMediaControls:!0}},multiImage:!0},$t={name:"spotlight-image-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:1},imageMaskOn:!0},{name:"spotlight-background",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},paddingBottom:"0"}]}]},Ht={configType:"prg-wpo-sl",region:[v.yp.river],template:"msn-spotlight-image",supportedAssets:[],supportedImageRatios:["1x1","3x4","4x3"],targetImageRatio:"1x1",dynamicRenderingConfig:()=>$t},Wt={...se.$,userActionLogger:"PrgTitle2"},Gt={configType:"prg-title-2",region:v.Fg,template:"msn-title-max-line-2",dynamicRenderingConfig:()=>Wt},Vt={...se.$,userActionLogger:"PrgTitle2C"},qt={configType:"prg-title-2-c",region:v.Fg,template:"msn-title-max-line-2-c",dynamicRenderingConfig:()=>Vt},jt=(0,V.RM)(se.$,"gradient-mask",{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"trending",layout:{position:"relative",zIndex:5}},{name:"ad-title"}]}),zt={configType:"prg-trending",region:[...v.Fg],template:"msn-trending",requiredAssetsAll:[r.aT.viewed],dynamicRenderingConfig:()=>jt},Kt={name:"zindex-v2-original-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",height:"304",zIndex:1},isFullGradient:!0},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"div",layout:{mode:"pixel",bottom:"45",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},Qt={configType:"prg-ad-zv2-o",region:[v.yp.river],qualifier:(e,t)=>(0,v.Ue)(t),template:"msn-ad-zindex-v2-original",requiredAssetsAll:[r.aT.transparentImage],dynamicRenderingConfig:()=>Kt},Jt={name:"zindex-v2-polygon-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...L.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:1},opacity:"0.4",alwaysPresent:!0},{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"polygon-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:2}},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}],isRadialMask:!0}]}]},Xt={configType:"prg-ad-zv2-p",region:[v.yp.river],qualifier:(e,t)=>(0,v.Ue)(t),template:"msn-ad-zindex-v2-polygon",requiredAssetsAll:[r.aT.transparentImage],dynamicRenderingConfig:()=>Jt},Yt={configType:"prg-ad-combo-txt",region:[...v.Fg],template:(e,t)=>(0,v.xP)(t),requiredAssetsAny:[r.aT.sold,r.aT.returnPolicy,r.aT.condition],modifier:(e,t)=>(0,v.E5)(t)},Zt={configType:"prg-ad-ris1",region:v.Fg,supportedAssets:[r.aT.price],modifier:(e,t)=>{(0,v.dj)(t)}},en=[{configType:"prg-ad-desc-wide-1",region:v.Fz,template:(e,t)=>(0,v.PY)(t)},{configType:"prg-ad-desc-wide-2",region:v.Fz,template:(e,t)=>(0,v.PY)(t)}],tn=["msn-geometric-ad-waves-1","msn-geometric-ad-waves-3","msn-geometric-ad-waves-4","msn-geometric-ad-nature-3","msn-geometric-ad-sparkles-1","msn-geometric-ad-sparkles-2","msn-geometric-ad-sparkles-3","msn-geometric-ad-sparkles-4","msn-geometric-ad-sparkles-5"],nn=[{configType:"prg-ad-geometric",region:[...v.Fg],modifier:(e,t)=>{(0,v.rf)(t,tn,"msft-content-card",t.template.seasonalAdTemplateConfig.density)}}],rn={configType:"prg-ad-ai-img",region:[...v.Fg,...v.cE],template:"msn-native-ad-ai-img",requiredAssetsAll:[r.aT.transparentImage],modifier:(e,t)=>{(0,v.Gu)(t)}},on=[O,_,U,$,ze,Ke,It,De,Ut,Gt,qt,it,gt,mt,_e,Be,Ue,He,Ve,Ge,qe,Xe,ct,ut,Qt,Xt,Ht,K,J,j,re,oe,le,...de,...Ye,T,k,E,R,M,x,w,b,C,S,I,P,A,Qe,tt,Ze,Et,At,pt,at,zt,Lt,Ot,Bt,Je,yt,H,W,St,bt,Ct,Yt,Zt,rn,...nn,...en,...je];var an=n(82948),sn=n(78931),cn=n(94921),dn=n(50234);class un{constructor(){this.filterConfigs=(e,t=[])=>(0,sn.Z)([...on,...t],(t=>(0,cn.Z)([...an.Sj,t.qualifier],(n=>!n||n(t,e))))),this.fallbackConfig=e=>v.cE.includes(e.region)?ze:Ke,this.pickConfigByWeight=e=>{let t=0;(0,g.Z)(e,(e=>{t=t+e.weight||v.KB}));const n=Math.floor(Math.random()*t);let i=0;for(let t=0;t<e.length;++t)if(i+=e[t].weight||v.KB,n<i)return e[t]},this.preProcess=e=>{e?.template?.enableVAPhase2||((0,g.Z)(e.items,(e=>{e.assets&&(this.calculateDiscount(e.assets),this.filterRatings(e.assets))})),(0,dn.dO)(e))},this.postProcess=(e,t)=>{(0,g.Z)([...an.F8,e.modifier],(n=>n?.(e,t)))},this.calculateDiscount=e=>{const t=e.price,n=e.salePrice;if(t&&n){const i=Number(t.replace(/[^0-9.-]+/g,"")),r=Number(n.replace(/[^0-9.-]+/g,""));e.discount=Math.floor((i-r)/i*100)}},this.filterRatings=e=>{e&&e.rating&&(isNaN(parseInt(e.rating))||parseInt(e.rating)<=6)&&(e.rating=void 0)}}selectTemplate(e,t=[]){this.preProcess(e);const n=this.filterConfigs(e,t),i=n&&n.length>0?this.pickConfigByWeight(n):this.fallbackConfig(e);this.postProcess(i,e)}}var ln=n(28951);class pn{static#e=this.concat=(e,t)=>`${e}.${t}`;static#t=this.identity=e=>t=>pn.concat(e,t);static#n=this.boolean=e=>t=>t?pn.concat(e,"1"):null}class hn{constructor(){this._availableAssets="",this._displayedAssets=""}get availableAssets(){return this._availableAssets}get displayedAssets(){return this._displayedAssets}setAvailableAssets(e){(e.items?.[0]?.assets||(0,c.Z)(e,"items[0].ext.adCreative.templateConfig"))&&(this._availableAssets=this.concatAssets(e))}setDisplayedAssets(e){e.items?.[0]?.assets&&(this._displayedAssets=this.concatAssets(e))}concatAssets(e){let t="";(0,c.Z)(e,"items[0].assets")&&(t=(0,d.Z)(Object.keys(e.items[0].assets),(e=>{const t=r.aT[e].split("-");return"data"==t?.[0]?t[1]:"image"==t?.[0]?`i${t[1]}`:void 0})).join("_"));const n=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig");if(!n)return t;let i="";n&&(i=(0,d.Z)(Object.keys(n),(e=>r.XY[e])).join("_"));return t+(t&&i?"_":"")+i}}(0,i.gn)([(0,Te.Et)(a.NMS,"setAvailableAssets")],hn.prototype,"setAvailableAssets",null),(0,i.gn)([(0,Te.Et)(a.NMS,"setDisplayedAssets")],hn.prototype,"setDisplayedAssets",null),(0,i.gn)([(0,Te.Et)(a.NMS,"concatAssets")],hn.prototype,"concatAssets",null);const gn={templateType:pn.identity("type"),animatedImage:pn.identity("ani"),flipZIndex:pn.boolean("fz"),landscapeOverlay:pn.boolean("lo")};class fn{constructor(){this.hasAnyInlineDecoration=e=>{if(e.items&&0!==e.items.length){if(e.items[0]&&e.items[0].assets){const t=e.items[0].assets;return!!(t.price||t.salePrice||t.installmentPrice||t.rating||t.review||t.priceDrop||t.viewed||t.freeShipping||t.discount)}return!1}return!1}}updateTemplate(e,t={}){const n=(0,u.Z)(e);try{this.updateTemplateInternal(e,t)}catch(t){(0,s.OO)(t,a.NMS,"Fail to apply template service on placement"),e=void 0,e=(0,u.Z)(n)}}updateTemplateInternal(e,t){if(!e)return;ke(e),this.decorationBeaconBuilder=new hn,this.decorationBeaconBuilder.setAvailableAssets(e);const n=(0,l.Z)({},t,o.j3);if(n.configType){e.template=n;(new un).selectTemplate(e)}else e.template=this.processConfig(e,n),this.resetTempateTypeForInfopaneInMultiAds(e),this.filterAssetByFlight(e),this.updatePlacementImageSize(e),this.updateTemplateTypeForPriceDiscount(e);this.updateBeacon(e),e?.template?.templateType&&e.template.templateType.endsWith("-c")&&(e.template.templateType="msft-content-card",this.filterAssetByFlight(e))}processConfig(e,t){const n=t;if(this.updateAllowedAssetsAndTemplateForInfopane(e,n),this.updateTemplateInfoForDRInfopane(e,n),"msn-slideshow-card"!==n.templateType&&"msn-pseudo-video-card"!==n.templateType||this.updateSlideshowTemplateType(e,t,n),"msn-pattern-overlay-card"===n.templateType){"225"===this.getItemImageSize(e).height?n.landscapeOverlay=!1:n.templateType="msft-content-card"}return"msft-content-card"===n.templateType&&e.items&&e.items.length>3&&n.adCarousel&&(n.templateType="msn-ad-carousel"),this.updateTemplateInfoForBrandStory(e,n),n}updatePlacementImageSize(e){if("msn-pattern-overlay-card"===e.template.templateType){const t=this.getItemImageSize(e);e.imageWidth=(0,c.Z)(e,"imageWidth",t.width),e.imageHeight=(0,c.Z)(e,"imageHeight",t.height)}}updateBeacon(e){const t=t=>{if(t.includes("srtb.msn.com")){const n=new URL(t);return this.addOrUpdateUrlQueryParam(n,"t",this.serializeTemplateConfig(e)),this.decorationBeaconBuilder.setDisplayedAssets(e),this.decorationBeaconBuilder.availableAssets&&this.addOrUpdateUrlQueryParam(n,"dec",this.decorationBeaconBuilder.availableAssets+"-"+this.decorationBeaconBuilder.displayedAssets),n.href}return t};if(!(0,p.Z)(e.beaconsJson)){const n=JSON.parse(e.beaconsJson);n&&((0,h.Z)(n.trb)&&(n.trb=n.trb.map((e=>t(e)))),(0,h.Z)(n.tvb)&&(n.tvb=n.tvb.map((e=>t(e)))),e.beaconsJson=JSON.stringify(n))}e&&(0,h.Z)(e.items)&&(0,g.Z)(e.items,(e=>{if(!(0,p.Z)(e.clickBeacons)){const n=JSON.parse(e.clickBeacons);n&&((0,h.Z)(n.tcb)&&(n.tcb=n.tcb.map((e=>t(e)))),e.clickBeacons=JSON.stringify(n))}}))}serializeTemplateConfig(e){return e.items&&e.items.length>0&&e.items[0].video?e.items[0].verificationParameters?"msn-video-ias":"msn-video":(0,f.Z)(gn,((t,n,i)=>{const r=(0,c.Z)(e.template,i);if(r){const e=n(r);if(e)return""===t?e:`${t}_${e}`}return t}),"")}addOrUpdateUrlQueryParam(e,t,n){return ln.cX.getQueryParameterByName(t,e.href)?ln.cX.updateSearchParam(e,t,n):ln.cX.appendSearchParam(e,t,n)}updateSlideshowTemplateType(e,t,n){e&&e.items&&e.items[0]&&e.items[0].images&&e.items[0].images.length>1?(n.templateType=t.templateType,e.slideshowProps=n.slideshowProps):(n.templateType="msft-content-card",n.slideshowProps=void 0)}getItemImageSize(e){const t=(0,m.Z)(e.items);return(0,p.Z)(t)?{}:{width:`${(0,c.Z)(t,"imageWidth")}`,height:`${(0,c.Z)(t,"imageHeight")}`}}calculateDiscount(e){const t=e.price,n=e.salePrice;if(t&&n){const i=Number(t.replace(/[^0-9.-]+/g,"")),r=Number(n.replace(/[^0-9.-]+/g,""));e.discount=Math.floor((i-r)/i*100)}}filterAssetByFlight(e){if(!e.template?.enableVAPhase2&&e&&e.items&&e.items[0]&&e.items[0].assets){this.calculateDiscount(e.items[0].assets);const t=(0,y.Z)([...r.fs,...e.template?.allowedAssets||[],...e.template?.auctionCallAssets||[]]),n=(0,f.Z)(e.items[0].assets,((e,n,i)=>(t.includes(r.aT[i])&&(e[i]=n),e)),{});e.items[0].assets=n}}resetTempateTypeForInfopaneInMultiAds(e){"infopane"===e.region&&e.items&&e.items.length>1&&"msn-info-pane-dynamic-rendering"!==e.template.templateType&&(e.template.templateType="msft-content-card",e.template.animatedImage="")}isValidProviderNameForBrand(e){if(!(e&&e.items&&e.items[0]&&e.items[0].providerName))return!1;const t=e.items[0].providerName;return-1===t.indexOf("/")&&t.length<20}updateAllowedAssetsAndTemplateForInfopane(e,t){"msn-brand-story"!==t.templateType&&"msn-brand-story-no-deco"!==t.templateType&&"msn-brand-story-no-progressive-display"!==t.templateType&&"msn-hotspot-single"!==t.templateType&&"msn-discount-scribble"!==t.templateType&&"msn-content-reveal"!==t.templateType&&"msn-gamification"!==t.templateType||"infopane"===e.region&&(t.allowedAssets=void 0,t.templateType="msft-content-card")}updateTemplateInfoForBrandStory(e,t){"msn-brand-story"!==t.templateType&&"msn-brand-story-no-deco"!==t.templateType&&"msn-brand-story-no-progressive-display"!==t.templateType||(e.items?.[0]?.description===e.items?.[0]?.providerName&&(e.items[0].description=null),this.isValidProviderNameForBrand(e)||(t.templateType="msft-content-card",t.allowedAssets=void 0))}updateTemplateTypeForPriceDiscount(e){e.items?.[0]?.assets?.discount>=e.template?.discountThreshold||(["msn-hotspot-single","msn-discount-scribble","msn-gamification"].includes(e.template?.templateType)&&(e.template.templateType="msft-content-card",e.template.allowedAssets=void 0,e.items[0].assets={}),"msn-content-reveal"===e.template?.templateType&&(delete e.items?.[0]?.assets?.discount,e.items?.[0]?.description===e.items?.[0]?.providerName&&(e.items[0].description=null),e.items?.[0]?.description||this.hasAnyInlineDecoration(e)||(e.template.templateType="msft-content-card",e.template.allowedAssets=void 0)),"msn-brand-story"===e.template?.templateType&&delete e.items?.[0]?.assets?.discount)}updateTemplateInfoForDRInfopane(e,t){"river"===e.region||"infopane"==e.region&&"msn-info-pane-dynamic-rendering"===t.templateType||(t.templateType="msft-content-card"),"river"===e.region&&"msn-info-pane-dynamic-rendering"===t.templateType&&(t.templateType="msft-content-card")}}(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplate")],fn.prototype,"updateTemplate",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateInternal")],fn.prototype,"updateTemplateInternal",null),(0,i.gn)([(0,Te.Et)(a.NMS,"processConfig")],fn.prototype,"processConfig",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updatePlacementImageSize")],fn.prototype,"updatePlacementImageSize",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateBeacon")],fn.prototype,"updateBeacon",null),(0,i.gn)([(0,Te.Et)(a.NMS,"serializeTemplateConfig")],fn.prototype,"serializeTemplateConfig",null),(0,i.gn)([(0,Te.Et)(a.NMS,"addOrUpdateQueryParam")],fn.prototype,"addOrUpdateUrlQueryParam",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateSlideshowTemplateType")],fn.prototype,"updateSlideshowTemplateType",null),(0,i.gn)([(0,Te.Et)(a.NMS,"getItemImageSize")],fn.prototype,"getItemImageSize",null),(0,i.gn)([(0,Te.Et)(a.NMS,"calculateDiscount")],fn.prototype,"calculateDiscount",null),(0,i.gn)([(0,Te.Et)(a.NMS,"filterAssetByFlight")],fn.prototype,"filterAssetByFlight",null),(0,i.gn)([(0,Te.Et)(a.NMS,"resetTempateTypeForInfopaneInMultiAds")],fn.prototype,"resetTempateTypeForInfopaneInMultiAds",null),(0,i.gn)([(0,Te.Et)(a.NMS,"isValidProviderNameForBrand",(()=>!1))],fn.prototype,"isValidProviderNameForBrand",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateAllowedAssetsAndTemplateForInfopane")],fn.prototype,"updateAllowedAssetsAndTemplateForInfopane",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateInfoForBrandStory")],fn.prototype,"updateTemplateInfoForBrandStory",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateTypeForPriceDiscount")],fn.prototype,"updateTemplateTypeForPriceDiscount",null),(0,i.gn)([(0,Te.Et)(a.NMS,"hasAnyInlineDecoration")],fn.prototype,"hasAnyInlineDecoration",void 0),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateInfoForDRInfopane")],fn.prototype,"updateTemplateInfoForDRInfopane",null)},89136:function(e,t,n){n.d(t,{dQ:function(){return p}});var i=n(13218),r=n(44132),o=n(33779),a=n(5302),s=n(38300),c=n(21215);const d={180:"101",270:"102",360:"103",540:"104",720:"105",1080:"107"};function u(e,t,n,o,a,c){if(!e||!t)return;const d=e.target.parentElement,u=e.target.querySelector("video"),l=JSON.parse(d.attributes["data-t"]?.value).n,p=e.target.player,h=function(e){const t={AdStart:"AdPlayStarted",AdComplete:"AdPlayCompleted",EventPause:"Pause",ContentResume:"Resume",seeked:"Seek",error:"ContentError",canplay:"Canplay",canplaythrough:"Canplaythrough"};return t[e]&&(e=t[e]),s.Bs[e]}(t.name),g=t.data??{PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"},f="video/mp4"===p?.currentType(),m={type:61,name:"nativeAds_"+l,ext:{videoCs:n,eventType:h,timeElasped:u.currentTime,videoFormatCode:f?Number(c?.format):1006,title:o,videoDuration:p?.duration(),fr:i.Al?.ClientSettings?.geo_country+"_"+i.Al?.ClientSettings?.geo_city+"_"+i.Al?.Locale+"_"+a,pageGroup:"",playerInstanceId:e.target.id,playType:"pb",playerTech:g.PlayerTechnology,pluginVersion:g.PlayerTechnology,size:u.clientWidth+"x"+u.clientHeight,videoPlayerType:g.VideoPlayerType,playerType:g.PlayerTechnology,playDuration:u.currentTime,inline:!1,videoUrl:p?.src(),errorType:"error"===t.name?p?.error()?.code:null,errorDescription:"error"===t.name?p?.error()?.message:null,bandwidth:f?null:p?.tech_?.hls?.bandwidth,throughput:f?null:p?.tech_?.hls?.throughput,bufferWaitTime:t.data?.bufferTime}};r.M0.sendVideoPlayEvent(m,d,!0)}function l(e,t){e&&(e.bigPlayButton&&e.bigPlayButton.el_&&e.bigPlayButton.enabled_&&(e.bigPlayButton.el_.style.display="none"),e.loadingSpinner&&e.loadingSpinner.el_&&(e.loadingSpinner.el_.style.display="none"),t&&(t.style.display="none"))}function p(e,t,n=!0){if((0,c.N)()&&e&&e.items&&e.items.length>t&&e.items[t].video){const i=new DOMParser,r=function(){if(!(0,c.N)())return;if(!window.trustedTypes||!window.trustedTypes.createPolicy)return;const e=window.trustedTypePolicies||(window.trustedTypePolicies={});if(e.xmlPassThroughPolicy)return e.xmlPassThroughPolicy;const t=window.trustedTypes.createPolicy("xmlPassThroughPolicy",{createHTML:e=>e});return e.xmlPassThroughPolicy=t,t}(),s=r?r.createHTML(e.items[t].video):e.items[t].video,p=i.parseFromString(s,"application/xml"),h=e.region,g=p.getElementsByTagName("MediaFile"),f=Array.from(g).map((e=>{return{url:e.textContent,delivery:e.getAttribute("delivery"),id:e.getAttribute("id"),bitrate:Number(e.getAttribute("bitrate")),minBitrate:Number(e.getAttribute("minBitrate")),maxBitrate:Number(e.getAttribute("maxBitrate")),codec:e.getAttribute("codec"),scalable:!!Number(e.getAttribute("scalable")),maintainAspectRatio:!!Number(e.getAttribute("maintainAspectRatio")),width:Number(e.getAttribute("width")),height:Number(e.getAttribute("height")),contentType:e.getAttribute("type"),format:(t=e.getAttribute("type"),n=e.getAttribute("height"),"application/x-mpegURL"==t?"1006":d[n])};var t,n})),m=p.getElementsByTagName("Duration"),y=m.length>0?m[0].textContent:null,v=p.getElementsByTagName("Tracking"),S=Array.from(v).map((e=>({value:e.textContent,event:e.getAttribute("event"),offset:e.getAttribute("offset")}))),w=p.getElementsByTagName("Ad"),b=w.length>0?Number(w[0].getAttribute("id")):null,C=p.getElementsByTagName("AdTitle"),T=C.length>0?C[0].textContent:"",k=p.getElementsByTagName("AdServingId"),P=k.length>0?k[0].textContent:"",A=p.getElementsByTagName("ClickThrough"),I=A.length>0?A[0].textContent:"",E=p.getElementsByTagName("Impression"),R=E.length>0?E[0].textContent:"",M=p.getElementsByTagName("Pricing");let x=null,L=null,F=null;M.length>0&&(x=Number(M[0].textContent),L=M[0].getAttribute("model"),F=M[0].getAttribute("currency"));let D=null,O=null;const _=P+"_"+b,N=async(e,t,n,i)=>{if("telemetry"===e?.type&&("ContentOpen"==t.name&&(D=Date.now(),O=D),u(e,t,_,T,h,i)),"error"===n)(0,o.H)(a.mFi,t.error()?.message),u(e,{name:"error",data:{VideoDuration:y,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},_,T,h,i);else if(D&&"canplay"===n){const t=Date.now()-D;D=null,u(e,{name:n,data:{VideoDuration:y,bufferTime:t,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},_,T,h,i)}else if(O&&"canplaythrough"===n){const t=Date.now()-O;O=null,u(e,{name:n,data:{VideoDuration:y,bufferTime:t,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},_,T,h,i)}},B=document.createElement("div");B.id="nativeAdVideoMask",B.className="nativeAdVideoMask-mask",B.style.cssText="position:absolute;inset:0px;background-image:var(--mask-gradient, linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0,0,0,0) 176px));display:flex;";const U=(e,t)=>{let[i,r,o,a,s,c,d,u]=[null,null,null,null,null,null,null,null],[p,g,f]=[null,null,null];const m=!!e&&e.el_&&e.el_.querySelector("#nativeAdVideoMask");if(n?(p=!!e&&e.el_&&e.el_.getRootNode().host&&e.el_.getRootNode().host.getRootNode(),g=!!p&&p.host&&p.host.parentElement&&p.host.parentElement.querySelector("native-ad-video-controls")&&p.host.parentElement.querySelector("native-ad-video-controls").shadowRoot,f=!!p&&p.host&&p.host.parentElement&&p.host.parentElement.parentElement&&p.host.parentElement.parentElement.querySelector("native-ad-video-controls")&&p.host.parentElement.parentElement.querySelector("native-ad-video-controls").shadowRoot):(g=!!e&&e.el_&&e.el_.parentElement&&e.el_.parentElement.parentElement,f=!!g&&g.parentElement,p=g||f),p&&(d=p.querySelector(".video-ad-background-img-river"),u=p.querySelector(".video-ad-background-img-infopane")),g&&(a=g.querySelector("#nativead-video-replay-button-river"),s=g.querySelector("#nativead-video-learn-more-button-river")),f&&(i=f.querySelector("#nativead-video-play-button-infopane"),r=f.querySelector("#nativead-video-replay-button-infopane"),o=f.querySelector("#nativead-video-learn-more-button-infopane"),n?c=p.host.parentElement.parentElement.querySelector(".info-pane-slide-title"):"infopane"==h&&(c=f.nextElementSibling&&f.nextElementSibling.querySelector("h3"))),t&&"ended"==t.toLowerCase()&&(a&&(a.style.display="block"),r&&(r.style.display="block"),o&&(o.style.display="block"),s&&(s.style.display="block")),e&&e.errorDisplay&&e.errorDisplay.el_&&(e.errorDisplay.el_.style.display="none"),t&&"play"==t.toLowerCase()&&(a&&(a.style.display="none"),i&&(i.style.display="none"),r&&(r.style.display="none"),o&&(o.style.display="none"),s&&(s.style.display="none"),c&&(c.style.display="none"),m&&(m.style.display="none")),t&&"error"==t.toLowerCase()&&e&&"video/mp4"==e.currentType()&&l(e,i),t&&"pause"==t.toLowerCase()&&(c&&(c.style.display=null),m&&(m.style.display="flex")),t&&"ready"==t.toLowerCase()){if(d&&(d.style.display="none"),u&&(u.style.display="none"),i){i.style.display="block";const t=e&&e.posterImage&&e.posterImage.el_;if(t){const n=t.nextSibling;e.el_.insertBefore(B,n)}}e&&!e.currentSrc()&&l(e,i)}};return{VideoPlayerProps:{posterUrl:e.items[t].imageUrl,onMessage:(e,t,n,i)=>{U(t,n),N(e,t,n,i)},videoMetadataProps:{videoSources:f},playerConfigProps:{autoplay:"river"==h,inViewPlay:"river"==h,replayWhenInView:!1,outOfViewPause:!0,inViewPlayPercentage:.5,muted:!0,disableSeek:!0,disableSeekButtons:!0,useProgressiveVideoFallback:!0}},ViewabilityProps:{Duration:y,TrackingEvents:S},VideoAdProps:{AdId:b,AdTitle:T,AdServingId:P,ClickThrough:I,Impression:R,Price:x,PricingModel:L,Currency:F}}}return null}},50234:function(e,t,n){n.d(t,{GM:function(){return c},dO:function(){return s}});var i=n(5302),r=n(78931),o=n(31404);const a=[{ratio:"invalid",width:1,height:9999},{ratio:"1x1.91",width:1,height:1.91},{ratio:"9x16",width:9,height:16},{ratio:"3x4",width:3,height:4},{ratio:"1x1",width:1,height:1},{ratio:"4x3",width:4,height:3},{ratio:"16x9",width:16,height:9},{ratio:"1.91x1",width:1.91,height:1}],s=(0,o.Et)(i.Evv,"calculateRatio")((e=>{const t=e?.items[0]?.originalImageWidth,n=e?.items[0]?.originalImageHeight;if(!t||!n)return;const i=u(e.items[0].imageUrl);if(!i)return;const r=i.searchParams.get("c");if(r&&"4"!==r)return;const o=Number(t),s=Number(n);let c=1;for(;c<a.length&&Math.ceil(o*a[c].height)!==Math.ceil(s*a[c].width);++c)if(!(Math.ceil(o*a[c].height)>Math.ceil(s*a[c].width))){if(1==c)break;const e=1*o/s;Math.abs(e-a[c].width/a[c].height)>=Math.abs(e-a[c-1].width/a[c-1].height)&&(c-=1);break}c==a.length&&(c-=1),e.template.desiredRatio=a[c].ratio})),c=(0,o.Et)(i.Evv,"reduceWidthOrHeightAndUpdateUrl")(((e,t,n,i)=>{const o=(0,r.Z)(a,(e=>e.ratio===t));if(1!==o.length)return;const s=o[0],c=n?e.ext.originalImageWidth:e.originalImageWidth,u=n?e.ext.originalImageHeight:e.originalImageHeight;if(!c||!u)return;const l=1*c/u,p=1*s.width/s.height,h={w:c,h:u};l>=p?h.w=Math.round(u*p):h.h=Math.round(c/p);const g={river:300,infopane:604};return h.w>g[i]?(h.h=Math.round(h.h*g[i]/h.w),h.w=g[i]):(h.h=g[i]*p,h.w=g[i]),d(h.h,h.w,e,n),h})),d=(0,o.Et)(i.Evv,"updateUrlWithDesiredSize")(((e,t,n,i)=>{const r=u(i?n.url:n.imageUrl);r&&(r.searchParams.set("h",e),r.searchParams.set("w",t),r.searchParams.set("c","4"),i?n.url=r.href:n.imageUrl=r.href)})),u=(0,o.Et)(i.Evv,"constructUrl")((e=>{let t;try{t=new URL(e)}catch(n){try{t=new URL(`https://${e}`)}catch{return}}return t}))},82948:function(e,t,n){n.d(t,{F8:function(){return x},Sj:function(){return M},vy:function(){return E}});var i=n(75115),r=n(13578),o=n(31011),a=n(11935),s=n(4935),c=n(5302),d=n(4),u=n(50234),l=n(31404),p=n(44132),h=n(98130);const g=(0,l.Et)(c.Evv,"checkConfigType")(((e,t)=>t.template.configType===e.configType)),f=(0,l.Et)(c.Evv,"checkRegion")(((e,t)=>e.region.includes(t.region))),m=(0,l.Et)(c.Evv,"checkAllAssets")(((e,t)=>!!(0,r.Z)(e.requiredAssetsAll)||e.requiredAssetsAll.every((e=>!(0,r.Z)(t?.items[0]?.assets)&&Object.keys(t?.items[0]?.assets).some((t=>e===i.aT[t])))))),y=(0,l.Et)(c.Evv,"checkAnyAssets")(((e,t)=>!!(0,r.Z)(e.requiredAssetsAny)||e.requiredAssetsAny.some((e=>!(0,r.Z)(t?.items[0]?.assets)&&Object.keys(t?.items[0]?.assets).some((t=>e===i.aT[t])))))),v=(0,l.Et)(c.Evv,"checkAdCount")(((e,t)=>t.items.length<=(e.maxAdCount||1))),S=(0,l.Et)(c.Evv,"checkMultiImage")(((e,t)=>!e.multiImage||t.items[0]?.images?.length>1)),w=(0,l.Et)(c.Evv,"checkDiscountThreshold")(((e,t)=>!e.discountThreshold||!t.items[0]?.assets||e.discountThreshold<=t.items[0].assets.discount)),b=(0,l.Et)(c.Evv,"checkRatio")(((e,t)=>!e.supportedImageRatios||e.supportedImageRatios?.includes(t?.template?.desiredRatio))),C=(0,l.Et)(c.Evv,"setTemplate")(((e,t)=>{t.template.templateType=e.template instanceof Function?e.template(e,t):e.template,t.template.dynamicRenderingConfig=e.dynamicRenderingConfig&&e.dynamicRenderingConfig(t)})),T=(0,l.Et)(c.Evv,"filterAssets")(((e,t)=>{if(t?.template?.enableVA||t?.template?.enableVAPhase2)return;const n=(0,o.Z)([...i.fs,...t?.template?.allowedAssets||[],...t?.template?.auctionCallAssets||[],...e.supportedAssets||[],...e.requiredAssetsAll||[],...e.requiredAssetsAny||[]]);(0,a.Z)(t.items,(e=>{if((0,r.Z)(n)||(0,r.Z)(e?.assets))return void delete e.assets;const t=(0,s.Z)(e.assets,((e,t,r)=>(n.includes(i.aT[r])&&(e[r]=t),e)),{});e.assets=t}))})),k=(0,l.Et)(c.Evv,"updateImageRatio")(((e,t)=>{if(!e.supportedImageRatios||!e.targetImageRatio)return;let n;const i=d.cE.includes(t.region)?"infopane":"river";t.items.forEach((t=>{const r=(0,u.GM)(t,e.targetImageRatio,!1,i);n||(n=r),t.images&&(0,a.Z)(t.images,(t=>{t.ext&&t.ext.originalImageWidth&&t.ext.originalImageHeight&&(0,u.GM)(t,e.targetImageRatio,!0,i)}))})),n?.h&&n?.w&&(t.template.desiredHeight=n.h.toString(),t.template.desiredWidth=n.w.toString())})),P=(0,l.Et)(c.Evv,"trimProviderName")(((e,t)=>{t&&t.items&&t.items.forEach((e=>{e.providerName&&(e.providerName=E(e.providerName,e.destinationUrl))}))})),A=h.jG.CurrentRequestTargetScope&&h.jG.CurrentRequestTargetScope.pageExperiments,I=A&&A.includes("prg-ad-ivq"),E=(0,l.Et)(c.Evv,"trimProviderNameHelper")(((e,t)=>{if(!e)return"";I&&p.M0.sendClientLogEvent({message:"Before trimming provider name",pb:{providerName:e},type:"information"});const n=e.trim();try{let i=n;n.startsWith("http://")||n.startsWith("https://")||(i="https://"+n),new URL(i);const r=n.match(/^(www\.)?([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+)/);return r?n.length-r[2].length==1?n:(I&&r[2]!==n&&p.M0.sendClientLogEvent({message:"After trimming provider name",pb:{providerNameBeforeTrimming:e,providerNameAfterTrimming:r[2],adUrl:t},type:"information"}),r[2]):n}catch(e){return n}})),R=(0,l.Et)(c.Evv,"updateLayoutColor")(((e,t)=>{t&&t.items&&t.items.forEach((e=>{e.images&&e.images.forEach((e=>{e&&e.ext&&e.ext.layoutColor&&(e.ext.layoutColor.startsWith("#")||(e.ext.layoutColor="#"+e.ext.layoutColor))}))}))})),M=[g,f,m,y,v,w,S,b],x=[C,T,k,P,R]},4:function(e,t,n){n.d(t,{yp:function(){return c},vn:function(){return S},KB:function(){return A},XP:function(){return P},cE:function(){return y},Ue:function(){return I},PY:function(){return j},Up:function(){return E},dj:function(){return V},FH:function(){return v},FC:function(){return w},rf:function(){return z},PB:function(){return C},Fg:function(){return m},R:function(){return F},JU:function(){return D},J2:function(){return N},uH:function(){return _},ZV:function(){return W},xP:function(){return H},$u:function(){return O},E5:function(){return G},VR:function(){return k},Gu:function(){return X},BU:function(){return T},n_:function(){return g},zI:function(){return f},Fz:function(){return b}});var i=n(82356),r=n(58721);const o=(0,i.ZV)(r.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating",displayReviewCount:!1}]}]),a=(0,i.RM)(r.$,"gradient-mask",{name:"gradient-mask",setClickBeacon:!0,layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"special-offer",isDrConfig:!0,layout:{mode:"block",display:"inline-block",position:"relative",marginBottom:"8",marginInlineStart:"16",marginInlineEnd:"16",width:"150",zIndex:5}},{name:"ad-title",setClickBeacon:!0}]}),s=(0,i.ZV)(r.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]);var c,d=n(90351),u=n(24526),l=n(5302),p=n(7126),h=n(31404);!function(e){e.river="river",e.infopane="infopane",e.resriver="resriver",e.rivercms="river_cms",e.riverdb="riverdb",e.riverdbside="riverdbside",e.riverAmplify="river_amp",e.restoday="restoday",e.todaystripe="todaystripe",e.newsstripe="News-Stripe",e.entertainmentstripe="Entertainment-Stripe",e.sportsstripe="Sports-Stripe",e.lifestylestripe="Lifestyle-Stripe",e.rightRail="rightRail",e.rightRailAmplify="rr_amp",e.resinfopane="resinfopane",e.infopanetab="infopane-tab",e.infopanecms="infopane_cms",e.sliver="sliver",e.rightrail="rightrail",e.eoab="eoab",e.rectangle="rectangle",e.inarticle="inarticle",e.WatchInFeed="intranative",e.eoabmsx="eoabmsx",e.interstitialgallery="interstitialgallery",e.articleInline="ArticleInline",e.rivert="rivert",e.infopanet1="infopanet1",e.infopanet3="infopanet3",e.inarticlecarousel="inarticlecarousel",e.incontentcarousel="incontentcarousel",e.triver="triver",e.infopane1u="infopane1u",e.watchlistnative="watchlistnative",e.leftrail="leftrail"}(c||(c={}));const g=[c.rightrail,c.eoab,c.rectangle,c.inarticle,c.eoabmsx,c.interstitialgallery,c.WatchInFeed,c.articleInline,c.rivert,c.inarticlecarousel,c.incontentcarousel,c.watchlistnative,c.leftrail],f=[c.river,c.riverdb,c.riverdbside],m=(c.riverdb,[c.river,c.resriver,c.rivercms,c.rightRail,c.rightrail]),y=[c.infopane,c.resinfopane,c.infopanetab,c.infopanecms],v=[c.restoday,c.todaystripe,c.newsstripe,c.entertainmentstripe,c.sportsstripe,c.lifestylestripe],S=[...m,...y],w=[...m,...v,c.riverdb,c.rightRail,c.rightrail,c.sliver,c.rectangle,c.eoab,c.inarticle,c.inarticlecarousel],b=[c.infopane,c.resinfopane,c.riverdb],C=[c.infopane,c.resinfopane],T=[c.infopanet1,c.infopanet3],k=[c.rivert,c.infopane1u,...T],P=(c.infopane,c.resinfopane,c.river,c.resriver,c.inarticle,c.riverdb,{default:20,discScribble10:10,hotspotSingle10:10,saleHighlight15:15,gamification:5}),A=10,I=e=>!!(e&&e.items&&e.items[0]&&e.items[0].assets&&e.items[0].assets.transparentImage&&e.items[0].assets.transparentImage.url&&e.items[0].images&&e.items[0].images[0]&&e.items[0].images[0].ext&&e.items[0].images[0].ext.layoutColor),E=e=>((e,t)=>{const n=e?.items?.[0]?.assets?.transparentImage,i=n?.w,r=n?.h,o=n?.url;return!!(o&&null!=n&&r>0&&i>0)&&t(i,r)})(e,((e,t)=>e/t<1.4)),R=e=>(0,d.Z)(e,"items[0].assets.rating"),M=e=>(0,d.Z)(e,"items[0].assets.specialOffer"),x=e=>(0,d.Z)(e,"items[0].assets.freeShipping"),L=e=>(0,d.Z)(e,"items[0].assets.discount"),F=e=>R(e)?o:M(e)?a:x(e)?s:void 0,D=e=>R(e)?"msn-combo-rating":M(e)?"msn-combo-special-offer":x(e)?"msn-combo-freeshipping":void 0,O=(e,t)=>{t&&(e.enableNativeAdWC=!0);const n=e?.items[0]?.assets;n?.rating?e.items[0].assets=(0,u.Z)(n,["rating"]):n?.specialOffer?e.items[0].assets=(0,u.Z)(n,["specialOffer"]):n?.discount&&n?.discount>=P.saleHighlight15?e.items[0].assets=(0,u.Z)(n,["discount"]):n?.freeShipping&&(e.items[0].assets=(0,u.Z)(n,["freeShipping"]))},_=e=>R(e)?"msn-combo-rating-nondr":M(e)?"msn-combo-special-offer-nondr":L(e)&&L(e)>=P.saleHighlight15?"msn-combo-sale-highlight-nondr":x(e)?"msn-combo-freeshipping-nondr":"msft-content-card",N=e=>R(e)?"msn-combo-rating-nondr-c":M(e)?"msn-combo-special-offer-nondr-c":L(e)&&L(e)>=P.saleHighlight15?"msn-combo-sale-highlight-nondr-c":x(e)?"msn-combo-freeshipping-nondr-c":"msft-content-card",B=e=>(0,d.Z)(e,"items[0].assets.sold"),U=e=>(0,d.Z)(e,"items[0].assets.returnPolicy"),$=e=>(0,d.Z)(e,"items[0].assets.condition"),H=e=>B(e)?"msn-combo-sold-nondr":U(e)?"msn-combo-return-policy-nondr":$(e)?"msn-combo-condition-nondr":"msft-content-card",W=e=>B(e)?"msn-combo-sold-nondr-c":U(e)?"msn-combo-return-policy-nondr-c":$(e)?"msn-combo-condition-nondr-c":"msft-content-card",G=(e,t)=>{t&&(e.enableNativeAdWC=!0);const n=e?.items[0]?.assets;n?.sold?e.items[0].assets=(0,u.Z)(n,["sold"]):n?.returnPolicy?e.items[0].assets=(0,u.Z)(n,["returnPolicy"]):n?.condition&&(e.items[0].assets=(0,u.Z)(n,["condition"]))},V=(0,h.Et)(l.Evv,"modifyImageUrlForResponsiveImageSizingTemplate")(((e,t)=>{const n=e?.items?.[0],i=n.assets?.price;if(e.template.templateType="msft-content-card",n&&!i){const i=Q(parseFloat(n.originalImageHeight),parseFloat(n.originalImageWidth),n.imageUrl,e.template.responsiveImageSizingTemplateConfigs);i&&i.imageUrl!==n.imageUrl&&K(i?.responsiveImageSizingTemplateConfig?.maxHeight,(0,p.O1)(e.items?.[0]?.title))&&(e.enableResponsiveImageSize=!0,e.template.templateType="msn-responsive-image-sizing",t||(e.responsiveImageSizingTemplateConfig=i.responsiveImageSizingTemplateConfig,e.items[0].imageUrl=i.imageUrl))}})),q=(0,h.Et)(l.Evv,"isDescriptionShowingHelper")(((e,t)=>{const n=e.items?.[0]?.description,i=e.items?.[0]?.title,r=n?.length>1&&i!=n,o=c[e.region];return b.includes(o)?r:r&&(0,p.O1)(i)<=t})),j=(0,h.Et)(l.Evv,"isDescriptionShowing")(((e,t)=>q(e,t)?"msn-responsive-description":"msft-content-card")),z=(0,h.Et)(l.Evv,"pickRandomTemplateWithDensity")(((e,t,n,i)=>{if(Math.random()>i)e.enablePattern=!1,e.template.templateType=n;else{const n=t.length,i=Math.floor(Math.random()*n);e.template.templateType=t[i],e.enablePattern=!0}})),K=(0,h.Et)(l.Evv,"isTitleLineMeetRequire")(((e,t)=>!(!e||!t)&&(225===e&&t<=1||200===e&&t<=2))),Q=(0,h.Et)(l.Evv,"modifyImageUrl")(((e,t,n,i)=>{if(!(e&&t&&n&&n.startsWith("https://www.bing.com/th")))return{imageUrl:n};const r=J(n),o=n.split("?")[0];if(!i||0===i.length)return{imageUrl:n};for(let n=0;n<i.length;n++){const a=i[n],s=t/e;if(s>=a.lowerBound&&s<=a.placementRatio){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&w=${a.maxWidth}`,responsiveImageSizingTemplateConfig:a}}if(s>a.placementRatio&&s<=a.upperBound){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&h=${a.maxHeight}`,responsiveImageSizingTemplateConfig:a}}}return{imageUrl:n}})),J=(0,h.Et)(l.Evv,"parseImageUrl")((e=>{if(!e)return;const t=new URL(e),n=new URLSearchParams(t.searchParams),i={};return n.forEach(((e,t)=>{["id","pid"].includes(t)&&(i[t]=e)})),i})),X=(0,h.Et)(l.Evv,"switchToAIImage")((e=>{e&&e.items&&e.items[0]&&e.items[0].assets&&e.items[0].assets.transparentImage&&e.items[0].assets.transparentImage.url&&e.items[0].imageUrl&&(e.items[0].imageUrl=e.items[0].assets.transparentImage.url)}))},15320:function(e,t,n){n.d(t,{Yh:function(){return d},bF:function(){return p},uT:function(){return l}});var i=n(61932),r=n(33779),o=n(5302),a=n(13218),s=n(5232);const c=16;function d(e,t,n,a){e?.indices?.length&&(e.placementLevelSignals=e.indices.map(((s,d)=>{const p=e.placementLevelSignals?.[d]||{},h=function(e,t,n,a,s,d){if(!e?.region)return{};let p=`nativead-${e.region}-${t}`;const h=e.region?.includes("infopane"),g=e.region?.includes("sliver"),f=e.region?.includes("rectangle"),m=document?.querySelector("entry-point")?.shadowRoot?.querySelector?.("waterfall-view-feed");let y;if(h)p="infopane";else if(g){if(p=`sliver-${t}`,m&&s)try{y=m.getBoundingClientRect().top>s.getBoundingClientRect().bottom}catch(e){y=void 0}}else f&&(p=`rectangle${t}`);const v=function(e,t){if(!e)return;const n=t?.adTemplateConfig?.cardSizeConfig;if(n&&n[e])return n[e];return e.includes("infopane")?n?.infopane||i.sS.infopane:e.includes("river")?n?.river||i.sS.river:i.sS[e]||void 0}(e.region,n),S=l(e.region,y);let w=n?.passAdOcidRegSize?{pageRegion:S,cardSize:v}:{};n?.passBrandSafetySignals&&!a?.length&&function(e,t,n,i,r,o){let a,s=[];if(t){const{layout:e,masterLayoutCardList:t,masterCardMapWpoItems:n,river:o}=r?.feedManager||{};if(i)s.push(...u(t,n,e,0));else{let i;if(o?.forEach((e=>{const t=e?.cardMetadataList?.[0];"display-ad-banner"===t?.id&&"number"==typeof t?.order&&(i=t.order-1)})),"number"==typeof i&&i>=0){const r=u(t,n,e,i-1),o=u(t,n,e,i);s.push(...r,...o),o?.length||(a=!0)}}}else if(n){const e=r?.feedManager?.waterfall?.flatMap((e=>e.columns[0]))?.find((e=>e.instanceId===o));s=e?.adjacentCardIds}s?.length&&(e.adjacentCardIds=s);a&&(e.isPartialBrandSafety=a)}(w,g,f,y,m,p);if(!d){const i=function(e,t,n,i,r,o,a,s){const d=n?.shadowRoot?.querySelectorAll("cs-super-container");let u,l=null;if(d&&d.length>0)for(const n of d){const d=n?.shadowRoot?.querySelector("cs-responsive-feed-layout")?.shadowRoot;if(d){if(r)l=d.querySelector("cs-infopane-card, cs-infopane-card-28, cs-infopane-card-immersive");else if(o){if(l=i?.shadowRoot?.querySelector(`[id*="${s}"]`),!l&&i&&e?.w){try{const n=i.getBoundingClientRect();if(n){const i=2*e.w+c;u=1===t?n.left-i/2:n.left+c/2}}catch(e){u=void 0}l=i}}else l=a?i:d?.querySelector(`[id*="${s}"]`);if(l)break}}const p=l?.getBoundingClientRect();if(!p)return;return{top:p.top,left:u??p.left,width:p.width,height:p.height}}(v,t,m,s,h,g,f,p);if(i)return n?.enableAddingAdCoords&&(w.coords={x:i.left,y:i.top}),n?.passAdOcidRegSize&&i.width&&i.height&&(w.cardSize={w:i.width,h:i.height}),w;(0,r.H)(o.SPB,"Placement level signal fell back to cached coordinates",`{"cardId": "${p}", "placement": ${JSON.stringify(e)}}`,void 0,void 0,20)}if(n?.enableAddingAdCoords&&d){const e=d(p);e&&(w={...w,...e})}return w}(e,s,t,p.adjacentCardIds,n,a);return{...p,...h}})))}function u(e,t,n,i){const r=[];return!e||!t||!n||"number"!=typeof i||i<0||e?.river?.[n]?.filter((e=>void 0!==e?.cards?.[i]?.wpoId)).forEach((e=>{const n=e.cards[i].wpoId,o=t?.get("river_wfcard"+n),a=o?.subItems||o?.subCards;if(a?.length){let e=0;for(const t of a)if(t?.id&&(r.push(t.id),e++),3===e)break}else o?.id&&r.push(o.id)})),r}function l(e,t){if(e)return e.includes("infopane")?"infopane":e.includes("river")||e.includes("rectangle")?"river":e.includes("sliver")?t?"topbanner":"sliver":e}function p(e,t){e&&(e.auctionLevelSignals={...e.auctionLevelSignals,isPrerender:!!a.Al?.IsPrerender,isSSR:!1,vpSize:window&&{w:window.innerWidth,h:window.innerHeight},ocid:t?.passAdOcidRegSize?(0,s.ku)():void 0})}},93516:function(e,t,n){n.d(t,{c5:function(){return E},yw:function(){return M},En:function(){return y},kc:function(){return R},Z:function(){return x},pP:function(){return v},IA:function(){return A},x4:function(){return C},FD:function(){return T},Bi:function(){return I}});var i,r=n(38300),o=n(75115);!function(e){e.Image="image",e.Title="title",e.Data="data"}(i||(i={}));var a=n(33779),s=n(5302),c=n(21215),d=n(90351),u=n(25156),l=n(4935),p=n(6734),h=n(53552),g=n(64411),f=n(13218),m=n(44132);function y(e,t,n){return n?t||r.rO[e]||"Sponsored":t||r.S7[e]||"Ad"}function v(e,t){return f.Al?.CurrentFlightSet?.has("prg-ad-mon-feedback")&&t?(m.M0.addOrUpdateTmplProperty("adFeedbackMonetizeEligible","1"),t):function(e){let t="";if(!e)return t;try{const n=JSON.parse(e).tcb;n&&Array.isArray(n)&&n.forEach((e=>{e.includes("srtb")&&(t=e.replace("notify/clicked","notify/feedback"))}))}catch(e){t=""}return t}(e)}function S(e,t,n,i){try{const n=(0,d.Z)(t,"data.ext.msft.msan_data");i(e,t,"string"==typeof n?JSON.parse(n):n)}catch(e){(0,a.H)(s.J94,`Ad response with invalid ${n} data`,void 0,{...s.J94.pb,customMessage:`${e&&e.message}`,ext:(0,d.Z)(t,"data")})}}function w(e,t){const n=t?.image??t?.img,i=(0,d.Z)(t,"image.type")??(0,d.Z)(t,"img.type"),r=(0,u.Z)(o.aT,(e=>e===`image-${i}`));return r&&(e[r]={w:n?.w,h:n?.h,url:n?.url,ext:n?.ext}),e}function b(e,t){return e.title=t.title.text,e}function C(e,t,n){if(n){const n=(0,l.Z)(t,((e,t)=>{if(t?.data){const n=(0,d.Z)(t,"data.type"),i=(0,u.Z)(o.aT,(e=>e===`data-${n}`));if(i)if(o.xs.includes(i))try{const n=(0,d.Z)(t,"data.value")||"{}";e[i]=JSON.parse(n)}catch(n){(0,a.H)(s.J94,`Ad response with invalid ${i} compound data`,void 0,{...s.J94.pb,customMessage:`${n&&n.message}`,compoundValue:(0,d.Z)(t,"data.value")}),e[i]={}}else switch(i){case o.W3.PopupDisclaimer:!function(e,t,n){S(e,t,n,((e,t,i)=>{const r=(0,d.Z)(t,"data.value");if(!r||0===r.length)throw new TypeError("Popup disclaimer title field is empty or missing");if(!i||!i.text||0===i.text.length)throw new TypeError("Popup disclaimer text field is empty or missing");const o={title:r,text:i.text,url:i.url};e[n]=o}))}(e,t,i);break;case o.W3.WorkingHoursItem:!function(e,t,n){S(e,t,n,((e,t,n)=>{var i;e.workingHours=(0,d.Z)(t,"data.value"),e.workingHoursStatus=n?.working_hours?.status,e.workingHoursIsOpen=(i=n?.working_hours?.is_open,"1"===i||"string"==typeof i&&"true"===i.toLowerCase())}))}(e,t,i);break;case o.W3.ReviewRatingItem:!function(e,t,n){S(e,t,n,((e,t,n)=>{e.rating=(0,d.Z)(t,"data.value"),e.review=n?.rating?.reviews}))}(e,t,i);break;case o.W3.Callout:!function(e,t,n){S(e,t,n,((e,t,n)=>{const i=(0,u.Z)(o.aT,(e=>e===`data-${n.callout_data_type}`));if(!i)throw new TypeError("Invalid callout sub type");e[i]=(0,d.Z)(t,"data.value")}))}(e,t,i);break;default:{const n=(0,d.Z)(t,"data.value");e[i]=n;break}}else(0,a.H)(s.J94,`Ad response with invalid ${i} data`,void 0,{...s.J94.pb,customMessage:`No mapping found in assetKeyMap for data-${n}`,ext:(0,d.Z)(t,"data")})}else t?.image||t?.img?w(e,t):t?.title&&b(e,t);return e}),{});e.assets=n}else{const n=(0,l.Z)(t,((e,t)=>{if(t?.data){const n=(0,d.Z)(t,"data.type"),i=(0,u.Z)(o.aT,(e=>e===`data-${n}`));if(i)if(o.xs.includes(i)){const n=(0,d.Z)(t,"data.value")||"{}";e[i]=JSON.parse(n)}else if("popupDisclaimer"==i)try{const n=(0,d.Z)(t,"data.value"),r=(0,d.Z)(t,"data.ext.msft.msan_data"),o=JSON.parse(r);if(!n||0===n.length)throw new TypeError("Popup disclaimer title field is empty or missing");if(!o||!o.text||0===o.text.length)throw new TypeError("Popup disclaimer text field is empty or missing");const a={title:n,text:o.text,url:o.url};e[i]=a}catch(e){(0,a.H)(s.J94,"Ad response with invalid popup disclaimer data",void 0,{...s.J94.pb,customMessage:`${e&&e.message}`,ext:(0,d.Z)(t,"data")})}else{const n=(0,d.Z)(t,"data.value");e[i]=n}}else t?.image||t?.img?w(e,t):t?.title&&b(e,t);return e}),{});e.assets=n}}function T(e,t,n){let i;if(t)i=e.imp[0];else{if(!e.data)return;try{i=JSON.parse(e.data)}catch(t){(0,a.H)(s.TBk,"Invalid JSON sent to card mapper from WPO Boost",void 0,{...s.TBk.pb,customMessage:`${t&&t.message}`,wpoJson:e.data})}}const r=k(i,!0)?.promotions?.[0];return(0,c.N)()&&E(r,n),"11730609"===i.tagid?r.isProng2Promotion=!0:"11730608"==i.tagid&&(r.isProng1Promotion=!0),r}function k(e,t){if(!(e.Promotions&&e.Promotions.length>0))return;const n={promotions:[]};return t?n.promotions[0]=P(e.Promotions[0]):n.promotions=e.Promotions.map((e=>P(e))),n}function P(e){const{images:t,longTitle:n,title:i,description:r,displayUrl:o,targetUrl:a,Beacons:s,brand:c,merchantCategory:d,actionText:u,logo:l,adScenarioType:p,rebateValue:h,minPurchaseValue:g,valueType:f,nativeAdType:m,annotation:y,scope:v,priceCurrencySymbol:S,market:w,dealPrice:b,originalPrice:C}=e,{imageUrl:T}=t&&t[0],k=1==m||8==m,P=s.map((e=>e.MIFeedbackurl)),A=s.map((e=>e.MVFeedbackurl)),I=s.map((e=>e.EventUrl?.replace("{ACTION}","click"))),E=s&&s[0]?.FeedbackUrl,R=b||C,M=JSON.stringify({tcb:I||[]}),x=JSON.stringify({tvb:A,trb:P,e:!0,tjb:[]});return{region:"rr_amp",regionIndex:void 0,destinationUrl:a||"",imageUrl:T||"",imageUrlFallback:t[1]?.imageUrl||T,tagLine:n||i,logoText:o||"",clickBeacons:M||"",beaconsJson:x||"",images:t,logo:l,brand:c||"",title:i||"",category:d||"",actionText:u||"",logoUrl:l?.imageUrl,adScenarioType:p,rebateValue:h,minPurchaseValue:g,valueType:f,isStoreWide:1==v,isTextAd:k,priceCurrencySymbol:S,market:w,priceTag:R||"",nativeAdType:m,isAffiliateOffer:16==m,annotation:y||"",adFeedbackUrl:E||""}}function A(e,t){if(!function(e,t=0){return e.Promotions&&e.Promotions.length>t}(e))return;const n=e.Promotions[0],{images:i,longTitle:r,title:o,description:a,displayUrl:s,targetUrl:c,Beacons:d}=n,{height:u,width:l,imageUrl:p}=i[0];let h="",g="";h=u&&u.toString(),g=l&&l.toString();const f=d.map((e=>e.MIFeedbackurl)),m=d.map((e=>e.MVFeedbackurl)),y=d.map((e=>e.EventUrl?.replace("{ACTION}","click"))),v=JSON.stringify({tcb:y||[]}),S={region:"rr_amp",regionIndex:1,items:[],adServedUrls:f,visibilityUrls:m,beaconsJson:JSON.stringify({tvb:m,trb:f,e:!0,tjb:[]})},w={destinationUrl:c,imageHeight:h,imageUrl:p,imageWidth:g,title:r||o,description:a,prong2AmplifyBusinessName:s,clickBeacons:v};return S.items.push(w),S.imageHeight=h,S.imageWidth=g,S}function I(e,t,n){if(!e||!e.index||!e.region)return;const{adServedUrls:i,beaconsJson:o,index:d,items:u,jsTrackerUrls:l,locale:g,privacyUrl:f,providerId:m,region:S,visibilityUrls:w,crids:b,pageType:T,feedbackUrl:k}=e,P={adServedUrls:i,beaconsJson:o,crids:b,items:[],jsTrackerUrls:l,privacyUrl:f,providerId:m,region:S,regionIndex:d,visibilityUrls:w};P.adLabelText=y(g,"",n?.enableAdSponsoredText),P.isGreyAdsLabelEnabled=r.Eg.includes(g);let A="",I="";return u.forEach((t=>{const{adChoicesUrl:i,adScenarioType:r,adSelectionCriteria:o,assets:d,clickBeacons:u,description:l,eventtrackers:g,imageHeight:f,imageWidth:m,imageUrl:y,originalImageHeight:S,originalImageWidth:w,sourceName:b,title:E,uniqueId:R,url:M,verificationParameters:x,ClickBeacons:L}=t;A=f&&f.toString(),I=m&&m.toString();const F={adChoiceIconUrl:i,adScenarioType:r,adSelectionCriteria:o,assets:d,clickBeacons:u,destinationUrl:M,description:l,feedbackUrl:k||(u||L)&&v(u??L,t?.feedback_url),imageHeight:A,imageUrl:y,imageWidth:I,originalImageHeight:S&&S.toString(),originalImageWidth:w&&w.toString(),providerName:b,title:E,uniqueId:R,verificationParameters:x,eventtrackers:g};if(n?.readAdScenarioTypeFromMsnKv){const t=!!r,n=e?.msft?.msn_kv,i=(0,p._)(n);if(t&&!!!i?.adScenarioType&&(0,a.H)(s.lYA,"adScenarioType is missing in msn_kv","",{adScenarioType:r,wpoPlacement:JSON.stringify(e),csr:(0,c.N)()}),i){const e=i.adScenarioType;r&&(F.adScenarioType=e)}}!T||"edgechrntp"!==T&&"edgechrntpruby"!==T||(C(F,d,n?.passVAXandrMigrationSignals),n?.adTemplateConfig?.enableVAPhase2&&n?.adTemplateConfig?.supportedAdScenarioTypes.includes(F.adScenarioType)&&(0,h.k)(F,d,n?.passVAXandrMigrationSignals)),P.items.push(F)})),P.imageHeight=A,P.imageWidth=I,P.adAuctionType=e.adAuctionType,P}function E(e,t){if(e.beaconsJson){new g.A(t).sendBeaconForAdServed({beaconsJson:e.beaconsJson,beaconsSupportHttpPOST:e.beaconsSupportHttpPOST})}}function R(e,t){const n=[];if(t){const i=t.reduce(((t,n,i)=>{const r=(0,u.Z)(o.aT,(e=>e===n));if(r){const n={...o.hy[r],id:i+1};"img"===r&&(n.img={w:e.img?.w,h:e.img?.h,...n.img}),t.push(n)}return t}),[]);n.push(i)}return n}const M=e=>"resriver"===e||"resinfopane"===e?e.replace("res",""):e,x=e=>new Set(e.map((e=>e.assetId))).size!==e.length?((0,a.H)(s.x4C,"duplicate DTS config assetId",void 0,e),!1):e.every((e=>e.assetId&&e.type?Object.values(i).includes(e.type)?e.type===i.Title||void 0!==e.subTypeId||((0,a.H)(s.x4C,"invalid DTS asset type - subTypeId is required",void 0,e),!1):((0,a.H)(s.x4C,"invalid DTS asset type",void 0,e),!1):((0,a.H)(s.x4C,"DTS asset.assetId or asset.type is undefined",void 0,e),!1)))},7126:function(e,t,n){n.d(t,{O1:function(){return s},XO:function(){return r}});const i=2.255859375,r=(e,t=20,n=400)=>{if(!e||0===e.length)return 0;const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.13623046875,.3046875,.4375,.8,.6,.9,.8,.3,.4,.4328125,.5,.7,.4,.403125,.3,.6,.6,.403125,.6,.6,.7,.6,.6,.6,.6,.6,.3,.4,.6953125,.7,.6953125,.5,1,.8,.6046875,.7,.71875,.6,.503125,.7,.7359375,.3,.5,.7,.6,.925,.8,.8,.6,.9,.7,.6,.7,.703125,.8,1.1,.8,.8,.7,.4,.6,.3328125,.7,.6,.3,.5234375,.603125,.5,.603125,.6,.5,.603125,.6,.3,.5,.6,.3,.9,.6,.6,.603125,.603125,.4,.5,.5,.6,.7,.9,.7,.7,.6,.4,.3,.4,.7],r=a(n);return e.split("").map((e=>o(e,i,.5944274259868422,1.030769230769231))).reduce(((e,t)=>t+e))*t*r},o=(e,t,n,i)=>{const r=e.charCodeAt(0);return r<t.length?t[r]:c(e)?i:n},a=e=>e>=700?1.15:e>=500?1.05:1,s=(e,t=265,n=20,o=400)=>{if(!e||0===e.length)return 0;const a=e.split(" ");let s=1,c=t;for(let e=0;e<a.length;e++){const d=r(a[e],n,o);d>c?(s+=1,c=t-d-i):d===c?(s+=1,c=t):c=c-d-i}return s},c=e=>/^[\u4e00-\u9fff\u3040-\u30ff\u1100-\u11ff\u3130-\u318f\uac00-\ud7af]$/.test(e)},53552:function(e,t,n){n.d(t,{T1:function(){return u},k:function(){return l},yC:function(){return d}});var i=n(75115),r=n(33779),o=n(5302),a=n(90351),s=n(25156),c=n(44256);function d(e,t){const n=function(e){const t=["title","img","logo","providerName","disclaimer","review","workingHoursStatus","workingHoursIsOpen"];return e.filter((e=>!t.includes(e)))}(Object.keys(e));if(t&&Object.keys(t).length>0){const e=n.filter((e=>e in t)),i=n.filter((e=>!(e in t))),r=function(e,t){return e.sort(((e,n)=>t[e]-t[n]))}(e,t);return[...r,...i]}return n}function u(e,t){Object.keys(e).forEach((n=>{!(n in i.K9)||!e[n]||t&&"price"===n||(e[n]=i.K9[n](e[n]))}))}function l(e,t,n){if(n){const n=t.filter((e=>e?.data?.ext?.msft?.msan_data)).reduce(((e,t)=>{try{const n=(0,a.Z)(t,"data.type"),d=(0,s.Z)(i.aT,(e=>e===`data-${n}`));if(d){if((0,c.Z)(t,"data.ext.msft.msan_data")){const n=(0,a.Z)(t,"data.ext.msft.msan_data"),r="string"==typeof n?JSON.parse(n):n;if(d==i.W3.ReviewRatingItem)e.rating=r?.va_attributes?.rank;else if(d==i.W3.WorkingHoursItem)e.workingHours=r?.va_attributes?.rank;else if(d==i.W3.Callout){e[(0,s.Z)(i.aT,(e=>e===`data-${r.callout_data_type}`))]=r?.va_attributes?.rank}else e[d]=r?.va_attributes?.rank}}else(0,r.H)(o.J94,`Ad response with unrecognized data type: ${n}`,void 0,{...o.J94.pb,customMessage:`No mapping found in assetKeyMap for data-${n}`,ext:(0,a.Z)(t,"data")})}catch(n){return(0,r.H)(o.J94,"Ad response with invalid asset rank data",void 0,{...o.J94.pb,customMessage:`${n&&n.message}`,assetData:(0,a.Z)(t,"data")}),e}return e}),{});e.assetRanks=n}else{const n=t.filter((e=>e?.ext?.rank&&e?.data)).reduce(((e,t)=>{const n=(0,a.Z)(t,"data.type"),r=(0,s.Z)(i.aT,(e=>e===`data-${n}`));return r&&(e[r]=(0,a.Z)(t,"ext.rank")),e}),{});e.assetRanks=n}}},19516:function(e,t,n){n.d(t,{Ai:function(){return a},F8:function(){return d},GL:function(){return o},P$:function(){return i},_7:function(){return c},jV:function(){return s},mC:function(){return r},x7:function(){return u}});const i={id:"https://enterprisenews.microsoft.com",friendlyName:n(99234).Ak},r="https://ent-nfc-api.msn.com/api/v2/news/companies/current/settings",o="Peregrine",a="AdminPortalSettings",s="AdminPortalSettingsRetryTimes",c=3,d="AdminPortalUserLayoutCache",u="isContentFeedManagedByAdminPortal"},98790:function(e,t,n){n.d(t,{N:function(){return i}});const i=["prg-wpo-ss","prg-dr-infopanec","prg-title-2","prg-trending","prg-trendingc","prg-ad-ctav2","prg-ad-sh-v1","prg-ad-sh-v1-c","prg-ad-sh-v3","prg-ad-sh-v4","prg-ad-sh-v3v4-c","prg-ad-hover","prg-ad-hover-c","prg-ad-combo","prg-ad-combo2","prg-ad-combo-c","prg-ad-shortg","prg-ad-shortgc"]},58721:function(e,t,n){n.d(t,{$:function(){return a}});var i=n(21230),r=n(82356);const o={name:"default-template",children:[...i.u,{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},a=(0,r.Tb)(o,"product-image",{imageMaskOn:!0})},82356:function(e,t,n){n.d(t,{As:function(){return s},BH:function(){return o},FT:function(){return u},It:function(){return d},Oz:function(){return i},RM:function(){return a},Tb:function(){return c},ZV:function(){return l}});class i{static#e=this.byName=e=>t=>t?.name===e}class r{static#e=this.identity=()=>e=>e;static#t=this.replaceWith=e=>()=>e;static#n=this.extendFields=e=>t=>({...t,...e});static#i=this.spliceChildren=(e,t=[],n)=>i=>{const r=[...i.children||[]];return r.splice(e,n,...t),{...i,children:r}}}function o(e,t,n=r.identity()){return p(e,[{condition:t,action:n}])}function a(e,t,n){return o(e,i.byName(t),r.replaceWith(n))}function s(e,t,n){const o=[];for(let e=0;e<t.length;e++)o.push({condition:i.byName(t[e]),action:r.replaceWith(n[e])});return p(e,o)}function c(e,t,n){return o(e,i.byName(t),r.extendFields(n))}function d(e,t,n){const o=[];for(let e=0;e<t.length;e++)o.push({condition:i.byName(t[e]),action:r.extendFields(n[e])});return p(e,o)}function u(e,t,n,a){return o(e,i.byName(t),r.spliceChildren(n,a))}function l(e,t,n,a=[],s){return o(e,i.byName(t),r.spliceChildren(n,a,s))}function p(e,t){if((e=t.reduce(((e,t,n,i)=>{const{condition:r,action:o}=t;return r(e)?(i[n]=null,o(e)):e}),e)).children){const n=e.children.map((e=>p(e,t.filter((e=>e)))));return{...e,children:n}}return e}},21230:function(e,t,n){n.d(t,{u:function(){return i}});const i=[{name:"product-image",layout:{position:"absolute",left:0,top:0,width:"300",height:"225",zIndex:1}},n(67552).l]},67552:function(e,t,n){n.d(t,{l:function(){return i}});const i={name:"footer",layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%"},children:[{name:"start-action-part",children:[{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5}},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout"}]},{name:"end-action-part",children:[{name:"disclaimer",layout:{zIndex:5}},{name:"ad-choice",layout:{zIndex:5}},{name:"see-more",layout:{marginInlineEnd:"16",zIndex:5}}]}]}},25345:function(e,t,n){n.d(t,{v:function(){return i}});const i={name:"default-infopane-template",children:[{name:"product-image",layout:{position:"absolute",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1"},{name:"gradient-mask",height:"176",paddingBottom:"0",paddingTop:"0",layout:{position:"absolute",bottom:"0",width:"100%",zIndex:2},useDynamicStyle:!0},{name:"ad-title",lineHeight:"36",titleFontSize:"28",layout:{position:"absolute",bottom:"53",width:"100%",zIndex:2}},n(67552).l]}},43319:function(e,t,n){function i(e){for(const[t,n]of e)window[t]=n;const t=new CustomEvent(o,{detail:{adUniqueIds:Array.from(e.keys())}});document.dispatchEvent(t)}function r(e){for(const t of e)delete window[t]}n.d(t,{gL:function(){return o},gy:function(){return i},l$:function(){return r}});const o="nativeAdRendered"},51389:function(e,t,n){n.d(t,{$H:function(){return l},V8:function(){return u},lj:function(){return d}});var i=n(24108);const r=5131;let o;try{o=(()=>{const e=i.Z.getAdbLoggedTime();return r+e%r})()}catch(e){o=r}const a=/(a)(d)/gi,s=e=>String.fromCharCode(e+97),c=(new Map,(e,t)=>{const n=(e=>{let t,n="";for(t=Math.abs(e);t>26;t=t/26|0)n=s(t%26)+n;return(s(t%26)+n).replace(a,"$1-$2")})(((e,t)=>(void 0===t&&(t=o),((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(t,e)))(e,t)>>>0);return n}),d=(e,t)=>`${h(e,t)}`,u=(e,t)=>`algo-${h(e,t)}`,l=(e,t,n)=>e&&i.Z?.getAdbStatus()?d(t,n):t,p=new Map,h=(e,t)=>{const n=((e,t)=>(p.has(e)||p.set(e,c(e,t)),p))(e,t).get(e);return n}},37755:function(e,t,n){n.d(t,{_t:function(){return a}});const i={neutralForegroundRestColor:"--neutral-foreground-rest",neutralFillHoverColor:"--neutral-fill-hover",neutralFillActiveColor:"--neutral-fill-active",adBackgroundColor:"--ad-background-color",gradientMidColor:"--gradient-mid-color",gradientEndColor:"--gradient-end-color"},r={"font-weight":"","z-index":"",flex:"","flex-grow":"","flex-shrink":"",order:""},o=e=>null!=r[e]?r[e]:"px";function a(e,t){return null==t||"undefined"===t?"":(e=null!=i[n=e]?i[n]:n.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)),isNaN(Number(t))?`${e}:${t}`:`${e}:${t}${o(e)}`);var n}},31404:function(e,t,n){n.d(t,{Et:function(){return d},uj:function(){return u}});var i=n(33779),r=n(44132);function o(e){return!(!/^.*{\s*return __awaiter/.test(String(e))&&!/^\([\w_$,\s]*?\) => __awaiter/.test(String(e)))||"AsyncFunction"===e?.constructor?.name}function a(e,t,n,a,s,c){if(r.M0.sendAppErrorEvent((0,i.Tr)(t,n||"",function(e,t){return`args: ${JSON.stringify(e)||""}\nerror: ${t?.stack||t?.message||""}`}(a,s))),!c)return;const d=c(...a,s);return o(e)?Promise.resolve(d):d}function s(e,t,n,i,r,s){try{return o(e)?e.call(this,...i).catch((o=>a(e,t,n,i,o,r))).finally((()=>{s?.(...i)})):e.call(this,...i)}catch(o){return a(e,t,n,i,o,r)}finally{o(e)||s?.(...i)}}function c(e,t){const n=Object.getOwnPropertyDescriptor(e.prototype,t);return n||{configurable:!0,enumerable:!0,writable:!0,value:e.prototype[t]}}const d=(e,t,n,i)=>(r,o,a)=>{const c=a?.value;if("function"==typeof r)return function(...o){return s.call(this,r,e,t,o,n,i)};if("function"!=typeof c)return a;if(!e)throw Error("Parameter baseError is missed");return a&&(a.value=function(...r){return s.call(this,c,e,t,r,n,i)}),a},u=(e,t,n,i)=>r=>{class o extends r{connectedCallback(){super.connectedCallback()}}const a={...Object.getOwnPropertyDescriptors(r.prototype),...Object.getOwnPropertyDescriptors(o.prototype)};for(const r in a){if("constructor"===r||!a[r]?.value)continue;if(!(o.prototype[r]instanceof Function))continue;const d=c(o,r),u=d.value;d.value=function(...r){return s.call(this,u,e,t,r,n,i)},Object.defineProperty(o.prototype,r,d)}return o}},98491:function(e,t,n){n.d(t,{Cw:function(){return a},Km:function(){return s}});var i=n(33940),r=n(31404),o=n(5302);const a={EventType:"uat",Timestamp:"uats",Duration:"uad",Element:"uae",Message:"uam"};class s{static#e=this.impressionNativeAdIdSet=new Set;static#t=this.userActionBeaconsMap=new Map;static#n=this.startTimestampMap=new Map;fireImpressionLog(e,t,n){e?.id&&!s.impressionNativeAdIdSet.has(e?.id)&&s.impressionLog&&(s.impressionLog(e,t,n),s.impressionNativeAdIdSet.add(e?.id))}fireClickLog(e,t,n){s.clickLog&&s.clickLog(e,t,n)}saveUserActionBeacon(e="",t="{}",n="srtb.msn.com"){const i=JSON.parse(t),r=i&&i.trb;if(e&&r)for(let t=0;t<r.length;t++){if(!r[t].includes(n))continue;const i=new URL(r[t]);i.pathname=i.pathname.replace("served","useraction"),s.userActionBeaconsMap.set(e,i),s.startTimestampMap.set(e,(new Date).getTime())}}getUserActionBeacon(e=""){return s.userActionBeaconsMap.get(e)}populateBeaconUrl(e,t,n,i,r,o){const c=this.getUserActionBeacon(e);if(!c)return"";for(const e of Object.values(a))c.searchParams?.delete(e);if(n){const d=s.startTimestampMap.get(e),u={m:i,f:t};c.searchParams?.set(a.EventType,n),c.searchParams?.set(a.Timestamp,String(d?(new Date).getTime()-d:0)),c.searchParams?.set(a.Duration,r||0),c.searchParams?.set(a.Message,JSON.stringify(u)),c.searchParams?.set(a.Element,o?.tagName?.toLowerCase()||"")}return c}}(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.fireImpressionLog")],s.prototype,"fireImpressionLog",null),(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.fireClickLog")],s.prototype,"fireClickLog",null),(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.saveUserActionBeacon")],s.prototype,"saveUserActionBeacon",null),(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.getUserActionBeacon")],s.prototype,"getUserActionBeacon",null),(0,i.gn)([(0,r.Et)(o.a4J,"UserActionLog.populateBeaconUrl")],s.prototype,"populateBeaconUrl",null)},4842:function(e,t,n){var i;n.d(t,{v:function(){return i}}),function(e){e.CacheMissing="authCacheMissing",e.CacheExpired="authCacheExpired",e.OtherCacheError="authCacheError"}(i||(i={}))},2784:function(e,t,n){n.d(t,{y:function(){return r}});var i=n(4842);class r{constructor(){this.AuthDataMap={}}async getAuthDataFromCache(e){if(!e?.id)return{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:i.v.OtherCacheError}};const t=Math.round(performance.now()),n=this.AuthDataMap[e.id],r=Math.round(performance.now());return n?this.isJwtTokenExpired(n.authToken)?{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Cache is expired",status:i.v.CacheExpired},performance:{startTime:t,endTime:r}}:{resource:e,authToken:n.authToken,performance:{startTime:t,endTime:r}}:{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Cache is missing",status:i.v.CacheMissing},performance:{startTime:t,endTime:r}}}async setAuthDataToCache(e,t){if(!e?.id)return{resource:e,error:{message:"setAuthDataToCache Resource Id is missing",status:i.v.OtherCacheError}};const{authToken:n}=t,r=Math.round(performance.now());this.AuthDataMap[e.id]={authToken:n};return{resource:e,performance:{startTime:r,endTime:Math.round(performance.now())}}}async removeAuthDataFromCache(e){if(!e?.id)return{resource:e,error:{message:"removeAuthDataFromCache Resource Id is missing",status:i.v.OtherCacheError}};const t=Math.round(performance.now());delete this.AuthDataMap[e.id];return{resource:e,performance:{startTime:t,endTime:Math.round(performance.now())}}}isJwtTokenExpired(e){if(!e)return;let t;try{t=JSON.parse(atob(e.split(".")[1]))}catch(e){return}return t?.exp?1e3*t.exp<Date.now():void 0}}},39328:function(e,t,n){n.d(t,{o:function(){return r}});var i=n(4842);class r{async getAuthDataFromCache(e){return{resource:e,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:i.v.CacheMissing}}}async setAuthDataToCache(e){return{resource:e}}async removeAuthDataFromCache(e){return{resource:e}}}},58867:function(e,t,n){var i;n.d(t,{H:function(){return i}}),function(e){e.InteractionRequired="userInteractionRequired",e.AuthProviderNotSupported="authProviderNotSupported",e.MaySucceedOnRetry="fetchRetryableError",e.AuthPrivateNotSupportedForMAM="authPrivateNotSupportedForMAM",e.OtherError="authFetchError"}(i||(i={}))},70562:function(e,t,n){n.d(t,{w:function(){return r}});var i=n(58867);const r=(e,t=3,n=1e3)=>(t<0&&(t=0),{fetchAuthData:async(r,a)=>{let s={resource:r,error:{status:i.H.OtherError}};a&&(t=0);for(let c=0;c<t+1&&(s=await e.fetchAuthData(r,a),s?.error?.status===i.H.MaySucceedOnRetry);c++)await o(n);return s}}),o=async e=>new Promise((function(t){setTimeout(t,e)}))},64718:function(e,t,n){n.d(t,{a:function(){return d},Q:function(){return u}});var i=n(58867),r=n(42833);var o,a=n(5302),s=n(44132);!function(e){e[e.kNoError=0]="kNoError",e[e.kTokenFetchUserInteractionRequired=13]="kTokenFetchUserInteractionRequired",e[e.kTokenFetchProviderError=15]="kTokenFetchProviderError",e[e.kInteractionRequired=24]="kInteractionRequired",e[e.kUnsupportedSovereignty=60]="kUnsupportedSovereignty",e[e.kSovereigntyDetectionFailed=61]="kSovereigntyDetectionFailed"}(o||(o={}));let c=!1;class d{constructor(e){if(this.authCallerValidator=e,!e)throw new Error("Auth Caller Validator is not provided in EdgeChromiumFetchStrategy")}async fetchAuthData(e,t=!1){const{account:n,client:d,...u}=await this.authCallerValidator.validateAuthCaller();if(!n||!d)return{...u,resource:e};if(!e?.id)return{resource:e,error:{message:"Resource Id not provided.",status:i.H.OtherError}};const l=t?window.chrome.authPrivate.acquireAccessTokenWithUserInteraction:window.chrome.authPrivate.acquireAccessTokenSilently,p=new r.o,h={account_id:n.account_id,account_type:n.account_type,client_id:d.id,scope_or_resource:e.id},g=Math.round(performance.now());let f=-1;l(h,(e=>{p.set(e),f=Math.round(performance.now())}));const m=await p.getResultAsync(),{access_token:y,is_success:v,error_info:S,is_token_valid:w}=m||{};if(v&&w)return{authToken:y,resource:e,callerId:u.callerId,performance:{startTime:g,endTime:f}};let b=i.H.OtherError,C=S?.error_string||"Unknown Error";return v&&!w?(b=i.H.MaySucceedOnRetry,C="Invalid Auth Token returned"):S?.secondary_error===o.kTokenFetchUserInteractionRequired||S?.secondary_error===o.kInteractionRequired?(b=i.H.InteractionRequired,C="User interaction Required"):S?.secondary_error===o.kTokenFetchProviderError?(b=i.H.AuthProviderNotSupported,C="Authentication provider not supported"):this.isRetryableError(S)?(b=i.H.MaySucceedOnRetry,C="Retryable fetch error"):"Auth private api is not allowed when MAM enabled."===C&&(b=i.H.AuthPrivateNotSupportedForMAM,c=!0,s.M0.sendAppErrorEvent({...a.R7i,pb:{...a.R7i.pb,customMessage:"MAM is Enabled"}})),{resource:e,error:{message:C,status:b,internalError:S},callerId:u.callerId,performance:{startTime:g,endTime:f}}}isRetryableError(e){if(!e?.platform_error_code)return!1;const t=(e.platform_error_code>>>0).toString(16).toUpperCase();return void 0!==["CAA3","CAA7","CAA8","CAAD"].find((e=>t.startsWith(e)))||!!["CAA20005","CAA20008","CAA10001"].includes(t)}}function u(){return c}},36577:function(e,t,n){n.d(t,{BV:function(){return a},Kf:function(){return s},U:function(){return r}});var i=n(58867);class r{constructor(e,t,n=(()=>{})){if(this.authDataFetchStrategy=e,this.authDataCacheStrategy=t,this.logAuthEvent=n,!e)throw new Error("Fetch Strategy is not provided in ModularAuthManager");if(!t)throw new Error("Cache Strategy is not provided in ModularAuthManager")}async getAuthData(e,t=!1){const n=await this.authDataCacheStrategy.getAuthDataFromCache(e),{authToken:i,...r}=n||{};if(this.logAuthEvent(r,t),n?.authToken)return n;const o=await this.authDataFetchStrategy.fetchAuthData(e,t),{authToken:a,...s}=o||{};return this.logAuthEvent(s,t),o?.error||this.authDataCacheStrategy.setAuthDataToCache(e,o).then((e=>{this.logAuthEvent(e,t)})),o}}let o={getAuthData:async e=>({resource:e,error:{message:"Auth manager is not initialized",status:i.H.OtherError}})};function a(e){o=e}function s(){return o}},45252:function(e,t,n){n.d(t,{W:function(){return r}});var i=n(96577);class r{constructor(e){if(this.authCallerGetter=e,!e)throw new Error("Auth Caller Getter is not provided in AadEdgeChromiumAuthCallerValidator")}async validateAuthCaller(){const{authCallerGetter:e}=this,{account:t,client:n}=await e()||{};return t?"UNSUPPORTED_SOVEREIGNTY"===t.account_type?{callerId:t.tenant_id,error:{message:"Edge unsupported sovereignty",status:i.$.UnsupportedSovereignty}}:"AAD"!==t.account_type?{callerId:t.tenant_id,error:{message:"Not valid AAD account.",status:i.$.OtherValidationError}}:n?.id?{client:n,account:t,callerId:t.tenant_id}:{callerId:t.tenant_id,error:{message:"Client Id not provided.",status:i.$.OtherValidationError}}:{error:{message:"Account info not available",status:i.$.AccountInfoUnavailable}}}}},96577:function(e,t,n){var i;n.d(t,{$:function(){return i}}),function(e){e.AccountInfoUnavailable="accountInfoUnavailable",e.UnsupportedSovereignty="unsupportedSovereignty",e.CnDomain="cnDomainUnsupported",e.OtherValidationError="otherValidationError"}(i||(i={}))},31913:function(e,t,n){n.d(t,{P:function(){return p}});const i=/(?:Primary Error:\s)(\w+)/,r=/(?:Secondary Error:\s)(\w+)/,o=/(?:hex:)(\w+)/,a=/(?:Error code:\s)(\w+)/,s=/(?:error message:)(AADSTS\w+)/,c=/(?:Trace ID:\s)([0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12})/,d=/(?:Correlation ID:\s)([0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12})/,u=/(?:Timestamp:\s)([0-9]{4}-[0-9]{2}-[0-9]{2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}Z)/,l=/([\w.-]+)@([\w-]+)((\.(\w){2,3})+)/g;function p(e,t){const n={};try{if(n.requestedResource=t?.id,e&&e.internalError){const t=e.internalError;if(n.platformCode=t.platform_error_code||void 0,t.error_string){const e=t.error_string.replace(l,"");n.primaryError=e.match(i)?.[1]||"",n.secondaryError=e.match(r)?.[1]||"",n.aadErrorCode=e.match(s)?.[1]||"",n.errorCode=e.match(a)?.[1]||"",n.hexCode=e.match(o)?.[1]||"",n.traceId=e.match(c)?.[1]||"",n.correlationId=e.match(d)?.[1]||"",n.timestamp=e.match(u)?.[1]||""}}}catch(e){return n}return n}},18939:function(e,t,n){n.d(t,{oc:function(){return d}});var i=n(5302),r=n(242),o=n(44132),a=n(96577),s=n(58867),c=n(31913);const d=(e,t)=>{((e,t)=>{if(!e||!o.M0)return;let n;if(!e.error)return;switch(e.error.status){case s.H.InteractionRequired:case a.$.CnDomain:case a.$.UnsupportedSovereignty:case a.$.AccountInfoUnavailable:n=i.N1G;break;case a.$.OtherValidationError:case s.H.OtherError:n=i.etM;break;case s.H.AuthPrivateNotSupportedForMAM:default:return}const r={...(0,c.P)(e.error,e.resource),authPrivateApi:t?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:e.resource?.friendlyName},d={id:e.callerId||"",status:!1,name:e.resource?.friendlyName||"",info:{...n,message:e.error.message,pb:{...n.pb,customMessage:JSON.stringify(r)}}};o.M0.sendAuthEvent(d)})(e,t),((e,t)=>{if(!e||!o.M0)return;if(!e.error)return;let n;switch(e.error.status){case s.H.InteractionRequired:case a.$.AccountInfoUnavailable:n=i.N1G;break;case a.$.OtherValidationError:case s.H.OtherError:n=i.etM;break;default:return}const r={...(0,c.P)(e.error,e.resource),authPrivateApi:t?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:e.resource?.friendlyName};o.M0.sendAppErrorEvent({...n,message:e.error.message,pb:{...n.pb,customMessage:JSON.stringify(r)}})})(e,t),(e=>{if(!e)return;const t=`Auth.AcquireAccessToken.${e.callerId}`,n=`${t}.Start`,i=`${t}.End`,{startTime:o,endTime:a}=e.performance||{},s=(0,r.Ou)();s&&(s[n]=e.performance?.startTime||-1,s[i]=e.performance?.endTime||-1,s[t]=a&&o?a-o:-1)})(e)}},62328:function(e,t,n){n.d(t,{AN:function(){return a},VQ:function(){return s},bk:function(){return c},rZ:function(){return o}});var i=n(46124),r=n(98130);const o="stn",a="aad";function s(){return(0,i.m)().useEnterpriseCompliance()}async function c(){return(0,r.Yq)().AccountInfoPromise.then((e=>e&&e.tenant_id?e.oid?`Oid:${e.oid}@${e.tenant_id}`:`TID:${e.tenant_id}`:""))}},90326:function(e,t,n){var i;n.d(t,{g:function(){return i}}),function(e){e.tryAcquire1STokenLite="ATL",e.acquireTokenSilent="ATS",e.tryAcquire1STokenProfileSwitch="ATP",e.clearAccountLinkingCookies="CAL",e.jwtSSOService="JWT",e.interactiveLogin="ILO",e.loginRedirect="LRD",e.loginPopup="LPP",e.logout="LGT",e.ssoSilent="SSL",e.singleSignOn="SSO",e.waitFor1SToken="W1S"}(i||(i={}))},93483:function(e,t,n){n.d(t,{$q:function(){return c},GL:function(){return d},I0:function(){return i},VT:function(){return o},X_:function(){return r},Yc:function(){return s},gQ:function(){return u},m2:function(){return a}});const i="at-bing",r="at-bing-dt",o="sign-in-active",a="initial-page-nav",s="sign-in-pending",c="sign-in-refreshed-page",d="authconstants-peregrine",u="sign-in-refresh-session"},11591:function(e,t,n){n.d(t,{Yb:function(){return a},Z6:function(){return o},w0:function(){return s}});var i=n(43852),r=n(79403);const o=(0,n(32236).p)((()=>(0,i.oA)("auth","auth"))),a=e=>(0,r.FF)(`Auth.${e}`,{logStart:!0,logDuration:!0,firstTimeOnly:!0}),s=(e,t)=>(0,r.hf)(`Auth.${e}`,t,!0)},79732:function(e,t,n){n.d(t,{ID:function(){return m},Z5:function(){return f}});var i=n(86117),r=n(33779),o=n(5302),a=n(98130),s=n(28123),c=n(48593),d=n(5884),u=n(19625),l=n(52211),p=n(58009),h=n(42167),g=n(26448);function f(e){a.jG.AuthCookieName=function(e){let t=a.jG.AuthCookieName;if(e&&!(0,s.rN)())t=e.isAAD?"al_app_anon":"app_anon";else if((0,s.P8)()||(0,s.rN)())t="AAD"===(0,l.xQ)()||e?.isAAD?"al_anon":"anon";else if((0,s.TJ)()){t="AAD"===(0,c.XS)().accountType?"al_app_anon":"app_anon"}else t="anon";return t}(e),(0,p.jW)(a.jG.AuthCookieName),!(0,s.rN)()&&(0,s.TJ)()&&"AAD"===(0,c.XS)().accountType&&m()}async function m(e,t=!0,n=!0,a=!0){const s=a?(0,u.ej)(d.og):void 0,c=n?1e4:0;let l;if(!s||!t)return Promise.race([(0,i.b1)(),(0,h.Kb)(c).then((()=>l=!0))]).then((async t=>{l&&c>0&&(0,r.H)(o.nrW,"Work Id call was made before TTVR marker was set"),(0,g.qs)(e,a)}))}},8229:function(e,t,n){n.d(t,{H:function(){return p}});var i=n(42122),r=n(15598),o=n(32236),a=n(68052),s=n(55377),c=n(30323),d=n(16614),u=n(62515);const l="authRecordTrail";class p{constructor(){this._localStorage=(0,r.$o)(),this.getCompressedRecords=(0,o.p)((()=>(this.authRecordList||(this.authRecordList=this.getAuthRecordFromDisk()),this.getCompressedRecordsFromAuthTrail(this.authRecordList))))}async addAuthRecord(e,t){try{const n={time:(new Date).toISOString(),action:e,result:t,state:await this.getState()};i.k.log(`authRecord entry - ${e}: ${t}`),this.record(n)}catch(n){i.k.log(`addAuthRecord error - ${e}: ${t}`)}}record(e){if(!e)return void i.k.logError("dual-auth: authRecord is null or undefined");this.authRecordList||(this.authRecordList=this.getAuthRecordFromDisk()),this.authRecordList.push(e),this.getCompressedRecords.cache.clear();const t=this.authRecordList.slice(-10);this._localStorage.setItem(l,JSON.stringify(t))}getRecordsTail(){return this.getRecords().slice(-10)}getCompressedRecordsFromAuthTrail(e){let t={};return e?(t={a:"",r:"",s:[],t:[]},e.forEach(((n,i)=>{t.a+=n.action+";",t.r+=this.getCompressedResult(n.result)+";",t.t.push(this.getTimeDiff(n.time,i>0?e[i-1].time:n.time)),t.s.push(this.getObjectDiff(n.state,i>0?e[i-1].state:n.state))})),t):t}getObjectDiff(e,t){if(!e)return{};if(e===t)return e;const n=(0,s.Z)((0,c.Z)(e),(0,c.Z)(t),d.Z);return(0,u.Z)(n)}getTimeDiff(e,t){if(!e)return;if(e===t)return e;const n=new Date(e),i=n&&n.getTime(),r=t&&new Date(t),o=r&&r.getTime();return i&&o?(i-o).toString():void 0}getRecords(){return this.authRecordList||(this.authRecordList=this.getAuthRecordFromDisk()),this.authRecordList}getAuthRecordFromDisk(){if(!this._localStorage.supported)return void i.k.log("dual-auth: Local storage access is not supported");const e=this._localStorage.getItem(l);return(0,a.d)(e)||[]}}},98275:function(e,t,n){n.d(t,{Gy:function(){return A},aH:function(){return w},cu:function(){return v},ks:function(){return S}});var i=n(33779),r=n(5302),o=n(5884),a=n(68052),s=n(98130),c=n(48593),d=n(97906),u=n(15598),l=n(25769),p=n(19625),h=n(93483),g=n(40743),f=n(12812),m=n(52185);function y(){T(),k(),C(h.gQ)}function v(e=null){const t=decodeURIComponent((0,p.ej)("aace")),n=(0,p.ej)(o.nM),{child:i}=t&&(0,a.d)(t)||{};if(("edgeChromium"!=s.jG.AppType||!t||0!=i)&&t&&(1===i||n)){const t=s.jG.CurrentRequestTargetScope;t&&"kids"!==t.audienceMode&&(e&&e(),(0,f.Z)())}}async function S(e,t=null,n=!1){const i=(0,p.ej)(o.m$),r=!!(0,p.ej)(c.g8);if(n){if(i)return b(),void await E(t,!1,!0,"signInStateChanged");await E(t,r,!1,"signInStateChanged")}else if(e){if(r||(0,p.sq)(c.g8,e,1,s.jG.HostPage.topDomain,"/",!0),!i)return void await E(t,!0,!1,"get appAnon cookie");y()}else{if(b(),i)return void await E(t,!1,!0,"no token");y()}}function w(){if((0,d.G)().getItem(h.Yc))return T(),void P();I()?M(h.$q):P(),M(h.Yc)}function b(){const e=s.jG.HostPage.topDomain;(0,p.sq)(c.g8,"",-1,e,"/",!0),(0,u.$o)().removeItem(h.I0)}function C(e){(0,d.G)().removeItem(e)}function T(){C(h.VT)}function k(){C(h.Yc)}function P(){C(h.$q)}function A(){const e=parseInt((0,d.G)().getItem(h.m2));return C(h.m2),Number.isInteger(e)?e:0}function I(){return!!(0,d.G)().getItem(h.VT)}async function E(e,t,n,a){if(t!==n&&await(0,g.FI)(),I())return(0,i.H)(r.amS,`Auth refresh blocked. TokenExists: ${t}, CookieExists: ${n}.`,void 0,{shouldSampleErrorsForTreatement1:!0}),void y();if((0,d.G)().supported){if(k(),R(),function(){const e=Date.now()-Math.round(window.performance.now());M(h.m2,e.toString())}(),m.Gq.set("authRefreshing",!0),(0,i.H)(r.G0e,`Sign In Refresh Required. TokenExists: ${t}, CookieExists: ${n}.`,"",{reason:a,appAnonCookieExists:!!(0,p.ej)(o.m$),ltCookieExists:!!(0,p.ej)(c.g8),edgeLoginTokenCookieExists:(0,l.vs)(),shouldSampleErrorsForTreatement1:!t&&n}),e){const{skipRefresh:t}=e()||{};if(!0===t)return}M(h.gQ),(0,f.Z)()}else y()}function R(){M(h.VT)}function M(e,t="1"){(0,d.G)().setItem(e,t)}},52211:function(e,t,n){n.d(t,{KW:function(){return y},xQ:function(){return k},YX:function(){return b},XJ:function(){return S},hC:function(){return v},rr:function(){return w}});var i=n(46124),r=n(28123),o=n(13218),a=n(48593),s=n(59637),c=n(73452),d=n(39197);var u=n(11591),l=n(52185),p=n(71172);const h="__SignInStateIsValid__",g="__SignInStatePromiseResolver__",f=()=>{l.Gq.set(h,new Promise((e=>{l.Gq.set(g,e)})))};f();const m=()=>l.Gq.get(h);function y(){const e=l.Gq.get(g);e&&e()}function v(){return 2===(0,i.m)().getSignInState()}function S(){return C("getUserSignInState",(0,r.hk)())}function w(){return C("waitForSignInState",!0)}async function b(e=!0){const t={signedInStatus:1,accountType:null};if((0,c.wq)()&&e){await async function(){let e=0;return new Promise(((t,n)=>{if((0,d.Vx)())t();else{const i=setInterval((async function(){(0,d.Vx)()?(clearInterval(i),t()):e>30?(clearInterval(i),n()):e++}),50)}}))}();const e=(0,d._4)();e&&(t.signedInStatus=e.isSignedIn?2:1,t.accountType=T(e.accountType))}else if((0,s.ID)()){const e=await(0,s.yb)();t.accountType=T(e.accountType),t.signedInStatus=e.tokenValue?2:1}else t.signedInStatus=await w(),t.accountType=k();return t}async function C(e,t){const n=(0,o.nP)().UserIsSignedIn;if(null!=n)return n?2:1;const r=(0,u.Z6)(),a=r&&r.startMeasure(e).endMeasure;let s;t&&(s=(0,u.Yb)("GetSignInStateAsync"),(0,i.m)().initOverrides(),await m());const c=(0,i.m)().getSignInState();return a&&a(),s&&s(),c}function T(e=null){return"MSA"===e?"MSA":"AAD"===e?"AAD":void 0}function k(){if((0,r.TJ)()){const e=(0,a.XS)();return 2===e.isSignedIn&&e.accountType}if((0,r.P8)())return(0,p.bW)()}},93240:function(e,t,n){n.d(t,{MX:function(){return S},Rd:function(){return w}});var i=n(44132),r=n(33294),o=n(28123),a=n(48593),s=n(32425),c=n(5884),d=n(76524),u=n(45949),l=n(20076),p=n(90830),h=n(59637),g=n(52211),f=n(98130),m=n(25769);var y=n(94769);let v=!1;async function S(e,t=r.bN){let n,p,y;if(e)n=e.isMsa,p=e.isAAD,y=e.isSSO;else if((0,o.TJ)()){const e=(0,a.XS)();y=2===e.isSignedIn,n="MSA"===e.accountType,p="AAD"===e.accountType}else if((0,o.P8)()){const e=(0,g.xQ)();n="MSA"===e||!!(0,s.lI)(c.Li),p="AAD"===e||!!(0,s.lI)(c.yz),y=["AAD","MSA"].includes(e)&&!(0,d.YU)()}else if((0,h.ID)()){const e=await(0,h.yb)();n=!!e?.tokenValue,y=n}else n=2===await(0,g.XJ)(),y=n;const v={aadState:p?1:0,isSignedIn:n,isSso:y},S=function(e,t){let n;const i=(0,u.E)()===u.M.Web?"anon":"app_anon",r=!!t&&(0,l.u6)(i);n=r?"AAD-AL":t?"AAD":e?"MSA":"NA";return n}(n,p),k={...v,loginState:S},A=await P(t);if((0,o.Yc)()){let e;e=A?await(0,r.dJ)(t):(0,r.pB)(t),e&&(k.loginState=b(e),A?await T(e,t):C(e,t)),w(t)}return i.M0?.addOrUpdateCustomProperty("AuthCookies",function(){const e={aace:+!!(0,s.AE)(c.m$),app_anon:+!!(0,s.AE)(c.Ji),ace:+!!(0,s.AE)(c.Li),anon:+!!(0,s.AE)("ANON"),authCookieName:f.jG.AuthCookieName,lt:+!!(0,s.AE)(a.g8),osat:+!!(0,s.AE)(c.Cw),app_wid:+!!(0,s.AE)(c.og,!0),wid:+!!(0,s.AE)(c.yz,!0)};if((0,o.kD)()){const t={elt_account:(0,m.Rn)()?.account_type,elt_token:+!!(0,m.Rn)()?.access_token};Object.assign(e,t)}return JSON.stringify(e)}()),k}const w=async(e=r.bN)=>{(0,o.Yc)()&&(v||(v=!0,p.eS.subscribe(p.m7.DigitalIdUpdate,(async t=>{await P(e)?await T(t,e):C(t,e)}))))};function b(e){if(e)return["AAD","AAD-AL","MSA","NA"].includes(e.at)?e.at:void 0}function C(e,t=r.bN,n){k(e,t,n,!1)}async function T(e,t=r.y1){await k(e,t,void 0,!0)}async function k(e,t,n,o=!1){o&&(n=await(0,r.dJ)(t));const{shouldUpdateTelemetry:a,reason:s}=function(e,t){if(!e)return{shouldUpdateTelemetry:!1,reason:"No digital ID provided"};let n=!1;const r=["MSA","AAD-AL"].includes(e.at?.trim().toUpperCase());t&&(n=function(e,t){if(!e||!t)return!1;return["muid","anid","wid","at","picassoId"].every((n=>(e[n]||"")===t[n]))}(t,e));const o=!n||r;let a=0;n||(a|=1);r&&(a|=2);const s=[];1&a&&s.push("changed digital ID");2&a&&s.push("forced update due to account type");return i.M0?.addOrUpdateCustomProperty("DigitalIdUpdate",JSON.stringify({areDigitalIdsEqual:+n,shouldUpdateTelemetry:+o,reasonNumber:a})),{shouldUpdateTelemetry:o,reason:s.join(", ")}}(e,n);if(!a)return;!function(e){if("NA"===e.at&&e.muid){const t=e.muid.replace(/^m-/,"").toUpperCase();(0,y.gm)(t)}}(e),function(e){if(["MSA","AAD-AL"].includes(e.at)&&e.anid){const t="A="+e.anid.toUpperCase().replace(/^A-/,"");i.M0?.applyAnidOverride(t)}}(e),function(e){if(e.at){const t=function(e){if(!e)return;const t=b(e),n={aadState:"AAD"===t?1:0,isSignedIn:"MSA"===t,isSso:["AAD","AAD-AL","MSA"].includes(t),loginState:t,wid:e.wid?e.wid.replace(/^m-/,"").toUpperCase():void 0},i=e.picassoId??void 0;return i&&(n.picassoId=i),n}(e);i.M0?.updatePageMetadata({user:t},!0)}}(e);const c=function(e){const t={...e,lastUpdated:(new Date).toISOString()},n={NA:["anid","wid"],AAD:["anid"],MSA:["wid"]};return n[e.at]?.forEach((e=>delete t[e])),t}(e);o?await(0,r.DA)(c,t):(0,r.In)(c,t)}const P=async e=>{const t=e?.getItem("");return t instanceof Promise}},40743:function(e,t,n){n.d(t,{FI:function(){return C},B9:function(){return P},B0:function(){return k},FA:function(){return b}});var i=n(82588),r=n(28123),o=n(98130),a=n(5884),s=n(48593),c=n(46124),d=n(25769),u=n(32425),l=n(68052);const p=()=>{const e=(0,u.AE)(a.m$,!0),t=e&&(0,l.d)(e),{child:n,expiredOn:i}=t||{};return(void 0!==n||void 0!==i)&&t},h=()=>{const e=p();if(!e)return!0;const t=e.expiredOn,n=new Date(t);if(!n.getTime())return true;const i=new Date;return n<i||n.getTime()-i.getTime()<2592e6};var g=n(52211),f=n(71172),m=n(44132),y=n(93483),v=n(19625),S=n(13578),w=n(11591);async function b(e,t,n,o){const a=(0,w.Z6)(),s=a&&a.startMeasure("updateAuthState").endMeasure;try{const e=!n&&(i.yb||i.R0);if(e){const n=await(0,i.ot)({id:"appanoncookie"},window.location.port?1500:null),r=n?.payload?.appAnonCookieExists||!1;await T(t,r,e)}(0,r.P8)()?(await(0,f.GQ)(),await T(t,!1,e)):(await C(o),await T(t,void 0,e))}catch(t){await T(),e(t)}s&&s()}async function C(e,t){(0,r.P8)()?await(0,f.GQ)():function(){if((0,r.Pz)()){if(!(0,r.TJ)()&&"edgeChromium"!==o.jG.AppType)return h();{const e=(0,s.XS)();if((0,d.vs)()&&"MSA"===e.accountType||(0,u.lI)(s.g8))return h()}}return!1}()&&await async function(e,t){const n=new URL(`https://api.msn.${o.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/appanon`),i={credentials:"include"};e&&(i.headers=e);const a=t||(r.t9[o.jG.AppType]?o.jG.AppType:y.GL);return n.searchParams.set("apikey",o.jG.OneServiceApiKey),n.searchParams.set("ocid",a),n.searchParams.set("activityId",o.jG.ActivityId),n.searchParams.set("scn","app_anon"),fetch(n.href,i)}(e,t)}async function T(e,t,n){let o=!1;const d=(0,w.Z6)(),u=d&&d.startMeasure("handleSignInStateUpdateAsync").endMeasure;if((0,r.P8)()){const{accessToken:e}=((0,r.hk)()?await(0,f.IY)():(0,r.aS)())||{},t=(0,r.me)(e);(0,S.Z)(t)||(o=!0,(0,i.mS)({id:"AuthHeaders",type:"command",payload:t}))}else if(o=null!=(0,v.ej)(a.m$),(0,r.TJ)()){(0,s.KO)();o=2===(0,s.XS)().isSignedIn}const l=o?2:1;if(n){!1===t&&2===l&&((0,i.mS)({id:"updatemyfeed"}),(0,i.mS)({id:"updatepdp"}),(0,i.mS)({id:"UpdateMyBriefing"}))}(0,c.m)().setSignInState(l),(0,g.KW)(),void 0!==e&&e!==l&&m.M0.addOrUpdateTmplProperty("signInUpdate","1"),u&&u()}function k(){return(0,g.hC)()&&(!(0,r.P8)()||"MSA"===(0,g.xQ)())}function P(){return"AAD"===(0,g.xQ)()}},59637:function(e,t,n){n.d(t,{ID:function(){return s},Vo:function(){return d},yb:function(){return c}});var i=n(98130),r=n(32236),o=n(42167),a=n(21215);function s(){return i.jG.WidgetAttributes&&"shopping"==i.jG.AppType}const c=(0,r.p)((async()=>{let e;const t=(0,a.N)()&&window.__pw_options,n=t&&t.auth&&t.auth.serviceToken;if("object"==typeof n&&n.then){const t=3e3;e=await Promise.race([n,(0,o.Kb)(t).then((()=>null))])}return e||{tokenValue:void 0,accountType:void 0,muid:void 0}}));function d(){c.cache.clear()}},57594:function(e,t,n){n.d(t,{BG:function(){return S}});var i=n(33779),r=n(5302),o=n(15598),a=n(13218),s=n(48593),c=n(93483),d=n(98275),u=n(19625),l=n(21215),p=n(44132),h=n(56742),g=n(19861);const f="f3222e55-ab35-49de-81f3-88a3be08cf77",m="service::www.msn.com::mbi_ssl",y="service::bing.com::MBI_SSL",v="077c9b95-2f57-4442-8872-134fcc08fcb3/Bing.MSA.Default";async function S({accountInfo:e,clientId:t,signInStateChanged:n,customRefreshCallback:S}){const C=window.chrome,T=C&&C.authPrivate,k=e&&"MSA"===e.accountType;if(!T||!k)return await(0,d.ks)(null,S,n),(0,o.$o)().removeItem(c.I0),void g.U.addAuthRecord(h.f.ntpUpdateToken,"SUCCESS");(0,l.N)()&&a.Al.IsPrerender&&"visible"!==document.visibilityState||(0,d.aH)();let P,A,{result:I,appError:E}=await async function(e){const t=(0,u.ej)(s.g8);if(!t)return{result:!1,appError:{message:"MSA user, lt cookie not present.",pb:{...r.npG.pb,isPrerender:a.Al.IsPrerender,msnCookiePresent:t}}};return await(0,d.ks)(t,e),{result:!0}}(),{result:R,appError:M}=function(){const e=(0,o.$o)()?.getItem(c.I0),t=(0,o.$o)()?.getItem(c.X_);if(e&&t){const e=Number(t);if(e){return{result:(new Date).getTime()-new Date(e).getTime()<0}}}return{result:!1,appError:{message:"MSA user, Bing token not found.",pb:{...r.npG.pb,isPrerender:a.Al.IsPrerender,bingTokenFound:null!=e}}}}();if(!I){const o={account_id:e.accountId,account_type:e.accountType,client_id:t||f,scope_or_resource:m};if(P=await w(o),P&&!P.is_success&&P.error_info&&0==P.error_info.primary_error&&0==P.error_info.platform_error_code&&""!=P.error_string&&(0,u.ej)(s.g8))return x=P.error_string,void(0,i.H)(r.u8h,"Access token fetch failed. Used LT cookie",void 0,{...r.u8h.pb,errorMessage:x,isPrerender:a.Al.IsPrerender});I=P?.is_success&&P?.is_token_valid,await async function(e,t,n=!1){await(0,d.ks)(e&&e.is_success&&e.is_token_valid&&e.access_token,t,n)}(P,S,n)}var x;if(!R){const{accountId:n,accountType:o}=e||{},s=(parseInt(a.Al.ClientSettings?.browser?.version??"",10)||0)>101,c={account_id:n,account_type:o,client_id:t||f,scope_or_resource:s?v:y,...s&&{use_msa_v2_api:!0}};A=await w(c),R=A?.is_success&&A?.is_token_valid,b(A),R||(0,i.H)(r.Si,"Failed to acquire Bing access token.",void 0,{shouldSampleErrorsForTreatement1:!0}),b(A)}I||function(e,t,n){p.M0.sendAppErrorEvent({...r.npG,message:"Failed to acquire MSA access token(s).",pb:{...r.npG.pb,msn:e&&e.is_success?void 0:e&&e.error_info,bing:t&&t.is_success?void 0:t&&t.error_info,innerErrors:n,shouldSampleErrorsForTreatement1:!0}})}(P,A,[E,M])}async function w(e){const t=await function(e){return new Promise((t=>{window.chrome.authPrivate.acquireAccessTokenSilently(e,(e=>{t(e)}))}))}(e);return g.U.addAuthRecord(h.f.ntpAcquireToken,t?.is_success&&t?.is_token_valid?"SUCCESS":"FAIL"),t}function b(e){if(e&&e.is_success&&e.is_token_valid&&e.access_token){const t=.5,n=(new Date).getTime()+36e5*t;(0,o.$o)().setItem(c.I0,e.access_token),(0,o.$o)().setItem(c.X_,n.toString())}}},56742:function(e,t,n){var i;n.d(t,{f:function(){return i}}),function(e){e.ntpAcquireToken="NAT",e.ntpUpdateToken="NUT",e.ntpNewAccount="NRP",e.ntpGetEdgeLoginToken="NET",e.ntpAuthManagerToken="NAM",e.ntpWorkIdCookie="NWC"}(i||(i={}))},19861:function(e,t,n){n.d(t,{U:function(){return g}});var i=n(46124),r=n(13218),o=n(32425),a=n(25769),s=n(48593),c=n(5884),d=n(52185),u=n(81489),l=n(8229),p=n(97268);class h extends l.H{async getState(){const e=2===(0,i.m)().getSignInState(),t=await this.getAccountInfo();let n="UNSUPPORTED_SOVEREIGNTY";"AAD"===t?.accountType?n="AAD":"MSA"===t?.accountType&&(n="MSA");const d=r.Al.ClientSettings;return{isSignedIn:e,accountType:n,signedInAccounts:t?await this.getSignedInAccounts(t):void 0,storage:{elt:+!!(0,o.AE)(a.co),lt:+!!(0,o.AE)(s.g8),aace:+!!(0,o.AE)(c.m$),ace:+!!(0,o.AE)(c.Li),app_anon:+!!(0,o.AE)(c.Ji),anon:+!!(0,o.AE)("ANON"),app_wid:+!!(0,o.AE)(c.og,!0)},appType:d&&d.apptype,pageType:d&&d.pagetype}}async getAccountInfo(){const e=window?.chrome?.authPrivate?.getPrimaryAccountInfo;return new Promise((t=>{e?e((e=>{if(e){const n={accountId:e.account_id,accountType:e.account_type,firstName:e.first_name,lastName:e.last_name};t(n)}else t({})})):t({})}))}async getSignedInAccounts(e){return null===e?[-1]:[(0,p.vp)(e?.firstName)]}getCompressedResult(e){return e?e.match(/\bsuccess\b/i)?"S":e.match(/\bfailure\b/i)?"F":e.toString():null}static getInstance(){return d.Gq.get("__NtpAuthRecordManagerInstance__",(()=>new h))}}const g=(0,u.h)(h)},23968:function(e,t,n){n.d(t,{h:function(){return l}});var i=n(7677),r=n(32236),o=n(32425),a=n(78018),s=n(44132),c=n(33777),d=n(97268);const u=(0,r.p)((()=>(0,d.vp)((0,o.AE)("MUID"),100)<2));function l(e,t,n=null){s.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:(0,i.n)(n),authRecordTrail:u()&&c.$e.getRecordsTail()||void 0,tokenCacheState:(0,a.wX)()}})}},97268:function(e,t,n){n.d(t,{sm:function(){return b},lx:function(){return f},LT:function(){return y},Df:function(){return v},sA:function(){return S},nt:function(){return w},vp:function(){return C},nq:function(){return g},RH:function(){return m}});var i=n(85856),r=n(98130),o=n(28123),a=n(32425),s=n(68052);const c=()=>{const e=(0,a.AE)("lh",!0),t=e&&(0,s.d)(e),{login_hint:n}=t||{};return n&&t};var d=n(5884),u=n(13432),l=n(20782),p=n(34587),h=n(19625);function g(e){const t=encodeURIComponent(JSON.stringify(e||{}));(0,h.sq)(i.sM,t,i.ac,r.jG.HostPage.topDomain,"/",!1,l.f.Strict),(0,o.yd)()}function f(e){if(e)return function(e){return e&&e.tenantId===u.bc}(e)?"MSA":"AAD"}async function m(e){let t;if(e){t=(await y()).find((t=>t.username===e))}else{const e=S();if(e){t=(await y()).find((t=>v(t)===e))}}return t}async function y(){const e=await(0,p.Yu)();return await e.handleRedirectPromise(),e.getAllAccounts()}function v(e){return e&&e.idTokenClaims&&e.idTokenClaims[u.an]}function S(){const e=(0,i.x6)();return e&&e.login_hint}function w(){const e=c();return e&&e.login_hint}function b(){(0,h.sq)(d.cs,null,-1,r.jG.HostPage.topDomain,"/")}function C(e,t=1e3){let n=0;for(let t=0,i=e&&e.length;t<i;t++){n=(n<<5)-n+e.charCodeAt(t),n&=n}return n<0&&(n+=2147483647),n%t}},13432:function(e,t,n){n.d(t,{BS:function(){return a},Ic:function(){return r},QL:function(){return o},an:function(){return i},bc:function(){return d},kQ:function(){return s},w6:function(){return c}});const i="login_hint",r=300,o=3600,a="InteractionRequiredAuthError",s="BrowserAuthError",c="no_tokens_found",d="9188040d-6c67-4c5b-b112-36a304b66dad";var u;!function(e){e[e.NotAttempted=0]="NotAttempted",e[e.Fail=1]="Fail",e[e.FailTrySSO=2]="FailTrySSO",e[e.Success=3]="Success"}(u||(u={}))},33777:function(e,t,n){n.d(t,{$e:function(){return m},pD:function(){return y}});var i=n(13218),r=n(85856),o=n(32425),a=n(68052),s=n(46124),c=n(5884),d=n(76524),u=n(97268),l=n(34587),p=n(8229),h=n(52185),g=n(81489);class f extends p.H{async getState(){const e=i.Al.ClientSettings,t=(0,l.dn)(),n=t&&(0,u.lx)(await(0,u.RH)())||(0,r.x6)()?.account_type||void 0,p=(0,o.AE)(r.sM),{login_hint:h}=p&&(0,a.d)(p)||{},g=h&&0!==Object.keys(h).length;return{isSignedIn:2===(0,s.m)().getSignInState(),accountType:n,signedInAccounts:t?await this.getSignedInAccounts():void 0,storage:{aace:(0,o.AE)(c.m$),ace:(0,o.AE)(c.Li),als:(0,o.AE)(c.tX,!0),child:(0,o.AE)(c.nM),currentAccount:g,loginFlowMarker:(0,d.YU)(),logoutFlowMarker:(0,d.SY)(),editFlowMarker:(0,d.hU)(),osate:(0,o.AE)(c.cs)},appType:e&&e.apptype,pageType:e&&e.pagetype}}async getSignedInAccounts(){if(!await(0,l.Yu)())return[-1];return(await(0,u.LT)()).map((e=>(0,u.vp)(e.username)))}getCompressedResult(e){if(!e)return null;if(e.match(/\bsuccess\b/i))return"S";if(e.match(/\bfailure\b/i))return"F";{let t=e.match(/tryInitiateEarlyAuth: Finalized sign in state (\w+) from auth-(\w+)/);return t?`EarlyAuth: ${t[1]} from ${t[2]}`:(t=e.match(/initiateSSOCore: (\w+) - SSO data from the (\w+) auth flow[^]*/),t?`SSO: ${t[1]} from ${t[2]}`:e.toString())}}static getInstance(){return h.Gq.get("__DualAuthRecordManagerInstance__",(()=>new f))}}const m=(0,g.h)(f),y=m.getCompressedRecords},34587:function(e,t,n){n.d(t,{Bj:function(){return F},Oo:function(){return O},Xi:function(){return L},Yu:function(){return D},dn:function(){return M},qW:function(){return x}});var i=n(13432),r=n(42122),o=n(242),a=n(86117),s=n(33779),c=n(5302),d=n(7677),u=n(42833),l=n(42167),p=n(99234),h=n(15598),g=n(98130),f=n(13218),m=n(28123),y=n(22680),v=n(21215),S=n(9791),w=n(11935),b=n(11591);const C="2.18.0",T="2.24.0",k="1p-2.24.0",P="2.16";let A,I,E,R;function M(){return I}function x(e=!1){const t={scopes:["User.Read"],loginHint:"",redirectUri:_(e)};return e||Object.assign(t,{...B(),extraQueryParameters:{edge_suppress_profile_switch:"1"}}),t}function L(e,t){const n={...B(),account:e,postLogoutRedirectUri:_(),extraQueryParameters:{logout_hint:t,edge_suppress_profile_switch:"1"}};return $()&&(n.logoutHint=t,delete n.extraQueryParameters.logout_hint),n}function F(e){return{scopes:e,forceRefresh:!1,redirectUri:_(!0)}}A="localhost.msn.com"===(0,y.Td)(),R=(0,y.zw)().toLowerCase().endsWith(".cn"),E=((0,y.zp)().match(/\bpr=([\d]+)\b/)||{})[1];const D=(0,S.Z)((async e=>{await async function(){if(!(0,v.N)())return;let e;(0,m.lT)()&&(await Promise.race([N.getResultAsync(),(0,a.b1)(),(0,l.Kb)(1e4).then((()=>e=!0))]),e&&(0,s.H)(c.gZU,"Loading MSAL before TTVR in delay load"));const t=(0,b.Z6)(),n=t&&t.startMeasure("loadMsalScript").endMeasure;let i;const r=new Promise((e=>{i=e})),o=e=>{n&&n({customSuffix:e}),i()},u=G(`auth/msal-browser-${U()}.min.js`),p=(0,y.b0)(u);return p.onload=()=>o(),p.onerror=e=>{(0,s.H)(c.ydI,"Error in loading MSAL script",(0,d.n)(e)),o("error")},document.head.appendChild(p),await r}();const t=window.msal;I=!!t,t&&!$()&&function(e){const t=(0,h.$o)();t.keys().forEach((e=>{const n=e.match(/-[-]+/),i=n&&n[0].length;i>=2&&(2===i&&e.includes("accesstoken")||3===i&&e.includes("idtoken")||4===i&&e.includes("refreshtoken"))&&t.removeItem(e)}))}();const n=W()?{performanceTelemetryConfiguration:{samplingPrecentage:1}}:void 0;if(t&&t.PublicClientApplication){const a=new t.PublicClientApplication(function(e){const{tenantScope:t="Dual",tenantId:n}=e?.tenantOptions||{},{appId:o=p.I4}=e?.clientOptions||{};let a;return a=n||("MSA"===t?"consumers":"AAD"===t?"organizations":"common"),{auth:{clientId:o,authority:`https://login.microsoftonline.com/${a}`,redirectUri:_(),navigateToLoginRequestUrl:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,n)=>{if(!n)switch(e){case"Error":return void r.k.logError("dual-auth: "+t.toString());case"Info":case"Verbose":case"Warning":return void r.k.log("dual-auth: "+t.toString())}}},tokenRenewalOffsetSeconds:i.Ic}}}(e),n);return function(e){if(!$()||!f.Al.CurrentFlightSet.has("prg-msal224-ts")&&!g.jG.IsDebug)return;let t=1;const n=(0,o.Ou)(),i=(e,i)=>n[`MSAL.${t}.${e}`]=i,r=e=>Math.round(10*e)/10;e.addPerformanceCallback((e=>{e.forEach((e=>{const n=e.name;i(`${n}-start`,r(e.startTimeMs-performance.timeOrigin)),i(n,r(e.durationMs)),i("meta",`c:${e.fromCache?1:0}-v:${e.startPageVisibility}-ok:${e.success?1:0}`),i("cv",e.correlationId);const o="DurationMs";(0,w.Z)(e,((e,t)=>{if(t.endsWith(o)){const n=t.substring(0,t.length-o.length);i(`fn.${n}`,e)}})),t++}))}))}(a),a}}));function O(){N.set()}function _(e){return G(e?"auth/auth-redirect-blank.html":"0/auth/auth-redirect.html","https://"+(!!(0,y.Td)().match(/\.msn\.(com|cn)$/i)?(0,y.zw)():"www.msn."+(R?"cn":"com")),!1)}const N=new u.o;function B(){const e={appType:g.jG.AppType,authRedirJsVer:P,buildVersion:g.jG.BuildVersion,debug:g.jG.IsDebug?1:void 0,msalJsVer:U(),pr:E,returnUrl:(0,y.l4)()};return{state:encodeURIComponent(JSON.stringify(e))}}function U(){return W()?k:H()?T:C}function $(){return H()||W()}function H(){return f.Al.CurrentFlightSet.has("prg-msal224-b")}function W(){return f.Al.CurrentFlightSet.has("prg-msal224-1p")}function G(e,t="https://assets.msn."+(R?"cn":"com"),n=!0){let i="/latest",r=t;E&&n?i=`/pr-${E}`:A&&(i="",r=`https://${(0,y.zw)()}`);return`${r}/staticsb/statics${i}/${e}`}},71172:function(e,t,n){n.d(t,{tE:function(){return X},k$:function(){return Z},bW:function(){return J},n5:function(){return Y},x4:function(){return ee},kS:function(){return te},AU:function(){return q},GQ:function(){return G},vW:function(){return j},IY:function(){return Q}});var i,r=n(13432),o=n(43852),a=n(42122),s=n(7677),c=n(5302),d=n(42833),u=n(42167),l=n(32236),p=n(76524),h=n(25769),g=n(85856),f=n(28123),m=n(78018),y=n(97906),v=n(97268),S=n(34587),w=n(11591),b=n(98130),C=n(5884),T=n(33777),k=n(93483),P=n(19625),A=n(23968),I=n(90326);async function E(e,t){const n=t&&t.accessToken,i="Acquire"===e;if(!n&&i){const e="Invalid access token in jwtSSOCore";return T.$e.addAuthRecord(I.g.jwtSSOService,e),void(0,A.h)(c.fvr,e)}let r,o;try{r=await fetch(`https://api.msn.${b.jG.IsChinaCompliance?"cn":"com"}/auth/token/v2/jwtsso?apikey=${b.jG.OneServiceApiKey}&ocid=${k.GL}&activityId=${b.jG.ActivityId}`,{method:i?"POST":"DELETE",credentials:"include",body:JSON.stringify({userAccessToken:n})||void 0,headers:(0,f.me)(n)||void 0});i!==!!(0,P.ej)(C.cs)&&(o=new Error(`${i?"Expected":"Unexpected"} cookie ${C.cs} is ${i?"missing":"still present"} after ${e} JwtSSO call`))}catch(e){o=e}const a=!o&&r&&r.ok?null:`Error in ${e} mode in jwtSSO call. ${o||""}`;a&&(0,A.h)(c.fvr,a),T.$e.addAuthRecord(I.g.jwtSSOService,`${a||"Success"}`)}!function(e){e.Acquire="Acquire",e.Delete="Delete"}(i||(i={}));var R=n(26448),M=n(21215),x=n(9791),L=n(45949),F=n(20076);const D=`apikey=${b.jG.OneServiceApiKey}&ocid=Peregrine&it=${(0,L.E)()}&activityId=${b.jG.ActivityId}`;function O(){return(0,o.fW)((()=>async function(){let e,t;try{e=await fetch(`https://api.msn.${b.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/clearALCookies?${D}`,{method:"DELETE",credentials:"include"}),(0,F.EX)();if((0,F.u6)()){const e=decodeURIComponent((0,P.ej)(C.tX));t=new Error(`Account linking cookie ${e} indicates account is still linked after clearALCookies call`)}}catch(e){t=e}const n=!t&&e&&e.ok&&200===e.status?null:`Error in clearALCookies call. ${t||""}`;n&&(0,A.h)(c.L8S,n),T.$e.addAuthRecord(I.g.clearAccountLinkingCookies,`${n||"Success"}`)}()),"tryDelete1SAcctLnkCookies",(0,w.Z6)())}const _=7e3,N=7e3;let B,U=!1;const $={acquireTokenStatus:0,accessTokenResult1S:null,currentAccountInfo:null};let H=new d.o;const W=(0,l.p)((async()=>{const e=B||await(0,S.Yu)(),t=await(0,o.fW)((()=>e?.handleRedirectPromise()),"handleRedirect",(0,w.Z6)());if(t)return a.k.log("dual-auth: Signing in through interactive login loginResponse: "+JSON.stringify(t,null,4)),j(t).finally((()=>{(0,p.dy)()})),T.$e.addAuthRecord(I.g.interactiveLogin,"Success"),t;(0,p.dy)()}));async function G(e){const{userName:t,enforceTimeLimit:n}=e||{};U=!0;const i=await W();if(i)return i;let r;return r=t?(0,v.Df)(await(0,v.RH)(t))||t:(0,v.sA)()||(0,h.E1)()||(0,v.nt)(),!r&&(0,g.mb)()?(j(null,!0),void O()):await ne((()=>V(r)),"ssoSilent",n?N:-1)}const V=(0,x.Z)((async e=>{let t;e||a.k.log("dual-auth: login_hint is not available. ssoSilent may not work!");const n=B||await(0,S.Yu)(),i=(0,w.Yb)("SSOSilentCoreAndToken"),o=(0,w.Z6)(),d=o&&o.startMeasure("ssoSilentCore").endMeasure,u={...(0,S.qW)(!0),loginHint:e},l=(0,M.N)()&&history?.length;try{t=await n.ssoSilent(u)}catch(t){a.k.log(`dual-auth: ssoSilent failed! : ${t}`),T.$e.addAuthRecord(I.g.ssoSilent,(0,s.n)(t));const i=(0,g.x6)();if(t.name===r.BS&&i){if((0,p.m5)(),!(0,p.jG)()||!(0,f.P8)())return void await z(null,!0);{const t={...(0,S.qW)(),loginHint:e};n.acquireTokenRedirect(t)}}(i||(0,f.iG)())&&t.name!==r.BS&&t.name!==r.kQ&&(0,A.h)(c.WB4,"Error in ssoSilent call",t)}finally{a.k.log(`dual-auth: getAllAccounts AFTER ${t?"SUCCESSFUL":"UNSUCCESSFUL"} ssoSilent: ${JSON.stringify((0,v.LT)(),null,4)}`),t&&(a.k.log(`dual-auth: loginResponse AFTER SUCCESSFUL ssoSilent: ${JSON.stringify(t,null,4)}`),T.$e.addAuthRecord(I.g.ssoSilent,"Success. User: "+(0,v.vp)(t.account.username))),j(t).finally((()=>{i(),(0,p.bf)(),(0,p.bq)()})),d&&d({customSuffix:(t?t.fromCache&&"cache":"error")||void 0})}return l&&history.length===l+1&&dispatchEvent(new CustomEvent("ssoSilentHistChanged")),t}));function q(){return G()}async function j(e,t=!1){const n=await z(e,t);await K(n)}async function z(e,t=!1){if(e){const t=$.currentAccountInfo=e.account,n=(0,v.Df)(t),i=(0,v.lx)(t);return(0,v.nq)({login_hint:n,account_type:i}),t}t&&((0,v.nq)(),(0,m.tx)(null),(0,p.bf)(),(0,p.bq)(),(0,p.hq)(),await Promise.all([(0,o.fW)((()=>E("Delete")),"tryDelete1SJwtCookies",(0,w.Z6)()),O()]),(0,v.sm)())}async function K(e,t=!1,n=!1,i=!1){let d=$.accessTokenResult1S;const u=new Date(d&&d.expiresOn),l=u&&u.getTime()&&u>new Date;if(d&&3===$.acquireTokenStatus&&l)return void a.k.log(`dual-auth: tryAcquire1STokenSilently: token is still valid - expiry: ${new Date(d&&d.extExpiresOn)}`);const h="AAD"===(0,v.lx)(e),g=h?["https://enterprisenews.microsoft.com/User.Read"]:["https://oneservice.microsoft.com/OneService.Read"];try{if(d=await async function(e,t,n=!1,i=!1){if(!t)return void a.k.log("dual-auth: tryAcquireTokenSilently received empty account -- API calls may not be authenticated!");const o=B||await(0,S.Yu)(),d={...(0,S.Bj)(e),forceRefresh:i,account:t};let u;const l=(0,w.Z6)(),h=l&&l.startMeasure("tryAcquireTokenSilently").endMeasure;try{u=await ne((()=>o.acquireTokenSilent(d)),"acquireTokenSilent",n?_:-1)}catch(e){throw a.k.log(`dual-auth: acquireTokenSilent failed! : ${e}`),T.$e.addAuthRecord(I.g.acquireTokenSilent,(0,s.n)(e)),(0,A.h)(c.Bjk,"acquireTokenSilent call failed",e),e.name===r.BS&&(0,p.jG)()&&o.acquireTokenRedirect(d),u=null,e}finally{h&&h({customSuffix:(u?u.fromCache&&"cache":"error")||void 0}),u&&T.$e.addAuthRecord(I.g.acquireTokenSilent,"Success"),a.k.log(`dual-auth: acquireTokenSilent for scopes: ${e} was ${u?"SUCCESSFUL":"UNSUCCESSFUL"} accessTokenResult: ${JSON.stringify(u,null,4)}`)}return u}(g,e,n,i),d){if($.acquireTokenStatus=3,$.accessTokenResult1S=d,(0,m.tx)(d),!d.fromCache){const e=+new Date;(0,w.w0)("OSATExpMins",Math.floor((+d.expiresOn-e)/6e4))}f=d,(0,o.fW)((()=>E("Acquire",f)),"tryAcquire1SJwtCookies",(0,w.Z6)()),h&&(0,R.qs)(d.accessToken)}}catch(e){if(d=$.accessTokenResult1S=null,e.name===r.BS&&e.errorCode===r.w6&&t)return void($.acquireTokenStatus=2);$.acquireTokenStatus=1}var f;H.set(d);const y=function(e){if(!e)return null;const t=e&&e.extExpiresOn,n=t&&new Date(t),i=n&&n.getTime(),o=(new Date).getTime();let a;const s=6e4,c=1e3*(r.QL-r.Ic),d=1e3*r.Ic;i&&i>o?(a=i-o,a<=d&&(a=0)):a=c;return a+s}(d);y&&setTimeout((()=>K(e)),y)}async function Q(){if($.accessTokenResult1S)return $.accessTokenResult1S;if(!U){const e="Wait for 1SToken failed because auth flow was not started";return a.k.logError(`dual-auth:  ${e} -- so returning early without the 1S access token`),T.$e.addAuthRecord(I.g.waitFor1SToken,e),(0,A.h)(c.YHd,e),void H.set(null)}const e=(0,w.Yb)("Wait1SToken"),t=await(0,o.fW)((()=>H.getResultAsync()),"waitFor1SToken",(0,w.Z6)());return e(),t}function J(){const{currentAccountInfo:e}=$;if(e)return(0,v.lx)(e);const t=(0,g.x6)();return t?t.account_type:void 0}function X(){return"AAD"===(0,v.lx)($.currentAccountInfo)?$.currentAccountInfo.tenantId:""}function Y(){return $&&$.currentAccountInfo&&$.currentAccountInfo.idTokenClaims.puid}function Z(){return $&&$.currentAccountInfo&&$.currentAccountInfo.idTokenClaims.ageGroup}async function ee(e){(0,S.Oo)();const{loginHint:t,forceLoginPrompt:n,tenantOptions:i,redirectStartPage:o}=e||{},a=B||await(0,S.Yu)({tenantOptions:i});if(!a)return;const s=n?"login":"select_account",c={...(0,S.qW)(),prompt:s},{tenantScope:d,tenantId:u}=i||{},l=!(!t||!d&&!u);l&&Object.assign(c,{prompt:void 0,loginHint:t,extraQueryParameters:{domain_hint:"MSA"===d||u===r.bc?"consumers":"organizations"}}),o&&(c.redirectStartPage=o),T.$e.addAuthRecord(I.g.interactiveLogin,"Redirect start"+(l?" with login hint":"")),await a.loginRedirect(c)}async function te(e){(0,S.Oo)();const t=B||await(0,S.Yu)();if(!t)return;const n=e?await(0,v.RH)(e):$.currentAccountInfo;(0,v.sm)();n?.tenantId!==r.bc&&(0,R.DW)();const i=(0,v.Df)(n),o=(0,S.Xi)(n,i);(0,y.G)().supported?((0,p.C8)(),T.$e.addAuthRecord(I.g.logout,"Redirect start"),await t.logoutRedirect(o)):await t.logoutPopup(o)}async function ne(e,t,n){let i,r=n,o=!1;return(0,M.N)()&&(location.search.includes(`${t}NoTimeout`)?r=999999999:location.search.includes(`${t}ForceDelay`)?(e=()=>(0,u.Kb)(1e4).then(e),r+=2e4):location.search.includes(`${t}ForceTimeout`)?(r=0,o=!0):n<0&&(r=-1)),r<0?await e():(await Promise.race([e().then((e=>i=e)),(0,u.Kb)(r).then((()=>Promise.reject(new Error(`Operation ${t} timed out after ${r}ms`))))]),o?void 0:i)}},26448:function(e,t,n){n.d(t,{DW:function(){return m},Tt:function(){return y},qs:function(){return f}});var i,r=n(43852),o=n(33779),a=n(5302),s=n(7677),c=n(45949),d=n(98130),u=n(28123),l=n(5884),p=n(93483),h=n(19625),g=n(11591);function f(e,t=!0){return(0,r.fW)((()=>v("Acquire",e,t)),"tryAcquire1SWorkIdCookies",(0,g.Z6)())}function m(){return(0,r.fW)((()=>v("Delete")),"tryDelete1SWorkIdCookies",(0,g.Z6)())}async function y(){return(0,r.fW)((()=>v("Reset")),"tryReset1SWidCookies",(0,g.Z6)())}async function v(e,t,n=!0){const i="Reset"===e,r="Acquire"===e||i,g=r?"GET":"DELETE",f=(0,c.E)(),m=`https://api.msn.${d.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/${i?"wid":"AAD"}`;let y=null,v=null;try{const o=new URL(m);o.searchParams.append("apikey",d.jG.OneServiceApiKey),o.searchParams.append("ocid",p.GL),o.searchParams.append("activityId",d.jG.ActivityId),o.searchParams.append("it",f),i&&o.searchParams.append("reset","true");const a={method:g,credentials:"include",headers:(0,u.me)(t)||void 0};y=await fetch(o.toString(),a);const s=f===c.M.Web?l.yz:l.og;if(n){const t=!!(0,h.ej)(s);(r&&!t||!r&&t)&&(v=new Error(`${r?"Expected":"Unexpected"} cookie ${s} is ${r?"missing":"still present"} after ${e} 1S call to ${m} with status ${y.status}`))}}catch(e){v=e}return!v&&y&&y.ok?200===y.status:((0,o.H)(a.FTS,`Error in ${e} mode for API call ${m}. ${v?.message||""}`,v?(0,s.n)(v):void 0),!1)}!function(e){e.Acquire="Acquire",e.Delete="Delete",e.Reset="Reset"}(i||(i={}))},32830:function(e,t,n){var i;n.d(t,{cN:function(){return o},cq:function(){return r},pb:function(){return i}}),function(e){e[e.Immediately=0]="Immediately",e[e.OnPageLoad=1]="OnPageLoad",e[e.OnUserInteraction=2]="OnUserInteraction",e[e.OnBusinessSearchResultsReady=3]="OnBusinessSearchResultsReady"}(i||(i={}));const r="Search-AutoSuggest",o="q"},89094:function(e,t,n){n.d(t,{fF:function(){return f}});var i=n(32830),r=n(98130),o=n(28951),a=n(13218),s=n(21215),c=n(22680),d=n(19625),u=n(85663);class l{static#e=this.cookieCrumb="AS";static#t=this.globalObjectName="sa_inst";static#n=this.cookieName="SRCHHPGUSR";static#i=this.sharedCookieName="_SS";static#r=this.cookieDomain="msn.com";constructor(e,t,n,i,r){this.autoSuggestProperties=e,this.osMarket=t,this.osLanguage=n,this.requestId=i,this.isDarkMode=r}addAutoSuggest(e){if(!(0,s.N)())return!1;if(r.jG.CurrentRequestTargetScope&&"kids"===r.jG.CurrentRequestTargetScope.audienceMode)return!1;const t=this.isDisabled(),n=window[l.globalObjectName];if(n)return n.enable(!t),this.updateAutoSuggestSessionId(),!0;if(t)return!1;const i=this.getCompleteUrl(),o=(0,c.b0)(i,void 0,!0,"use-credentials");o.onload=e;return document.getElementsByTagName("head")[0].appendChild(o),!0}invokeCookieSharing(){p((0,d.ej)(l.sharedCookieName),5)||(0,d.sq)(l.sharedCookieName,"SID=00",365,l.cookieDomain,"/")}isDisabled(){return new RegExp("\\b"+l.cookieCrumb+"=0\\b","i").test((0,d.ej)(l.cookieName))}updateAutoSuggestSessionId(){const e=/SID=[\da-z]+/i;if(!this.partnerSessionId){const t=(0,d.ej)(l.sharedCookieName);if(p(t,4)){const n=t.match(e);n&&p(n[0],5)&&(this.partnerSessionId=n[0].substr(4))}}const t=window[l.globalObjectName];if(t){const e=t["sid"];"function"==typeof e&&e(this.partnerSessionId)}}getCompleteUrl(){let e="";const t=o.cX.getParamsFromUrl(location.search);return t.find((e=>"autosuggest_hook"===e.key))?this.getHookUrl(t):(e=this.autoSuggestProperties.useMarketBasedUrl?this.getMarketBasedUrl():this.getUrl(),this.shouldInitializeAutoSuggestOnPageLoad()&&(e+="&onload=1"),this.isDarkMode&&(e+="&rt=1"),(0,u.isNullOrUndefined)(this.autoSuggestProperties.zeroInputItemCount)||(e+=`&zict=${this.autoSuggestProperties.zeroInputItemCount}`),this.autoSuggestProperties.disableSearchHistory&&(e+="&shdis=1"),(0,u.isNullOrUndefined)(this.autoSuggestProperties.maxItemCount)||(e+=`&itemCount=${this.autoSuggestProperties.maxItemCount}`),e)}shouldInitializeAutoSuggestOnPageLoad(){return this.autoSuggestProperties.delayBind===i.pb.Immediately||this.autoSuggestProperties.delayBind===i.pb.OnPageLoad||this.autoSuggestProperties.delayBind===i.pb.OnBusinessSearchResultsReady&&this.autoSuggestProperties.businessSearchResultsEnabled}getMarketBasedUrl(){const e=this.osMarket||"US",t=this.osLanguage||"en-US",n=this.autoSuggestProperties.partnerEndpoint||"msnedgentp",i=(0,a.nP)().Locale;let r=["https","://www.bing.com/as/init?","pt="+n,this.osLanguage?"&setlang="+t:"",this.osMarket?"&cc="+e:"","&refig="+this.requestId].join("");return"en-us"!==t.toLowerCase()&&(r+="&endpt=1"),r+=this.getFeatures(),r+=this.autoSuggestProperties.businessSearchResultsEnabled?"&msbqf=true":"&msbqf=false",this.autoSuggestProperties.disableSuggestionFetchOnEmpty&&i&&"en-us"!==i.toLowerCase()&&(r+="&dfoe=1"),r+=this.getAutosuggestWCMobile(),r}getHookUrl(e){const t="muidflt9-ismsft",n=(0,a.nP)().CurrentFlights,i=e.find((e=>"fdhead"===e.key)),r=i?i.value:"",o=e.find((e=>"asinturl"===e.key)),s=o&&o.value;if((n.indexOf(t)>-1||r.indexOf(t)>-1)&&s){return decodeURIComponent(s)}return this.getUrl()}getUrl(){const e=(0,a.nP)().Locale||"en-us";let t=["https","://www.bing.com/as/init?mkt=",e,"&pt=",this.autoSuggestProperties.partnerEndpoint,"&refig=",this.requestId].join("");return this.autoSuggestProperties.enableNewSnrUrl||"en-us"===e.toLowerCase()||(t+="&endpt=1"),t+=this.getAutosuggestWCMobile(),t}getFeatures(){return this.autoSuggestProperties.enableFeatures&&(this.autoSuggestProperties.features||""===this.autoSuggestProperties.features)?"&features="+this.autoSuggestProperties.features:""}getAutosuggestWCMobile(){return this.autoSuggestProperties.enableAutoSuggestforWCMobile?"&asrt=1":""}}function p(e,t){return"string"==typeof e&&(!t||e.length>=t)}var h=n(16243),g=n(81586);function f(e){if(!e||e.disableAutoSuggest)return;const{autoSuggestProperties:t,requestId:n,isDarkMode:r,searchBoxContext:o,startPerfMarkerHandler:a}=e,{osMarket:s,osLanguage:c,useMarketBasedUrl:d,delayBind:u,businessSearchResultsEnabled:p,cookieSharingDelayInSeconds:h}=t,g=new l(t,d&&s,d&&c,n,r);if(u===i.pb.OnUserInteraction||u===i.pb.OnBusinessSearchResultsReady&&!p){o.autoSuggestEventHandler=m.bind(o,g),o.registerAutoSuggestOnSearchEventHandler=y.bind(o,e);const t=S(o.inputRef);t?.addEventListener("keyup",o.autoSuggestEventHandler),t?.addEventListener("click",o.autoSuggestEventHandler)}else u!==i.pb.Immediately&&u!==i.pb.OnPageLoad&&u!==i.pb.OnBusinessSearchResultsReady||(a&&a(i.cq),o.registerAutoSuggestOnSearchEventHandler=y.bind(o,e),g.addAutoSuggest(o.registerAutoSuggestOnSearchEventHandler));1===h&&g.invokeCookieSharing()}function m(e,t){if("keyup"===t.type){const e=t.key;if("Tab"===e||"Escape"===e)return}if(e.addAutoSuggest(this.registerAutoSuggestOnSearchEventHandler)){const e=S(this.inputRef);e.removeEventListener("click",this.autoSuggestEventHandler),e.removeEventListener("keyup",this.autoSuggestEventHandler)}}function y(e){const{autoSuggestProperties:t,endPerfMarkerHandler:n,searchBoxContext:o,searchOpenInNewWindow:a,action:c,telemetryCallback:d,enableDetailLogs:u,suggestionClickCallback:l}=e,{delayBind:p}=t;if(p!==i.pb.OnUserInteraction&&p!==i.pb.OnPageLoad&&p!==i.pb.OnBusinessSearchResultsReady||n&&n(i.cq),a)return;const f=window.sj_evt,m=f&&f.fire;m&&(f.fire=function(...e){const[t,n]=e||[];if("AS.Navigate"===t){if(!n)return;const e=S(o.formRef);if(e&&e.attributes&&e.attributes["data-t"]){let t=h.u.get(e);if(!t&&(0,s.N)()&&(window.dispatchEvent(new CustomEvent("telemetrynodeadded",{detail:{element:e}})),t=h.u.get(e)),t.contract.content.type=function(e){if(!e)return g.uH.Undefined;const t=e.toLowerCase();if("hs"===t)return g.uH.SearchHistory;if("pn"===t)return g.uH.TrendingSearch;return g.uH.AutoSuggestSearch}(n.stype),u&&!0===u){const e=n.query??"";if((0,r.Yq)().isAadAccountUser){if(c&&c.startsWith("https://www.bing.com/")){let e=c;const i=n.stype??"",r=new URL(e);r.searchParams.set("astycn",i.toString()),r.searchParams.set("qltype","ccaad"),e=r.href.toString(),t.contract.overrideDestinationUrl=e}}else{let i="";if(n.url&&n.url.length>0&&n.url.startsWith("http")?i=n.url.toString():c&&c.startsWith("https://www.bing.com/")&&(i=c),i&&i.length>0){const n=new URL(i);n.searchParams.set("assgl",e.length.toString()),n.searchParams.set("qltype","ccnotaad"),n.searchParams.set("q",""),i=n.href.toString(),t.contract.overrideDestinationUrl=i}}}h.u.setAttribute(e,t.contract)}}"onSearch"===t&&(o.onAutoSuggestSuggestionClickHandler=v.bind(o,c,d,u,l),o.onAutoSuggestSuggestionClickHandler()),m.apply(o,e)})}function v(e,t,n,i){let r=e;const o=S(this.formRef);if(r){const e=(-1!==r.indexOf("?")?"&":"?")+"msnst=AS";if(r+=e,o.attributes&&o.attributes["data-t"]){const e=h.u.get(o);if(n&&!0===n){const t=e.contract.overrideDestinationUrl;if(t&&t.length>0){const e=(-1!==t.indexOf("?")?"&":"?")+"msnst=AS";r=t+e}}e.contract.overrideDestinationUrl=r,h.u.setAttribute(o,e.contract)}}t(o,g.Aw.Submit,g.wu.TextSearch),i?.()}function S(e){return e&&e.current?e.current:e}},79089:function(e,t,n){n.d(t,{AZ:function(){return i},Gb:function(){return a},hv:function(){return c},rM:function(){return s},vM:function(){return r},wI:function(){return o}});const i="background_setting_preferences",r="ntp.background_image";var o;!function(e){e.changeBackgroundDaily="changeBackgroundDaily",e.selectedVideoSetting="selectedVideoSetting",e.backgroundSelectionMetadata="backgroundSelectionMetadata"}(o||(o={}));const a=850,s=new Map([["BrowserLocal","custom"],["Iris","bing"],["Theme","theme"],["Video","imageAndVideo"],["CMSImage","imageAndVideo"]]),c=new Map([["imageAndVideo",["Video","CMSImage","Iris"]],["bing",["Iris"]],["custom",["BrowserLocal"]],["theme",["Theme"]]])},41281:function(e,t,n){n.d(t,{D:function(){return a},f:function(){return o}});var i=n(52185),r=n(24709);class o{static#e=this.backgroundDataStateLoadedKey=Symbol("backgroundDataStateLoaded");static get backgroundDataStateLoaded(){return i.Gq.get(this.backgroundDataStateLoadedKey,(()=>new r.C("backgroundDataStateLoaded")))}static set backgroundDataStateLoaded(e){i.Gq.set(this.backgroundDataStateLoadedKey,e)}static#t=this.hotSpotsDisplayStatusUpdatedKey=Symbol("hotSpotsDisplayStatusUpdated");static get hotSpotsDisplayStatusUpdated(){return i.Gq.get(this.hotSpotsDisplayStatusUpdatedKey,(()=>new r.C("hotSpotsDisplayStatusUpdated")))}static set hotSpotsDisplayStatusUpdated(e){i.Gq.set(this.hotSpotsDisplayStatusUpdatedKey,e)}static#n=this.irisImageUpdatedKey=Symbol("irisImageUpdated");static get irisImageUpdated(){return i.Gq.get(this.irisImageUpdatedKey,(()=>new r.C("irisImageUpdated")))}static set irisImageUpdated(e){i.Gq.set(this.irisImageUpdatedKey,e)}static#i=this.refreshBackgroundMetadataKey=Symbol("refreshBackgroundMetadata");static get refreshBackgroundMetadata(){return i.Gq.get(this.refreshBackgroundMetadataKey,(()=>new r.C("refreshBackgroundMetadata")))}static set refreshBackgroundMetadata(e){i.Gq.set(this.refreshBackgroundMetadataKey,e)}static#r=this.updateBackgroundGalleryDisplayedKey=Symbol("updateBackgroundGalleryDisplayed");static get updateBackgroundGalleryDisplayed(){return i.Gq.get(this.updateBackgroundGalleryDisplayedKey,(()=>new r.C("updateBackgroundGalleryDisplayed")))}static set updateBackgroundGalleryDisplayed(e){i.Gq.set(this.updateBackgroundGalleryDisplayedKey,e)}static#o=this.updateGallerySelectedBackgroundKey=Symbol("updateGallerySelectedBackground");static get updateGallerySelectedBackground(){return i.Gq.get(this.updateGallerySelectedBackgroundKey,(()=>new r.C("updateGallerySelectedBackground")))}static set updateGallerySelectedBackground(e){i.Gq.set(this.updateGallerySelectedBackgroundKey,e)}static#a=this.updateSelectionInGalleryKey=Symbol("updateSelectionInGallery");static get updateSelectionInGallery(){return i.Gq.get(this.updateSelectionInGalleryKey,(()=>new r.C("updateSelectionInGallery")))}static set updateSelectionInGallery(e){i.Gq.set(this.updateSelectionInGalleryKey,e)}static#s=this.videoSettingsUpdatedKey=Symbol("videoSettingsUpdated");static get videoSettingsUpdated(){return i.Gq.get(this.videoSettingsUpdatedKey,(()=>new r.C("videoSettingsUpdated")))}static set videoSettingsUpdated(e){i.Gq.set(this.videoSettingsUpdatedKey,e)}static#c=this.updateEventGleamKey=Symbol("updateEventGleam");static get updateEventGleam(){return i.Gq.get(this.updateEventGleamKey,(()=>new r.C("updateEventGleam")))}static set updateEventGleam(e){i.Gq.set(this.updateEventGleamKey,e)}}function a(){o.backgroundDataStateLoaded.unregisterObservers(),o.hotSpotsDisplayStatusUpdated.unregisterObservers(),o.irisImageUpdated.unregisterObservers(),o.refreshBackgroundMetadata.unregisterObservers(),o.updateBackgroundGalleryDisplayed.unregisterObservers(),o.updateGallerySelectedBackground.unregisterObservers(),o.videoSettingsUpdated.unregisterObservers(),o.updateEventGleam.unregisterObservers()}},1758:function(e,t,n){n.d(t,{z:function(){return p}});var i,r=n(79089);!function(e){e.backgroundImageType="backgroundImageType",e.backgroundImage="backgroundImage",e.backgroundSettingPreferences="backgroundSettingPreferences",e.irisPreferences="irisPreferences"}(i||(i={}));const o=new Set(["Video","CMSImage"]);var a=n(16495),s=n(41281),c=n(30666),d=n(37878),u=n(21215),l=n(16614);class p extends c.e{get backgroundSettingPreferencesState(){return this._backgroundSettingPreferencesState?JSON.parse(this._backgroundSettingPreferencesState):null}set backgroundSettingPreferencesState(e){this._backgroundSettingPreferencesState=e?JSON.stringify(e):null}constructor(e,t,n,i,o,a,s){super(e,t,n,i,o,a,s),this._backgroundSettingPreferencesState=null,this.config&&!this.config.disableBackgroundGallery&&(this.settingsAPI=(0,u.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate,this.initializePreferences(r.AZ,"backgroundSettingPreferencesState"),this.initializeIrisSurfaceInfoPreferences(),this.registerOnPrefsChangeCallback())}hotSpotsDisplayStatusUpdated(e){s.f?.hotSpotsDisplayStatusUpdated?.getActionSender(this)?.send(e)}updateBackgroundGalleryDisplayed(e){s.f?.updateBackgroundGalleryDisplayed?.getActionSender(this)?.send(e)}updateGallerySelectedBackground(e){s.f?.updateGallerySelectedBackground?.getActionSender(this)?.send(e)}videoSettingsUpdated(e){s.f?.videoSettingsUpdated?.getActionSender(this)?.send(e)}updateEventGleam(e){s.f?.updateEventGleam?.getActionSender(this)?.send(e)}async initializePreferences(e,t){if(!await this.isNurturingApiAvailable())return;const n=await a.U.getPreferenceSetting(e,!0);this[t]=n&&n.value}async initializeIrisSurfaceInfoPreferences(){if(!await this.isNurturingApiAvailable())return;const e=await a.U.getPreferenceSetting("campaigns");if(!e||!e.value||e.value.length<=0)return;const t=e.value;this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(t)}async registerOnPrefsChangeCallback(){this.settingsAPI&&this.settingsAPI.onPrefsChanged.addListener((async e=>{const t=e[0],n=this.getModifiedPreference(t);if(n)if(n===i.backgroundSettingPreferences){const e=t.value,n=this.getPreferenceKeyIndex(e,"background_setting_preferences");if(n<0)return;const i=this.backgroundSettingPreferencesState;if(this.backgroundSettingPreferencesState=e[n].value,d.p.setBackgroundSettingsPreferencesCache(this.backgroundSettingPreferencesState),!i||!this.backgroundSettingPreferencesState)return;const r=i.backgroundSelectionMetadata,a=this.backgroundSettingPreferencesState.backgroundSelectionMetadata;if(!d.p.getShouldRerender())return void d.p.setShouldRerender(!0);i.selectedVideoSetting!==this.backgroundSettingPreferencesState.selectedVideoSetting?(s.f.videoSettingsUpdated.getActionSender(this)?.send(this.backgroundSettingPreferencesState.selectedVideoSetting),s.f.refreshBackgroundMetadata.getActionSender(this)?.send()):!r&&a?s.f.updateGallerySelectedBackground.getActionSender(this)?.send(a):r&&!a?(s.f.refreshBackgroundMetadata.getActionSender(this)?.send(),s.f.updateSelectionInGallery.getActionSender(this)?.send()):r&&a&&!(0,l.Z)(r,a)&&(r.provider===a.provider||o.has(r.provider)&&o.has(a.provider))&&s.f.updateGallerySelectedBackground.getActionSender(this)?.send(a)}else if(n===i.irisPreferences){const e=t.value,n=this.getPreferenceKeyIndex(e,"campaigns");if(n<0)return;const i=this.irisBackgroundSurfaceInfo,r=e[n].value;if(this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(r),!i||!this.irisBackgroundSurfaceInfo)return;i.currentCreativeId!==this.irisBackgroundSurfaceInfo.currentCreativeId&&s.f.refreshBackgroundMetadata.getActionSender(this)?.send()}}))}getIrisBackgroundSurfaceInfo(e){if(e&&!(e.length<=0))return e.find((e=>"88000244"===e.placement))||void 0}getModifiedPreference(e){if("ntp.background_image_type"===e.key)return i.backgroundImageType;if("ntp.user_nurturing"===e.key){const t=e.value,n=this.getPreferenceByKey(t,r.AZ);if(!(0,l.Z)(this.backgroundSettingPreferencesState,n))return i.backgroundSettingPreferences}}getPreferenceByKey(e,t){const n=this.getPreferenceKeyIndex(e,t);return n>-1?e[n].value:{}}getPreferenceKeyIndex(e,t){return e.findIndex((e=>e.key===t))}async isNurturingApiAvailable(){return a.U.isApiAvailableToUse()}}},70084:function(e,t,n){n.d(t,{L:function(){return o}});var i=n(38947),r=n(41281);class o{reduce(e,t){if(!e)return{backgroundGalleryDisplayed:!1};if(!t)return e;let n;return i.G.handleAction(t,r.f.backgroundDataStateLoaded,(t=>{n={...e,...t}})),i.G.handleAction(t,r.f.updateBackgroundGalleryDisplayed,(t=>{n={...e,backgroundGalleryDisplayed:t}})),i.G.handleAction(t,r.f.updateGallerySelectedBackground,(t=>{n={...e,backgroundSelectionMetadata:t}})),i.G.handleAction(t,r.f.hotSpotsDisplayStatusUpdated,(t=>{n={...e,shouldRenderHotSpots:t}})),i.G.handleAction(t,r.f.videoSettingsUpdated,(t=>{n={...e,selectedVideoSetting:t}})),i.G.handleAction(t,r.f.updateEventGleam,(t=>{n={...e,eventGleam:t}})),n||e}}},80910:function(e,t,n){n.r(t),n.d(t,{BackgroundDataActions:function(){return i.f},BackgroundDataConnector:function(){return r.z},BackgroundDataReducer:function(){return o.L},ToolingInfo:function(){return a},resetBackgroundDataActions:function(){return i.D}});var i=n(41281),r=n(1758),o=n(70084);const a={experienceConfigSchema:{}}},89268:function(e,t,n){n.d(t,{OQ:function(){return o},Xt:function(){return r},ff:function(){return a}});var i=n(80287);function r(e){let t=null;const n=e?.ntpTheme?.backgroundColorRgba;if(!n||n.length<4)return null;const r={r:n[0],g:n[1],b:n[2],a:n[3]};return t=i.g.rgbNumberToCssHexColor(i.g.parsedColorToNumber(r)),t}function o(e,t){if(!e)return null;if(!e.includes("edge_background.jpg"))return e;const n="edge_background.jpg?ts="+(t?.customBackgroundImageInfo?.timestamp||"");return e.replaceAll("edge_background.jpg",n)}function a(e,t){if(!e)return null;const n=e.match(/\(([^()]+)\)/g);if(!n.length)return null;return o(n[0].slice(1,-1),t)}},78170:function(e,t,n){n.d(t,{Er:function(){return s},IG:function(){return r},Th:function(){return o},fZ:function(){return i}});const i="background_gallery_open_event",r="galleryToastCooldowns",o=new Set(["overlay","positioning-region"]);var a;!function(e){e.reducedMotion="reducedMotion"}(a||(a={}));new Map([["imageAndVideo",["Video","CMSImage","Iris"]],["bing",["Iris"]],["custom",["BrowserLocal"]],["theme",["Theme"]]]);const s={backgroundSelectionMetadata:{appliedTimestamp:1721339696654,configIndex:"24",provider:"CMSImage"},changeBackgroundDaily:!1,selectedVideoSetting:"balanced"}},32045:function(e,t,n){n.d(t,{k:function(){return l}});var i=n(33779),r=n(5302),o=n(43301),a=n(52),s=n(91734),c=n(95603),d=n(523),u=n(82928);const l=new class{get chromiumPageSettingsConnector(){return this._chromiumPageSettingsConnector||(this._chromiumPageSettingsConnector=(0,u.K0)(d.RL)),this._chromiumPageSettingsConnector}setLayoutFromPreset(e){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the setLayoutFromPreset method");const t=this.chromiumPageSettingsConnector.getCurrentState(),n=(0,o.j)(t.selectedFeedDisplaySetting,e,t.greetingEnabled,t.hideDefaultTopSites);if(t.currentLayout!==n){let e;if("custom"!==n){const i=a.Wi[n];e={currentBackgroundImageType:i.current_background_image_type,originalLayout:t.currentLayout,currentLayout:n,greetingEnabled:i.greeting,imageOfTheDayEnabled:"off"!==i.current_background_image_type,hideDefaultTopSites:i.hide_promoted_links,selectedFeedDisplaySetting:i.feeds_position}}else{const t=this.chromiumPageSettingsConnector.getCurrentState();e={...t,originalLayout:t.currentLayout,currentLayout:n}}this.chromiumPageSettingsConnector.updateLayout(e),(0,s.qi)(c.nc.layout_mode,a.Uq[e.currentLayout])}}updateLayoutAndBackgroundImageType(e,t){this.chromiumPageSettingsConnector?(t?this.updateToCustomLayoutMode():this.setLayoutFromPreset(e),this.chromiumPageSettingsConnector.updateBackgroundImageType(e)):(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateLayoutAndBackgroundImageType method")}updateToCustomLayoutMode(){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateToCustomLayoutMode method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t={...e,originalLayout:e.currentLayout,currentLayout:"custom"};this.chromiumPageSettingsConnector.updateLayout(t),(0,s.qi)(c.nc.layout_mode,a.Uq[t.currentLayout])}isImageOfTheDayDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isImageOfTheDayDisabled method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.backgroundImageTypePolicy&&(3===e.backgroundImageTypePolicy||1===e.backgroundImageTypePolicy);return void 0!==t&&0!==t&&t}isCustomImageDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isCustomImageDisabled method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.backgroundImageTypePolicy&&(3===e.backgroundImageTypePolicy||2===e.backgroundImageTypePolicy);return void 0!==t&&0!==t&&t}}},37878:function(e,t,n){n.d(t,{p:function(){return w}});var i=n(79089),r=n(42122),o=n(5302),a=n(52185),s=n(21215),c=n(22680),d=n(81489),u=n(78170),l=n(15598),p=n(28951),h=n(16495),g=n(26156),f=n(523),m=n(44132),y=n(32045),v=n(82928);class S{constructor(){this.hasSimpleImages=!1,this.dailyRotationOnlySimpleImages=!1,this.shouldRerender=!0,this.stateInited=!1,this.simpleBkgdKey="simpleBkgd",this.useDefaultBackground=!1,this.enableAbstractImageFlight=!1}static getInstance(){return a.Gq.get("__BackgroundStorageHelper__",(()=>new S))}async initState(e,{disableGalleryFREAndLowEnd:t}={}){if(!(0,s.N)())return;if(this.stateInited)return;this.stateInited=!0,void 0===this.enableGallerySettingOnLowend&&(this.enableGallerySettingOnLowend=!t);if(await this.getBackgroundGalleryEligibilityAsync()){const t=(0,v.K0)(f.RL);if(!t)return;const n=await t.getPageSettingsStateAsync();await this.initialBackgroundPSLSetup(n);(0,l.$o)().getItem("clean_meta_flag")||((0,l.$o)().setItem("clean_meta_flag","1"),"focused"===n.currentLayout&&await this.resetAppliedBackgroundAndToggleStorage(n.currentLayout));const i=await this.checkAndRemoveApplicableBackgrounds(!1,n),r=await this.getBackgroundPreferences();if(r){const t={backgroundGalleryDisplayed:!1,selectedVideoSetting:r.selectedVideoSetting,backgroundSelectionMetadata:r.backgroundSelectionMetadata};e?.send(t);const o=y.k.isImageOfTheDayDisabled(),a=y.k.isCustomImageDisabled();if(await this.resetGalleryStorageForPolicyCompliance(r,o,a),o||a)return;i&&"off"!==n.currentBackgroundImageType&&this.updateLayoutBasedOnBackgroundType(r)}}}async getBackgroundGalleryEligibilityAsync(){const e=this.shouldDisableGalleryFeature(),t=await h.U.isApiAvailableToUse(),n=(0,g.I9)();return this.isEligibleForTreatment=t&&(!n||Boolean(this.enableGallerySettingOnLowend))&&!e,this.isEligibleForTreatment}getBackgroundGalleryEligibility(){return!!this.isVPTest()||this.isEligibleForTreatment}setBackgroundSettingsPreferencesCache(e){this.backgroundSettingsPreferences=e}getBackgroundSettingsPreferencesCache(){return this.backgroundSettingsPreferences}getPreferenceByKeyFromFromPreferencesCache(e){const t=this.backgroundSettingsPreferences;return t?t[e]:void 0}setCurrentBackgroundPreferenceCache(e){this.currentBackgroundMetadata=e}getCurrentBackgroundPreferenceCache(){return this.currentBackgroundMetadata}setDefaultBackground(e){this.useDefaultBackground=e}getDefaultBackground(){return this.useDefaultBackground}getShouldRerender(){return this.shouldRerender}setShouldRerender(e){this.shouldRerender=e}setSimpleImagesandCMSSize(e,t){this.hasSimpleImages=e,this.cmsImageSize=t-1}setAbstractImageStartIndex(e){this.enableAbstractImageFlight=!0,this.abstractImageIndexStart=e}getCMSImageSize(){return this.cmsImageSize}getAbstractImageStartIndex(){return this.abstractImageIndexStart}async getBackgroundPreferences(){return h.U.getPreferenceSetting(i.AZ,!0).then((e=>{const t=e&&e.value;if(t)return this.setBackgroundSettingsPreferencesCache(t),t;r.k.logError(`PSL: Preferences API does not have ${i.AZ}.`)})).catch((e=>{r.k.logError(`Exception ${e} occurred storing background setting preferences in persistent storage layer`)}))}async getBackgroundPreferenceByKey(e){return h.U.getPreferenceSetting(i.AZ,!0).then((t=>{const n=t&&t.value;if(n)return n[e];r.k.logError(`PSL: Preferences API does not have ${i.AZ}.`)})).catch((e=>{r.k.logError(`Exception ${e} occurred getting background setting preference by key in persistent storage layer`)}))}async setBackgroundPreferences(e){return h.U.savePreferenceSetting(i.AZ,e).then((t=>(t&&this.setBackgroundSettingsPreferencesCache(e),t))).catch((t=>(r.k.logError(`Exception ${t} occurred storing background settings preferences: ${e} in persistent storage layer`),!1)))}async setBackgroundPreferenceByKey(e,t){const n=await h.U.getPreferenceSetting(i.AZ,!0).catch((e=>(r.k.logError(`Exception ${e} occurred getting background settings preferences in persistent storage layer`),this.getNurturingErrorObject())));let o=n&&n.value;return o!==this.getNurturingErrorObject()&&(o||(o={key:i.AZ,value:{}}),e==i.wI.backgroundSelectionMetadata&&(o[i.wI.changeBackgroundDaily]=!1),o[e]=t,h.U.savePreferenceSetting(i.AZ,o).then((e=>(e&&this.setBackgroundSettingsPreferencesCache(o),e))).catch((n=>(r.k.logError(`Exception ${n} occurred storing background preference ${e} and value ${t} in persistent storage layer`),!1))))}async getCurrentBackgroundMetadata(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(e&&e.getPref)return new Promise((t=>{e.getPref(i.vM,(function(e){t(e?.value)}))}))}setCurrentBackgroundMetadata(e){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;return!(!t||!t.getPref)&&(t.setPref(i.vM,e),this.setCurrentBackgroundPreferenceCache(e),!0)}setSSRBackgroundMetadata(e){this.ssrBackgroundMetadata=e}async checkAndRemoveApplicableBackgrounds(e,t,n){const i=await this.getBackgroundPreferences();if(!i)return!1;const r=this.overrideCacheAging(),o=i.changeBackgroundDaily||r||e,a=i.backgroundSelectionMetadata;if(!a)return!1;let s=-1;return r||n||(s=a.appliedTimestamp?a.appliedTimestamp+864e5:-1),!!(o&&s<Date.now())&&this.clearCachedBackground(i)}getBackgroundImageTypeFromSettings(e){return this.backgroundSettingsPreferences&&this.backgroundSettingsPreferences.backgroundSelectionMetadata?this.getProviderBackgroundType(this.backgroundSettingsPreferences.backgroundSelectionMetadata.provider):e?"off":"imageAndVideo"}async initialBackgroundPSLSetup(e){if(await this.getBackgroundPreferences())return;if(!e)return;const t=this.createInitialStateFromChromiumPageSettings(e);if(!t)return void m.M0.sendAppErrorEvent({...o.tvG,message:"Initial state for background gallery is undefined",pb:{...o.tvG.pb,customMessage:`Initial state for background gallery is undefined. Current BackgroundImageType: ${e.currentBackgroundImageType}`}});await this.setBackgroundPreferences(t)&&this.setBackgroundSettingsPreferencesCache(t)}createInitialStateFromChromiumPageSettings(e){switch(e.currentBackgroundImageType){case"off":case"custom":case"theme":return this.createInitialState(!1);case"bing":case"imageAndVideo":return this.createInitialState(!0);default:return}}createInitialState(e){return{changeBackgroundDaily:e,selectedVideoSetting:this.shouldUseEnergySaverMode()?"energySaver":"balanced"}}shouldUseEnergySaverMode(){const e=window&&window.navigator;if(!e)return!0;const t=e?e.deviceMemory:-1;return!("4g"===e.connection.effectiveType)||!(t>=4)}getProviderBackgroundType(e){switch(e){case"BrowserLocal":return"custom";case"FREBackground":case"Iris":default:return"bing";case"Theme":return"theme";case"Video":case"CMSImage":return"imageAndVideo"}}async backgroundSelectionSet(){return!!await this.getBackgroundPreferenceByKey(i.wI.backgroundSelectionMetadata)}overrideCacheAging(){return"true"===p.cX.getQueryParameterByName("ageOutGalleryCache",(0,c.zp)())}async handleRotationToggling(e,t){return!!this.backgroundSettingsPreferences&&(e?(this.isCurrentAndCachedBackgroundIdentical(t.selectedFeedDisplaySetting)&&this.setShouldRerender(!1),this.checkAndRemoveApplicableBackgrounds(!0,t,!0)):!!this.backgroundSettingsPreferences.backgroundSelectionMetadata||this.getActiveBackgroundSelectionMetadata(t).then((e=>!!e&&(this.setShouldRerender(!1),this.setBackgroundPreferenceByKey(i.wI.backgroundSelectionMetadata,e)))).catch((e=>!1)))}isCurrentAndCachedBackgroundIdentical(e){const t=this.getVideoBackgroundProviderInfo(e);if(!t||!this.backgroundSettingsPreferences||!this.backgroundSettingsPreferences.backgroundSelectionMetadata)return!1;const n=this.backgroundSettingsPreferences.backgroundSelectionMetadata;return t.provider===n.provider&&t.configIndex===n.configIndex}async getActiveBackgroundSelectionMetadata(e){if(!e)return;if("off"===e.currentBackgroundImageType)return this.buildBackgroundSelectionMetadata("Off");let t=await this.getBackgroundPreferences();if(this.isVPTest()&&(t=u.Er),t){if(t.backgroundSelectionMetadata&&"theme"!==e.currentBackgroundImageType)return t.backgroundSelectionMetadata;if(this.useDefaultBackground)return this.buildBackgroundSelectionMetadata("CMSImage","0");switch(t.changeBackgroundDaily&&this.dailyRotationOnlySimpleImages&&"bing"===e.currentBackgroundImageType&&(e.currentBackgroundImageType="imageAndVideo"),e.currentBackgroundImageType){case"bing":case"imageAndVideo":default:return this.getVideoBackgroundProviderInfo(e.selectedFeedDisplaySetting);case"custom":return this.buildBackgroundSelectionMetadata("BrowserLocal");case"theme":return this.buildBackgroundSelectionMetadata("Theme")}}}isVideoScheduled(){const e=(0,l.$o)().getObject("bkgdV");if(!e)return-1;const t=(new Date).getDay();return e&&e.schedule&&-1!==e.schedule[t]?e.schedule[t]:-1}isVPTest(){const e=new URLSearchParams((0,c.zp)());return"vp"===e?.get("reqsrc")}simpleImageScheduled(){const e=(0,l.$o)().getObject("bkgdV");if(!e)return 0;const t=(new Date).getDay();return e&&e.simpleSchedule?e.simpleSchedule[t]:-1}getVideoBackgroundProviderInfo(e){let t=this.simpleImageScheduled();if(this.enableAbstractImageFlight&&"always"==e){const e=(new Date).getDay();t=this.abstractImageIndexStart+e}return this.ssrBackgroundMetadata&&this.ssrBackgroundMetadata.configIndex&&(t=this.ssrBackgroundMetadata.configIndex),this.buildBackgroundSelectionMetadata("CMSImage",t.toString())}buildBackgroundSelectionMetadata(e,t,n){return{provider:e,configIndex:t||"-1",appliedTimestamp:n||Date.now()}}async shouldOverrideLayoutToCustom(){const e=await this.getBackgroundPreferences();return!!e&&(!!e.backgroundSelectionMetadata||!e.changeBackgroundDaily)}shouldOverrideLayoutToCustomCache(){const e=this.getBackgroundSettingsPreferencesCache();return!!e&&(!!e.backgroundSelectionMetadata||!e.changeBackgroundDaily)}async resetAppliedBackgroundAndToggleStorage(e){if("informational"===e||"inspirational"===e||"focused"===e){const t=await this.getBackgroundPreferences();if(!t)return;if(delete t[i.wI.backgroundSelectionMetadata],"focused"===e)return void this.setBackgroundPreferences(t);t[i.wI.changeBackgroundDaily]=!0,this.setBackgroundPreferences(t)}}async resetGalleryStorageForPolicyCompliance(e,t,n){return t&&n?this.resetStorageForImagesOff(e):t?this.resetStorageForImageOfTheDayDisabled(e):!n||this.resetStorageForCustomImageDisabled(e)}async resetStorageForImagesOff(e){if(!e)return!1;const t={...e,changeBackgroundDaily:!1};return delete t[i.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)}async resetStorageForImageOfTheDayDisabled(e){if(!e)return!1;const t={...e,changeBackgroundDaily:!1},n=t.backgroundSelectionMetadata;return n&&"BrowserLocal"!==n.provider&&"Theme"!==n.provider&&delete t[i.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)}async resetStorageForCustomImageDisabled(e){if(!e)return!1;const t=e.backgroundSelectionMetadata;return!t||("Theme"===t.provider||"BrowserLocal"===t.provider?(delete e[i.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(e)):this.setBackgroundPreferences(e))}async clearCachedBackground(e){const t=e||await this.getBackgroundPreferences();return!!t&&(!t.backgroundSelectionMetadata||(delete t[i.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)))}setToastCooldown(e,t){let n=(0,l.$o)().getObject(u.IG);n||(n={reducedMotionNextAvailableTimestamp:0});const i=Date.now()+this.calculateToastCooldown(t);"reducedMotion"===e&&(n.reducedMotionNextAvailableTimestamp=Date.now()+i),(0,l.$o)().setObject(u.IG,n)}toastCooldownExpired(e){const t=(0,l.$o)().getObject(u.IG);return!t||"reducedMotion"===e&&t.reducedMotionNextAvailableTimestamp<Date.now()}calculateToastCooldown(e){return 864e5*e}getNurturingErrorObject(){return{key:i.AZ,value:{isError:!0}}}shouldDisableGalleryFeature(){return"true"===p.cX.getQueryParameterByName("disableBackgroundGallery",(0,c.zp)())}async updateLayoutBasedOnBackgroundType(e){if(!(e=e||await this.getBackgroundPreferences()))return;const t=this.getBackgroundImageTypeFromSettings();y.k.updateLayoutAndBackgroundImageType(t)}setDailyRotationOnlySimpleImages(e){this.dailyRotationOnlySimpleImages=e}getDailyRotationOnlySimpleImages(){return this.dailyRotationOnlySimpleImages}}const w=(0,d.h)(S)},11875:function(e,t,n){var i,r;n.d(t,{O:function(){return i},U:function(){return r}}),function(e){e[e.none=0]="none",e[e.enabled=1]="enabled",e[e.saved=2]="saved",e[e.hide=4]="hide",e[e.showMore=8]="showMore",e[e.showFewer=16]="showFewer",e[e.mute=32]="mute",e[e.hidden=64]="hidden",e[e.report=128]="report",e[e.adFeedbackSubmitted=256]="adFeedbackSubmitted",e[e.hideTopic=512]="hideTopic",e[e.dismiss=1024]="dismiss",e[e.adPrivacy=2048]="adPrivacy",e[e.feedback=4096]="feedback",e[e.whyAmISee=8192]="whyAmISee",e[e.followedPublisher=16384]="followedPublisher",e[e.followedTopic=32768]="followedTopic",e[e.hideAds=65536]="hideAds",e[e.blockAdvertiser=131072]="blockAdvertiser"}(i||(i={})),function(e){e.Hide="Hide",e.Like="Like",e.Disabled="Disabled",e.Dislike="Dislike",e.Mute="Mute",e.MuteWebVideo="MuteWebVideo",e.Save="Save",e.Share="Share",e.ShowMore="ShowMore",e.ShowFewer="ShowFewer",e.Divider="Divider",e.Report="Report",e.ManageInterests="ManageInterests",e.ReportAd="ReportAd",e.AdPrivacy="AdPrivacy",e.HideTopic="HideTopic",e.Feedback="Feedback",e.WhyAmISee="WhyAmISee",e.FollowPublisher="FollowPublisher",e.FollowTopic="FollowTopic",e.Upvote="Upvote",e.Downvote="Downvote",e.BlockPublisherWithoutName="BlockPublisherWithoutName",e.Copilot="Copilot",e.OpenNewTab="OpenNewTab",e.OpenNewWindow="OpenNewWindow",e.LocationEdit="LocationEdit",e.LocationManage="LocationManage",e.CopyLink="CopyLink",e.CopyImageLink="CopyImageLink",e.ImageAttribution="ImageAttribution",e.AiDisclaimerAttribution="AiDisclaimerAttribution"}(r||(r={}))},26538:function(e,t,n){n.d(t,{V:function(){return o}});var i=n(52185),r=n(24709);class o{static#e=this.loadLocalStorageKey=Symbol("loadLocalStorage");static get loadLocalStorage(){return i.Gq.get(this.loadLocalStorageKey,(()=>new r.C("loadLocalStorage")))}static set loadLocalStorage(e){i.Gq.set(this.loadLocalStorageKey,e)}static#t=this.marketUpdatedKey=Symbol("marketUpdated");static get marketUpdated(){return i.Gq.get(this.marketUpdatedKey,(()=>new r.C("marketUpdated")))}static set marketUpdated(e){i.Gq.set(this.marketUpdatedKey,e)}static#n=this.pageLayoutStateLoadedKey=Symbol("pageLayoutStateLoaded");static get pageLayoutStateLoaded(){return i.Gq.get(this.pageLayoutStateLoadedKey,(()=>new r.C("PageLayoutStateLoaded")))}static set pageLayoutStateLoaded(e){i.Gq.set(this.pageLayoutStateLoadedKey,e)}static#i=this.updateConfigDataKey=Symbol("updateConfigData");static get updateConfigData(){return i.Gq.get(this.updateConfigDataKey,(()=>new r.C("updateConfigData")))}static set updateConfigData(e){i.Gq.set(this.updateConfigDataKey,e)}static#r=this.updateConfigDataChangedKey=Symbol("updateConfigDataChanged");static get updateConfigDataChanged(){return i.Gq.get(this.updateConfigDataChangedKey,(()=>new r.C("updateConfigDataChanged")))}static set updateConfigDataChanged(e){i.Gq.set(this.updateConfigDataChangedKey,e)}static#o=this.updateTopSitesQuickLinkEndMarginUsedPaddingKey=Symbol("updateTopSitesQuickLinkEndMarginUsedPadding");static get updateTopSitesQuickLinkEndMarginUsedPadding(){return i.Gq.get(this.updateTopSitesQuickLinkEndMarginUsedPaddingKey,(()=>new r.C("updateTopSitesQuickLinkEndMarginUsedPadding")))}static set updateTopSitesQuickLinkEndMarginUsedPadding(e){i.Gq.set(this.updateTopSitesQuickLinkEndMarginUsedPaddingKey,e)}static#a=this.updateLocalStorageKey=Symbol("updateLocalStorage");static get updateLocalStorage(){return i.Gq.get(this.updateLocalStorageKey,(()=>new r.C("updateLocalStorage")))}static set updateLocalStorage(e){i.Gq.set(this.updateLocalStorageKey,e)}static#s=this.updateNtpThemeKey=Symbol("updateNtpTheme");static get updateNtpTheme(){return i.Gq.get(this.updateNtpThemeKey,(()=>new r.C("updateNtpTheme")))}static set updateNtpTheme(e){i.Gq.set(this.updateNtpThemeKey,e)}static#c=this.updatePrimaryAccountInfoKey=Symbol("updatePrimaryAccountInfo");static get updatePrimaryAccountInfo(){return i.Gq.get(this.updatePrimaryAccountInfoKey,(()=>new r.C("updatePrimaryAccountInfo")))}static set updatePrimaryAccountInfo(e){i.Gq.set(this.updatePrimaryAccountInfoKey,e)}static#d=this.updateWPOLayoutPromotionKey=Symbol("updateWPOLayoutPromotion");static get updateWPOLayoutPromotion(){return i.Gq.get(this.updateWPOLayoutPromotionKey,(()=>new r.C("updateWPOLayoutPromotion")))}static set updateWPOLayoutPromotion(e){i.Gq.set(this.updateWPOLayoutPromotionKey,e)}static#u=this.updateWPOLayoutPromotionSourceKey=Symbol("updateWPOLayoutPromotionSource");static get updateWPOLayoutPromotionSource(){return i.Gq.get(this.updateWPOLayoutPromotionSourceKey,(()=>new r.C("updateWPOLayoutPromotionSource")))}static set updateWPOLayoutPromotionSource(e){i.Gq.set(this.updateWPOLayoutPromotionSourceKey,e)}static#l=this.updateWPOTopsitesPromotionKey=Symbol("updateWPOTopsitesPromotion");static get updateWPOTopsitesPromotion(){return i.Gq.get(this.updateWPOTopsitesPromotionKey,(()=>new r.C("updateWPOTopsitesPromotion")))}static set updateWPOTopsitesPromotion(e){i.Gq.set(this.updateWPOTopsitesPromotionKey,e)}static#p=this.updateWPOPromotionCoachMarkKey=Symbol("updateWPOPromotionCoachMark");static get updateWPOPromotionCoachMark(){return i.Gq.get(this.updateWPOPromotionCoachMarkKey,(()=>new r.C("updateWPOPromotionCoachMark")))}static set updateWPOPromotionCoachMark(e){i.Gq.set(this.updateWPOPromotionCoachMarkKey,e)}static#h=this.updateFeedStateOnScrollKey=Symbol("updateFeedStateOnScroll");static get updateFeedStateOnScroll(){return i.Gq.get(this.updateFeedStateOnScrollKey,(()=>new r.C("updateFeedStateOnScroll")))}static set updateFeedStateOnScroll(e){i.Gq.set(this.updateFeedStateOnScrollKey,e)}}},25487:function(e,t,n){var i,r,o;n.d(t,{AL:function(){return s},Aq:function(){return d},BC:function(){return l},HT:function(){return r},LG:function(){return m},Qw:function(){return v},WT:function(){return o},YG:function(){return g},Zg:function(){return f},_H:function(){return p},h0:function(){return i},lA:function(){return a},lx:function(){return h},oj:function(){return y},pY:function(){return u},r2:function(){return c},uE:function(){return S}}),function(e){e[e.BOOLEAN_AND_STRING_ENUM=0]="BOOLEAN_AND_STRING_ENUM",e[e.BOOLEAN=1]="BOOLEAN",e[e.STRING_ENUM=2]="STRING_ENUM"}(i||(i={})),function(e){e.redirect="redirect",e.bing="bing"}(r||(r={})),function(e){e[e.user=0]="user",e[e.wpoPrerenderTab=1]="wpoPrerenderTab",e[e.wpoVisibleTab=2]="wpoVisibleTab",e[e.adminPortalVisibleTab=3]="adminPortalVisibleTab",e[e.ntpVisibleTab=4]="ntpVisibleTab"}(o||(o={}));const a={enabledFeatures:"enabledFeatures",isAdblockerEnabled:"isAdblockerEnabled",IsDefaultSearchProviderLocked:"isInLockdownMode",isEducationEnvironment:"isEducationEnvironment",isInYandexRegions:"isInYandexRegions",isNewTabGreetingEnabled:"isNewTabGreetingEnabled",inPageSearchBoxType:"inPageSearchBoxType",profileCreationTime:"profileCreationTime",showFeedSwitcher:"showFeedSwitcher",isChromePrimaryBrowserAtFre:"isChromePrimaryBrowserAtFre",isEnrolledInProjectEqual:"isEnrolledInProjectEqual",irisAttributes:"irisAttributes",isEdgeSignInAllowed:"isEdgeSignInAllowed",isShowMicrosoftRewardsEnabled:"isShowMicrosoftRewardsEnabled",maxQuickLinks:"maxQuickLinks",channel:"channel",apiVersion:"apiVersion"},s={hasImage:"has_image",resourceUrl:"resource_url",timestamp:"last_modified_time"},c={accountType:"account_type",accountId:"account_id",email:"email",firstName:"first_name",lastName:"last_name"};var d;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CHROME=1]="CHROME",e[e.FIREFOX=2]="FIREFOX",e[e.IEXPLORER=4]="IEXPLORER",e[e.SAFARI=11]="SAFARI",e[e.EDGE=12]="EDGE",e[e.MSEDGE=13]="MSEDGE"}(d||(d={}));const u="quick_links_options",l={selected:94608e3,promoted:2592e3},p={STABLE:"",DEV:"dev",BETA:"beta",CANARY:"canary"},h="tscollapsed_to_off",g={promotionInfoIsNull:"0",isInEdgeExperience:"1",sameWithCurrentLayout:"2",feedsDisabledByAdmin:"3",isNotOneOfFromLayouts:"4",nurturingApiUnavailable:"5",isLayoutSelectedByUserWithinCoolDown:"6",layoutIsAlreadyApplied:"7",maxRetargetingThreshold:"8",isControlFlight:"9",isFREModalBackground:"10",noSavedWpoPromotionOptions:"11",isContentSelectedByUserWithinCoolDown:"12",canNotUseDom:"13",isNotOneOfFromFeeds:"14",isNotInPromotionV2:"15",userMuidMisMatch:"16",staleLayoutPromotion:"17",isFRE:"18",isENPCheckFailed:"19",isInEdgeNoAdsFlight:"20",widgetsRegionDisabled:"21"},f="00001",m="00002",y="00003",v="00004",S="01001"},91734:function(e,t,n){n.d(t,{$W:function(){return C},Ad:function(){return O},BA:function(){return E},F0:function(){return R},HG:function(){return A},LU:function(){return N},Lv:function(){return D},Mc:function(){return k},O3:function(){return y},OS:function(){return x},U4:function(){return w},VT:function(){return M},WH:function(){return v},_u:function(){return m},eD:function(){return S},k4:function(){return b},oB:function(){return I},qi:function(){return P},tv:function(){return L},yc:function(){return _},zJ:function(){return T},zb:function(){return F}});var i=n(52185),r=n(21215),o=n(25487),a=n(52),s=n(42122),c=n(44132),d=n(5302),u=n(15598),l=n(22624),p=n(16495),h=n(95603),g=n(79089);const f="__cachedConfigDataKey__";function m(){const e=i.Gq.get(f);return e?Promise.resolve(e):new Promise((e=>{const t=(0,r.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.getConfigData?t.getConfigData((t=>{if(void 0!==t){const n={enabledFeatures:t[o.lA.enabledFeatures],isAdblockerEnabled:t[o.lA.isAdblockerEnabled],IsDefaultSearchProviderLocked:t[o.lA.IsDefaultSearchProviderLocked],isEducationEnvironment:t[o.lA.isEducationEnvironment],isInYandexRegions:t[o.lA.isInYandexRegions],isNewTabGreetingEnabled:t[o.lA.isNewTabGreetingEnabled],inPageSearchBoxType:t[o.lA.inPageSearchBoxType],profileCreationTime:t[o.lA.profileCreationTime],showFeedSwitcher:t[o.lA.showFeedSwitcher],isChromePrimaryBrowserAtFre:t[o.lA.isChromePrimaryBrowserAtFre],isEnrolledInProjectEqual:t[o.lA.isEnrolledInProjectEqual],irisAttributes:new URLSearchParams(t[o.lA.irisAttributes]),isEdgeSignInAllowed:t[o.lA.isEdgeSignInAllowed],isShowMicrosoftRewardsEnabled:t[o.lA.isShowMicrosoftRewardsEnabled],maxQuickLinks:t[o.lA.maxQuickLinks],channel:t[o.lA.channel],apiVersion:t[o.lA.apiVersion]};i.Gq.set(f,n),e(n)}else s.k.logError("Failed to get config data from Chromium API."),e({})})):e({})}))}function y(){return new Promise((e=>{const t=(0,r.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&"function"==typeof t.getUserTopic?t.getUserTopic((t=>{e(t)})):e({})}))}async function v(e,t,n=void 0){try{if(await k()&&t){const e=await l.L.getPreferenceSetting(t);if(e&&void 0!==e.value)return JSON.parse(e.value.toString())}if(e){const t=(0,u.$o)().getObject(e,void 0);if(void 0!==t)return JSON.parse(t)}return n}catch(e){return s.k.logError("Failed to parse the key."),!1}}async function S(){const e=await(t=a._9.layout,new Promise((e=>{const n=window.chrome;if(n){const i=n.ntpSettingsPrivate;if(i&&"function"==typeof i.getPref)return void i.getPref(t,(n=>{e(n&&n.key===t?n.value:null)}))}e(null)})));var t;return null===e||isNaN(e)?null:a.F5[e]}function w(e){let t=[],n=[];const{layoutRecommended:i,tmpl:r,isControl:a,fromLayouts:s,fromFeeds:c,reTargetRecommendedLayout:d,selectedFeedDisplaySetting:u,source:l,coachmark:p,knobIdx:h,knobIdxPrefix:g,clientReceivedTimestamp:f,usermuidWhenReceived:m,requestIdWhenReceived:y,isPrerenderWhenReceived:v}=e;s&&(t=s.split(",")),c&&(n=c.split(","));return{recommendedLayout:i,tmpl:r,control:a,fromLayoutsArray:t.length>0?t:["inspirational"],fromFeedsArray:n.length>0?n:[],reTargetRecommendedLayout:d,selectedFeedDisplaySetting:u,source:l,coachmark:p,knobIdx:h,knobIdxPrefix:g,clientReceivedTimestamp:f,usermuidWhenReceived:m,requestIdWhenReceived:y,lypType:e.coachMarkId===o.Qw?"demotion":"promotion",isPrerenderWhenReceived:v}}function b(e,t){const n={message:e,type:"information",pb:{...(0,d.mnt)(),customMessage:t}};c.M0.sendClientLogEvent(n)}function C(e,t,n){c.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n}})}function T(e,t,n,i,r,o){c.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n,customBackgroundImageInfo:JSON.stringify(i),ntpTheme:JSON.stringify(r),currentLayout:o}})}async function k(){return await l.L.isApiAvailableToUse()}function P(e,t){const n={setting:e,source:"ntp",timestamp:(new Date).getTime(),value:t};l.L.savePreferenceSetting(e,n)}function A(e,t){if("off"===e||!t||!t.provider)return!1;const n=t.provider,i=g.hv.get(e);return!(i&&i.some((e=>e===n)))}function I(e){if(!e||!e.ntpTheme)return!1;const t=e.ntpTheme.usingDefaultTheme,n=e.ntpTheme.backgroundColorRgba?.length>3,i=!!e.ntpTheme.imageUrl;return!t&&!i&&n}function E(e){if(!e||!e.ntpTheme)return!1;const t=e.ntpTheme.usingDefaultTheme,n=!!e.ntpTheme.imageUrl;return!t&&n}function R(e){if(!e||!e.length)return;const t=e.find((e=>e&&"background_setting_preferences"===e.key));return t&&t.value?t.value:void 0}function M(e){return g.rM.get(e.provider)}function x(){const e=(0,u.$o)().getObject("bkgdV");if(!e)return-1;const t=(new Date).getDay();return e&&e.schedule&&-1!==e.schedule[t]?e.schedule[t]:-1}function L(e){return e?x():-1}async function F(e,t){if(!e)return!1;if(!await p.U.isApiAvailableToUse())return!1;const n=t>=0?"Video":"Iris",i={...e,backgroundSelectionMetadata:{provider:n,configIndex:t,appliedTimestamp:Date.now()}};return p.U.savePreferenceSetting("background_setting_preferences",i)}async function D(e){if(!e)return;if(!await p.U.isApiAvailableToUse())return;const t=e.find((e=>e.key===h.Xm.widgetsUpsell))?.value;return t?p.U.savePreferenceSetting(h.Xm.widgetsUpsell,{},!0):void 0}function O(e){if(!e)return;const t=e.find((e=>e.key===h.Xm.widgetsUpsell))?.value,n=t?.seen||0;c.M0.addOrUpdateTmplProperty("wdgUpslFreqCapVal",n.toString())}function _(e,t){let n=1;switch(e.selectedFeedDisplaySetting){case"always":n|=8;break;case"headingsonly":n|=512;break;case"onscroll":n|=64;break;case"peek":n|=2048;break;default:n|=0}return e.imageOfTheDayEnabled&&(n|=32),e.greetingEnabled&&t&&(n|=256),"off"!==e.selectedQuickLinksDisplaySetting&&(n|=2),"custom"===e.currentLayout&&(n|=128),n}async function N(e){const t=await p.U.getPreferenceSetting("nurturing_campaigns",!1);if(!t?.value?.placementsInteractions)return 0;const n=t.value.placementsInteractions;if(n&&n[e]&&n[e].length>0){const t=n[e].filter((e=>"Viewed"===e.type));return t.length>0?t[t.length-1].ts:0}return 0}},66612:function(e,t,n){n.d(t,{Ad:function(){return s},E7:function(){return o},zY:function(){return a}});var i=n(52);const r=new Map;function o(e){if(!e)return"";const t=[],n=e.split(/\r?\n/);for(const e of n){const n=e.trim(),i=n.lastIndexOf(" ");if(!n||i<0||n.length<4)continue;const r=n.substring(3,i).split(".").slice(-1)[0];r&&l.has(r)&&t.push(r)}return t.slice(-1)[0]?t.slice(-1)[0]:""}function a(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(!e)return;if(!e.setPref)return;const t=e.setPref;e.setPref=function(e,n,i){if(t(e,n,i),u.has(e))return;let a="";const s=(new Error).stack;d.has(e)&&(a=o(s)),a=a||"<unknown>";!function(e,t,n,i){if(!e||!i||!n)return;const o=r.get(t);if(!o)return;const a=i+";"+n+";"+Date.now();e(o,a)}(t,e,`${n}`||"<empty>",a)}}function s(e){c.forEach(((t,n)=>{e[n]&&r.set(t,n)}))}const c=new Map([[i._9.layoutModeInstrumentation,i._9.layout],[i._9.newsFeedDsiplayInstrumentation,i._9.feeds]]),d=new Set(["ntp.layout_mode","ntp.background_image_type","ntp.show_image_of_day","ntp.news_feed_display"]),u=new Set(["ntp.record_user_choices","ntp.user_nurturing"]),l=new Set(["updateLayout","updateFeeds","onUpdateFeedVisibility","onButtonUpdateFeedVisibility","onContentSelectChange","onLayoutModeSelectChange","updateToCustomLayoutMode","updateBackgroundImageType","updateLayoutAndBackgroundImageType","overrideLayoutPreferenceForPolicy","onCustomBackgroundRadioClick","migrateBackgroundPreference","wpoPromoteNewFeedDisplaySetting","wpoPromoteNewLayout"])},31868:function(e,t,n){n.r(t),n.d(t,{BrowserBackgroundPrefSupport:function(){return r.h0},BrowserType:function(){return r.Aq},ChromiumPageSettingsActions:function(){return a.V},ChromiumPageSettingsConnector:function(){return ie},ChromiumPageSettingsReducer:function(){return oe},EdgeChannel:function(){return r._H},EdgeFeatureFlag:function(){return i},InPageSearchBoxType:function(){return r.HT},LayoutChangeInitiator:function(){return r.WT},PrimaryAccountType:function(){return ae.l},ToolingInfo:function(){return se},WPOLayoutPromotionCoachMarkId_OnLoadAutoScrollPrompt:function(){return r.LG},WPOLayoutPromotionCoachMarkId_OptInStickPromptLoad:function(){return r.Zg},WPOLayoutPromotionCoachMarkId_layoutDemotion:function(){return r.Qw},WPOLayoutPromotionCoachMarkId_layoutPromotion:function(){return r.uE},WPOLayoutPromotionCoachMarkId_optInFeedLayout:function(){return r.oj},WpoLayoutPromotionFailedScenarios:function(){return r.YG},cleanupWidgetsUpsellButtonNurturingStorage:function(){return o.Lv},configDataStringMap:function(){return r.lA},coolDownTimeMap:function(){return r.BC},createLayoutPromotionData:function(){return o.U4},customBackgroundImageInfoStringMap:function(){return r.AL},edgeNextGetPageConfiguration:function(){return o.yc},edgeNextLayoutOptimizer:function(){return W},getBackgroundImageTypeFromSelectionMetadata:function(){return o.VT},getBackgroundSettingsPreferences:function(){return o.F0},getCMLastViewTime:function(){return o.LU},getConfigDataAsync:function(){return o._u},getCurrentConfigurationIndex:function(){return o.tv},getCurrentLayoutAsync:function(){return o.eD},getCurrentVideoIndex:function(){return o.OS},getUserSetting:function(){return o.WH},getUserTopicAsync:function(){return o.O3},isBaseBackgroundPreferenceAndGallerySelectionMismatched:function(){return o.HG},isBundledThemeBackground:function(){return o.BA},isPersistentStorageAPIAvailable:function(){return o.Mc},isRGBThemeBackground:function(){return o.oB},logAppError:function(){return o.$W},logVerboseAppError:function(){return o.zJ},overrideGallerySelectionCache:function(){return o.zb},overrideNtpSettingsPrivatePreferenceSetting:function(){return J.zY},primaryAccountInfoStringMap:function(){return r.r2},quickLinksOptionsKey:function(){return r.pY},recordUserChoice:function(){return o.qi},sendClientLogEvent:function(){return o.k4},stampWidgetsUpsellTmpl:function(){return o.Ad},topsitesCollapsedToOff:function(){return r.lx}});var i,r=n(25487);!function(e){e.WinHPCustomBackButtonBehavior="msEnableWinHPNewTabBackButtonFocusAndClose"}(i||(i={}));var o=n(91734),a=n(26538);const s={StructuredDataCardsUserPreference:{id:"scp",maxRawLength:250,useCookie:!0,jsonEncoded:!0},CoachmarkUserPreference:{id:"cmp",maxRawLength:1,useCookie:!1,jsonEncoded:!1},LayoutOptimization:{id:"wpolo",maxRawLength:250,useCookie:!1,jsonEncoded:!0}};var c,d;!function(e){e.DefaultShowContent="DefaultShowContent",e.DisplayedCoachMarkWizards="DisplayedCoachMarkWizards",e.DynamicFeedFilters="DynamicFeedFilters",e.FreDialogExistingUser="FreDialogExistingUser",e.HasMsa="HasMsa",e.MarketSelection="MarketSelection",e.OutlookOptIn="OutlookOptIn",e.ProActiveCanvasFRE="ProActiveCanvasFRE",e.StructuredDataCardsUserPreference="StructuredDataCardsUserPreference",e.TopicSelection="TopicSelection",e.Layout="Layout",e.DhpHideNewsFeed="DhpHideNewsFeed",e.HideBingImage="HideBingImage"}(c||(c={})),function(e){e.DefaultShowContent="dsc",e.CoachMarkWizard="cmwr",e.DynamicFeedFilters="dff",e.MarketReset="mktreset",e.HasMsa="msa",e.MarketSelection="ntps",e.OutlookOptIn="olopt",e.ProActiveCanvasFRE="spnewpcfre",e.StructuredDataCardsUserPreference="scp",e.TopicSelection="epnff",e.DhpHideNewsFeed="iedo",e.HideBingImage="bingimage"}(d||(d={}));var u=n(15598);class l{constructor(e=(0,u.$o)()){this.webStorage=e,this.loadSettingsFromStorage=()=>{},this.storage={}}fetchProperty(e){const t=s[e];return t&&this.storage[t.id]}clear(){Object.keys(s).forEach((e=>{const t=s[e];this.webStorage.removeItem(t.id),delete this.storage[t.id]}))}deleteProperty(e){const t=s[e];t&&(this.webStorage.removeItem(t.id),delete this.storage[t.id])}saveProperty(e,t){const n=s[e];if(n){const e=n.jsonEncoded,i=n.maxRawLength,r=typeof t,o=JSON.stringify(t),a=o.length;if(e?"object"===r&&a<=i:("string"===r||"number"===r)&&a<=i+2){const i=e?o:t;return this.webStorage.setItem(n.id,i),!0}}return!1}loadSynchronizedSettingsFromStorage(){Object.keys(s).forEach((e=>{const t=s[e].id,n=this.webStorage.getItem(t);n&&(this.storage[t]=JSON.parse(n))}))}}var p=n(30666),h=n(52),g=n(12686),f=n(16614),m=n(33779),y=n(5302),v=n(42122),S=n(242),w=n(12812),b=n(80287),C=n(19625),T=n(28951),k=n(98130),P=n(13218),A=n(5884);class I{static get UpsellGamerMode(){return I.upsellGamerMode}static set UpsellGamerMode(e){I.upsellGamerMode=e}}var E=n(16495),R=n(95603),M=n(22624),x=n(1713),L=n(52185),F=n(81489),D=n(26156),O=n(44132);class _{}const N={0:"focused",1:"inspirational",2:"informational",3:"custom"},B={focused:0,inspirational:1,informational:2,custom:3},U={0:"off",1:"headingsonly",2:"peek",3:"always",4:"onscroll"},$={off:0,headingsonly:1,peek:2,always:3,onscroll:4};class H{constructor(){this.recommendation=new _,this.getRecommendedLayout=async(e,t,n,i)=>new Promise((async a=>{try{const{coolDownTimeInSecondsPromoted:s,coolDownTimeInSecondsSelected:c,forcePromotion:d,enableCleanerPromotion:u}=e&&e.layoutPromotion||{};let l=s,p=c,h=null;if(!(e&&e.enableOptPromoReverse)&&i)this.layoutPromotionConfig=i;else{if(await E.U.isApiAvailableToUse()){const e=(await E.U.getPreferenceSetting(R.Xm.layoutPromotion))?.value;this.layoutPromotionConfig=e||null}else O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.nurturingApiUnavailable)}if(this.layoutPromotionConfig&&(h=(0,o.U4)(this.layoutPromotionConfig),l=this.layoutPromotionConfig.coolDownTimeInSecondsPromoted??l,p=this.layoutPromotionConfig.coolDownTimeInSecondsSelected??p),!h||!h.recommendedLayout)return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.promotionInfoIsNull),a(null);if(d){const{reTargetRecommendedLayout:e}=h;if(this.recommendation={layoutPromotionData:{recommendedLayout:h.recommendedLayout,isRevertFlight:e,shouldReTarget:e,tmpl:h.tmpl,control:h.control,source:h.source},rid:h.requestIdWhenReceived,time:h.clientReceivedTimestamp,muid:h.usermuidWhenReceived??"",lypType:h.coachMarkId===r.Qw?"demotion":"promotion"},this.qualifyForPromotion=!0,e){const e=await E.U.getPreferenceSetting(R.Xm.wpo),t=e&&e.value,n=t.layoutHistory?.length?t.layoutHistory.pop():null;n&&(this.recommendation.layoutPromotionData.recommendedLayout=n.from||h.recommendedLayout)}return"custom"===this.recommendation.layoutPromotionData.recommendedLayout&&h.selectedFeedDisplaySetting&&(this.recommendation.layoutPromotionData.recommendedFeedDisplaySetting=h.selectedFeedDisplaySetting),a(this.recommendation)}return await this.canBePromoted(h,t,l,p,u,n,e?.enableLayoutPromotionForLog)?(h.selectedFeedDisplaySetting&&"custom"===h.recommendedLayout&&(this.recommendation.layoutPromotionData.recommendedFeedDisplaySetting=h.selectedFeedDisplaySetting),a(this.recommendation)):a(null)}catch(e){return(0,o.$W)(y.nab,"Applying recommended layout failed",`Error:${e}`),a(null)}})),this.qualifyForPromotion=!1}static getInstance(){return L.Gq.get("__EdgeNextLayoutOptimizer__",(()=>new H))}isNurturingLimitsGood(e,t,n,i,o){if(e&&e.recommendedLayoutAppliedTs){const t=(new Date).getTime(),n=o??r.BC.promoted;if(t-e.recommendedLayoutAppliedTs>1e3*n)return O.M0.addOrUpdateTmplProperty("lpIncoolDown","0"),!0}return!(t&&!n)||(O.M0.addOrUpdateTmplProperty("lpIncoolDown","1"),O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.layoutIsAlreadyApplied),!1)}async updateLayoutPromotionUserNurturing(e,t,n){const i=(new Date).getTime(),r=await E.U.getPreferenceSetting(R.Xm.wpo),o=r&&r.value,a=o&&o.recommendedLayoutRetargetHistory||[];n&&a.push(i);const s=o&&o.layoutHistory||[];s.push({time:i,from:e,to:t,reTarget:n||!1});const c={recommendedLayoutAppliedTs:i,recommendedLayoutRetargetHistory:a,layoutHistory:s};await E.U.savePreferenceSetting(R.Xm.wpo,c)}async canBePromoted(e,t,n,i,a,s,c){const{enabled:d}=await(0,D.zx)()||{},u=d&&d.includes("msNtpExpBlockLayoutPromotions");if(O.M0.addOrUpdateTmplProperty("inEdgeExpN",u?"1":"0"),u)return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.isInEdgeExperience),!1;const l=P.Al.CurrentFlightSet.has("prg-forcenoads"),p=d&&d?.includes("msReducedNtpAdsForNewDevice_BlockAllAds");if(l||p)return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.isInEdgeNoAdsFlight),!1;if(t||(t=await(0,o.eD)()),t===e.recommendedLayout&&"custom"!==t)return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.sameWithCurrentLayout),!1;if(this.areFeedsDisabledByAdmin())return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.feedsDisabledByAdmin),!1;const{fromLayoutsArray:h,reTargetRecommendedLayout:g,fromFeedsArray:f}=e;if(h&&-1===h.indexOf(t))return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.isNotOneOfFromLayouts),!1;if(f&&f.length&&-1===f.indexOf(s))return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.isNotOneOfFromFeeds),!1;if(!await E.U.isApiAvailableToUse())return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.nurturingApiUnavailable),!1;if(await this.isSelectedByUser(e.recommendedLayout,i))return!1;const m=await E.U.getPreferenceSetting(R.Xm.wpo),y=m&&m.value,v=y&&y.recommendedLayoutAppliedTs,S=y&&y.recommendedLayoutRetargetHistory&&y.recommendedLayoutRetargetHistory.length;if(!a){if(!this.isNurturingLimitsGood(y,v,g,S,n))return!1}if(c&&O.M0.addOrUpdateTmplProperty("lyp-r-rid",`${e.requestIdWhenReceived}`),e.usermuidWhenReceived||e.clientReceivedTimestamp){if(k.jG.UserId!==e.usermuidWhenReceived)return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.userMuidMisMatch),!1;if(e.clientReceivedTimestamp&&e.clientReceivedTimestamp<(new Date).getTime()-15552e6)return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.staleLayoutPromotion),!1}if(this.recommendation={layoutPromotionData:{recommendedLayout:e.recommendedLayout,isRevertFlight:g,shouldReTarget:g,tmpl:e.tmpl,control:e.control,source:e.source,coachmark:e.coachmark,knobIdx:e.knobIdx,knobIdxPrefix:e.knobIdxPrefix,fromLayoutsArray:h,fromFeedsArray:f},time:e.clientReceivedTimestamp,rid:e.requestIdWhenReceived,muid:e.usermuidWhenReceived,lypType:e.lypType,isPr:e.isPrerenderWhenReceived},this.qualifyForPromotion=!0,g){const t=y.layoutHistory?.length?y.layoutHistory.pop():null;t&&(this.recommendation.layoutPromotionData.recommendedLayout=t.from||e.recommendedLayout)}return"custom"===this.recommendation.layoutPromotionData.recommendedLayout&&e.selectedFeedDisplaySetting&&(this.recommendation.layoutPromotionData.recommendedFeedDisplaySetting=e.selectedFeedDisplaySetting),!0}areFeedsDisabledByAdmin(){const e=(0,u.$o)().getObject("AdminPortalSettings");if(!e)return!1;const{isOfficeContentEnabled:t,isShowCompanyAndIndustry:n}=e;return!t&&!n}async isSelectedByUser(e,t){if(!await M.L.isApiAvailableToUse()){const e="ntp.record_user_choices pref is not present in this version of EDGE; Will try to promote user";return(0,o.k4)(e),!1}let n;const i=await(0,D.db)();n=i&&i.userLayoutHistory;let a=!1;if(n||(n=await this.getExplicitUserChoice(R.nc.layout_mode),a=!0,O.M0.addOrUpdateTmplProperty("f-l")),n){const i=a?n.timestamp:n.time;if(this.isUserChoiceOutOfCooldownTime(i,t)){const e="ntp.record_user_choices pref is present and can be promoted as selected time is larger than cooldowntime";return(0,o.k4)(e),O.M0.addOrUpdateTmplProperty("uChoiceOutCooldown",i.toString()),!1}(0,o.k4)(`Did not promote layout to ${e} since user explicitly set layout or content to ${n.value}`);const s=a?r.YG.isLayoutSelectedByUserWithinCoolDown:r.YG.isContentSelectedByUserWithinCoolDown;return O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",s),!0}return O.M0.addOrUpdateTmplProperty("uChoiceIsNull","1"),!1}async getExplicitUserChoice(e){const t=await M.L.getPreferenceSetting(e);return t&&"ntp"===t.source?t:null}isUserChoiceOutOfCooldownTime(e,t){if(e){if((new Date).getTime()-e>1e3*(t??r.BC.selected))return!0}return!1}async getWpoLayoutPromotionFromBrowser(e){if(!e&&this.qualifyForPromotion)return this.recommendation;if(!await E.U.isApiAvailableToUse())return O.M0.addOrUpdateTmplProperty("layoutPromotionFailedAdd",r.YG.nurturingApiUnavailable),null;const t=await(0,x.Ok)();if(t){const e=t;return this.recommendation={layoutPromotionData:{recommendedLayout:e.isCtrl?null:N[e.proLayout],recommendedFeedDisplaySetting:e.isCtrl?null:U[e.proContent],fromLayout:e.fromLayout,fromFeed:e.fromFeed,isRevertFlight:e.isRvert,shouldReTarget:e.isRvert,tmpl:e.tmpl,control:e.isCtrl,source:e.source,coachmark:e.coachmark,knobIdx:e.knobIdx,knobIdxPrefix:e.knobIdxPrefix},rid:e.rid,time:e.time,muid:e.muid,showCM:e.showCM,lypType:e.lypType,isPr:e.isPr},this.qualifyForPromotion=!0,this.recommendation}return O.M0.addOrUpdateTmplProperty("layoutPromotionFailedAdd",r.YG.noSavedWpoPromotionOptions),null}async storeWpoLayoutPromotionToBrowser(e){if(e.layoutPromotionData){const{rid:t,time:n,muid:i,isPr:r,lypType:o}=e;if(await E.U.isApiAvailableToUse()){const{isRevertFlight:a,control:s,recommendedLayout:c,recommendedFeedDisplaySetting:d,tmpl:u,source:l,coachmark:p,knobIdx:h,knobIdxPrefix:g,fromLayoutsArray:f,fromFeedsArray:m}=e.layoutPromotionData;let y="",v="";f&&f.length&&(y=f.map((e=>B[e])).join(",")),m&&m.length&&(v=m.map((e=>$[e])).join(","));const S={isRvert:a,isCtrl:s,tmpl:u,proLayout:s?null:B[c],proContent:s?null:$[d],fromLayout:y,fromFeed:v,source:l,coachmark:p,knobIdx:h,knobIdxPrefix:g,time:n,rid:t,muid:i,lypType:o,isPr:r};await(0,x.NP)(S);let w=0;w=void 0!==r?r?1:0:2,O.M0.addOrUpdateTmplProperty("saveLyPromoToPSL",`${S?.knobIdx??"0"}|${w}|${Date.now()}|${S?.rid??"0"}|rsTime: ${S?.time??0}`)}}}}const W=(0,F.h)(H);var G=n(22680),V=n(21215),q=n(9586);class j{constructor(e){this.numberOfDaysToStoreTmpl=90,this.layoutTmplDataKey=R.Xm.wpoLytTmpl,this.userNurturingManager=e}static getInstance(){return L.Gq.get("__TmplManager__",(()=>new j(E.H.getInstance())))}async persistTmplValueToNurturingPref(e){if(e){const t=await this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),n=t&&t.value||[];if(this.findTmpl(n,e))return;n.push({value:e,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)}),await E.U.savePreferenceSetting(this.layoutTmplDataKey,n)}}async persistTmplValueToNurturingPrefAndStampToTelemetry(e){if(e){const t=await this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),n=t&&t.value||[];this.findTmpl(n,e)||n.push({value:e,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)});const i=[...new Set(n)];await this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,i),O.M0.addOrUpdateTmplProperty(e,"1")}}async stampExistingTmplValueToTelemetry(){const e=await this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),t=e&&e.value||[];if(!t.length)return;let n=!1;const i=this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl),r=t.map((e=>"string"==typeof e?(n=!0,{value:e,expiryDate:i}):e)),o=(new Date).getTime(),a=r.filter((e=>e.expiryDate>o));a.forEach((e=>{e.value&&O.M0.addOrUpdateTmplProperty(e.value,"1")})),(n||r.length!=a.length)&&await this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,a)}findTmpl(e,t){return e&&-1!=e.findIndex((e=>e===t||e&&e.value===t))}getExpirationTimestamp(e){let t;try{t=(0,q.Z)(new Date,e)}catch(n){const i=new Date;t=i.setDate(i.getDate()+e)}return t.getTime()}}const z=(0,F.h)(j);var K=n(68551),Q=n(24318),J=n(66612),X=n(24032);const Y="myFeed",Z=(e,t,n)=>{if(e===h._9.selectedFeedPivot&&""===t&&(t=Y),e===h._9.selectedFeedPivot&&""===n&&(n=Y),(e!==h._9.feeds||"onscroll"!==t||"headingsonly"!==n)&&t!==n){"true"===(0,X.L)().get("mock-ntp-header")||(0,m.H)(y.sFk,"SSR - Edge header mismatch.",void 0,{...y.sFk.pb,customMessage:`key: ${e}, header: ${t}, state: ${n}`,edgeHeader:`${P.Al.EdgeNTPHeader}`})}};var ee=n(55727),te=n(75692),ne=n(1041);class ie extends p.e{constructor(e,t,n,i,s,d,u){super(e,t,n,i,s,d,u),this.preferenceChangeCallbacks=[],this.marketCookieName="ntps",this.cookieExpireInDays=182,this.didLayoutModeChangeInCurrentTab=!1,this.layoutChangeInitiatorKey="lytupdtinitiator",this.QSPLayoutOverride=null,this.QSPTopSitesOverride=null,this.isPageLayoutStateReady=new Promise((e=>{this.resolvePageLayoutState=e})),this.isWindowsIndexerPromotedTopSitesPreferenceAvailable=!1,this.isMinimumVisitAffiliateSitePreferenceAvailable=!1,this.isWidgetPreferenceAvailable=!1,this.overrideWidgetsQSP=!1,this.hasFeedDisplaySettingChanged=!1,this.promotion="promotion",this.layoutPromotionSignalTransition="lypSignalTransition",this.isPreCheckPassed=!1,this.getLayoutStateFromOverrideConfig=(e,t,n)=>{let i;if(e&&"custom"!==e){const t=h.Wi[e];i={currentBackgroundImageType:t.current_background_image_type,originalLayout:n.currentLayout,currentLayout:e,greetingEnabled:t.greeting,imageOfTheDayEnabled:"off"!==t.current_background_image_type,hideDefaultTopSites:t.hide_promoted_links,selectedFeedDisplaySetting:t.feeds_position,originalFeedDisplaySetting:n.selectedFeedDisplaySetting,selectedQuickLinksDisplaySetting:n.selectedQuickLinksDisplaySetting}}else i={...n,originalLayout:n.currentLayout,currentLayout:"custom",selectedFeedDisplaySetting:t,originalFeedDisplaySetting:n.selectedFeedDisplaySetting};return i},this.settingsAPI="undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate,this._authPrivateApi="undefined"!=typeof window&&window&&window.chrome&&window.chrome.authPrivate,this.ntpApiHandle="undefined"!=typeof window&&window&&window.chrome&&window.chrome.embeddedSearch&&window.chrome.embeddedSearch.newTabPage,this.chromiumBackgroundPrefType=r.h0.BOOLEAN,this.registerOnConfigDataChangedCallback(),this.registerOnPrefsChangeCallback(),this.edgeChromiumStorageProvider=new l,a.V.updateLocalStorage.registerObserver((e=>{const t=e.params[0];this.edgeChromiumStorageProvider.saveProperty(c.StructuredDataCardsUserPreference,function(e){return{bsk:{v:e.bingShoppingVisible?1:0,p:null},wsk:{v:e.weatherVisible?1:0,p:null},ssk:{v:e.sportsVisible?1:0,p:null},msk:{v:e.moneyVisible?1:0,p:null},hsk:{v:e.horoscopeVisible?1:0,p:null},osk:{v:e.onThisDayVisible?1:0,p:null},esk:{v:e.electionsVisible?1:0,p:null},essk:{v:e.esportsVisible?1:0,p:null},lsk:{v:e.lotteryVisible?1:0,p:null},qsk:{v:e.qnaVisible?1:0,p:null},rsk:{v:e.qnaVisible?1:0,p:null},amsk:{v:e.autosMarketplaceVisible?1:0,p:null},bhsk:{v:e.healthCardVisible?1:0,p:null}}}(t))})),a.V.marketUpdated.registerObserver((e=>{const t=e.params[0];if(t&&""!==t)try{this.updateMarketandRefresh(t)}catch(e){(0,m.OO)(e,y.sMt,"Failed to change the market, cookie doesn't drop from PCS")}})),this.getInitialState().then((e=>{a.V.loadLocalStorage.getActionSender(this).send(e)})),this.QSPLayoutOverride=T.cX.getQueryParameterByName("setNTPLayout",(0,G.zp)()),this.QSPTopSitesOverride=T.cX.getQueryParameterByName("setNTPTopSites",(0,G.zp)()),this.QSPLayoutOverride=k.jG.IsHeroNTP&&!this.config.heroNoPromoLayout||k.jG.IsUCBased?"custom":this.QSPLayoutOverride,this.getPageLayoutStateAsync(d&&d.enableClientEventsLog).then((e=>{if(this.config&&this.config.promoFormParamList){const t=new URLSearchParams((0,G.zp)()).get("form");if(t){if(this.config.promoFormParamList.includes(t.toUpperCase())&&"always"!==e.selectedFeedDisplaySetting){const t={...e,originalLayout:e.currentLayout,...h.YZ};this.updateLayout(t),e={...t},O.M0.addOrUpdateTmplProperty("formRecommendedLayout",e.currentLayout),O.M0.addOrUpdateTmplProperty("formRecommendedDisplay",e.selectedFeedDisplaySetting)}}}if(this.config.recordDisableContentAsOff&&this.isPageLayoutStateReady.then((()=>(0,x.KK)(!!this.config?.forceDisableContent))),window.isSSREnabled&&!this.config.enablePromotionInSSR)return e.isLoadCompleted=!0,a.V.pageLayoutStateLoaded.getActionSender(this).send(e),void this.resolvePageLayoutState();this.applyWpoLayoutPromotion(e)})),this.getPrimaryAccountInfoAsync().then((e=>{a.V.updatePrimaryAccountInfo.getActionSender(this).send(e)})),this.getConfigDataAsync().then((e=>{a.V.updateConfigData.getActionSender(this).send(e)})),this.ntpApiHandle&&(this.ntpApiHandle.onthemechange=()=>{const e=this.ntpApiHandle.ntpTheme;a.V.updateNtpTheme.getActionSender(this).send(e),e||(0,o.$W)(y.BFw,"Missing theme information detected on theme change.",`ntpTheme: ${e}`)})}applyWpoLayoutPromotion(e){W.getWpoLayoutPromotionFromBrowser().then((async t=>{const n=async e=>{if((0,V.N)())if(this.config.enableOptPromoReverse){const t=this.getCurrentState();W.getRecommendedLayout(this.config,t.currentLayout,t.selectedFeedDisplaySetting).then((async n=>{if(n)W.storeWpoLayoutPromotionToBrowser(n);else{let n=!1;e&&"beforeunload"===e.type&&(n=await this.shouldReTriggerCoachMark(t.currentLayout,t.selectedFeedDisplaySetting)),(0,x.NP)(n?{showCM:!0}:null)}}))}else{const t=await(0,x.Ok)()??{};let n=!1;if(e&&"beforeunload"===e.type){const e=this.getCurrentState();n=await this.shouldReTriggerCoachMark(e.currentLayout,e.selectedFeedDisplaySetting)}n&&(0,x.NP)({...t,showCM:!0}),!n&&t&&t.showCM&&(0,x.NP)({...t,showCM:!1})}};await this.layoutPromotionFollowUp(e,t),this.config.enableOptPromoReverse&&n(),window.addEventListener("beforeunload",n,{once:!0})}))}async layoutPromotionFollowUp(e,t){const{layoutPromotionData:n,showCM:i}=t||{},{recommendedLayout:s,recommendedFeedDisplaySetting:c}=n||{},d=!!s;if(i&&(0,V.N)()){if(s&&s!==e.currentLayout||c&&c!==e.selectedFeedDisplaySetting)return;const n=await(0,o.LU)("layoutPromotion");Date.now()-n<=2592e6||(a.V.updateWPOLayoutPromotion.getActionSender(this).send(!0,t?.lypType),O.M0.addOrUpdateTmplProperty("reTriggerlypCM","1"),!d&&t&&t.showCM&&(0,x.NP)(null))}if(d||(0,u.$o)().setObject(this.promotion,void 0),d){O.M0.addOrUpdateTmplProperty("hasPromoInfo","isFromPr:"+(t.isPr?"1":"0"));const{enabled:n}=await(0,D.zx)()||{},i=n&&n.includes("msNtpExpBlockLayoutPromotions");O.M0.addOrUpdateTmplProperty("inEdgeExp",i?"1":"0");if(!await this.shouldApplyPromotion(e.currentLayout,e.selectedFeedDisplaySetting,t,i,e.enableWidgetsRegion))return this.isPreCheckPassed&&(0,ee.PF)("layoutPromotion_PreCheck",te.Y.Ignored),(0,V.N)()&&z.stampExistingTmplValueToTelemetry(),e.isLoadCompleted=!0,a.V.pageLayoutStateLoaded.getActionSender(this).send(e),void this.resolvePageLayoutState()}const l=n?.knobIdx,p=this.config.knobsForLog&&this.config.knobsForLog.includes(l);if((this.config.layoutPromotion?.forceRegisterLayoutPromotionCoachMark||d&&!n?.isRevertFlight&&!p)&&(O.M0.addOrUpdateTmplProperty("sendlypaction",t?.lypType),a.V.updateWPOLayoutPromotion.getActionSender(this).send(!0,t?.lypType)),d&&!n?.isRevertFlight&&(n?.source&&a.V.updateWPOLayoutPromotionSource.getActionSender(this).send(n?.source),n?.coachmark&&a.V.updateWPOPromotionCoachMark.getActionSender(this).send(n?.coachmark)),d&&t.layoutPromotionData?.tmpl&&z.persistTmplValueToNurturingPref(t.layoutPromotionData?.tmpl),d&&t.layoutPromotionData?.source&&O.M0.addOrUpdateTmplProperty("pSource",t.layoutPromotionData?.source),d){(0,D.w$)("OPT_OUT_UPSELL_ELIGIBLE");const{time:i,rid:o,lypType:a}=t,{shouldReTarget:d}=n;if(s){const t=P.Al.IsPrerender?r.WT.wpoPrerenderTab:r.WT.wpoVisibleTab,n=this.getLayoutStateFromOverrideConfig(s,c,e),h=e.currentLayout,g=this.config.enableLayoutPromotionForLog&&(!this.config.knobsForLog||p);g||this.wpoPromoteNewLayout(n,t),!g&&c&&this.wpoPromoteNewFeedDisplaySetting(c,e.selectedFeedDisplaySetting),O.M0.addOrUpdateTmplProperty("wpolyp",`${l}|${(new Date).getTime()}|${a??"promotion"}|${o}|sTime:${i}`),g&&O.M0.addOrUpdateTmplProperty("wpolyp-rid",`${o}|${i}`),(0,u.$o)().setObject("previousLayoutState",{currentLayout:e.currentLayout,selectedFeedDisplaySetting:e.selectedFeedDisplaySetting,currentBackgroundImageType:e.currentBackgroundImageType,greetingEnabled:e.greetingEnabled,imageOfTheDayEnabled:e.imageOfTheDayEnabled,hideDefaultTopSites:e.hideDefaultTopSites});const f=c||n.selectedFeedDisplaySetting;g||(e={...e,currentLayout:s,selectedFeedDisplaySetting:f,currentBackgroundImageType:n.currentBackgroundImageType,greetingEnabled:n.greetingEnabled,imageOfTheDayEnabled:n.imageOfTheDayEnabled,hideDefaultTopSites:n.hideDefaultTopSites,layoutPromotionType:a}),O.M0.addOrUpdateTmplProperty("recommendedLayout",s),O.M0.addOrUpdateTmplProperty("recommendedDisplay",f),(0,u.$o)().setObject(this.promotion,{isPromoted:!0,muid:k.jG.UserId,time:Date.now(),recommendedLayout:s,recommendedFeedDisplaySetting:c}),this.config.enablePromotionInSSR&&(0,x.NP)(null),g||W.updateLayoutPromotionUserNurturing(h,s,d)}}(0,V.N)()&&z.stampExistingTmplValueToTelemetry(),e.isLoadCompleted=!0,a.V.pageLayoutStateLoaded.getActionSender(this).send(e),this.resolvePageLayoutState()}async updateMarketandRefresh(e){(0,C.sq)(this.marketCookieName,void 0,-1),(0,C.sq)(this.marketCookieName,void 0,-1,void 0,"/edge");const t=JSON.stringify({m:e});(0,C.sq)(this.marketCookieName,t,this.cookieExpireInDays,k.jG.HostPage.topDomain,"/"),await M.L.savePreferenceSetting(this.marketCookieName,{setting:this.marketCookieName,source:"ntp",timestamp:(new Date).getTime(),value:t}),O.M0.addOrUpdateTmplProperty("marketSetToExplicitSelection","1");const n=`/${k.jG.CurrentMarket}/`;if(!location.pathname.startsWith(n))return void(0,w.Z)();const i=new URL(location.href);i.pathname=i.pathname.replace(n,`/${e}/`),(0,w.Z)({newUrl:i.href})}checkAuthApiIsAvailable(){return!!(window&&window.chrome&&window.chrome.authPrivate)&&!!window.chrome.authPrivate.startEdgeSignIn}getPrimaryAccountInfoAsync(e=!0){return new Promise((t=>{const n=this.getCurrentState();e&&n.primaryAccountInfo?t(n.primaryAccountInfo):this._authPrivateApi&&this._authPrivateApi.getPrimaryAccountInfo?this._authPrivateApi.getPrimaryAccountInfo((e=>{if(e){const n={accountId:e[r.r2.accountId],accountType:e[r.r2.accountType],firstName:e[r.r2.firstName],lastName:e[r.r2.lastName],email:e[r.r2.email]};t(n)}else(0,m.H)(y.bKp,"Failed to get response from Chromium API.",void 0,{...y.bKp.pb}),t({})})):(v.k.logError("Failed to get auth private api data from Chromium API."),t({}))}))}async getConfigDataAsync(){const e=this.getCurrentState();return e.configData?e.configData:(0,o._u)()}getPageSettingsStateAsync(){const e=this.getCurrentState(),t=this.config&&this.config.forceDisableContent;if(P.Al.CurrentFlightSet.has("prg-usessrlayout")&&(0,V.N)()&&window.isSSREnabled&&window.ssrLayoutState&&!window.isHydrationCompleted){const n=Object.assign({},e,window.ssrLayoutState);return t&&this.setContentDisabled(n),Promise.resolve(n)}return t&&this.setContentDisabled(e),new Promise(((n,i)=>this.settingsAPI?e.isLoadCompleted?(t&&this.setContentDisabled(e),n(e)):void a.V.pageLayoutStateLoaded.registerObserver((e=>{const r=e&&e.params;if(!r||r.length<1)return i("Load action didn't send any params");const o=r[0];return t&&o&&this.setContentDisabled(o),o?n(o):i("Chromium Load action params type does not match with expected state type")})):n(e)))}getThemeTextColor(){let e=null;const t=this.getThemeLayoutColor();if(t){const n={r:t[0],g:t[1],b:t[2],a:t[3]};e=b.g.rgbNumberToCssHexColor(b.g.parsedColorToNumber(n))}return e}getThemeLayoutColor(){const e=this.getCurrentState(),t=e.ntpTheme;if("theme"!==e.currentBackgroundImageType||!t||t.imageUrl||t.usingDefaultTheme||!t.backgroundColorRgba)return null;if(t&&!t.usingDefaultTheme){if(t&&t.isNtpBackgroundDark&&t.textColorRgba&&t.textColorRgba.length>3)return t.textColorRgba;if(t&&!t.isNtpBackgroundDark&&t.textColorLightRgba&&t.textColorLightRgba.length>3)return t.textColorLightRgba}return null}getLayoutStateAsync(){return this.getPageSettingsStateAsync()}addSettingChangeListener(e){this.preferenceChangeCallbacks.push(e)}updateLayout(e,t=r.WT.user,n=!0,i){if(!(0,V.N)()||!this.settingsAPI||this.config&&this.config.forceDisableContent)return;if(P.Al.CurrentFlightSet.has("prg-usessrlayout")&&(0,V.N)()&&window.isSSREnabled&&window.ssrLayoutState&&!window.isHydrationCompleted){const i=L.Gq.get("__hydrationPromise__");if(i)return void i.getResultAsync().then((()=>{this.updateLayout(e,t,n)}))}const o=this.getCurrentState();O.M0.addOrUpdateTmplProperty("lychangeby",t+""),t!==r.WT.user&&"off"===e.selectedFeedDisplaySetting&&"off"!==o.selectedFeedDisplaySetting&&O.M0.sendAppErrorEvent({...y.MRy,message:`Feed layout is set to content-off by initiator: ${t}`,pb:{...y.MRy.pb}});let a=h.$B[o.selectedQuickLinksDisplaySetting];e.selectedQuickLinksDisplaySetting&&(a=h.$B[e.selectedQuickLinksDisplaySetting]),this.didLayoutModeChangeInCurrentTab=!0,(0,u.$o)().setObject(this.layoutChangeInitiatorKey,t);if(T.cX.getQueryParameterByName("isFREModalBackground",(0,G.zp)()))O.M0.addOrUpdateTmplString("FREModalBackgroundLayoutNotSaved:1"),t!==r.WT.user&&O.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.isFREModalBackground);else{const i=R.Jj[t]??"unknown",a=e.originalFeedDisplaySetting??o.selectedFeedDisplaySetting;if(e.selectedFeedDisplaySetting!==a){const n=t===r.WT.user?o.selectedFeedDisplaySetting:e.originalFeedDisplaySetting;(0,D.LC)(i,"feeds",h.gp[n??e.selectedFeedDisplaySetting],h.gp[e.selectedFeedDisplaySetting],(new Date).getTime(),this.config.enableOptimizedTmpl)}else{const t=h.Uq[e.originalLayout??o.currentLayout],n=h.Uq[e.currentLayout];O.M0.addOrUpdateTmplProperty("layoutUpdate",`${i}|layout|${t}|${n}|${(new Date).getTime()}`)}this.logCallStack("updateLayout"),n?this.executeSettingsChange(h._9.layout,h.Uq[e.currentLayout]):this.settingsAPI.setPref(h._9.layout,h.Uq[e.currentLayout],K.g)}e.isContentFeedManagedByAdminPortal&&this.updateContentFeedAdminPortalSetting(!0),a&&this.settingsAPI.setPref(h._9.quickLinksDisplaySetting,a,K.g),this.settingsAPI.setPref(h._9.hideDefaultTopSites,e.hideDefaultTopSites,K.g),this.settingsAPI.setPref(h._9.imageOfTheDay,e.imageOfTheDayEnabled,K.g),this.settingsAPI.setPref(h._9.currentBackgroundImageType,e.imageOfTheDayEnabled?"imageAndVideo":"off",K.g),this.settingsAPI.setPref(h._9.greeting,e.greetingEnabled,K.g),this.settingsAPI.setPref(h._9.feeds,e.selectedFeedDisplaySetting,K.g),t===r.WT.user&&i&&M.L.savePreferenceSetting(h._9.feeds,{setting:h._9.feeds,source:"ntp",timestamp:(new Date).getTime(),value:e.selectedFeedDisplaySetting}),void 0!==e.selectedFeedPivot&&this.settingsAPI.setPref(h._9.selectedFeedPivot,e.selectedFeedPivot,K.g)}updateQuickLinksDisplayOption(e,t){this.QSPTopSitesOverride=null;const n=this.getCurrentState();(0,u.$o)().setItem("prevQuickLinksValue",n.selectedQuickLinksDisplaySetting),this.executeSettingsChange(h._9.quickLinksDisplaySetting,h.VE[e]),this.updatePrefTSCollapsed(t)}updateHideDefaultLinksOption(e){this.executeSettingsChange(h._9.hideDefaultTopSites,e)}updateQuickBriefToggle(e){M.L.savePreferenceSetting(h._9.showQuickBrief,{setting:h._9.showQuickBrief,source:"ntp",timestamp:(new Date).getTime(),value:e}),this.updateUIForSettingsChange(h._9.showQuickBrief,e)}updateBackgroundImageType(e){this.executeSettingsChange(h._9.imageOfTheDay,"off"!==e),this.executeSettingsChange(h._9.currentBackgroundImageType,e)}updateTopSitesQuickLinkEndMarginUsedPadding(e){a.V.updateTopSitesQuickLinkEndMarginUsedPadding.getActionSender(this).send(e)}updateGreeting(e){this.executeSettingsChange(h._9.greeting,e)}updateFeeds(e,t,n=R.st.User){n===R.st.User&&(0,D.LC)(n,"feeds",h.gp[t],h.gp[e],(new Date).getTime()),n!==R.st.User&&"off"===e&&"off"!==t&&O.M0.sendAppErrorEvent({...y.MRy,message:`Feed is set to off by initiator: ${n}`,pb:{...y.MRy.pb}}),this.logCallStack("updateFeeds"),this.executeSettingsChange(h._9.feeds,e),this.updateUIForSettingsChange(h._9.feeds,e),n===R.st.User&&M.L.savePreferenceSetting(h._9.feeds,{setting:h._9.feeds,source:"ntp",timestamp:(new Date).getTime(),value:e})}async updateFeedsForWidgetsToggle(e){this.config.enableWidgetsRegion&&(await(0,ne.hq)(h.Ab.user),this.settingsAPI.setPref(h._9.widgetsRegion,e))}updateOfficeLeftRail(e){(0,u.$o)().setItem(A.JJ,e.toString())}officeLeftRailEnabled(){return(0,u.$o)().getObject(A.JJ,!1)}isContentFeedManagedByAdminPortal(){return(0,u.$o)().getObject("isContentFeedManagedByAdminPortal",!1)}updateContentFeedAdminPortalSetting(e){(0,u.$o)().setItem("isContentFeedManagedByAdminPortal",e.toString())}updatePageSetting(e,t){(0,u.$o)().setItem(e,t.toString())}isPageSettingEnabled(e,t){return(0,u.$o)().getObject(e,t)}executeSettingsChange(e,t){this.settingsAPI&&this.settingsAPI.setPref&&this.settingsAPI.setPref(e,t,K.g)}async getInitialState(){this.edgeChromiumStorageProvider.loadSynchronizedSettingsFromStorage();const e=this.edgeChromiumStorageProvider.fetchProperty(c.StructuredDataCardsUserPreference)||{};if(e){return{weatherVisible:!e.wsk||!!e.wsk.v,sportsVisible:!e.ssk||!!e.ssk.v,moneyVisible:!e.msk||!!e.msk.v,bingShoppingVisible:!e.bsk||!!e.bsk.v,horoscopeVisible:!e.hsk||!!e.hsk.v,onThisDayVisible:!e.osk||!!e.osk.v,electionsVisible:!e.esk||!!e.esk.v,esportsVisible:!e.essk||!!e.essk.v,lotteryVisible:!e.lsk||!!e.lsk.v,qnaVisible:!e.qsk||!!e.qsk.v,recipesVisible:!e.rsk||!!e.rsk.v,autosMarketplaceVisible:!e.amsk||!!e.amsk.v,healthCardVisible:!e.bhsk||!!e.bhsk.v}}return null}getPageLayoutStateAsync(e){const t=this.getCurrentState(),n=(0,S.Ou)();return n["GetAllPrefsRequest.Start"]=Math.round(performance.now()),new Promise((i=>{this.ntpApiHandle&&(t.ntpTheme=this.ntpApiHandle.ntpTheme,t.isQuickLinksSetByPolicy=this.ntpApiHandle.mostVisited?.some((e=>"ENFORCED"===e.enforcement)));const a=t;if("function"==typeof this.settingsAPI?.getAllPrefs){let s,c=!1;window.chrome.ntpSettingsPrivate.getAllPrefs((async d=>{n["GetAllPrefsRequest.End"]=Math.round(performance.now());const u=new URLSearchParams((0,G.zp)());if("vp"===u?.get("reqsrc")&&!d&&this.config.enableWidgetsRegion)this.isWidgetPreferenceAvailable=!0,t.enableWidgetsRegion=!0,t.disableWidgetsToggle=k.jG.IsHeroNTP,t.isContentFeedManagedByPolicy=!1,i(t);else if(void 0!==d){s=this.defineChromiumKeys(d),O.M0.addOrUpdateTmplProperty("init-dlayout",s[h._9.layout]),O.M0.addOrUpdateTmplProperty("init-feeds",s[h._9.feeds]),O.M0.addOrUpdateTmplProperty("bg-img-type",s[h._9.currentBackgroundImageType]),O.M0.addOrUpdateTmplProperty("bg-img-provider",s[h._9.currentBackgroundImageOption]?.provider),(0,J.Ad)(s),a.currentLayout=this.QSPLayoutOverride??h.F5[s[h._9.layout]],a.userSelectedLayout=this.QSPLayoutOverride?h.F5[s[h._9.layout]]:void 0,P.Al.SelectedFeedPivot=s[h._9.selectedFeedPivot];const n=new URLSearchParams(location.search);n.has("feedPivot")&&(P.Al.SelectedFeedPivot=n.get("feedPivot"));const u=s[h._9.gamerModeEnabled];if(void 0!==u){const e=this.getGroupPolicy(d,h._9.gamerModeEnabled);I.UpsellGamerMode=!1===u&&!("USER_POLICY"===e.controlledBy&&"ENFORCED"===e.enforcement)}else I.UpsellGamerMode=!1;a.prefDerivedBrowserFeatures={isCustomBackgroundImageFeatureFlightOn:h._9.customBackgroundImageInfo in s};const l=h._9.currentBackgroundImageType in s,p=h._9.imageOfTheDay in s;let g;this.isWindowsIndexerPromotedTopSitesPreferenceAvailable=h._9.windowsIndexerPromotedTopSites in s,this.isMinimumVisitAffiliateSitePreferenceAvailable=h._9.minVisitAffiliateSites in s;if(l&&!this.config.disableBackgroundGallery&&!k.jG.IsFrePage){const e=s[h._9.userNurturingUpdated];g=(0,o.F0)(e)}if(l&&p){this.chromiumBackgroundPrefType=r.h0.BOOLEAN_AND_STRING_ENUM;const e=s[h._9.imageOfTheDay],n=s[h._9.currentBackgroundImageType];e||"off"===n||"theme"===n?e&&"off"===n?(a.currentBackgroundImageType="imageAndVideo",c=!0):"custom"===s[h._9.currentBackgroundImageType]&&s[h._9.customBackgroundImageInfo]&&!s[h._9.customBackgroundImageInfo].has_image||"theme"===s[h._9.currentBackgroundImageType]&&t.ntpTheme&&t.ntpTheme.usingDefaultTheme?a.currentBackgroundImageType="imageAndVideo":a.currentBackgroundImageType=s[h._9.currentBackgroundImageType]:(a.currentBackgroundImageType="off",c=!0)}else if(p){this.chromiumBackgroundPrefType=r.h0.BOOLEAN;const e=s[h._9.imageOfTheDay];a.currentBackgroundImageType=e?"imageAndVideo":"off"}else l&&(this.chromiumBackgroundPrefType=r.h0.STRING_ENUM,a.currentBackgroundImageType=s[h._9.currentBackgroundImageType],"bing"===a.currentBackgroundImageType&&(a.currentBackgroundImageType="imageAndVideo"));if(l&&h._9.customBackgroundImageInfo in s){const e=s[h._9.customBackgroundImageInfo],t={hasImage:e[r.AL.hasImage],resourceUrl:e[r.AL.resourceUrl],timestamp:e[r.AL.timestamp]};a.customBackgroundImageInfo=t}let f;const m=s[h._9.currentBackgroundImageType];"off"!==m&&g&&g.backgroundSelectionMetadata&&(f=(0,o.VT)(g.backgroundSelectionMetadata)),e&&g&&!g.backgroundSelectionMetadata&&!g.changeBackgroundDaily&&(0,o.k4)("Rotate Image daily is off with no selection in the gallery cache",`Current background image type (pref): ${s[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}, current layout: ${h.F5[s[h._9.layout]]}`);const v=s[h._9.customBackgroundImageInfo];if((0,o.HG)(m,g?.backgroundSelectionMetadata)&&(0,o.zJ)(y.DnN,"Preference for current background image type and gallery selection do not match.",`Current background image type (pref): ${s[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,t.ntpTheme,h.F5[s[h._9.layout]]),g&&"custom"===m&&!v)Q.FI.isRuby||(0,o.zJ)(y.qP4,"Current BackgroundImageType is custom and custom background information is missing.",`Current background image type (pref): ${s[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,t.ntpTheme,h.F5[s[h._9.layout]]);else if(g&&"custom"===m&&v&&!v.has_image){(0,o.zJ)(y.qP4,"Current BackgroundImageType is custom and has image flag is false.",`Current background image type (pref): ${s[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,t.ntpTheme,h.F5[s[h._9.layout]]);const e=(0,o.tv)(g),n="imageAndVideo";a.currentBackgroundImageType=n,g.changeBackgroundDaily||"BrowserLocal"!==g?.backgroundSelectionMetadata?.provider||(0,o.zb)(g,e)}if(g&&"theme"===m&&!t.ntpTheme)Q.FI.isRuby||(0,o.zJ)(y.BFw,"Current Background Image type is theme and theme information is missing",`Current background image type (pref): ${s[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,t.ntpTheme,h.F5[s[h._9.layout]]);else if(g&&"theme"===m&&t.ntpTheme&&t.ntpTheme.usingDefaultTheme){(0,o.zJ)(y.Ibk,"Current Background Image type is theme and theme is default. Switching to background in rotation in cache.",`Current background image type (pref): ${s[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,t.ntpTheme,h.F5[s[h._9.layout]]);const e=(0,o.tv)(g),n="imageAndVideo";a.currentBackgroundImageType=n,"Theme"===g?.backgroundSelectionMetadata?.provider&&(0,o.zb)(g,e)}e&&("theme"===a.currentBackgroundImageType&&(0,o.oB)(a)?(0,o.k4)("RGB Theme background detected",`Current theme info: ${JSON.stringify(t.ntpTheme)}`):"theme"===a.currentBackgroundImageType&&(0,o.BA)(a)&&(0,o.k4)("Bundled Theme background detected",`Current theme info: ${JSON.stringify(t.ntpTheme)}`));let S=this.QSPTopSitesOverride??h._U[s[h._9.quickLinksDisplaySetting]];if("top"==S&&this.settingsAPI?.setPref("ntp.quick_links_options",1,K.g),this.config.enableCarouselTopSite&&"tworows"==S&&(S="onerow"),a.isQuickLinksSetByPolicy&&"off"==S&&(S="onerow"),a.ntpPrefOptionApiAvailability=!!S,"custom"!==a.currentLayout){const e=s[h._9.feeds];h.Wi[a.currentLayout].feeds_position&&e!==h.Wi[a.currentLayout].feeds_position&&O.M0.addOrUpdateTmplProperty("LFMismatchUF",`UF:${e}|LF:${h.Wi[a.currentLayout].feeds_position}|LogLM:${s["instrumentation.ntp.layout_mode"]}|LogFD:${s["instrumentation.ntp.news_feed_display"]}`),a.selectedQuickLinksDisplaySetting=S,a.currentBackgroundImageType=h.Wi[a.currentLayout].current_background_image_type,a.selectedFeedDisplaySetting=h.Wi[a.currentLayout].feeds_position,a.hideDefaultTopSites=h.Wi[a.currentLayout].hide_promoted_links}else{a.selectedQuickLinksDisplaySetting=S,a.greetingEnabled=s[h._9.greeting];const e=s[h._9.feeds];a.selectedFeedDisplaySetting=e,a.hideDefaultTopSites=s[h._9.hideDefaultTopSites]}let w=!1;const b=this.getGroupPolicy(d,h._9.feeds);if((b.isEnabled&&"ENFORCED"===b.enforcement||this.isContentFeedManagedByAdminPortal())&&(a.isContentFeedManagedByPolicy=!0,w=!0,"custom"!==a.currentLayout&&(a.selectedFeedDisplaySetting=s[h._9.feeds])),h._9.quickLinksDisplaySetting in s){const e=this.getGroupPolicy(d,h._9.quickLinksDisplaySetting);e.isEnabled&&"ENFORCED"===e.enforcement&&(a.isQuickLinksManagedByPolicy=!0,a.isRecommendedSitesManagedByPolicy=!0,w=!0,"custom"!==a.currentLayout&&(a.selectedQuickLinksDisplaySetting=S))}if(h._9.defaultBrowserSettingEnabled in s){const e=this.getGroupPolicy(d,h._9.defaultBrowserSettingEnabled);a.defaultBrowserSettingPolicyEnforced="ENFORCED"===e.enforcement}if(h._9.backgroundImageTypePolicy in s){const e=this.getGroupPolicy(d,h._9.backgroundImageTypePolicy);a.backgroundImageTypePolicy=s[h._9.backgroundImageTypePolicy],"ENFORCED"!=e.enforcement&&(a.backgroundImageTypePolicy=0),3===a.backgroundImageTypePolicy&&"off"!==a.currentBackgroundImageType||1===a.backgroundImageTypePolicy&&"imageAndVideo"===a.currentBackgroundImageType?(a.currentBackgroundImageType="off",c=!0):2===a.backgroundImageTypePolicy&&"custom"===a.currentBackgroundImageType&&(a.currentBackgroundImageType="imageAndVideo",c=!0),w=w||0!==a.backgroundImageTypePolicy}if(w&&"custom"!==a.currentLayout&&(a.currentLayout="custom",this.overrideLayoutPreferenceForPolicy()),a.imageOfTheDayEnabled="off"!==a.currentBackgroundImageType,"theme"===a.currentBackgroundImageType&&t.ntpTheme){const e=t.ntpTheme;e.imageUrl||e.backgroundColorRgba||(a.imageOfTheDayEnabled=!1),!e.usingDefaultTheme&&e.isNtpBackgroundDark?a.isNtpThemeBackgroundDark=!0:a.isNtpThemeBackgroundDark=!1}c&&this.migrateBackgroundPreference(a.currentBackgroundImageType),a.openSettingsDialogFlyout=s[h._9.showSettings],a.market=P.Al.Locale,a.isAppLauncherEnabledByPolicy=s[h._9.showAppLauncher],a.isCodexBingUpsellEnabledByPolicy=s[h._9.codexBingUpsellEnabled];const C=s[h._9.userChoices];O.M0.addOrUpdateTmplProperty("userPrefCount",C?C.length:"0");const A={};C?.reduce(((e,t)=>(e[t.setting]=t,e)),A);const E=A[h._9.showQuickBrief];a.showQuickBrief=!1!==E?.value;let M=s[h._9.widgetsRegion];if(this.config.defaultOffForWidgets){const{enabled:e}=await(0,D.zx)()??{},t=e?.includes("msNtpExpBlockWidgetsPromotions");t||(M=await(0,ne.IM)(M,(async e=>{await this.settingsAPI.setPref(h._9.widgetsRegion,e)}),{selectedFeedDisplaySetting:a.selectedFeedDisplaySetting},{defaultOff:this.config.defaultOffForWidgets}))}if(this.config.enableWidgetsRegion){this.isWidgetPreferenceAvailable=h._9.widgetsRegion in s;const{enabled:e}=await(0,D.zx)()??{},t=e?.includes("msNtpExpBlockWidgetsPromotions");t?O.M0.addOrUpdateTmplProperty("wgt_edge_flight","1"):M=await(0,ne.IM)(M,(async e=>{await this.settingsAPI.setPref(h._9.widgetsRegion,e)}),{selectedFeedDisplaySetting:a.selectedFeedDisplaySetting},{enableWidgetsWPOProm:this.config.enableWidgetsWPOProm,defaultOnInPartialView:this.config.enableWidgetsInPartialView,defaultOff:!0}),a.enableWidgetsRegion=!!M,this.overrideWidgetsQSP||=a.enableWidgetsRegion,a.disableWidgetsToggle=k.jG.IsHeroNTP}const x=await(0,ne.Of)();if(O.M0.addOrUpdateTmplProperty("wgt_src",x??h.Ab.default),O.M0.addOrUpdateTmplProperty("widgetsPref",M?"1":"0"),a.isCompanyLogoEnabledByPolicy=void 0===s[h._9.companyLogoEnabled]||s[h._9.companyLogoEnabled],a.companyLogoBackplateColor=s[h._9.companyLogoBackplateColor],h._9.verticalTabsCollapsed in s&&(a.verticalTabsCollapsed=s[h._9.verticalTabsCollapsed]),h._9.verticalTabsOpened in s&&(a.verticalTabsOpened=s[h._9.verticalTabsOpened]),h._9.hideDefaultTopSites in s){a.hideDefaultTopSites=s[h._9.hideDefaultTopSites];const e=this.getGroupPolicy(d,h._9.hideDefaultTopSites);e.isEnabled&&"ENFORCED"===e.enforcement&&(a.hideDefaultTopSitesManagedByPolicy=!0)}if("onscroll"===a.selectedFeedDisplaySetting&&(a.selectedFeedDisplaySetting="headingsonly",setTimeout((()=>{const e=window.chrome&&window.chrome.ntpSettingsPrivate;e&&e.setPref(h._9.feeds,a.selectedFeedDisplaySetting,K.g)}))),this.config.showPulse){const e=A[R.nc.enable_pulse];a.pulseEnabled=!e||e.value}if(this.config.topSitesOpenInNewTab){["always","peek"].includes(a.selectedFeedDisplaySetting)?a.openInNewTab=!0:a.openInNewTab=!1;const e=A[R.nc.topsites_open_in_new_tab];e&&(a.openInNewTab=e.value),O.M0.addOrUpdateTmplProperty("openInNewTab",a.openInNewTab?"1":"0")}if(this.config.copilotSuggestionsToggle){a.showSuggestions=!0;const e=A[R.nc.show_copilot_suggestions_toggle];e&&(a.showSuggestions=e.value),O.M0.addOrUpdateTmplProperty("showCopilotSuggestions",a.showSuggestions?"1":"0")}O.M0.addOrUpdateTmplProperty("wgEnabled",a.greetingEnabled?"1":"0");T.cX.getQueryParameterByName("isFREModalBackground",(0,G.zp)())&&(a.selectedFeedDisplaySetting="headingsonly",O.M0.addOrUpdateTmplString("FREModalBackgroundLoaded:1"));let L=T.cX.getQueryParameterByName("feedDisplay",(0,G.zp)());L=k.jG.IsHeroNTP&&!this.config.heroNoPromoLayout||k.jG.IsUCBased?"always":L,L&&["always","peek","headingsonly","onscroll","off"].indexOf(L)>-1&&(a.userSelectedFeedDisplaySetting=a.selectedFeedDisplaySetting,a.selectedFeedDisplaySetting=L,(0,D.LC)(R.st.Lpo,"feeds",h.gp[a.userSelectedFeedDisplaySetting],h.gp[a.selectedFeedDisplaySetting],(new Date).getTime(),this.config.enableOptimizedTmpl),O.M0.addOrUpdateTmplString("feedDisplay:1"),O.M0.addOrUpdateTmplString(`originalLayout:${a.userSelectedFeedDisplaySetting}`));if(!((0,V.N)()&&g?.backgroundSelectionMetadata&&!g?.changeBackgroundDaily||P.Al.EdgeNTPHeader?.backgroundImage?.userSelected)&&(0,G.zp)().includes("ocid=wind_spot_2")&&(0,G.zp)().includes("segment=videos")&&(a.displayBackgroundImageType="hero"),"headingsonly"===a.selectedFeedDisplaySetting){const e=A[R.nc.dismiss_scroll_down_button];e&&(a.isScrollDownButtonDismissed=!!e.value)}(0,V.N)()&&(this.config.enableWidgetsUpsellButton?(0,o.Ad)(s[h._9.userNurturingUpdated]):(0,o.Lv)(s[h._9.userNurturingUpdated]));const F=window.location&&window.location.search?.includes("mock-ntp-header=1");(0,V.N)()||F||(e=>{const t=P.Al.EdgeNTPHeader;t&&(Z(h._9.selectedFeedPivot,t.selectedFeedPivot,e.selectedFeedPivot||Y),Z(h._9.quickLinksDisplaySetting,h._U[t.quickLinkOption],e.selectedQuickLinksDisplaySetting),Z(h._9.backgroundImageTypePolicy,h.MT[t.backgroundImageTypePolicy],h.MT[e.backgroundImageTypePolicy]),k.jG.IsHeroNTP||(Z(h._9.layout,h.F5[t.layoutMode],e.currentLayout),Z(h._9.feeds,t.newsFeedDisplay,e.selectedFeedDisplaySetting)))})(a),i(a),(0,V.N)()||O.M0.addOrUpdateTmplProperty("ssrChromiumSettingLayout",a.selectedFeedDisplaySetting)}else v.k.logError("Failed to get saved layout preferences."),i(t)}))}else(0,m.H)(y.MFQ,"getAllPrefs API not available"),i(t)}))}registerOnConfigDataChangedCallback(){this.settingsAPI&&this.settingsAPI.onConfigDataChanged&&this.settingsAPI.onConfigDataChanged.addListener((e=>{if(e){const t=e[r.lA.inPageSearchBoxType];t!==r.HT.redirect&&t!==r.HT.bing||a.V.updateConfigDataChanged.getActionSender(this).send(t)}}))}registerOnPrefsChangeCallback(){this.settingsAPI&&this.settingsAPI.onPrefsChanged&&this.settingsAPI.onPrefsChanged.addListener((e=>{if(!this.didLayoutModeChangeInCurrentTab){const e=(0,u.$o)().getObject(this.layoutChangeInitiatorKey);if(e===r.WT.wpoPrerenderTab||e===r.WT.ntpVisibleTab)return}const t=e[0];if(window.isSSREnabled&&t.key===h._9.userChoices){const e=t.value;if(e.sort(((e,t)=>t.timestamp-e.timestamp)),e[0].setting===R.nc.tscollapsed&&"wpo"===e[0].source)return}this.updateUIForSettingsChange(t.key,t.value,e)}))}async updateUIForSettingsChange(e,t,n){const i=await this.getPageSettingsStateAsync(),o={...i};if(this.hasFeedDisplaySettingChanged=i?.selectedFeedDisplaySetting!==o?.selectedFeedDisplaySetting,e===h._9.backgroundImageTypePolicy&&(0,w.Z)(),e===h._9.feeds&&n){const t=this.getGroupPolicy(n,e);t.isEnabled&&"ENFORCED"===t.enforcement||this.isContentFeedManagedByAdminPortal()?o.isContentFeedManagedByPolicy=!0:o.isContentFeedManagedByPolicy=!1}if(e===h._9.layout){const e=h.F5[t];if(o.currentLayout=e,o.userSelectedLayout&&(o.userSelectedLayout=e),t!==h.Uq.custom&&(o.hideDefaultTopSites=!!o.hideDefaultTopSitesManagedByPolicy||h.Wi[e].hide_promoted_links,o.currentBackgroundImageType=h.Wi[e].current_background_image_type,o.selectedFeedDisplaySetting=h.Wi[e].feeds_position,o.userSelectedFeedDisplaySetting&&(o.userSelectedFeedDisplaySetting=h.Wi[e].feeds_position),o.selectedQuickLinksDisplaySetting=i.selectedQuickLinksDisplaySetting,o.imageOfTheDayEnabled="off"!==o.currentBackgroundImageType),"visible"===document.visibilityState&&n)for(const e of this.preferenceChangeCallbacks)e(n,o)}else{switch(e){case h._9.hideDefaultTopSites:{const e=this.getGroupPolicy(n,h._9.hideDefaultTopSites),i=e.isEnabled&&"ENFORCED"===e.enforcement;o.hideDefaultTopSites=t,o.hideDefaultTopSitesManagedByPolicy=i;break}case h._9.quickLinksDisplaySetting:o.selectedQuickLinksDisplaySetting=h._U[t];break;case h._9.showQuickBrief:o.showQuickBrief=t;break;case h._9.imageOfTheDay:this.chromiumBackgroundPrefType===r.h0.BOOLEAN&&(o.currentBackgroundImageType=t?"imageAndVideo":"off",o.displayBackgroundImageType=void 0,o.imageOfTheDayEnabled="off"!==o.currentBackgroundImageType);break;case h._9.currentBackgroundImageType:if(o.currentBackgroundImageType=t,o.displayBackgroundImageType=void 0,o.imageOfTheDayEnabled="off"!==o.currentBackgroundImageType,o.isNtpThemeBackgroundDark=void 0,"theme"===o.currentBackgroundImageType&&i.ntpTheme){const e=i.ntpTheme;e.imageUrl||e.backgroundColorRgba||(o.imageOfTheDayEnabled=!1),!e.usingDefaultTheme&&e.isNtpBackgroundDark?o.isNtpThemeBackgroundDark=!0:o.isNtpThemeBackgroundDark=!1}this.settingsAPI.setPref(h._9.imageOfTheDay,o.imageOfTheDayEnabled,K.g);break;case h._9.customBackgroundImageInfo:{const e=t,n={hasImage:e[r.AL.hasImage],resourceUrl:e[r.AL.resourceUrl],timestamp:e[r.AL.timestamp]};o.customBackgroundImageInfo=n;break}case h._9.feeds:o.selectedFeedDisplaySetting=t,o.userSelectedFeedDisplaySetting&&(o.userSelectedFeedDisplaySetting=t);break;case h._9.greeting:o.greetingEnabled=t;break;case h._9.showSettings:o.openSettingsDialogFlyout=t;break;case h._9.showAppLauncher:o.isAppLauncherEnabledByPolicy=t;break;case h._9.widgetsRegion:o.enableWidgetsRegion=t,this.overrideWidgetsQSP||=t}if("visible"===document.visibilityState&&n)for(const e of this.preferenceChangeCallbacks)e(n,o)}if(e===h._9.verticalTabsCollapsed&&(o.verticalTabsCollapsed=t),e===h._9.verticalTabsOpened&&(o.verticalTabsOpened=t),e===h._9.userChoices){const e=t.reduce(((e,t)=>(e[t.setting]=t,e)),{});this.config.showPulse&&e[R.nc.enable_pulse]&&(o.pulseEnabled=!!e[R.nc.enable_pulse].value),this.config.topSitesOpenInNewTab&&e[R.nc.topsites_open_in_new_tab]&&(o.openInNewTab=!!e[R.nc.topsites_open_in_new_tab].value),this.config.copilotSuggestionsToggle&&e[R.nc.show_copilot_suggestions_toggle]&&(o.showSuggestions=!!e[R.nc.show_copilot_suggestions_toggle].value),e[R.nc.dismiss_scroll_down_button]&&(o.isScrollDownButtonDismissed=!!e[R.nc.dismiss_scroll_down_button].value)}e===h._9.quickLinksDisplaySetting&&(o.selectedQuickLinksDisplaySetting=h._U[t]),e===h._9.companyLogoEnabled&&(o.isCompanyLogoEnabledByPolicy=t),(0,f.Z)(o,i)&&e!==h._9.widgetsRegion||g.J.updateLayout.getActionSender(this).send(o)}defineChromiumKeys(e){const t={};let n;for(n of e)t[n.key]=n.value;return t}getGroupPolicy(e,t){const n=e.find((e=>e.key===t)),i={key:n.key,value:n.value,type:n.type};return n&&n.controlledBy&&n.enforcement?(i.isEnabled=!0,i.enforcement=n.enforcement,i.controlledBy=n.controlledBy):i.isEnabled=!1,i}getPromoFormParamList(){return this.config&&this.config.promoFormParamList?this.config.promoFormParamList:null}setContentDisabled(e){e.greetingEnabled=!1,e.selectedFeedDisplaySetting="off",e.userSelectedFeedDisplaySetting&&(e.userSelectedFeedDisplaySetting="off"),e.currentLayout="custom",e.userSelectedLayout&&(e.userSelectedLayout="custom"),e.imageOfTheDayEnabled=!1,e.currentBackgroundImageType="off"}isPromotedTopSitesPreferenceAvailable(){return this.isWindowsIndexerPromotedTopSitesPreferenceAvailable}isMinimumVisitAffiliateSitesPreferenceAvailable(){return this.isMinimumVisitAffiliateSitePreferenceAvailable}isWidgetsPreferenceAvailable(){return this.isWidgetPreferenceAvailable}shouldOverrideWidgetsQSP(){return this.overrideWidgetsQSP}migrateBackgroundPreference(e){this.settingsAPI.setPref(h._9.imageOfTheDay,"off"!==e,K.g),this.settingsAPI.setPref(h._9.currentBackgroundImageType,e,K.g)}overrideLayoutPreferenceForPolicy(){this.settingsAPI.setPref(h._9.layout,h.Uq.custom,K.g)}wpoPromoteNewLayout(e,t){this.updateLayout(e,t)}wpoPromoteNewFeedDisplaySetting(e,t){this.updateFeeds(e,t,R.st.Wpo)}updatePrefTSCollapsed(e){e===R.dE.WPO_CLOSE?this.saveTsCollapsed(R.QO.WPO_CLOSED):e===R.dE.WPO_OPEN?this.saveTsCollapsed(R.QO.WPO_OPENED):e===R.dE.MANUAL?this.saveTsCollapsed(R.QO.MANUAL):e===R.dE.REVERT&&this.saveTsCollapsed(R.QO.REVERT_WPO_CLOSE)}saveTsCollapsed(e){const t={setting:R.nc.tscollapsed,source:"updatePrefTSCollapsed",timestamp:(new Date).getTime(),value:e};M.L.savePreferenceSetting(R.nc.tscollapsed,t),O.M0.addOrUpdateTmplProperty(R.nc.tscollapsed,`${t.value}|${t.source}|${t.timestamp}`)}onlyUpdateQuickLinksDisplaySetting(e){this.executeSettingsChange(h._9.quickLinksDisplaySetting,e)}logCallStack(e){const t=(new Error).stack,n=(0,J.E7)(t);n&&O.M0.addOrUpdateTmplProperty(e+"CallStack",n)}async isInEdgeFeature(){if(await(0,ee._$)()){const e=await(0,ee._N)();if(this.isPreCheckPassed=e,!e)return!0}return!1}async shouldReTriggerCoachMark(e,t){if(!(0,V.N)())return!1;const n=(0,u.$o)().getObject(this.promotion);if(!n||!n.time)return O.M0.addOrUpdateTmplProperty("reTriggerCoachMarkFailedNolyp","1"),!1;const i=await(0,o.LU)("layoutPromotion");if(Date.now()-i<=2592e6)return O.M0.addOrUpdateTmplProperty("reTriggerCoachMarkFailedShown","1"),!1;if(Date.now()-n.time>3e3)return O.M0.addOrUpdateTmplProperty("reTriggerCoachMarkFailedOverTime",n.time.toString()),!1;const{isPromoted:r,muid:a,coachMarkShown:s,recommendedLayout:c,recommendedFeedDisplaySetting:d}=n,l=k.jG.UserId,p=c&&c!==e||d&&t!==d;return!r||s||a!==l||p?(O.M0.addOrUpdateTmplProperty("reTriggerCoachMarkFailed",`${r?"1":"0"}|${a===l?"1":"0"}|${s?"1":"0"}|${p?"1":"0"}`),!1):(O.M0.addOrUpdateTmplProperty("reTriggerCoachMark",n.time.toString()),!0)}async isFRE(){const e=await(0,D.ZR)(),t=await(0,D.rc)();if(!e&&!t)return O.M0.addOrUpdateTmplProperty("noProfAndDeviceFreTime","1"),!1;const n=1728e5,i=Date.now();return e&&i-e<=n?(O.M0.addOrUpdateTmplProperty("isFRE",`${i}|newProfFreTime:${e}`),!0):t&&i-t<=n?(O.M0.addOrUpdateTmplProperty("isFRE",`${i}|newDevFreTime:${t}`),!0):(O.M0.addOrUpdateTmplProperty("notFRE",`${i}|${e}|${t}`),!1)}async shouldApplyPromotion(e,t,n,i,o){const{muid:a}=n,{fromLayout:s,fromFeed:c,knobIdx:d,knobIdxPrefix:u}=n.layoutPromotionData;if(c&&c.includes($.headingsonly+"")&&(!o||k.jG.IsHeroNTP))return O.M0.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.YG.widgetsRegionDisabled),!1;const l=s&&!s.includes(B[e]+""),p=c&&!c.includes($[t]+""),h=a&&a!==k.jG.UserId;if(i)return O.M0.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.YG.isInEdgeExperience),!1;if(h)return O.M0.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.YG.userMuidMisMatch),!1;if(l){if(this.config.enablePerfImprove){this.isLpo()||(0,x.NP)(null)}return O.M0.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.YG.isNotOneOfFromLayouts),!1}if(p){if(this.config.enablePerfImprove){this.isLpo()||(0,x.NP)(null)}return O.M0.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.YG.isNotOneOfFromFeeds),!1}return d&&u&&d.startsWith(u)?await this.isInEdgeFeature()?(O.M0.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.YG.isENPCheckFailed),!1):await this.isFRE()?(O.M0.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.YG.isFRE),!1):!P.Al.CurrentFlightSet.has("prg-forcenoads")&&!await(0,D.VS)()||(O.M0.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.YG.isInEdgeNoAdsFlight),!1):((0,x.NP)(null),O.M0.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.YG.isNotInPromotionV2),!1)}saveLayoutPromotionData(e){if((0,V.N)()){const t=this.getCurrentState(),n=e[0].properties.fromFeeds&&e[0].properties.fromFeeds.includes("headingsonly");if("headingsonly"===t.selectedFeedDisplaySetting&&n&&(!t.enableWidgetsRegion||k.jG.IsHeroNTP))return;const i=e[0].properties,r=O.M0?.getRequestId?.()??"";this.storePromotionSignalTransition(i,r);const o={...i,clientReceivedTimestamp:(new Date).getTime(),usermuidWhenReceived:k.jG.UserId??"",requestIdWhenReceived:r,isPrerenderWhenReceived:P.Al.IsPrerender??!1};W.getRecommendedLayout(this.config,t.currentLayout,t.selectedFeedDisplaySetting,o).then((e=>{e?W.storeWpoLayoutPromotionToBrowser(e):(0,x.NP)(null)}))}}storePromotionSignalTransition(e,t){const n=(0,u.$o)().getObject(this.layoutPromotionSignalTransition),i=k.jG.UserId??"";n&&n.knobIdx===e.knobIdx||(0,u.$o)().setObject(this.layoutPromotionSignalTransition,{clientReceivedTime:(new Date).getTime(),usermuid:i,requestIdWhenReceived:t,knobIdx:e.knobIdx})}isLpo(){let e=T.cX.getQueryParameterByName("feedDisplay",(0,G.zp)());return e=k.jG.IsHeroNTP?"always":e,!!e}}var re=n(38947);class oe{reduce(e,t){if(!e)return{...h.L_,contentSource:0,isLoadCompleted:!1,greetingEnabled:!0,openSettingsDialogFlyout:!1,inPageSearchBoxType:null,market:P.Al.Locale};if(!t)return e;let n;return re.G.handleAction(t,a.V.pageLayoutStateLoaded,(t=>{n={...e,...t,isLoadCompleted:!0}})),re.G.handleAction(t,g.J.updateLayout,(t=>{n={...e,...t}})),re.G.handleAction(t,a.V.updateLocalStorage,(t=>{n={...e,sdCardSettings:t}})),re.G.handleAction(t,a.V.loadLocalStorage,(t=>{n={...e,sdCardSettings:t}})),re.G.handleAction(t,a.V.updatePrimaryAccountInfo,(t=>{n={...e,primaryAccountInfo:t}})),re.G.handleAction(t,a.V.updateConfigData,(t=>{n={...e,configData:t}})),re.G.handleAction(t,a.V.updateConfigDataChanged,(t=>{n={...e,inPageSearchBoxType:t}})),re.G.handleAction(t,a.V.updateTopSitesQuickLinkEndMarginUsedPadding,(t=>{n={...e,topSitesQuickLinkEndMarginUsedPadding:t}})),re.G.handleAction(t,a.V.marketUpdated,(t=>{n={...e,market:t}})),re.G.handleAction(t,a.V.updateNtpTheme,(t=>{n={...e,ntpTheme:t}})),re.G.handleAction(t,a.V.updateWPOLayoutPromotion,((t,i)=>{n={...e,isLayoutWPOPromoted:t,layoutPromotionType:i}})),re.G.handleAction(t,a.V.updateWPOTopsitesPromotion,(t=>{n={...e,isTopsitesWPOPromoted:t}})),re.G.handleAction(t,a.V.updateWPOLayoutPromotionSource,(t=>{n={...e,promotionSource:t}})),re.G.handleAction(t,a.V.updateWPOPromotionCoachMark,(t=>{n={...e,coachmark:t}})),re.G.handleAction(t,a.V.updateFeedStateOnScroll,(t=>{n={...e,isFeedStateChangedOnScroll:t}})),n||e}}var ae=n(84265);const se={experienceConfigSchema:{}}},24039:function(e,t,n){n.d(t,{F:function(){return r}});var i=n(73264);class r{constructor(){this.config={},this.strings={},this.initialized=!1}async initConfig(e){this.initialized||(this.config=await this.getConfigFromRef(e)||{},this.strings=this.config?.localizedStrings||{},this.initialized=!!this.config&&!!this.config?.localizedStrings)}getConfig(){return this.config}getLocStrings(){return this.strings}async getConfigFromRef(e){try{const t=e?.configRef||this.configRef,n=await i.U.getConfig(t);return n?.properties}catch(e){return{}}}}},77820:function(e,t,n){var i;n.d(t,{Q:function(){return i}}),function(e){e.Android="android",e.Ios="ios",e.Linux="linux",e.Macos="macos",e.Windows="windows",e.Xbox="xbox"}(i||(i={}))},52998:function(e,t,n){n.d(t,{GB:function(){return s},Km:function(){return c},Oq:function(){return h},Sp:function(){return p},Wc:function(){return d},cm:function(){return l},e_:function(){return f},oH:function(){return g},r7:function(){return a},yL:function(){return u}});var i=n(24358);const r=i.z.Alert,o={build:""};function a(e){Object.assign(o,e)}const s={id:22012,severity:r,pb:o},c={id:22014,severity:i.z.Critical,pb:o},d=(i.z.Deprecated,i.z.Deprecated,i.z.Deprecated,i.z.Deprecated,i.z.Deprecated,i.z.Deprecated,{id:22027,severity:i.z.Critical,pb:o}),u=(i.z.Critical,i.z.Critical,{id:22031,severity:r,pb:o}),l={id:22032,severity:r,pb:o},p={id:22033,severity:r,pb:o},h={id:22034,severity:r,pb:o},g={id:22050,severity:r,pb:o},f={id:22051,severity:i.z.Deprecated,pb:o};i.z.Deprecated,i.z.Deprecated,i.z.HighImpact},17268:function(e,t,n){n.d(t,{j:function(){return p}});var i,r,o,a,s=n(2907);!function(e){e.OneColumn="OneColumn",e.TwoColumn="TwoColumn",e.ThreeColumn="ThreeColumn",e.FourColumn="FourColumn",e.FiveColumn="FiveColumn",e.Any="Any"}(i||(i={})),function(e){e.customExperience="customExperience",e.grid="grid",e.horizontalStack="horizontalStack",e.layout="layout",e.rail="rail",e.verticalStack="verticalStack"}(r||(r={})),function(e){e.actionTrigger="ActionTrigger",e.button="Button",e.heading="Heading",e.peregrineExperience="PeregrineExperience",e.typography="Typography",e.webComponentExperience="WebComponentExperience"}(o||(o={})),function(e){e.riverGridChildren="riverGridChildren"}(a||(a={}));var c=n(74604),d=n(72263),u=n(52965),l=n(85663);class p{static#e=this.expValidatorMap=new Map;static#t=this.expConfigMap=new Map;static registerAppValidator(e){this.expValidatorMap=e.getAllValidators()}static processConfig(e,t){if(!this.expValidatorMap||this.expValidatorMap.size<1||!e||!e.childExpValidatorMap)return e;const n=e.childExpValidatorMap;let i=null,r=null;for(const o in n){const a=n[o];if(this.expValidatorMap.has(o)){this.expValidatorMap.get(o)(a.validationArgs)&&(null===r&&(r=this.expConfigMap.get(t)||e),null===i&&(i=(0,u.Z)(r)),e=this.filterConfig(a,r))}}return i?this.expConfigMap.set(t,i):null===r&&this.expConfigMap.has(t)&&(e=this.expConfigMap.get(t)),e}static removeFromRiverGridChildren(e,t){const n=t.riverGridChildren;return n&&n.forEach((t=>{const n=t.children;if(n){const i=e.childExperienceConfigInfo,r=(0,s.M)(i);t.children=n.filter((e=>{const t=e.childExperienceConfigInfo;return!t||!i||i.instanceId!==t.instanceId||r!==(0,s.M)(t)}))}})),t}static getChildrenDataConnectorConfigInfos(e){const t=[];if(e&&e.dataConnectors&&e.dataConnectors.length>0){const n=p.getOrdinalObjectForCurrentBreakpoint(e.dataConnectors);n&&n.children&&n.children.length>0&&n.children.forEach((e=>{t.push(e)}))}return t}static getMetadataByScreenWidth(e,t){return t.find((t=>t.screenWidth===e))||t.find((e=>e.screenWidth===i.Any))}static getOrdinalObjectForCurrentBreakpoint(e){switch((0,c.Bn)().currentColumnArrangement){case d.K$.c1:return p.getMetadataByScreenWidth(i.OneColumn,e);case d.K$.c2:return p.getMetadataByScreenWidth(i.TwoColumn,e);case d.K$.c3:return p.getMetadataByScreenWidth(i.ThreeColumn,e);case d.K$.c4:return p.getMetadataByScreenWidth(i.FourColumn,e);case d.K$.c5:return p.getMetadataByScreenWidth(i.FiveColumn,e);default:return p.getMetadataByScreenWidth(i.Any,e)}}static compositionOverrideResolver(e,t){const{getCompositionIdOverride:n}=t||{},{composition:i,compositionOverrides:r}=e;return r&&(0,l.isFunction)(n)&&r[n()]||i}static getChildrenExperienceConfigInfos(e,t){const n=[];if(e&&e.composition){const i=p.compositionOverrideResolver(e,t);switch(i.type){case r.rail:case r.horizontalStack:case r.layout:i.page.children.forEach((e=>{void 0!==e.children&&e.children.forEach((e=>{if(!e.children)return;const{childType:t}=e.children;t?t===o.peregrineExperience&&n.push(e.children.child):n.push(e.children)}))}));break;case r.grid:i.grid.rows.forEach((e=>{void 0!==e.columns&&e.columns.forEach((e=>{const{itemType:t}=e.item;t&&t===o.peregrineExperience&&n.push(e.item.child)}))}));break;case r.customExperience:{const e=i;n.push(e.experience);break}}}return n}static filterConfig(e,t){return e&&"string"==typeof e.sectionName&&e.sectionName.toLowerCase()===a.riverGridChildren.toLowerCase()?this.removeFromRiverGridChildren(e,t):t}static resetValidatorMap(){this.expValidatorMap.clear()}static resetConfigMap(){this.expConfigMap.clear()}}},91423:function(e,t,n){n.d(t,{Q:function(){return r}});var i=n(93092);const r={[i.o.Essential]:["AL","ALS","AL_ANON","AL_APP_ANNON","AL_STATE","ANON","ANONCKNM","APP_ANON","APP_TWID","APP_WID","BFB","BFBUSR","DefaultLocation","Edgecac","FreWv","GalleryMode","MC1","MS0","MSCC","MSFPC","MSPRequ","MUID","MUIDB","MicrosoftApplicationsTelemetryDeviceId","OSAT","OSATE","OptanonAlertBoxClosed","OptanonConsent","OvrlyTrf","PreferencesMsn","RC","RUM","RecentStocks","SRCHD","SRCHHPGUSR","SRCHUID","SRCHUSR","Sample","TOptOut","TWID","UMH2E","WID","WLMMAC","_EDGE_S","_EDGE_V","_SS","_U","__rubyState","__rubyUX","_cb","_cb_ls","_cb_svref","_copilotDiscoverUX","_hpFeedView","_switchBannerClosed","aace","ace","afdprotocol","ahs-dismissed","ahs-installed","ahs-showings","ai_session","aqp","at-bing","bcookie","bingimage","bwssoc","cac","cb","cbypass","cfrecnt","cg_new_visit_timestamp","cgusc","child","cmdisp","cmwr","currentaccount","ddlcur","df","ecasession","elt","eub","eupubconsent","eupubconsent-v2","gfrecnt","hidebn","i18next","ipt","ipv6","isdomainmigrated","lt","marketPref","mktreset","mniotd","mnmarket","msaOptout","msaoptout","nactk","no_read_more","notiStats","ntps","numac","orfc_feeds","pbmi","pglt-edgeChromium-dhp","pglt-edgeChromium-ntp","pglt-microsoftNews-msnews","pglt-microsoftNews-startpage","pop","refresh-reason","sbc-dismissed","sbc-installed","sbc-showings","smd","sptmarket","sptmarket_restored","theme","timeZoneOffsetInMins","uaid","videoCookiesLastCategory","videoerrorcount","vjsusrpref","w10rp","w10rpls"],[i.o.Advertising]:["BizoID","adslrid","dub_downlevel","eAPID","ecadprovider","ecisession","ecmsession","ecsession"],[i.o.SocialMedia]:["promptDisplayCount"],[i.o.ThirdPartyAnalytics]:[]}},54655:function(e,t,n){n.d(t,{id:function(){return i},ks:function(){return o},pA:function(){return r}});const i="MSCC",r="MUID",o="eupubconsent-v2"},17763:function(e,t,n){n.d(t,{e:function(){return r},n:function(){return i}});const i="consent-banner-container",r="onetrust-sdk"},82218:function(e,t,n){n.d(t,{C:function(){return i},H:function(){return r}});const i="consent.onetrust",r="widgetHost.cookieConsent"},62201:function(e,t,n){var i;n.d(t,{i:function(){return i}}),function(e){e.MSCCBanner="mscc",e.OneTrustBanner="onetrust",e.WidgetHost="widgethost",e.None="none"}(i||(i={}))},62042:function(e,t,n){var i;n.d(t,{_:function(){return i}}),function(e){e[e.Unknown=0]="Unknown",e[e.Required=1]="Required",e[e.NotRequired=2]="NotRequired"}(i||(i={}))},93092:function(e,t,n){var i;n.d(t,{o:function(){return i}}),function(e){e.Essential="ES",e.Advertising="AD",e.SocialMedia="SM",e.ThirdPartyAnalytics="AL"}(i||(i={}))},19517:function(e,t,n){var i;n.d(t,{Q:function(){return i}}),function(e){e.C0001="C0001",e.C0002="C0002",e.C0003="C0003",e.C0004="C0004"}(i||(i={}))},92784:function(e,t,n){var i;n.d(t,{G:function(){return i}}),function(e){e.High="High",e.Medium="Medium",e.Low="Low"}(i||(i={}))},20782:function(e,t,n){var i;n.d(t,{f:function(){return i}}),function(e){e.Lax="lax",e.Strict="strict",e.None="none"}(i||(i={}))},82854:function(e,t,n){n.d(t,{hI:function(){return p},iF:function(){return l},o4:function(){return d},rv:function(){return u}});var i=n(17763),r=n(54655),o=n(33779),a=n(5302),s=n(21215),c=n(19625);function d(){return(0,s.N)()&&null!=document.getElementById(i.n)}function u(){return d()&&null===(0,c.ej)(r.id)}function l(){return(0,s.N)()&&null!=document.getElementById(i.e)}function p(){if(!(0,s.N)())return!!window.__tcfapi&&null===(0,c.ej)(r.ks);let e;try{e=JSON.parse(document.head.getAttribute("data-client-settings"))}catch(e){(0,o.H)(a.GQD,"")}const{locale:t={},geo_country:n,geo_subdivision:i}=e||{},{language:d="",market:u=""}=t;return("ca"!==u.toLowerCase()||"fr"!==d.toLowerCase()&&"en"!==d.toLowerCase()||"CA"!==n||"Quebec"===i)&&(l()&&null===(0,c.ej)(r.ks))}},32739:function(e,t,n){n.d(t,{x:function(){return r}});var i=n(19625);function r(e,t,n,r){if(!e||0===e.length)return;const o=e.includes(n),a=t?".msn.cn":".msn.com";e.includes(r)?(0,i.sq)("afdprotocol",void 0,-1,a,"/"):o&&(0,i.sq)("afdprotocol","h3",14,a,"/")}},47898:function(e,t,n){n.d(t,{A:function(){return d},U:function(){return i}});var i,r=n(81489),o=n(52185),a=n(62042),s=n(80293);!function(e){e[e.Initialized=1]="Initialized",e[e.CookieConsentProvider=2]="CookieConsentProvider",e[e.CookieConsentStatus=3]="CookieConsentStatus",e[e.ActiveCookieCategories=4]="ActiveCookieCategories"}(i||(i={}));const c=Symbol("cookieManagementState"),d=(0,r.h)({getInstance:()=>o.Gq.get(c,(()=>{const e=new s.v("CookieManagementStateKey");return e.set(i.Initialized,!1),e.set(i.CookieConsentStatus,a._.Unknown),e}))})},17911:function(e,t,n){n.d(t,{Q:function(){return p}});var i=n(62201),r=n(62042),o=n(82218),a=n(93092),s=n(19517);const c={[s.Q.C0001]:a.o.Essential,[s.Q.C0002]:a.o.Advertising,[s.Q.C0003]:a.o.SocialMedia,[s.Q.C0004]:a.o.ThirdPartyAnalytics};var d=n(47898),u=n(82854),l=n(21215);function p(e){if(d.A.get(d.U.Initialized))return;let t=i.i.None,n=r._.NotRequired;(0,l.N)()&&(e&&e.required?(t=i.i.WidgetHost,n=e.categories?r._.NotRequired:r._.Required,h(e.categories),window.addEventListener(o.H,(e=>h(e.detail)))):(0,u.o4)()?(t=i.i.MSCCBanner,n=(0,u.rv)()?r._.Required:r._.NotRequired,n===r._.Required?d.A.set(d.U.ActiveCookieCategories,[a.o.Essential]):d.A.set(d.U.ActiveCookieCategories,[...Object.values(a.o)])):(0,u.iF)()&&(t=i.i.OneTrustBanner,n=(0,u.hI)()?r._.Required:r._.NotRequired,g(),window.addEventListener(o.C,g))),d.A.set(d.U.CookieConsentStatus,n),d.A.set(d.U.CookieConsentProvider,t),d.A.set(d.U.Initialized,!0)}function h(e){const t=e&&Object.keys(e).filter((t=>Object.values(a.o).includes(t)&&1===e[t]))||new Array;t.includes(a.o.Essential)||t.unshift(a.o.Essential),d.A.set(d.U.ActiveCookieCategories,t)}function g(){const e=window.OnetrustActiveGroups,t=e&&e.trim().split(",").filter((e=>{const t=e&&e.trim();return Object.values(s.Q).includes(t)})).map((e=>{const t=e.trim();return c[t]}))||new Array;t.includes(a.o.Essential)||t.unshift(a.o.Essential),d.A.set(d.U.ActiveCookieCategories,t)}},54470:function(e,t,n){n.d(t,{HJ:function(){return i},m0:function(){return r}});const i=["at-bing","elt","eupubconsent-v2","lt","AL","ALS","MSNRPSSecAuth","OSAT"],r=[";",","," "]},19625:function(e,t,n){n.d(t,{aW:function(){return S},ej:function(){return y},jG:function(){return v},sq:function(){return w}});var i=n(54655),r=n(62201),o=n(62042),a=n(91423),s=n(93092),c=n(20782),d=n(33779),u=n(5302),l=n(47898),p=n(22680),h=n(21215),g=n(54470),f=n(44132),m=n(19204);function y(e){const t=(0,p.G8)();return(0,m.F)(t,e)}function v(){return y(i.pA)}function S(){return y(i.ks)}function w(e,t,n,i,p,m,y){try{if(!l.A.get(l.U.Initialized))return(0,h.N)()&&(0,d.H)(u.lIV,""),!1;if(void 0===n||n>0){if(!function(e){if(!(0,h.N)())return!1;const t=l.A.get(l.U.CookieConsentStatus),n=l.A.get(l.U.CookieConsentProvider),i=l.A.get(l.U.ActiveCookieCategories);let c=!1;switch(n){case r.i.MSCCBanner:case r.i.OneTrustBanner:case r.i.WidgetHost:return function(e,t){for(const n of t){if(a.Q[n].includes(e))return!0}let n=!1;const i=Object.keys(a.Q).filter((e=>!t.includes(s.o[e])));for(const t of i){if(a.Q[t].includes(e)){n=!0;break}}n||(0,d.H)(u.sGX,`Attempting to write a cookie: "${e}" not present in the cookie category mapping.`);return!1}(e,i);default:c=t===o._.NotRequired,c||(0,d.H)(u.fU5,`Consent status should be '2' (NotRequired), but is set to '${t}'`)}return c}(e))return!1;if(null==t)return(0,d.H)(u.AvP,`Cookie value is being set to either 'undefined' or 'null'. cookie name: "${e}", cookie value: "${t}"`),!1;const i=typeof t;"string"!==i&&(t=JSON.stringify(t),(0,d.H)(u.bAs,`Cookie value is not of string type. observed type: "${i}". cookie name: "${e}"`));for(const n of g.m0)if(e.includes(n)||t.includes(n))return(0,d.H)(u.AvP,`Cookie name and/or value contains invalid character: '${n}'. cookie name: "${e}"`),!1;n>365&&(0,d.H)(u.Vwf,`Cookie expiration time: ${n} days is greater than suggested max duration of 365 days (1 year). cookie name: "${e}"`);const c=e.length+(t&&t.length||0);c>1e3&&!g.HJ.includes(e)&&(0,d.H)(u.HFn,`Cookie size: "${c} Bytes" is too big (> 1000 Bytes). cookie name: "${e}"`)}return function(e,t,n,i,r,o,a){let s;const d=[e,"=",t];if(n<0)s="Fri, 31 Dec 1999 23:59:59 GMT";else if(n){const e=new Date;e.setTime(e.getTime()+864e5*n),s=e.toUTCString()}s&&d.push(";expires=",s);i&&d.push(";domain=",i);r&&d.push(";path=",r);o&&d.push(";secure");a&&a!==c.f.Lax&&(d.push(";samesite=",a.toString()),a!==c.f.None||o||d.push(";secure"));document&&(/muid/i.test(e)&&f.M0&&f.M0.addOrUpdateTmplProperty(`cookie_muid_set_${e}_${+new Date}`,"1"),document.cookie=d.join(""))}(e,t,n,i,p,m,y),!0}catch(t){return(0,d.H)(u.sX$,`trySetCookie() failed with error: "${t.message}". cookie name: "${e}"`),!1}}},30172:function(e,t,n){var i;n.d(t,{w:function(){return i}}),function(e){e[e.Production=0]="Production",e[e.Local=1]="Local"}(i||(i={}))},21438:function(e,t,n){var i,r,o,a,s;n.d(t,{Rc:function(){return c}}),function(e){e[e.none=0]="none",e[e.consoleValidation=1]="consoleValidation",e[e.wholePageValidation=2]="wholePageValidation",e[e.uxValidation=3]="uxValidation",e[e.uxToolValidation=4]="uxToolValidation"}(i||(i={})),function(e){e.telemetryValidationResults="telemetryValidationResults",e.telemetryValidationInitStatus="telemetryValidationInitStatus"}(r||(r={})),function(e){e.default="default",e.low="low",e.high="high",e.ignore="ignore"}(o||(o={})),function(e){e.NA="NA",e.Common="Common",e.HomepageRanker="HomepageRanker",e.DataTRules="DataTRules"}(a||(a={})),function(e){e.Passed="pass",e.Failed="fail",e.Aborted="aborted"}(s||(s={}));const c={other:{displayKey:"Other Error"},schema:{getDisplayKey:e=>`${e} (Schema)`},markup:{targetName:"markup",displayKey:"Markup"}}},7677:function(e,t,n){function i(e,t){if(e instanceof Error){const n=e.toString();return t&&e.stack?`${n}, Stack: ${e.stack}`:n}return"string"==typeof e?e:r(e)}function r(e){if(void 0===e)return"undefined";try{return JSON.stringify(e)}catch{return"[serialization-error]"}}function o(e){return e instanceof Error?e:new Error(i(e))}n.d(t,{Vm:function(){return r},g_:function(){return o},n:function(){return i}})},19204:function(e,t,n){function i(e,t){if(e){const n=new RegExp("\\b"+t+"\\s*=\\s*([^;]*)","i").exec(e);return n&&n.length>1?n[1]:null}return null}n.d(t,{F:function(){return i}})},32236:function(e,t,n){function i(e){let t,n=!1;const i=function(){return n||(n=!0,t=e()),t};return i.cache={clear:()=>{n=!1,t=void 0}},i}n.d(t,{p:function(){return i}})},67244:function(e,t,n){function i(e,t,n=!1){return!e||r(e,t)&&o(e,t)&&a(e,t)&&s(e,t)&&c(e,t)&&u(e,t,n)&&l(e,t)&&p(e,t)&&h(e,t)&&g(e,t)&&function(e,t){return!e.uxMode||t?.modes?.uxMode===e.uxMode}(e,t)}function r(e,t){return!e.audienceMode||t.audienceMode===e.audienceMode}function o(e,t){if(!e.browser)return!0;if(!t.browser)return!1;const{browserType:n,version:i}=t.browser,{browserType:r,version:o}=e.browser;if(r&&r!==n)return!1;if(!o)return!0;if("string"==typeof o)return i===o;if("object"==typeof o){const e=parseInt(i);let t;for(t in o){const n=o[t];if(null!=n)switch(t){case"equals":if(e!==n)return!1;break;case"greaterThan":if(!(e>n))return!1;break;case"lessThan":if(!(e<n))return!1;break;case"notEquals":if(e===n)return!1;break;case"oneOf":if(-1===n.indexOf(e))return!1;break;default:return!1}}return!0}return!1}function a(e,t){return!e.deviceFormFactor||t.deviceFormFactor===e.deviceFormFactor}function s(e,t){return!e.domain||t.domain===e.domain}function c(e,t){return t.pageExperiments=t.pageExperiments||[],"string"!=typeof e.experimentId||0===Object.keys(e.experimentId).length||t.pageExperiments.indexOf(e.experimentId)>=0}function d(e,t){return 0===(e||"").localeCompare(t||"",void 0,{sensitivity:"accent"})}function u(e,t,n){const i=e.locale;if(!i)return!0;let r;return t.locale&&(r=n?t.locale.display:t.locale.content),!!r&&!(i.language&&!d(i.language,r.language)||i.market&&!d(i.market,r.market)||i.script&&!d(i.script,r.script))}function l(e,t){return function(e,t){if(!e)return!0;if(!t)return!1;if("string"==typeof e&&d(e,t))return!0;if("object"!=typeof e)return!1;const n=t.toLowerCase();if(e.startsWith&&!n.startsWith(e.startsWith.toLowerCase()))return!1;if(e.endsWith&&!n.endsWith(e.endsWith.toLowerCase()))return!1;if(e.equals&&!d(e.equals,t))return!1;if(e.notEquals&&d(e.notEquals,t))return!1;if(e.contains&&!n.includes(e.contains.toLowerCase()))return!1;if(e.oneOf&&-1===e.oneOf.indexOf(t))return!1;return!0}(e.ocid,t.ocid)}function p(e,t){return!e.os||t.os===e.os}function h(e,t){const n=e.pageType;if(!n)return!0;const i=t.pageType;if(!i)return!1;if("string"==typeof n)return n===i;if(n.exact&&n.exact.toUpperCase()===i.toUpperCase())return!0;if(n.segments){const e=n.segments,t=i.split("::");if(t&&t.length>0){for(const n in e){const i=parseInt(n),r=e[n];if(!r||isNaN(i)||"string"!=typeof r||i>=t.length||r.toUpperCase()!==t[i].toUpperCase())return!1}return!0}}return!1}function g(e,t){return!e.platform||t.platform===e.platform}n.d(t,{Ev:function(){return a},J4:function(){return i},K3:function(){return l},K4:function(){return o},Sh:function(){return d},Uc:function(){return r},W9:function(){return c},fb:function(){return u},hI:function(){return s},jF:function(){return g},oM:function(){return h},zu:function(){return p}})},68052:function(e,t,n){function i(e){try{if(e)return JSON.parse(e)}catch(e){}return null}n.d(t,{d:function(){return i}})},82223:function(e,t,n){var i;n.d(t,{n:function(){return i}}),function(e){const t={};e.loadExperience=async e=>{const n=t[e];if(!n)throw new Error(`Attempted to load unknown dynamic bundle "${e}". Make sure it's a registered dynamic experience bundle.`);return n()},e.registerExperience=(e,n)=>{t[e]=n},e.hasExperienceRegistered=e=>!!t[e]}(i||(i={}))},73264:function(e,t,n){n.d(t,{U:function(){return ge}});var i=n(43852),r=n(42122),o=n(5302),a=n(98130),s=n(79493),c=n(13218),d=n(2907),u=n(28951),l=n(92421),p=n(52185),h=n(81489),g=n(22680),f=n(21215),m=n(32598);class y extends Error{constructor(e,t){super(e),this.isNetworkFailure=t}}var v=n(44132);const S="-start",w="-end",b="CrsConfig",C="AkCrsConfig",T="FDCrsConfig",k={},P={};let A;function I(e){if(e.endsWith(S)){e=e.slice(0,e.length-6);const t={endMeasure:A&&A.startMeasure(e).endMeasure,startTime:performance.now()};k[e]=t}else if(e.endsWith(w)){if(e=e.slice(0,e.length-4),k[e]){const{endMeasure:t,startTime:n}=k[e],i=Math.round(performance.now()-n);return P[e]=i,t&&t(),{name:e,timeTaken:i}}}else;}var E=n(30172);const R="feature-manifests",M="loc-manifests",x="feature-configs",L="loc-configs",F="default";const D=new class{constructor(){this._mocksEnabled=!1,this._shouldInitializeMockMgrConfig=!1,this._mockConfigDictionary={},this._mocksEnabled=this.areMocksEnabled(),this._shouldInitializeMockMgrConfig&&(this._mockConfigDictionary["MockManager/default"]="MockManager/default")}get mockConfigDictionary(){return this._mockConfigDictionary}get mocksEnabled(){return this._mocksEnabled}initialize(e){if(!e)return void this.addMockQspToDictionary();const t=[];if(new URLSearchParams((0,g.zp)()).getAll("mock").forEach((e=>{e.trim().split(",").forEach((e=>{t.indexOf(e)<0&&t.push(e)}))})),0===t.length)return;const n=e&&e.scenarios;for(const e in n)if(n[e]&&t.indexOf(e)>-1){n[e].forEach((e=>{const{experienceType:t,instanceSrc:n}=e.source.configLink,{experienceType:i,instanceSrc:r}=e.target.configRef;this._mockConfigDictionary[`${t}/${n}`]=`${i}/${r}`}))}this.addMockQspToDictionary()}areMocksEnabled(){const e=new URLSearchParams((0,g.zp)());return this._shouldInitializeMockMgrConfig=!!e.get("mock"),this._shouldInitializeMockMgrConfig||e.getAll("item").some((e=>/^mock:/.test(e)))}addMockQspToDictionary(){new URLSearchParams((0,g.zp)()).getAll("item").filter((e=>/^mock:/.test(e))).forEach((e=>{const[t,n]=e.split(":"),[i,r]=n.split("|");this._mockConfigDictionary[i]=r}))}},O=/^\d{8}\.\d+$/;let _="";function N(e,t){if(!e)return;const{experienceType:n,instanceSrc:i,sharedNs:r}=e,o=[t,n,i];return r&&o.push(r),o.map((e=>e||"")).join("/").toLowerCase()}function B(e){if(!e)return null;if(e.match("^shared/")){const[t,n,i,r]=e.split("/");return{experienceType:i,instanceSrc:r,sharedNs:n}}{const[t,n]=e.split("/");return{experienceType:t,instanceSrc:n}}}function U(e){const t=new Set;if(e&&e.properties)try{$(e.properties,t)}catch(e){}return t}function $(e,t){const n=e.configRef;n&&n.experienceType&&t.add(n);for(const n of Object.values(e))"object"==typeof n&&n&&$(n,t)}function H(e,t=!1){if(!e)return;const n=(t?F:e.instanceSrc)||F;return!e.sharedNs||t?`${e.experienceType}/${n}`:`shared/${e.sharedNs}/${e.experienceType}/${n}`}function W(e,t){e&&e(t)}function G(e,t){return function(e){return e===x||e===R}(e)?V(t&&t.feature):V(t&&t.loc)}function V(e){return e===E.w.Local}function q(e,t,n){let i=!1;const r=D.mocksEnabled&&D.mockConfigDictionary&&D.mockConfigDictionary[t];let o;r&&(t=r,i=!0),o=i?"mock":e===L?"dev/loc":"prod";return`${o}/${/^shared/.test(t)?t:`${n}/${t}`}`}var j=n(52998);function z(e,t,n){return{...e,message:t||e.message,pb:n?{...e.pb,customMessage:n}:e.pb}}var K=n(24358),Q=n(13578),J=n(16614);class X{get hadNetworkError(){return this._hadNetworkError}get shouldTryFallbackResolver(){return this._shouldTryFallbackResolver}get configServiceEnabled(){return this.enableConfigService}get configServiceQueryParams(){return this.configServiceParams}get crsActivityId(){return this._crsActivityId}constructor(e){if(this.resolverEnvironment=e,this.configMap=new Map,this.enableConfigService=!0,this.skipBelowTheFold=!1,this.configPromiseMap=new Map,this._shouldTryFallbackResolver=!1,this._hadNetworkError=!1,this._shouldUseCdnFallback=!1,this._initialCrsFetch=!0,this.getCacheKeyFromConfigRef=e=>N(e,this.resolverEnvironment.appType),!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw this.enableConfigService=!1,new Error("ResolverEnvironment or configServiceParameters or targetScope does not exist.");e.segmentPlugins&&e.segmentPlugins.skipBelowTheFold&&(this.skipBelowTheFold=!0)}async initialize(){this.shouldUseConfigService(),await this.setConfigServiceParams()}async setConfigServiceParams(){const{appType:e,configServiceParameters:t,targetScope:n}=this.resolverEnvironment,{maxDepth:i}=t;let{buildVersion:r}=t,o=`apptype=${e}`;o+=`&v=${r}`;const a=function(e,t){try{if(e&&e.pageExperiments&&e.pageExperiments.includes("prg-crsfdheadrem")&&"weather"!==t&&"finance"!==t){const t={...e};return t.pageExperiments=[],t}}catch(e){}return e}(n,e);a.modes={audienceMode:a.audienceMode||a.modes?.audienceMode,uxMode:a.modes?.uxMode},o+="&targetScope="+JSON.stringify(a),i&&(o+=`&maxDepth=${i}`),this.skipBelowTheFold&&(o+="&skipBelowTheFold=true"),this.containsDevOnlyQueryParameters()&&(o+="&citem=dev:true&instance=Int1"),this.configServiceParams=o}sendPerfMarker(e){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(e)}shouldUseConfigService(){const e=this.resolverEnvironment&&this.resolverEnvironment.configServiceParameters&&this.resolverEnvironment.queryParams;e&&e.enableConfigService&&(this.enableConfigService="true"===e.enableConfigService)}containsDevOnlyQueryParameters(){const e=this.resolverEnvironment.queryParams;if(!e)return!1;const t=e.item;if(t&&t.length>0)return!0;if(e.citem)return!0;return!!e.pcsonly}getConfigMap(){return this.configMap}tryGetConfigSync(e){if(e){const t=this.getCacheKeyFromConfigRef(e);return this.configMap.get(t)}}async getConfig(e){const{configServiceParameters:t,targetScope:n}=this.resolverEnvironment;if(!t||!n||!e)return Promise.reject(Error("Either of configServiceParameters, targetScope or configRef is not set correctly."));if(!this.enableConfigService)return void(this._shouldTryFallbackResolver=!0);const i=this.getCacheKeyFromConfigRef(e);if(this.configMap.has(i))return this.configMap.get(i);if(this.configPromiseMap.has(i))return this.configPromiseMap.get(i);const r=new Promise((async(t,n)=>{try{this._initialCrsFetch&&this.sendPerfMarker(`${C}${S}`),await this.getConfigTreeFromCrs(e),this._initialCrsFetch&&this.sendPerfMarker(`${C}${w}`),this._shouldTryFallbackResolver&&(this._shouldUseCdnFallback=!0,this._shouldTryFallbackResolver=!1,this._initialCrsFetch&&this.sendPerfMarker(`${T}${S}`),await this.getConfigTreeFromCrs(e),this._initialCrsFetch&&this.sendPerfMarker(`${T}${w}`),this.sendAppError(z(j.Sp,"CRS-AFD Retry",`Retryring to call CRS-AFD with ConfigRef ${this.getCacheKeyFromConfigRef(e)} because Akamai call had an error.`))),this._initialCrsFetch=!1,t(this.configMap.get(i))}catch(e){this.sendAppError(z(j.Km,`Exception in getConfig for ${i}`,e)),n(e)}finally{this.configPromiseMap.delete(i)}}));return this.configPromiseMap.set(i,r),r}async getConfigTreeFromCrs(e){let t="",n="";try{let i;const r=this.getCrsTimeout(),o=performance.now(),a=new Promise((n=>{i=setTimeout((()=>{const i={...j.yL,pb:{...j.yL.pb,errorBehavior:K.C.Fallback,isWebWorker:this.resolverEnvironment.isThisWebWorkerThread}};return this.sendAppError(z(i,"CRS fetch timeout",`ConfigRef: ${this.getCacheKeyFromConfigRef(e)}. CrsUrl: ${t||""}, timeElapsed: ${performance.now()-o}`)),n(null)}),r)}));t=this.generateCrsUrl(e);let s=this.tryGetConfigFromEarlyCrsPromise(e,t);s?n="Prefetch ":s=this.downloadFromCrs(t,r);const c=s.then((e=>(i&&clearTimeout(i),e))),d=await Promise.race([c,a]),u=d&&d.configs;if(!u||(0,Q.Z)(u))return void(this._shouldTryFallbackResolver=!0);this._shouldTryFallbackResolver=!1,this.updateCacheUsingConfigs(u)}catch(i){this._shouldTryFallbackResolver=!0,this.sendAppError(z(j.GB,`${n}CRS fetch network error`,`ConfigRef: ${this.getCacheKeyFromConfigRef(e)}. CrsFetchNetworkError: ${this._hadNetworkError}. Error: ${i}. CrsUrl: ${t||""}`))}}updateCacheUsingConfigs(e){for(const t in e){const n=e[t];if(n&&n.properties){const e=this.getCacheKeyFromConfigRef(B(t));this.configMap.set(e,n)}}}setDownloadFromCrsBeforeNetwork(e){this.downloadFromCrsBeforeNetwork=e}async downloadFromCrs(e,t){if(this.downloadFromCrsBeforeNetwork){const t=await this.downloadFromCrsBeforeNetwork(e);if(t)return t}const{abortableFetchCallback:n,hostHeaderOverride:i}=this.resolverEnvironment,r="afdprotocol",o=p.Gq.get(r);if(o){const t=new URL(e);t.searchParams.append(r,o),e=t.toString()}const a=!(0,f.N)()&&i?{headers:{host:i}}:void 0;return(n?n(e,t,a):fetch(e)).then((t=>this.processCrsResponse(e,t))).catch((e=>this.handleCrsDownloadError(e)))}handleCrsDownloadError(e){throw this._shouldTryFallbackResolver=!1,this._hadNetworkError=!0,e}processCrsResponse(e,t,n=!1){if(this._crsActivityId=function(e){try{if(e&&"string"==typeof e){const t=e.indexOf("|");return e.substring(0,t)}}catch(e){}return""}(t.headers.get("x-ceto-ref")||"")||function(e){try{if(e&&"string"==typeof e)return e.match(/Ref A: [A-Z0-9]+/)[0].substring(7)}catch(e){}return""}(t.headers.get("x-msedge-ref")||"")||"empty",t.ok)return t.json();const{isWebWorkerPresent:i,isThisWebWorkerThread:r}=this.resolverEnvironment,o=t.headers.get("X-Crs-BuildVersion")||"",a=t.headers.get("X-Crs-Env")||"",s=t.headers.get("x-msedge-ref")||"",c=`Url: ${e}, CRS Version: ${o}, CRS Env: ${a}, isWebWorkerPresent: ${i}`,d={...j.Wc,pb:{...j.Wc.pb,userImpacting:!0,errorBehavior:K.C.Fallback,isWebWorker:r,isEarlyFetch:n,fetchNetworkResponse:{activityId:s,statusCode:t.status}}};return this.sendAppError(z(d,"CRS returned non-200 response",c)),Promise.resolve()}generateCrsUrl(e){const t=e.sharedNs?`&sharedNs=${e.sharedNs}`:"",n=`?${`expType=${e.experienceType}&expInstance=${e.instanceSrc}${t}`}&${this.configServiceParams}`;return(this._shouldUseCdnFallback?new URL(n,this.resolverEnvironment.crsRetryBaseUrl):new URL(n,this.resolverEnvironment.configServiceParameters.configServiceBaseUrl)).toString()}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}getCrsTimeout(){return(0,f.N)()||this.resolverEnvironment&&this.resolverEnvironment.isThisWebWorkerThread?1e4:3e3}tryGetConfigFromEarlyCrsPromise(e,t){if(!(0,f.N)())return null;const{crsPromise:n,crsRequestData:i}=window,r=i?.url;return n&&r&&(0,J.Z)(e,{experienceType:"AppConfig",instanceSrc:"default"})?(setTimeout((()=>{const e=new URL(r).search,n=new URL(t).search;n.indexOf(e)<0&&this.sendAppError(z(j.Oq,"Early CRS URL is different",[e,n].toString()))}),8e3),delete window.crsPromise,delete window.crsRequestData,n.then((e=>this.processCrsResponse(r,e,!0))).catch((e=>this.handleCrsDownloadError(e)))):null}}var Y=n(9791);let Z=async(e,t,n,i)=>{if(!e)throw new Error("BlobFetcher.ts: Fetch Error: Relative Url is null or undefined.");const r=G(t,n)?"https://localhost.msn.com:9000/"+e:_+e.toLowerCase(),o=void 0,a=i?i(r,1e4,o):fetch(r);let s;return s=i?a.then((e=>{if(e.ok)return e.json();return i(r,1e4,o).then((e=>{if(e.ok)return e.json();throw new Error(`Non-200 response, failed to fetch 2nd time, Status: ${e.status}, StatusText: ${e.statusText}, fetch url: ${r}`)}))})).catch((e=>{throw new Error(`BlobFetcher.ts: Fetch Error: fetch url: ${r}, error: ${e}.`)})):a.then((e=>{if(e.ok)return e.json();throw new Error(`Non-200 response, Status: ${e.status}, StatusText: ${e.statusText}, fetch url: ${r}`)})).catch((e=>{throw new Error(`BlobFetcher.ts: Fetch Error: fetch url: ${r}, error: ${e}.`)})),s},ee=(0,f.N)()?(0,Y.Z)(Z):Z;class te{constructor(e,t,n){this.failedConfigIndexFetches=[],this.appType=e,this.configOrigins=t,(0,f.N)()&&(this.fetchAndParseConfigIndex=(0,Y.Z)(this.fetchAndParseConfigIndex,((...e)=>e.join("/")))),this.resolverEnvironment=n}async fetchAndParseConfigIndex(e,t,n){const i=G(e,this.configOrigins);if(!n&&!i)return;const r=i?`${q(e,t,this.appType)}/index.json`:`${e}/${t}/index.json/${n}`;try{const t=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback;return await ee(r,e,this.configOrigins,t)}catch(e){i||this.failedConfigIndexFetches.push(e)}}getFailedConfigIndexFetches(){return this.failedConfigIndexFetches}}class ne{constructor(e,t,n){this.failedConfigFetches=[],this.appType=e,this.configOrigins=t,(0,f.N)()&&(this.fetchAndParseConfig=(0,Y.Z)(this.fetchAndParseConfig,((...e)=>e.join("/")))),this.resolverEnvironment=n}async fetchAndParseConfig(e,t,n,i){const r=G(e,this.configOrigins);if(!i&&!r)return;const o=r?`${q(e,t,this.appType)}/${n}`:`${e}/${t}/${n}/${i}`;try{const t=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback;return await ee(o,e,this.configOrigins,t)}catch(e){r||this.failedConfigFetches.push(e)}}getFailedConfigFetches(){return this.failedConfigFetches}}class ie{constructor(e,t,n){this.manifestsMap=new Map,this.appType=e,this.configOrigins=t,this.resolverEnvironment=n}async fetchAndParseManifest(e,t){if(G(e,this.configOrigins))return;const n=`${e}/${this.appType}/${t}.json`;if(!this.manifestsMap.has(e))try{const t=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback,i=await ee(n,void 0,void 0,t);if(this.manifestsMap.set(e,i),(0,Q.Z)(i))throw new Error(`Manifest response is ok but empty or undefined, relative url: ${n}`)}catch(t){throw this.manifestsMap.set(e,null),new Error(`ManifestService.ts: ${t}`)}return this.manifestsMap.get(e)}getConfigIndexHashedFileName(e,t){if(G(t,this.configOrigins))return;const n=`${e}/index.json`;return this.getFromManifest(n,t)}getConfigHashedFileName(e,t,n){if(G(n,this.configOrigins))return;const i=`${e}/${t}`;return this.getFromManifest(i,n)}getFromManifest(e,t){if(!this.manifestsMap||!this.manifestsMap.get(t))return;const n=this.manifestsMap.get(t);if(n&&n.fileHashes)return n.fileHashes[e.toLowerCase()];throw new Error(`ManifestService.ts: Manifest is defined but does not have fileHashes: ${e}: cacheKey snippet of manifest: ${JSON.stringify(n).substr(0,100)}`)}}var re=n(30291),oe=n(92170);function ae(e,t){if((0,oe.Z)(e))return t}var se=n(67244);class ce{constructor(e){if(!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw new Error("SingleConfigResolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.appType=e.appType,this.targetScope=e.targetScope,this.buildVersion=e.configServiceParameters.buildVersion,this.configOrigins=e.configOrigins,this.manifestService=new ie(this.appType,this.configOrigins,e),this.configIndexService=new te(this.appType,this.configOrigins,e),this.configService=new ne(this.appType,this.configOrigins,e)}async resolveConfigAsync(e){const t=H(e),n=H(e,!0);this.buildNumber=this.tryGetBuildNumber()||await async function(e,t){let n;const i=new URLSearchParams((0,g.zp)()).getAll("item"),r=i?i.find((e=>e&&0===e.indexOf("spalink:"))):void 0;r&&(n=r.replace("spalink:","").replace("/debug",""));const o=n||e;if(!o||!t||"latest"!==o&&"rolling"!==o&&!O.test(o))throw new Error(`Arguments are incorrect. Check buildVersion: ${o} appType: ${t}`);const a=`https://assets.msn.com/bundles/v1/${t}/${o}/v?${(new Date).getTime()}`;let s;try{if(s=await fetch(a),!s||!s.ok)throw new Error(`Response not OK, Status: ${s.status}, StatusText: ${s.statusText}`);return(await s.text()).trim()}catch(e){throw new Error(`getBuildNumberAsync Fetch Url: ${a}, ${e}`)}}(this.buildVersion,this.appType);const i=this.manifestService.fetchAndParseManifest(R,this.buildNumber),r=this.manifestService.fetchAndParseManifest(M,this.buildNumber);await Promise.all([i,r]);const o=this.manifestService.getConfigIndexHashedFileName(t,R),a=this.manifestService.getConfigIndexHashedFileName(n,M),s=this.configIndexService.fetchAndParseConfigIndex(x,t,o),c=this.configIndexService.fetchAndParseConfigIndex(L,n,a),d=await Promise.all([s,c]).then((e=>({featureIndex:e[0],localizationIndex:e[1]}))),u=d.featureIndex&&d.featureIndex.configs||void 0,l=d.localizationIndex&&d.localizationIndex.configs||void 0,p=[];if(this.fetchMathingConfigs(p,u,R,x,t),this.fetchMathingConfigs(p,l,M,L,n),this.fetchMathingConfigs(p,l,M,L,n,!0),0==p.length)return;return function(e){if(!e||e.length<1)return null;const t=e[0];for(let n=1;n<e.length;n++)t.properties=(0,re.Z)(t.properties,e[n].properties,ae);return t}((await Promise.all(p).then((e=>e))).filter((e=>null!=e)))}fetchMathingConfigs(e,t,n,i,r,o=!1){t&&0!=t.length&&t.forEach((t=>{if((0,se.J4)(t.targetScope,this.targetScope,o)){const o=t.src,a=this.manifestService.getConfigHashedFileName(r,o,n);e.push(this.configService.fetchAndParseConfig(i,r,o,a))}}))}getFailedFetches(){const e=[],t=this.configService.getFailedConfigFetches();t.length>0&&e.push(...t);const n=this.configIndexService.getFailedConfigIndexFetches();return n.length>0&&e.push(...n),e}get buildNumber(){return this._buildNumber}set buildNumber(e){this._buildNumber=e}tryGetBuildNumber(){return this.buildNumber?this.buildNumber:this.configOrigins.feature===E.w.Local&&this.configOrigins.loc===E.w.Production?null:this.buildVersion}}class de{constructor(e){if(this.mergedConfigMap=new Map,this.mockManagerInitialized=!1,!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw new Error("Resolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.resolverEnvironment=e,this.appType=e.appType,this.singleConfigResolver=new ce(e)}async getConfig(e,t=!1){const n=N(e,this.appType),{mockManager:i}=this.resolverEnvironment;if(i.mocksEnabled&&!this.mockManagerInitialized){this.mockManagerInitialized=!0;const e={scenarios:(await this.getConfig({experienceType:"MockManager",instanceSrc:"default"})).properties.scenarios};i.initialize(e)}if(!this.mergedConfigMap.has(n)){await this.getConfigRecursive(e,t);const n=this.singleConfigResolver.getFailedFetches();n.length>0&&n.forEach((e=>{W(this.resolverEnvironment.appErrorCallback,{...j.e_,message:"Fetch failed for a config",pb:{...j.e_.pb,customMessage:`Failed fetch url: ${e}`}})}))}return this.mergedConfigMap.get(n)}getConfigMap(){return this.mergedConfigMap}async getConfigRecursive(e,t=!1){const n=N(e,this.appType);if(n&&!this.mergedConfigMap.has(n))try{const i=await this.singleConfigResolver.resolveConfigAsync(e);if(this.mergedConfigMap.set(n,i),t){const e=U(i);if(0==e.size)return;const n=[];e.forEach((e=>{n.push(this.getConfigRecursive(e,t))})),await Promise.all(n)}}catch(e){W(this.resolverEnvironment.appErrorCallback,{...j.oH,message:"Exception in getConfig.",pb:{...j.oH.pb,customMessage:`CacheKey: ${n} / Error: ${e}`}})}}}class ue{constructor(e){if(this.resolverEnvironment=e,this.fallbackResolverCalled=!1,this.crsInitComplete=!1,this.configResolverMap=new Map,this.configResolverMapSet=!1,!e||!e.targetScope)throw new Error("ResolverEnvironment or targetScope does not exist.");var t;this.configService=new X(e),t=e.configStaticFallbackBaseUrl,_=t,this.fallbackResolver=new de(e)}get crsHadNetworkError(){return this.configService.hadNetworkError}get crsActivityId(){return this.configService.crsActivityId}tryGetConfigSync(e){if(e)return this.configService.tryGetConfigSync(e)||this.tryToGetFromInMemory(e)}async getConfig(e){if(this.resolverEnvironment.configOrigins.feature===E.w.Local||this.resolverEnvironment.mockManager.mocksEnabled){const t="function"==typeof this.resolverEnvironment.loggerCallback;try{const n=await this.fallbackResolver.getConfig(e);return n?Promise.resolve(n):(t&&this.resolverEnvironment.loggerCallback(`ConfigResolver: Failed to fetch configs from local configs. Config: ${N(e)}`),Promise.resolve(null))}catch(e){return t&&this.resolverEnvironment.loggerCallback(`${e.message}`),Promise.reject(e)}}if(!this.configResolverMapSet&&e?.properties){const t=e.properties;t&&t.configs&&(this.setConfigResolverMap(t.configs),this.configResolverMapSet=!0)}const t=this.configResolverMapSet&&e?this.tryToGetFromInMemory(e):null;if(t)return t;this.crsInitComplete||(this.sendPerfMarker(`${b}${S}`),await this.initiateConfigService(),this.crsInitComplete=!0,this.sendPerfMarker(`${b}${w}`)),this.configResolverMapSet&&this.crsInitComplete&&this.sendAppError(z(j.cm,"Fallback to network call",`Config Ref ${this.getCacheKeyFromConfigRef(e)} not found in prefetched configs. Network Fallback`));const n=e?this.configService.tryGetConfigSync(e):null;return n||new Promise((async t=>{if(this.configService.shouldTryFallbackResolver){this.fallbackResolverCalled=!0;const n=await this.fallbackResolver.getConfig(e);if(n)return t(n)}else{const n=await this.configService.getConfig(e);if(n)return t(n)}return t(null)}))}getConfigServiceObject(){return this.configService}async initiateConfigService(){await this.configService.initialize(),await this.configService.getConfig({experienceType:"AppConfig",instanceSrc:"default"})}sendPerfMarker(e){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(e)}setConfigResolverMap(e){for(const t in e){const n=e[t];if(n&&n.properties){const e=this.getCacheKeyFromConfigRef(B(t));this.configResolverMap.set(e,n)}}}tryToGetFromInMemory(e){const t=this.getCacheKeyFromConfigRef(e);return this.configResolverMap.get(t)}getCacheKeyFromConfigRef(e){return N(e,this.resolverEnvironment.appType)}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}}const le="__ResolverInstance__";class pe{constructor(){this.currentTargetScope=a.jG.CurrentRequestTargetScope,this.env=a.jG.Environment||s.q.prod,this.localOverrideMap={},this.isInitialized=!1,this.initializeCaching()}static getInstance(){return p.Gq.get(le,(()=>new pe))}static resetResolverInstance(){const e=new pe;p.Gq.set(le,e),he=(0,h.h)(pe)}getConfigResolver(){return this.configResolver}initializeCaching(){this.setTargetScopeAndConfigServiceParams()}setTargetScopeAndConfigServiceParams(){const{AppType:e,CurrentRequestTargetScope:t,WidgetAttributes:n}=a.jG;this.currentTargetScope=this.currentTargetScopeOverride||t;let i=[];const r=c.Al.AppFlights;if(Array.isArray(r))i=r;else{const t=n&&n.clientPerf&&n.clientPerf.shouldUsePWOnlyFlights||"distribution"===e,r=this.currentTargetScope?.pageExperiments,o=(0,m.hJ)(r,t,e);i=(0,m.Mx)(r,o)}this.scopeWithPeregrineFlights={...this.currentTargetScope,domain:n&&(0,g.Td)()||this.currentTargetScope&&this.currentTargetScope.domain,pageExperiments:i}}initialize(e,t){if(this.isInitialized)return;var n;if(this.perfTimeline=(0,i.oA)("Resolver","Resolver",!0),n=this.perfTimeline,A=n,!a.jG.IsGitConfigs)return;const o={buildVersion:a.jG.BuildVersion,configServiceBaseUrl:a.jG.ConfigServiceBaseUrl.toString()},s=a.jG.CrsRetryBaseUrl,{pageExperiments:c}=this.currentTargetScope,d={appType:a.jG.AppType,configServiceParameters:o,targetScope:this.scopeWithPeregrineFlights,env:a.jG.Environment.toString(),featureFlags:a.jG.FeatureFlags,isThisWebWorkerThread:!1,isWebWorkerPresent:this.useWebWorkerToCache,queryParams:u.cX.getParamsObj((0,g.zp)()),appErrorCallback:e,perfMarkerCallback:I,loggerCallback:r.k.log.bind(r.k),logObjectsCallback:r.k.logObjects.bind(r.k),isDebug:r.k.isDebug(),configCacheProperties:undefined,configOrigins:a.jG.ConfigOrigins,segmentPlugins:t,mockManager:D,crsRetryBaseUrl:s,disableInMemoryCache:a.jG.DisableInMemoryCache,useCachedApp:a.jG.UseCachedApp,crsDisableServerCache:a.jG.CrsDisableServerCache,abortableFetchCallback:c&&(c.includes("useabortfetch")||c.includes("prg-1sw-abtfetch"))||!(0,f.N)()?l.Sm:void 0,hostHeaderOverride:a.jG.HostHeaderOverride,configStaticFallbackBaseUrl:a.jG.ConfigStaticFallbackBaseUrl};this.configResolver=new ue(d),this.isInitialized=!0}overrideCurrentRequestTargetScope(e){this.currentTargetScopeOverride=e,this.currentTargetScopeOverride&&(this.currentTargetScope=this.currentTargetScopeOverride)}overrideCurrentRequestEnvironment(e){this.env=e||s.q.prod}overrideConfig(e,t,n){if(this.env!==s.q.prod){const i="string"==typeof e?e:(0,d.B5)(e);this.localOverrideMap[i]={experienceType:t,properties:n,typeVersion:"1.0.0",_name:"index"}}}async getRootConfig(){const e=await this.getEntryPointConfigRef();return await this.getConfig(e.configRef)}async getEntryPointConfigRef(){return(await this.getConfig({experienceType:"AppConfig",instanceSrc:"default"})).properties.rootExperience}getConfigSync(e){if(!e||!this.currentTargetScope||!a.jG.IsGitConfigs)return;const t=(0,d.B5)(e),n=t&&this.localOverrideMap[t];if(n)return n;const i=this.configResolver&&this.configResolver.tryGetConfigSync(e);return i?{experienceType:e.experienceType,properties:i.properties||{},typeVersion:"Git",_name:t}:void 0}async getConfig(e){if(!this.currentTargetScope)return Promise.reject(new Error(`getConfig: Invalid target scope when fetching config ${JSON.stringify(e)}`));if(a.jG.IsGitConfigs){if("string"==typeof e){const t="Invalid config Id for Git configs flight";return this.resolverErrors.push({...o.lu7,message:t,pb:{...o.lu7.pb,userImpacting:!0,customMessage:e}}),Promise.reject(new Error(`${t}: ${e}`))}if(!this.configResolver){const t="Invalid configResolver object for Git configs flight";return this.resolverErrors.push({...o.ASE,message:t,pb:{...o.ASE.pb,userImpacting:!0,customMessage:JSON.stringify(e)}}),Promise.reject(new Error(`${t}: ${JSON.stringify(e)}`))}const t=(0,d.B5)(e),n=this.localOverrideMap[t];if(n)return n;const i=this.perfTimeline&&this.perfTimeline.startMeasure("config",t).endMeasure;let r,a;try{a=this.configResolver.tryGetConfigSync(e);let t=a;if(!t){t=await this.configResolver.getConfig(e);const n=this.configResolver.crsActivityId;n&&v.M0.addOrUpdateCustomProperty("crsActivityId",n)}return t?r={experienceType:e.experienceType,properties:t.properties||{},typeVersion:"Git",_name:(0,d.B5)(e)}:Promise.reject(new y(`Could not fetch Git config id ${JSON.stringify(e)}`,this.configResolver.crsHadNetworkError))}finally{if(i){i({customSuffix:`${t}-${(a?"memory":r&&"network")||"error"}`})}}}}useConfigService(){const e=(0,g.zp)();if(e){const t=u.cX.getQueryParameterByName("enableConfigService",e);if(t)return"true"===t.toLocaleLowerCase()}return a.jG.EnableConfigService}getConfigRetrievalMaxDepth(){const e=u.cX.getQueryParameterByName("maxDepth",(0,g.l4)());return e||(a.jG.FeatureFlags&&a.jG.FeatureFlags.crsMaxDepth?a.jG.FeatureFlags.crsMaxDepth:"10")}containsDevOnlyQueryParameters(){const e=(0,g.zp)(),t=u.cX.getQueryParameterByName("item",e);if(t&&t.length>0)return!0;const n=u.cX.getQueryParameterByName("pcsonly",e);return!!(n&&n.length>0)}getConfigTimings(e={},t=!1){if(a.jG.IsGitConfigs)return void Object.assign(e,P);if(!this.configTimings)return;let n=0,i=0;for(const r of this.configTimings){const o=r.experienceType.toLowerCase(),s=r.cacheFetchDuration,c=r.networkFetchDuration;("entrypoint"===o||"river"===o||"contentpreview"===o||a.jG.IsDebug||t)&&(void 0!==c&&(e["ConfigFetch."+o]=Math.round(c)),void 0!==s&&(e["ConfigCache."+o]=Math.round(s))),void 0!==s&&(n+=s),void 0!==c&&(i+=c)}n&&(e["ConfigCache.All"]=Math.round(n)),i&&(e["ConfigFetch.All"]=Math.round(i))}}let he=(0,h.h)(pe);const ge={getRootConfig:()=>he.getRootConfig(),getEntryPointConfigRef:()=>he.getEntryPointConfigRef(),getConfig:e=>he.getConfig(e),getConfigSync:e=>he.getConfigSync(e),getConfigTimings:(e={},t=!1)=>he.getConfigTimings(e,t),getInstance:()=>he,setTargetScopeAndConfigServiceParams:()=>he.setTargetScopeAndConfigServiceParams(),initialize:(e,t)=>he.initialize(e,t),overrideConfig:(e,t,n)=>he.overrideConfig(e,t,n),overrideCurrentRequestTargetScope:e=>he.overrideCurrentRequestTargetScope(e),overrideCurrentRequestEnvironment:e=>he.overrideCurrentRequestEnvironment(e),initializeCaching:()=>he.initializeCaching()}},2907:function(e,t,n){function i(e){return c(e,(e=>e.configRef.experienceType),(e=>e.experienceType),null)}function r(e){return c(e,(e=>e.configRef))}function o(e){return c(e,null,(e=>e.href),(e=>e))}function a(e,t){return c(e,(e=>`${s(e.configRef)}_${t||e.instanceId||""}`),(e=>`${e.experienceType}_${e.href}_${t||e.instanceId||""}`),(e=>`${e}_${t||""}`))}function s(e){return`${e.experienceType}_${e.instanceSrc}_${e.sharedNs||""}`}function c(e,t,n,i,r){if(void 0===r&&(r=null),null!=e){if("string"==typeof e)return i&&i(e)||r;const o=e;if(o.configRef)return t&&t(o)||r;if(n)return n(e)||r}return r}n.d(t,{B5:function(){return s},Fr:function(){return r},M:function(){return i},lh:function(){return a},nf:function(){return c},sI:function(){return o}})},58621:function(e,t,n){n.d(t,{Uq:function(){return a},YO:function(){return r},ds:function(){return i},k6:function(){return o},vC:function(){return c},w5:function(){return s}});const i="csux_evt",r="csux_evt-",o=9e5,a=new Map([["BackgroundImageWC",864e5],["SuperNav",9e5]]),s=new Map([["BackgroundImageWC",12096e5],["SuperNav",12096e5]]),c={start_year:2023,start_month:1,start_day:31,end_year:2099,end_month:12,end_day:31}},72368:function(e,t,n){n.d(t,{Q:function(){return g},Y:function(){return f}});var i=n(5302),r=n(86117),o=n(33779),a=n(42122),s=n(58621),c=n(21215),d=n(52185),u=n(98130),l=n(13218),p=n(15598),h=n(85663);class g{constructor(){(0,c.N)()&&(this.localstorage_get(null,i.J_l),(0,r.b1)().then((()=>{this.autoCleanup()})))}autoCleanup(){if(!(0,c.N)())return;if(!this.eventData)return;let e;for(e in this.eventData){const t=e;let n;for(n in this.eventData[t]){const e=n,i=this.eventData[t][e],r=(new Date).getTime();i.timestamp_EventStart+s.w5.get(t)<r&&delete this.eventData[t][e]}}this.localstorage_save(null)}dismissCreative(e,t,n,i){if((0,c.N)())if(e&&t&&n){for(const i in this.eventData[t][e].expiredCreatives)if(i===n)return;this.eventData[t][e].expiredCreatives.push(n),this.localstorage_save(e,i)}else{const r=`Missing data to save creative dismissal. Event ID: ${e}, Experience ID: ${t}, Creative ID: ${n}`;i?(0,o.H)(i,r):a.k.logError(r)}}getCMSContent(e,t,n,i){if(!e||!t||!n){const r=`Missing data to return current cms content. Event ID: ${e}, Experience ID: ${t}, Creative IDs: ${n}`;return i?(0,o.H)(i,r):a.k.logError(r),null}return this.eventData&&this.eventData[t]&&this.eventData[t][e]&&this.eventData[t][e].cmsData?this.eventData[t][e].cmsData:null}static getInstance(){return d.Gq.get("__eventLocalStorage__",(()=>new g))}async getCurrentCreativeId(e,t,n,i,r,s){if(!(0,c.N)())return null;if(!e||!t||!n){const i=`Missing data to return current creative. Event ID: ${e}, Experience ID: ${t}, Creative IDs: ${n}`;return s?(0,o.H)(s,i):a.k.logError(i),null}let d;if(!(this.eventData&&this.eventData[t]&&this.eventData[t][e]))return null;d=this.eventData[t][e].currentCreative;return await this.selectCreative(n,e,t,i,r,d,s)}localstorage_get(e,t){if((0,c.N)())try{this.eventData=(0,p.$o)().getObject(s.ds)}catch(n){t?(0,o.H)(t,`Get local storage operation failed for event - ${e}.`):a.k.logError(n)}}localstorage_save(e,t){if((0,c.N)())try{(0,p.$o)().setObject(s.ds,this.eventData)}catch(n){return void(t?(0,o.H)(t,`Save local storage operation failed for event - ${e}.`):a.k.logError(n))}}async selectCreative(e,t,n,i,r,d,p,g){if(!e||0===e.length)return null;if(i){const e=new Date,t=new Date(i.start_year,i.start_month-1,i.start_day);t.setDate(t.getDate()-1);const n=new Date(i.end_year,i.end_month-1,i.end_day);if(n.setDate(n.getDate()+1),!(t<=e&&e<=n))return null}const f=(0,h.isNullOrUndefined)(this.eventData&&this.eventData[n]&&this.eventData[n][t]&&this.eventData[n][t].timestamp_EventStart);if(!d&&f&&!r)return e[0];if(r){const i=(new Date).getTime(),f=this.eventData&&this.eventData[n]&&this.eventData[n][t]&&this.eventData[n][t].timestamp_EventLastUpdate?this.eventData[n][t].timestamp_EventLastUpdate:0,m=u.jG.CurrentMarket,y=this.eventData[n][t]?.market;let v=!1;if(void 0!==y&&(v=y!==m,v&&this.dismissCreative(t,n,d,p)),!(0,c.N)()||f+s.k6<i||v){const i=()=>fetch(r),s=i=>{switch(n){case"BackgroundImageWC":this.eventData[n][t]={cmsData:{attribution:i.headlines[0].subtitle,imageSource:i.headlines[1].title,imageHref:i.headlines[2].title,title:i.headlines[0].title},currentCreative:e[0],expiredCreatives:[],market:m,timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,p);break;case"SuperNav":case"FeedNavigationHp":this.eventData[n][t]={cmsData:{display:i.headlines[1].title,highlighted:"1"===i.headlines[4]?.title,id:i.headlines[0].title,positionOverride:i.headlines[3]?.title,url:i.headlines[1].subtitle},currentCreative:e[0],expiredCreatives:[],market:m,timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,p)}};if(!(0,c.N)()||l.Al.IsPrerender){try{const e=await i(),t=await e.json();s(t)}catch(e){p?(0,o.H)(p,`Failed to call CMS data - ${n} - ${t}. url ${r}`,e):a.k.logError(e)}return e[0]}if(g){const t=g.href,n=g.innerText,i=g.id,r=g.dataset?.positionOverride,o=g.classList?.contains("highlight");return s({headlines:[{title:i},{title:n,subtitle:t},{},{title:r},{title:o?"1":"0"}]}),e[0]}if(i().then((e=>{e.json().then((e=>{s(e)}))})).catch((e=>{p?(0,o.H)(p,`Failed to call CMS data - ${n} - ${t}. url ${r}`,e):a.k.logError(e)})),(0,h.isNullOrUndefined)(this.eventData&&this.eventData[n]&&this.eventData[n][t]&&this.eventData[n][t].cmsData))return null}}let m=-1;for(let t=0;t<e.length;t++)if(e[t]===d){m=t;break}if(-1===m)return m=0,this.eventData[n][t]={currentCreative:e[m],expiredCreatives:[],market:u.jG.CurrentMarket,timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,p),e[m];const y=(new Date).getTime();if(this.eventData[n][t].timestamp_EventLastUpdate+s.Uq.get(n)<y&&!i&&"SuperNav"!==n){if(m<e.length-1){const i=e[m+1];return this.dismissCreative(t,n,d,p),this.eventData[n][t]={...this.eventData[n][t],currentCreative:i,timestamp_EventLastUpdate:y},this.localstorage_save(t,p),i}return this.dismissCreative(t,n,e[m],p),null}for(let i=0;i<this.eventData[n][t].expiredCreatives.length;i++)if(this.eventData[n][t].expiredCreatives[i]===e[m])return null;return e[m]}async shouldShowEvent(e,t,n,i,r,o,a){const s=(0,h.isNullOrUndefined)(this.eventData),c=this.eventData&&(0,h.isNullOrUndefined)(this.eventData[t]),d=this.eventData&&this.eventData[t]&&(0,h.isNullOrUndefined)(this.eventData[t][e]);if(s||c||d){s?(this.eventData={},this.eventData[t]={},this.eventData[t][e]={}):c&&(this.eventData[t]={},this.eventData[t][e]={});const d=await this.selectCreative(n,e,t,i,r,null,null,a);return!!d&&(this.eventData[t][e].currentCreative=d,this.localstorage_save(e,o),!0)}const u=this.eventData[t][e].currentCreative;return!!await this.selectCreative(n,e,t,i,r,u,o,a)}}const f=()=>{const e="__eventLocalStorage__";let t=d.Gq.get(e);return t||(t=new g,d.Gq.set(e,t)),t}},34934:function(e,t,n){n.d(t,{Gg:function(){return s},St:function(){return d},Vg:function(){return u},WW:function(){return c},tk:function(){return i}});var i,r=n(52185),o=n(52058);!function(e){e.actionMenuOpen="actionMenuOpen",e.addTopSite="addTopSite",e.coachmark="coachmark",e.editTopSite="editTopSite",e.editWelcomeGreeting="editWelcomeGreeting",e.hamburgerMenu="hamburgerMenu",e.imageSearch="imageSearch",e.locationMarkerCard="locationMarkerCard",e.mobileAppUpsell="mobileAppUpsell",e.msRewards="msRewards",e.museumCard="museumCard",e.navOverflow="navOverflow",e.notificationBell="notificationBell",e.pivot="pivot",e.search="search",e.searchHistoryMoreOptions="searchHistoryMoreOptions",e.settings="settings",e.feedSettings="feedSettings",e.feedbackFaq="feedbackFaq",e.signInControl="signInControl",e.toast="toast",e.topSiteOverflowPanel="topSiteOverflowPanel",e.waffle="waffle",e.recommendedSitesSetting="recommendedSitesSetting",e.weatherOneLinerActionMenu="weatherOneLinerActionMenu",e.pulseActionMenu="pulseActionMenu",e.rewardsDialog="rewardsDialog",e.rewardsSignInDialog="rewardsSignInDialog",e.marketLanguageToggle="marketLanguageToggle"}(i||(i={}));class a{constructor(){this.flyoutOpen=!1,this.openFlyouts=new Set,this.registeredCallbacks=[]}static getInstance(){return r.Gq.get("__FlyoutCoordinationInstance__",(()=>new a))}reportFlyoutOpen(e,t){t?this.openFlyouts.add(e):this.openFlyouts.delete(e),this.flyoutOpen=this.openFlyouts.size>0;for(const n of this.registeredCallbacks)n(e,t)}registerFlyoutListener(e){this.registeredCallbacks.push(e)}unregisterFlyoutListener(e){(0,o.Z)(this.registeredCallbacks,(t=>e===t))}isFlyoutOpen(){return this.flyoutOpen}}function s(e,t){return a.getInstance().reportFlyoutOpen(e,t)}function c(e){return a.getInstance().registerFlyoutListener(e)}function d(e){return a.getInstance().unregisterFlyoutListener(e)}function u(){return a.getInstance().isFlyoutOpen()}},53030:function(e,t,n){n.d(t,{HB:function(){return v}});var i=n(28951),r=n(7733),o=n(98130),a=n(13218),s=n(21215),c=n(22680);const d="//assets.msn.com",u="//assets.msn.cn",l=e=>"localhost.msn.com"===e.split(":",1)[0];function p(e){if(/^\/[\w.-]+(\/[\w.-]+)*$/.test(e))return!(e.includes("/../")||e.includes("/./")||e.endsWith("/..")||e.endsWith("/."))}function h(e){return e&&!e.startsWith("/")?"/"+e:e}function g(e){return e.endsWith("/")?e:e+"/"}function f(e){return p(h(e))?(t=e).startsWith("/")?t.slice(1):t:null;var t}function m(e){return e?e.split("/")[0]:null}const y=(e,t,n,c)=>{const y=new URLSearchParams(e),v="true"===y.get("renderWidget"),S="true"===y.get("useDeployedBundles");let w=((e,t,n)=>{if(!t){if(n)return d;if(l(e))return`//${e}`}return o.jG.IsChinaCompliance?u:d})(t,v,S);if(c){w=(window.location.protocol||"https:")+w}if(y.has("entry")){const e=h(y.get("entry").split("/").slice(0,-1).join("/"));return w&&p(e)&&(l(t)||e.startsWith("/bundles"))?g(w+e):g(w)}if(w&&l(t)&&!S){if(!(0,s.N)()){return w+__WEBPACK_LOCAL_STATICS_PATH__}if(n)return w+n}else if(w){const t=(e||"").substring(1),o=decodeURIComponent(t);let s;const c=i.cX.getParamsWithItems(o).find((e=>"spalink"===e.key)),d=c&&c.value,u=a.Al.ClientSettings||{},l=u.bundleInfo?.alias;if("true"===u.static_page&&l)s=m(l);else if(d)s=m(f(d));else{const e=new r.h(o).get("bundles");e?s=f(e):l&&(s=m(l))}if(n){const e=n.split("/");return e[4]=s||"latest",w+e.join("/")}}return n},v=e=>{n.p=y((0,c.zp)(),(0,c.zw)(),n.p,e)}},98303:function(e,t,n){n.d(t,{DO:function(){return c},Nd:function(){return s},fH:function(){return a}});var i=n(98130),r=n(52475),o=n(94660);class a{constructor({params:e,qspPrefix:t,spec:n}={},i){this.requestData=new r.m4(n||o.j4,t||o.mx),e&&this.requestData.loadQueryParams(e),i&&(this.RequestId=i)}get requestId(){return this.RequestId||this.app.ActivityId}get app(){return i.jG}get data(){return this.requestData.data}}function s(e,t,n=!0){if("function"==typeof e){const t=e();if(t||0===t)return t}if(n)throw new Error("Expected "+t+" to return value. Possible invalid RequestContext spec used or the spec doesn't contain this data.")}function c(e){return s(e.data.locationHref,"locationHref",!1)}},35030:function(e,t,n){n.d(t,{t:function(){return r}});var i=n(24032);function r(e){if("object"==typeof e&&null!==e){const t=(0,i.L)()?.get("testRubyVersion");null!=t&&(e.serviceContext||(e.serviceContext={}),e.serviceContext.rubyTargetedVersion=t,e.serviceContext.isTestRubyVersion=!0)}}},83405:function(e,t,n){n.d(t,{E:function(){return i}});const i={prod:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/"}},42729:function(e,t,n){n.d(t,{k:function(){return s}});var i=n(7124),r=n(13218);const o=r.Al.CurrentFlightSet?.has("prg-scrolldbc"),a=50;function s(e,t=a,n=!0){return o?n?(0,i.Z)(e,t):(0,i.Z)(e,t,{leading:!0,trailing:!1}):e}},89046:function(e,t){t.Z=function(e,...t){if(e){const n=/{([\d]+)}/g,i=[];let r=n.exec(e),o=0,a=0;for(;null!==r;)a=r.index,i.push(e.substring(o,a)),i.push(t[r[1]]),o=n.lastIndex,r=n.exec(e);return i.push(e.substring(o)),i}}},175:function(e,t,n){n.d(t,{A:function(){return o}});var i,r=n(91042);function o(e,t=i.Telemetry){if(!e)return void console.log(`EventType: ${t} payload to be dispatched is either null or empty.`);const n=document.querySelector(`.${r.$j}`);if(!n||!n.hasAttributes())return void console.log(`Div ${r.$j} is not present on the page.`);const o={type:t,name:e.name||"",payload:e};n.dispatchEvent(new CustomEvent(r.y7,{bubbles:!0,cancelable:!0,composed:!0,detail:o}))}!function(e){e.Telemetry="telemetry"}(i||(i={}))},99371:function(e,t,n){n.d(t,{b:function(){return s}});var i=n(44132),r=n(77770),o=n(68640),a=n(21215);async function s(e,t,s,c){if(!(0,a.N)())return;const d=await n.e("diagnostic-web-vitals").then(n.bind(n,88512));(0,r.lr)().then((()=>{const n=s?{timeToPageReveal:e[o.Y5],timeToPageVisible:e[o.U4]}:void 0;d.initDiagnosticsWebVitals((e=>{c?c({markers:e}):i.M0.sendLoadTimeEvent({markers:e}),Object.entries(e).forEach((([e,n])=>{t[e]=n}))}),e&&e[o.dd]||-1,n)}))}},5302:function(e,t,n){n.d(t,{zzx:function(){return Qy},bQI:function(){return Ky},K_t:function(){return Zy},j_y:function(){return Yy},XcO:function(){return Jy},Was:function(){return Xy},vn7:function(){return ev},X4G:function(){return tv},etM:function(){return oa},N1G:function(){return aa},iVH:function(){return Zn},oSM:function(){return id},rBK:function(){return rd},etb:function(){return Jc},hsJ:function(){return od},ps7:function(){return Zc},HuD:function(){return Yc},Q48:function(){return Xc},Evv:function(){return Un},EoX:function(){return Bn},Eh0:function(){return Kn},d1d:function(){return Qn},SSe:function(){return gk},NMS:function(){return Nn},iJb:function(){return Vn},Es0:function(){return Gn},AWv:function(){return zn},a4J:function(){return Hn},Eol:function(){return z},nab:function(){return ol},qI3:function(){return My},sNr:function(){return gi},Y57:function(){return fi},bvO:function(){return hi},evM:function(){return $o},amS:function(){return Po},YHd:function(){return Uo},gZU:function(){return Bo},c$P:function(){return Io},Si:function(){return xo},npG:function(){return Eo},u8h:function(){return Ro},L8S:function(){return Ho},G0e:function(){return Ao},lz:function(){return Mo},fvr:function(){return _o},Bjk:function(){return Do},ydI:function(){return No},D1F:function(){return Oo},WB4:function(){return Fo},ja9:function(){return Lo},nrW:function(){return Go},FTS:function(){return Wo},Zfy:function(){return Pf},m9g:function(){return Fn},yb9:function(){return Wh},IIV:function(){return tg},LnJ:function(){return ng},EuY:function(){return ig},Ibk:function(){return cg},hNw:function(){return ag},qP4:function(){return lg},BFw:function(){return ug},SqC:function(){return rg},gjV:function(){return dg},DnN:function(){return sg},tvG:function(){return og},BlE:function(){return pg},B5f:function(){return qh},CgS:function(){return jh},LWq:function(){return Kh},FtH:function(){return Qh},N1Y:function(){return Jh},$qz:function(){return zh},FEC:function(){return Zh},JTk:function(){return bo},Cy3:function(){return qn},$eW:function(){return wh},UDB:function(){return Ef},Hrk:function(){return If},MW5:function(){return Rf},pGB:function(){return lT},eBN:function(){return Gy},CLx:function(){return ww},aB8:function(){return bw},a8F:function(){return Xn},OtG:function(){return da},JWg:function(){return ua},A49:function(){return Fu},hj1:function(){return Bu},sqX:function(){return Nu},gZr:function(){return _u},eqK:function(){return Lu},Eny:function(){return Uu},X66:function(){return Ru},CBr:function(){return Mu},N4n:function(){return xu},odB:function(){return Du},a8G:function(){return Ou},Z7:function(){return Z},G1z:function(){return X},na5:function(){return ee},lM0:function(){return te},yBI:function(){return ne},Xqh:function(){return Y},OIz:function(){return ie},Kbm:function(){return J},rwO:function(){return re},M2l:function(){return fy},L_o:function(){return gy},eto:function(){return os},UpF:function(){return $i},tfk:function(){return Gi},tSD:function(){return Hi},XFJ:function(){return Wi},SPE:function(){return ZS},tqB:function(){return iw},fAT:function(){return nw},Xpg:function(){return YS},sS1:function(){return aw},_$J:function(){return rw},jGf:function(){return ow},Uzd:function(){return sw},x1P:function(){return XS},oz3:function(){return ew},wyy:function(){return Ac},AWk:function(){return Tc},Uf3:function(){return kc},nZQ:function(){return Sc},kAq:function(){return yc},ODl:function(){return Pc},czP:function(){return Cc},k2Y:function(){return Ic},DJm:function(){return wc},T4Y:function(){return vc},xEV:function(){return bc},aLD:function(){return tw},j7$:function(){return Cb},ATu:function(){return Tb},z48:function(){return wb},sq:function(){return bb},L_b:function(){return Sb},ZPy:function(){return kb},qir:function(){return Pb},Kp5:function(){return xl},Hvj:function(){return Ll},uyV:function(){return Fl},aw2:function(){return Ol},_7Q:function(){return ml},b2C:function(){return Lb},Mn5:function(){return xb},jds:function(){return Db},CVs:function(){return Fb},OiY:function(){return Nb},QPL:function(){return _b},qd2:function(){return Ob},oTO:function(){return Yg},qXP:function(){return Jg},HKp:function(){return Zg},gEw:function(){return Qg},B$y:function(){return Xg},YVm:function(){return kw},Q$P:function(){return SC},vC9:function(){return wC},g_R:function(){return bC},OyK:function(){return vC},h4Z:function(){return TC},$S3:function(){return CC},BW3:function(){return kC},z98:function(){return Sh},fkG:function(){return Et},BMt:function(){return ky},OAw:function(){return Sy},Tdm:function(){return wy},a0I:function(){return Ay},xeh:function(){return Ty},ht:function(){return by},rnG:function(){return Cy},tJi:function(){return Py},PKn:function(){return Ey},P2p:function(){return Ry},ygS:function(){return Iy},QzW:function(){return A},gX:function(){return ce},iS2:function(){return de},SBd:function(){return oe},SEf:function(){return ae},gbr:function(){return se},fU5:function(){return ve},Vwf:function(){return me},lIV:function(){return ye},sGX:function(){return he},HFn:function(){return fe},AK8:function(){return YT},i7e:function(){return dk},WGi:function(){return ck},atz:function(){return uk},FvO:function(){return si},F0_:function(){return ci},Qsh:function(){return li},CKi:function(){return ui},EIi:function(){return di},hMS:function(){return bh},O4H:function(){return sk},ODI:function(){return uT},Lm2:function(){return hT},JG9:function(){return rT},xeK:function(){return dS},ynv:function(){return cS},i2h:function(){return uS},Bh9:function(){return aS},zFn:function(){return oS},Wom:function(){return sS},yQr:function(){return rS},XY$:function(){return oT},VnR:function(){return cT},Vur:function(){return aT},wt1:function(){return sT},MmB:function(){return dr},PA8:function(){return qo},FlO:function(){return Vo},pdr:function(){return jo},Lwi:function(){return zo},eck:function(){return oC},h_:function(){return aC},YVg:function(){return hl},Sp0:function(){return We},bQm:function(){return En},E8Y:function(){return QT},_D4:function(){return KT},cTj:function(){return XT},pPy:function(){return ik},VG$:function(){return tk},UGb:function(){return rk},DCV:function(){return ek},kpe:function(){return JT},JpF:function(){return uw},F3v:function(){return cw},ZZK:function(){return Nf},n8D:function(){return tn},Ggm:function(){return qt},lWE:function(){return Vt},MRy:function(){return Yt},a89:function(){return nn},nln:function(){return en},Jtn:function(){return jt},Wzw:function(){return zt},y5G:function(){return Zt},v7z:function(){return Xt},aF1:function(){return Qt},u4m:function(){return Kt},u6c:function(){return Jt},oWU:function(){return nk},F1V:function(){return $b},hii:function(){return Hb},X9Z:function(){return Bh},MD5:function(){return es},dTs:function(){return zi},huq:function(){return is},L90:function(){return ts},V3_:function(){return ns},Cn7:function(){return La},xXe:function(){return iC},fDq:function(){return rC},GrI:function(){return Q},WXX:function(){return K},I8d:function(){return Th},bKC:function(){return Ch},IIT:function(){return vg},J_l:function(){return Xh},LXY:function(){return Yh},fUc:function(){return Xv},C35:function(){return Yv},lE3:function(){return eS},ZJy:function(){return tS},$n1:function(){return Zv},Rln:function(){return ro},u4l:function(){return oo},$8R:function(){return vo},fCp:function(){return uo},BHd:function(){return lo},DWx:function(){return mo},_BW:function(){return ao},AuD:function(){return so},MFH:function(){return It},OcW:function(){return fg},f7W:function(){return yl},ZG6:function(){return Pn},H5g:function(){return Pt},jzM:function(){return pl},P14:function(){return Tn},ZSB:function(){return ji},kPC:function(){return ft},aKV:function(){return Ct},l35:function(){return mt},aO:function(){return ct},Psw:function(){return jn},aFk:function(){return $h},dQx:function(){return W},vb1:function(){return G},doX:function(){return Ye},Ecq:function(){return ks},SNZ:function(){return ls},ITJ:function(){return hs},TyC:function(){return ps},rrV:function(){return Qp},vZx:function(){return Xp},YNO:function(){return Jp},m96:function(){return jp},jvv:function(){return Kp},W7q:function(){return zp},H_Z:function(){return ws},IWG:function(){return Cs},rHL:function(){return bs},G9t:function(){return Ps},Vak:function(){return mh},ewo:function(){return AC},Jus:function(){return ys},O3:function(){return Ss},M_5:function(){return vs},GeL:function(){return cs},rbA:function(){return us},nvX:function(){return ds},OFV:function(){return Ts},O5R:function(){return gs},U:function(){return ms},Knl:function(){return fs},WOT:function(){return Zp},mr1:function(){return th},Ug4:function(){return eh},qjh:function(){return jS},y3c:function(){return Jv},ORJ:function(){return Qv},rNk:function(){return gl},tCQ:function(){return Cl},TAR:function(){return vb},yRR:function(){return bl},EF$:function(){return vl},GJW:function(){return fl},bH3:function(){return Sl},eb9:function(){return $u},tNl:function(){return Hu},bBT:function(){return Wu},NNq:function(){return Vu},_GR:function(){return Gu},UjD:function(){return qu},$RK:function(){return ju},jA_:function(){return Hv},R6k:function(){return Kv},neE:function(){return Vv},Xr9:function(){return Wv},HOH:function(){return Gv},dqy:function(){return qv},AVH:function(){return zv},ZIZ:function(){return jv},j3p:function(){return Tt},Nox:function(){return jy},ChQ:function(){return Vy},iHy:function(){return Wy},sq4:function(){return qy},OjJ:function(){return Gc},Cfk:function(){return Cn},ru5:function(){return _n},Zmj:function(){return wn},v73:function(){return bn},jZQ:function(){return An},rmC:function(){return Rn},I2B:function(){return Mn},ryt:function(){return Ln},K8d:function(){return xn},e6B:function(){return In},IfP:function(){return Ca},tkb:function(){return wa},OWM:function(){return ba},HpJ:function(){return ul},lu7:function(){return mi},ASE:function(){return yi},iWd:function(){return Xu},h0:function(){return Ju},EYh:function(){return Zu},O1E:function(){return Yu},qtV:function(){return rl},BQe:function(){return tl},ij8:function(){return nl},r6p:function(){return el},qbQ:function(){return il},O4Q:function(){return cC},r81:function(){return dC},nCk:function(){return nv},qut:function(){return iv},uud:function(){return LC},GX5:function(){return FC},JH9:function(){return Al},NFm:function(){return Tl},Z$l:function(){return kl},$YQ:function(){return Pl},y5w:function(){return dT},_Hx:function(){return pT},Pce:function(){return $T},JHN:function(){return ti},x4C:function(){return ni},cgi:function(){return yg},yVj:function(){return eb},tyW:function(){return pb},Oz9:function(){return ub},l8i:function(){return db},DEB:function(){return gb},hB2:function(){return lb},R9p:function(){return hb},YJ7:function(){return st},U4N:function(){return at},fNQ:function(){return Qe},dxF:function(){return St},aPD:function(){return bt},mXp:function(){return it},ABv:function(){return rt},BnB:function(){return ot},SSg:function(){return ut},DE1:function(){return je},udk:function(){return vt},yf9:function(){return ze},dDG:function(){return Ze},qQi:function(){return nt},oxX:function(){return et},jCZ:function(){return Xe},Q3G:function(){return qe},QW8:function(){return Ge},wXh:function(){return Ve},sf4:function(){return Ke},T4K:function(){return tt},jns:function(){return Je},Gm$:function(){return wt},lNW:function(){return ht},kHv:function(){return JS},J94:function(){return ii},AIp:function(){return Yn},AvP:function(){return ge},jty:function(){return MC},TBk:function(){return On},X1n:function(){return eg},SbG:function(){return Oh},cS0:function(){return Nh},Dpu:function(){return _h},VkE:function(){return El},dSm:function(){return Rl},fzU:function(){return Ml},jD$:function(){return tr},RbM:function(){return sl},l36:function(){return al},i8g:function(){return nh},gzO:function(){return Rt},NGC:function(){return At},hTy:function(){return hf},l8A:function(){return gT},LoM:function(){return fT},R7i:function(){return Za},h2c:function(){return Yw},agd:function(){return Lw},JNv:function(){return xw},i05:function(){return Bb},Xa2:function(){return Ub},hNX:function(){return Dl},c6N:function(){return By},VzI:function(){return Ny},MeS:function(){return j},qzL:function(){return q},RPj:function(){return QC},duJ:function(){return xC},f3z:function(){return ll},al0:function(){return ri},_f_:function(){return nT},VKD:function(){return Fe},yXV:function(){return De},KCt:function(){return ZC},KDG:function(){return YC},X1K:function(){return JC},NsM:function(){return XC},Gfj:function(){return Oe},Oee:function(){return rn},jjQ:function(){return an},xz5:function(){return on},is$:function(){return sn},lxu:function(){return cn},JIe:function(){return ln},t7r:function(){return dn},C$l:function(){return un},XUn:function(){return Vb},TnD:function(){return qb},gDO:function(){return Wb},BCc:function(){return jb},th:function(){return N},gsz:function(){return Fg},hhW:function(){return Gg},pf:function(){return Ng},gvI:function(){return Mg},i04:function(){return Lg},I9d:function(){return Vg},Yr5:function(){return _g},ceH:function(){return zg},ywN:function(){return af},PwI:function(){return Dg},T$L:function(){return cf},pGg:function(){return Og},sBb:function(){return sf},H1V:function(){return $g},RzE:function(){return Ug},glL:function(){return tf},A9I:function(){return qg},ViJ:function(){return Wg},roO:function(){return xg},Dzt:function(){return Bg},QoC:function(){return jg},PUT:function(){return Hg},Kzn:function(){return nf},BZ4:function(){return of},jjy:function(){return df},fRR:function(){return PT},f_B:function(){return bT},TbJ:function(){return UT},moT:function(){return kT},h9Y:function(){return mT},OMw:function(){return DT},qXV:function(){return IT},nNz:function(){return LT},phb:function(){return ST},aWB:function(){return wT},_Ef:function(){return yT},Whs:function(){return vT},P6v:function(){return _T},i7B:function(){return FT},wF4:function(){return OT},xsx:function(){return ET},pF6:function(){return TT},Oi4:function(){return RT},Txf:function(){return AT},YCW:function(){return CT},l_f:function(){return BT},Zdq:function(){return zS},v8C:function(){return Wn},SPB:function(){return UC},xSo:function(){return pn},yJ4:function(){return Jn},hTi:function(){return BC},VAC:function(){return NC},rEw:function(){return $n},yOM:function(){return yn},vaV:function(){return vn},JVh:function(){return hn},KMm:function(){return fn},Mly:function(){return gn},$Dp:function(){return mn},ebQ:function(){return Sn},DhF:function(){return yb},CJ1:function(){return mb},n7c:function(){return fb},gEs:function(){return sy},bAs:function(){return Se},eE5:function(){return Qi},g52:function(){return Ji},gTq:function(){return Xi},Ub$:function(){return Yi},clq:function(){return er},l0m:function(){return Zi},Qc1:function(){return Kg},Qv4:function(){return OS},k8J:function(){return yu},T5b:function(){return mu},pCD:function(){return fu},a63:function(){return cb},M6I:function(){return bf},t1k:function(){return Cf},ubC:function(){return Sf},Mej:function(){return wf},l8W:function(){return Tf},Gri:function(){return mf},hd1:function(){return kf},Erc:function(){return vf},CiN:function(){return yf},VyK:function(){return ff},ydb:function(){return yw},ldR:function(){return mw},ejn:function(){return fw},dYp:function(){return hw},gY$:function(){return gw},W4C:function(){return vw},Vmu:function(){return Sw},K73:function(){return ca},jj$:function(){return sa},wYn:function(){return Bv},La8:function(){return ak},V3k:function(){return Ov},Kpz:function(){return Nv},FQj:function(){return $v},LoI:function(){return Uv},gWj:function(){return _v},TTr:function(){return Na},WBP:function(){return Ba},Me0:function(){return Oa},MOe:function(){return _a},QQk:function(){return Ma},arc:function(){return xa},GYz:function(){return _l},uCS:function(){return v},u45:function(){return w},yWd:function(){return C},XFR:function(){return b},US9:function(){return k},n82:function(){return y},p3y:function(){return S},pIg:function(){return T},ovB:function(){return P},gX7:function(){return pc},mjE:function(){return gc},SyQ:function(){return lc},Abn:function(){return fc},qst:function(){return hc},GQD:function(){return le},bid:function(){return ue},oh8:function(){return pe},CTH:function(){return H},VHu:function(){return lh},IU$:function(){return cr},UUQ:function(){return KS},mFi:function(){return Dn},bfJ:function(){return Ut},T16:function(){return $t},A_P:function(){return Ht},GH8:function(){return Wt},EoU:function(){return Dt},AKH:function(){return Ot},TXH:function(){return _t},RwL:function(){return Ft},lrn:function(){return Gt},$2m:function(){return Nt},eEO:function(){return Bt},MA5:function(){return V},me0:function(){return bu},sRL:function(){return ku},MFQ:function(){return vu},nS9:function(){return wu},Fe_:function(){return Cu},Aps:function(){return Su},$9$:function(){return Tu},Hif:function(){return pa},sEv:function(){return ga},vAF:function(){return la},vwD:function(){return ha},GI7:function(){return ka},smA:function(){return Aa},eE7:function(){return Ia},NKp:function(){return Sa},aay:function(){return Ta},DxP:function(){return Pa},bor:function(){return va},HYO:function(){return ma},lFV:function(){return fa},Cab:function(){return ya},fDI:function(){return Fw},s3v:function(){return Vw},rqp:function(){return _w},MTg:function(){return Dw},m_W:function(){return Ow},ZCI:function(){return jw},D_G:function(){return Kw},eqf:function(){return qw},iPB:function(){return zw},vg:function(){return Bw},$Rz:function(){return $w},xQp:function(){return Nw},Rv_:function(){return Gw},zR4:function(){return Hw},iWg:function(){return Uw},Or:function(){return Ww},m_P:function(){return Qw},U_e:function(){return xT},a7O:function(){return Ku},jet:function(){return Qu},fGi:function(){return zu},H8e:function(){return yt},Y9r:function(){return Af},iqH:function(){return Tw},fV1:function(){return Wr},AUI:function(){return fo},EEV:function(){return go},uJy:function(){return Hr},$6g:function(){return wo},fSo:function(){return Gr},AhU:function(){return ho},en9:function(){return Co},MYH:function(){return ko},h35:function(){return To},ge1:function(){return Vm},Bgd:function(){return qm},kaL:function(){return iy},_ni:function(){return lt},mQB:function(){return iS},cct:function(){return nS},_5e:function(){return Ly},O0T:function(){return pt},fcE:function(){return Ea},M7L:function(){return Ra},KWF:function(){return Rw},CTB:function(){return Mw},R6F:function(){return vp},ox:function(){return Sp},NM6:function(){return fC},EY8:function(){return mC},jWh:function(){return yC},ikf:function(){return ih},jq8:function(){return rh},zeR:function(){return Uy},CqX:function(){return $y},tkv:function(){return Gb},bKp:function(){return Il},dHA:function(){return ib},zxc:function(){return rb},WYS:function(){return nb},cg9:function(){return Ie},UHb:function(){return Pe},bwz:function(){return Ce},r_t:function(){return Te},A31:function(){return ke},lZX:function(){return Ee},q6p:function(){return xe},gr5:function(){return Ae},QUT:function(){return Me},Aeb:function(){return Re},oPt:function(){return Le},hSL:function(){return Ig},FEj:function(){return Rg},O1e:function(){return wg},_5V:function(){return Sg},OFL:function(){return bg},TqQ:function(){return Cg},P$t:function(){return Pg},pex:function(){return kg},esH:function(){return Ag},jPm:function(){return Eg},ndL:function(){return Oy},paG:function(){return ei},Yg3:function(){return ad},EFk:function(){return ZT},tti:function(){return MT},bio:function(){return NT},AZe:function(){return zy},ItM:function(){return Mp},eSW:function(){return xp},ViL:function(){return Rp},r8E:function(){return Lp},_I9:function(){return Ep},ZAB:function(){return Zo},ACv:function(){return ia},C3T:function(){return ea},XDw:function(){return Yo},V2e:function(){return ur},v8K:function(){return Xo},sFk:function(){return Ko},qbM:function(){return Qo},O5q:function(){return Jo},uZx:function(){return ra},fLy:function(){return ta},fV6:function(){return na},Yon:function(){return dh},ILq:function(){return sd},_tv:function(){return gt},SAl:function(){return PC},N4g:function(){return Oi},DnH:function(){return Mi},Z1G:function(){return xi},t5z:function(){return Fi},hbd:function(){return _i},hgm:function(){return Di},Krs:function(){return Li},PiL:function(){return sb},Y6E:function(){return wp},Q0t:function(){return Pp},dAd:function(){return Ap},RDJ:function(){return bp},zo9:function(){return Ip},npe:function(){return kp},Vm4:function(){return Tp},Nyv:function(){return Cp},n3q:function(){return ab},a6r:function(){return fh},kTw:function(){return ob},Fst:function(){return yh},sX$:function(){return we},G7x:function(){return dl},vp2:function(){return $},sMt:function(){return B},FtB:function(){return U},Hcr:function(){return Yp},xpu:function(){return Av},Z6W:function(){return Mv},vn6:function(){return xv},uIr:function(){return Ev},d7f:function(){return Rv},LPj:function(){return Iv},qAf:function(){return Pv},Niu:function(){return Fv},hEV:function(){return Lv},LKs:function(){return Dv},bEm:function(){return Mh},ozy:function(){return sh},hFn:function(){return oh},GJQ:function(){return ah},fcH:function(){return Fa},OxM:function(){return Da},cJy:function(){return Pi},Agr:function(){return ki},Oek:function(){return Xw},AEH:function(){return Jw},ufb:function(){return sC},wL1:function(){return qi},WpB:function(){return Df},plI:function(){return Ti},fwK:function(){return OC},MpL:function(){return Si},Ldg:function(){return vi},Nb$:function(){return bi},sd7:function(){return wi},bd4:function(){return Ci},Zkl:function(){return DC},spi:function(){return Vi},sDq:function(){return lw},P2T:function(){return Of},mad:function(){return _f},C4I:function(){return Lf},rVt:function(){return Ff},BPe:function(){return xf},Sky:function(){return Mf},RE9:function(){return _C},q_s:function(){return pw},x_Y:function(){return WC},mvZ:function(){return $C},HRj:function(){return HC},ZsX:function(){return GC},QN2:function(){return VC},E7H:function(){return Ms},ToT:function(){return Vs},Pdg:function(){return Js},n$r:function(){return Xs},ic4:function(){return Rs},yRc:function(){return Ks},vHv:function(){return Qs},xdR:function(){return js},tLx:function(){return Hs},sWY:function(){return ec},Fyn:function(){return Ws},tN1:function(){return Ds},aHf:function(){return qs},daM:function(){return Ls},F7i:function(){return Gs},HPv:function(){return Us},Ead:function(){return _s},Ely:function(){return Os},jyo:function(){return zs},pjz:function(){return Fs},XDS:function(){return Bs},rVI:function(){return $s},nvG:function(){return Ns},Gnh:function(){return Zs},j3Z:function(){return Ys},See:function(){return nc},QsR:function(){return tc},xQV:function(){return Es},VWS:function(){return xs},BXO:function(){return rc},s22:function(){return ic},h8f:function(){return As},KyA:function(){return Fh},_yq:function(){return xh},lnl:function(){return Lh},Wlm:function(){return Dh},_yS:function(){return Is},$rl:function(){return tC},vHQ:function(){return Zb},_dh:function(){return eC},sVY:function(){return nC},xYK:function(){return _},L9E:function(){return Ld},Ms:function(){return Xd},_vs:function(){return Qd},JaT:function(){return Kd},Qc7:function(){return Yd},t0C:function(){return tu},EWv:function(){return Zd},WN0:function(){return yS},atB:function(){return MS},NvH:function(){return $d},hnd:function(){return Ud},oYh:function(){return zd},HkJ:function(){return Wd},l$l:function(){return jd},eBj:function(){return qd},bfG:function(){return Gd},U4S:function(){return eu},$mw:function(){return Jd},PTG:function(){return Hd},uSd:function(){return Vd},wAt:function(){return Bd},yOL:function(){return Fd},tFh:function(){return Dd},zl4:function(){return Md},v3e:function(){return Rd},QXe:function(){return Od},TmC:function(){return xd},w9g:function(){return _d},RTd:function(){return Nd},Ryx:function(){return rf},Chd:function(){return FS},Ekq:function(){return DS},KnF:function(){return RC},oiw:function(){return cu},roT:function(){return hu},HN$:function(){return nu},mkE:function(){return iu},nIM:function(){return au},RD:function(){return ou},DWC:function(){return su},zDb:function(){return gu},iNb:function(){return ru},fQA:function(){return uu},beE:function(){return pu},HgX:function(){return du},Huj:function(){return lS},dhI:function(){return AS},$eE:function(){return IS},W56:function(){return ES},HKi:function(){return vS},Nh3:function(){return SS},bV8:function(){return wS},hig:function(){return CS},bIr:function(){return bS},QQY:function(){return TS},OwG:function(){return RS},rfm:function(){return PS},S8$:function(){return kS},_X1:function(){return mS},I4h:function(){return gS},jhV:function(){return fS},KWu:function(){return hS},Cm8:function(){return pS},xCC:function(){return xS},wBM:function(){return LS},pLA:function(){return lu},nlN:function(){return Mb},JqC:function(){return ok},p0I:function(){return ay},ePq:function(){return ef},_yr:function(){return iT},fG_:function(){return Hh},K_X:function(){return Eu},h5L:function(){return Au},yLG:function(){return Pu},LO8:function(){return Iu},XI8:function(){return fr},Q8W:function(){return Ue},EDN:function(){return Zw},xK1:function(){return ch},sJW:function(){return ty},Uw1:function(){return am},f2c:function(){return dm},dp6:function(){return ey},NF_:function(){return Bf},uW3:function(){return zf},U1E:function(){return Hm},Dt$:function(){return Jf},np9:function(){return Sm},M6G:function(){return Cm},RaX:function(){return Zf},MWw:function(){return wm},ws9:function(){return Um},XbP:function(){return sm},erD:function(){return Fy},hOL:function(){return Dm},rYN:function(){return Nm},Akl:function(){return _m},R5h:function(){return Tm},EkS:function(){return km},zVA:function(){return Om},FDi:function(){return Pm},Jmv:function(){return hm},KJ$:function(){return xm},md3:function(){return Mm},lCX:function(){return lm},_yJ:function(){return Im},w0e:function(){return Am},Kzw:function(){return pm},tYD:function(){return Km},zYr:function(){return Rm},Ps3:function(){return Em},N1:function(){return Lm},uI4:function(){return Fm},z5u:function(){return zm},c2h:function(){return um},sDN:function(){return Kf},K0D:function(){return Gf},AeD:function(){return Wf},RGj:function(){return Vf},jkn:function(){return qf},hQ9:function(){return Gm},vpZ:function(){return em},CH5:function(){return cm},vPg:function(){return fm},G78:function(){return mm},xPu:function(){return ym},R0M:function(){return Uf},NtM:function(){return Dy},WM8:function(){return Wm},Fid:function(){return Qm},O6X:function(){return Xf},Ipv:function(){return om},F4k:function(){return $m},gu7:function(){return gm},AP6:function(){return tm},RHM:function(){return ry},Mcu:function(){return bm},R20:function(){return vy},K4A:function(){return im},K$q:function(){return Bm},XCT:function(){return nm},uJS:function(){return rm},IHr:function(){return Jm},lsA:function(){return Xm},UNp:function(){return $f},kyM:function(){return Hf},A4x:function(){return jm},iLP:function(){return Yf},Z49:function(){return Zm},x4E:function(){return yy},WNm:function(){return Qf},RtG:function(){return vm},ddY:function(){return hy},Uq0:function(){return Ym},ds2:function(){return jf},kzg:function(){return Hy},$Ej:function(){return as},a3w:function(){return ss},Yfz:function(){return Np},wD3:function(){return Dp},ecn:function(){return Fp},hAd:function(){return Op},F_w:function(){return Bp},sgf:function(){return _p},dR$:function(){return Wp},Nrs:function(){return $p},$N1:function(){return Up},U85:function(){return qp},UCw:function(){return Gp},IHw:function(){return Vp},Fi:function(){return Hp},RJh:function(){return Ab},uIV:function(){return jT},DCq:function(){return VT},ior:function(){return qT},eYv:function(){return zT},GeD:function(){return GT},rdv:function(){return WT},OF8:function(){return g},xKE:function(){return h},A$C:function(){return m},VKG:function(){return f},vlt:function(){return Ni},pL3:function(){return Bi},pHN:function(){return Ui},fDR:function(){return xy},A9S:function(){return kt},Php:function(){return dt},c7c:function(){return Lc},S5R:function(){return Oc},ujK:function(){return jc},m_L:function(){return _c},Y2u:function(){return Nc},chk:function(){return Uc},J5c:function(){return Rc},q$m:function(){return Mc},jzT:function(){return Qc},q4q:function(){return Dc},PFH:function(){return Vc},H79:function(){return zc},lou:function(){return Kc},Nol:function(){return Bc},IE6:function(){return qc},MBw:function(){return qC},Wvf:function(){return KC},_HO:function(){return zC},gRR:function(){return jC},yRT:function(){return EC},KzX:function(){return xc},$AQ:function(){return Ec},bdf:function(){return Fc},DWl:function(){return QS},om$:function(){return Wc},GKo:function(){return Hc},wke:function(){return $c},vYO:function(){return hg},cXq:function(){return rv},c$4:function(){return wv},QYr:function(){return Sv},wop:function(){return bv},Kdh:function(){return lv},Pc$:function(){return uv},xPl:function(){return av},LCb:function(){return fv},R9m:function(){return ov},v2K:function(){return hv},EuH:function(){return mv},sTM:function(){return kv},oy8:function(){return dv},Wtq:function(){return sv},rHl:function(){return Cv},cNQ:function(){return gv},R4R:function(){return pv},UKl:function(){return Tv},k6j:function(){return yv},M4n:function(){return cv},EIL:function(){return vv},COO:function(){return gg},C7r:function(){return hk},p_L:function(){return Iw},eUy:function(){return Ew},m8X:function(){return Aw},wMp:function(){return Lt},QWk:function(){return Mt},yHB:function(){return xt},Bis:function(){return Yb},yJi:function(){return Xb},$oH:function(){return Jb},qS2:function(){return zb},Ay$:function(){return wl},OC2:function(){return Qb},w5E:function(){return Kb},THd:function(){return rs},hxo:function(){return lf},PMq:function(){return uf},oJ2:function(){return lk},v2g:function(){return pk},srQ:function(){return oc},dw4:function(){return Pw},WiH:function(){return pf},c4Q:function(){return td},EOu:function(){return nd},SpS:function(){return ed},PPA:function(){return HT},Hx8:function(){return gf},lYA:function(){return kn},eEQ:function(){return Gh},ybt:function(){return Vh},h1Z:function(){return tb},sJk:function(){return $e},ohT:function(){return He},CCx:function(){return wd},qIx:function(){return kd},KX1:function(){return hd},h58:function(){return Cd},lyH:function(){return ld},BNX:function(){return ud},stP:function(){return fd},ZLh:function(){return pd},u3:function(){return Id},C9H:function(){return Pd},f5c:function(){return Ed},lNc:function(){return Ad},YYA:function(){return gd},n_f:function(){return yd},jWK:function(){return bd},mIN:function(){return dd},xTX:function(){return cd},DJq:function(){return Td},UWM:function(){return md},SCD:function(){return vd},ox2:function(){return Sd},UH6:function(){return be},FsZ:function(){return mc},LwW:function(){return ar},Nxj:function(){return sr},PL4:function(){return vh},x10:function(){return ly},Aw9:function(){return cy},lxm:function(){return oy},wtK:function(){return uy},kCY:function(){return dy},My6:function(){return ny},xx:function(){return py},beP:function(){return my},xuo:function(){return Uh},H4x:function(){return O},hT$:function(){return wr},pj$:function(){return Pr},X4U:function(){return hC},RPe:function(){return Dr},WCL:function(){return kr},b1D:function(){return gr},D6z:function(){return pC},pwT:function(){return Ar},ruE:function(){return xr},f7t:function(){return Lr},sq0:function(){return uh},x8M:function(){return Er},gJK:function(){return Nr},JIJ:function(){return pr},ZX_:function(){return uC},syw:function(){return lC},HEk:function(){return IC},BG4:function(){return Ib},jNx:function(){return Eb},_Y2:function(){return L},OPi:function(){return E},s$v:function(){return Tr},A0i:function(){return vr},nw7:function(){return br},kgv:function(){return Or},sCZ:function(){return _r},TyD:function(){return Fr},mao:function(){return hh},F$Y:function(){return Rb},_Rg:function(){return Cr},nTL:function(){return x},G1Z:function(){return M},_lB:function(){return R},AYT:function(){return F},DyR:function(){return hr},ib1:function(){return ph},z$F:function(){return I},pBE:function(){return Br},zEz:function(){return yr},kKw:function(){return mr},Yis:function(){return D},jUm:function(){return Mr},NA9:function(){return lr},zpf:function(){return Sr},VW_:function(){return gC},qq_:function(){return Rr},OLe:function(){return Ir},wCt:function(){return $r},mXy:function(){return Ur},fpE:function(){return gh},ZI3:function(){return nr},ckW:function(){return or},s7S:function(){return rr},Z3R:function(){return ir},Ecc:function(){return Eh},SWP:function(){return kh},KdC:function(){return Ih},XQI:function(){return Ph},J_V:function(){return Ah},YrP:function(){return Rh},F$$:function(){return mg},dVt:function(){return cl},K7e:function(){return co},sZS:function(){return _y},oo_:function(){return Cw},U7j:function(){return cc},IVG:function(){return sc},cM_:function(){return uc},mfB:function(){return ac},kiM:function(){return dc},Q3R:function(){return no},j0J:function(){return Jr},Kdk:function(){return qr},uBh:function(){return to},m3w:function(){return Zr},sg4:function(){return Kr},B0A:function(){return eo},AWl:function(){return Tg},I9w:function(){return yo},nDr:function(){return zr},Uqx:function(){return Yr},Ijl:function(){return Xr},Vl:function(){return Qr},e8l:function(){return jr},nFE:function(){return io},IX6:function(){return Ei},FRB:function(){return Ri},Zsh:function(){return Ii},$Yi:function(){return _S},YhM:function(){return Vr},kwG:function(){return pi},pgW:function(){return po},tQ2:function(){return So},Rgo:function(){return up},Smg:function(){return dp},gqz:function(){return yp},NZ5:function(){return mp},W1B:function(){return pp},jQb:function(){return cp},QJe:function(){return ip},CDI:function(){return tp},eD0:function(){return Bl},y6M:function(){return lp},KEP:function(){return Nl},YLV:function(){return ap},VPR:function(){return Kl},LLm:function(){return Ql},vCG:function(){return $l},V_e:function(){return Jl},NW0:function(){return Hl},ck_:function(){return np},iB1:function(){return ep},vxy:function(){return Xl},YVN:function(){return hp},jAy:function(){return Ul},vif:function(){return gp},a$Z:function(){return sp},v5s:function(){return fp},RSD:function(){return Wl},bri:function(){return ql},e88:function(){return zl},TRT:function(){return rp},TzH:function(){return op},Fh_:function(){return Yl},hqX:function(){return Zl},vas:function(){return Vl},azB:function(){return jl},MUC:function(){return Gl},$HJ:function(){return Qa},Od5:function(){return Ua},lG7:function(){return Ya},yPw:function(){return Xa},pOl:function(){return $a},lGs:function(){return Ka},OnJ:function(){return ja},X1V:function(){return Ga},rUV:function(){return za},k28:function(){return Ja},_wC:function(){return qa},OE6:function(){return Va},nsS:function(){return Ha},uSS:function(){return Wa},t$S:function(){return tT},BD8:function(){return eT},oq6:function(){return Ki},dy3:function(){return dw},mnt:function(){return u},NM:function(){return Ne},hRf:function(){return _e},SNW:function(){return Be},EYX:function(){return GS},huY:function(){return BS},hy5:function(){return NS},_l8:function(){return qS},VEM:function(){return VS},NNy:function(){return HS},rey:function(){return WS},czH:function(){return US},uzv:function(){return $S},M84:function(){return oi},IUw:function(){return ai},GQ:function(){return d}});var i=n(24358);const r=i.z.Alert,o=i.z.Deprecated,a=i.z.HighImpact,s=i.z.Critical,c=(i.C.Fallback,i.C.Exceptional,{build:""});function d(e){Object.assign(c,e)}function u(){return c}function l(e,t=i.z.Alert,n,r,o){const a={id:e,severity:t,pb:void 0===n?c:n};return void 0!==r&&(a.message=r),void 0!==o&&(a.source=o),a}function p(e,t){return{build:"",userImpacting:e,errorBehavior:t}}const h=l(8021),g=l(8022),f=l(8027),m=l(8028),y=l(8029),v=l(8030),S=l(8031,a),w=l(8032,a),b=l(8033,a),C=l(8034),T=l(8035),k=l(8036),P=l(8037),A=l(8047),I=l(8100,a,p(!0)),E=l(8101,o),R=l(8102,o),M=l(8103,r,p(!0)),x=l(8104,r,p(!0)),L=l(8105,o),F=l(8107,o),D=l(8108,r,p(!0)),O=l(8109,o),_=l(8126),N=l(8137),B=l(8190),U=l(8191),$=l(8192),H=l(8203),W=l(8222),G=l(8223),V=l(8230),q=l(8260,o),j=l(8261,a),z=l(8350),K=l(8380),Q=l(8381),J=l(8601),X=l(8602),Y=l(8603),Z=l(8604),ee=l(8605),te=l(8606),ne=l(8607),ie=l(8608,o),re=l(8611),oe=l(8810,a),ae=l(8811,a),se=l(8812,a),ce=l(8813,a),de=l(8814,a),ue=l(8815,s,c,"Cookie Banner Element is missing"),le=l(8816,o,c,"Cookie Banner data-client-settings is invalid"),pe=l(8817,o,c,"Fixed TCF string in US locale failed"),he=l(8841,a),ge=l(8842,s),fe=l(8843),me=l(8844),ye=l(8845,s),ve=l(8846,s),Se=l(8847),we=l(8848,a),be=l(9055),Ce=l(9425),Te=l(9426),ke=l(9427),Pe=l(9428),Ae=l(9429),Ie=l(9430),Ee=l(9431),Re=l(9432),Me=l(9433),xe=l(9434),Le=l(9437),Fe=l(9734),De=l(9735),Oe=l(9781),_e=l(9787,o),Ne=l(9789,o),Be=l(9790,o),Ue=l(9798),$e=l(9904),He=l(9906),We=l(11103),Ge=l(13e3),Ve=l(13001),qe=l(13100),je=l(13101),ze=l(13102),Ke=l(13103),Qe=l(13104),Je=l(13105),Xe=l(13108),Ye=l(13109),Ze=l(13110),et=l(13114),tt=l(13115),nt=l(13116),it=l(13117),rt=l(13119),ot=l(13120),at=l(13121),st=l(13122,a),ct=l(13125),dt=l(13126),ut=l(13127),lt=l(13128),pt=l(13129),ht=l(13131),gt=l(13132),ft=l(13133),mt=l(13134),yt=l(13135),vt=l(13136),St=l(13137),wt=l(13138),bt=l(13140),Ct=l(13141),Tt=l(13142),kt=l(13143,o),Pt=l(13144),At=l(14007),It=l(14100,a),Et=l(14101),Rt=l(14102),Mt=l(15410),xt=l(15411),Lt=l(15412,o),Ft=l(18100),Dt=l(18103),Ot=l(18104),_t=l(18105),Nt=l(18106),Bt=l(18107),Ut=l(18108),$t=l(18109),Ht=l(18110),Wt=l(18111),Gt=l(18113),Vt=l(19e3),qt=l(19001),jt=l(19004,s,p(!0)),zt=l(19006),Kt=l(19010),Qt=l(19013),Jt=l(19014),Xt=l(19016),Yt=l(19019),Zt=l(19021),en=l(19023),tn=l(19024),nn=l(19025),rn=l(20007,o),on=l(20008),an=l(20009),sn=l(20018),cn=l(20066),dn=l(20068),un=(i.z.Deprecated,l(20082,o)),ln=l(20088),pn=l(20139),hn=l(20140),gn=l(20141),fn=l(20142),mn=l(20143),yn=l(20144),vn=l(20220),Sn=l(21100),wn=l(20150),bn=l(20151),Cn=l(20152),Tn=l(20153),kn=l(20168),Pn=l(20169),An=l(20165),In=l(20166),En=l(20167),Rn=l(20154),Mn=l(20155),xn=l(20156),Ln=l(20157),Fn=l(20158),Dn=l(20159),On=l(20162,a),_n=l(20164),Nn=l(20171),Bn=l(20172),Un=l(20173),$n=l(20174),Hn=l(20175),Wn=l(20176),Gn=l(20177),Vn=l(20178),qn=l(20179),jn=l(20180),zn=l(20181),Kn=l(20182),Qn=l(20184),Jn=l(20186),Xn=l(20188),Yn=l(20189),Zn=l(20190,o),ei=l(20191,o),ti=l(20194,a),ni=l(20195,a),ii=l(20196),ri=l(20197),oi=l(20198),ai=l(20199),si=l(20203),ci=l(20204,o),di=l(20205,o),ui=l(20209,o,c,"Service request failed all retries"),li=l(20210,o,c,"1S request (assets.msn.*) failed. Retrying using backup domain (assets2.msn.*)"),pi=l(20222),hi=l(20302),gi=l(20303),fi=l(20304),mi=l(22029,s),yi=l(22030,s),vi=(i.z.Deprecated,l(24520)),Si=l(24521),wi=l(24522),bi=l(24523),Ci=l(24524),Ti=l(24526),ki=l(24573),Pi=l(24574),Ai="WindowsShellAccountManager.connector.ts",Ii=l(24580,o,c,void 0,Ai),Ei=l(24583,r,c,void 0,Ai),Ri=l(24584),Mi=l(24601),xi=l(24602),Li=l(24603),Fi=l(24606),Di=l(24607),Oi=l(24608),_i=l(24609),Ni=l(24611),Bi=l(24612),Ui=l(24613),$i=l(28100,o),Hi=l(28101),Wi=l(28102),Gi=l(28103),Vi=l(28110),qi=l(28111),ji=l(28213,o),zi=l(28216),Ki=l(28217),Qi=l(28410),Ji=l(28411,o),Xi=l(28414),Yi=l(28415),Zi=l(28420),er=l(28421),tr=l(28500),nr=l(29e3),ir=l(29001),rr=l(29002,o),or=l(29003),ar=l(29100,a),sr=l(29101),cr=l(29102),dr=l(29103),ur=l(29105,o),lr=l(29499,s,p(!0)),pr=l(29503,o),hr=l(29507,r,p(!0)),gr=l(29508,r,p(!0)),fr=l(29526,r,p(!0)),mr=l(29530,o),yr=l(29532,o,p(!1)),vr=l(29533,r,p(!0)),Sr=l(29535,a,p(!0)),wr=l(29541,o,p(!1)),br=l(29543,r,p(!0)),Cr=l(29544,o,p(!0)),Tr=l(29545,a,p(!0)),kr=l(29547,r,p(!0)),Pr=l(29548,a,p(!0)),Ar=l(29549,r,p(!0)),Ir=l(29557,r,p(!0)),Er=l(29565,r,p(!0)),Rr=l(29566,o,p(!1)),Mr=l(29569,r,p(!0)),xr=l(29580,a,p(!0)),Lr=l(29582,r,p(!0)),Fr=l(29585,o,p(!1)),Dr=l(29586,r,p(!0)),Or=l(29590,r,p(!0)),_r=l(29591,o,p(!0)),Nr=l(29593,o,p(!1)),Br=l(29599,o,p(!0)),Ur=l(295005,o,p(!0)),$r=l(295006,o,p(!0)),Hr=l(29610,o),Wr=l(29625,o),Gr=l(29635),Vr=l(29729,o),qr=l(29854),jr=l(29855),zr=l(29856),Kr=l(29857),Qr=l(29858),Jr=l(29860),Xr=l(29861),Yr=l(29862),Zr=l(29863),eo=l(29864),to=l(29865),no=l(29866),io=l(29867),ro=l(29901),oo=l(29903),ao=l(29904),so=l(29905),co=l(29910),uo=l(29923),lo=l(29924),po=l(29952),ho=l(29959),go=l(29960),fo=l(29961),mo=l(29971),yo=l(29972),vo=l(29977),So=l(29980),wo=l(29992),bo=l(29993),Co=l(31100),To=l(31104),ko=l(31109),Po=l(33e3,o),Ao=l(33012),Io=l(33013,o),Eo=l(33014),Ro=l(33015,o),Mo=l(33018,o),xo=l(33016,o),Lo=l(33020),Fo=l(33100),Do=l(33102),Oo=l(33103),_o=l(33105),No=l(33110),Bo=l(33113,o),Uo=l(33130,s,p(!0)),$o=l(33140),Ho=l(33151),Wo=l(33160,s,p(!0)),Go=l(33161,s,p(!0)),Vo=l(33170,s,p(!0)),qo=l(33171,s,p(!0)),jo=l(33175,s,p(!0)),zo=l(33176,s,p(!0)),Ko=l(34013,o),Qo=l(34014,a),Jo=l(34015,a),Xo=l(34016,o),Yo=l(34022,a),Zo=l(34024),ea=l(34027),ta=l(34028,o),na=l(34032),ia=l(34033),ra=l(34034),oa=l(35201),aa=l(35203,o),sa=l(35401,o),ca=l(35402),da=l(35403,o),ua=l(35404,o),la=l(35600,o),pa=l(35601,o),ha=l(35602,o),ga=l(35603,o),fa=l(35604,o),ma=l(35605,o),ya=l(35606,o),va=l(35607,o),Sa=l(35608,o),wa=l(35609,o),ba=l(35610,o),Ca=l(35611,o),Ta=l(35613,o),ka=l(35614,o),Pa=l(35615,o),Aa=l(35616,o),Ia=l(35617,o),Ea=l(35700),Ra=l(35701),Ma=l(36105),xa=l(36106),La=l(36107),Fa=l(36108),Da=l(36109,o),Oa=l(36111),_a=l(36113),Na=l(36121,o),Ba=l(36122),Ua=l(36300),$a=l(36302),Ha=l(36309),Wa=l(36311),Ga=l(36313),Va=l(36314,o),qa=l(36315),ja=l(36317,o),za=l(36319,o),Ka=l(36320,o),Qa=l(36321),Ja=l(36322),Xa=l(36323,o),Ya=l(36324,o),Za=l(36402),es=l(36600),ts=l(36601),ns=l(36602),is=l(36603),rs=l(36604),os=l(36605),as=l(36606),ss=l(36607),cs=l(36904),ds=l(36905),us=l(36906),ls=l(36908),ps=l(36909),hs=l(36910),gs=l(36911),fs=l(36912),ms=l(36913),ys=l(36917),vs=l(36918),Ss=l(36919),ws=l(36920),bs=l(36921),Cs=l(36922),Ts=l(36936),ks=l(36962,s,p(!0)),Ps=l(36991,r,p(!1)),As=l(37001),Is=l(37014,r,p(!0)),Es=l(37020),Rs=l(37021),Ms=l(37022),xs=l(37023),Ls=l(37024),Fs=l(37025),Ds=l(37026),Os=l(37028),_s=l(37029),Ns=l(37030),Bs=l(37031),Us=l(37032),$s=l(37033),Hs=l(37035),Ws=l(37036),Gs=l(37037),Vs=l(37038),qs=l(37039),js=l(37040),zs=l(37041),Ks=l(37042),Qs=l(37043),Js=l(37044),Xs=l(37045),Ys=l(37046),Zs=l(37047),ec=l(37048),tc=l(37049),nc=l(37050),ic=l(37074),rc=l(37075),oc=l(37300,o),ac=(i.z.Deprecated,l(37550)),sc=l(37551),cc=l(37552),dc=l(37553),uc=l(37554,o),lc=l(37560),pc=l(37561),hc=l(37562,s),gc=l(37563),fc=l(37566),mc=l(37568),yc=l(37571,r,p(!0)),vc=l(37573,r),Sc=l(37576),wc=l(37577,r,p(!0)),bc=l(37578,o),Cc=l(37579),Tc=l(37580),kc=l(37581),Pc=l(37582),Ac=l(37583,o),Ic=l(37584),Ec=l(37601),Rc=l(37604),Mc=l(37605),xc=l(37609),Lc=l(37610),Fc=l(37611),Dc=l(37612,r,p(!0)),Oc=l(37613),_c=l(37614),Nc=l(37629),Bc=l(37631),Uc=l(37632),$c=l(37634,o),Hc=l(37635,o),Wc=l(37636,o),Gc=l(37637),Vc=l(37638),qc=l(37639),jc=l(37640),zc=l(37641),Kc=l(37642),Qc=l(37644),Jc=l(38e3),Xc=l(38001,o),Yc=l(38002,o),Zc=l(38003,o),ed=l(38005),td=l(38006,o),nd=l(38007,o),id=l(38008,o),rd=l(38009,o),od=l(38004),ad=l(38046,s),sd=l(38055),cd=l(38101),dd=l(38102),ud=l(38104),ld=l(38105),pd=l(38112),hd=l(38116),gd=l(38117),fd=l(38118),md=l(38119,o),yd=l(38120),vd=l(38124,o),Sd=l(38125),wd=l(38127),bd=l(38128,o),Cd=l(38129),Td=l(38130,o),kd=l(38132,o),Pd=l(38133),Ad=l(38134),Id=l(38135),Ed=l(38138),Rd=l(38300,a,p(!0)),Md=l(38301,a,p(!0)),xd=l(38302),Ld=l(38303),Fd=l(38304),Dd=l(38305),Od=l(38306),_d=l(38307),Nd=l(38318),Bd=l(38319,a,p(!0)),Ud=l(38320),$d=l(38321,a,p(!0)),Hd=l(38322,a,p(!0)),Wd=l(38323),Gd=l(38324),Vd=l(38325),qd=l(38327,a),jd=l(38328),zd=l(38329),Kd=l(38331,a,p(!0)),Qd=l(38334,r,p(!0)),Jd=l(38342),Xd=l(38344),Yd=l(38345),Zd=l(38346),eu=l(38347),tu=l(38348),nu=l(38360),iu=l(38362),ru=l(38363),ou=l(38364),au=l(38365,s),su=l(38366),cu=l(38367),du=l(38369),uu=l(38370),lu=l(38373),pu=l(38375),hu=l(38377),gu=l(38378),fu=(i.z.Deprecated,l(38600)),mu=l(38601),yu=l(38602),vu=l(38603),Su=l(38604),wu=l(38605),bu=l(38606),Cu=l(38607),Tu=l(38608,o),ku=l(36809),Pu=l(38800),Au=l(38801),Iu=l(38802),Eu=l(38803),Ru=l(38903),Mu=l(38904),xu=l(38905),Lu=l(38906),Fu=l(38907),Du=l(38908),Ou=l(38909),_u=l(38910),Nu=l(38911),Bu=l(38912),Uu=l(38913),$u=l(39006),Hu=l(39007),Wu=l(39008),Gu=l(39009),Vu=l(39010),qu=l(39011),ju=l(39012),zu=l(39205),Ku=l(39210),Qu=l(39211),Ju=l(39230),Xu=l(39231),Yu=l(39232),Zu=l(39233),el=l(39234,o),tl=l(39235,o),nl=l(39236),il=l(39237,o),rl=l(39238,o),ol=l(39300),al=l(39361,o),sl=l(39362,o),cl=l(39400),dl=l(39500),ul=l(39501),ll=l(39502),pl=l(39508),hl=l(39509),gl=l(39510),fl=l(39511),ml=l(39512),yl=l(39513),vl=l(39514),Sl=l(39515),wl=l(39517),bl=l(39518),Cl=l(39519),Tl=l(39600),kl=l(39601),Pl=l(39602),Al=l(39603),Il=l(39708,o),El=l(39712),Rl=l(39713,o),Ml=l(39714),xl=l(39717),Ll=l(39718),Fl=l(39719),Dl=l(39720),Ol=l(39722),_l=l(39901),Nl=l(40301,a),Bl=l(40302,a),Ul=l(40303,o),$l=l(40304,a),Hl=l(40305,a),Wl=l(40308),Gl=l(40310,o),Vl=l(40312,a),ql=l(40313,a),jl=l(40314),zl=l(40315),Kl=l(40318),Ql=l(40319),Jl=l(40320),Xl=l(40321,o),Yl=l(40322,a),Zl=l(40323,a),ep=l(40324,o),tp=l(40325,o),np=l(40326,a),ip=l(40327,a),rp=l(40328,o),op=l(40329,o),ap=l(40331),sp=l(40332),cp=l(40333,o),dp=l(40334,o),up=l(40335,o),lp=l(40336,a),pp=l(40337,a),hp=l(40338,o),gp=l(40339,o),fp=l(40340,o),mp=l(40341,o),yp=l(40342),vp=l(40500),Sp=l(40520,o),wp=l(40600,o),bp=l(40601),Cp=l(40604),Tp=l(40605),kp=l(40606),Pp=l(40607),Ap=l(40608),Ip=l(40609),Ep=l(40700),Rp=l(40701),Mp=l(40702),xp=l(40703),Lp=l(40704),Fp=l(41e3),Dp=l(41001),Op=l(41002),_p=l(41003),Np=l(41005),Bp=l(41006),Up=l(41007),$p=l(41009),Hp=l(41010,o),Wp=l(41011,o),Gp=l(41012,o),Vp=l(41013,o),qp=l(41014),jp=l(41216),zp=l(41217),Kp=l(41218),Qp=l(41224),Jp=l(41225),Xp=l(41226),Yp=l(41271,s),Zp=l(41273,s),eh=l(41274,s),th=l(41275,s),nh=l(41350),ih=l(41406),rh=l(41407),oh=l(41415),ah=l(41416),sh=l(41417,o),ch=l(41611),dh=l(41900),uh=l(42602),lh=l(42603),ph=l(42604),hh=l(42605),gh=l(42606),fh=l(43e3),mh=l(43011),yh=l(43012,o),vh=l(43225),Sh=l(43310),wh=l(43500),bh=l(43511),Ch=l(43600),Th=l(43601),kh=l(43700),Ph=l(43701),Ah=l(43702),Ih=l(43703),Eh=l(43705),Rh=l(43706,o),Mh=l(43801),xh=l(43968),Lh=l(43970),Fh=l(43985),Dh=l(43986),Oh=l(40001),_h=l(40002),Nh=l(40003),Bh=l(44003),Uh=l(44200),$h=l(44201,s),Hh=l(44300),Wh=l(44700),Gh=l(44701),Vh=l(44702),qh=l(44703),jh=l(44704),zh=l(44705),Kh=l(44706),Qh=l(44707),Jh=l(44708),Xh=l(44709),Yh=l(44710),Zh=l(44712),eg=l(44713),tg=l(44720),ng=l(44721),ig=l(44722),rg=l(44724),og=l(44725),ag=l(44726),sg=l(44727,o),cg=l(44728,o),dg=l(44729,o),ug=l(44730,o),lg=l(44731,o),pg=l(44732),hg=l(45700),gg=l(45706,r,p(!0)),fg=l(46216,s),mg=l(46222,s),yg=l(46243,o),vg=l(47101),Sg=(i.z.Deprecated,l(47701,s)),wg=l(47702,s),bg=l(47703,s),Cg=l(47704,s),Tg=l(47705,s),kg=l(47706,s),Pg=l(47707,s),Ag=l(47710,a,p(!0)),Ig=l(47712,a,p(!0)),Eg=l(47713,a,p(!0)),Rg=l(47716,a,p(!0)),Mg=l(50001),xg=l(50003),Lg=l(50005),Fg=l(50008),Dg=l(50011,s),Og=l(50017),_g=l(50025,s),Ng=l(50027),Bg=l(50030),Ug=l(50031),$g=l(50032),Hg=l(50033),Wg=l(50041),Gg=l(50042),Vg=l(50043),qg=l(50045),jg=l(50046),zg=l(50049),Kg=l(50050),Qg=l(50053,s),Jg=l(50054),Xg=l(50061),Yg=l(50062),Zg=l(50063),ef=l(50065),tf=l(50066),nf=l(50067),rf=l(50068),of=l(50069),af=l(50072),sf=l(50073),cf=l(50074),df=l(50075),uf=l(50100),lf=l(50101),pf=l(50400,o),hf=l(50402),gf=l(50403),ff=l(53101),mf=l(53102),yf=l(53103),vf=l(53104,o),Sf=l(53105),wf=l(53106,o),bf=l(53107),Cf=l(53108),Tf=l(53111),kf=l(53112,o),Pf=l(53322),Af=l(53700),If=l(53800,r,c,void 0,"libs/feed-layout/.../healthFitnessCardDataMapper.ts"),Ef=l(53801),Rf=l(53802),Mf=l(53944),xf=l(53952),Lf=l(53972),Ff=l(54401),Df=l(54437),Of=l(54440),_f=l(54441),Nf=l(60004),Bf=l(60101),Uf=l(60102),$f=l(60103),Hf=l(60104),Wf=l(60105),Gf=l(60106),Vf=l(60107),qf=l(60108),jf=l(60109),zf=l(60110),Kf=l(60111),Qf=l(60114),Jf=l(60115),Xf=l(60116),Yf=l(60117,o),Zf=l(60118,o),em=l(60119),tm=l(60120),nm=l(60125),im=l(60126),rm=l(60127),om=l(60128),am=l(60510),sm=l(60129),cm=l(60130),dm=l(60132,o),um=l(60134,o),lm=l(60135,o),pm=l(60136,o),hm=l(60137,o),gm=l(60138,s),fm=l(60139,o),mm=l(60140,o),ym=l(60141,o),vm=l(60142,a),Sm=l(60143),wm=l(60145,o),bm=l(60146,o),Cm=l(60147),Tm=l(60148),km=l(60149),Pm=l(60150),Am=l(60151,a),Im=l(60152,a),Em=l(60153,o),Rm=l(60154,a),Mm=l(60155,o),xm=l(60156,a),Lm=l(60157,o),Fm=l(60158,o),Dm=l(60160,o),Om=l(60161,a),_m=l(60162,o),Nm=l(60163,o),Bm=l(60165),Um=l(60166),$m=l(60168,o),Hm=l(60169),Wm=l(60170),Gm=l(60171),Vm=l(60228),qm=l(60237),jm=l(60239),zm=l(60240),Km=l(60241,o),Qm=l(60242),Jm=l(60243),Xm=l(60244),Ym=l(60245),Zm=l(60246),ey=l(60247,s),ty=l(60250,o),ny=l(60252,o),iy=l(60254),ry=l(60259),oy=l(60260,o),ay=l(60261,o),sy=l(60262,o),cy=l(60265),dy=l(60266),uy=l(60267),ly=l(60268),py=l(60269),hy=l(60270),gy=l(60271),fy=l(60272),my=l(60281),yy=l(60282,o),vy=l(60285),Sy=l(60400),wy=l(60401),by=l(60403),Cy=l(60404),Ty=l(60406),ky=l(60407),Py=l(60408),Ay=l(60409),Iy=l(60410),Ey=l(60413),Ry=l(60414),My=l(60421),xy=l(60430),Ly=l(60475),Fy=l(60500),Dy=l(60550),Oy=l(60551),_y=l(60552),Ny=l(60800),By=l(60801),Uy=l(60900),$y=l(60901),Hy=l(61e3),Wy=l(65e3),Gy=l(65001),Vy=l(65002),qy=l(65003),jy=l(65004),zy=l(65100,a),Ky=l(7e4,a),Qy=l(70001,a),Jy=l(70010),Xy=l(70011),Yy=l(70012),Zy=l(70013),ev=l(70014,s),tv=l(70015,s),nv=l(70100),iv=l(70101),rv=l(70202),ov=l(70203),av=l(70204),sv=l(70205),cv=l(70206),dv=l(70209),uv=l(70210),lv=l(70211),pv=l(70212),hv=l(70213),gv=l(70214),fv=l(70216),mv=l(70217),yv=l(70218),vv=l(70219),Sv=l(70221),wv=l(70222),bv=l(70223),Cv=l(70224),Tv=l(70225),kv=l(70227),Pv=l(70400),Av=l(70401),Iv=l(70402),Ev=l(70403),Rv=l(70404),Mv=l(70406,i.z.Deprecated),xv=l(70407,i.z.Deprecated),Lv=l(70408),Fv=l(70409),Dv=l(70410,i.z.Deprecated),Ov=l(70602),_v=l(70603),Nv=l(70604),Bv=l(70605),Uv=l(70606),$v=l(70607),Hv=(i.z.Deprecated,l(73021)),Wv=l(73030),Gv=l(73033),Vv=l(73040),qv=l(73052),jv=l(73053),zv=l(73054),Kv=l(73065,o),Qv=l(73078),Jv=l(73079),Xv=l(73100),Yv=l(73101),Zv=l(73102),eS=l(73104),tS=l(73105),nS=l(73116),iS=l(73117),rS=l(73121),oS=l(73122),aS=l(73123),sS=l(73124),cS=l(73125),dS=l(73126),uS=l(73127),lS=l(73209,r,p(!1)),pS=l(73210,r,p(!0)),hS=l(73211),gS=l(73212,a),fS=l(73213,a),mS=l(73215,r,p(!0)),yS=l(73253,a,p(!1)),vS=l(73255,a,p(!0)),SS=l(73256,a,p(!0)),wS=l(73257,a,p(!0)),bS=l(73258,a,p(!0)),CS=l(73259,a,p(!1)),TS=l(73260),kS=l(73261,r,p(!0)),PS=l(73262,a,p(!0)),AS=l(73263,a,p(!0)),IS=l(73264,a,p(!1)),ES=l(73265),RS=l(73266,a,p(!1)),MS=l(73267,a,p(!1)),xS=l(73307),LS=l(73308),FS=(i.z.HighImpact,i.z.HighImpact,i.z.HighImpact,i.z.HighImpact,l(77025,a)),DS=l(77026,r),OS=l(80105),_S=l(90108,o),NS=l(90300),BS=l(90301,o),US=l(90303),$S=l(90305),HS=l(90306),WS=l(90307),GS=l(90308,o),VS=l(90309,o),qS=l(90310,o),jS=l(91002),zS=l(91005),KS=l(91006),QS=l(91007),JS=l(92001),XS=l(100004),YS=l(100011),ZS=l(100036),ew=l(100042),tw=l(100054),nw=l(101200),iw=l(101201),rw=l(101203),ow=l(101204),aw=l(101208),sw=l(101209),cw=l(102003,o),dw=l(102300,o),uw=l(102302,o),lw=l(110043),pw=l(110044,o),hw=l(111001,o),gw=l(111030,o),fw=l(111043,o),mw=l(111050,o),yw=l(111051,o),vw=l(111060,o),Sw=l(111070,o),ww=l(111100),bw=l(111103),Cw=l(111106),Tw=l(111110),kw=l(111300),Pw=l(112001,o),Aw=l(120001),Iw=l(120002),Ew=l(120003),Rw=l(120010),Mw=l(120011),xw=l(125001),Lw=l(125002),Fw=l(130002),Dw=l(130003),Ow=l(130004,o),_w=l(130005,o),Nw=l(130006,o),Bw=l(130007,o),Uw=l(130008,o),$w=l(130009,o),Hw=l(130010,o),Ww=l(130011,o),Gw=l(130012,o),Vw=l(130013,o),qw=l(130014,o),jw=l(130015,o),zw=l(130016,o),Kw=l(130017,o),Qw=l(130018,o),Jw=l(133100),Xw=l(133101),Yw=l(134e3),Zw=l(135020),eb=l(135021),tb=l(135022),nb=l(135040,o),ib=l(135041,o),rb=l(135043),ob=l(136015),ab=l(136016),sb=l(136018),cb=l(14e4),db=(i.z.Deprecated,l(140100)),ub=l(140101),lb=l(140102),pb=l(140103),hb=l(140104),gb=l(140110),fb=l(140105),mb=l(140106),yb=l(140107),vb=l(140200),Sb=l(143e3,o),wb=l(143001,s),bb=l(143007,s),Cb=l(143002,s),Tb=l(143003,s),kb=l(143005,s),Pb=l(143006,s),Ab=l(144e3),Ib=l(146e3,r,p(!0)),Eb=l(146001,o),Rb=l(146002,r,p(!0)),Mb=l(222223),xb=l(223e3),Lb=l(223001),Fb=l(223002),Db=l(223004),Ob=l(223005),_b=l(223006),Nb=l(223007),Bb=l(223060),Ub=l(223062,o),$b=l(223100),Hb=l(223101),Wb=l(223200),Gb=l(223201),Vb=l(223202),qb=l(223203,s),jb=l(223204),zb=l(223300,o),Kb=l(223301),Qb=l(223302),Jb=l(223303,o),Xb=l(223304,o),Yb=l(223305,o),Zb=l(224100,s,p(!0)),eC=l(224101),tC=l(224102),nC=l(224103),iC=l(224200),rC=l(224201),oC=l(224300),aC=l(224301),sC=l(224302,s),cC=l(224500,s,p(!0)),dC=l(224502),uC=l(295103,o),lC=l(295104,o),pC=l(295100,o),hC=l(295101,o),gC=l(295102),fC=l(295200),mC=l(295201),yC=l(295202),vC=l(300001),SC=l(30002),wC=l(30003,i.z.Deprecated),bC=l(30004,i.z.Deprecated),CC=l(30005),TC=l(30006),kC=l(30007,i.z.Deprecated),PC=l(295205),AC=l(295206),IC=l(295207),EC=l(295208),RC=l(295209),MC=l(295210),xC=l(295211),LC=l(295212),FC=l(295220),DC=l(295254),OC=l(295255),_C=l(295256),NC=l(295300),BC=l(295301),UC=l(295302),$C=l(295402),HC=l(295406),WC=l(295407),GC=l(295408),VC=l(295409),qC=l(295500,s),jC=l(295501),zC=l(295502),KC=l(295503),QC=l(295504),JC=l(1600,a),XC=l(1602,a),YC=l(1606,a),ZC=l(1612),eT=l(1614,a),tT=l(1615,a),nT=l(1616),iT=l(345e3,a),rT=l(35e4),oT=l(351e3),aT=l(351001),sT=l(351002),cT=l(351010),dT=l(41e4),uT=l(410001),lT=l(410002),pT=l(410003),hT=l(410004),gT=l(43e4),fT=l(430001),mT=l(420050,a),yT=l(420051,a),vT=l(420053,a),ST=l(420052,a),wT=l(420054),bT=l(420100,a),CT=l(420101,a),TT=l(420102,a),kT=l(420103,a),PT=l(420055,a),AT=l(420056,a),IT=l(420057,a),ET=l(420058,a),RT=l(420059,a),MT=l(420104,a),xT=l(420105,a),LT=l(420106,a),FT=l(420107),DT=l(420108),OT=l(420109),_T=l(420111),NT=l(420112),BT=l(420113),UT=l(420116),$T=l(440001),HT=l(440002),WT=l(45e4,a,p(!0)),GT=l(450001,a,p(!0)),VT=l(450002,a,p(!0)),qT=l(450003,a,p(!0)),jT=l(450004,a,p(!0)),zT=l(450005,a,p(!0)),KT=l(46e4),QT=l(460001),JT=l(460002),XT=l(460003),YT=l(460004),ZT=l(460005),ek=l(460007),tk=l(460008),nk=l(460011),ik=l(460012),rk=l(460013),ok=l(48e4),ak=l(49e4),sk=l(5e5,r,p(!0)),ck=l(51e4,o),dk=l(511e3,o),uk=l(512e3,o),lk=l(52e4),pk=l(520002),hk=l(55e4),gk=l(56e4)},33082:function(e,t,n){n.d(t,{M:function(){return p}});var i=n(1970),r=n(84147),o=n(26482),a=n(95912),s=n(53723);class c extends s.i{constructor(e,t,n,i,r,o,a){super(t,n,i,r,o,a),this.RequestId=e}set isMetrics(e){this._isMetrics=e}get isMetrics(){return this._isMetrics}}var d=n(67509),u=n(21215),l=n(73987);class p{constructor(e,t=""){this.requestId=t,(0,u.N)()?(this.logger=o.e.getInstance("ExperienceLogger",r.i.Info,d.N.Browser),this.isDebugEnabled=((0,l._)(e,"debug")||"").toLowerCase()in{1:1,true:1}||"vp"===((0,l._)(window.location.href,"reqsrc")||"").toLowerCase(),this.isDebugEnabled&&!n.g.TEST_ENV&&(window.webpackRequire=n)):(this.logger=o.e.getInstance("ExperienceLogger",r.i.Info,d.N.NodeJs),this.isDebugEnabled=!1),this.setupLogLevel()}getLoggingService(){return this.logger}isDebug(){return this.isDebugEnabled}setDebug(e){this.isDebugEnabled=e,this.setupLogLevel()}setTags(e){this.tags=e}log(e,t){if(!this.tags||!this.tags.length||t&&t.length&&t.filter((e=>this.tags.includes(e))).length>0){const t=new c(this.requestId,e);this.logger.info(t)}}logError(e){const t=new c(this.requestId,e);this.logger.error(t)}logCallback(e){this.logger.infoCallback(e)}logObjects(...e){const t=new c(this.requestId,null,e);this.logger.info(t)}logSingleObject(e,t=!1){const n=new c(this.requestId,null,e);n.isMetrics=t,this.logger.info(n)}setupLogLevel(){this.logger.setLevel(this.isDebug()?r.i.Info:r.i.Error),this.setupAppenders()}setupAppenders(){this.logger.removeAllAppenders(),(0,u.N)()?this.logger.addAppender(new i.N(this.logger.getLevel())):this.logger.addAppender(new a.m(this.logger.getLevel()))}}},33779:function(e,t,n){n.d(t,{H:function(){return s},OO:function(){return a},Tr:function(){return c}});var i=n(44132),r=n(5302),o=n(7677);function a(e,t,n,r,a={},s){const d=c(t,n,r||(0,o.n)(e),a,s);d.pb.stack=e&&e.stack||void 0,i.M0&&i.M0.sendAppErrorEvent(d)}function s(e,t,n,r={},o=!0,a){i.M0&&i.M0.sendAppErrorEvent(c(e,t,n,r,a),o)}function c(e,t,n,i={},o){const a=(0,r.mnt)();"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("appError",{detail:{errorId:e.id}}));const s=n?{...a,...e.pb,customMessage:n,...i,w:1}:{...a,...e.pb,...i,w:1};return"number"==typeof o&&o>0&&o<100&&(s.samplePct=o),{...e,message:t||e.message,pb:s}}},30490:function(e,t,n){n.d(t,{C:function(){return o}});var i=n(73987),r=n(21215);class o{constructor(){(0,r.N)()?(this.isDebugEnabled=((0,i._)(window.location.href,"debug")||"").toLowerCase()in{1:1,true:1}||"vp"===((0,i._)(window.location.href,"reqsrc")||"").toLowerCase(),this.isDebugEnabled&&!n.g.TEST_ENV&&(window.webpackRequire=n)):this.isDebugEnabled=!1}getLoggingService(){return null}isDebug(){return this.isDebugEnabled}setDebug(e){this.isDebugEnabled=e}setTags(e){}log(e,t){this.isDebug()&&console.info(e)}logError(e){console.error(e)}logCallback(e){this.isDebug()&&console.info(e())}logObjects(...e){this.isDebug()&&console.log(...e)}logSingleObject(e,t){this.isDebug()&&console.log(e)}}},42122:function(e,t,n){function i(e){r=e}n.d(t,{E:function(){return i},k:function(){return r}});let r=new(n(30490).C)},84381:function(e,t,n){n.d(t,{g:function(){return a}});var i=n(22170),r=n(22680);const o=(0,i.pn)();!function(){const e=(0,r.l4)()?.match(/ems=([\d]+)/)?.[1];o.set(e&&parseInt(e)||5)}();const a=e=>Math.floor(101*Math.random())<=(e||o.get())},73987:function(e,t,n){function i(e,t){const n=t.replace(/[[\]]/g,"\\$&"),i=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(e);if(!i)return null;const r=i[2];return decodeURIComponent(r.replace(/\+/g," "))||""}n.d(t,{_:function(){return i}})},31802:function(e,t,n){n.d(t,{c:function(){return a}});var i=n(242),r=n(90695),o=n(11923);function a(e={}){const t={...(0,i.Ou)(),...(0,i.Y9)()},n=[],o={WW:{pid:0},Resolver:{pid:1},Ads:{pid:2},Telemetry:{pid:3},"Content Preview":{pid:4},Images:{pid:5},JS:{pid:6},Statics:{pid:7},Configs:{pid:8},Services:{pid:9},nextPID:{pid:20}},a=100;!function(e,t,n){const i=[{name:"Ads",regex:/(\/srtb\.|taboola|outbrain)/i},{name:"Telemetry",regex:/(otf\.|\/c\.gif)/i},{name:"Content Preview",regex:/\/content\/view\/v[0-9]\/Preview\//i},{name:"Images",regex:/(img-s-msn-com|\.svg)/i},{name:"JS",regex:/\.js/i},{name:"Statics",regex:/statics/i},{name:"Configs",regex:/\/config/i},{name:"Services",regex:/(\/service\/|api|\/getappanoncookie|content|microsoftonline)/i}];let r=performance.getEntriesByType("resource").filter((t=>{const{duration:n,startTime:i}=t;return g(e,i,i+n)}));i.forEach((e=>{p(e.name,n);const i=[];r.filter((t=>{const n=t.name.match(e.regex);return n||i.push(t),n})).forEach(((n,i)=>{const r=new URL(n.name),o=r.pathname.length>1?r.pathname:r.hostname;t.push({async:!0,timelineName:e.name,coreName:o,idSuffix:`-${i}`,from:n.startTime,to:n.startTime+n.duration})})),r=i}))}(e,n,o),function(e,t,n,i){n.forEach((n=>{const{async:r,timelineName:o}=n;r&&p(o,i),g(e,n.from,n.to)&&t.push(n)}))}(e,n,(0,r.iG)(),o),l(e,n,t,o,/^WW\./,"WW");const f={...window._appTimings||{}};l(e,n,f,o,/.*/);const m=[];m.push(c(e,"Global","NavStart",a,0,"g")),Object.keys(t).filter((n=>n.match(/TT/)&&g(e,t[n]))).sort(((e,n)=>t[e]-t[n])).forEach((n=>m.push(c(e,"Global",n,a,t[n],"g")))),Object.keys(t).filter((n=>n.match(/^WW\./i)&&g(e,t[n]))).sort(((e,n)=>t[e]-t[n])).forEach((n=>m.push(c(e,"WW",n,o.WW.pid,t[n],"p")))),m.push(s("process_name",a,{name:"Main"})),m.push(s("process_sort_index",a,{sort_index:a}));const{uploadTrace:y}=e;return u(e,n,!0).forEach(((t,n)=>{const{pid:i}=o[t.name];t.measures.forEach(((t,r)=>{const{timelineName:o,coreName:a,idSuffix:s,from:c,to:u,customData:l}=t,p=("000"+r).substr(-3,3),h=a+s,g=y?function(e){const t=e.lastIndexOf("/");return t>=0?e.substr(t+1):e}(h):h,f=`${p}-${g}`;m.push(...function(e,t,n,i,r,o,a,s,c,u){return[d(e,t,n,u?"B":"b",i,r,a,{id:o}),d(e,t,n,u?"E":"e",i,r,s,{id:o,args:JSON.stringify(c)})]}(e,o,f,i,n,r,c,u,l))})),m.push(s("process_name",i,{name:t.name})),m.push(s("process_sort_index",i,{sort_index:i})),m.push(s("thread_name",i,{name:t.name},n)),m.push(s("thread_sort_index",i,{sort_index:n},n))})),u(e,n,!1).forEach(((t,n)=>{t.measures.forEach((t=>{const{timelineName:i,coreName:r,idSuffix:o,from:a,to:s,customData:c}=t,u=r+o;m.push(function(e,t,n,i,r,o,a,s){const c=h(a-o);return d(e,t,n,"X",i,r,o,{dur:c,args:JSON.stringify(s)})}(e,i,u,100,n,a,s,c))})),m.push(s("thread_name",100,{name:t.name},n)),m.push(s("thread_sort_index",100,{sort_index:n},n))})),m}function s(e,t,n,i){const r={name:e,ph:"M",pid:t,args:n};return null!=i&&(r.tid=i),r}function c(e,t,n,i,r,o){return d(e,t,n,"i",i,null,r,{s:o})}function d(e,t,n,i,r,o=null,a,s){const c={cat:t,name:n,ph:i,pid:r,tid:o,ts:h(a),...s};return null!=o&&(c.tid=o),c}function u(e,t,n){const i=(0,o.Z)(t.filter((t=>!!t.async===n&&g(e,t.from,t.to))),(e=>e.timelineName)),r=[];let a=0;return Object.keys(i).forEach((e=>{const t=i[e].sort(((e,t)=>e.from-t.from));a=Math.max(a,t[t.length-1].to),r.push({name:e,measures:t})})),r.sort(((e,t)=>e.measures[0].from-t.measures[0].from))}function l(e,t,n,i,r,o){const a=/-?[Ss]tart$/,s={"-Start":"-End","-start":"-end",Start:"End",start:"end"},c=[];Object.keys(n).filter((e=>e.match(r))).forEach((r=>{const d=r.match(a);if(!d)return;let u=r.replace(a,"");const l=`${u}${s[d[0]]}`,p=d&&n[l];if(!p)return;c.push(r),c.push(l);let h=o;if(!h){const e=u.match(/(.+)\.(.+)/);if(!e)return;h=e[1],u=e[2]}const f=n[r];g(e,f,p)&&t.push({async:!!i[h],timelineName:h,coreName:u,idSuffix:"",from:f,to:p})}));for(const e of c)delete n[e]}function p(e,t){if(!t[e])return t[e]={pid:t.nextPID.pid++},!0}function h(e){return Math.round(1e3*e)}function g(e,t,n){return!e.uploadTrace||!e.maxTime||(!t||t<=e.maxTime)&&(!n||n<=e.maxTime)}},18538:function(e,t,n){n.d(t,{Y:function(){return i},c:function(){return o}});var i,r=n(42122);function o(e){try{const t=new URL(e).searchParams,n=t.get("expPerf"),r=t.get("expPerfSkip");if("all"==r)return{enablePerfTimeline:!1};if(!r&&!n)return{};const o={enablePerfTimeline:!0,uploadTrace:!1,sampleRate:1,uploadCriteria:{minimumTTVR:0}};if("all"===n)o.trackAllExp=!0,o.experiencesExcludedForPerf={};else if(n){const e=o.experiencesForPerf={};n.split(",").forEach((t=>e[t]=!0))}if(r){const e=o.experiencesExcludedForPerf={};r.split(",").forEach((t=>e[t]=!0))}"true"===t.get("expPerfMarks")&&(o.addPerformanceMarks=!0),"true"===t.get("expPerfTimings")&&(o.addPageTimings=!0);const a=parseInt(t.get("expPerfLevel"));return o.traceLevel=null!=i[a]?a:i.default,o}catch(e){return r.k.logError("Error parsing URL for detecting experience diagnostic switches: "+e),{}}}!function(e){e[e.default=0]="default",e[e.medium=1]="medium",e[e.high=2]="high"}(i||(i={}))},90695:function(e,t,n){n.d(t,{Xn:function(){return L},dj:function(){return I},iG:function(){return x},g7:function(){return A},MV:function(){return M},FH:function(){return E},Im:function(){return R}});var i=n(18538),r=n(43852),o=n(4620),a=n(22170),s=n(21215),c=n(5658),d=n(58420),u=n(242),l=n(73898);const p=(0,a.WG)((()=>new d.K));p.unset();const h="-start",g="-end";class f{constructor(e,t,n,i,r){var o;this.timelineName=e,this.instanceId=t,this.addPerfMarks=n,this.addPageTimings=i,this.async=r,this.measures=new v,this.timeRange=[1/0,-1/0],this.timelineName=(o=e,p.get().qualifyKey(o))}get timeSpan(){const[e,t]=this.timeRange;if(e!==1/0&&t!==-1/0)return[e,t-e]}startMeasure(e,t,n){const{async:i,startTime:r}=n||{},o=w(r);if(null==o)return{endMeasure:l.Z};const{timeRange:a}=this;o<a[0]&&(a[0]=o);const s=y(e,t),c=this.measures.add({coreName:s,from:o,async:null!=i?i:this.async,idSuffix:""},n);return{endMeasure:n=>{const{customSuffix:i,customData:r,endTime:s}=n||{},d=w(s);if(null==d||d<o)return;if(i&&t!==i){const t=y(e,i);this.measures.rename(c,t)}c.to=d,c.customData=r,d>a[1]&&(a[1]=d);!function(e,t,n,i){if(!n&&!i)return;const{from:r,to:o}=t;if(null!=r){const t=e+h,a=(0,u.Ou)();if(n&&(a[t]=r),i&&performance.mark(t,{startTime:r}),null!=o&&(n&&(a[e]=o-r),i)){const n=e+g;performance.mark(n,{startTime:o}),performance.measure(e,t,n)}}}(S(this.timelineName,c),c,this.addPageTimings,this.addPerfMarks)}}}rename(e){if(this.timelineName!==e){if(this.addPageTimings){const t=this.timelineName,n=(0,u.Ou)();this.measures.get().forEach((i=>{const r=S(t,i);delete n[r+h],delete n[r];const o=S(e,i);n[o+h]=i.from,n[o]=i.to-i.from}))}this.timelineName=e}}getPageMeasures(){return this.measures.get().map((e=>({...e,timelineName:this.timelineName})))}getMeasureValues(e){return this.measures.get(e)}instrumentFunc(e,t,n){return(...i)=>{const r=this.startMeasure(e).endMeasure;try{const e=t.apply(n,i);return e instanceof Promise?m(e,r):r(),e}catch(e){r({customSuffix:"error"})}}}instrumentPromise(e,t,n){const i=this.startMeasure(e,null,n).endMeasure;return m(t(),i)}}function m(e,t){return e.then((()=>t())).catch((()=>t({customSuffix:"error"}))),e}function y(e,t){return t?`${e}-${t}`:e}class v{constructor(){this.list=[],this.entList=[],this.map=new Map}add(e,t){return t&&t.entityMeasure?this.entList.push(e):this.list.push(e),this.addToMap(e)}addToMap(e){const t=e.coreName;let n=this.map.get(t);return!n&&this.map.set(t,n=[]),e.idSuffix=(0,d.p)(n.length),n.push(e),e}get(e){const{coreName:t,entityMeasures:n}=e||{};let i;return i=t?this.map.get(t)||[]:n?this.entList:!1===n?this.list:[...this.list,...this.entList],i}rename(e,t){const n=e.coreName;if(n==t)return;const i=this.map.get(n),r=i.indexOf(e);if(r>=0){i.splice(r,1);for(let e=r,t=i.length;e<t;e++)i[e].idSuffix=(0,d.p)(e);e.coreName=t,this.addToMap(e)}}}function S(e,t){return`${e}-${t.coreName}${t.idSuffix}`}function w(e){return null==e?(0,u.UE)():"number"==typeof e&&e>=0?e:void 0}var b=n(42122),C=n(37039),T=n(89799);const k=(0,a.pn)(),P=(0,a.WG)((()=>({})));function A(e,t){(0,r.S4)(t),function(e){Object.assign(P.get(),k.set((0,i.c)(e)))}(e)}function I(){return P.get()}function E(e){const t=P.get();t.enablePerfTimeline=e,t.trackAllExp=e,t.enableEntityMetricsTimeline=e,t.traceLevel=i.Y.default,!(0,s.N)()&&(0,T.xb)(e)}const R=(e,t,n)=>function(e){const t=P.get();if(!t.enablePerfTimeline)return!1;const{experiencesForPerf:n}=t;if(n&&n[e])return!0;const{experiencesExcludedForPerf:i}=t;if(i&&i[e])return!1;return t.trackAllExp}(e)?function(e,t,n){const i=D(e,t),o=C.j.get(),a=P.get();return o[i]||(o[i]=(0,r.uk)(f,e,t,a.addPerformanceMarks,a.addPageTimings,n))}(e,t,n):void 0;function M(e,t){const n=F(e),i=C.j.get();if(i[n]!==e)return void b.k.logError(`Attempted to rename a perf timeline object with mismatching instance key ${n}`);e.rename(t),delete i[n];i[F(e)]=e}function x(){const e=[],t=C.j.get();return Object.keys(t).forEach((n=>e.push(...t[n].getPageMeasures()))),e}function L(e){P.get().enableEntityMetricsTimeline&&(0,c.Yt)(e)}function F(e){const{timelineName:t,instanceId:n}=e;return D(t,n)}function D(e,t){return`${e}-${t||"0"}`}(0,s.N)()&&(window._getEntityMetricsCollection=e=>(0,c.HK)(Object.values(C.j.get()),(0,o.At)(e)))},58420:function(e,t,n){n.d(t,{K:function(){return i},p:function(){return r}});class i{constructor(){this.counts={}}qualifyKey(e){e||="NA";return e+this.qualifySuffix(e)}qualifySuffix(e){return r(this.addCount(e)-1)}reset(){this.counts={}}addCount(e){return this.counts[e]=(this.counts[e]||0)+1}}function r(e){return e<=0?"":"-"+(e+1)}},64527:function(e,t,n){n.d(t,{Am:function(){return m},F$:function(){return f},H7:function(){return c},Oq:function(){return d},bM:function(){return s},bg:function(){return o},dw:function(){return l},iA:function(){return p},os:function(){return y},zV:function(){return u}});var i=n(21215);const r=["vendors","microsoft","common","common-daily","common-alternate-daily","common-biweekly","common-monthly","experience","widget-initializer"];function o(e){if(e&&performance.getEntriesByType){const t=S();for(const n of r){const i=v(n,t);i&&h(e,i,n+"JS")}}}const a="resolver/api/resolve";function s(e){if(e&&performance.getEntriesByType){const t=performance.getEntries().find((e=>e.name.indexOf(a)>0));t&&h(e,t,"CrsConfig")}}function c(e){if(e&&performance.getEntriesByType){const t=S();for(const n of r){const i=v(n,t);i&&g(e,i,n+"JS")}}}function d(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("navigation");if(t&&t.length){const n=t[0];n&&(h(e,n,"html"),window.ssrPageGenTime&&(e.htmlCacheAge=Math.round((Date.now()-window.ssrPageGenTime.valueOf())/6e4)))}}}function u(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("resource");if(t&&t.length){const n=t.find((e=>e.name.indexOf("/Feed/me")>=0||e.name.indexOf("/feed/pages/startmhp")>=0));n&&h(e,n,"feed")}}}function l(e){if(!(0,i.N)()||!e)return;const t=navigator;if(t.connection){const n=t.connection;"rtt"in n&&(e.rtt=n.rtt),"downlink"in n&&(e.downlink=n.downlink),"effectiveType"in n&&(e.effectiveType=n.effectiveType)}"hardwareConcurrency"in navigator&&(e.hardwareConcurrency=navigator.hardwareConcurrency)}function p(e){e&&(e.isIDBSupported=window.indexedDB?1:0,e.isSWSupported=window.navigator.serviceWorker?1:0,e.isWWPresent=window._isWebWorkerPresent?1:0)}function h(e,t,n){const i=f(t);null!=i&&(e[n+"Cached"]=i?1:0)}function g(e,t,n){const{startTime:i,fetchStart:r,requestStart:o,responseStart:a,responseEnd:s,duration:c}=t;e[n+"ResponseTime"]=Math.round(s-a),e[n+"ResponseStart"]=Math.round(a),e[n+"ResponseEnd"]=Math.round(s),e[n+"StartTime"]=Math.round(i),e[n+"FetchStart"]=Math.round(r),e[n+"RequestStart"]=Math.round(o),e[n+"Duration"]=Math.round(c)}function f(e){return void 0!==e.transferSize?!(0!==e.transferSize&&300!==e.transferSize):void 0!==e.nextHopProtocol?!(""!==e.nextHopProtocol):void 0}function m(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("navigation");if(t.length){const n=t[0],i="useragent_launch";"type"in n&&(e.isBrowserLaunch=n.type===i?1:0)}}}function y(){return performance.getEntriesByType("navigation")[0]}function v(e,t){const n=t.filter((t=>t.name.indexOf(`/${e}.`)>-1));return n[n.length-1]}function S(){const e=["script","other"];return performance.getEntriesByType("resource").filter((t=>e.includes(t.initiatorType)))}},242:function(e,t,n){n.d(t,{A1:function(){return g},EN:function(){return a},O8:function(){return p},Ou:function(){return d},Th:function(){return f},UE:function(){return h},WP:function(){return l},Y9:function(){return u},fT:function(){return c},pU:function(){return s},zp:function(){return m}});var i=n(21215),r=n(52185);const o="ssrTimeOrigin",a="ssrTimeEnd",s="SSR.InfopaneRendered",c="ssrTimeServerEntry";function d(){return(0,i.N)()?window._pageTimings||(window._pageTimings={}):r.Gq.get("__diagnostics_pageTimings",(()=>({})))}function u(){return(0,i.N)()?window._secondaryPageTimings||(window._secondaryPageTimings={}):r.Gq.get("__diagnostics_secondaryPageTimings",(()=>({})))}function l(){return(0,i.N)()?window._webVitalsPageTimings||(window._webVitalsPageTimings={}):r.Gq.get("__diagnostics_webVitalsPageTimings",(()=>({})))}function p(e,t=!0){const n=d();if(!e||!n||t&&n.TTVR)return;const i=n[e]||(n[e]=0);n[e]=i+1}function h(){return(0,i.N)()?performance.now():performance.now()-d()[o]}function g(){if((0,i.N)()&&navigator)return{memory:navigator.deviceMemory,cpu:navigator.hardwareConcurrency,networkSpeed:navigator.connection&&navigator.connection.effectiveType}}function f(){if(!(0,i.N)())return;const e=(performance.getEntriesByType("navigation")||[])[0],t={};for(const n in e){const i=e[n];t[n]="number"==typeof i?Math.round(i):i}return t}function m(e="navigate"){if(!(0,i.N)())return!1;const t=performance.getEntriesByType("navigation");return t&&t[0]&&t[0].type===e}},79403:function(e,t,n){n.d(t,{FF:function(){return a},hf:function(){return s},v0:function(){return c}});var i=n(242),r=n(86117),o=n(90631);function a(e,t){const n=performance.now(),i=t&&t.firstTimeOnly;t&&t.logStart&&s(`${e}-start`,n,i);const r=t&&t.perfTimeline,o=r&&r.startMeasure(e).endMeasure;return function(){const r=performance.now();t&&t.logEnd&&s(`${e}-end`,r,i),t&&!t.logDuration||s(e,r-n,i),o&&o()}}function s(e,t=performance.now(),n){const r=(0,i.Ou)();return n&&void 0!==r[e]?r[e]:(r[e]=Math.round(10*t)/10,t)}function c(e,t=performance.now()){const n=e&&(0,r.TZ)(o.DB)||0;return t+(n>0?-n:0)}},64107:function(e,t,n){n.d(t,{A:function(){return a}});var i=n(42122);const r="-start";class o{constructor(){this.endMarkSuffix="-end","undefined"!=typeof window&&this.initialize(window.performance)}static getInstance(){return o.instance||(o.instance=new o),o.instance}initialize(e){this.performance=e}startMark(e){this.singleMark(e+r)}endMark(e){this.singleMark(e+this.endMarkSuffix),this.measureStartEnd(e)}singleMark(e){const t=this.performance;t&&t.mark&&(t.mark(e),i.k.log(`[PerfMarker] ${e}`))}clearMark(e){const t=this.performance;t&&t.clearMarks&&t.clearMarks(e)}clearMeasures(e){const t=this.performance;t&&t.clearMeasures&&t.clearMeasures(e)}async measurePromise(e,t){this.startMark(e);const n=await t();return this.endMark(e),n}measurePerfMarker(e){if(!this.performance)return;const t={},n=this.performance.getEntriesByType("mark");if(!n)return t;for(let i=0;i<n.length;i++){let r=n[i].name;if(!r||null==n[i].startTime)continue;if(r=r.replace(/-(end|start)$/i,""),!r.startsWith(e))continue;const o=t[r]||new s(r);o.processPerfEntry(n[i]),o.isValid&&(t[r]=o)}return t}measureStartEnd(e){const t=this.performance;if(t&&t.measure)try{t.measure(e,e+r,e+this.endMarkSuffix)}catch(t){i.k.logError(`Error while attempting to measure start/end of '${e}'. Error: ${t}`)}}}const a=o.getInstance();class s{constructor(e){this.duration=0,this.markerName=e}get isValid(){return null!=this.startTime}processPerfEntry(e){e.name.endsWith(r)?(this.firstStartTime||(this.firstStartTime=e.startTime),this.startTime=e.startTime):null!=this.startTime&&(this.duration+=e.startTime-this.startTime,this.startTime=null)}}},90631:function(e,t,n){n.d(t,{DB:function(){return c},Fz:function(){return f},Hm:function(){return g},IP:function(){return p},MV:function(){return o},O6:function(){return d},OM:function(){return u},P9:function(){return S},T8:function(){return i},U4:function(){return r},Wk:function(){return v},fR:function(){return h},iL:function(){return m},kc:function(){return s},pJ:function(){return l},qh:function(){return a},w:function(){return y},zJ:function(){return w}});const i="E2E",r="TTPV",o="TTVR",a="TTVS",s="htmlCached",c="pageRevealStart",d="pageRevealComplete",u="getTabTimingsTime",l="protocolLaunchStart",p="FromProtocolLaunchStart",h="userAgentStart",g="FromUserAgentStart",f="PCSToJSStart",m="JSStartToOnLoad",y="TTJSStart",v="timeToOnLoad",S="timeToFirstByte",w="FCP_Old"},86117:function(e,t,n){n.d(t,{BW:function(){return j},EV:function(){return Y},FU:function(){return V},Gb:function(){return q},IJ:function(){return X},IO:function(){return ne},Nv:function(){return ae},O0:function(){return Ce},OB:function(){return le},OZ:function(){return Te},O_:function(){return Z},S_:function(){return de},Sc:function(){return me},TZ:function(){return be},Xl:function(){return ie},YJ:function(){return oe},_E:function(){return ue},a8:function(){return F},aR:function(){return Ae},b1:function(){return ce},bO:function(){return ge},bP:function(){return pe},cd:function(){return Q},e3:function(){return se},gh:function(){return he},hy:function(){return Ie},l6:function(){return ke},mb:function(){return K},nz:function(){return _},oN:function(){return i},o_:function(){return z},pT:function(){return Ee},su:function(){return ee},sx:function(){return Me},tW:function(){return re},v9:function(){return Pe},wS:function(){return Re}});var i,r=n(90631),o=n(21215),a=n(72465),s=n(242),c=n(64107),d=n(43225),u=n(34960);let l,p,h,g,f,m,y;!function(e){e.Primary="primary",e.Secondary="secondary"}(i||(i={}));const v=new Map,S=new Map,w=new Map;let b,C,T,k,P,A,I,E,R=new Map,M=new Map,x=[];const L="TTF.",F="TTVR.",D="TTVS.",O="TTPR.",_="TTSR.";let N="",B=!1,U=!1,$="",H=!1;const W={};let G;function V(){G=!1}function q(){return W}function j(e="",t=!1,n){(0,o.N)()&&(n=n||performance.now(),te(L,e,t,H?(0,u.F)(n):n))}function z(e="",t=!1,n,i=!0){if((0,o.N)()){if(n=n||performance.now(),i&&H&&n>0){const i=(0,u.F)(n);return te(F,e,t,i),J(e),i}return te(F,e,t,n),J(e),n}}function K(e){x.push(e)}function Q(e){x=x.filter((t=>t!==e))}function J(e){if(x.length)try{x.map((t=>t(e)))}catch(e){}}function X(e="",t=!1,n){(0,d.c)((()=>z(e,t,n)))}function Y(e=""){const t=be(r.DB),n=-1===t?-1:performance.now()-t;te(O,e,!1,n)}function Z(e,t,n){ee(e,n-t)&&(0,a.QP)({name:e,startTime:t,endTime:n})}function ee(e,t){if(M.get(e))return!1;const n=performance.getEntriesByName&&performance.getEntriesByName(e);let i;return Boolean(n&&n.length)?M.has(e)||(M.set(e,Math.round(n[0].startTime)),i=!0):(c.A.singleMark(e),M.set(e,isNaN(t)?-1:Math.round(t)),i=!0),p&&p.delete(e)&&0===p.size&&A&&A(he()),i}function te(e,t,n,i){if(!t||!t.length)return;if(!e||!e.length)return;const o=e+t;if(o.startsWith(F)&&(!f||!f.has(o))&&m&&m.has(o))return void ee(o,n?-1:i);if(w.has(o)&&w.get(o)(o),R.get(o))return;const a=performance.getEntriesByName&&performance.getEntriesByName(o);Boolean(a&&a.length)?R.set(o,Math.round(a[0].startTime)):(c.A.singleMark(o),n?R.set(o,-1):R.set(o,Math.round(i))),o.startsWith(F)&&(W.marker=o,W.value=R.get(o)),h&&h.delete(o)&&0===h.size&&C&&C(ve()),l&&l.delete(o)&&0===l.size&&k&&k(le()),e===D&&(ee("TTVS",n?-1:i),E&&E(Se(D,r.qh)))}function ne(e){l=fe(e),h=fe(e,"TTVR"),g=fe(e,"TTPR"),f=new Set(we(e,"TTVR")),C&&0===h.size&&k(ve()),k&&0===l.size&&k(le()),B=!0}function ie(e){p||(p=new Set,m=new Set,e.forEach((e=>{M.get(e)||p.add(e),e.startsWith(F)&&m.add(e)})),0===p.size&&A&&A(he()))}function re(e){y||(y=e)}function oe(e){e&&B&&l&&h&&(e.startsWith(F)||(e=F+e),R.has(e)||(l.add(e),h.add(e)),f.add(e))}function ae(){return(0,o.N)()?function(){if(!(0,o.N)())return null;if(T)return T;if(l&&0===l.size)return Promise.resolve(le());return T=new Promise((e=>{k=e})),T}():null}function se(){return(0,o.N)()?P||(p&&0!==p.size?(P=new Promise((e=>{A=e})),P):Promise.resolve(he())):null}function ce(){return(0,o.N)()?b||(h&&0===h.size?Promise.resolve(ve()):(b=new Promise((e=>{C=e})),b)):Promise.resolve([])}function de(){return(0,o.N)()?I||(I=new Promise((e=>{E=e})),I):null}function ue(e){return(ve().find((t=>t[0]===e))||[])[1]}function le(){return[...ve(),...ye()]}function pe(){return[...ve(!1),...ye()]}function he(){return[...M]}function ge(e){return e===i.Primary?Array.from(l||[]):Array.from(p||[])}function fe(e,t){const n=new Set;for(const i of we(e,t))R.get(i)||n.add(i);return n}function me(e){return R.get(O+e)}function ye(){return Se(L)}function ve(e=!0){return e&&!1!==G?Se(F,r.MV,!0):Se(F)}function Se(e,t,n){const i=[];let o=0;if(R.forEach(((t,n)=>{if(n.startsWith(e)){i.push([n,t]);const e=n.startsWith("TTVR");t>o&&(!e||f?.has?.(n))&&(o=t,e&&(N=n));const r=v.get(n);r?.name&&(S.get(r.name)<t&&S.set(r.name,t),r.preserve||i.pop())}})),S.forEach(((t,n)=>{n.startsWith(e)&&i.push([n,t])})),t&&i.push([t,o]),n&&t===r.MV){const e=(0,s.Ou)().refreshDelay||0;i.push(["TTVR.WithRefreshDelay",o+e])}return i}function we(e,t){let n=[],i=[],r=[];return!e||!e.TTVR||t&&"TTVR"!==t||(n=e.TTVR.map((e=>F+e))),!e||!e.TTF||t&&"TTF"!==t||(r=e.TTF.map((e=>L+e))),e&&e.TTPR&&"TTPR"===t&&(i=e.TTPR.map((e=>O+e))),[...n,...r,...i]}function be(e){const t=performance.getEntriesByName(e);return t&&t[0]&&t[0].startTime?t[0].startTime:-1}function Ce(e){const t=M.get(e);return null!=t?t:-1}function Te(){return y}function ke(e="",t=!1,n,i){let r=e;r.startsWith(F)||(r=F+e),B&&(f.has(r)||U)&&""!==e?z(e,t,n,i):J(e)}function Pe(e="",t=!1,n){let i=e;i.startsWith(F)||(i=F+e),B&&(f.has(i)||U)&&""!==e?X(e,t,n):J(e)}function Ae(e="",t="",n=!1,i){let r=e,o=t;B&&""!==e&&""!==t&&(U||t!==$)&&(r.startsWith(F)||(r=F+e),o.startsWith(F)||(o=F+t),l.has(r)||R.has(r)||f.has(r)||(oe(r),v.set(r,{name:o,preserve:n}),S.set(o,-1),i&&w.set(r,i)))}function Ie(e=!1,t=""){U=e,$=t}function Ee(e){H=e}function Re(){return H}function Me(){return N}},43852:function(e,t,n){function i(e,t,n,i=!1,r=!1,o){return new e(t,n,i,r,o)}n.d(t,{S4:function(){return o},fW:function(){return s},oA:function(){return a},uk:function(){return i}});const r=(0,n(22170).U1)();function o(e){r.set(e)}const a=(e,t,n)=>r.call(e,t,n);function s(e,t,n){return n?n.instrumentPromise(t,e):e()}},37039:function(e,t,n){n.d(t,{j:function(){return i}});const i=(0,n(22170).WG)((()=>({})))},43225:function(e,t,n){n.d(t,{c:function(){return r},u:function(){return o}});var i=n(21215);function r(e,t=0){(0,i.N)()&&window.requestAnimationFrame((()=>window.setTimeout((()=>e()),t)))}async function o(){return new Promise((e=>r(e)))}},22556:function(e,t,n){n.d(t,{Ct:function(){return a},Z0:function(){return s},fL:function(){return o},xC:function(){return c}});var i=n(90631),r=n(72465);function o(e){if(performance.getEntriesByType){const t=performance.getEntriesByType("paint").filter((e=>"first-contentful-paint"===e.name));t.length>0&&(e[i.zJ]=Math.round(t[0].startTime))}}function a(e){if(performance&&performance.getEntriesByType&&e&&e[i.MV]){const t=performance.getEntriesByType("navigation");if(t.length){const n=t[0];let r=0,o=0;i.pJ in n&&i.fR in n&&(r=n[i.pJ],o=n[i.fR]),r<0&&o<0&&(e["TTVR."+i.IP]=Math.round(e[i.MV]-r),e["TTVR."+i.Hm]=Math.round(e[i.MV]-o))}}}const s=e=>{let t=-1;const n=e[i.w],o=e[i.P9];n&&o&&(t=n-o),e[i.Fz]=t,(0,r.QP)({name:i.Fz,startTime:o,endTime:n})},c=e=>{let t=-1;const n=e[i.w],o=e[i.Wk];o&&n&&(t=o-n),e[i.iL]=t,(0,r.QP)({name:i.iL,startTime:n,endTime:o})}},34960:function(e,t,n){function i(e){const t=performance.getEntriesByType("visibility-state").filter((t=>t.startTime<e));if(0===t.length)return e;let n=0;for(let i=0;i<t.length;i++){const r=t[i];"visible"===r.name&&(n+=(t[i+1]?.startTime??e)-r.startTime)}return n}n.d(t,{F:function(){return i}})},33117:function(e,t,n){n.d(t,{Dd:function(){return g},d0:function(){return f},n1:function(){return h}});var i=n(43852),r=n(22170),o=n(21215),a=n(43225),s=n(18538),c=n(90695),d=n(242),u=n(8114);const l=(0,r.WG)((()=>({}))),p=new WeakMap;function h(){if(!(0,o.N)())return;const{enablePerfTimeline:e,traceLevel:t}=(0,c.dj)();if(!e||"undefined"==typeof customElements||t<s.Y.high)return;const n=customElements.define;customElements.define=function(...e){const[t,i]=e,r="connectedCallback",o=i.prototype[r];return"function"!=typeof o||"getExperienceType"in i.prototype||(i.prototype[r]=function(...e){const t=g(this.localName,this.instanceId),n=t&&t.startMeasure("init").endMeasure,i=o.apply(this,e);return n&&n(),f(this,t),(0,d.O8)("WC.Count"),i}),n.apply(customElements,e)}}function g(e,t){const n=l.get(),r=1===(n[e]=(n[e]||0)+1)?t:(0,u.Z)(t);return(0,i.oA)(e,r)}function f(e,t,n=a.u){if(!e||!e.shadowRoot||!t)return;const i=new m("update",t);i.tryStartMeasure(),n().then((()=>i.tryEndMeasure()));const{traceLevel:r}=(0,c.dj)();r&&function(e,t,n){let i=p.get(e);if(i)return;let r=0;i=new MutationObserver((e=>{t.tryStartMeasure();const i=e.reduce(((e,t)=>(t.addedNodes.forEach((t=>e.added.push(t.nodeName))),t.removedNodes.forEach((t=>e.removed.push(t.nodeName))),t.attributeName&&e.attrs.push(t.attributeName),e)),{added:[],removed:[],attrs:[]}),o={added:i.added.length?i.added.join(","):void 0,removed:i.removed.length?i.removed.join(","):void 0,attrs:i.attrs.length?i.attrs.join(","):void 0};t.addCustomData("mutation"+ ++r,o),n().then((()=>t.tryEndMeasure()))})),i.observe(e.shadowRoot,{childList:!0,subtree:!0,attributes:!0}),i.observe(e,{attributes:!0}),p.set(e,i)}(e,i,n||v)}class m{constructor(e,t){this.measureName=e,this.perfTimeline=t,this.customData={}}tryStartMeasure(){if(!this.coreEndMeasure){const e=this.perfTimeline.startMeasure(this.measureName).endMeasure;this.coreEndMeasure=()=>e({customData:this.customData})}}addCustomData(e,t){this.customData[e]=t}tryEndMeasure(){this.coreEndMeasure&&(this.coreEndMeasure(),this.customData={},this.coreEndMeasure=null)}}let y;function v(){return y||(y=new Promise((e=>(0,a.c)((()=>{y=null,e()})))))}},10530:function(e,t,n){n.d(t,{m:function(){return a}});var i=n(72465),r=n(242),o=n(7677);function a(e){const t=e||performance.now();return{end:e=>{const n=performance.now(),a="ClientInit";try{if(!e){(0,r.Ou)()[a]=Math.round(n-t)}(0,i.QP)({name:a,startTime:t,endTime:n,customSuffix:e?"error":void 0})}catch(e){console.error("ClientInit span error: "+(0,o.n)(e))}}}}},72465:function(e,t,n){n.d(t,{DY:function(){return d},Ep:function(){return h},QP:function(){return u},ee:function(){return l},el:function(){return f},m8:function(){return g},zI:function(){return p}});var i=n(4620),r=n(22170),o=n(242);const a=(0,r.pn)(),s=(0,r.pn)(),c=(0,r.pn)();function d(e){s.set([]),c.set([]),a.set(e)}function u(e){a.get()?.startMeasure(e.name,void 0,{entityMeasure:!0,startTime:m(e.startTime,-1)}).endMeasure({endTime:m(e.endTime,-1)})}function l(e){const t=a.get();return t?(0,i.fJ)(t.getMeasureValues({entityMeasures:!0}),e,"from",!1):[]}function p(e){let t;const n=s.get();n&&null!=(t=y(e.duration))&&n.push({time:(0,o.UE)(),name:e.name,duration:t})}function h(e){let t;const n=c.get();n&&null!=(t=y(e.time))&&n.push({name:e.name,time:t})}function g(e){const t=s.get();return t?(0,i.fJ)(t,e,"time",!0):[]}function f(e){const t=c.get();return t?(0,i.fJ)(t,e,"time",!1):[]}function m(e,t){return null!=e?e:t}function y(e){if("number"==typeof e&&e>=0)return e}},82193:function(e,t,n){n.d(t,{j:function(){return s},o:function(){return a}});var i=n(72465),r=n(242),o=n(90631);function a(e){const t=(0,r.Ou)();for(const[n,i]of e)for(const e of i){const i=t[e];if(null!=i){t[n]=i;break}}}function s(){const e=`${o.MV}.BasicFeed`;a([[e,["TTVR.River","TTVR.GridViewFeed","TTVR.StripeFeed","TTVR.WaterfallViewFeed"]]]);const t=(e,t,r)=>{const o=r&&t?r-t:-1;n[e]=o,(0,i.QP)({name:e,startTime:t,endTime:r})},n=(0,r.Ou)(),s=n[e],c=n[`${o.MV}.SearchBox`],d=n[`${o.MV}.SDCards`],u=n.WpoResponseBack;t("SearchBoxToFeed",c,s),t("FeedSDRender",s,d),t("FeedBasicRender",u,s)}},5658:function(e,t,n){n.d(t,{TG:function(){return le},Yt:function(){return he},HK:function(){return pe}});var i=n(4620),r=n(44132),o=n(21492),a=n(22170),s=n(5302);const c=Object.freeze({experience:"e",page:"p",other:"o",script:"js",service:"s",container:"c",custom:"x"});var d;!function(e){e[e.keepPrevious=1]="keepPrevious",e[e.keepThis=2]="keepThis",e[e.keepAll=3]="keepAll"}(d||(d={}));var u=n(89799),l=n(22680),p=n(21215),h=n(72465),g=n(242),f=n(90631),m=n(58420),y=n(64527),v=n(42122);const S=new Map([["min",e=>e.length?e.reduce(((e,t)=>Math.min(e,t)),1/0):void 0],["max",e=>e.length?e.reduce(((e,t)=>Math.max(e,t)),-1/0):void 0],["first",e=>{for(const t of e)if(null!=t)return t}]]),w={clientrtt:"tcp",origin:"origin",cdntime:"self"},b=/\/\/([^/]+)\/([^?&#]+)/,C=/^assets\.msn\.(com|cn)/i,T=/^(ent-)?api\.msn\.(com|cn)/i,k="service",P="[cdn]/",A="[1s]/",I="[self]/",E=`${I}[root]`,R="[1s-cdn]/",M=(0,a.pn)();function x(e,t,n,r){const o=(0,g.UE)(),a=function(e){const t=new Map,n=e=>function(e,t){const{name:n}=t;let i=e.get(n);i||e.set(n,i=[]);i.push(t)}(t,e);performance.getEntriesByType("navigation").forEach((e=>{n(function(e,t){return{name:e.name,startTime:e.startTime,requestStart:e.requestStart,responseEnd:e.responseEnd,transferSize:e.transferSize,duration:e.duration,serverTiming:e.serverTiming,initiatorType:e.initiatorType,nextHopProtocol:e.nextHopProtocol,...t}}(e,{name:E}))}));const r=(0,i.fJ)(performance.getEntriesByType("resource"),e,"startTime",!0);return r.forEach(n),t}(r),s={networkCounter:new m.K,networkMap:a,filterContext:r},d=function(e,t){const n={name:"experiences",data:{type:c.container}};return e&&e.forEach((e=>{const i=function(e,t){const{filterContext:n,networkMap:i}=t,r=j(e,["min",[["first","scripts","from"],["first","config","from"]]]),o=r?j(e,["max",[["first","scripts","to"],["first","config","to"]]]):void 0,a=r&&o?$(r,o,void 0,n):void 0;let s=z(e,["first","render","to"]);K(s)||(s=z(e,["first","update","to"]),s&&v.k.log(`${e.timelineName} is missing 'render' mark`));const d=s&&j(e,["min",[["first","render","from"],["first","update","from"]]]),l=d?$(d,s,void 0,n):void 0;if(!a&&!l)return;const p={name:e.timelineName,data:{type:c.experience}};U(p,"init",a),U(p,"render",l),a&&l&&U(p,"_self",$(r,s,void 0,n));const h=e.getMeasureValues({coreName:u.JS});h.forEach((e=>{const n=e.customData,r=function(e,t,n){const i=e&&t.get(e);if(!i)return;const r=N(i,(e=>Math.abs(e.startTime-n.from)));if(r>=0){const n=i.splice(r,1)[0];return i.length||t.delete(e),n}}(n&&n.url,i,e);D(F(e)||u.JS,c.service,p,r,e,t)}));const g=e.getMeasureValues({entityMeasures:!0});if(g.length){const e=B(p,{name:"custom",data:{type:c.custom}});g.forEach((t=>{O(e,t,n)}))}return p}(e,t);i&&B(n,i)})),n}(t,s),l=function(e){const t={name:"scripts",data:{type:c.container}},n={name:"services",data:{type:c.container}},i={name:"other",data:{type:c.container}};return(0,p.N)()?function(e,t,n,i){const{networkMap:r}=e;r.forEach((o=>{o.forEach((o=>{const{initiatorType:a,name:s}=o;if("img"===a)return;let d,l,p,h;const g=L(s);if(g&&g.endsWith(".js")){l=g.replace(/(\.[0-9a-f]{20})?\.js$/,"").replace(/bundles\/v1\/\w+\/[\w.]+\//,""),d=t,p=c.script}else if("css"===a||"iframe"===a||"other"===a||"beacon"===a)d=i,p=c.other;else{d=n,p=c.service;const e=(0,u.o4)()?.getMeasureValues({coreName:s});if(e&&e.length){const{startTime:t}=o;h=e[N(e,(({from:e})=>Math.abs(e-t)))],l=F(h)}}let f=l||g;f&&(f=f.toLowerCase(),D(f,p,d,o,h,e),r.delete(s))}))}))}(e,t,n,i):function(e,t,n){const i=(0,u.o4)()?.getMeasureValues({entityMeasures:!1});i&&i.forEach((i=>{const{coreName:r,from:o,to:a}=i,s=L(r)?.toLowerCase();if(!s)return;let d,u;r.endsWith(".js")?(d=t,u=c.script):(d=n,u=c.service);D(s,u,d,{startTime:o,duration:a-o},void 0,e)}))}(e,t,n),[t,n,i]}(s),y=function(e){const t={name:"custom",data:{type:c.custom}};(0,h.ee)(e).forEach((n=>O(t,n,e))),(0,h.m8)(e).forEach((({name:e,duration:n})=>function(e,t,n){H(e,t,n)}(t,e,n))),(0,h.el)(e).forEach((({name:n,time:i})=>W(t,n,i,e)));const n=e===i.d9;if(n){const n=(0,g.Ou)();_(t,f.P9,e,n,f.P9,g.fT),_(t,f.MV,e,n,f.MV,g.EN)}else W(t,f.MV,e.timeFilter.end,e);return t}(r),S={name:"",data:{type:c.container}};U(S,"calc",$(o,(0,g.UE)(),void 0,i.d9));const w={metrics:S.data,...e||{}},b={_meta:w};let C=!1;if([y,d,...l].forEach((e=>{const{data:t}=e;(t.children||t.spans||t.durations||t.scalars||t.instants)&&(b[e.name]=t,C=!0)})),C)return n&&n.length&&(w.pivots=n.map((e=>e.key)),w.pivots64=n.map((e=>e.key64))),b}function L(e){if(e){const t=e.match(b);if(t){let[,e,n]=t;return n=n.toLowerCase(),e.match(C)?n=(n.startsWith(k)?R:P)+n:e.match(T)?n=A+n:e===M.get()&&(n=I+n),n}return e.toLowerCase()}}function F(e){const t=e&&e.customData;if(t){const{requestName:e,url:n,mappedUrl:i}=t;return e||L(i||n)}}function D(e,t,n,i,r,o){const{networkCounter:a,filterContext:s}=o,c=a.qualifyKey(e),d={name:c,data:{type:t}},u=function(e,t){if(!t)return;const{startTime:n,requestStart:i,responseEnd:r,transferSize:o,duration:a,serverTiming:s}=t,c=!!i,d={name:e,hasFullTimings:c,networkDur:a,networkStart:n};if(c){d.connectDur=i-n,d.requestDur=r-i;const e=(0,y.F$)(t);null!=e&&(d.cached=e?1:0,e||(d.transferSize=o))}if(!d.cached&&(e.startsWith(P)||e.startsWith(R))&&s&&s.length){const e=d.cdn={};s.forEach((({name:t,duration:n})=>{const i=w[t];i&&(e[i]=n)}))}return d}(c,i);if(u){const{cdn:e,networkStart:t,networkDur:n}=u;U(d,"network",$(t,void 0,n,s))&&(u.hasFullTimings&&(H(d,"connect",u.connectDur),H(d,"request",u.requestDur),G(d,"size",u.transferSize),G(d,"cache",u.cached)),e&&(H(d,"cdnTCP",e.tcp),H(d,"cdnSelf",e.self),H(d,"cdnOrigin",e.origin)))}if(r&&U(d,"app",$(r.from,r.to,void 0,s))){const e=r.customData,{perfCritical:t,error:n}=e||{};t&&G(d,"critical",1),n&&G(d,"error",1)}d.data.spans&&B(n,d)}function O(e,t,n){const i=$(t.from,t.to,void 0,n);if(i){U(e,t.coreName+t.idSuffix,i)}}function _(e,t,n,i,r,o){W(e,t,i[(0,p.N)()?r:o],n)}function N(e,t){const n=e&&e.length||0;if(n<=1)return n-1;let i=1/0,r=0;return e.length>1&&e.forEach(((e,n)=>{const o=t(e);o<i&&(i=o,r=n)})),r}function B(e,t){return q(e,"children",t.name,t.data),t}function U(e,t,n){return n?q(e,"spans",t,n):void 0}function $(e,t,n,{spanMapperFn:i}){return i(e,t,n)}function H(e,t,n){return V(e,t,n,"durations")}function W(e,t,n,{timeFilterFn:i,timeMapperFn:r}){if(i(n))return V(e,t,r(n),"instants")}function G(e,t,n){return V(e,t,n,"scalars")}function V(e,t,n,r){if(K(n)){return q(e,r,t,(0,i.NM)(n))}}function q(e,t,n,i){return(e.data[t]||(e.data[t]={}))[n]=i,i}function j(e,t){const[n,i]=t,r=[];for(const t of i){const n=z(e,t);null!=n&&r.push(n)}const o=S.get(n),a=o&&o(r);return K(a)?a:void 0}function z(e,t){const[n,i,r]=t,o=e.getMeasureValues({coreName:i});if(o&&o.length){const t=S.get(n);if(t){const n=function(e,t,n){return e.getMeasureValues({coreName:t}).map((e=>e[n])).filter((e=>null!=e))}(e,i,r),o=t(n);if(K(o))return o}}}function K(e){return null!=e&&!isNaN(e)}M.set((0,l.zw)());var Q=n(98968),J=n(33779),X=n(73898),Y=n(37039),Z=n(84381);const ee=6e4,te=(0,a.U1)(),ne=(0,a.pn)(),ie=(0,a.U1)(),re=(0,a.U1)(),oe=(0,a.pn)(),ae=(0,a.pn)(),se=()=>{},ce=(0,a.oN)(),de=(0,a.oN)(),ue=(0,a.oN)();function le(e,t,n,i,r){if([ce,de,ue,ne,te,ae,oe].forEach((e=>e.unset())),re.set(i||X.Z),ie.set(r||X.Z),!i||!r||!t)return;const{bundleInfo:a,pcsInfo:s}=t.ClientSettings||{};ae.set({buildAlias:a&&a.alias,env:s&&s.env});const{pivotsFinalized:c}=(0,o.MB)(e,t,n),d=!e&&(0,Z.g)(),u=e&&(0,o._P)();oe.set(!0),u&&c.then((()=>{(0,o._P)()||ge()})),(d||u)&&(ne.set(!0),te.set(fe({props:{},dedupeBehavior:2,startTime:0,getMatches:()=>u?(0,o.aM)():[]})))}function pe(e,t,n){if(oe.get())return n=n||(0,o.aM)(),x(ae.get(),e,n,t)}function he(e){if(ge()&&e){ye(e,Object.values(Y.j.get()),(0,i.At)())}}function ge(){if(te.get())return te.call(!0),ne.unset(),te.unset(),!0}function fe(e){0===ce.size&&(!ne.get()&&performance.clearResourceTimings(),re.call());const{props:t,dedupeBehavior:n,groupId:o,traceId:a}=e,c=(0,Q.s)(t)+`|${a||""}|${o||""}`,d=ce.get(c);if(d&&d.size)if(n&&2!==n){if(1===n)return se}else{const e=o&&ue.get(o);e&&e.size&&d.forEach((t=>e.delete(t)));const t=a&&de.get(a);t&&t.size&&d.forEach((e=>t.delete(e))),d.clear()}let u;return u=t=>{const n=ce.get(c);if(n&&n.delete(u)){const d=a&&de.get(a);d&&d.delete(u);const l=o&&ue.get(o);l&&(t?l.delete(u):(l.forEach((e=>e!==u&&e(!0))),l.clear())),n.size||!ce.delete(c)||ce.size||ie.call(),t||function(e){const t=(0,i.At)({start:e.startTime,end:performance.now()}),{spanFilterFn:n}=t,o=Object.values(Y.j.get()).filter((e=>{const{timeSpan:t}=e;return t&&n(t[0],void 0,t[1])})),a={},c=e.getMatches();if(!ye(a,o,t,c))return;try{r.M0.sendLoadTimeEvent({markers:a})}catch(e){(0,J.H)(s.GrI,"Failed to upload entity-metrics for manual trace",`Matches: ${c.map((e=>e.key)).join("|")}`)}}(e)}},me(ce.getObj(),c,u),me(de.getObj(),a,u),me(ue.getObj(),o,u),setTimeout((()=>u(!0)),e.stopTimeout||ee),u}function me(e,t,n){if(t){let i=e.get(t);!i&&e.set(t,i=new Set),void 0!==n&&i.add(n)}}function ye(e,t,n,i){if(e&&oe.get()){const r=pe(t,n,i);if(r)return e.entityMetrics=r,!0}}},21492:function(e,t,n){n.d(t,{aM:function(){return A},_P:function(){return P},MB:function(){return k},nm:function(){return E},Pj:function(){return R}});var i=n(32236),r=n(67244),o=n(22170),a=n(21215),s=n(64527);const c=/^winp(\d)/i;function d(e){if(!(0,a.N)())return;const{referrer:t}=document;if(t){if(t===location.href)return"self";const e=function(e){try{return new URL(e)}catch{return}}(t);if(e){const{host:t,pathname:n}=e,{host:i,pathname:r}=window.location;let o,a;if(a=t.match(/^([a-z]+)\.msn\.(com|cn)$/)){const[,e]=a;if("ntp"===e)return"edge-hp";if("www"===e){let e;if(!n||"/"===n)return"msn-hp";if(e=n.match(/^\/[a-z]{2}-[a-z]{2}(\/feed)?\/?$/i))return e[1]?"win-hp":"msn-hp";if(n.match(/\/(ar|ss|vi)-[A-Za-z0-9]+$/))return"msn-views"}return t===i&&u(n)===u(r)?"same-seg1-seg2":"msn-other"}if(o=t.match(/\.(bing|google|yahoo)\.com$/))return"search-engine"}}else{const{ocid:t}=e;let n;if(t&&(n=t.match(c)))return`prong-${n[1]}`}return"unknown"}function u(e){const t=e&&e.match(/^\/([^/]+(\/[^/]+)?)?/);return t&&t[0]}var l=n(98968),p=n(5302),h=n(242),g=n(33779),f=n(84381);const m=(0,o.oN)(),y=(0,o.oN)(),v=(0,o.oN)(),S=(0,o.sR)(),w=null,b=(0,o.pn)(),C=(0,o.U1)(),T=(0,o.WG)((()=>new Promise((e=>C.set(e)))));function k(e,t,n){const{pivots:o,manualPivots:a}=e||{},u={pivotsFinalized:T.get()};if(!(e&&(o&&o.length||a&&a.length)&&t&&n))return u;const l=(0,h.A1)()||{},p=function(e){if(e){const{cpu:t}=e;if(t>=1&&t<=4)return"1-4";if(t>=6&&t<=8)return"6-8";if(t>=10)return"10+"}}(l),g=(0,i.p)((()=>d(n))),m=(0,i.p)((()=>function(e){const{ocid:t}=e;return t&&("windirect"===t||t.match(c))?"winfeed":"default"}(n))),y=(0,i.p)((()=>function(){let e,t=0,n=0;const i=/\/(vendors|microsoft|experience|common)\./,r=performance.getEntriesByType("resource");for(const o of r)if("script"===o.initiatorType&&(e=o.name.match(i))&&((0,s.F$)(o)?t++:n++,t+n>=4))break;return 4===t?"warm":4===n?"cold":n+t===4?"partial":void 0}()));O("audienceMode",(e=>(0,r.Uc)({audienceMode:e},n))),O("browser",(e=>(0,r.K4)({browser:e},n))),O("deviceFormFactor",(e=>(0,r.Ev)({deviceFormFactor:e},n))),O("displayLocale",(e=>(0,r.fb)({locale:e},n,!0))),O("domain",(e=>(0,r.hI)({domain:e},n))),O("experimentId",(e=>(0,r.W9)({experimentId:e},n))),O("locale",(e=>(0,r.fb)({locale:e},n,!1))),O("ocid",(e=>(0,r.K3)({ocid:e},n))),O("os",(e=>(0,r.zu)({os:e},n))),O("platform",(e=>(0,r.jF)({platform:e},n))),O("referrer",(e=>e===g())),O("ocidGroup",(e=>e===m())),O("network",(e=>e===l.networkSpeed)),O("cpu",(e=>e===l.cpu)),O("cpuGroup",(e=>e===p)),O("memory",(e=>e===l.memory)),O("coreJSCache",(e=>e===y()));const{pcsInfo:v,bundleInfo:S}=t.ClientSettings;return O("env",(e=>(0,r.Sh)(e,v&&v.env))),O("buildAlias",(e=>(0,r.Sh)(e,S&&S.alias))),D("pageType",((e,t)=>(0,r.oM)({pageType:t},{pageType:e}))),D("pageProduct",r.Sh),D("pageName",r.Sh),R("preRender",!!t.IsPrerender),b.set(function(e){const t=[],n=[],{pivots:i,manualPivots:r,_sampleRate:o}=e,a=(e,t)=>{e&&e.forEach((e=>{e&&(0,f.g)(e._sampleRate||o)&&t(e)}))},s=e=>{for(const{key:t,matcher:n}of L(e))n||_(t)};return a(i,(e=>{s(e);const n={config:e},i=I(n);(i||i===w)&&t.push(n)})),a(r,(e=>{s(e),n.push(e)})),{defaultPivots:t,manualPivotConfigs:n}}(e)),x(),u}function P(){return!!b.get()?.defaultPivots.some((e=>e.success||e.success===w))}function A(){const e=b.get();if(!e)return[];const t=[];for(const n of e.defaultPivots)I(n)&&t.push(F(n.config));return S.size&&(0,g.H)(p.WXX,"Missing pivot field values",[...S.getObj()].toString()),t}function I(e){let{success:t}=e;if(null!=t)return t;t=!0;for(const{key:n,value:i,matcher:r}of L(e.config)){const e=r&&r.matchFn(i);if(e===w)t=w,S.add(n);else if(!e){t=!1;break}}return e.success=t}function E(e,t){v.set(e,t),M(e)}function R(e,t){null!=t&&(y.set(e,t),M(e))}function M(e){b.get()&&S.delete(e)&&x()}function x(){const e=b.get();if(e&&S.size<=0){for(const t of e.defaultPivots)I(t);C.call()}}function*L(e){for(const t in e)if((0,l.L)(t)){const n=m.get(t);yield{key:t,value:e[t],matcher:n}}}function F(e){const t=(0,l.s)(e);return{key:t,key64:btoa(t)}}function D(e,t){O(e,(n=>{const i=v.get(e);return i==w?w:t(i,n)}))}function O(e,t){N(e,(()=>t))}function _(e){N(e,(()=>function(e){return t=>{const n=y.get(e);return n==w?w:n===t}}(e)))}function N(e,t){m.get(e)||m.set(e,{matchFn:t()})}},89799:function(e,t,n){n.d(t,{JS:function(){return c},Ud:function(){return p},ny:function(){return s},o4:function(){return a},xb:function(){return l}});var i=n(22170),r=n(21215);const o=(0,i.pn)(),a=o.get;function s(e){o.set(e)}const c="service",d=g().fetch;let u=d;function l(e){Object.defineProperty(g(),"fetch",{value:e?(...e)=>p()(...e):d})}function p(e={}){const{perfTimeline:t=a()}=e,n=e.fetchImpl||u;return t?h.bind(h,t,n):n}async function h(e,t,n,i){const r=(n.url||n).toString(),o={url:r};if(i){o.requestName=i.requestName,o.perfCritical=i.perfCritical,delete i.requestName,delete i.perfCritical;const{urlMapper:e}=i;e&&(o.mappedUrl=e(r),delete i.urlMapper)}const s=e===a()?r:c,d=e&&e.startMeasure(s).endMeasure;let u;try{const e=await t(n,i);return u=!e||!e.ok,e}catch(e){throw u=!0,e}finally{u&&(o.error=!0),d&&d({customData:o})}}function g(){return(0,r.N)()?window:globalThis}},98968:function(e,t,n){n.d(t,{L:function(){return o},s:function(){return r}});var i=n(42122);function r(e){const t=[];return e&&a(e,t),t.join(",")}function o(e){return e&&!e.startsWith("_")}function a(e,t,n=""){const r=Object.keys(e).filter(o).sort();for(const o of r){const r=e[o];if(null==r)continue;const s=`${n}${n?".":""}${o}`;if("object"==typeof r)a(r,t,s);else{if(!(t.length<100)){i.k.logError("getSortedObjectKeyValuesDeep: circular reference suspect");break}t.push(`${s}=${r.toString().toLowerCase()}`)}}}},4620:function(e,t,n){n.d(t,{At:function(){return p},NM:function(){return h},d9:function(){return s},fJ:function(){return d}});var i=n(51727),r=n(37641);const o=(e,t)=>n=>n>=e&&n<=t,a={start:-1/0,end:1/0},s={timeFilter:a,spanFilterFn:()=>!0,spanMapperFn:(e,t,n)=>u(e,t,n),timeMapperFn:e=>e,timeFilterFn:()=>!0},c={timeFilter:{start:1/0,end:-1/0},spanFilterFn:()=>!1,spanMapperFn:()=>{},timeMapperFn:()=>{},timeFilterFn:()=>!1};function d(e,{timeFilter:t},n,s){if(e&&n&&t!==a){const{start:a,end:c}=t;if(s){const t=(0,i.Z)(e,{[n]:a},n),o=(0,r.Z)(e,{[n]:c},n);e=e.slice(t,o)}else{const t=o(a,c);e=e.filter((e=>t(e[n])))}}return e}function u(e,t,n,i){if(null!=e&&(null!=t&&(n=t-e),null!=n&&n>=0)){if(i&&null==(e=i(e)))return;return[h(e),h(n)]}}function l(e,t){return(n,i,r)=>{if(e(n,i,r))return u(n,i,r,t)}}function p(e){if(!e)return s;const{start:t,end:n}=e;if(null==t||null==n||t>n)return c;const i=o(t,n),r=e=>h(e-t),a=function(e){const{start:t,end:n}=e;return(e,i,r)=>{if(null==e)return!1;let o;if(null!=i)o=i;else{if(null==r)return!1;o=e+r}return!(o<e)&&e<=n&&o>=t}}(e);return{timeFilter:e,spanFilterFn:a,spanMapperFn:l(a,r),timeMapperFn:r,timeFilterFn:e=>i(e)}}const h=e=>e<5?Math.round(10*e)/10:Math.round(e)},8887:function(e,t,n){n.d(t,{H:function(){return d},N:function(){return s}});var i=n(5302),r=n(33779),o=n(44132),a=n(21215);class s{constructor(e,t,n,i){this.chromiumApiRetryCount=5,this.isNtpPrivateApiAvailable=e=>window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate[e],this.prefSettingKey=e,this.searchForKeyName=t,this.targetKeyName=n,this.defaultItem=i}async getPreferenceSetting(e,t){try{const n=await this.getPreferenceSettingValueArray(t),i=n.findIndex((t=>t[this.searchForKeyName]===e));return i>-1?n[i]:null}catch(t){const n=`Failed to find user preference key: ${e}`;return this.logAppError(i.Aps,n,t),null}}async savePreferenceSetting(e,t){try{const n=await this.getPreferenceSettingValueArray()||[],i=n.findIndex((t=>t[this.searchForKeyName]===e));if(i>-1){const e={...n[i],...t};n[i]=e}else{const i={...this.defaultItem,...t};i[this.searchForKeyName]=e,n.push(i)}return this.setAndSavePreferenceSetting(n)}catch(t){const n="Failed to store user preference setting";return this.logAppError(i.nS9,n,`Key:${e}.Error:${t}`),!1}}isApiAvailableToUse(){return new Promise((e=>{const t="Error in isApiAvailableToUse";try{this.isGoodToUseNtpSettingsPrivate("getAllPrefs")?void 0===this.isPrefSettingKeyAvailable?window.chrome.ntpSettingsPrivate.getAllPrefs((n=>{if(this.isPrefSettingKeyAvailable=n&&n.findIndex((e=>e.key===this.prefSettingKey))>-1,!this.isPrefSettingKeyAvailable){let e="";try{n&&n.forEach((t=>e+=`${t.key}+`))}catch(e){this.logAppError(i.Aps,"Error: Can not log keylist from preference setting",e)}this.logAppError(i.me0,t,`missing preference key: ${this.prefSettingKey}, available keys: ${e}`)}e(this.isPrefSettingKeyAvailable)})):e(this.isPrefSettingKeyAvailable):(this.logAppError(i.MFQ,t,"getAllPrefs not present"),e(!1))}catch(t){this.logAppError(i.MFQ,"Error: Unexpected throw in isApiAvailableToUse",t),e(!1)}}))}logAppError(e,t,n){o.M0?.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n,stack:Error().stack}})}async getPreferenceSettingValueArray(e){try{if(this.settingValuesArray&&!e)return this.settingValuesArray;{const e=await this.getPreferenceValueFromBrowser();return this.settingValuesArray=e||[],this.settingValuesArray}}catch(e){const t=`Failed to read ${this.prefSettingKey} preference setting`;return this.logAppError(i.k8J,t,e),[]}}setAndSavePreferenceSetting(e){if(!(0,a.N)())return!1;try{if(this.isGoodToUseNtpSettingsPrivate("setPref"))return this.settingValuesArray=e,window.chrome.ntpSettingsPrivate.setPref(this.prefSettingKey,this.settingValuesArray,c),!0;{const e="window.chrome.ntpSettingsPrivate.setPref does not exist.";return this.logAppError(i.T5b,e,`Key:${this.prefSettingKey}`),!1}}catch(e){return!1}}isGoodToUseNtpSettingsPrivate(e){let t=this.isNtpPrivateApiAvailable(e),n=0;for(;n<this.chromiumApiRetryCount&&!t;)n++,setTimeout((()=>{t=this.isNtpPrivateApiAvailable(e),t&&(0,r.H)(i.$9$,`Chromium API retry succeed after ${n} retry`)}),50);if(!t){const t=`functionName: ${e},\n            canUseDOM: ${(0,a.N)()},\n            windows: ${window},\n            document: ${window&&window.document},\n            createElement: ${window&&window.document&&window.document.createElement},\n            chrome: ${window&&window.chrome},\n            ntpSettingsPrivate: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate},\n            ntpSettingsPrivate funtions: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate&&Object.getOwnPropertyNames(window.chrome.ntpSettingsPrivate).toString()}\n            `;(0,r.H)(i.Fe_,"Failed to get funtion from window.chrome.ntpSettingsPrivate.",void 0,{...i.Fe_.pb,customMessage:t,stack:Error().stack})}return t}getPreferenceValueFromBrowser(){return new Promise(((e,t)=>{if(this.isGoodToUseNtpSettingsPrivate("getPref"))window.chrome.ntpSettingsPrivate.getPref(this.prefSettingKey,(function(t){t&&t.value?e(t.value):e(null)}));else{const e="window.chrome.ntpSettingsPrivate.getPref does not exist.";this.logAppError(i.pCD,e,""),t(e)}}))}}let c=e=>{};function d(e){c=e}},69931:function(e,t,n){n.d(t,{m:function(){return h}});var i=n(13218),r=n(21298),o=n(3637),a=n(34254),s=n(77770),c=n(33779),d=n(5302);const u=[];function l(){const e=i.Al&&i.Al.Diagnostics||{};return e&&(0,r.fB)(JSON.stringify(e))}function p(){const e=p;return new Promise((t=>{void 0!==e.cache&&t(e.cache);const n=i=>{i>3&&(e.cache=null,t(null));const r=document.getElementById("ntp-diagnostics");r&&r.innerText?(e.cache=r,t(r)):(i++,setTimeout((()=>n(++i)),3e3))};n(0)}))}async function h(e,t,n,i){try{(e||t)&&u.push({id:e,debug:t}),await Promise.all([(0,a.F_)(),(0,s.lr)()]);const r=await p();if(r&&r.innerText){const e=JSON.parse(r.innerText);Object.assign(e,{traceInfo:u}),Object.assign(e,{prgDiagnostics:l()}),Object.assign(e,{authTrail:n}),Object.assign(e,{countryConfidenceFactor:(0,o.q)()}),i&&Object.assign(e,{ocvSource:i}),r.innerText=JSON.stringify(e)}}catch(e){(0,c.OO)(e,d.vxy,"Error throwed during update idxid into diagnostic element")}}},26156:function(e,t,n){n.d(t,{w$:function(){return ne},Wt:function(){return $},FC:function(){return H},jL:function(){return X},Kr:function(){return q},w4:function(){return Q},RV:function(){return J},o8:function(){return ye},Zb:function(){return ee},_W:function(){return F},zx:function(){return M},IS:function(){return x},x5:function(){return K},He:function(){return te},P:function(){return _},rc:function(){return he},aA:function(){return ue},_P:function(){return ge},ZR:function(){return pe},hp:function(){return ce},UU:function(){return U},H1:function(){return z},db:function(){return G},aT:function(){return L},wl:function(){return ve},i9:function(){return be},Qw:function(){return V},y3:function(){return oe},fw:function(){return me},gk:function(){return de},Wb:function(){return E},Nd:function(){return j},$V:function(){return B},VS:function(){return D},OM:function(){return O},I9:function(){return N},$5:function(){return se},D7:function(){return we},SA:function(){return Se},hK:function(){return re},nz:function(){return Z},Rk:function(){return fe},KN:function(){return Ce},LC:function(){return W}});var i=n(28951),r=n(42833),o=n(98130),a=n(59571),s=n(55447),c=n(19625),d=n(76461),u=n(33779),l=n(5302),p=n(242),h=n(52185),g=n(21215),f=n(95603),m=n(1713),y=n(13218),v=n(15598),S=n(44132);function w(e){if("undefined"==typeof window||!window.document||window.isRenderServiceEnv)return void(0,u.OO)(new Error("DOM is not available"),l.$oH,"DOM is not available to use trusted types API.");const t=window.trustedTypes;if(!t)return void(0,u.OO)(new Error("Trusted types API is not available"),l.yJi,"Trusted types API is not available to use.");if(!t.createPolicy)return void(0,u.OO)(new Error("Trusted types API createPolicy function is not available"),l.Bis,"Trusted types API createPolicy function is not available to use.");const n=window.trustedTypePolicies||(window.trustedTypePolicies={});if(n[e])return n[e];const i=t.createPolicy(e,{createScriptURL:e=>{const t=function(e){const t=["ntp.msn.com","ntp.msn.cn","assets.msn.cn","assets.msn.com","www.bing.com","assets2.msn.com","assets2.msn.cn","int.msn.com","r.bing.com","business.bing.com","staticview.msn.com","staticview.msn.cn",document.location.hostname],n=["clarity.ms"];let i;try{i=new URL(e,location.origin)}catch(t){return(0,u.OO)(new Error("Failed to construct URL"),l.OC2,"URL is invalid",`Invalid URL: ${e}`),"about:blank#error"}if(i.hostname){const e=t.includes(i.hostname),r=n.some((e=>i.hostname.endsWith(`.${e}`)));if(!e&&!r)return(0,u.OO)(new Error("URL violates Trusted Types"),l.w5E,"URL hostname is not allowed",`Invalid URL hostname: ${i.hostname}`),"about:blank#error"}return e}(e);return t}});return n[e]=i,i}var b=n(10034),C=n(22624),T=n(16495);const k="ntp-lastLayoutUpdate",P="ntp-lastContentChanged",A="ntp-lastWPOPromotion",I="lypSignal",E="isCoordsCacheInvalid";const R="__cachedClientFeaturesKey__";async function M(){const e=x();if(e)return e;const t=y.Al.EdgeNTPHeader?.enabledFeatures||[],n=window.chrome;let i={enabled:t,disabled:[]};if(n){const e=n.ntpSettingsPrivate;if(e&&"function"==typeof e.getConfigData){const t=await new Promise((t=>e.getConfigData(t)));i={enabled:t?.enabledFeatures||[],disabled:t?.disabledFeatures||[]}}}return h.Gq.set(R,i),i}function x(){return h.Gq.get(R)}function L(e){const t=[];return e.forEach((e=>{if(e.startsWith("m")){const n=e.replace("msNtpExp",""),i=Number.parseInt(n);i>=0&&t.push(i)}})),t}function F(e){let t=BigInt(0);return e.forEach((e=>{e<64&&(t|=BigInt(1)<<BigInt(e))})),t===BigInt(0)?"":t.toString()}async function D(){const{enabled:e}=await M();return e?.includes("msReducedNtpAdsForNewDevice_BlockAllAds")}async function O(){const{enabled:e}=await M();return e?.includes("msReducedNtpAdsForNewDevice_BlockOnly3PAds")}async function _(){const{enabled:e}=await M(),t=e?.filter((e=>e.startsWith("msNtpReducedAdsSdCards")));return t&&t.length>0?t[0]:null}function N(){if("1"===new URLSearchParams(window?.location?.search).get("lowend"))return!0;if(window&&window.deviceMemory)return window.deviceMemory<=4;const e=window&&window.navigator;if(!e)return!1;const{deviceMemory:t=-1}=e;return t<=4}function B(){const e=window&&window.navigator;if(!e)return!1;if("1"===new URLSearchParams(window?.location?.search).get("edgelowend"))return!0;const{deviceMemory:t=-1,hardwareConcurrency:n=-1}=e;return t<=4||n<=4}function U(){let e=!1;const t="os-sku";if(!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv))try{if(window&&window.external&&window.external.getHostEnvironmentValue(t)){const n=JSON.parse(window.external.getHostEnvironmentValue(t));e=n&&"192"===n[t]}}catch(e){}return e}function $(e){window?.chrome?.ntpSettingsPrivate?.onPrerenderConversionFromDhpToNtp?.addListener(e)}function H(e){window?.chrome?.ntpSettingsPrivate?.onPrerenderConversionFromNtpToDhp?.addListener(e)}function W(e,t,n,i,r,o){const a=`${e}|${t}|${n}|${i}|${r}`;(0,v.$o)().setItem(k,a),S.M0.removeTmplProperty(k),e===f.st.Wpo&&(0,v.$o)().setItem(A,a),n!==i?(S.M0.addOrUpdateTmplProperty("layoutchange",a),e===f.st.User&&((0,v.$o)().setItem(P,a),S.M0.removeTmplProperty(P)),async function(e,t,n,i,r,o){const a=await G()||{};if(e==f.st.User){if(a.userLayoutHistory={time:r,changeKey:t,from:n,to:i},i!==n){const e=await(0,m.Ok)();e&&(await(0,m.NP)(null),S.M0.addOrUpdateTmplProperty("wpo_nxCleanDueToUserChange: ",JSON.stringify(e)))}}else(!o||o&&e==f.st.Wpo)&&(a.wpoLayoutHistory={time:r,changeKey:t,from:n,to:i});await T.U.savePreferenceSetting(f.Xm.layoutHistory,a)}(e,t,n,i,r,o)):S.M0.addOrUpdateTmplProperty("layoutUpdate",a)}async function G(){const e=await T.U.getPreferenceSetting(f.Xm.layoutHistory,!0);return e&&e.value}async function V(){const e=await T.U.getPreferenceSetting(f.Xm.wpo),t=e&&e.value,n=t&&t.recommendedLayoutRetargetHistory&&t.recommendedLayoutRetargetHistory.length;return n?n+"":"0"}function q(){const e=(0,v.$o)().getObject("AdminPortalSettings");if(!e)return!1;const{isOfficeContentEnabled:t,isShowCompanyAndIndustry:n}=e;return!t&&!n}async function j(){const{enabled:e}=await M();return!!e?.length&&e.includes("msNtpExpBlockLayoutPromotions")}async function z(e){try{const t=await G();let n=t&&t.wpoLayoutHistory,i=t&&t.userLayoutHistory;const r={};return n||(n=await async function(e){const t=await T.U.getPreferenceSetting(f.Xm.wpo),n=t&&t.value,i=n&&n.layoutHistory;if(i&&i.length){const t=e?i[i.length-1]:i[0];return{time:t.time,changeKey:"layout",from:f.Uq[t.from],to:f.Uq[t.to]}}return null}(e)),e||i||(i=await async function(){const e=await C.L.getPreferenceSetting(f.nc.layout_mode,!0),t=e&&e;return t?{time:t.timestamp,changeKey:"layout",from:8,to:t.value}:null}()),n?.time&&(r.promotion=`${n.time}_${"layout"==n.changeKey?"l":"f"}_${n.from}_${n.to}`),i?.time&&(r.selection=`${i.time}_${"layout"==i.changeKey?"l":"f"}_${i.from}_${i.to}`),r}catch(e){return{}}}async function K(){if((0,g.N)()&&window.caches){return(await window.caches.open("edgenext-pre-V1").then((e=>e.matchAll()))).find((e=>e.url.includes("/common.")))}}async function Q(e){if((0,g.N)()&&window.caches)return window.caches.delete(e)}async function J(){}function X(){window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onNtpFeedbackSubmitted&&window.chrome.ntpSettingsPrivate.onNtpFeedbackSubmitted.addListener((()=>{Y()}))}const Y=async()=>{const e=y.Al.ClientSettings?y.Al.ClientSettings.aid:"";let t=S.M0.getPageMetadata().JoinIdProps.IDXId;if(t){const n=t.split(",");t=n.slice(0,10).toString();const i={serviceType:"oneservice",oneServiceTraceId:t,oneServiceActivityId:e};S.M0.sendTraceInfoEvent(i)}};function Z(e,t){const n=w(t);return n?n.createScriptURL(e):((0,u.OO)(new Error("Trusted Types policy creation error"),l.qS2,"Trusted Types policy creation failed, Trusted Types API is unavailable."),e)}async function ee(){const e=await T.U.getPreferenceSetting("background_setting_preferences",!0),t=e?.value?.backgroundSelectionMetadata;return t}async function te(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(e&&e.getPref)return new Promise((t=>{e.getPref("ntp.background_image",(function(e){t(e?.value)}))}))}function ne(e){const t=window?.chrome?.ntpSettingsPrivate;if(!t)return;const{activateTriggerWithPageType:n,NTPTrigger:i,PageType:r}=t;try{if(n&&i&&r&&i[e]){const t="1"===new URLSearchParams(window?.location?.search).get("startpage");n(i[e],t?r.DHP:r.NTP)}}catch(n){(0,u.H)(l.a63,"NTP Settings Private: Failed to activate Trigger",`{"error": ${n}, "trigger": ${e}, "api": ${JSON.stringify(t)}}`,{shouldSampleErrorsForTreatement1:!0})}}(0,g.N)()&&"visible"===document.visibilityState&&async function(){const e=window?.chrome?.embeddedSearch?.newTabPage?.getTabTimings;if(!e)return;const t=(0,p.Ou)();e(((e,n)=>{e&&n&&void 0!==n.tabStartToNavigationStart&&(t.tabStartToNavigationStart=Math.round(n.tabStartToNavigationStart))}))}();const ie="widgetLockScreenLandingSessions";async function re(){const e=await oe()||[];return e.push({ts:Date.now()}),await T.U.savePreferenceSetting(ie,e)?e:null}async function oe(){return await T.U.getPreferenceSetting(ie).then((e=>e?.value?e.value:null))}const ae="myFeed";function se(e){return!e||"null"===e||"undefined"===e||""===e||e.toLocaleLowerCase()===ae.toLocaleLowerCase()}async function ce(e){let t;if((y.Al.EdgeNTPHeader||await C.L.isApiAvailableToUse())&&(t=y.Al.EdgeNTPHeader?.freSeenCount?.toString(),!t)){const e=await C.L.getPreferenceSetting(f.nc.seen_interest_fre_count,!0);t=e&&e.value?e.value.toString():"0"}const n=await ue(),r=await async function(){const{enabled:e}=await M();return e?.includes("msNtpExpDisableFre")}(),o=n&&Date.now()-n<864e5,a=i.cX.getQueryParameterByName("firstlaunch",window.location.href),s=!t||!isNaN(parseInt(t))&&parseInt(t)<3;e||"1"===a||o||r?t="10":de()&&s&&((0,u.H)(l.tyW,"FRE overlay is disabled because of auth refresh",`{"seenCountToSend": ${t}}`),t="20");const c=i.cX.getQueryParameterByName("overlay",window.location.href);return c&&(t=c),t}function de(){const e=h.Gq.get("authRefreshing"),t=S.M0.getPageMetadata()?.contract?.page?.isAutoRefresh;return!(!e&&!t)&&(S.M0.addOrUpdateTmplProperty("isauthrefreshing","1"),!0)}async function ue(){return await le()||await he()}async function le(){if(!window?.chrome?.ntpSettingsPrivate?.getConfigData)return;const e=new r.o;return window.chrome.ntpSettingsPrivate.getConfigData((t=>{e.set(t?.newProfileFreSeenTime||null)})),e.getResultAsync()}async function pe(){return y.Al.EdgeNTPHeader?.newProfFreTime?y.Al.EdgeNTPHeader?.newProfFreTime:await le()}async function he(){if(y.Al.EdgeNTPHeader?.seenNewDevFre&&y.Al.EdgeNTPHeader?.newDevFreTime)return y.Al.EdgeNTPHeader?.newDevFreTime;if(!window?.chrome?.ntpSettingsPrivate?.getPref||!window?.chrome?.ntpSettingsPrivate?.getConfigData)return;const e=new r.o;return window?.chrome?.ntpSettingsPrivate?.getPref(f._9.hasUserSeenNewFre,(t=>e.set(t?.value))),e.getResultAsync().then((e=>{if(!e)return null;const t=new r.o;return window.chrome.ntpSettingsPrivate.getConfigData((e=>{t.set(e?.newDeviceFreSeenTime||null)})),t.getResultAsync()}))}async function ge(){if(!window?.chrome?.ntpSettingsPrivate?.getConfigData)return;const e=new r.o;return window.chrome.ntpSettingsPrivate.getConfigData((t=>{e.set(t?.profileCreationTime||null)})),e.getResultAsync()}function fe(){const e=(0,v.$o)().getItem(k);e&&S.M0.addOrUpdateTmplProperty(k,e);const t=(0,v.$o)().getItem(P);t&&S.M0.addOrUpdateTmplProperty(P,t);const n=(0,v.$o)().getItem(A);n&&S.M0.addOrUpdateTmplProperty(A,n);const i=(0,v.$o)().getObject("lypSignalTransition");if(i){const{clientReceivedTime:e,knobIdx:t,requestIdWhenReceived:n}=i,r=`${e??"0"}|${t??"0"}|${n??"0"}|${Date.now()}`;S.M0.addOrUpdateTmplProperty(I,r)}}async function me(){return new Promise((e=>{const t=window?.chrome?.ntpSettingsPrivate;t?t.getPref(f._9.widgetsRegion,(function(t){e(!1!==t?.value)})):e(!1)}))}function ye(){const[,e]=o.jG.CurrentMarket?.split("-")||[],t=(0,b.Ol)(new URLSearchParams(window.location.search),"segment"),n=t?t.toLowerCase():void 0,i=y.Al?.ClientSettings,r="true"===i?.browser?.ismobile||"phone"===i?.deviceFormFactor?"mobileapp":"desktopweb";return{[a.l.Publisher]:"msn",[a.l.PageType]:"edgehomeandtab",[a.l.Market]:e?.toLowerCase(),[a.l.ContentCategory]:n,[a.l.DeviceType]:r}}function ve(){const e=(0,v.$o)()?.getItem("MUID"),t=(0,c.jG)()||e;if(t){const e=(0,d.Ru)(t),n=(0,d.bX)();if(n&&e?.dateCreated)return n-e.dateCreated}}const Se=(e,t)=>{if(window.chrome?.ntpSettingsPrivate?.launchEdgeFeedback){const n=new CustomEvent("EdgeFeedbackDialogOpened");document.dispatchEvent(n);const i=(0,s.NJ)();if(i){const n=new URL(window.location.href),r=n.hash;n.hash=e||`${t}${i}`,history.replaceState(history.state,void 0,n),window.location.reload(),window.chrome.ntpSettingsPrivate.launchEdgeFeedback(),window.stop(),n.hash=r||"",history.replaceState(history.state,void 0,n)}else window.chrome.ntpSettingsPrivate.launchEdgeFeedback()}},we=e=>window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate[e];function be(){const e=navigator.deviceMemory<=4;if(y.Al.CurrentFlightSet.has("ntp-swsr-ledvc")&&e)return{enableNTPLowEndStaticRoutes:!0};if(y.Al.CurrentFlightSet.has("ntp-swsr-alldc")){if(e)return{enableNTPLowEndStaticRoutes:!0};if("ru-ru"!==o.jG.CurrentMarket)return{enableNTPStaticRoutes:!0}}}function Ce(e){(0,g.N)()&&C.L.savePreferenceSetting(f.nc.is_ruby_page,{setting:f.nc.is_ruby_page,value:""+(e?1:0),timestamp:Date.now(),source:"ntp"})}},68551:function(e,t,n){n.d(t,{g:function(){return a}});var i=n(33779),r=n(5302),o=n(21215);const a=e=>{if(!(0,o.N)()||e)return;const t=window&&window.chrome&&window.chrome.runtime&&window.chrome.runtime.lastError||{},n=!1===e?"Failed to set preference.":t.message||"";n&&(0,i.H)(r.sRL,"Failed to successfully execute window.chrome.ntpSettingsPrivate.setPref",n)}},1713:function(e,t,n){n.d(t,{KK:function(){return s},NP:function(){return c},Ok:function(){return a},RN:function(){return u},e2:function(){return d},oc:function(){return l},r5:function(){return p}});var i=n(95603),r=n(16495);const o=async()=>{let e,t={v:"2"};return await r.U.isApiAvailableToUse()&&(e=(await r.U.getPreferenceSetting(i.Xm.wpo_nx))?.value,e&&(t="2"===e?.v?e:{lyp:e,v:"2"})),t},a=async()=>{const e=await o();if(e){return e.lyp}},s=async e=>{if(await r.U.isApiAvailableToUse()){const t=await o();if(!!t?.fdc==!!e)return;const n={lyp:t?.lyp,wgt:t?.wgt,cpt:t?.cpt,fdc:e?"1":void 0,v:"2"};r.U.savePreferenceSetting(i.Xm.wpo_nx,n)}},c=async e=>{if(await r.U.isApiAvailableToUse()){const t=await o(),n={lyp:e,wgt:t?.wgt,cpt:t?.cpt,fdc:t?.fdc,v:"2"};r.U.savePreferenceSetting(i.Xm.wpo_nx,n)}},d=async()=>{const e=await o();if(e){return e.wgt}},u=async e=>{if(await r.U.isApiAvailableToUse()){const t=await o(),n={lyp:t?.lyp,wgt:e,cpt:t?.cpt,fdc:t?.fdc,v:"2"};r.U.savePreferenceSetting(i.Xm.wpo_nx,n)}},l=async()=>{const e=await o();if(e){return e.cpt}return!1},p=async e=>{if(await r.U.isApiAvailableToUse()){const t=await o(),n={lyp:t?.lyp,wgt:t?.wgt,cpt:e,fdc:t?.fdc,v:"2"};r.U.savePreferenceSetting(i.Xm.wpo_nx,n)}}},22923:function(e,t,n){n.d(t,{I4:function(){return p},LK:function(){return h},iR:function(){return u},nI:function(){return l}});var i=n(33779),r=n(5302),o=n(44132),a=n(1713),s=n(21215),c=n(52185),d=n(13218);const u="MSNCMPN_RUBY_CARD";async function l(){return new Promise((async e=>{if((0,s.N)()&&!d.Al?.IsPrerender)"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.isEdgeChatEnabled&&"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.sendCopilotQuery?window.chrome.edgeMarketingPagePrivate.isEdgeChatEnabled((t=>{e(t)})):e(!1);else{const t=await(0,a.oc)();e(t)}})).then((e=>(f(e),e)))}function p(){return"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.isEdgeChatVisible}const h=(e,t="MSNCMPN_DEFAULT_CARD")=>{if(window&&window.chrome&&window.chrome.edgeMarketingPagePrivate)try{window.chrome.edgeMarketingPagePrivate.sendCopilotQuery(e,e,"",t,"MsnNtpQuery","",g)}catch(e){(0,i.OO)(e,r.E8Y,"Copilot Card - edgeMarketingPagePrivate sendCopilotQuery API failure:")}else(0,i.H)(r._D4,"Copilot Card - edgeMarketingPagePrivate sendCopilotQuery is not available to use.")},g=e=>{"FEATURE_DISABLED"===e?(0,i.H)(r.kpe,"Copilot Card - edgeMarketingPagePrivate sendCopilotQuery feature is disabled."):"MESSAGE_SENT"===e?o.M0.addOrUpdateTmplProperty("askCopilotQuerySent","1"):(0,i.H)(r.cTj,"Copilot Card - edgeMarketingPagePrivate sendCopilotQuery API returns unknown error.")},f=e=>{c.Gq.set("__CopilotAPISupported__",e)}},8170:function(e,t,n){n.d(t,{MN:function(){return s},j0:function(){return i}});var i,r,o,a=n(21215);!function(e){e.NTP_TOP_SITES_CLICK="NTP_TopSites_Click"}(i||(i={})),function(e){e.FunctionalNotification="ntp_profile_scope_tab_functional_notification",e.FeatureCampaign="ntp_profile_scope_tab_feature_campaign",e.PureFunctionalNotification="ntp_profile_scope_tab_pure_functional_notification"}(r||(r={})),function(e){e.PrimaryCTAClicked="PrimaryCTA_Clicked",e.DismissedCTA_Clicked="DismissedCTA_Clicked",e.Notification_Ignored="Notification_Ignored"}(o||(o={}));class s{static isEdgeNurturingAvailable(){return(0,a.N)()&&window.chrome?.edgeNurturingPrivate}static async getToken(e,t){return new Promise((n=>{(0,a.N)()?"function"==typeof window.chrome?.edgeNurturingPrivate?.GetToken?window.chrome.edgeNurturingPrivate.GetToken(e,t,"NTP",(e=>{n(e)})):n({Message:"window.chrome.edgeNurturingPrivate.GetToken API Unavailable"}):n({Message:"Cannot use DOM"})}))}static updateCTA(e,t){(0,a.N)()&&"function"==typeof window.chrome?.edgeNurturingPrivate?.UpdateCTA&&window.chrome.edgeNurturingPrivate.UpdateCTA(e,t)}static notifyTriggerEvent(e){return new Promise((t=>{(0,a.N)()&&"function"==typeof window.chrome?.edgeNurturingPrivate?.NotifyTriggerEvent&&window.chrome.edgeNurturingPrivate.NotifyTriggerEvent(e,(e=>{t(e)}))}))}}},27811:function(e,t,n){n.d(t,{G:function(){return y}});var i=n(19625),r=n(13218),o=n(95603),a=n(22624),s=n(33779),c=n(5302),d=n(77770),u=n(98130),l=n(16495),p=n(12812),h=n(44132);const g="sptmarket_restored";async function f(e=!1){const t=(0,i.ej)(o.Xm.sptmarket),n=(0,i.ej)(g),a=await l.U.getPreferenceSetting(o.Xm.sptmarket,!1);if(h.M0.addOrUpdateTmplProperty("ImplicitMarketRestoredSync","1"),!t)return;const d=r.Al.ClientSettings&&r.Al.ClientSettings.market&&r.Al.ClientSettings.market.detection?.type;let f;a&&a.value&&a.value.value?(f=a.value.value,"implicitExisting"!=d&&"implicitReset"!=d||(await l.U.savePreferenceSetting(o.Xm.sptmarket,{setting:o.Xm.sptmarket,source:"ntp",timestamp:(new Date).getTime(),value:t}),f=t)):"implicitExisting"!=d&&"implicitNew"!=d||(await l.U.savePreferenceSetting(o.Xm.sptmarket,{setting:o.Xm.sptmarket,source:"ntp",timestamp:(new Date).getTime(),value:t}),f=t),!f||n&&f==n||function(e,t){const n=365;(0,i.sq)(g,void 0,-1),(0,i.sq)(g,void 0,-1,void 0,"/edge"),(0,i.sq)(g,e,n,u.jG.HostPage.hostName,"/"),t&&((0,s.H)(c.y5G,`Edge Next page refresh due to implicit market cookie restored. market: ${e}`),(0,p.Z)())}(f,function(e,t){const n=e?.split("|",5)?.[4],i=t?.split("|",5)?.[4];return n!=i}(t,f))}var m=n(24318);async function y(e,t){const n=r.Al?.ClientSettings?.market?.detection,u=await(document?.hasStorageAccess?.());if(!window.navigator.cookieEnabled||!u||!n||"cm"===n.type)return;const l=(0,i.ej)(o.U),p=await a.L.getPreferenceSetting(o.U,!1);!l||p&&l===p.value||await a.L.savePreferenceSetting(o.U,{setting:o.U,source:"ntp",timestamp:(new Date).getTime(),value:l});let h=!1;if(!l&&p&&p.value)try{const t=JSON.parse(p.value)?.m;t&&(h=!0,m.FI.updateMarket(t,!0),await e(t),(0,s.H)(c.v7z,"Edge Next page refresh due to market cookie missing.",void 0,{customMessage:`market: ${t}`}))}catch(e){(0,s.H)(c.a89,`Invalid market user preference: ${p.value}`,e.message)}(0,d.lr)().then((async()=>{await t(e),l||h||"true"===r.Al.ClientSettings.static_page||f(!1)}))}},8615:function(e,t,n){n.d(t,{F:function(){return c}});var i=n(44132),r=n(97906),o=n(98130);const a=`reloadCount_${"undefined"!=typeof window?window.location.href:""}`;function s(e,t,n){if(i.M0.sendAppErrorEvent({...e,message:"Navigating to local ntp page on exception.",pb:{...e.pb,customMessage:t,stack:n&&n.stack}}),o.jG.IsDebug)return;const r=new URLSearchParams;e&&r.set("ntperror",e.id);const a=i.M0.getRequestId();a&&r.set("rid",a),i.M0.flush(!0,"AppError"),setTimeout((()=>{location.replace("chrome-search://local-ntp/local-ntp.html?"+r.toString())}),2e3)}const c={tryReloadNtpPage:function(e,t,n,o){if(!r.y7.supported)return void s(t,`sessionStorage is not supported. ${n}`);if(r.y7.getItem(a)){const e=r.y7.getItem(a),i=e&&parseInt(e)||0;if(!(i<2))return void s(t,`Max reload count (2) reached. ${n}`,o);r.y7.setItem(a,i+1+"")}else r.y7.setItem(a,"1");i.M0.sendAppErrorEvent({...e,message:"Reloading NTP page on exception.",pb:{...e.pb,customMessage:n,stack:o&&o.stack}}),i.M0.flush(!0,"AppError"),setTimeout((()=>{location.reload()}),2e3)},redirectToLocalNtp:s}},10545:function(e,t,n){var i;function r(e,t,n=performance.now()){const i=window?.chrome?.embeddedSearch?.newTabPage;i&&(i.logEventWithTimestamp?i.logEventWithTimestamp(e,n,t):i.logEvent(e))}n.d(t,{f:function(){return r}}),function(e){e[e.NTP_ALL_TILES_LOADED=11]="NTP_ALL_TILES_LOADED",e[e.NTP_BACKGROUND_IMAGE_LOADED=60]="NTP_BACKGROUND_IMAGE_LOADED",e[e.NTP_VISUALLY_READY=62]="NTP_VISUALLY_READY",e[e.NTP_SEARCH_BOX_VISUALLY_READY=63]="NTP_SEARCH_BOX_VISUALLY_READY",e[e.NTP_NATIVE_AD_VISUALLY_READY=64]="NTP_NATIVE_AD_VISUALLY_READY"}(i||(i={}))},22624:function(e,t,n){n.d(t,{L:function(){return c}});var i=n(52185),r=n(81489),o=n(8887),a=n(5302);class s extends o.N{constructor(){super("ntp.record_user_choices","setting","value",{setting:"default",source:"default layout",timestamp:0,value:-1})}static getInstance(){return i.Gq.get("__RecordUserChoicesManager__",(()=>new s))}async deleteKeyValueFromPSL(e){try{let t=await this.getPreferenceSettingValueArray()||[];return t=t.filter((t=>t&&t[this.searchForKeyName]!==e)),this.setAndSavePreferenceSetting(t)}catch(t){const n="Failed to delete user preference setting";return this.logAppError(a.nS9,n,`Key:${e}.Error:${t}`),!1}}}const c=(0,r.h)(s)},24318:function(e,t,n){n.d(t,{FI:function(){return Se}});var i,r,o=n(52185),a=n(49494),s=n(13218),c=n(59465),d=n(98130),u=n(24032),l=n(19625),p=n(17911),h=n(93450),g=n(8830),f=n(33779),m=n(5302),y=n(26156),v=n(44132);!function(e){e[e.Unknown=1]="Unknown",e[e.OptIn=2]="OptIn",e[e.OptOut=3]="OptOut",e[e.ExplicitOptIn=4]="ExplicitOptIn"}(i||(i={})),function(e){e[e.Unknown=1]="Unknown",e[e.In1SCohortForAA=2]="In1SCohortForAA",e[e.Out1SCohortForAA=3]="Out1SCohortForAA",e[e.InDogfoodingCohort=4]="InDogfoodingCohort",e[e.InAlphaDogfoodingCohort=5]="InAlphaDogfoodingCohort",e[e.ExternalOptIn=6]="ExternalOptIn",e[e.In1SCohortForAB=7]="In1SCohortForAB",e[e.Out1SCohortForAB=8]="Out1SCohortForAB",e[e.InUntargetedCohort=9]="InUntargetedCohort",e[e.InMsftShipped=12]="InMsftShipped"}(r||(r={}));const S=new Set(["en-us"]),w=new Set(["edgeChromium","msn","msnStudio"]),b=new Set(["en-us","en-ca","en-au","en-gb","en-in","zh-cn"]),C="__rubyState",T={userSelection:i.Unknown,cohortStatus:r.Unknown};class k{get isRuby(){return"ruby"===s.Al.ClientSettings?.bundleInfo?.variant||(0,c.nH)()}get isRubyEligible(){return!this._isLoggingOnly&&!!this._isRubyEligible}get isLoggingOnly(){return!!this._isLoggingOnly}get _isRubyInternal(){return!this._isLoggingOnly&&!!this._isRuby}constructor(){this.getIsRubyEligible=()=>this.ensureInit().then((()=>this.isRubyEligible)),this.update=e=>{this.ensureInit().then((()=>this.updateImpl(e)))},this.updateImpl=e=>{if(!E()||this._isForcedOnWithoutCookie||(0,h.KX)())return;const t={...T,...this._rubyState,...this.rubyStateUpdateFrom1s,...this._rubyStateUpdateFromUntargetedFlight,...this._rubyStateUpdateFromShippedCases,...this._rubyStateUpdateFromRubyOptParam,...this.rubyStateUpdateFromUserSelection};this.setRubyStateCookie(t);const{isRuby:n,reason:i}=O(t,this.pageSettings,this.isEdgeExpIsolationFlagEnabled,this._isForcedOn,this.isEnvironmentSupported);this.setIsRubyCookie(n,e,i)},this.isIsRubyChangingByForceOrEnvironment=()=>this._isRuby&&!this.isEnvironmentSupported||!this._isRuby&&this._isForcedOn,this.setRubyStateCookie=({userSelection:e,cohortStatus:t})=>{const n=`${e}_${t}`;this._rubyStateCookieValue!==n&&((0,h.QI)({cookieValue:this._rubyStateCookieValue,newCookieValue:n}),this._rubyState.cohortStatus===r.In1SCohortForAB&&t===r.Out1SCohortForAB&&(0,f.H)(m.bio,"Server side signal indicates user is no longer in the Ruby cohort"),this._isLoggingOnly||(this._isRubyCookieValue=n,(0,l.sq)(C,n,60)))},this.setIsRubyCookie=(e,t,n,i)=>{const r=String(e);if(this._isRubyCookieValue!==r){let o=!1;if(this._isRuby!==e&&((0,h.eg)(e),s.Al.IsPrerender&&"visible"!==document.visibilityState||(0,a.yV)(14),e&&(0,h.Y7)(),t&&(o=!0)),(0,h.YW)(e),!this._isLoggingOnly||i){this._finalRubyCookieStatus=e;(0,h.c_)(r,60)?(this._isRubyCookieValue=r,this.lastRubyCookieChangeReason=n,n&&(0,h._M)("rubyrc",String(n)),(0,h.NA)(n)):(0,h._M)("rubyrc",String(15)),o&&window.setTimeout((()=>(0,h.ci)("usel")))}}r&&(0,h.uF)(r)},this.onVisibilityChange=()=>{"visible"===document.visibilityState&&this.handleVariantEnablementMismatch()},this.handleVariantEnablementMismatch=()=>{const e="ruby"===s.Al.ClientSettings?.bundleInfo?.variant;this._isRuby!==e&&(0,h.ci)("var",2)},this.refreshRubyStateUpdateFromShippedCases=e=>{this._isRubyEligible&&B(this.pageSettings,this.isEdgeExpIsolationFlagEnabled,$(this._rubyState)).isRuby&&this._isMsftInternal&&S.has((e||d.jG.CurrentMarket)?.toLocaleLowerCase())?this._rubyStateUpdateFromShippedCases={cohortStatus:r.InMsftShipped,shouldReload:!this.isRuby}:this._rubyState.cohortStatus===r.InMsftShipped?this._rubyStateUpdateFromShippedCases={shouldReload:this.isRuby}:this._rubyStateUpdateFromShippedCases=void 0},E()&&(this._isForcedOn=(0,h.L0)("prg-rn-frc"),this._isForcedOnWithoutCookie="1"===(0,u.L)().get("fcruby"),this._isLoggingOnly=!this._isForcedOn&&!this._isForcedOnWithoutCookie&&W(),this._isMsftInternal=s.Al.ClientSettings?.detection?.isMsft||s.Al.ClientSettings?.detection?.isCorpNet,(0,h.uT)()&&(0,h.ZW)(),(0,p.Q)(),this._rubyStateCookieValue=(0,l.ej)(C),this._rubyState=P(this._rubyStateCookieValue),this._isRubyCookieValue=(0,l.ej)("__rubyUX"),this._isRuby="true"===this._isRubyCookieValue||this._isForcedOnWithoutCookie,this.isEnvironmentSupported=A(void 0),this._rubyStateUpdateFromRubyOptParam=x(),this.handleVariantEnablementMismatch(),document?.addEventListener("visibilitychange",this.onVisibilityChange,{once:!0}),(0,h.DP)(this._isRubyCookieValue),this.ensureInit())}ensureInit(){return this.initCompletedPromise||(this.initCompletedPromise=this.init()),this.initCompletedPromise}async init(){this.pageSettings=await(0,h.Tp)(),(0,h.Tv)((0,h.J)(this.pageSettings)),this.isEdgeExpIsolationFlagEnabled=(await(0,y.zx)())?.enabled.includes("msRubyFlightingAllowed"),this._isRubyEligible=!!this._isRuby||this.isEnvironmentSupported,this._rubyStateUpdateFromUntargetedFlight=L(this._rubyState,this.pageSettings),this.refreshRubyStateUpdateFromShippedCases(),this.setupPageSettingsListener();let e=!1;e=this._isLoggingOnly?this._isRuby:!(!(this._rubyStateUpdateFromUntargetedFlight?.shouldReload||this._rubyStateUpdateFromShippedCases?.shouldReload||this._rubyStateUpdateFromRubyOptParam)&&this.isEnvironmentSupported),this.isIsRubyChangingByForceOrEnvironment()&&(e=!0),this.updateImpl(e),this._isLoggingOnly&&this._isRuby&&!this._isForcedOnWithoutCookie&&this.setIsRubyCookie(!1,!0,21,!0),window.addEventListener("beforeunload",(()=>{this.lastRubyCookieChangeReason&&this.isRuby&&!1===this._finalRubyCookieStatus&&v.M0.sendLoadTimeEvent({markers:{lastCookieChangeReason:this.lastRubyCookieChangeReason}})}),{once:!0})}setupPageSettingsListener(){if(!G()&&!q()&&!this._isMsftInternal)return;const e=this._rubyState.cohortStatus;(0,h.n7)(this.pageSettings,(t=>{if(this.refreshRubyStateUpdateFromShippedCases(),q()){const t=this.isRuby&&"off"===this.pageSettings.feedSetting&&e===r.InUntargetedCohort;this.update(t)}else this.update(!1);this.isRuby&&"Theme"===t.backgroundImageProvider&&(0,h.z)(this.pageSettings)&&s.Al.IsPrerender&&"hidden"===document.visibilityState&&(0,a.yV)(14)}))}updateUserSelection(e,t){const n=e?i.ExplicitOptIn:i.OptOut;this.isEnvironmentSupported&&!this._isLoggingOnly&&this._rubyState.userSelection!==n&&g.N.updateFeedPreference(e),this.rubyStateUpdateFromUserSelection={userSelection:n},this.update(!t)}update1sCohort(e,t){if(!E())return;let n={};const r=e?.serviceContext?.rubyTargetedVersion||null,o=e?.serviceContext?.rubyEverSelected,a=e?.serviceContext?.isTestRubyVersion;if(this.isEnvironmentSupported&&(0,h.uT)()&&(0,h.qe)(r,!!a),(0,h.qe)(r,!!a,"rubyTargetedVersionExt"),(0,h.MY)(o),!N(this._rubyState)){const e=t?.allowedRubyTargetedVersions?.split(","),a=V()&&!0===o||!(!r||"all"!==e?.[0]&&!e?.includes(r));n={cohortStatus:H(a)},U(this._rubyState.cohortStatus).isRuby&&!U(n.cohortStatus).isRuby&&this._rubyState.userSelection===i.OptIn&&(n.userSelection=i.Unknown)}this.rubyStateUpdateFrom1s=n,this.update(this.isIsRubyChangingByForceOrEnvironment())}updateMarket(e,t){this.isEnvironmentSupported=A(e),this.refreshRubyStateUpdateFromShippedCases(e),this.update(!t&&!this._isLoggingOnly)}static getInstance(){return o.Gq.get(h.ab,(()=>new k))}}const P=e=>{if(e){const[t,n]=e.split("_").map(Number);return{...T,...F({userSelection:t,cohortStatus:n})}}return T},A=e=>{e=(e||d.jG.CurrentMarket).toLocaleLowerCase();return(b.has(e)||(0,h.L0)("prg-rn-allmkt"))&&!d.jG.IsHeroNTP&&"kids"!==d.jG.CurrentRequestTargetScope?.audienceMode&&I()},I=()=>(0,h.L0)("prg-rn-mob")||!d.jG.isMobile&&"tablet"!==s.Al.ClientSettings?.deviceFormFactor,E=()=>w.has(d.jG.AppType),R={"-1":i.OptOut,0:i.Unknown,1:i.OptIn,2:i.OptIn},M={1:r.InDogfoodingCohort,2:r.ExternalOptIn},x=()=>{const e=(0,u.L)().get("rubyopt");if(null!=e){const t=R[e],n=M[e];return null==n?{userSelection:t}:{userSelection:t,cohortStatus:n}}},L=(e,t)=>q()?{cohortStatus:r.InUntargetedCohort,shouldReload:e.cohortStatus===r.InUntargetedCohort&&"Theme"===t.backgroundImageProvider}:e.cohortStatus===r.InUntargetedCohort?e.userSelection===i.OptIn?{userSelection:i.Unknown,cohortStatus:r.Unknown}:{cohortStatus:r.Unknown}:void 0,F=e=>{const t={};return null!=i[e.userSelection]&&e.userSelection!==i.Unknown&&(t.userSelection=e.userSelection),null!=r[e.cohortStatus]&&e.cohortStatus!==r.Unknown&&(t.cohortStatus=e.cohortStatus),D(t)?void 0:t},D=e=>0===Object.keys(e).length,O=({userSelection:e,cohortStatus:t},n,r,o,a)=>{if(o)return{isRuby:!0,reason:4};if(!a)return{isRuby:!1,reason:1};if(e===i.ExplicitOptIn)return{isRuby:!0,reason:5};if(e===i.OptIn)return{isRuby:!0,reason:6};const{isRuby:s,reason:c}=B(n,r,$({userSelection:e,cohortStatus:t}));return s?e===i.OptOut?{isRuby:!1,reason:10}:U(t):{isRuby:!1,reason:c}},_=e=>[r.InDogfoodingCohort,r.InAlphaDogfoodingCohort,r.ExternalOptIn].includes(e),N=e=>e.userSelection!==i.OptOut&&_(e.cohortStatus),B=(e,t,n)=>e&&!((e,t)=>{const n=(0,h.J)(e);return!(G()&&!n||(t||q())&&!n)})(e,n)?{isRuby:!1,reason:8}:j()&&!1===t?{isRuby:!1,reason:7}:z()?{isRuby:!1,reason:9}:{isRuby:!0},U=e=>e===r.InMsftShipped?{isRuby:!0,reason:19}:_(e)?{isRuby:!0,reason:12}:W()&&e===r.In1SCohortForAA?{isRuby:!0,reason:20}:G()&&e===r.In1SCohortForAB?{isRuby:!0,reason:11}:q()&&e===r.InUntargetedCohort?{isRuby:!0,reason:14}:{isRuby:!1,reason:2},$=({userSelection:e,cohortStatus:t})=>e!==i.OptOut&&t===r.InMsftShipped,H=e=>G()?e?r.In1SCohortForAB:r.Out1SCohortForAB:W()?e?r.In1SCohortForAA:r.Out1SCohortForAA:r.Unknown,W=()=>(0,h.L0)("ruby-ntp-aa","ruby-ntp-ctrl"),G=()=>(0,h.L0)("ruby-ntp","ruby-ntp-ctrl2"),V=()=>(0,h.L0)("prg-rn-codynamic"),q=()=>(0,h.L0)("prg-rn-untgt"),j=()=>(0,h.L0)("ruby-edg-exp"),z=()=>(0,h.L0)("ruby-ntp-ctrl2");class K{constructor(){this.getIsRubyEligible=()=>Promise.resolve(this.isRubyEligible)}get isRuby(){return!0}get isRubyEligible(){return!0}get isLoggingOnly(){return!1}updateUserSelection(e,t){}update1sCohort(e,t){}updateMarket(e){}static getInstance(){return o.Gq.get(h.ab,(()=>new K))}}var Q=n(21215),J=n(22680),X=n(81489),Y=n(95603),Z=n(28951),ee=n(7124),te=n(22624),ne=n(16495),ie=n(93692);const re=["edgeChromium","views","msn","winWidgets","msnStudio"],oe="_copilotDiscoverUX";var ae;!function(e){e.UserSelection="usel"}(ae||(ae={}));class se{constructor(){if(this.getIsRubyEligible=()=>Promise.resolve(this.isRubyEligible),!re.includes(d.jG.AppType))return;(0,p.Q)(),this.isRubyVariant="ruby"===s.Al.ClientSettings?.bundleInfo?.variant,this._isRubyEligible=!d.jG.IsHeroNTP&&"kids"!==d.jG.CurrentRequestTargetScope?.audienceMode;const e=(0,l.ej)(oe);this._userChoice=null===e?null:"true"===e,(0,v.dK)().then((()=>{"kids"===d.jG.CurrentRequestTargetScope?.audienceMode&&this.isRubyVariant&&((0,f.H)(m.Pce,"Kids user hit ruby bundle","",{aace:(0,l.ej)("aace"),childCookie:(0,l.ej)(ie.nM),pcdMode:s.Al.ClientSettings.modes?.audienceMode||s.Al.ClientSettings.audienceMode}),this.updateUserSelection(!1,!0))}))}get isRuby(){return this.isRubyVariant||this._isRubyEligible&&!1!==this._userChoice}get isRubyEligible(){return this._isRubyEligible}get isLoggingOnly(){return!1}updateUserSelection(e,t=!1){if(e&&!this.isRubyEligible)return;const n=(0,l.ej)(oe),i=String(e);n!==i&&((0,l.sq)(oe,i,365),(0,h.YW)(e),s.Al.IsPrerender&&"visible"!==document.visibilityState||(0,a.yV)(14),t||window.setTimeout((()=>this.safeReload("usel")),100))}update1sCohort(e,t){const n=(0,u.L)().get("testRubyVersion"),i=e?.serviceContext?.rubyTargetedVersion||n;this._isRubyEligible&&(0,h.uT)()&&(0,h.qe)(i,!!n),(0,h.qe)(i,!!n,"rubyTargetedVersionExt")}updateMarket(e){}safeReload(e){if(!(0,Q.N)())return;const t=new URL(window.location.href),n=`sr${e}`,i=Number(t.searchParams.get(n))||0;t.searchParams.set(n,String(i+1)),t.searchParams.delete("rubyopt"),window.location.href=t.href}static getInstance(){return o.Gq.get(h.ab,(()=>new se))}}var ce,de;!function(e){e[e.Unknown=1]="Unknown",e[e.OptIn=2]="OptIn",e[e.OptOut=3]="OptOut",e[e.ExplicitOptIn=4]="ExplicitOptIn"}(ce||(ce={})),function(e){e[e.Unknown=1]="Unknown",e[e.In1SCohortForAA=2]="In1SCohortForAA",e[e.Out1SCohortForAA=3]="Out1SCohortForAA",e[e.InDogfoodingCohort=4]="InDogfoodingCohort",e[e.InAlphaDogfoodingCohort=5]="InAlphaDogfoodingCohort",e[e.ExternalOptIn=6]="ExternalOptIn",e[e.In1SCohortForAB=7]="In1SCohortForAB",e[e.Out1SCohortForAB=8]="Out1SCohortForAB",e[e.InUntargetedCohort=9]="InUntargetedCohort",e[e.InMsftShipped=12]="InMsftShipped"}(de||(de={}));const ue=new Set(["en-us"]),le=new Set(["en-us","en-ca","en-au","en-gb","en-in","zh-cn"]),pe=()=>"1"===(0,u.L)().get("fcruby"),he=[],ge=(e,t)=>{if(v.M0){for(;he.length>0;){const[e,t]=he.shift();v.M0?.addOrUpdateTmplProperty?.(e,t)}v.M0?.addOrUpdateTmplProperty?.(e,t)}else he.push([e,t])},fe=e=>{const t=String(e);ge("rubyUX",t),(0,y.D7)("setPref")&&te.L.savePreferenceSetting(Y.nc.ruby_ux_history,{setting:Y.nc.ruby_ux_history,value:t,timestamp:Date.now(),source:"ntp"})},me=(e,t,n="rubyTargetedVersion")=>{const i=Date.now(),r=`${e}|${v.M0.getRequestId()}|${t}|${i}`;ge(n,r);const o={value:r};ne.U.savePreferenceSetting(Y.Xm.rubyTargetedVersion,o)},ye=()=>s.Al.CurrentFlightSet&&["ruby-ntp-ctrl2","prg-ctrlrubyntp","prg-ctrl1rubyntp","prg-ctrlrubyntp3"].some((e=>s.Al.CurrentFlightSet.has(e)));class ve{get isRuby(){return"ruby"===s.Al.ClientSettings?.bundleInfo?.variant||(0,c.nH)()}get _isRubyInternal(){return this._isRuby}get isRubyEligible(){return this._enableToggleButton}async getIsRubyEligible(){return await this.init(),this.isRubyEligible}get enableToggleButton(){return this._enableToggleButton}get isEnvironmentSupported(){return this.isEnvironmentSupportedInternal()}isEnvironmentSupportedInternal(e){const t=e||d.jG.CurrentMarket;return le.has(t)&&!d.jG.IsHeroNTP&&"kids"!==d.jG.CurrentRequestTargetScope?.audienceMode&&this.isSupportedDeviceType()}isSupportedDeviceType(){return(0,h.L0)("prg-rn-mob")||!d.jG.isMobile&&"tablet"!==s.Al.ClientSettings?.deviceFormFactor}get isOptIn(){return"1"===(0,u.L)().get("rubyopt")}get isExternalOptIn(){return"2"===(0,u.L)().get("rubyopt")&&!(0,u.L)().get("srusel")}get isOptedOutByDogfooding(){return this._isOptedOutByDogfooding}get isInRubyDogfoodFlight(){return(0,h.L0)("prg-ntp-ruby")||this.isOptIn||!1}get isInAlphaChannel(){return(0,h.L0)("prg-ntprubyalpha")}get isRubySupported(){return this.isRubySupportedInternal()}get isLoggingOnly(){return this.shouldBeRubySupportedInAAFlight}get shouldBeRubySupportedInAAFlight(){return(0,h.L0)("ruby-ntp-aa","ruby-ntp-ctrl")}isRubySupportedInternal(e){return this.isEnvironmentSupportedInternal(e)}get shouldBeRubySupportedInABFlight(){return"adult"===d.jG.CurrentRequestTargetScope?.audienceMode&&(this.isInRubyTreatment||ye())}get isInRubyTreatment(){return(0,h.L0)("ruby-ntp")}get isInDynamicCohortFlight(){return(0,h.L0)("prg-rn-codynamic")}get isExternalOptInCohort(){return 6===this.rubyState.cohortStatus}get isIn1SCohortForAB(){return 7===this.rubyState.cohortStatus}get isIn1SCohortForAA(){return 2===this.rubyState.cohortStatus}get isDogfoodingCohort(){return 4===this.rubyState.cohortStatus||5===this.rubyState.cohortStatus}get isInTargetCohort(){return this.isIn1SCohortForAB&&this.shouldBeRubySupportedInABFlight?{isRuby:!0,reason:11}:this.isDogfoodingCohort&&this.isInRubyDogfoodFlight?{isRuby:!0,reason:12}:this.isExternalOptInCohort?{isRuby:!0,reason:13}:this.isInUntargetedCohortFlight&&this.isInUntargetedCohort?{isRuby:!0,reason:14}:{isRuby:!1,reason:2}}get isInUntargetedCohort(){return 9===this.rubyState.cohortStatus}get isInUntargetedCohortFlight(){return(0,h.L0)("prg-rn-untgt")}get isInEdgeExpIsolationFlight(){return(0,h.L0)("ruby-edg-exp")}constructor(){if(this.rubyState={userSelection:1,cohortStatus:1},this._isRuby=!1,this._enableToggleButton=!1,this._isOptedOutByDogfooding=!1,this.didInit=!1,this.forceRubyPage=pe(),this.removeCookieListener=()=>{document?.removeEventListener?.("visibilitychange",this.onRubyCookieChanged),window?.cookieStore?.removeEventListener?.("change",this.onRubyCookieChanged)},this.onRubyCookieChanged=(0,ee.Z)((e=>{if((0,h.OL)(e))return;if([2,3,7,8,9].includes(this.rubyState.cohortStatus))return;const t=this.getIsRubyFromCookie(),n="ruby"===s.Al.ClientSettings?.bundleInfo?.variant;"visible"===document.visibilityState&&(this._isRuby!==t||!t&&n)&&setTimeout((()=>{we("rc")}),100)}),100),"edgeChromium"!==d.jG.AppType&&"msnStudio"!==d.jG.AppType)return;this.isMsftInternal=s.Al.ClientSettings?.detection?.isMsft||s.Al.ClientSettings?.detection?.isCorpNet;const e=this.getIsRubyFromCookie();this.isEnvironmentSupported?((0,h.DP)(String(e)),this.init()):e&&(0,Q.N)()&&!(0,h.KX)()&&((0,p.Q)(),(0,h.c_)("false",-1),this.setIsRubyAndReloadIfNeeded(void 0,!0))}async init(){if(!this.didInit){if(this.didInit=!0,this.pageSettings=await(0,h.Tp)(),ge("rubyset",String((0,h.J)(this.pageSettings))),this.isEdgeExpIsolationFlagEnabled=(await(0,y.zx)())?.enabled.includes("msRubyFlightingAllowed"),(0,p.Q)(),(0,u.L)().get("rubyopt")&&(0,a.yV)(14),!this.forceRubyPage){if(!this.updateCookieAndStates())return}this.setIsRuby(),this.forceRubyPage||(this._enableToggleButton=this.checkIsEnableToggleButton(),this.addCookieListener()),window.addEventListener("beforeunload",(()=>{this.lastRubyCookieChangeReason&&this.isRuby&&!this._isRuby&&v.M0.sendLoadTimeEvent({markers:{lastCookieChangeReason:this.lastRubyCookieChangeReason}})}),{once:!0})}}updateCookieAndStates(){if("-1"===(0,u.L)().get("rubyopt"))return this._isOptedOutByDogfooding=this.getRubyStateCookie().hasRubyCookie,this.removeCookie(16),!1;const{userSelection:e,cohortStatus:t}=this.getRubyStateCookie();if("ruby"===s.Al.ClientSettings?.bundleInfo?.variant&&!this.getIsRubyFromCookie()&&!pe()&&(0,Q.N)()){if(4===t)return this.setRubyStateCookie({userSelection:2,cohortStatus:4}),we("frv"),!1;we("frv")}this.rubyState={userSelection:e,cohortStatus:t},this.isExternalOptIn&&this.setExternalOptInCohort();const n=this.isExternalOptIn||6===this.rubyState.cohortStatus;return this.setUntargetedCohortIfNeeded(),this.setShippedCohortIfNeeded(),(4===e||!this.shouldCleanupStateAndExitOutsideFlights(t))&&(this.isInRubyDogfoodFlight||this.shouldBeRubySupportedInABFlight||this.shouldBeRubySupportedInAAFlight||n||this.isInUntargetedCohortFlight||le.has(d.jG.CurrentMarket)?((0,y.D7)("setPref")&&(async()=>{const[e,t,n]=await Promise.all([te.L.getPreferenceSetting(Y.nc.ruby_ux_history,!0),te.L.getPreferenceSetting(Y.nc.ruby_state_history,!0),ne.U.getPreferenceSetting(Y.Xm.rubyTargetedVersion,!0)]),i=e?.value||"",r=t?.value||"",o=n?.value?.value||"";ge("rubyUXHistory",i),ge("rubyStateHistory",r),ge("rubyTargetedVersionHistory",o)})(),this.isOptIn&&this.setOptInCohort(),(n||this.isOptIn)&&this.initRubyCoachmark(),this.update1SCohortStatusBasedOnPageSettings(),!0):("ruby"===s.Al.ClientSettings?.bundleInfo?.variant&&!pe()&&this.removeCookie(17),!1))}shouldCleanupStateAndExitOutsideFlights(e){if(!this.shouldBeRubySupportedInABFlight&&(7===e||8===e))return this.removeCookie(18),this.rubyState={userSelection:1,cohortStatus:1},!0}setIsRuby(e){const{isRuby:t,reason:n}=this.checkIsRuby(e);this._isRuby=t,this.forceRubyPage||(pe()||this.setIsRubyCookie(this._isRuby,void 0,n),this.isEnvironmentSupportedInternal()&&(this.shouldBeRubySupportedInABFlight&&this.isIn1SCohortForAB||this.shouldBeRubySupportedInAAFlight&&this.isIn1SCohortForAA)?fe(!0):fe(this._isRuby))}getIsRubyFromCookie(){return"true"===(0,l.ej)(h.Uw)}initRubyCoachmark(){const{isRuby:e}=this.checkIsRuby();this._isRuby=e;!this.getIsRubyFromCookie()&&this._isRuby&&(0,h.Y7)()}checkIsEnableToggleButton(){return this._isRuby||this.isRubySupported}checkIsRuby(e){return this.isRubySupportedInternal(e)?this.forceRubyPage?{isRuby:!0,reason:4}:4===this.rubyState.userSelection?{isRuby:!0,reason:5}:2===this.rubyState.userSelection?{isRuby:!0,reason:6}:this.isInEdgeExpIsolationFlight&&!this.isEdgeExpIsolationFlagEnabled?{isRuby:!1,reason:7}:this.pageSettings&&!this.arePageSettingsEligibleForCohort(this.pageSettings)?{isRuby:!1,reason:8}:3!==this.rubyState.userSelection&&12===this.rubyState.cohortStatus?{isRuby:!0,reason:19}:ye()?{isRuby:!1,reason:9}:3===this.rubyState.userSelection?{isRuby:!1,reason:10}:this.isInTargetCohort:{isRuby:!1,reason:1}}setUserSelection(e){const t=e?4:3,n=this.getRubyStateCookie().cohortStatus;3===t&&this.setIsRubyCookie(!1,-1,10)&&(0,h.c7)(),this.setRubyStateCookie({userSelection:t,cohortStatus:n}),g.N.updateFeedPreference(e)}updateUserSelection(e,t){this.setUserSelection(e),t||this.setIsRubyAndReloadIfNeeded(void 0,!0)}updateMarket(e,t){this.setIsRubyAndReloadIfNeeded(e,!1,t)}setIsRubyAndReloadIfNeeded(e,t,n){this.init();const i=this._isRubyInternal;this.setIsRuby(e),(t||!n&&i!==this._isRubyInternal)&&window.setTimeout((()=>{we("usel")}),100)}update1sCohort(e,t){this.set1SCohort(e,t),(e=>{const t=e?.serviceContext?.rubyTargetedVersion,n=e?.serviceContext?.isTestRubyVersion;t&&me(t,!!n,"rubyTargetedVersionExt")})(e)}set1SCohort(e,t){if(!this.isEnvironmentSupportedInternal())return;if(!this.shouldBeRubySupportedInAAFlight&&!this.shouldBeRubySupportedInABFlight)return;if(this.isDogfoodingCohort||this.isExternalOptInCohort)return;if(12===this.rubyState?.cohortStatus)return;const n=e?.serviceContext?.rubyTargetedVersion||null,i=e?.serviceContext?.rubyEverSelected,r=e?.serviceContext?.isTestRubyVersion,o=t?.allowedRubyTargetedVersions?.split(","),a=this.isInDynamicCohortFlight&&!0===i||!(!n||!o?.some((e=>"all"===e||e===n)));(0,y.D7)("setPref")&&me(n,!!r),(0,h.MY)(i);const[s,c]=this.shouldBeRubySupportedInABFlight?[7,8]:[2,3],d=a?s:c;8===d&&4!==this.rubyState.userSelection&&(this.rubyState.userSelection=1),7===this.rubyState.cohortStatus&&8===d&&(0,f.H)(m.bio,"Server side signal indicates user is no longer in the Ruby cohort",void 0,{...m.bio.pb}),this.setRubyStateCookie({userSelection:this.rubyState.userSelection,cohortStatus:d})}setExternalOptInCohort(){this.rubyState.cohortStatus=6,this.setRubyStateCookie({userSelection:2,cohortStatus:this.rubyState.cohortStatus})}setOptInCohort(){const e=this.isInAlphaChannel?5:4;this.rubyState.cohortStatus=e,this.setRubyStateCookie({userSelection:this.rubyState.userSelection,cohortStatus:e});const t=Date.now()+5184e6;var n;window.cookieStore?.set({name:"_EDGE_S",value:"O="+(n=e,5===n?"prg-ntprubyalpha":"prg-ntp1sruby"),expires:t})}update1SCohortStatusBasedOnPageSettings(){this.shouldBeRubySupportedInABFlight&&(0,h.n7)(this.pageSettings,(e=>{const{isRuby:t,reason:n}=this.checkIsRuby();this.setIsRubyCookie(t,void 0,n),"Theme"===e.backgroundImageProvider&&(0,h.z)(this.pageSettings)&&s.Al.IsPrerender&&"hidden"===document.visibilityState&&(0,a.yV)(14)}))}setUntargetedCohortIfNeeded(){if(this.isInUntargetedCohortFlight){const e=this.rubyState.cohortStatus,t=this.isRuby;if(1===this.rubyState.cohortStatus&&(this.rubyState.cohortStatus=9,this.setRubyStateCookie(this.rubyState)),"Theme"===this.pageSettings.backgroundImageType&&9===e&&t){const{isRuby:e,reason:t}=this.checkIsRuby();this.setIsRubyCookie(e,void 0,t),(0,a.yV)(14),setTimeout((()=>{we("rthm")}),100)}(0,h.n7)(this.pageSettings,(n=>{const{isRuby:i,reason:r}=this.checkIsRuby();this.setIsRubyCookie(i,void 0,r),"visible"===document.visibilityState&&"off"===this.pageSettings.feedSetting&&9===e&&t&&3!==this.rubyState.userSelection&&((0,a.yV)(14),setTimeout((()=>{we("roff")}),100)),t&&"Theme"===n.backgroundImageType&&s.Al.IsPrerender&&"hidden"===document.visibilityState&&(0,a.yV)(14)}))}else 9===this.rubyState.cohortStatus&&(this.rubyState.cohortStatus=1,2===this.rubyState.userSelection&&(this.rubyState.userSelection=1),this.setRubyStateCookie(this.rubyState))}setShippedCohortIfNeeded(){(0,h.J)(this.pageSettings)&&(!this.isInEdgeExpIsolationFlight||this.isEdgeExpIsolationFlagEnabled)&&this.isMsftInternal&&ue.has(d.jG.CurrentMarket)?(this.rubyState.cohortStatus=12,this.setRubyStateCookie(this.rubyState),this.isRuby||this.setIsRubyAndReloadIfNeeded()):12===this.rubyState.cohortStatus&&(this.rubyState.cohortStatus=1,this.setRubyStateCookie(this.rubyState))}arePageSettingsEligibleForCohort(e){const t=(0,h.J)(e);return!(this.shouldBeRubySupportedInABFlight&&!t)&&!(this.isInUntargetedCohortFlight&&!t)}checkIsRubySupportedMarket(e){return this.isInRubyDogfoodFlight&&le.has(e)}addCookieListener(){document?.addEventListener?.("visibilitychange",this.onRubyCookieChanged),window?.cookieStore?.addEventListener?.("change",this.onRubyCookieChanged),window?.addEventListener("beforeunload",this.removeCookieListener,{once:!0})}getRubyStateCookie(){const e=(0,l.ej)(h.PI);if(!e)return{userSelection:1,cohortStatus:1,hasRubyCookie:!1};const[t,n]=e.split("_").map(Number);return{userSelection:t,cohortStatus:n,hasRubyCookie:!0}}setRubyStateCookie(e){if((0,h.KX)())return;this.rubyState=e;const t=`${e.userSelection}_${e.cohortStatus}`;(e=>{const{updatedRubyStateString:t,currentRubyStateString:n}=e,i=Date.now(),r=`${n}->${t}|${i}`;ge("rubyState",r),(0,y.D7)("setPref")&&te.L.savePreferenceSetting(Y.nc.ruby_state_history,{setting:Y.nc.ruby_state_history,value:r,timestamp:i,source:"ntp"})})({updatedRubyStateString:t,currentRubyStateString:(0,l.ej)(h.PI)}),(0,Q.N)()&&(0,l.sq)(h.PI,t,60);const{isRuby:n,reason:i}=this.checkIsRuby();this.setIsRubyCookie(n,void 0,i)}setIsRubyCookie(e,t,n){if((0,h.KX)())return;const i=(0,l.ej)(h.Uw),r="true"===i,o=String(e);if(i!==o&&(r!==e&&((0,h.eg)(e),(!s.Al.IsPrerender||"visible"===document.visibilityState)&&(0,a.yV)(14),e&&(0,h.Y7)()),this.removeCookieListener(),(0,Q.N)())){const i=(0,h.c_)(o,t??60);return i?(this._isRuby=e,this.lastRubyCookieChangeReason=n,n&&ge("rubyrc",String(n)),(0,h.NA)(n)):ge("rubyrc",String(15)),i}return o&&(0,h.uF)(o),!0}removeCookie(e){(0,Q.N)()&&(this.lastRubyCookieChangeReason=e,(0,h.c_)(null,-1),(0,l.sq)(h.PI,null,-1),window.cookieStore?.delete("_EDGE_S"),window.setTimeout((()=>this.onRubyCookieChanged()),100))}static getInstance(){return o.Gq.get(h.ab,(()=>{const e=(0,J.zp)();return["half","full"].includes(Z.cX.getQueryParameterByName("ucexperience",e))?new K:(0,h.L0)("prg-ncrs")?new se:(0,h.L0)("prg-rn-untgt","prg-rsm2","prg-rsmi2")||(0,h.L0)("prg-rsms2")&&!(0,h.L0)("prg-rubyntp6","prg-rubyntp6-1","prg-rubyntpstable")?new k:new ve}))}}const Se=(0,X.h)(ve,{bindMethod:!0,forceLazy:!0});function we(e){if(!(0,Q.N)()||window.location.hostname?.startsWith?.("localhost"))return;const t=new URL(window.location.href),n=`sr${e}`,i=Number(t.searchParams.get(n))||0;i<30&&(t.searchParams.set(n,String(i+1)),window.location.href=t.href)}},93450:function(e,t,n){n.d(t,{$m:function(){return q},DP:function(){return W},J:function(){return B},KX:function(){return C},L0:function(){return U},MY:function(){return M},NA:function(){return I},OL:function(){return w},PI:function(){return g},QI:function(){return A},Qs:function(){return G},T1:function(){return V},Tp:function(){return D},Tv:function(){return P},Uw:function(){return f},Y7:function(){return v},YW:function(){return T},ZW:function(){return x},_M:function(){return L},ab:function(){return y},c7:function(){return S},c_:function(){return H},ci:function(){return b},eg:function(){return k},n7:function(){return _},ng:function(){return j},pY:function(){return m},qe:function(){return R},uF:function(){return $},uT:function(){return O},z:function(){return N}});var i,r=n(15598),o=n(13218),a=n(21215),s=n(44132),c=n(95603),d=n(16495),u=n(22624),l=n(26156),p=n(62301),h=n(19625);!function(e){e[e.UnsupportedEnvironment=1]="UnsupportedEnvironment",e[e.UnsupportedCohortConditions=2]="UnsupportedCohortConditions",e[e.UnsupportedMarket=3]="UnsupportedMarket",e[e.PageForced=4]="PageForced",e[e.ExplicitOptIn=5]="ExplicitOptIn",e[e.UserSelectionOptIn=6]="UserSelectionOptIn",e[e.BlockedByEdgeIsolation=7]="BlockedByEdgeIsolation",e[e.PageSettingsIneligible=8]="PageSettingsIneligible",e[e.InControlFlight=9]="InControlFlight",e[e.UserSelectionOptOut=10]="UserSelectionOptOut",e[e.OneServiceABCohort=11]="OneServiceABCohort",e[e.DogfoodingCohort=12]="DogfoodingCohort",e[e.ExternalOptInCohort=13]="ExternalOptInCohort",e[e.UntargetedCohort=14]="UntargetedCohort",e[e.TrySetCookieFailed=15]="TrySetCookieFailed",e[e.RemovedDueToDogfoodOptOut=16]="RemovedDueToDogfoodOptOut",e[e.RemovedDueToNoValidFlights=17]="RemovedDueToNoValidFlights",e[e.RemovedDueToStaleABState=18]="RemovedDueToStaleABState",e[e.InMsftShipped=19]="InMsftShipped",e[e.OneServiceAACohort=20]="OneServiceAACohort",e[e.ExitFromRubyInLoggingMode=21]="ExitFromRubyInLoggingMode"}(i||(i={}));const g="__rubyState",f="__rubyUX",m=5e3,y=Symbol("rubySwitchManager"),v=()=>{!(0,r.$o)().getObject("showRubyCoachmark")&&(0,r.$o)().setObject("showRubyCoachmark","true")},S=()=>{const e=Date.now()+2592e6;(0,r.$o)().getObject("isRubyOptOut")&&(0,r.$o)().removeObject("isRubyOptOut"),(0,r.$o)().setObject("isRubyOptOut",`${e}`)},w=e=>{if(e&&e.changed&&e.deleted){const t=e,n=e=>e.name===g||e.name===f;if(!t.changed.some(n)&&!t.deleted.some(n))return!0}return!1};function b(e,t=30){if(!(0,a.N)()||window.location.hostname?.startsWith?.("localhost"))return;const n=new URL(window.location.href),i=`sr${e}`,r=Number(n.searchParams.get(i))||0;r<t&&(n.searchParams.set(i,String(r+1)),n.searchParams.delete("rubyopt"),window.location.href=n.href)}const C=()=>!(!o.Al.IsPrerender||!(0,p.sB)()),T=e=>{const t=String(e);L("rubyUX",t),F(c.nc.ruby_ux_history,t)},k=e=>{const t=String(e);L("rubyAwt",t)},P=e=>{const t=String(e);L("rubyset",t)},A=({cookieValue:e,newCookieValue:t})=>{const n=Date.now(),i=`${e}->${t}|${n}`;L("rubyState",i),F(c.nc.ruby_state_history,i,n)},I=async e=>{const t=e=>[e,Date.now(),"hidden"===document.visibilityState?1:0].join("|"),n=await u.L.getPreferenceSetting(c.nc.ruby_cookie_change_history,!0),i=`${n?.value}->${t(e)}`;F(c.nc.ruby_cookie_change_history,t(e)),L("rubyCookieChangeHistory",i)},E=async()=>{const e=await u.L.getPreferenceSetting(c.nc.ruby_cookie_change_history,!0);e?.value&&L("rubyCookieChangeHistory",String(e?.value))},R=(e,t,n="rubyTargetedVersion")=>{const i=`${e}|${s.M0.getRequestId()}|${t}|${Date.now()}`;L(n,i),d.U.savePreferenceSetting(c.Xm.rubyTargetedVersion,{value:i})},M=e=>{e&&L("rubyEverSelected"),L("rubyUXSelected",String(e))},x=async()=>{const[e,t,n]=await Promise.all([u.L.getPreferenceSetting(c.nc.ruby_ux_history,!0),u.L.getPreferenceSetting(c.nc.ruby_state_history,!0),d.U.getPreferenceSetting(c.Xm.rubyTargetedVersion,!0)]),i=e?.value||"",r=t?.value||"",o=n?.value?.value||"";L("rubyUXHistory",i),L("rubyStateHistory",r),L("rubyTargetedVersionHistory",o)},L=(e,t)=>{s.M0?s.M0.addOrUpdateTmplProperty(e,t):window.addEventListener("telemetryInitialized",(()=>s.M0.addOrUpdateTmplProperty(e,t)),{once:!0})},F=(e,t,n=Date.now())=>{O()&&u.L.savePreferenceSetting(e,{setting:e,value:t,timestamp:n,source:"ntp"})};async function D(){const e=await async function(){return new Promise((e=>{(0,a.N)()&&window.chrome?.ntpSettingsPrivate?window.chrome.ntpSettingsPrivate.getAllPrefs((t=>{e(t)})):e([])}))}(),t=e.find((e=>"ntp.background_image"===e.key)),n=e.find((e=>"ntp.news_feed_display"===e.key)),i=e.find((e=>"ntp.background_image_type"===e.key));return{backgroundImageProvider:t?.value?.provider,backgroundImageType:i?.value,feedSetting:n?.value}}const O=()=>(0,l.D7)("setPref");function _(e,t){(0,a.N)()&&window.chrome?.ntpSettingsPrivate?.onPrefsChanged?.addListener?.((n=>{if(!n||!n.length)return;const i={};n.forEach((t=>{"ntp.background_image"===t.key?t.value?.provider!==e.backgroundImageProvider&&(i.backgroundImageProvider=t.value?.provider):"ntp.background_image_type"===t.key?t.value!==e.backgroundImageType&&(i.backgroundImageType=t.value):"ntp.news_feed_display"===t.key&&t.value!==e.feedSetting&&(i.feedSetting=t.value)})),Object.keys(i).length&&(Object.assign(e,i),t(i))}))}function N(e){return"Theme"===e.backgroundImageProvider&&"theme"===e.backgroundImageType}function B(e){return!N(e)&&!["Video","BrowserLocal"].includes(e.backgroundImageProvider)&&"off"!==e.feedSetting}const U=(...e)=>e.some((e=>!!o.Al.CurrentFlightSet?.has?.(e)));function $(e){null!==e?u.L.savePreferenceSetting(c.nc.is_ruby,{setting:c.nc.is_ruby,value:e,timestamp:Date.now(),source:"ntp"}):u.L.deleteKeyValueFromPSL(c.nc.is_ruby)}function H(e,t){const n=(0,h.sq)(f,e,t);return $(e),n}function W(e){L("rubyc",e),u.L.getPreferenceSetting(c.nc.is_ruby).then((e=>{e&&L("rubyp",String(e.value))})),E()}const G=()=>U("ruby-ntp"),V=()=>U("prg-rn-codynamic"),q=()=>"true"===(0,r.$o)().getObject("ruby_opt_out_action"),j=()=>U("prg-rn-adduxurl")},16495:function(e,t,n){n.d(t,{H:function(){return g},U:function(){return f}});var i=n(52185),r=n(81489),o=n(5302),a=n(8887),s=n(42833),c=n(44132),d=n(21215),u=n(52965),l=n(98130);function p(e,t){return(e||[]).find((e=>e?.key===t))||null}function h(e,t){const{key:n,value:i,deleteKey:r=!1}=t;let o=e||[];if(r)o=o.filter((e=>e&&e?.key!==n));else{const e=o.findIndex((e=>e?.key===n));if(e>-1)o[e]={...o[e],value:i};else{const e={key:n,value:i};o.push(e)}}return o}class g extends a.N{constructor(){super("ntp.user_nurturing","key","value",{key:"default",value:"none"}),this._latestItems=[],this._initializeCachedItemsPromise=new s.o,this.disablePreferences="edgeChromium"!==(0,l.Yq)().AppType}static getInstance(){return i.Gq.get("__UserNurturingManager__",(()=>new g))}async savePreferenceSetting(e,t,n=!1){if(this.disablePreferences)return!1;try{return await this._initializeCachedItems(),this._updateCachedItems({key:e,value:t,deleteKey:n}),await this._updatePersistedItems({key:e,value:t,deleteKey:n})}catch(t){const n="Failed to store user nurturing preference";return this.logAppError(o.nS9,n,`Key:${e}.Error:${t}`),!1}}async getPreferenceSetting(e,t){if(this.disablePreferences)return null;try{if(await this._initializeCachedItems(),t){const t=await this._getPersistedItemByKey(e);return this._updateCachedItems({key:e,value:t?.value,deleteKey:!1}),t}return this._getCachedItemByKey(e)}catch(t){const n=`Failed to find user preference key: ${e}`;return this.logAppError(o.Aps,n,t),null}}async getClonedPreferenceSetting(e,t){const n=await this.getPreferenceSetting(e,t);return(0,u.Z)(n)}async _initializeCachedItems(){if(this._initializeCachedItemsPromise.wasSet())return this._initializeCachedItemsPromise.getResultAsync();try{this._items=await this.getPreferenceValueFromBrowser()||[],this.checkIfNurturingCampaignsExist(this._items,!0),this._latestItems=(0,u.Z)(this._items)}catch(e){const t="Failed to initialize cached items for UserNurturingManager";this.logAppError(o.Aps,t,e)}this._initializeCachedItemsPromise.set(),this._listenToPreferenceChange()}_getCachedItemByKey(e){return p(this._items,e)}async _getPersistedItemByKey(e){return p(this._latestItems,e)}_updateCachedItems(e){this._items=h(this._items,e)}async _updatePersistedItems(e){const t=this._latestItems;return this.setAndSavePreferenceSetting(h(t,(0,u.Z)(e)))}deleteKeyValueFromPSL(e){this.savePreferenceSetting(e,null,!0)}_listenToPreferenceChange(){(0,d.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onPrefsChanged.addListener((e=>{const t=(e||[]).find((e=>e?.key===this.prefSettingKey));t&&(this.checkIfNurturingCampaignsExist(t.value||[],!1),this._latestItems=(0,u.Z)(t.value||[]))}))}checkIfNurturingCampaignsExist(e,t){const n=e.find((e=>"nurturing_campaigns"===e?.key)),i=n?"1":"0",r=n?.value?.trace_id||-1;t?c.M0.addOrUpdateTmplProperty("nf_usernurturing_init",`${i}_${r}`):c.M0.addOrUpdateTmplProperty("nf_usernurturing_changed_"+ +new Date,`${i}_${r}`)}}const f=(0,r.h)(g)},95603:function(e,t,n){n.d(t,{Jj:function(){return d},QO:function(){return g},U:function(){return f},Uq:function(){return p},Xm:function(){return i},_9:function(){return u},dE:function(){return h},nc:function(){return s},rr:function(){return a},sj:function(){return o},st:function(){return c},ui:function(){return l}});const i={campaigns:"campaigns",feedLayout:"feed_layout",nonDAU7d:"non_dau_7d",nonDAU30d:"non_dau_30d",renderSingleColumn:"render_single_column",wpo:"wpo",wpoLytTmpl:"wpo_lyt_tmpl",topSites:"top_sites",recommendedSites:"recommended_sites",viewport:"viewport",wpo_nx:"wpo_nx",layoutPromotion:"layoutPromotion",layoutHistory:"layoutHistory",sptmarket:"sptmarket",userMuid:"user_muid",rubyTargetedVersion:"ruby_targeted_version",widgetsUpsell:"widgets_upsell",companionAutoOpenDismiss:"cmp_auto_open_dismiss",rubyCookiechangeReason:"ruby_cookie_change"};var r,o,a;!function(e){e.Ntp="ntp",e.Wpo="wpo"}(r||(r={})),function(e){e.MultiColumn="multi",e.SingleColumn="single"}(o||(o={})),function(e){e.apiError="api_error"}(a||(a={}));const s={tscollapsed:"tscollapsed",layout_mode:"layout_mode",left_rail:"left_rail",quick_links_options:"quick_links_options",single_column:"single_column",recommended_sites:"recommended_sites",news_below_searchbox:"news_below_searchbox",ntp_tips:"ntp_tips",search_history:"search_history",current_location_enabled:"current_location_enabled",enable_sponsored_content:"enable_sponsored_content",enable_pulse:"enable_pulse",seen_interest_fre_count:"seen_interest_fre_count",visited_following_feed:"visited_following_feed",dismiss_scroll_down_button:"dismiss_scroll_down_button",breaking_news_dismissed:"breaking_news_dismissed",topsites_open_in_new_tab:"ntp.topsites_open_in_new_tab",show_copilot_suggestions_toggle:"ntp.show_copilot_suggestions_toggle",ruby_ux_history:"ruby_ux_history",ruby_state_history:"ruby_state_history",is_ruby_page:"is_ruby_page",is_ruby:"ntp.is_ruby",ruby_cookie_change_history:"ruby_cookie_change_history"};var c;!function(e){e.User="user",e.Wpo="wpo",e.Lpo="lpo",e.adminPortal="adPortal",e.ntpVisibleTab="ntpVisTab"}(c||(c={}));const d={0:"user",1:"wpo",2:"wpo",3:"adPortal",4:"ntpVisTab"},u={backgroundImageTypePolicy:"ntp.background_type_blocked_by_policy",currentBackgroundImageType:"ntp.background_image_type",hideDefaultTopSites:"ntp.hide_default_top_sites",customBackgroundImageInfo:"ntp.local_background_image",layout:"ntp.layout_mode",quickLinksDisplaySetting:"ntp.quick_links_options",imageOfTheDay:"ntp.show_image_of_day",feeds:"ntp.news_feed_display",greeting:"ntp.show_greeting",showSettings:"ntp.show_settings",verticalTabsCollapsed:"edge.vertical_tabs.collapsed",verticalTabsOpened:"edge.vertical_tabs.opened",singleColumnEnabled:"ntp.single_column.enabled",userNurturingUpdated:"ntp.user_nurturing",hasUserSeenNewFre:"new_device_fre.has_user_seen_new_fre",defaultBrowserSettingEnabled:"browser.default_browser_setting_enabled",showAppLauncher:"ntp.enable_app_launcher",userChoices:"ntp.record_user_choices",selectedFeedPivot:"ntp.selected_feed_pivot",widgetsRegion:"ntp.enable_widgets_region",recommendedWidgetsSettings:"ntp.recommended_widgets_region"};var l,p,h,g;!function(e){e.NotInChinaCoachMarkButton="notInChinaCoachMarkButton",e.FeedbackLink="feedbackLink"}(l||(l={})),function(e){e[e.focused=0]="focused",e[e.inspirational=1]="inspirational",e[e.informational=2]="informational",e[e.custom=3]="custom"}(p||(p={})),function(e){e.MANUAL="manual",e.WPO_OPEN="wpo_open",e.WPO_CLOSE="wpo_close",e.REVERT="revert"}(h||(h={})),function(e){e[e.MANUAL=0]="MANUAL",e[e.WPO_BEFORE_CLOSE=1]="WPO_BEFORE_CLOSE",e[e.WPO_CLOSED=2]="WPO_CLOSED",e[e.WPO_BEFORE_OPEN=3]="WPO_BEFORE_OPEN",e[e.WPO_OPENED=4]="WPO_OPENED",e[e.REVERT_WPO_CLOSE=5]="REVERT_WPO_CLOSE"}(g||(g={}));const f="ntps"},24612:function(e,t,n){n.d(t,{c:function(){return a}});var i=n(88537),r=n(13218),o=n(24318);function a(){if(!r.Al.IsPrerender)return!1;if(r.Al.CurrentFlightSet?.has?.("ruby-ctrlnopre")&&o.FI.isRuby)return!0;if("c"!==r.Al.ClientSettings?.detection?.tier)return!1;const e=(0,i.Hi)(!0),{featUX:t=""}=e||{};return!1===((0,i.hY)(t)??{}).IsCSDAU7dSum}},53448:function(e,t,n){n.d(t,{P6:function(){return d},vT:function(){return u}});var i=n(52),r=n(22624),o=n(95603),a=n(52185),s=n(44132);const c="__storedRecommendedSitesState__";async function d(e){let t=a.Gq.get(c);if(t)return t;if(t=e.showDefault3Rows?"threerows":"tworows",e.enableRecommendedSitesSelection){const e=await async function(){if(!await r.L.isApiAvailableToUse())return null;const e=await r.L.getPreferenceSetting(o.nc.recommended_sites);if(e&&void 0!==e.value)return i.$_[e.value];return null}();e&&(t=e)}return"onerow"===t&&(t="tworows"),s.M0.addOrUpdateTmplProperty("RecommendedSites",t.toString()),a.Gq.set(c,t),t}async function u(e){if(!await r.L.isApiAvailableToUse())return;const t={setting:o.nc.recommended_sites,source:"ntp",timestamp:(new Date).getTime(),value:i.$N[e]};r.L.savePreferenceSetting(o.nc.recommended_sites,t)}},80535:function(e,t,n){n.d(t,{DU:function(){return y},NU:function(){return v},R:function(){return m},bC:function(){return b},jt:function(){return f}});var i=n(52185),r=n(21215),o=n(33779),a=n(5302),s=n(15675),c=n(13218),d=n(24032),u=n(22624),l=n(95603),p=n(5756);const h="__StoredTopSitesState__",g="__TopSitesCollapsibleControlConfig__";function f(e){e&&i.Gq.set(g,e);const t=m();t&&i.Gq.set(g,t)}function m(){try{const e=p.k.getWpoTreatmentsWithType(s._h.topsitesCollapse),t=p.k.getWpoTreatmentsWithType(s._h.topSites),n=[...e||[],...t||[]],r=n?.length>0&&n[0]?.properties?.topSitesCollapsibleControlConfig||void 0;return r?.promoteTopSites2Row&&window.isSSREnabled&&(r.promoteTopSites2Row=!1),i.Gq.set(g,r),r||null}catch(e){const t="Error in getting wpo topSites config";(0,o.H)(a.Od5,t,`error:${e}`)}return null}function y(){try{const e=p.k.getWpoTreatmentsWithType(s._h.topSitesPromotion),t=p.k.getWpoTreatmentsWithType(s._h.topSites),n=[...e||[],...t||[]];if(n?.length>0&&n[0].properties)return n[0].properties}catch(e){const t="Error in getting wpo topSites config";(0,o.H)(a.Od5,t,`error:${e}`)}return null}async function v(e){const t=await u.L.getPreferenceSetting(l.nc.tscollapsed),n=t?.value;(0,r.N)()||S(n);const o=w();if(void 0!==n||!o)return 1===n;const a=i.Gq.get(h);if(void 0!==a)return a;let s=o.collapsibleControlIsDefaultCollapsed;return s&&o.collapseForDefaultInformational&&(s="always"===e.selectedFeedDisplaySetting),i.Gq.set(h,!!s),!!s}function S(e){const t=c.Al.EdgeNTPHeader?.tscollapsed;if(void 0!==t&&t!==e){"true"===(0,d.L)().get("mock-ntp-header")||(0,o.H)(a.sFk,"SSR - Edge header mismatch.",void 0,{...a.sFk.pb,customMessage:`key: tsCollapsed, header: ${t}, state: ${e}`})}}function w(){return i.Gq.get(g)||m()}async function b(){const e=await u.L.getPreferenceSetting(l.nc.tscollapsed),t=e?.value;if((0,r.N)()||S(t),t===l.QO.WPO_BEFORE_OPEN)return!0;if(t===l.QO.WPO_CLOSED||t===l.QO.WPO_BEFORE_CLOSE){const e=w();if(e?.expandForAllLayout)return!0}return!1}},88537:function(e,t,n){n.d(t,{Hi:function(){return l},MG:function(){return h},_6:function(){return g},hY:function(){return p}});var i,r=n(15675),o=n(16495),a=n(95603),s=n(33779),c=n(5302),d=n(44132),u=n(5756);function l(e){try{const t=u.k.getWpoTreatmentsWithType(r._h.uxMessage,e);return t?.length>0&&t[0]?.properties?t[0]?.properties:null}catch(e){const t="Error in getting wpo uxmessge promotion data";(0,s.H)(c.Od5,t,`error:${e}`)}}function p(e=""){return e.split(",").reduce(((e,t)=>{const[n,i]=t.split(":");return"0"!==i&&"1"!==i||(e[n]="1"===i),e}),{})}function h(){const e=l();return!(!e||!e.featUX)&&(d.M0.addOrUpdateTmplProperty("wpopromuxmsg",e.featUX),!0)}async function g(){const e=l(!0),{featUX:t=""}=e||{},n=p(t),i=n.IsCSDAU7dSum;void 0!==i?await o.U.savePreferenceSetting(a.Xm.nonDAU7d,!i):await o.U.savePreferenceSetting(a.Xm.nonDAU7d,null,!0);const r=n.IsCSDAU30dSum;void 0!==r?await o.U.savePreferenceSetting(a.Xm.nonDAU30d,!r):await o.U.savePreferenceSetting(a.Xm.nonDAU30d,null,!0)}!function(e){e.IsCSDAU7dSum="IsCSDAU7dSum",e.IsCSDAU30dSum="IsCSDAU30dSum"}(i||(i={}))},1041:function(e,t,n){n.d(t,{IM:function(){return s},Of:function(){return p},ah:function(){return l},hq:function(){return h}});var i=n(1713),r=n(52),o=n(52185),a=n(44132);async function s(e,t,n,o){let s;switch(e){case!0:s="on";break;case!1:s="off";break;case void 0:s=void 0}if(o?.defaultOnInPartialView){const e=await p();if("peek"===n?.selectedFeedDisplaySetting&&e!==r.Ab.user){const e="on";s!==e&&(s=e,t&&await t("on"===s),await(0,i.RN)({src:r.Ab.default}),a.M0.addOrUpdateTmplProperty("elwidprom","1"))}}else if(o?.enableWidgetsWPOProm){const e=await p(),o=["always","peek"].includes(n?.selectedFeedDisplaySetting);if(e!==r.Ab.user&&o){const e=await d();e?s!==e?(s=e,t&&await t("on"===s),await(0,i.RN)({wgt:void 0,src:r.Ab.wpo}),a.M0.addOrUpdateTmplProperty("wgt_wpo_promoted","1")):(l(void 0),a.M0.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.fg.NoNeedToPromote)):a.M0.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.fg.NoRecommendedData)}else e==r.Ab.user?a.M0.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.fg.UserChoices):o?a.M0.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.fg.InvalidFeedLayout):a.M0.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.fg.Unknown)}else if(o?.defaultOff){const e=await p();if(e!==r.Ab.user){const n="off";s===n&&e!==r.Ab.user_old||(s=n,t&&await t(!1),await(0,i.RN)({src:r.Ab.default}),a.M0.addOrUpdateTmplProperty("wgt-off-prom","1"))}}return"on"===s}const c="__recommendedWidgetsRegionState__",d=async()=>{if(!o.Gq.has(c)){const e=await u();o.Gq.set(c,e)}return o.Gq.get(c)},u=async()=>{const e=await(0,i.e2)();return r.mT[e?.wgt]??void 0},l=async e=>{const t={...await(0,i.e2)(),wgt:e};return await(0,i.RN)(t)},p=async()=>{const e=await(0,i.e2)();return e?.src},h=async e=>{const t={...await(0,i.e2)(),src:e};return await(0,i.RN)(t)}},46840:function(e,t,n){n.d(t,{P:function(){return c}});var i=n(35883),r=n(63070),o=n(59444),a=n(26810),s=n(55052);function c(){i.D.define(r.H.registry),o.MJ.define(a.j.registry),s.Uk.define(a.j.registry)}},19841:function(e,t,n){n.d(t,{D4:function(){return c},Dr:function(){return d},Iz:function(){return s}});var i=n(58106);const r=12,o=32;let a;function s(){return a||((0,i.jU)(r),a=[0,i.xs+o,i._3+o,i.Xn+o,i.xX+o,i.sc+o],(0,i.lE)(),a)}const c=["CS-RESPONSIVE-","CX-RUBY-","CX-GEM-CARD"];const d=new Set(["RESPONSIVE-SD-CARD","CS-CONTENT-CARD","CS-RESPONSIVE-CARD","TrafficCard"])},80667:function(e,t,n){n.d(t,{R1:function(){return c},SG:function(){return s}});var i=n(33779),r=n(5302),o=n(98130),a=n(13218);function s(e,t){o.jG.EnableFiveColLayout=t,o.jG.TrackInfo={sitePage:{page_product:"anaheim",page_type:e.pagetype}}}function c(){if(a.Al.CurrentFlightSet?.has("prg-logautoscroll")){const e=(e,t,n)=>(0,i.H)(r.n8D,`${e} invoked`,void 0,{args:JSON.stringify(t),stack:(new Error).stack}),t=window.scrollTo;window.scrollTo=function(...n){return e("window.scrollTo",n),t.call(this,...n)};const n=window.scrollBy;window.scrollBy=function(...t){return e("window.scrollBy",t),n.call(this,...t)};const o=Element.prototype.scrollIntoView;Element.prototype.scrollIntoView=function(...e){return(0,i.H)(r.n8D,`scrollIntoView invoked on element: ${this.tagName}`,void 0,{element:this.tagName,args:JSON.stringify(e),stack:(new Error).stack}),o.call(this,...e)}}}},91232:function(e,t,n){n.d(t,{k:function(){return s}});var i=n(94660),r=n(19841),o=n(15598),a=n(80329);const s=(e,t)=>({ver:`edgenext.${i.j4.ver}.1`,spec:{...i.j4.spec,wpoData:{clientValue:()=>(0,o.$o)().getItem(e)},breakpoint:{clientValue:()=>(0,a.wk)(window.innerWidth,t||(0,r.Iz)())}}})},12651:function(e,t,n){n.d(t,{O$:function(){return R},xs:function(){return M},iG:function(){return U},ii:function(){return B},fr:function(){return W},mJ:function(){return x},RA:function(){return I},HG:function(){return D}});var i=n(3385),r=n(77820),o=n(47898),a=n(44132),s=n(24025),c=n(98130),d=n(13218),u=n(28123),l=n(28951),p=n(47655),h=n(55447),g=n(5884),f=n(24318),m=n(26156),y=n(242),v=n(21492),S=n(77770),w=n(62301),b=n(62042),C=n(75062),T=n(93240),k=n(19841);function P(){window.standbyClickEventsHandler&&(window.removeEventListener("click",window.standbyClickEventsHandler),window.removeEventListener("auxclick",window.standbyClickEventsHandler),window.removeEventListener("contextmenu",window.standbyClickEventsHandler),delete window.standbyClickEventsHandler)}var A=n(74604);function I(e,t,n){const p=c.jG.CurrentRequestTargetScope&&c.jG.CurrentRequestTargetScope.pageExperiments,h=p&&p.includes("prg-telemetry-trace"),g=i.h.getAppTypeTrackingSystemConfig(d.Al.IsBlendedEnterprise),m=p&&(p.includes("prg-ad-ivq")||p.includes("prg-an-trace")),y="undefined"!=typeof window&&window?.isSSREnabled,v=(0,u.Yc)(y)?void 0:{anonCookieName:c.jG.AuthCookieName};(0,T.Rd)(),f.FI.isRuby,(0,a.uZ)(new C.o({...v,trackingSystems:g,autoCaptureContentView:!1,useEventQueue:!0,ignoreClientAnidCookies:!0,inheritPropertyList:["ext"],inheritByTraversingDOM:!0,memoizeInheritedProperties:!1,enableSendClientLogEvent:m,logElementForLineageFailure:!0,hydrationPromise:n,enableTraceGenerator:h,deferContentViewIntersectionCallbacks:d.Al.IsPrerender,disableLayoutEventManager:p&&p.includes("nolayoutevt"),enableEventsBatching:E(),enableMouseDwellTime:!0,mouseDwellCardTypePrefixs:k.D4,enableViewportOffset:!0,cardsForVPOffset:k.Dr,enableVPOffsetOnClick:!0,enableNoPartialContentView:!0,startDwellOnPageVisible:c.jG.IsHeroNTP,shouldYieldCVCallback:d.Al.IsPrerender||p.includes("npcvyield"),cvIntersectionObserverDelay:p.includes("cvintobs100")?100:p.includes("cvintobs50")&&50,telemetryInitOptions:c.jG.TelemetryInitOptions})),function(e){window.standbyClickEventsHandler&&(e&&e instanceof Promise?e.then((()=>{P()})):P())}(n),F=!1,document.addEventListener("trackvaluesupdated",_);const S=function(e,t){const n="1"===l.cX.getQueryParameterByName("startpage",e),o=l.cX.getQueryParameterByName("firstlaunch",e),s="0"!==l.cX.getQueryParameterByName("dsp",e),u=n||"1"===o?"dhp":"ntp",p=f.FI.isRuby,h="enterprise"===c.jG.CurrentRequestTargetScope.audienceMode,g=c.jG.CurrentRequestTargetScope&&c.jG.CurrentRequestTargetScope.pageExperiments;let m="msedgntp";p&&g&&!g.includes("prg-rm-rocid")?m=function(e,t){const n=t?"dhp":"ntp";if(e)return`edgent${n}ruby`;return`edg${n}ruby`}(h,n):h?m="entnewsntp":c.jG.CurrentRequestTargetScope.os===r.Q.Xbox?m="xboxntp":n&&(m="msedgdhp");e&&c.jG.IsHeroNTP&&(m=l.cX.getQueryParameterByName("ocid",e));const y=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)");let v=!1;y&&(v=!!y.matches,y.addEventListener("change",(e=>{a.M0.updatePageMetadata({page:{theme:e.matches?"dark":"light"}})})));const S={pageCanvas:"Browser",pageConfiguration:null,pageName:("1"===o?"FRE":p&&"ruby")||"default",pageOcid:m,pageProduct:d.Al.IsBlendedEnterprise?"entnews":"anaheim",pageTheme:v?"dark":"light",pageHas3PSearch:!s,pageContentDomainId:"340",pageContentSubCategory:"antp",pageContentVertical:"homepage"},w={pageType:u,pageUrl:e,pageViewType:(0,A.vi)()},b=i.h.getAppTypeTelemetryContract(S,t,null,w),C={...b,page:{...b.page,isSearchAB:!1}};return C}(e,t);if(i.h.initPage(S),o.A.subscribe(o.U.Initialized,$),"false"===l.cX.getQueryParameterByName("enableTrack",e)&&a.M0.disableTrackingSystem(s.G.All),window.updatedRequestId&&a.M0.updateRequestId(window.updatedRequestId),window.swFeatTmplContents){const{aid:e,newRid:t,responseCached:n}=window.swFeatTmplContents;a.M0.addOrUpdateTmplProperty("sw-rid-log",`${e}|${t}|${n}`)}window.dispatchEvent(new CustomEvent("telemetryInitialized"))}function E(){return d.Al.IsPrerender?["AppError","ContentView"]:c.jG.BatchedEvents}function R(e){const t=()=>{if("visible"===document.visibilityState)return;if(!("1"===l.cX.getQueryParameterByName("startpage",location.href)))return;const t=(0,y.Ou)();t&&(t["DHP.Conversion.Start"]=performance.now());const n=d.Al.ClientSettings;n.pagetype="ntp",(0,p._Y)(n);const i=new URL(location.href);i.searchParams.delete("startpage"),window.history.replaceState({},document.title,i.toString());const r={page:{url:window.document.URL,type:"ntp"}};B()||(r.page.ocid="msedgntp"),a.M0.updatePageMetadata(r),a.M0.addOrUpdateTmplProperty("ntpconv",e?"1":"0")};e?t():(0,m.Wt)(t)}function M(e){const t=()=>{if("visible"===document.visibilityState)return;if("1"===l.cX.getQueryParameterByName("startpage",location.href))return;const t=(0,y.Ou)();t&&(t["NTP.Conversion.Start"]=performance.now());const n=new URL(location.href);n.searchParams.append("startpage","1"),window.history.replaceState({},document.title,n.toString());const i=d.Al.ClientSettings;i.pagetype="dhp",(0,p._Y)(i);const r={page:{url:window.document.URL,type:"dhp"}};B()||(r.page.ocid="msedgdhp"),a.M0.updatePageMetadata(r),a.M0.addOrUpdateTmplProperty("dhpconv",e?"1":"0")};e?t():(0,m.FC)(t)}function x(){const{name:e,type:t,product:n}=a.M0.getPageMetadata().contract.page;(0,v.nm)("pageType",t),(0,v.nm)("pageName",e),(0,v.nm)("pageProduct",n)}let L,F;function D(e){(0,h.ll)()==g.uD.Init&&(0,h.nl)(g.uD.Sticky);a.M0.updatePageMetadata({feed:{layout:"multicol"}},!0);const t=function(e){switch(e){case 1:return"productivityHub";case 5:return`following/${(0,h.ll)()}`;default:return"myfeed"}}(e);a.M0.updatePageMetadata({feed:{id:t}})}function O(){if("visible"===document.visibilityState){const e=(0,w.lF)(!1);F&&!e&&(a.M0.addEventTypeToForceQueueList("ContentView"),a.M0.flush(!0,void 0,"ContentView")),document.removeEventListener("visibilitychange",O)}}function _(){document.removeEventListener("trackvaluesupdated",_),F=!0,L?N():O()}function N(){a.M0.waitForContentVisibilityObserverInit().then((()=>{a.M0.removeEventTypeFromForceQueueList("ContentView"),a.M0.flush(void 0,"ContentView",void 0)})),a.M0.flush(void 0,void 0,"ContentView")}function B(){return c.jG.CurrentRequestTargetScope&&"enterprise"===c.jG.CurrentRequestTargetScope.audienceMode}function U(){if(B()){const e=c.jG.ResolvedAccountInfo;return e&&e.account_type&&"AAD"===e.account_type}return!1}function $(e){if(e){o.A.get(o.U.CookieConsentStatus)!==b._.NotRequired&&a.M0.disableTrackingSystem(s.G.Comscore)}}function H(e){switch(e){case 1:return"entnewshp";case 5:return"following";default:return"default"}}function W(e){let t;"enterprise"===c.jG.CurrentRequestTargetScope.audienceMode?t={msnocid:"entnewsntp",pageName:H(e),pageProduct:"entnews"}:c.jG.CurrentRequestTargetScope.os===r.Q.Xbox?t={msnocid:"xboxntp",pageName:H(e),pageProduct:r.Q.Xbox}:5===e&&a.M0.updatePageMetadata({page:{name:H(e)}},!0),t&&a.M0.updatePageMetadata({page:{ocid:t.msnocid,name:t.pageName,product:t.pageProduct}},!0)}L=!1,F=!0,d.Al.IsPrerender&&"visible"!==document.visibilityState?(document.addEventListener("visibilitychange",O),(0,S.lr)().then((()=>{L=!0,F&&(document.removeEventListener("visibilitychange",O),N())}))):L=!0},21246:function(e,t,n){n.d(t,{o:function(){return p}});var i=n(34960),r=n(5302),o=n(44132),a=n(23946);const s=/^fe-b\S+fe-b$/,c=/^fe-repeat\S+fe-repeat$/,d=e=>e.nodeType===Node.COMMENT_NODE&&(s.test(e.textContent)||c.test(e.textContent)),u=(e,t="")=>{const n=[];for(const i in e){const r=e[i],o=t+">"+`[nodeidx:${i}]${r.nodeName}`;if(d(r))n.push({text:r.textContent,path:o.toLowerCase()});else{const e=l(r,o);n.push(...e)}}return n},l=(e,t="")=>{const n=[],i=t+">"+e.nodeName;if(e.shadowRoot?.childNodes.length){const t=u(e.shadowRoot?.childNodes,i+">shadowRoot");n.push(...t)}if(e.childNodes){const t=u(e.childNodes,i);n.push(...t)}return n},p=(e,t)=>{if(!window.isSSRCompleted)return;const n=(0,i.F)(performance.now());let s=!1;const c=()=>u("10s timeout"),d=()=>u("beforeunload");function u(a){if((0,i.F)(performance.now())-n<1e4||s||t.wasSet())return;s=!0,window.removeEventListener("beforeunload",d);const c=performance.now(),u=l(e,"body"),p=performance.now()-c;u.length&&o.M0.sendAppErrorEvent({...r.fLy,message:"SSR unhydrated marker detected.",pb:{...r.fLy,customMessage:`${u.length} unhydrated marker detected. Trigger condition: ${a}.`+(u.length>10?`Unhydrated markers are truncated due to lenghth ${u.length} > 10.`:""),hydrationMarkers:u.slice(0,10),scanCost:p}})}(0,a.c)((()=>window.requestIdleCallback(c)),1e4),window.addEventListener("beforeunload",d)}},65500:function(e,t,n){n.d(t,{U:function(){return a},s:function(){return o}});var i=n(68052),r=n(44132);function o(e){let t;return null!=e&&(t=(0,i.d)(e),null!=t)?t:null}function a(e,t){if(!t.length)return;const n=t.filter((e=>"Viewed"===e.type)),i=n.length>0?n[n.length-1].ts:0,o="layoutDemotion"===e?"Demotion":e;r.M0.addOrUpdateTmplProperty(`last${o}View`,i+"")}},3385:function(e,t,n){n.d(t,{h:function(){return W}});var i=n(74604),r=n(72263),o=n(62201),a=n(82218),s=n(47898),c=n(13218),d=n(98130),u=n(33294),l=n(28123),p=n(98303),h=n(86117),g=n(33779),f=n(5302),m=n(44132),y=n(71903),v=n(40373),S=n(39399),w=n(24025),b=n(94769);b.kP&&(window.telemetryEventsClear=()=>{window.telemetryEvents=[]},window.telemetryEventsFlush=()=>{const e={...window.telemetryEvents};return window.telemetryEventsClear(),e});const C=function(e){b.kP&&(window.telemetryEvents=window.telemetryEvents||[],window.telemetryEvents.push(e))},T=[{type:w.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.com/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:w.G.Debug,mapper:new S.k,transporterConfig:{callback:C}},{type:w.G.Debug,mapper:new y.P,transporterConfig:{callback:C}},{type:w.G.Debug,mapper:new v.O,transporterConfig:{callback:C}}],k=[{type:w.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.cn/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:w.G.Debug,mapper:new S.k,transporterConfig:{callback:C}},{type:w.G.Debug,mapper:new y.P,transporterConfig:{callback:C}},{type:w.G.Debug,mapper:new v.O,transporterConfig:{callback:C}}],P=[{type:w.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.com/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:w.G.Debug,mapper:new S.k,transporterConfig:{callback:C}},{type:w.G.Debug,mapper:new y.P,transporterConfig:{callback:C}},{type:w.G.Debug,mapper:new v.O,transporterConfig:{callback:C}}],A=[{type:w.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.cn/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:w.G.Debug,mapper:new S.k,transporterConfig:{callback:C}},{type:w.G.Debug,mapper:new y.P,transporterConfig:{callback:C}},{type:w.G.Debug,mapper:new v.O,transporterConfig:{callback:C}}],I=[{type:w.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],E=[{type:w.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],R=[{type:w.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],M=[{type:w.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],x=[{type:w.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],L=[{type:w.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],F=[{type:w.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],D=[{type:w.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:w.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:w.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],O=[{type:w.G.SuperApp,transporterConfig:{enableConsoleLog:!0}}],_=[{type:w.G.SuperAppBridge,transporterConfig:{enableConsoleLog:!0}}],N=[{type:w.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}}],B={};B.enterprise=R,B.enterpriseCN=M,B.enterpriseMicrosoftStart=F,B.enterpriseCNMicrosoftStart=D,B.int=T,B.intCN=k,B.intMicrosoftStart=P,B.intCNMicrosoftStart=A,B.prod=I,B.prodCN=E,B.prodMicrosoftStart=x,B.prodCNMicrosoftStart=L,B.superApp=O,B.superAppWeb=N,B.superAppBridge=_;var U=n(21215);var $=n(32598),H=n(54584);class W{static initPage(e,t,n){const i=c.Al&&c.Al.ClientSettings||{},{pageGenTime:r=null,detection:o=null}=i||{},{tier:a}=o||{};m.M0.initPage(e,n||d.jG.ActivityIdLowerCaseNoHypens,d.jG.BuildVersion,d.jG.FrontDoorMuid,r,a),t&&(0,h.b1)().then((()=>m.M0.initScrollPerformanceTrackers())),s.A.subscribe(s.U.Initialized,G)}static getAppTypeTelemetryContract(e,t,n,i){const r=i?.syncStorage??u.bN;let o={aadState:e.userAadState,isSignedIn:e.userSignInStatus,isSso:e.userSsoStatus,loginState:e.userLoginState};if((0,l.Yc)())try{const e=(0,u.pB)(r);if(e){const t=V(e);t&&(o={...o,...t})}}catch(e){(0,g.OO)(e,f.pdr,"digital-id: failed to retrieve digital ID cache")}return this.buildTelemetryContract(e,t,n,o,i)}static async getAppTypeTelemetryContractAsync(e,t,n,i){const r=i?.asyncStorage??(0,u.GW)(u.y1);let o={aadState:e.userAadState,isSignedIn:e.userSignInStatus,isSso:e.userSsoStatus,loginState:e.userLoginState};if((0,l.Yc)())try{const e=await(0,u.dJ)(r);if(e){const t=V(e);t&&(o={...o,...t})}}catch(e){(0,g.OO)(e,f.pdr,"digital-id: failed to retrieve digital ID cache (async)")}return this.buildTelemetryContract(e,t,n,o,i)}static buildTelemetryContract(e,t,n,i,r){const o=c.Al?.ClientSettings??{},a=c.Al?.Diagnostics??{},{mc:s={}}=a||{},{geo_citycf:u,geo_countrycf:l,requestTrailInfo:h={},travelInfo:g={},detection:f={},modes:m}=o??{},{cdn:y=null}=h??{},{cnex:v=null}=g??{},{ip:S}=f??{},w=function(e,t){let n;switch(e){case"explicit":{const e="homePage"===d.jG.AppType;n={cookieSource:e?"marketPref":"ntps",cookieValue:e?t&&t.marketPref:t&&t.ntps};break}case"implicitNew":case"implicitExisting":case"implicitReset":{const e=decodeURI(t?.spt)||"",[i,r]=function(e){if(!e)return["",""];const t=e.split("|");return[t[2]||"",t[7]||""]}(e);n={cookieSource:"sptmarket",cookieValue:e,mktgeoCountryCode:i,mktgeoCountryCodeCf:r};break}}return n}(d.jG.MarketDetectionType,s),b="true"===o.browser?.ismobile||"phone"===o.deviceFormFactor,C="true"===o.static_page,T=r?.locale??d.jG.CurrentMarket;let k;const P=r?.pageUrl??((0,U.N)()?document.URL:(0,p.DO)(t)),A=P&&(P.includes("vptest=1")||P.includes("reqsrc=vp")),I=W.hasFlight("prg-1sw-logbat"),E=W.hasFlight("tellog10")||void 0,R=m?.uxMode||void 0;return!A&&I&&(k={isRestrictClientLogSize:E,maxClientLogSize:6144}),{browser:{isMobile:b},flight:{id:void 0},locale:{mkt:T,lang:d.jG.MarketRequestInputLanguage,region:d.jG.MarketRequestInputRegion,geo_cc:d.jG.MarketRequestInputGeoCountry,mktReason:d.jG.MarketDetectionType},page:{appType:d.jG.AppType,canvas:e.pageCanvas,config:e.pageConfiguration,content:{title:r?.pageContentTitle??((0,U.N)()?document.title:""),...!q(e.pageContentCategory)&&{category:e.pageContentCategory},...!q(e.pageContentSubCategory)&&{subcategory:e.pageContentSubCategory},...!q(e.pageContentDomainId)&&{domainId:e.pageContentDomainId},...!q(e.pageContentId)&&{id:e.pageContentId},...!q(e.pageContentVertical)&&{vertical:e.pageContentVertical}},isAdEnabled:!1,isAutoRefresh:!1,isJSEnabled:!0,isStatic:C,name:e.pageName,ocid:e.pageOcid,product:e.pageProduct,type:r?.pageType||o.pagetype,url:P,viewType:r?.pageViewType??W.trackCallbacks(n),...!q(e.pageTheme)&&{theme:e.pageTheme},...!q(e.pageHas3PSearch)&&{has3PSearch:e.pageHas3PSearch},uxMode:R},debug:{cetoId:d.jG.ActivityIdLowerCaseNoHypens||null,cdn:y,geoCityCf:u,geoCountryCf:l,langMismatch:d.jG.MarketMismatchDetail||void 0,detectedDetails:w||void 0,hasTravelerException:v||void 0,detectedIP:S||void 0},...(!q(e.userSignInStatus)||!q(e.userSsoStatus)||!q(e.userAadState))&&{user:i},featureFlags:k}}static getAppTypeTrackingSystemConfig(e){const t=function(e,t,n,i){const r=e&&e.includes("microsoftstart.com")?"MicrosoftStart":"";let o;return o="prod"===t?i?"enterprise":"prod":"int",B[`${o}${n?"CN":""}${r}`]}(c.Al&&c.Al.ClientSettings&&c.Al.ClientSettings.domain,d.jG.Environment,d.jG.IsChinaCompliance,e);return(0,H.E)(t),t}static trackCallbacks(e){let t="";switch((0,i.Bn)().currentColumnArrangement){case e.singleColSupported&&r.K$.c1:t="size1column";break;case!e.singleColSupported&&r.K$.c1:case r.K$.c2:t="size2column";break;case r.K$.c3:t="size3column";break;case r.K$.c4:t="size4column";break;case e.fiveColSupported&&r.K$.c5:t="size5column"}return t}static hasFlight(e){const t=d.jG.CurrentRequestTargetScope&&d.jG.CurrentRequestTargetScope.pageExperiments,n=(0,$.Mx)(t);return n&&n.includes(e)}}function G(e){if(e){s.A.get(s.U.CookieConsentProvider)===o.i.OneTrustBanner&&window.addEventListener(a.C,(()=>{const e=m.M0.getPageMetadata();e&&e.contract&&e.contract.page&&(e.contract.page.consentChanged="occ")}))}}function V(e){if(!e)return;const t=function(e){if(e)switch(e.at){case"AAD-AL":return"AAD-AL";case"AAD":return"AAD";case"MSA":return"MSA";case"NA":return"NA";default:return}}(e);return{...{aadState:"AAD"===t?1:0,isSignedIn:"MSA"===t,isSso:["AAD","AAD-AL","MSA"].includes(t)},loginState:t,wid:e.wid?e.wid.replace(/^m-/,"").toUpperCase():void 0}}function q(e){return null==e}},54584:function(e,t,n){n.d(t,{f:function(){return c},E:function(){return a}});var i=n(39399);var r=n(24025),o=n(50747);function a(e){!e||(0,o.c)()<=0||e.push({type:r.G.Automation,mapper:new i.k,transporterConfig:{callback:s}})}function s(e){c.dispatch({type:r.G.OneDS,payload:e})}const c=new class{constructor(){this.history=[],this.listeners=[]}dispatch(e){this.history.push(e),this.listeners.forEach((t=>t(e)))}listen(e){return this.listeners.push(e),this.history.forEach(e),{remove:()=>{const t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}}}}},9414:function(e,t,n){n.d(t,{z:function(){return I}});var i=n(90695),r=n(33117),o=n(72465),a=n(5658),s=n(89799),c=n(43852);var d=n(18538),u=n(43225),l=n(31802),p=n(21215),h=n(21438),g=n(42122),f=n(7677),m=n(42833),y=n(54584),v=n(50747),S=n(9791);const w=new m.o;let b;const C=async e=>await k({args:e}),T=(0,S.Z)((async()=>await k({uxValidationOptions:{wholePageValidation:!0}})));async function k(e){let t,n;const i=performance.now();return await async function(e,t){const n=performance.now();try{const t=await w.getResultAsync();await e(t)}catch(e){const i=(0,f.g_)(e);t({status:"aborted",groupKey:h.Rc.other.displayKey,error:i,errorString:(0,f.n)(i),timeTaken:P(n)},P(n))}}((async i=>{!e.args&&e.uxValidationOptions&&await i.enableUXValidation(e.uxValidationOptions),({results:t,next:n}=i.getValidationResultsSync(e.args))}),(e=>t=[e])),{results:t,next:n,timeTaken:P(i)+(e.args?0:b)}}function P(e){return Math.round(10*(performance.now()-e))/10}async function A(e){e&&await w.getResultAsync(),window._telemetryValidationEnabled=e,window.dispatchEvent(new CustomEvent("telemetryValidationInitStatus"))}function I(e,t,h,f,m){(0,i.g7)(e,t),(0,r.n1)(),function(e,t,n,i,r){(0,a.TG)(e,n,t,i,r),(0,s.ny)((0,c.oA)("fetch","fetch",!0)),(0,o.DY)((0,c.oA)("custom-em","custom-em",!0))}(m,f,h,(()=>(0,i.FH)(!0)),(()=>(0,i.FH)(!1))),(0,i.dj)().traceLevel>=d.Y.high&&(E("RAF",requestAnimationFrame),E("RAFTimer",u.c)),(0,p.N)()&&(!async function(){const e=(0,v.c)();if(0===e)return void await A(!1);let t,i;const r=performance.now();try{const{telemetryValidationPackage:e}=await n.e("telemetry-validation").then(n.bind(n,85455)),r={telemetryPayloadListener:y.f},o=await e.initializePackage(r);({error:t,manager:i}=o)}catch(e){t=e}finally{b=P(r)}if(i){if(w.set(i),e>=3){const t=4===e;await i.enableUXValidation({loadToolsUX:t})}}else{const e=t?.message||"No error was provided.";w.setError(t=new Error(`TelemetryValidationManager initialization error: ${e}`))}t&&g.k.logError(t.message),A(!!i)}(),window._getAppPerfTrace=l.c)}function E(e,t){const n=(0,c.oA)(e,e);n&&function e(){const{endMeasure:i}=n.startMeasure("frame");t((()=>{i(),e()}))}()}(0,p.N)()&&(window._getValidationResults=C,window._getWholePageValidationResults=T)},87496:function(e,t,n){n.d(t,{sG:function(){return $},ql:function(){return H},If:function(){return U}});var i=n(86117),r=n(242),o=n(5302),a=n(33779),s=n(22556),c=n(64527);function d(e){window.windowsPerfMarker&&window.windowsPerfMarker(e)}var u=n(82193),l=n(90061),p=n(34254),h=n(93441),g=n(30739),f=n(73264),m=n(82588),y=n(98130),v=n(16986),S=n(47581),w=n(523),b=n(77016),C=n(17681),T=n(13218);const k={didPreload:!1,timeTakenForRevealInMs:0,pageRevealed:!0};function P(){const e=b._.getInstance().rootReducer.connector(w._8);if(!e||!T.Al.IsPreload)return Promise.resolve(k);const t=e.getCurrentState();if(t&&t.pageRevealedData){const e=t.pageRevealedData;return Promise.resolve(e)}return new Promise((e=>{C.X.pageVisibilityChange.registerObserver((t=>{const n=t.params[0];e(n)}))}))}var A=n(77770);const I={prefix:"SW",startTime:"StartTime",navigationFetchTime:"NavigationFetchTime",navigationCacheReadTime:"NavigationCacheReadTime",navFeedHandlerComplete:"NavFeedHandlerComplete",navFeedHandlerWillRespond:"NavFeedHandlerWillRespond",navFeedHandlerDidRespond:"NavFeedHandlerDidRespond",navFeedHandlerStart:"NavFeedHandlerStart",navFeedCacheDuration:"NavFeedCacheDuration",navParseDuration:"NavParseDuration",navFeedCachedStatus:"NavFeedCachedStatus",navFeedCacheReadTime:"NavFeedCacheReadTime",navFeedFetchTime:"NavFeedFetchTime",navFeedCacheOpenDuration:"NavFeedCacheOpenDuration",navCachedResponseAge:"NavCachedResponseAge",navRoutingReason:"NavRoutingReason",navRoutingDuration:"NavRoutingDuration",clientNavCacheReadStart:"clientNavCacheReadStart",clientNavFetchStart:"clientNavFetchStart"};function E(e){return[I.prefix,e].filter((e=>e.length>0)).join(".")}var R=n(90631),M=n(98341);var x=n(44132);const L={hit:1,"hit-mem":2,miss:0};function F(e){const t=(0,r.Th)();D(t)&&(e[E(I.startTime)]=function(e){return e.requestStart-e.workerStart}(t),e[E(I.navigationFetchTime)]=function(e){const t=e.transferSize;if(0===t||300===t)return-1;return e.responseStart-e.requestStart}(t),e[E(I.navigationCacheReadTime)]=function(e){const t=e.transferSize;return 0===t||300===t?e.responseStart-e.requestStart:-1}(t),async function(e){if(!D())return;const t=await async function(){return(0,M.T)({type:"NAV_PERF_DATA"})}();if(!t)return;t.cacheLookupStatus&&(e[R.kc]=L[t.cacheLookupStatus]);let n={};if(t&&t.swTimeOrigin){const e=t.swTimeOrigin;t.resourceTiming=O(t.resourceTiming,e),n=O(t,e,"SW."),n.clientTimeOrigin=performance.timeOrigin}x.M0.sendLoadTimeEvent({markers:n}),window._swTimings=n}(e))}function D(e){return!!(e=e||(0,r.Th)())&&Boolean(e.workerStart)}function O(e,t,n=""){if(!e)return;const i={};for(const r in e){const o=e[r];"number"!=typeof o||o<0?i[`${n}${r}`]=o:r.endsWith("Start")||r.endsWith("End")?i[`${n}${r}`]=Math.round(o+t-performance.timeOrigin):r.endsWith("Time")?i[`${n}${r}`]=Math.round(o):i[`${n}${r}`]=o}return i}var _=n(21215),N=n(44653),B=n(42632);function U(e,t,n){if(!(0,_.N)())return;const s=(0,p.S0)();s&&t===i.oN.Primary&&h.g.updateAboveTheFoldVisuallyReady.getActionSender(s).send(performance.now());const c=t===i.oN.Primary,d=(0,i.bO)(t),u=(0,r.Ou)();if(u.IncompleteMarkers=d?.join(","),(0,g.L)())return void e([]);let f=[];const m=c?o.LwW:o.Nxj;f=c?(0,i.bP)():(0,i.gh)();const y=(0,i.Gb)(),v=y.marker||"None",S=y.value||"None";let w=", Visual dependency callback was unavailable.";if(n){const e=n();w=e.length?`, Incomplete visual dependencies: ${JSON.stringify(e)}.`:", No pending visual dependencies."}if((0,a.H)(m,"Missing perf markers",`Missing perf markers: ${JSON.stringify(d)}${w} Last Marked: ${v} ${S}`),window?.dispatchEvent(new Event("PerfMarkMissErr")),window.isSSRCompleted&&d.includes("TTF")){const e=[...(0,l.SM)().entries()].map((([e,t])=>`${e}:${t}`)).join(",");(0,a.H)(o.V2e,"Missing TTF marker in SSR page",`Elements that are still in top-down hydration process: ${e}`)}const b=(0,i.OZ)();b&&c&&d.includes(`TTVR.${b}`)&&((0,a.H)(o.MmB,"Expected feed timed out while loading",`Expected feed timed out while loading: ${b}`),u&&console.log(JSON.stringify(u))),window.renderCacheEnabled&&c&&(0,N.cB)(),e(f)}async function $(e,t={}){const n=(0,r.Ou)(),{onAfterPageTimingsUpdated:o,disableLoadTimeEvent:a,reportEntityMetrics:l}=t,p=(0,r.Th)();if(p){const{domComplete:e,loadEventStart:t,responseStart:i,domainLookupEnd:r,domainLookupStart:o,domInteractive:a,domContentLoadedEventStart:d,domContentLoadedEventEnd:u,fetchStart:l,connectEnd:h,connectStart:g,workerStart:f,responseEnd:m,requestStart:v,unloadEventStart:S,unloadEventEnd:w,type:b,systemEntropy:C,secureConnectionStart:T,redirectCount:k,redirectEnd:P,redirectStart:A}=p;n.timeToFirstByte=i,n.timeToDomComplete=e,n.timeToOnLoad=t,n.domainLookupTime=r-o,n.timeToFetchStart=l,n.timeToWorkerStart=f,n.connectStart=g,n.connectTime=h-g,n.requestStart=v,n.requestTime=i-v,n.responseStart=i,n.responseTime=m-i,n.requestResponseTime=m-v,n.fetchTime=m-l,n.swInitTime=l-f,n.swFetchTime=o-l,n.timeToUnload=w-S,n.timeToInteractive=a,n.domContentLoadedEventStart=d,n.domContentLoadedEventEnd=u,n.navigationType=b,n.systemEntropy=C,n.timeToSecureConnection=T-g,n.redirectStart=A,n.redirectEnd=P,n.redirectCount=k,function(e){e.buildVer=y.jG.BuildVersion||-1}(n),(0,s.fL)(n),(0,c.Oq)(n),(0,c.bg)(n),(0,c.H7)(n),(0,c.zV)(n),(0,c.Am)(n),(0,s.Z0)(n),(0,c.bM)(n),(0,s.xC)(n)}(0,c.dw)(n),(0,c.iA)(n);for(const t of e){const e=t[0];n[e]||(n[e]=t[1])}const h=(0,i.sx)();h&&(n.ReasonForTTVR=h);const w=n[v.dd];w&&(d(v.jh),d(v.H$),(0,S.Eu)(w),(0,s.Ct)(n)),f.U.getConfigTimings(n),F(n),n.wasBrowserHiddenAtLeastOnce=(0,g.L)(),(0,u.j)(),o&&o(),(0,A.wY)(),Promise.all([P(),(0,A.lr)()]).then((()=>{(0,S.fv)(n),a||(0,B.J)(window,{reportEntityMetrics:l})})),(0,m.mS)({id:"PostTtvr",type:"command"})}async function H(e,t,n){const i=(0,r.Ou)(),o=(0,r.Y9)();if((e=e.filter((e=>!(e[0]in i)))).forEach((e=>{const t=e[0];t in i||(o[t]=e[1],i[t]=e[1])})),m.yb){const e=await(0,m.ot)({id:"perfmarkers"},4e3);if(e&&e.fetched){const t=e.payload;t&&t["WW.MyFeed"]&&(t.FeedRequest=t["WW.MyFeed"]),Object.assign(o,e.payload),Object.assign(i,e.payload)}}o.TimeToSendSecondaryPerfMarkers=Math.round(performance.now()),t&&t(),n||Promise.all([P(),(0,A.lr)()]).then((()=>{(0,B.J)(window,{isSecondaryBeacon:!0})}))}},23946:function(e,t,n){n.d(t,{c:function(){return p},f:function(){return h}});var i=n(87496),r=n(34960),o=n(33779),a=n(5302),s=n(86117),c=n(44132),d=n(89658),u=n(42833),l=n(21215);function p(e,t){let n,i=t,o=(0,r.F)(performance.now());const a=()=>{const t=(0,r.F)(performance.now());i-=t-o,i<=0?e():(o=t,requestAnimationFrame((()=>{n=window.setTimeout(a,i)})))};return requestAnimationFrame((()=>{n=window.setTimeout(a,i)})),()=>{clearTimeout(n)}}async function h(e){if(!(0,l.N)())return;const t=new u.o;e=e||{};let n=!1;async function r(n){p?.(),c.M0.config.autoCaptureContentView=!0,c.M0.observeElementTree(document);const r=!!e.pageLoadEventsAvailableCallback&&!e.pageLoadEventsAvailableCallback();r||c.M0.scheduleContentViewEvent(d.NS.Load);const{contentViewTimeoutOverride:s,onBeforeNotifyCallback:u,reportEntityMetrics:l,maxValidTTVR:h}=e;if(s&&c.M0.setContentViewTimeout(s),h){const e=n.find((e=>"TTVR"===e[0])),t=e?.[1];null!=t&&("number"!=typeof t||isNaN(t)||t<0||t>h)&&(e[1]=void 0,(0,o.H)(a.nln,`Invalid TTVR: ${t}. Expected a number between 0 and ${h}.`,void 0,{ttvr:t}))}(0,i.sG)(n,{onAfterPageTimingsUpdated:u&&(()=>{u(n)}),disableLoadTimeEvent:r,reportEntityMetrics:l}),t.set()}let p;const h=window.setTimeout((()=>{n=!0,(0,i.If)((e=>r(e)),s.oN.Primary,e.incompleteVisualDependencyCallback)}),e.timeoutOverride||2e4);return p=()=>window.clearTimeout(h),(0,s.Nv)().then((e=>{n||r(e)})),await t.getResultAsync()}},65685:function(e,t,n){n.d(t,{S:function(){return d}});var i=n(242),r=n(86117),o=n(87496),a=n(21215),s=n(13218),c=n(16986);async function d(e){if(!(0,a.N)())return;if(e=e||{},s.Al.IsPrerender){(0,i.Y9)()[c.C7]=1}let t=!1;return new Promise((n=>{const i=setTimeout((()=>{n(),t=!0,(0,o.If)(a,r.oN.Secondary,e.incompleteVisualDependencyCallback)}),e.timeoutOverride||2e4);async function a(t){i&&clearTimeout(i);const n=!!e.pageLoadEventsAvailableCallback&&!e.pageLoadEventsAvailableCallback();(0,o.ql)(t,e.onBeforeNotifyCallback&&(()=>{e.onBeforeNotifyCallback(t)}),n)}(0,r.e3)().then((e=>{n(),t||a(e)}))}))}},50747:function(e,t,n){n.d(t,{c:function(){return o}});var i=n(21215),r=n(22680);const o=(0,n(9791).Z)((()=>{if((0,i.N)()){const e=(0,r.zp)();if(e.includes("item=tvux:1"))return 4;if(e.includes("reqsrc=vp"))return e.includes("item=tvwp:1")?2:3;{const t=e.match(/item=tv:(\d+)/)?.[1];if(t)return parseInt(t)}}return 0}))},42632:function(e,t,n){n.d(t,{J:function(){return l},O:function(){return c}});var i=n(44132),r=n(242),o=n(90695),a=n(5302),s=n(18875);const c={};let d=!1;function u(){c.primaryLoadTimeEventSent=!1,c.secondaryLoadTimeEventSent=!1,d=!1}function l(e,t={}){const{isSecondaryBeacon:n,reportEntityMetrics:s}=t,u=Object.assign({},n?(0,r.Y9)():(0,r.Ou)());d||!s&&!n||((0,o.Xn)(u),d=!0),Object.keys(u).length&&(n?c.primaryLoadTimeEventSent||(u.isPrimaryLoadTimeEventSent=!1):u.TimeToSendPrimaryPageTimings=Math.round(performance.now()),e.liteLoadTimeSentKey&&e.liteLoadTimeSentKey.forEach((e=>{delete u[e]})),function t(){try{if(i.M0&&i.M0.getPageMetadata()){const t=(0,r.A1)()||{};if(n){if(c.secondaryLoadTimeEventSent)return;c.secondaryLoadTimeEventSent=!0}else{if(c.primaryLoadTimeEventSent||e.__peregrine_liteTtvrSent)return;c.primaryLoadTimeEventSent=!0,e.__peregrine_normalTtvrSent=!0}i.M0.sendLoadTimeEvent({markers:u,deviceCapabilities:t});const o=(0,r.Ou)();o&&n&&(o.telemetryBeaconFireTime=Math.round(performance.now()))}else e.setTimeout(t,500)}catch(e){i.M0&&i.M0.sendAppErrorEvent({...a.IU$,message:"Unable to send load time event"})}}())}u(),(0,s.U)(u)},13425:function(e,t,n){n.d(t,{L:function(){return r}});var i=n(24709);class r{static#e=this.addVisuallyReadyDependencies=new i.C("AddVisuallyReadyDependencies");static#t=this.markVisuallyReadyComplete=new i.C("MarkVisuallyReadyComplete")}},87950:function(e,t,n){n.d(t,{g:function(){return u}});var i,r=n(86117),o=n(39607),a=n(93441),s=n(34254);!function(e){e.VISUALLY_READY_WILL_FIRE="visuallyReadyWillFire",e.VISUALLY_READY_DID_FIRE="visuallyReadyDidFire",e.PAGE_REVEAL_START_WILL_FIRE="pageRevealStartWillFire",e.PAGE_REVEAL_START_DID_FIRE="pageRevealStartDidFire",e.PAGE_REVEAL_COMPLETE_WILL_FIRE="pageRevealCompleteWillFire",e.PAGE_REVEAL_COMPLETE_DID_FIRE="pageRevealCompleteDidFire"}(i||(i={}));var c=n(30666),d=n(13425);class u extends c.e{constructor(){super(...arguments),this.ttvrMarkers=[],this.getIncompleteVisualDependencies=()=>{const{visuallyReadyDependencies:e}=this.getCurrentState(),t=[];return e.forEach((e=>{e.visuallyReady||t.push(e.experienceType)})),t}}addVisuallyReadyDependencies(e){d.L.addVisuallyReadyDependencies.getActionSender(this).send(e),e.forEach((e=>{this.ttvrMarkers.push(e),(0,o.w)(e,!0)}))}registerVisuallyReadyObserver(){a.g.updateVisuallyReadyTiming.registerObserver((e=>{const t=e.params[0];if(!t)return;const{experienceType:n,endTime:i}=t;if(null!=i){this.getCurrentState().visuallyReadyDependencies.has(n)&&this.markVisuallyReadyComplete(n)}}))}registerMarkersIfNecessary(e,t,n=!1){if(!(this.ttvrMarkers&&0!==this.ttvrMarkers.length||e&&0!==e.length||t&&0!==t.length))return;const i={};i.TTVR=t?[...this.ttvrMarkers,...t]:this.ttvrMarkers,e&&(i.TTF=e),n&&(i.TTPR=[...this.ttvrMarkers],i.TTPR.push("OverlayRemoval")),(0,r.IO)(i)}registerSecondaryPerfMarkers(e){(0,r.Xl)(e)}registerFeedPerfMarker(e){(0,r.tW)(e)}async markVisuallyReadyComplete(e){const{visuallyReadyDependencies:t}=this.getCurrentState();if(t.get(e).visuallyReady)return;d.L.markVisuallyReadyComplete.getActionSender(this).send(e);for(const e of t.values())if(!e.visuallyReady)return;const n=(0,s.S0)();n&&(await(0,s.FQ)(i.VISUALLY_READY_WILL_FIRE),performance.measure("VisuallyReady"),a.g.updateAboveTheFoldVisuallyReady.getActionSender(n).send(performance.now()),await(0,s.FQ)(i.VISUALLY_READY_DID_FIRE))}}},55451:function(e,t,n){n.d(t,{b:function(){return r}});var i=n(77016);const r=()=>{const e=i._.getInstance().rootReducer.connectors().find((e=>e.namespace.indexOf("ExperienceTracker")>=0));if(!e)return null;const t=e.getCurrentState().visuallyReadyDependencies;return t&&0!==t.size?[...t.keys()]:null}},99683:function(e,t,n){n.d(t,{P:function(){return a}});var i=n(38947),r=n(13425),o=n(77770);class a{reduce(e,t){if(!e)return{visuallyReadyDependencies:new Map};if(!t)return e;let n=!1;const a={...e};return n=n||i.G.handleAction(t,r.L.addVisuallyReadyDependencies,(e=>{e&&e.forEach((e=>{e&&!a.visuallyReadyDependencies.has(e)&&a.visuallyReadyDependencies.set(e,{experienceType:e,visuallyReady:!1})}))})),n=n||i.G.handleAction(t,r.L.markVisuallyReadyComplete,((e,t)=>{if(e){const t=a.visuallyReadyDependencies.get(e);t&&(t.visuallyReady=!0,"GridViewFeed"!==e&&"WaterfallViewFeed"!==e||(0,o.Bj)())}})),n?a:e}}},51683:function(e,t,n){n.r(t),n.d(t,{ExperienceTrackerEdgeNextDataConnector:function(){return E},ExperienceTrackerEdgeNextDataReducer:function(){return R.P},ToolingInfo:function(){return M}});var i=n(523),r=n(70041),o=n(91661),a=n(34254),s=n(93441),c=n(87950),d=n(55451),u=n(26156),l=n(24318),p=n(96315),h=n(98130),g=n(55447),f=n(13218),m=n(31693),y=n(77770),v=n(82928),S=n(77820),w=n(22680),b=n(21215),C=n(44132);const T={eventType:o.Gg.aboveTheFoldVisuallyReady},k={eventType:o.Gg.pageVisuallyReady},P={eventType:o.Gg.belowTheFoldTransitionStart},A="prg-gamingfeed",I=[p.IY.ENUS,p.IY.ENGB,p.IY.ENAU,p.IY.ENCA,p.IY.ENIN];class E extends c.g{constructor(e,t,n,i,r,o,a){super(e,t,n,i,r,o,a),this.initializePromise=this.initialize()}waitForInitialize(){return this.initializePromise}async initialize(){const e=await(0,v.oU)(i.RL),t=await e.getLayoutStateAsync();this.milestoneDataConnector=(0,a.S0)();const n=[],c=[],p=["TTF"],E=h.jG.IsUCBased?void 0:["SearchBox"];let{renderCacheConfig:R,feedContentSourceMap:M,enableGridViewFeed:x}=this.config||{};R=R||{};const L=(0,g.$z)(),F=!x&&(0,u.$5)(L);x||(C.M0.addOrUpdateTmplProperty("tracker_selectedPivot",JSON.stringify(L)),C.M0.addOrUpdateTmplProperty("tracker_shouldUseWaterfallFeed",JSON.stringify(F)));let D=F?r.F11:r.wge;l.FI.isRuby&&(D=r.T5A);const O=t.customBackgroundImageInfo?.hasImage||!1,_=t.imageOfTheDayEnabled&&"custom"!==t.currentBackgroundImageType||"custom"===t.currentBackgroundImageType&&O,N={eventType:o.Gg.visuallyReady,experienceType:r.zK8};l.FI.isRuby?c.push(r.LoE):c.push(r._lg),h.jG.IsUCBased||c.push(r.zK8),"off"===t.selectedQuickLinksDisplaySetting||h.jG.IsUCBased||c.push(r.gLP),!_||l.FI.isRuby||h.jG.IsUCBased||c.push(r.q31);const B=t.enableWidgetsRegion&&"kids"!==h.jG?.CurrentRequestTargetScope?.audienceMode&&!h.jG.IsHeroNTP&&!h.jG.IsUCBased,U=h.jG.IsHeroNTP&&(this.isFlightActive("prg-hero-abnav")||(0,w.zp)()?.toLowerCase()?.includes("ocid=wind_spot_2"));(B||U)&&n.push((0,a.Qz)(N,r.UtR));const $=this.isFlightActive("ntp-bgdsbl-dfr")&&!_&&!h.jG.IsUCBased;h.jG.IsUCBased||(n.push((0,a.Qz)(N,r.gLP)),$||n.push((0,a.Qz)(N,r.q31)));const H="kids"===f.Al?.ClientSettings?.audienceMode,W=("always"===t.selectedFeedDisplaySetting||"peek"===t.selectedFeedDisplaySetting)&&!H,G=M&&1===(0,m.f)(M),V=h.jG&&h.jG.CurrentRequestTargetScope&&h.jG.CurrentRequestTargetScope.os===S.Q.Xbox,q=2===(0,m.f)({gaming:2}),j=3===(0,m.f)({play:3});if(W&&!H){const e=await h.jG.unsupportedEnterpriseCloud;if(l.FI.isRuby||!G||e)if(V&&q)this.isFlightActive(A)||I.includes(h.jG.CurrentMarket)?c.push(r.wge):c.push(r.KPU);else if(j);else{const e=D;(!l.FI.isRuby||!f.Al.IsPrerender||this.config.enableRubyPrerenderFeed)&&c.push(e),this.registerFeedPerfMarker(e);(0,b.N)()&&window.ssrAdData?.length||(p.push("TTNativeAd.Request"),p.push("TTNativeAd.Serve"),p.push("NativeAd.ApiDuration"),p.push("NativeAd.RenderReady"),p.push("TTVR.NativeAd"))}else c.push(r.D7S),c.push(r.cdX),c.push(r.yLt),c.push(r.ZyT),c.push(r.o4h),(this.isFlightActive("prg-m365news-t")||this.isFlightActive("prg-3snews-t"))&&c.push(r.iXc),h.jG.IsUCBased||n.push((0,a.Qz)(N,r.D7S))}const z={eventType:o.Gg.visuallyReady,experienceType:D},K={eventType:o.Gg.visuallyReady,experienceType:r.KPU},Q={eventType:o.Gg.visuallyReady,experienceType:r.ieX};let J,X,Y;switch(J=V&&q&&!this.isFlightActive(A)?K:j?Q:z,t.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":n.push((0,a.Qz)(T,r.l0e)),n.push((0,a.Qz)(T,r.rnA)),U||l.FI.isRuby||n.push((0,a.Qz)(P,r.X$j));break;default:n.push((0,a.Qz)(T,r.l0e)),n.push((0,a.Qz)(T,r.rnA)),U||l.FI.isRuby||n.push((0,a.Qz)(k,r.X$j))}W?(X=N,Y=G?T:J):(X=T,Y=T);const Z=W?T:P;n.push((0,a.Qz)(Z,r.mLM));const ee=[r.nXC,r.N6,r.pru,r.XIX,r.j9W,r.Tu3,r.fyI,r.hRd,r.NuV,r.aJp,r.KfJ,r.UE,r.iOK,r.vG7,r.tJU,r.RGQ,r.bN3,r.vPc,r.yHC,r.kvh,r.hn8,r.Kfg,r.Tk6,r.Xz8,r.lvU,r.BKx,r.bru,r.udo,r.z82,r.GzM,r.opx,r.u8s,r.bOQ,r.veX,r.VnC,r.$38,r.Lfv],te=new Set([r.tJU,r.bru,r.$38]);for(const e of ee)t.enableWidgetsRegion&&te.has(e)||n.push((0,a.Qz)(X,e));const ne=[r.gOp,r._9V,r.rC1,r.l1V,r.CzA,r._jE,r.PcW,r.isq,r.vFd,r.nmZ,r.J1W,r.nUs,r.gDP,r.YD1,r.Czh,r.ihw,r.EeD];l.FI.isRuby||this.isFlightActive("ntp-plch-hdr")||(ne.push(r.g3x),ne.push(r.EYD));for(const e of ne)n.push((0,a.Qz)(Y,e));n.push((0,a.Qz)(T,r.qZt)),n.push((0,a.Qz)(T,r.eMK)),n.push((0,a.Qz)(T,r.Fe8)),n.push((0,a.Qz)(k,r.WGZ)),n.push((0,a.Qz)(k,r.wr4));const ie=[r.OTW,r.mo8,r.wwX,r.ItY,r.JiM,r.Es2,r.lIM,r.ISs,r.jK4,r.wRm,r.utF,r.ySJ];!l.FI.isRuby&&!this.isFlightActive("ntp-plch-hdr")||h.jG.IsUCBased||(ie.push(r.g3x),ie.push(r.EYD)),$&&ie.push(r.q31);for(const e of ie)n.push((0,a.Qz)(k,e));this.addVisuallyReadyDependencies(c),(0,b.N)()&&window._pageTimings&&(window._pageTimings.visualDependenciesConfigs=c);const re=h.jG&&h.jG.CurrentRequestTargetScope&&"dhp"==h.jG.CurrentRequestTargetScope.pageType?this.config.entireRiverStaleMinutes:this.config.dhpEntireRiverStaleMinutes;let oe=(0,d.b)();if((0,b.N)()&&window._pageTimings&&(window._pageTimings.visualDependenciesConnector=oe,F&&(oe=c)),(0,y.Qc)(oe,this.config.prerenderForceRefresh,re,this.config.sdCardStaleMinutes),this.registerSecondaryPerfMarkers(p),(0,b.N)()){const e=window?.isSSREnabled||h.jG.IsUCBased?n.filter((e=>e.deferralInfo!==T&&e.deferralInfo!==N&&e.deferralInfo!==J)):n;s.g.updateExperienceLoadDeferralState.getActionSender(this.milestoneDataConnector).send(e)}this.registerVisuallyReadyObserver();const ae=h.jG.IsUCBased?[]:["SearchBox"];this.registerMarkersIfNecessary(ae,E,f.Al.IsPrerender)}isFlightActive(e){return!!f.Al?.CurrentFlightSet?.has(e)}}var R=n(99683);const M={experienceConfigSchema:{}}},68178:function(e,t,n){n.d(t,{S1:function(){return s},Yc:function(){return a}});var i=n(98130),r=n(22680);function o(){const e=(0,i.Yq)();return e.WidgetAttributes?.propertyBag?.theme||new URLSearchParams((0,r.zp)()).get("theme")}function a(){if(!window?.matchMedia)return;const e=o();if(e)return"dark"===e;const t=window.matchMedia("(prefers-color-scheme: dark)");return t?!!t.matches:void 0}function s(e){return!(!e?.useMobile||!e?.isDarkModeForMobile)}},65517:function(e,t,n){n.d(t,{P5:function(){return d},Ve:function(){return c},Yw:function(){return s},dw:function(){return a},m0:function(){return o}});var i=n(33442),r=n(92531);const o="#000000",a="#FFFFFF",s=(0,i.l$)((()=>o))(r.ZP),c=(0,i.s5)((()=>o))(r.ZP),d=(0,i.$B)((()=>a))(r.ZP)},72263:function(e,t,n){n.d(t,{GQ:function(){return p},K$:function(){return i},Nm:function(){return S},QM:function(){return b},aK:function(){return w},eH:function(){return T},hg:function(){return f},q7:function(){return g},rA:function(){return c},vW:function(){return C}});var i,r=n(58106),o=n(52185),a=n(59465),s=n(42166);!function(e){e.c1="c1",e.c2="c2",e.c3="c3",e.c4="c4",e.c5="c5"}(i||(i={}));const c={c1:1,c2:2,c3:3,c4:4,c5:5},d="__minViewportWidthOverrides__",u="__columnArrangementDefinitions__",l="__columnArrangementMap__",p=()=>(o.Gq.get(u)||y(),o.Gq.get(u)),h=()=>(o.Gq.get(l)||y(),o.Gq.get(l));function g(e){o.Gq.set(d,e)}function f(){const e=p(),t=h();if(a.pf.fiveColSupported()&&4===e.length){const n=new m(i.c5,r.sc);e.push(n),t[i.c5]=n}}class m{constructor(e,t,n){this.arrangement=e,this.contentSizePx=t,this.isFirstBreakpoint=n}get minViewportWidthPx(){if(this.isFirstBreakpoint)return 0;const e=o.Gq.get(d);if(e){const t=e.get(this.arrangement);if(t)return t}return this.contentSizePx+v}}function y(){const e=[];e.push(new m(i.c1,r.xs,!0)),e.push(new m(i.c2,r._3)),e.push(new m(i.c3,r.Xn)),e.push(new m(i.c4,r.xX)),a.pf.fiveColSupported()&&e.push(new m(i.c5,r.sc));const t={};for(const n of e)t[n.arrangement]=n;o.Gq.set(u,e),o.Gq.set(l,t)}const v=32;!function(){const e=[0],t=p();for(let n=1;n<t.length;n++)e.push(t[n]?.minViewportWidthPx)}();function S(e){return h()[e].contentSizePx}function w(e,t){const n=[],i=p(),r=h();if(e){const t=r[e],i=t?.minViewportWidthPx;i>0&&n.push(`(min-width: ${(0,s.a)(i)})`)}if(t){const e=r[t],o=i.indexOf(e);o<i.length-1&&n.push(`(max-width: ${(0,s.a)(i[o+1]?.minViewportWidthPx-1)})`)}return n.join(" and ")}function b(e){return w(e,e)}function C(e,t){const n=w(e,t);return n?"@media "+n:""}function T(e){return C(e,e)}},80287:function(e,t,n){n.d(t,{g:function(){return o}});const i=1<<24,r=/\s+/g;const o=new class{rgbNumberToCssHexColor(e){let t=null;return"number"==typeof e&&e>=0&&e<i&&(t=this.rgbNumberToCssHexColorCore(e)),t}parseColor(e){if(e)return this.parseHexColor(e)||this.parseRgbaColor(e)}parsedColorToNumber(e,t){return e&&e.r<<16|e.g<<8|e.b||t}grayScale(e){const t=e.r,n=e.g,i=e.b;return this.isValidColorValue(t)&&this.isValidColorValue(n)&&this.isValidColorValue(i)?Math.min(255,Math.round(.299*t+.587*n+.114*i)):255}isValidColorValue(e){return!isNaN(e)&&null!=e&&e>=0&&e<=255}rgbNumberToCssHexColorCore(e){return"#"+(i|e).toString(16).slice(1)}parseHexColor(e){const t=e&&e.replace("#",""),n=parseInt(t,16);if(isNaN(n))return null;const i=t.length;return 3===i?{r:17*(n>>8),g:17*(n>>4&15),b:17*(15&n),a:1}:6===i||8===i?{r:n>>16&255,g:n>>8&255,b:255&n,a:6===i?1:(n>>24&255)/255}:null}parseRgbaColor(e){if(!e)return null;const t=e.replace(r,"").match(/^(?:rgba?)\(((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?)(?:,((:?\d*\.)?\d+))?\)$/);if(t){const e=t[4];return{r:this.normalizeColor(t[1],255,!0),g:this.normalizeColor(t[2],255,!0),b:this.normalizeColor(t[3],255,!0),a:e?this.normalizeColor(e,1,!1):1}}return null}normalizeColor(e,t,n){let i=parseFloat(e);return isNaN(i)?0:(i=e.indexOf("%")>=0?Math.max(0,Math.min(100,i))*t/100:Math.max(0,Math.min(t,i)),n?Math.round(i):Math.round(100*i)/100)}}},58106:function(e,t,n){n.d(t,{Iw:function(){return D},L:function(){return E},M7:function(){return I},My:function(){return V},O7:function(){return $},OE:function(){return f},SP:function(){return F},Se:function(){return R},VD:function(){return M},Xn:function(){return p},_3:function(){return l},_s:function(){return U},ev:function(){return _},f5:function(){return x},iN:function(){return m},jU:function(){return G},lE:function(){return H},nL:function(){return B},nk:function(){return q},qt:function(){return L},sc:function(){return g},tr:function(){return W},uL:function(){return O},xX:function(){return h},xs:function(){return u}});const i=300,r=624,o=948,a=1272,s=1596,c=1900,d=24;let u=i,l=r,p=o,h=a,g=s,f=c,m=d,y=348,v=348,S=348,w=348,b=348,C=272,T=272,k=272,P=272,A=272,I=400,E=824,R=1248,M=1672,x=2096,L=i,F=r,D=o,O=a,_=s,N=null,B=612,U=924,$=1236;function H(){m=d,u=i,l=r,p=o,h=a,g=s,f=c}function W(e){y=e[0].max,C=e[0].min,v=e[1].max,T=e[1].min,S=e[2].max,k=e[2].min,w=e[3].max,P=e[3].min,b=e[4].max,A=e[4].min}function G(e,t){const n=[];for(let i=0;i<6;i++)n.push(u*(i+1)+e*i+2*(t||0));t&&(u=n[0]),l=n[1],p=n[2],h=n[3],g=n[4],f=n[5],m=e}function V(e){L=C,I=y,F=2*T+e,E=2*v+e,D=3*k+2*e,R=3*S+2*e,O=4*P+3*e,M=4*w+3*e,_=5*A+4*e,x=5*b+4*e,m=e}function q(e,t){const n=[];for(let i=0;i<4;i++)n.push(300*(i+1)+e*i+2*t+25);N=n[0],B=n[1],U=n[2],$=n[3]}},74604:function(e,t,n){n.d(t,{Bn:function(){return l},vi:function(){return h}});var i=n(72263),r=n(80329),o=n(20654),a=n(98303),s=n(21215),c=n(52185);const d="__FastBreakpointManager__";class u{get currentColumnArrangement(){return this.indexToStandardConverter(this.breakpointTracker.currentBreakpoint())}constructor(e){this.useRequestIsolatedTracker=!1,this.callbackMap=new Map,this.refreshBreakpoints(e)}refreshBreakpoints(e){const t=[0],n=(0,i.GQ)();(0,i.hg)();for(let e=1;e<n.length;e++)t.push(n[e]?.minViewportWidthPx);this.breakpointTracker.breakpoints=t,this.breakpointTracker.defaultBreakpoint=void 0!==e?(0,a.Nd)(e.data.breakpoint,"breakpoint"):0}set breakpoints(e){if(this.breakpointTracker.breakpoints=e,r.R1&&Array.isArray(r.R1)){const t=r.R1.length;for(let e=0;e<t;e++)r.R1.pop();e.forEach((e=>r.R1.push(e)))}}get breakpoints(){return this.breakpointTracker.breakpoints}updateBreakpointsBasedFromContainerWidth(e){const t=(0,i.GQ)();if(e>=t[3].contentSizePx)return;const n=[];for(let i=0;i<this.breakpoints.length;i++)(0===i||e>=t[i].contentSizePx)&&n.push(t[i].contentSizePx);this.breakpoints=n}subscribe(e){const t=t=>{e(this.indexToStandardConverter(t))};this.callbackMap.set(e,t),this.breakpointTracker.subscribe(t)}unsubscribe(e){this.breakpointTracker.unsubscribe(this.callbackMap.get(e)),this.callbackMap.delete(e)}unsubscribeAll(){this.callbackMap.forEach((e=>{this.breakpointTracker.unsubscribe(e)})),this.callbackMap.clear()}indexToStandardConverter(e=0){const t=(0,i.GQ)();return t&&e>=t.length&&t[t.length-1]?t[t.length-1].arrangement:t[e].arrangement}get breakpointTracker(){return!(0,s.N)()&&this.useRequestIsolatedTracker?c.Gq.get("__FastBreakpointManager_breakpointTracker__",(()=>new o.Z.constructor)):o.Z}}const l=(e,t)=>(t&&c.Gq.set(d,new u(e)),c.Gq.get(d,(()=>new u(e))));const p="__FastBreakpointManager_viewType__",h=()=>{let e=null;switch(l().currentColumnArrangement){case i.K$.c1:e="size1column";break;case i.K$.c2:e="size2column";break;case i.K$.c3:e="size3column";break;case i.K$.c4:e="size4column";break;case i.K$.c5:e="size5column";break;default:return c.Gq.get(p,(()=>null))}return c.Gq.set(p,e),e}},90061:function(e,t,n){n.d(t,{$L:function(){return S},Bg:function(){return d},NU:function(){return y},SM:function(){return k},ZH:function(){return h},_U:function(){return l},a5:function(){return w},bE:function(){return f},iA:function(){return u},l_:function(){return g},po:function(){return v},zb:function(){return I}});var i=n(242),r=n(86117),o=n(42833),a=n(21215),s=n(52185);const c="defer-hydration",d="needs-hydration",u=window.location.search.includes("ssrhydrateperf"),l=new Map,p=e=>t=>{if(!t.hasAttribute(e))return Promise.resolve();const n=new o.o;return new MutationObserver(((i,r)=>{t.hasAttribute(e)||(n.set(),r.disconnect())})).observe(t,{attributeFilter:[e]}),n.getResultAsync()},h=p(c),g=p(d),f=(e,t=!1)=>{if(!(0,a.N)())return{start:()=>{},markEnd:()=>{}};const n=`${e}.start`;return{start:()=>performance?.mark(n),markEnd:(r="end",o=t)=>{const a=`${e}.${r}`;performance?.mark(a),performance?.measure(`${e}.${r}:duration`,n,a),o&&((0,i.Ou)()[`${e}.${r}:duration`]=performance?.getEntriesByName(`${e}.${r}:duration`)[0].duration)}}};let m=new Set;const y=e=>m=new Set(e.map((e=>e.toLocaleLowerCase()))),v=e=>{l.clear(),e.forEach((e=>{l.set(e.toLocaleLowerCase(),{selfHydrationComplete:new o.o,topDownHydrateComplete:new o.o})}))},S=e=>{e.forEach((e=>{const t=e.toLocaleLowerCase();l.get(t)?.selfHydrationComplete.set(),l.get(t)?.topDownHydrateComplete.set()}))};var w;!function(e){e[e.Immediate=0]="Immediate",e[e.Never=1]="Never",e[e.IdleAfterTtvr=2]="IdleAfterTtvr",e[e.OnInteraction=3]="OnInteraction",e[e.OnHover=4]="OnHover",e[e.OnPageResize=5]="OnPageResize"}(w||(w={}));const b=["click","keydown"],C=["mouseenter","focusin"],T=Symbol("topDownHydratingComponents"),k=()=>s.Gq.get(T,(()=>new Map)),P=e=>{const t=k(),n=(t.get(e)??0)+1;t.set(e,n)},A=e=>{const t=k(),n=(t.get(e)??0)-1;n>0?t.set(e,n):t.delete(e)};async function I(e,t,n={}){const i=e.hasAttribute(c);if(i){t?.start(),e.removeAttribute(c);const i=e.tagName.toLocaleLowerCase();P(i),await g(e).then((()=>{n.onHydrationCallback?.(e),t?.markEnd("selfHydrationComplete")})),l.get(i)?.selfHydrationComplete.set()}let o;o=e.hasAttribute("needs-recreation")?[]:Array.from(e.shadowRoot?.children??[]).concat(Array.from(e.children));return Promise.all(o.map(((t,i)=>{let o;const a=t.tagName.toLocaleLowerCase(),s=new AbortController,c=()=>{if(!s.signal.aborted)return s.abort(),m.has(a)?o=f(`${a}:hydration`,!0):u&&(o=f(`${e.tagName.toLocaleLowerCase()}>${a}[${i}]`,!1)),I(t,o,n)},d={once:!0,passive:!0,capture:!0,signal:s.signal},l=n.hydrationModes?.[a];if(1!==l?.mode){if(!Array.isArray(l?.mode))return c();l?.markTtvr?.(t);for(const e of l.mode)switch(e){case 2:(0,r.b1)().then((()=>requestIdleCallback(c)));break;case 3:b.forEach((e=>{t.addEventListener(e,c,d)}));break;case 4:C.forEach((e=>{t.addEventListener(e,c,d)}));break;case 5:window.addEventListener("resize",c,d)}}else l?.markTtvr?.(t)}))).then((()=>{if(i){t?.markEnd("topDownHydrateComplete");const n=e.tagName.toLocaleLowerCase();A(n),l.get(n)?.topDownHydrateComplete.set()}}))}},38300:function(e,t,n){n.d(t,{Bs:function(){return f},E7:function(){return g},EH:function(){return m},Eg:function(){return h},Lr:function(){return i},S7:function(){return p},Se:function(){return S},WX:function(){return y},Wi:function(){return u},ZG:function(){return s},d5:function(){return r},hE:function(){return o},il:function(){return c},mw:function(){return v},rO:function(){return l},yV:function(){return d}});const i={PrivacyUrl:"https://go.microsoft.com/fwlink/?LinkID=286759",SamDomain:"https://srtb.msn.com/",SamEndpoint:"auction",SamOpenRtbEndpoint:"auctionopenrtb",LeadgenEndpoint:"leadgenads",AppId:"msnappid",PublisherId:"msn",Ecasession:"init",RiverRegion:"river",RiverDoubleWide:"river-dbl",RiverHalfTextOnly:"river-half-textonly",RiverHalf:"river-half",ReservedRiver:"resriver",UserOptOut:"userOptOut",UserOptOutOptions:"userOptOutOptions",DefaultPartnerCookieSyncTimeout:500,BulkCookieSyncTimeout:1e3,WaitForAdResponseAfterWPOResponseTimeout:1500,DefaultContentServiceBaseUrl:"https://assets.msn.com/content/",SamOpenRTBMinTimeout:800,LeadgenAdServiceTimeout:3e3},r={river:"oneriver.main",infopane:"oneriver.spartan.infopane","infopane-tab":"oneriver.spartan.tabinfopane",rivert:"oneriver.maint"},o={BeaconFormatDecoded:"decoded",BeaconFormatEncoded:"encoded",BeaconTypeAdServed:"adserved",BeaconTypeClick:"click",BeaconTypeJsTracker:"jsTracker",BeaconTypeVisibility:"visibility",BeaconTypeVideoProgress:"videoProgress",StartEvent:"start",FirstQuartileEvent:"firstquartile",ThirdQuartileEvent:"thirdquartile",MidPointEvent:"midpoint",CompleteEvent:"complete",ProgressEvent:"progress",UserActionEvent:"userAction"};var a;!function(e){e.Click="click",e.Ready="ready",e.Play="play",e.Pause="pause",e.Ended="ended",e.Telemetry="telemetry",e.VolumeChange="volumechange",e.TimeUpdate="timeupdate",e.Error="error",e.CanPlay="canplay",e.CanPlayThrough="canplaythrough"}(a||(a={}));const s={CMSListServiceUrl:"v1/cms/api/amp/Document/",CMSContentServiceURl:"view/v1/Preview/",DefaultProviderName:"Microsoft"},c={ContentType:"application/json",Method:"POST",CacheControl:"no-cache",Skipsessioncall:"false",ContentTypeKey:"Content-Type",FlightIdKey:"x-ms-flightId",CacheControlKey:"Cache-Control",ClientIdKey:"X-MSEdge-ClientID",MarketKey:"X-MSEdge-Market",AuthCookieNameKey:"x-ms-authCookieName",Timeout:3e3,BCPCookieKey:"BCP",UserAgent:"User-Agent",AdsNumberLineKey:"X-ms-numberline"},d={MSAOptOut:"msaoptout",BrowserOptOut:"TOptOut",AppAnonCookieExist:"aace",TaboolaSessionCookieName:"ecasession",CookieDomain:"msn.com",AnonCookieName:"ANON",LiverampEnvelopeId:"adslrid"},u={"de-de":"BBGgbuP","en-gb":"BBI4NMr","en-us":"BBI4MeJ","it-it":"BBH0fea","de-at":"BBIbKRf","de-ch":"BBH6mkD","pl-pl":"BBGgsgw","tr-tr":"BBH3vBx","es-es":"BBGdmuQ","en-au":"BBGfT6j","es-ar":"BBH69zf","es-cl":"BBH6qTU","es-co":"BBH3TQV","es-pe":"BBIbVzn","es-mx":"BBGg7xs","pt-br":"BBI4jJ6","en-ca":"BBI4FN9","he-il":"BBIbHNd","fr-ch":"BBIfDNl","nl-be":"BBH6zcN","fr-be":"BBIclrE","fr-fr":"BBI4XBF","nl-nl":"BBGgoUg","pt-pt":"BBH3qlj","zh-cn":"BBPRWnl","ja-jp":"AAvs5xw","ko-kr":"AAvrTXp","en-xl":"AAxzSQi","es-us":"AAuAfA8","fr-ca":"BBH6Awm","es-xl":"BBIfH5i","cs-cz":"BBPwecC","da-dk":"BBGKGmb","el-gr":"BBIc8WA","fi-fi":"BBH6Cse","hu-hu":"BBPw6XX","nb-no":"BBI4EVt","ru-ru":"BBH3gvW","sv-se":"BBH3vHp","ar-ae":"BBIf1cG","ar-eg":"BBIcggw","ar-sa":"BBIc6wN","en-ae":"BBIbBRO","en-ie":"BBIclgh","en-za":"BBIc5NR","en-in":"BBGeThK","en-sg":"BBIfqX9","en-nz":"BBIc483","zh-hk":"BBIbPBb","hi-in":"BBH85g2","mr-in":"BBU7J93","te-in":"BBU7JcP","bn-in":"BBU7Qw4","id-id":"BBIc9Ls","th-th":"BBIbPH4","vi-vn":"BBIcbQS","es-ve":"BBIcaTp","fr-xl":"AAD4nFo","en-my":"BBIclH7","en-ph":"BBIcbaP","zh-tw":"BBH3qpv"},l={"de-de":"Gesponsert","en-gb":"Sponsored","en-us":"Sponsored","it-it":"Sponsorizzato","de-at":"Gesponsert","de-ch":"Gesponsert","pl-pl":"Sponsorowane","tr-tr":"Sponsorlu","es-es":"Patrocinado","en-au":"Sponsored","es-ar":"Patrocinado","es-cl":"Patrocinado","es-co":"Patrocinado","es-pe":"Patrocinado","es-mx":"Patrocinado","pt-br":"Patrocinado","en-ca":"Sponsored","he-il":"ממומן","fr-ch":"Sponsoroitu","nl-be":"Gesponsord","fr-be":"Sponsoroitu","fr-fr":"Sponsoroitu","nl-nl":"Gesponsord","pt-pt":"Patrocinado","zh-cn":"赞助","ja-jp":"スポンサー","ko-kr":"광고","en-xl":"Sponsored","es-us":"Patrocinado","fr-ca":"Sponsoroitu","es-xl":"Patrocinado","cs-cz":"Sponzorováno","da-dk":"Sponsoreret","el-gr":"Με χορηγό","fi-fi":"Sponsoroitu","hu-hu":"Hirdetés","nb-no":"Sponset","ru-ru":"Спонсируемые ссылки","sv-se":"Sponsrad","ar-ae":"مموّل","ar-eg":"مموّل","ar-sa":"مموّل","en-ae":"Sponsored","en-ie":"Sponsored","en-za":"Sponsored","en-in":"Sponsored","en-sg":"Sponsored","en-nz":"Sponsored","zh-hk":"贊助廠商","hi-in":"प्रायोजित केलेली","mr-in":"प्रायोजित केलेली","te-in":"ప్రాయోజితులు","bn-in":"স্পনসর করা","id-id":"Disponsori","th-th":"ได้รับการสนับสนุน","vi-vn":"Được tài trợ","es-ve":"Patrocinado","fr-xl":"Sponsoroitu","en-my":"Sponsored","en-ph":"Sponsored","zh-tw":"贊助廠商"},p={"de-de":"Anzeige","en-gb":"Ad","en-us":"Ad","it-it":"Ann.","de-at":"Anzeige","de-ch":"Anzeige","pl-pl":"Reklama","tr-tr":"R","es-es":"Publicidad","en-au":"Ad","es-ar":"Patrocinado","es-cl":"Patrocinado","es-co":"Patrocinado","es-pe":"Patrocinado","es-mx":"Patrocinado","pt-br":"Publicidade","en-ca":"Ad","he-il":"מודעה","fr-ch":"Sponsorisé","nl-be":"Advertentie","fr-be":"Sponsorisé","fr-fr":"Sponsorisé","nl-nl":"Advertentie","pt-pt":"Pub","zh-cn":"广告","ja-jp":"PR","ko-kr":"AD","en-xl":"Ad","es-us":"Patrocinado","fr-ca":"Pub","es-xl":"Patrocinado","cs-cz":"Reklama","da-dk":"Annonce","el-gr":"Ad","fi-fi":"Mainos","hu-hu":"Hird.","nb-no":"Annonse","ru-ru":"Реклама","sv-se":"Annons","ar-ae":"إعلان","ar-eg":"إعلان","ar-sa":"إعلان","en-ae":"Ad","en-ie":"Ad","en-za":"Ad","en-in":"Ad","en-sg":"Ad","en-nz":"Ad","zh-hk":"廣告","hi-in":"एड","mr-in":"जाहिरात","te-in":"ప్రకటన","bn-in":"বিজ্ঞাপন","id-id":"Ad","th-th":"Ad","vi-vn":"Ad","es-ve":"Patrocinado","fr-xl":"Sponsorisé","en-my":"Ad","en-ph":"Ad","zh-tw":"廣告"},h=["ja-jp","ko-kr","zh-cn"],g={MyFeedPivotId:"oneriver.myfeed",StripeMyFeedPivotId:"stripe.myfeed",EditInterestPivotId:"oneriver.editinterests"};var f;!function(e){e[e.AdBuffering=1]="AdBuffering",e[e.ContentBuffering=2]="ContentBuffering",e[e.AdError=10]="AdError",e[e.AdPlayStarted=11]="AdPlayStarted",e[e.AdPlayCompleted=13]="AdPlayCompleted",e[e.AdSkipped=15]="AdSkipped",e[e.AdTimeout=16]="AdTimeout",e[e.AdPause=17]="AdPause",e[e.AdResume=18]="AdResume",e[e.ContentError=20]="ContentError",e[e.ContentStart=21]="ContentStart",e[e.ContentContinue=22]="ContentContinue",e[e.ContentComplete=23]="ContentComplete",e[e.CC=30]="CC",e[e.Pause=31]="Pause",e[e.Seek=32]="Seek",e[e.Mute=33]="Mute",e[e.FullScreenEnter=34]="FullScreenEnter",e[e.Info=35]="Info",e[e.VideoQuality=36]="VideoQuality",e[e.Resume=37]="Resume",e[e.FullScreenExit=38]="FullScreenExit",e[e.Replay=39]="Replay",e[e.Unmute=40]="Unmute",e[e.ContentImpression3PP=41]="ContentImpression3PP",e[e.Facebook=51]="Facebook",e[e.Twitter=52]="Twitter",e[e.Email=53]="Email",e[e.CommonPlayerImpression=61]="CommonPlayerImpression",e[e.EndslateVideos=64]="EndslateVideos",e[e.EndslateContinuous=65]="EndslateContinuous",e[e.EndslateCancelCountdown=66]="EndslateCancelCountdown",e[e.EndslateShown=67]="EndslateShown",e[e.PlayerStarting=90]="PlayerStarting",e[e.AdLoading=91]="AdLoading",e[e.AdLoaded=92]="AdLoaded",e[e.VideoLoading=93]="VideoLoading",e[e.ContentOpen=101]="ContentOpen",e[e.Content25Percent=102]="Content25Percent",e[e.Content50Percent=103]="Content50Percent",e[e.Content75Percent=104]="Content75Percent",e[e.Canplay=105]="Canplay",e[e.Canplaythrough=106]="Canplaythrough"}(f||(f={}));const m=["en-it","de-at","fr-be","nl-be","cs-cz","da-dk","fi-fi","fr-fr","de-de","el-gr","hu-hu","it-it","nl-nl","no-no","pl-pl","pt-pt","es-es","sv-se","de-ch","de-fr","en-gb"],y=["cs-cz","da-dk","de-at","de-ch","de-de","en-gb","el-gr","fi-fi","fr-be","fr-ch","fr-fr","hu-hu","it-it","nb-no","nl-be","nl-nl","pl-pl","pt-br","pt-pt","ru-ru","sv-se","tr-tr","zh-cn"],v=["en-us","es-us"],S=280},61932:function(e,t,n){var i,r,o,a;n.d(t,{j3:function(){return c},sS:function(){return s}}),function(e){e._lowerBound="invalid",e._1by191="1x1.91",e._9by16="9x16",e._3by4="3x4",e._1by1="1x1",e._4by3="4x3",e._16by9="16x9",e._191by1="1.91x1"}(i||(i={})),function(e){e.Adult="adult",e.Enterprise="enterprise"}(r||(r={})),function(e){e.AdFeedV2="feedv2-template",e.Default="msft-content-card",e.PatternOverlay="msn-pattern-overlay-card",e.PseudoVideo="msn-pseudo-video-card",e.Slideshow="msn-slideshow-card",e.ZIndex="msn-z-index-card",e.AdCarousel="msn-ad-carousel",e.AnimatedImagery="msn-animated-imagery",e.InfopaneHorizontal_1by1="msn-info-pane-horizontal-1-by-1",e.InfopaneHorizontal_3by4="msn-info-pane-horizontal-3-by-4",e.InfopaneHorizontal_4by3="msn-info-pane-horizontal-4-by-3",e.InfopaneHorizontal_9by16="msn-info-pane-horizontal-9-by-16",e.InfopanePatternOverlay_1by1="msn-info-pane-pattern-overlay-1-by-1",e.InfopanePatternOverlay_4by3="msn-info-pane-pattern-overlay-4-by-3",e.InfopaneDoubleCard_19by10="msn-card-19-by-10",e.RiverAnimatedImagery_9by16="msn-river-animated-imagery-9-by-16",e.RiverZIndex_9by16="msn-river-z-index-9-by-16",e.RiverZIndex_3by4="msn-river-z-index-3-by-4",e.HotspotSingle="msn-hotspot-single",e.BrandStory="msn-brand-story",e.CallToAction="msn-ad-cta",e.CallToActionLearnMore="msn-ad-cta-learn-more",e.CallToActionDarkMode="msn-ad-cta-learn-more-dark-mode",e.CallToActionIcon="msn-ad-cta-icon",e.CallToActionShortTitle="msn-ad-cta-short-title",e.CallToActionMaskMode="msn-ad-cta-mask-mode",e.ContentReveal="msn-content-reveal",e.DiscountScribble="msn-discount-scribble",e.BrandStoryNoDeco="msn-brand-story-no-deco",e.BrandStoryNoProgressiveDisplay="msn-brand-story-no-progressive-display",e.Gamification="msn-gamification",e.HighlightRating="msn-highlight-rating-card",e.DecorationDynamic="msn-decoration-dynamic",e.TitleMaxLine2="msn-title-max-line-2",e.TitleMaxLine2C="msn-title-max-line-2-c",e.InfopaneDynamicRendering="msn-info-pane-dynamic-rendering",e.Logo="msn-native-ad-logo",e.LogoWithBorderRadius="msn-native-ad-logo-radius",e.ShortTitle="msn-native-ad-short-title",e.Spotlight="msn-spotlight-image",e.Disclaimer="msn-ad-disclaimer",e.ZIndexV2Original="msn-ad-zindex-v2-original",e.ZIndexV2Polygon="msn-ad-zindex-v2-polygon",e.AdSlugV3="msn-ad-slug-v3",e.AdSlugV4="msn-ad-slug-v4",e.DrPerf="msn-ad-dr-perf",e.Video="msn-video",e.VideoIAS="msn-video-ias",e.Amplify="msn-amplify",e.SpecialOfferNonDR="msn-special-offer-nondr",e.SpecialOfferNonDRWithExp="msn-special-offer-nondr-with-exp",e.RatingHighlightRedNonDR="msn-highlight-rating-nondr-red",e.RatingHighlightYellowNonDR="msn-highlight-rating-nondr-yellow",e.RatingHighlightYellowNonDRStatic="msn-highlight-rating-nondr-yellow-static",e.RatingDefaultYellowNonDRStatic="msn-default-rating-nondr-yellow-static",e.FreeShippingPlainTextNonDR="msn-freeshipping-plain-text-nondr",e.FreeShippingInlineNonDR="msn-freeshipping-inline-nondr",e.FreeShippingTopLeftNonDR="msn-freeshipping-top-left-nondr",e.FreeShippingTopRightNonDR="msn-freeshipping-top-right-nondr",e.FreeShippingDR="msn-freeshipping-dr",e.ConditionNonDR="msn-condition-nondr",e.ConditionNonDRControl="msn-condition-nondr-c",e.ReturnPolicyNonDR="msn-return-policy-nondr",e.ReturnPolicyNonDRControl="msn-return-policy-nondr-c",e.SoldNonDR="msn-sold-nondr",e.SoldNonDRControl="msn-sold-nondr-c",e.EliteBadge="msn-elite-badge",e.RatingDR="msn-rating-dr",e.Trending="msn-trending",e.LikeButton="msn-like-button",e.SaleHighlightV1="msn-sale-highlight-v1",e.SaleHighlightV1Control="msn-sale-highlight-v1-c",e.SaleHighlightV3="msn-sale-highlight-v3",e.SaleHighlightV4="msn-sale-highlight-v4",e.SaleHighlightV3V4Control="msn-sale-highlight-v3v4-c",e.ShortTitleControl="msn-short-title-c",e.SpecialOfferControl="msn-special-offer-c",e.LogoControl="msn-logo-c",e.FreeShippingControl="msn-freeshipping-c",e.ZIndexControl="msn-z-index-c",e.RatingControl="msn-rating-c",e.TrendingControl="msn-trending-c",e.CallToActionControl="msn-cta-c",e.HoverEffectControl="msn-hover-effect-c",e.HoverEffect="msn-hover-effect",e.ComboRating="msn-combo-rating",e.ComboFreeShipping="msn-combo-freeshipping",e.ComboSpecialOffer="msn-combo-special-offer",e.ComboRatingNonDR="msn-combo-rating-nondr",e.ComboFreeShippingNonDR="msn-combo-freeshipping-nondr",e.ComboSpecialOfferNonDR="msn-combo-special-offer-nondr",e.ComboSaleHighlightNonDR="msn-combo-sale-highlight-nondr",e.ComboRatingNonDRControl="msn-combo-rating-nondr-c",e.ComboFreeShippingNonDRControl="msn-combo-freeshipping-nondr-c",e.ComboSpecialOfferNonDRControl="msn-combo-special-offer-nondr-c",e.ComboSaleHighlightNonDRControl="msn-combo-sale-highlight-nondr-c",e.CallToActionV2="msn-call-to-action-v2",e.CallToActionV3="msn-call-to-action-v3",e.CallToActionV3PA="msn-call-to-action-v3-pa",e.PESeasonalAds="msn-pe-seasonal",e.PESeasonalAdsV1="msn-pe-seasonal-v1",e.PESeasonalAdsV1P="msn-pe-seasonal-v1p",e.PESeasonalAdsControl="msn-pe-seasonal-control",e.ComboSoldNonDR="msn-combo-sold-nondr",e.ComboReturnPolicyNonDR="msn-combo-return-policy-nondr",e.ComboConditionNonDR="msn-combo-condition-nondr",e.ComboSoldNonDRControl="msn-combo-sold-nondr-c",e.ComboReturnPolicyNonDRControl="msn-combo-return-policy-nondr-c",e.ComboConditionNonDRControl="msn-combo-condition-nondr-c",e.ResponsiveImageSizing="msn-responsive-image-sizing",e.ResponsiveDescription="msn-responsive-description",e.GeometricAdWaves1="msn-geometric-ad-waves-1",e.GeometricAdWaves3="msn-geometric-ad-waves-3",e.GeometricAdWaves4="msn-geometric-ad-waves-4",e.GeometricAdNature3="msn-geometric-ad-nature-3",e.GeometricAdSparkles1="msn-geometric-ad-sparkles-1",e.GeometricAdSparkles2="msn-geometric-ad-sparkles-2",e.GeometricAdSparkles3="msn-geometric-ad-sparkles-3",e.GeometricAdSparkles4="msn-geometric-ad-sparkles-4",e.GeometricAdSparkles5="msn-geometric-ad-sparkles-5",e.GPTTitle="msn-native-ad-gpt-title",e.AlignmentRF="msn-native-ad-align-rf",e.AIImg="msn-native-ad-ai-img",e.VAPhase2="msn-native-ad-va-phase2"}(o||(o={})),function(e){e.ScaleUp="scale-up",e.ScaleDown="scale-down",e.ScaleUpDown="scale-up-down"}(a||(a={}));const s={infopane:{w:612,h:304},river:{w:300,h:304}},c={templateType:"msft-content-card",animatedImage:"",landscapeOverlay:!1,allowedAssets:null,nativeAdMode:"adult",adCarousel:!1,progressiveDisplay:!1,discountThreshold:1,imageSizeConfig:{infopane:{w:604,h:296},river:{w:300,h:174}},badgeStyle:"blendedIn",useClickInGamify:!0,configType:void 0}},75115:function(e,t,n){n.d(t,{K9:function(){return s},W3:function(){return r},XY:function(){return d},aT:function(){return c},bZ:function(){return i},fs:function(){return l},g2:function(){return a},hy:function(){return o},xs:function(){return u}});const i=["HotelAd"];var r;!function(e){e.PopupDisclaimer="popupDisclaimer",e.ReviewRatingItem="reviewRatingItem",e.WorkingHoursItem="workingHoursItem",e.Callout="callout"}(r||(r={}));const o={img:{required:1,img:{type:3}},title:{required:1,title:{len:100}},providerName:{required:1,data:{type:1}},logo:{required:0,img:{w:16,h:16,type:1}},disclaimer:{required:0,data:{type:513}},...{price:{required:0,data:{type:6}},city:{required:0,data:{type:9}},review:{required:0,data:{type:510}},disclaimer:{required:0,data:{type:513}},[r.Callout]:{required:0,data:{type:517}},workingHours:{required:0,data:{type:536}},[r.ReviewRatingItem]:{required:0,data:{type:556}},[r.WorkingHoursItem]:{required:0,data:{type:557}}},callToAction:{required:0,data:{type:12,len:15}},advertiserLogo:{required:0,img:{type:501,w:16,h:16}},cashback:{required:0,data:{type:516}},...{[r.PopupDisclaimer]:{required:0,data:{type:555}}}},a={city:"location.svg",destinationCity:"location.svg",serviceArea:"location.svg",fuelEfficiency:"gas-pump.svg",fuelType:"gas-can.svg",transmission:"transmission.svg",co2Emissions:"cloud.svg",interiorColor:"paint-bucket.svg",exteriorColor:"paint-bucket.svg",range:"battery.svg",trim:"vehicle-car-front.svg",bodyStyle:"vehicle-car-side.svg",autoCondition:"vehicle-car-side.svg",condition:"vehicle-car-side.svg",dealer:"building.svg",duration:"clock.svg",itineraryDays:"clock.svg",workingHours:"clock.svg",departureDestinationPort:"vehicle-ship.svg",debitCardMontlyServiceFee:"wallet-credit-card.svg",annualFee:"wallet-credit-card.svg",price:"money.svg",cardCategory:"money.svg",mileage:"odometer.svg",dealerName:"building.svg",year:"calendar.svg",debitCardCategory:"payment.svg",callout:"megaphone.svg",yearsOfExp:"person-star.svg",services:"briefcase.svg",languages:"local-language.svg",specialties:"ribbon-star.svg",category:"book.svg",serviceSubCategories:"book.svg",port:"vehicle-ship.svg",inclusion:"add-square.svg",toursActivityCategory:"ticket.svg",doctorClinicCategory:"doctor.svg"},s={price:e=>e.split(".")[0],review:e=>{const t=parseInt(e,10);if(t>=1e3){const e=["","k","M","B","T"],n=Math.floor(Math.log10(t)/3);return(t/Math.pow(1e3,n)).toFixed(1)+e[n]}return e.toString()}},c={providerName:"data-1",description:"data-2",rating:"data-3",likes:"data-4",price:"data-6",salePrice:"data-7",city:"data-9",callToAction:"data-12",installmentPrice:"data-500",priceDrop:"data-501",freeShipping:"data-502",viewed:"data-503",sold:"data-504",specialOffer:"data-505",eliteBadge:"data-506",condition:"data-507",localInventory:"data-508",curbsidePickup:"data-509",review:"data-510",shortTitle:"data-511",returnPolicy:"data-512",disclaimer:"data-513",cashback:"data-516",callout:"data-517",fuelEfficiency:"data-518",co2Emissions:"data-519",mileage:"data-520",bodyStyle:"data-521",dealerName:"data-522",fuelType:"data-523",interiorColor:"data-524",trim:"data-525",year:"data-526",exteriorColor:"data-527",transmission:"data-528",range:"data-529",autoCondition:"data-530",yearsOfExp:"data-533",services:"data-534",languages:"data-535",workingHours:"data-536",workingHoursStatus:"data-537",workingHoursIsOpen:"data-538",serviceArea:"data-539",serviceSubCategories:"data-540",specialties:"data-541",category:"data-542",port:"data-543",inclusion:"data-544",departureDestinationPort:"data-545",itineraryDays:"data-546",toursActivityCategory:"data-547",destinationCity:"data-548",duration:"data-549",cardCategory:"data-550",annualFee:"data-551",debitCardCategory:"data-552",debitCardMontlyServiceFee:"data-553",doctorClinicCategory:"data-554",popupDisclaimer:"data-555",reviewRatingItem:"data-556",workingHoursItem:"data-557",discount:"data-600",title:"data-601",logo:"image-1",img:"image-3",transparentImage:"image-500",advertiserLogo:"image-501"},d={font:"p1",shipping:"p2",ratings:"p3"},u=["specialOffer"],l=[c.disclaimer]},69497:function(e,t,n){var i;n.d(t,{_:function(){return i}}),function(e){e.clientAuctionAd="clientAuctionAd",e.oneServiceAd="oneServiceAd",e.cmsAd="cmsAd"}(i||(i={}))},93692:function(e,t,n){var i,r;n.d(t,{nM:function(){return o}}),function(e){e.Anon="ANON",e.AppAnon="APP_ANON",e.Unknown=""}(i||(i={})),function(e){e.AnonCookieExists="ace",e.AppAnonCookieExists="aace"}(r||(r={}));const o="child"},84265:function(e,t,n){var i;n.d(t,{l:function(){return i}}),function(e){e.NO_ACCOUNT="NO_ACCOUNT",e.MSA="MSA",e.AAD="AAD",e.UNSUPPORTED_SOVEREIGNTY="UNSUPPORTED_SOVEREIGNTY"}(i||(i={}))},523:function(e,t,n){n.d(t,{$2:function(){return w},$K:function(){return l},Dw:function(){return f},G5:function(){return o},GL:function(){return A},HS:function(){return P},N9:function(){return m},Nx:function(){return u},Ou:function(){return T},Py:function(){return a},Qm:function(){return S},RL:function(){return c},S$:function(){return L},TA:function(){return F},Ur:function(){return I},X:function(){return C},X1:function(){return y},Z3:function(){return s},_8:function(){return b},_S:function(){return i},hZ:function(){return g},hz:function(){return M},l2:function(){return p},qy:function(){return x},rz:function(){return h},sM:function(){return E},tJ:function(){return v},x0:function(){return R},x4:function(){return d},xE:function(){return r},zz:function(){return k}});const i="AdminPortalData",r="BackgroundData",o="BingImageData",a="CategoryData",s="ChannelData",c="ChromiumPageSettings",d="CoachmarkData",u="ExperienceTrackerEdgeNextData",l="ExperienceTrackerWidgets",p="IrisData",h="LayoutPreferenceData",g="LocationData",f="MilestoneData",m="MsccCookieBannerData",y="NurturingPlacementManager",v="OfficeSharedData",S="OneTrustCookieConsentData",w="PoweredByData",b="Preload",C="RewardsData",T="SearchHistoryEdgenextData",k="SharedState",P="SignInData",A="ShellNewTabData",I="SmartListSharedData",E="TelemetryData",R="TopicData",M="TopSitesLayoutData",x="WeatherData",L="WeatherCardData",F="SocialData"},70041:function(e,t,n){n.d(t,{$38:function(){return _c},$58:function(){return ms},$Ot:function(){return Mr},$Uw:function(){return $a},$WY:function(){return Od},$aC:function(){return Dn},$el:function(){return ri},$h8:function(){return rc},$sA:function(){return G},$z3:function(){return Ro},A0u:function(){return at},A1U:function(){return bt},AQ0:function(){return ua},AQ8:function(){return vo},A_l:function(){return y},Af8:function(){return Jr},B$S:function(){return Br},B5t:function(){return Id},BFg:function(){return Cn},BKx:function(){return co},BV5:function(){return o},Bm$:function(){return gs},Bqp:function(){return Fo},Bu7:function(){return Ao},CG8:function(){return fn},CRe:function(){return Lr},CSR:function(){return zo},CVw:function(){return $i},Cdl:function(){return qn},Cg6:function(){return _r},Cmj:function(){return no},Cx3:function(){return Ga},CxH:function(){return ma},CzA:function(){return bn},Czh:function(){return Pn},D6P:function(){return td},D7S:function(){return xi},DIt:function(){return ra},DJ7:function(){return Ae},DYF:function(){return gt},DbV:function(){return Ir},DeS:function(){return ao},DoE:function(){return Ja},Dx$:function(){return ue},Dzg:function(){return Ai},E1P:function(){return Ua},E6M:function(){return ni},EEj:function(){return ya},EFl:function(){return D},EMK:function(){return tc},EVj:function(){return wo},EYD:function(){return Ic},EeD:function(){return ar},EjJ:function(){return is},EpM:function(){return ot},Es2:function(){return fo},Esr:function(){return gr},F11:function(){return Dc},F73:function(){return xa},F8w:function(){return Oa},F9x:function(){return $o},FEQ:function(){return lr},FHt:function(){return Ki},FJH:function(){return Je},FRx:function(){return Bo},FYi:function(){return Ii},FZm:function(){return Zt},F_I:function(){return lo},FbH:function(){return na},Fe8:function(){return Z},Fj8:function(){return ki},FoC:function(){return $},GHS:function(){return ai},GOh:function(){return aa},Gcu:function(){return Do},GgE:function(){return bd},GzM:function(){return ks},HBJ:function(){return Nn},HBe:function(){return x},HH0:function(){return f},HTd:function(){return hr},HUp:function(){return Ke},Hmd:function(){return _d},Hpz:function(){return Hc},Htk:function(){return ta},HzA:function(){return Or},IF2:function(){return or},IFz:function(){return S},INF:function(){return qt},IOi:function(){return xt},ISs:function(){return vt},IUC:function(){return qc},IhH:function(){return si},Inx:function(){return Ps},ItY:function(){return go},J$A:function(){return Vn},J1W:function(){return wi},J3F:function(){return Ar},J4S:function(){return ee},J6h:function(){return Pa},JK5:function(){return zi},JKj:function(){return zc},JPw:function(){return k},JTG:function(){return Xt},JVb:function(){return oa},JVh:function(){return ji},JYk:function(){return vi},JZn:function(){return ct},JiM:function(){return Ci},JkB:function(){return v},Jkp:function(){return Is},JqL:function(){return gd},Jvt:function(){return Nr},Jzc:function(){return Zs},K1C:function(){return $r},KEM:function(){return Si},KPU:function(){return Ld},KfJ:function(){return Ot},Kfg:function(){return Sr},KgY:function(){return Hn},Kls:function(){return Es},KpP:function(){return En},Kww:function(){return Fn},LDe:function(){return nt},LHB:function(){return et},LIg:function(){return Bs},LRP:function(){return yt},Lfv:function(){return Hs},LjU:function(){return ti},LoE:function(){return pr},LrE:function(){return To},LxE:function(){return Za},M6f:function(){return ze},MAN:function(){return qi},MHK:function(){return ba},MIk:function(){return Pe},MLM:function(){return Gr},MPR:function(){return us},MTL:function(){return Zr},Mb7:function(){return fr},Mjw:function(){return sn},N2F:function(){return Aa},N6:function(){return I},N6K:function(){return Mc},NDs:function(){return We},NGK:function(){return zn},Nh8:function(){return se},Nty:function(){return Yc},NuV:function(){return ut},Nyn:function(){return Xr},OF7:function(){return vn},OTW:function(){return h},OX5:function(){return Ks},Obu:function(){return sd},OiM:function(){return pn},OuO:function(){return Xi},OvS:function(){return ed},PAH:function(){return Eo},PCA:function(){return hs},PE$:function(){return Gi},PLO:function(){return qa},PP6:function(){return br},PWY:function(){return ke},PYn:function(){return Et},PcW:function(){return di},Ph9:function(){return ir},PjF:function(){return Yi},PkV:function(){return oc},Pqz:function(){return Qs},Pte:function(){return ld},PvM:function(){return ea},PwP:function(){return uo},Q16:function(){return An},QE3:function(){return Rs},QI2:function(){return ur},QMX:function(){return Bn},QTZ:function(){return At},QWn:function(){return Qi},QZE:function(){return Ko},Qd1:function(){return R},QnV:function(){return Rc},Qwq:function(){return to},R5X:function(){return hc},R9w:function(){return Ya},RGQ:function(){return fi},RMj:function(){return xr},RSh:function(){return Io},RU_:function(){return Na},RfQ:function(){return Yr},RmL:function(){return Fe},RnN:function(){return qo},Ry6:function(){return Ea},RzN:function(){return ws},S5B:function(){return zt},S65:function(){return Lc},S9H:function(){return Uc},SA8:function(){return ia},SAx:function(){return Ma},SH9:function(){return mr},SJ$:function(){return rs},SNA:function(){return Le},SOf:function(){return Zo},SVM:function(){return Hi},SYh:function(){return Fi},SdM:function(){return kd},Sjk:function(){return jo},Sq1:function(){return kt},T4c:function(){return Kr},T5A:function(){return Xn},T9u:function(){return Qe},TGc:function(){return Ca},TOy:function(){return Hr},TSk:function(){return tn},TWs:function(){return Fa},TY:function(){return Rt},TbX:function(){return Ts},Ti2:function(){return _e},Tk6:function(){return Fr},Tlv:function(){return ss},Tu3:function(){return Ve},Tx5:function(){return Vo},UE:function(){return on},UKI:function(){return Ht},UWU:function(){return un},Ugt:function(){return vs},UhP:function(){return ko},Ujj:function(){return xd},Uoh:function(){return wd},Uon:function(){return W},Up2:function(){return Ne},Uq1:function(){return md},UtR:function(){return pd},Uu8:function(){return St},V7e:function(){return A},VWZ:function(){return ii},V_q:function(){return Cd},VaA:function(){return va},Vdi:function(){return bi},Vhw:function(){return Ia},VnC:function(){return $c},Vrn:function(){return wr},VtB:function(){return Nt},Vve:function(){return P},VyG:function(){return Wc},WGZ:function(){return Ze},WJ2:function(){return E},WK0:function(){return Wa},WLc:function(){return jc},WMP:function(){return J},WMv:function(){return Kt},WOb:function(){return rr},WTs:function(){return De},WfD:function(){return pc},Wfs:function(){return nn},Wm6:function(){return Dd},X$j:function(){return T},X8y:function(){return Ws},XIX:function(){return ye},Xz8:function(){return Vr},Y8d:function(){return yi},YB9:function(){return Qo},YD1:function(){return od},YDB:function(){return K},YDV:function(){return $n},YGz:function(){return le},YJ5:function(){return La},YJV:function(){return Ln},YWQ:function(){return a},YdT:function(){return tt},YfO:function(){return Re},YtU:function(){return Wt},YuV:function(){return sc},ZTk:function(){return zr},ZZI:function(){return Ds},ZjC:function(){return $s},ZwZ:function(){return sr},ZyT:function(){return li},_2w:function(){return Ec},_8p:function(){return dr},_9V:function(){return c},_Dk:function(){return l},_FV:function(){return j},_Xv:function(){return So},_eh:function(){return Xa},_hl:function(){return en},_jE:function(){return ho},_lg:function(){return Ye},a7N:function(){return hd},aGd:function(){return Ho},aJp:function(){return It},aNp:function(){return ys},aol:function(){return Wo},ar_:function(){return _a},b0A:function(){return ve},b1M:function(){return mt},bN3:function(){return Ei},bNS:function(){return _n},bOQ:function(){return mc},bru:function(){return Xo},bsP:function(){return oo},c8c:function(){return xs},c8i:function(){return za},cNB:function(){return ha},cTk:function(){return bc},cWp:function(){return Tc},cdX:function(){return Mt},cey:function(){return Qt},ckV:function(){return Ut},ckf:function(){return st},cvo:function(){return qr},cwF:function(){return Yn},d22:function(){return Ji},dMV:function(){return ht},dMz:function(){return fd},dT1:function(){return Q},dTK:function(){return Td},dVd:function(){return js},dub:function(){return _s},dxZ:function(){return Sd},e0Y:function(){return Qa},e8Z:function(){return Uo},e9S:function(){return Ed},eHH:function(){return gn},eMK:function(){return yr},eN3:function(){return Jo},etp:function(){return je},exU:function(){return ne},fJE:function(){return he},fPu:function(){return Wr},fcD:function(){return Me},ffn:function(){return oi},fqP:function(){return Be},fwY:function(){return Vc},fyI:function(){return Xe},fyJ:function(){return _i},g3x:function(){return re},gDP:function(){return bo},gLP:function(){return Gs},gOk:function(){return lc},gOp:function(){return s},gRh:function(){return jr},gTT:function(){return id},gYv:function(){return Ti},gk:function(){return Ge},guo:function(){return jn},gv3:function(){return Nc},h0c:function(){return Rr},h1P:function(){return ae},hDJ:function(){return Bc},hO3:function(){return Oo},hRd:function(){return rt},hch:function(){return Oe},hiu:function(){return u},hn8:function(){return nr},i$x:function(){return O},i2:function(){return es},i5N:function(){return Qc},iEA:function(){return p},iJ8:function(){return Ls},iOK:function(){return an},iS1:function(){return da},iUi:function(){return oe},iXc:function(){return Mn},ieX:function(){return _},ihw:function(){return Xc},isq:function(){return ui},iuJ:function(){return Di},iw_:function(){return X},j62:function(){return wn},j9B:function(){return ud},j9W:function(){return Te},j9d:function(){return Ha},jK4:function(){return Y},jXL:function(){return m},jZ0:function(){return kr},jb:function(){return Cc},jhm:function(){return vc},jjB:function(){return Pc},jls:function(){return r},jri:function(){return yd},k0t:function(){return dd},kAw:function(){return Yo},kFj:function(){return pa},kJd:function(){return xn},kM8:function(){return uc},kPE:function(){return Oc},kWS:function(){return hn},koT:function(){return Lo},kvh:function(){return tr},ky5:function(){return io},l0e:function(){return b},l1J:function(){return Tt},l1V:function(){return He},l6J:function(){return eo},lBi:function(){return Gt},lCU:function(){return ci},lEL:function(){return kc},lIM:function(){return mo},lIP:function(){return dt},lJY:function(){return Ie},lQV:function(){return ga},lTG:function(){return ad},leK:function(){return ce},ljh:function(){return ds},lvU:function(){return so},m2P:function(){return vd},m6X:function(){return de},m8e:function(){return Yt},mLM:function(){return Pi},mVg:function(){return $e},mnK:function(){return Wn},mo8:function(){return Pt},mqM:function(){return as},nA9:function(){return Po},nUs:function(){return yo},nXC:function(){return d},nZh:function(){return As},n_R:function(){return ro},nam:function(){return Zc},ne0:function(){return mi},niV:function(){return ps},nii:function(){return Er},nmZ:function(){return gi},o1e:function(){return Ri},o4h:function(){return hi},o9I:function(){return Sc},oBI:function(){return cr},oR0:function(){return Dt},oSF:function(){return Ft},oeN:function(){return Qr},og3:function(){return ca},oi0:function(){return Mo},ooB:function(){return it},opx:function(){return ec},p66:function(){return Ac},pDE:function(){return Ra},pZ3:function(){return Wi},p_9:function(){return te},pn3:function(){return Rn},pru:function(){return H},q31:function(){return g},q7$:function(){return Ys},q7R:function(){return ft},q8y:function(){return qe},qAv:function(){return sa},qBv:function(){return Da},qGw:function(){return ic},qHB:function(){return L},qHN:function(){return Ce},qZg:function(){return Bi},qZt:function(){return Us},q_M:function(){return Qn},q_V:function(){return Ka},qmE:function(){return Sn},qrd:function(){return U},qwu:function(){return fs},qym:function(){return Li},rAA:function(){return lt},rC1:function(){return pe},rER:function(){return Jn},rEn:function(){return ac},rGG:function(){return Vt},rJS:function(){return fa},rXk:function(){return rn},r_z:function(){return Un},rc4:function(){return Fd},rdu:function(){return po},rfA:function(){return ns},riL:function(){return la},rnA:function(){return Ms},s3P:function(){return wc},s67:function(){return Bt},s76:function(){return Xs},sAu:function(){return Dr},sGB:function(){return Co},sJx:function(){return rd},sKb:function(){return dc},sMx:function(){return wa},sPK:function(){return Ni},sPg:function(){return Ss},sVH:function(){return Vs},sVW:function(){return Ue},sXS:function(){return cs},s_p:function(){return Lt},saD:function(){return Fc},sc_:function(){return Js},sgW:function(){return In},sh6:function(){return Zn},srZ:function(){return Cr},ssN:function(){return me},sth:function(){return Nd},tCy:function(){return xe},tH5:function(){return wt},tHe:function(){return Gc},tJU:function(){return Kn},tJk:function(){return F},tNG:function(){return Kc},tpX:function(){return Ad},u1Z:function(){return cn},u4d:function(){return kn},u5K:function(){return Se},u8s:function(){return gc},uB2:function(){return Md},uG1:function(){return yn},uM:function(){return bs},uT1:function(){return _o},uT9:function(){return Tr},udo:function(){return Ba},us7:function(){return Jt},utF:function(){return q},uuz:function(){return Fs},v$Q:function(){return fe},v61:function(){return ei},vFd:function(){return pi},vG7:function(){return Tn},vJu:function(){return N},vOu:function(){return Pd},vPc:function(){return Mi},vTu:function(){return Jc},vb7:function(){return xo},veL:function(){return Sa},veX:function(){return yc},vk4:function(){return ja},vsY:function(){return i},vx_:function(){return pt},wM3:function(){return xc},wQF:function(){return $t},wRF:function(){return Gn},wRm:function(){return we},wSV:function(){return Vi},wUc:function(){return M},w_L:function(){return ts},w_t:function(){return er},we$:function(){return os},wge:function(){return _t},wiB:function(){return mn},wlz:function(){return Ee},wr4:function(){return Oi},wrw:function(){return Ur},wwX:function(){return ln},x6e:function(){return vr},xGt:function(){return B},xQZ:function(){return Go},xXj:function(){return qs},xYH:function(){return ge},x_j:function(){return cd},xbu:function(){return Ns},xeP:function(){return Ta},xh6:function(){return Os},xhj:function(){return Pr},xju:function(){return z},xl0:function(){return cc},y2o:function(){return w},yHC:function(){return Ui},yHN:function(){return No},yLt:function(){return C},yR8:function(){return be},ySJ:function(){return Ct},ySq:function(){return jt},ya$:function(){return V},yjx:function(){return nd},yn7:function(){return zs},yuv:function(){return Zi},z7Q:function(){return ka},z82:function(){return Cs},zA:function(){return dn},zBK:function(){return ls},zK8:function(){return ie},zTi:function(){return fc},zUe:function(){return Va},zgP:function(){return On},zk5:function(){return Rd},zu2:function(){return nc}});const i="ShoppingCategoryPage",r="AboveRiverBlock",o="ActionTray",a="ArticleCloseButton",s="ArticleRelatedStories",c="ArticleTopComment",d="AutosCarousel",u="AutosEntityCardWC",l="AutosEntitySpan",p="BackToTopButton",h="BackgroundGallery",g="BackgroundImageWC",f="BingDailyQuizCard",m="BingHealthCard",y="BingHealthFitnessCard",v="BingHomepageFeed",S="BoostAd",w="BoostAdCard",b="BreakingNewsWC",C="CalendarCard",T="CardActionWC",k="CashbackCarousel",P="CashbackCarouselCard",A="CasualGamesBanner",I="CasualGamesCard",E="CasualGamesCarouselCard",R="CasualGamesZhCarousel",M="CasualGamesFeed",x="CasualGamesFrame",L="CasualGamesGameCardCarousel",F="CasualGamesGameplay",D="CasualGamesGameplayRightRail",O="CasualGamesHub",_="CasualGamesLandingV2",N="CasualGamesProng2CarouselCard",B="CasualGamesStripeCarouselCard",U="CasualGamesUserProfilePreview",$="ChannelEntryPoint",H="ChannelFilterCard",W="ChannelInterestsManager",G="ChannelMobileContent",V="ChannelPage",q="ChannelStore",j="ChromeExtensionPage",z="TrackerCreate",K="TrackerPage",Q="TrackerTopic",J="CmsBaseExperience",X="CmsExperience",Y="CodexBingChat",Z="ColdStart",ee="ColdStartWC",te="CommonAutoSuggest",ne="CommonHeaderWC",ie="CommonSearchBoxEdgeNext",re="CommonSettingsEdgeNext",oe="CommunityCard",ae="CommunityComposeCopilotWC",se="CommunityInfoCard",ce="CommuteCard",de="CompanionWidget",ue="ComplexContentPreview",le="ConditionalBannerHpWC",pe="ConditionalBannerWC",he="ConsumptionFeedWC",ge="ConsumptionPage",fe="ContentFlexInfoPane",me="ContentGroup",ye="ContentGroupCard",ve="ContentPreview",Se="ContentTts",we="ContextualFeedbackWC",be="CopilotConsumptionLandingPage",Ce="CopilotFeedViewWC",Te="CopilotRubyCard",ke="CopilotSuggestionPrompts",Pe="CpcMonetizationDashboard",Ae="CreatorSpotlightCard",Ie="DailyBriefCard",Ee="DailyBriefFullPagePlayer",Re="DailyGreetingCard",Me="DailyGreetingWindowsShell",xe="DailyMomentsCard",Le="DailyWonderCard",Fe="DailyWonderCopilotCard",De="DashboardFallback",Oe="DashboardSettings",_e="DebugButton",Ne="DenseCard",Be="DesktopFeedHubWC",Ue="DesktopFeedViewsWC",$e="DesktopFeedWC",He="DevTools",We="DidYouKnowImageWCExperience",Ge="DidYouKnowWCExperience",Ve="DigestCard",qe="DisplayAdsWC",je="DisplayAdsWithContentFallback",ze="DistributionFeed",Ke="DistributionHeader",Qe="DistributionPage",Je="DistributionPivotsNav",Xe="DonationNpoCard",Ye="EdgeChromiumPageWC",Ze="EdgeShopping",et="ElectionCard",tt="EmmxEntrypoint",nt="EntertainmentCard",it="EntertainmentIntent",rt="EntertainmentPremierCard",ot="EntryPointHpMobile",at="EntryPointHpWC",st="EntryPointHpRuby",ct="EntryPointMobileHub",dt="EntryPointViewsWC",ut="EsportsCard",lt="EsportsCasualGamesCard",pt="ExamPage",ht="ExampleOfferCard",gt="ExperiencePreviewCta",ft="ExternalContentPreview",mt="FamilyCard",yt="FeedContainer",vt="FeedLevelFeedbackWC",St="FeedNavigationHp",wt="FeedbackCard",bt="FeedbackDialogWC",Ct="FeedbackLinkWC",Tt="ProactiveFeedbackWC",kt="FinanceCarousel",Pt="FloatButtonGroupWC",At="FollowingFreConfirmation",It="FollowingFreFullWidth",Et="FoodSimilarItems",Rt="FreEntrypoint",Mt="FrequentSitesCardWC",xt="GamingChannel",Lt="GamingDiscoverStrip",Ft="GamingPage",Dt="GamingRecentlyPlayedCard",Ot="GeneralElections",_t="GridViewFeed",Nt="HeaderWindowsShellWC",Bt="HealthArticlesCardWC",Ut="HealthAugmentCard",$t="HealthDietPlanScheduleWC",Ht="HealthFeedbackWC",Wt="HealthFitnessCarousel",Gt="HealthFoodHealtheffectsWC",Vt="HealthFoodRecipesWC",qt="HealthHubHealthapp",jt="HealthInterestsManager",zt="HealthQnAWCExperience",Kt="HealthRiverWC",Qt="HealthTipReact",Jt="HealthTipWC",Xt="HealthTopSpan",Yt="HealthTopicFlyout",Zt="HealthTranslationWC",en="HeroContainerWC",tn="HomepageFooter",nn="HomepageHeader",rn="HomepagePwaMobile",on="HoroscopeAnswerCardWC",an="HotListCard",sn="HpFeedSwitch",cn="ImmersiveFullscreen",dn="Infopane",un="InspirationCard",ln="InterestFreCard",pn="InterestManagementCard",hn="InterestsManager",gn="InterestsWC",fn="IosPwaInstallInstructions",mn="IssueReportingWC",yn="LanguageToggleWC",vn="LinkedInCard",Sn="LocalHubHeader",wn="LocalizeStringsTempExperience",bn="LocationMarker",Cn="MailSignoutBanner",Tn="MangaCard",kn="MangaCarousel",Pn="MarketLanguageToggleWC",An="MarketplaceCardWC",In="MeControlWC",En="MeStripeWC",Rn="MicrosoftEdgeWidget",Mn="MicrosoftFeedCard",xn="MobileAppUpsell",Ln="MobileConsumptionPage",Fn="MobileFeedHub",Dn="MobileFeedWC",On="MobileFooter",_n="MobileHeader",Nn="MobileMarketSelector",Bn="MobileNotification",Un="MobilePopupWindow",$n="MobileTip",Hn="MobileTrendingSearchCard",Wn="MobileVideoSdCard",Gn="MomentInTimeHero",Vn="MoneyAugmentCard",qn="MoneyCopilotWC",jn="MoneyInfo",zn="MoneyInfoCard",Kn="MoneyInfoCardWC",Qn="MoneyInfoSpan",Jn="MsRewardsWC",Xn="MsnFeed",Yn="MsnStudio",Zn="MyBriefRiverCard",ei="NativeAdWC",ti="NativeTopAd",ni="NavigationPageExperience",ii="NewsletterSignup",ri="NewsletterSignupPage",oi="NextdoorPage",ai="NotificationBellWC",si="NotificationMiniCard",ci="NudgeSpotlightCard",di="NurturingBanner",ui="NurturingCoachMark",li="OfficeAppsWC",pi="OfficeCoachmark",hi="OfficeDocumentsTableWC",gi="OfficeLeftRail",fi="OnThisDayCardWC",mi="PageRefreshWC",yi="PanoPage",vi="PersonalFinanceExpenseDistribution",Si="PersonalFinanceTransactionsCard",wi="PersonalizeNavButton",bi="PhotoCard",Ci="PillWC",Ti="PivotsMobileWC",ki="PollsCardWC",Pi="PoweredbyLegendWC",Ai="PremiumProfilePromoCard",Ii="PrideEventCard",Ei="PrismCarouselCard",Ri="PrismFeed",Mi="PrismSdCard",xi="ProductivityHub",Li="ProfileArticles",Fi="PromotedAdWC",Di="PublisherList",Oi="PublisherSubscribeFollowButton",_i="PullToRefresh",Ni="PulseEdgenext",Bi="PulseProng",Ui="Qna",$i="QnaFeed404Page",Hi="QnaFeedCard",Wi="QnaFeedCardMenu",Gi="QnaFeedCarousel",Vi="QnaFeedCategoriesMenu",qi="QnaFeedExploreTopics",ji="QnaFeedList",zi="QnaFeedMyTopics",Ki="QnaFeedRelatedQuestions",Qi="QnaFeedReportCard",Ji="QnaFeedSuggestedTopics",Xi="QnaFeedTopicDetail",Yi="QnaFeedTrendingQuestions",Zi="QuizCard",er="ReactionBreakdownDialog",tr="RealEstateCard",nr="RecipesSdCard",ir="RecommendedInterests",rr="RecommendedSitesWC",or="RewardsCardWC",ar="RewardsFlyout",sr="RichCalendarCard",cr="RichCalendarLandingPage",dr="RichCalendarWindowsShell",ur="RightRailProviderCarousel",lr="River",pr="RubyPage",hr="RubyBoardHomePage",gr="ScrollDownButton",fr="SdCardMaskWC",mr="SearchBoxWC",yr="SearchHistoryEdgeNextWC",vr="SelectCarousel",Sr="SharedHeroNewsCard",wr="SharedLinks",br="SharepointNewsCard",Cr="ShoppingAllStoresPage",Tr="ShoppingArticlePage",kr="ShoppingAugmentCard",Pr="ShoppingBannerSdCard",Ar="ShoppingBingProductDetails",Ir="ShoppingBlackjackDealPage",Er="ShoppingBlackjackPage",Rr="ShoppingBuyingGuide",Mr="ShoppingBuyingGuidePremiumCard",xr="ShoppingBuyingGuidesCard",Lr="ShoppingCardActions",Fr="ShoppingCardWC",Dr="ShoppingCarousel",Or="ShoppingCarouselOfferCard",_r="ShoppingCarouselProngWC",Nr="ShoppingCarouselWC",Br="ShoppingCheckoutModal",Ur="ShoppingColdStart",$r="ShoppingCouponsPage",Hr="ShoppingDealsHomePage",Wr="ShoppingDebugPage",Gr="ShoppingEntryBaseExperience",Vr="ShoppingEventsDealCard",qr="ShoppingFashionCarouselWC",jr="ShoppingGemHeroCard",zr="ShoppingGrid",Kr="ShoppingGroupedCarousel",Qr="ShoppingGuidesPage",Jr="ShoppingHomepage",Xr="ShoppingInspiration",Yr="ShoppingLeaderboard",Zr="ShoppingModal",eo="ShoppingModelOverlay",to="ShoppingMomentInTimePage",no="ShoppingOfferCard",io="ShoppingPageBase",ro="ShoppingPageContent",oo="ShoppingPivotFeed",ao="ShoppingProductDetailPage",so="ShoppingRiverCard",co="ShoppingSdCard",uo="ShoppingSearch",lo="ShoppingShopTheLookPage",po="ShoppingTopSpan",ho="SignInControlWC",go="SignInFlyoutWC",fo="SignalOverlay",mo="SocialAvatar",yo="SocialBarWC",vo="SocialCommentBox",So="SocialCommentWC",wo="SocialEntrypoint",bo="SocialLeadGenInArticle",Co="SocialNotification",To="SocialPostEditorWC",ko="SocialProfileActionMenu",Po="SocialProfileAppeal",Ao="SocialProfileCard",Io="SocialProfilePromotion",Eo="SocialProfileRejectionDetails",Ro="SocialProfileTopics",Mo="SocialRelatedSources",xo="SocialReportMenu",Lo="SocialRewardsMedal",Fo="SocialRewardsPromotion",Do="SocialStarRating",Oo="SocialSubscriptionBanner",_o="SocialSubscriptionNotification",No="SocialSubscriptionOverlay",Bo="SocialSubscriptionOverlaySummary",Uo="SocialSubscriptionUpsell",$o="SocialSupportResult",Ho="SocialTipHistory",Wo="SocialTipIntroduction",Go="SocialTipPromotion",Vo="SocialTipPromotionInArticle",qo="SocialTipSelection",jo="SportsAroundTheLeague",zo="SportsAugmentCard",Ko="SportsBackgroundUx",Qo="SportsBrackets",Jo="SportsCard",Xo="SportsCardWC",Yo="SportsCommentary",Zo="SportsCopilotNavigation",ea="SportsCountdownTimer",ta="SportsCricketLayoutManager",na="SportsCricketLeagueStats",ia="SportsCricketMatchRow",ra="SportsCricketPartnerships",oa="SportsCricketRankings",aa="SportsCricketScorecard",sa="SportsCricketScoresAndSchedule",ca="SportsEntityHeader",da="SportsFeaturedMatchesCard",ua="SportsFeaturedTeamList",la="SportsFrePanel",pa="SportsFullStandings",ha="SportsFullStats",ga="SportsGameInformation",fa="SportsGameScore",ma="SportsGameSummary",ya="SportsGameSummaryFull",va="SportsGameTimeline",Sa="SportsGcPlayerStats",wa="SportsGcTeamStats",ba="SportsGenUiPage",Ca="SportsGptAnalysis",Ta="SportsHeadlinesHeader",ka="SportsHeadlinesMainStory",Pa="SportsHeadlinesStoryCarousel",Aa="SportsHeadlinesTimelines",Ia="SportsInfo",Ea="StackCard",Ra="SportsInfoSpan",Ma="SportsLayoutRenderer",xa="SportsMatchRow",La="SportsMatchupCard",Fa="SportsMedalCountList",Da="SportsMedalSummaryList",Oa="SportsMedalTrackerList",_a="SportsMobileTabPanel",Na="SportsOlympicCard",Ba="SportsOlympicCardWC",Ua="SportsOlympicsHeaderRow",$a="SportsOlympicsResultFull",Ha="SportsOlympicsScheduleFull",Wa="SportsPersonMatchRow",Ga="SportsPersonalizationStrip",Va="SportsPickWinner",qa="SportsPlayerBio",ja="SportsPlayerInsights",za="SportsPopularCardWx",Ka="SportsPreviousMatchups",Qa="SportsPromoCard",Ja="SportsRankingsFull",Xa="SportsRetentionFull",Ya="SportsScoresAndSchedule",Za="SportsScoresAndScheduleFull",es="SportsScoringSummary",ts="SportsSquad",ns="SportsStandings",is="SportsStandingsList",rs="SportsStatLeaders",os="SportsStats",as="SportsStoryPlayer",ss="SportsTabLayout",cs="SportsTeamFormation",ds="SportsTeamProbability",us="SportsTennisScoresAndScheduleFull",ls="SportsTennisTournamentInfo",ps="SportsTournamentInfo",hs="SportsTournamentLeaderboard",gs="SportsTournamentMatchRow",fs="SportsTournamentResultsAndSchedule",ms="SportsTournamentSchedule",ys="SportsTournamentStandings",vs="SportsTrendingCarousel",Ss="SportsUnavailablePlayers",ws="SportsVideoList",bs="SportsWorldCupCard",Cs="SportsWorldCupCardWC",Ts="SpotlightCard",ks="SpotlightCardWC",Ps="StarterKitWC",As="StreaksBadgeWC",Is="StripeView",Es="StripeWC",Rs="SummaryCardWC",Ms="SuperBreakingNews",xs="SuperNav",Ls="SuperNavCoachMark",Fs="SuperappBannerWC",Ds="SuperappUpsellCardWC",Os="TabbedInfopane",_s="TabbedInfopaneTabPreview",Ns="ThemePickerWC",Bs="TipsCard",Us="ToastWC",$s="TodoCardWC",Hs="TopCommentsCard",Ws="TopSitesBookmarks",Gs="TopSitesEdgeNextWC",Vs="TopSitesNewsbar",qs="TopicTags",js="TrafficCard",zs="TrafficCardWC",Ks="TrafficHero",Qs="TranslateTemporary",Js="TravelArticlePageCard",Xs="TravelCard",Ys="TravelCarousel",Zs="TravelCollectionCard",ec="TravelDestination",tc="TravelDestinationBanner",nc="TravelDestinationDetailsBanner",ic="TravelFeed",rc="TravelFlightCarousel",oc="TravelHotelCarousel",ac="TravelInspirationCard",sc="TravelInspirationCardWC",cc="TravelLandingPage",dc="TravelMsnHpCard",uc="TravelSdCarrentalsCard",lc="TravelSdDestinationsCard",pc="TravelSdFlightsCard",hc="TravelSdHotelsCard",gc="TravelSdThemesCard",fc="TravelTourActivityCard",mc="TrendingNowWC",yc="TrendingSearchCard",vc="UgcCreatorHomepage",Sc="UnifiedMobileFeed",wc="VerticalLeftNav",bc="VideoCardWC",Cc="VideoDetails",Tc="VideoDetailsKit",kc="ViewsCoachmark",Pc="ViewsNativeAd",Ac="ViewsRail",Ic="WaffleWC",Ec="WalletPersonalizedOfferSdCardWC",Rc="WatchFilterChannel",Mc="WatchTakeABreakHeader",xc="WatchVideoCard",Lc="WatchWC",Fc="WaterTrackerCard",Dc="WaterfallViewFeed",Oc="WeatherCard",_c="WeatherCardWC",Nc="WeatherFeedWC",Bc="WeatherForecastDayWC",Uc="WeatherForecastPerHourWC",$c="WeatherHeroExperience",Hc="WeatherHistoricalTemperatureWC",Wc="WeatherHourlyHistogramWC",Gc="WeatherImmersiveForecastWC",Vc="WeatherInfoCard",qc="WeatherLocationCardWC",jc="WeatherMapGroupSwitcherButtonWC",zc="WeatherMapLegendWC",Kc="WeatherMapTimelineWC",Qc="WeatherMapWC",Jc="WeatherMinimapWC",Xc="WeatherOneLiner",Yc="WeatherOverviewWC",Zc="WeatherPageWC",ed="WeatherReportIssueDialog",td="WeatherTodayHistoryWC",nd="WeatherTodayMiniWC",id="WeatherTopSectionCard",rd="WeatherVideoEntryWC",od="WelcomeGreetingLight",ad="WelcomeGreetingWC",sd="WidgetPickerWC",cd="WidgetsDynamicFeed",dd="WidgetsConsumptionPage",ud="WidgetsHomePage",ld="WidgetsPrivacy",pd="WidgetsRegion",hd="WidgetsNotificationsCard",gd="WidgetsStartFeed",fd="WinAppWC",md="WindowsOfficeFeed",yd="WindowsShellBannersManager",vd="WindowsShellColdStartCard",Sd="WindowsShellEntry",wd="WindowsShellHeader",bd="WindowsShellHotList",Cd="WindowsShellInfopane",Td="WindowsShellLocationDialog",kd="WindowsShellMorningDigest",Pd="WindowsShellNewsPromoCard",Ad="WindowsShellNotificationCard",Id="WindowsShellNotificationSettings",Ed="WindowsShellRecommendedInterests",Rd="WindowsShellSettingsMenu",Md="WindowsShellSoftLanding",xd="WindowsShellTopicsCard",Ld="XboxFeedWC",Fd="XfeedWC",Dd="ConsumptionLandingPage",Od="MsnRouter",_d="UnifiedConsumption",Nd="GemConsumptionPage"},22011:function(e,t,n){n.d(t,{$e:function(){return g},HR:function(){return f},NH:function(){return p},PC:function(){return c},PQ:function(){return i},RX:function(){return u},SD:function(){return s},SL:function(){return r},aj:function(){return h},dN:function(){return a},mX:function(){return o},my:function(){return d},oS:function(){return m},pN:function(){return l}});const i="v3",r="v3.1",o="/resolver/api/resolve/",a="prg-pr2-",s="prg-pw-",c="prg-",d="prg-crsfdheadrem",u="prg-1sw-",l="https://assets.msn.com",p="https://assets.msn.cn",h="prg-pr2-manupcs",g="remflighthead",f="prg-ad-pgtype-rf",m="prg-ad-ast1pend-rf"},84362:function(e,t,n){var i;n.d(t,{U:function(){return i}}),function(e){e.AFDProtocolKey="afdprotocol",e.BackfillContentDueToSSRAdsFailed="__backfillContentDueToSSRAdsFailed__",e.DelayNtpSSRFeedDuration="__DelayNtpSSRFeedDuration__",e.ErrorLogHistory="__ErrorLogHistory__",e.HydrationPromise="__hydrationPromise__",e.IsSSRWpoFeedConsumed="__isSSRWpoFeedConsumed__",e.NavEventEnabled="__navEventEnabled__",e.OriginalRequest="__originalRequest__",e.PlaceHolderResponse="__placeHolderResponse__",e.XmlBuilder2Import="__XmlBuilder2Import__",e.CustomSVGBuilder="__CustomSVGBuilder__",e.WeatherDataConnectorPromise="__WeatherDataConnectorPromise__",e.CopilotAPISupported="__CopilotAPISupported__"}(i||(i={}))},22471:function(e,t,n){var i;n.d(t,{X:function(){return r},p:function(){return i}}),function(e){e.basicFeed="BasicFeed",e.desktopFeedStart="DesktopFeedStart",e.discoverCarouselSection="FinanceDiscoverSection_carouselCard",e.discoverFirstSection="FinanceDiscoverSection_first",e.discoverFollowedSection="FinanceDiscoverSection_followedCard",e.discoverSecondSection="FinanceDiscoverSection_second",e.feed="Feed",e.feedBasicRender="FeedBasicRender",e.feedRequest="FeedRequest",e.feedRequestFG="FeedRequest.FG",e.feedSDRender="FeedSDRender",e.isPrerenderedAd="isPrerenderedAd",e.firstSectionRenderStart="FirstSectionRenderStart",e.firstSectionRenderEnd="FirstSectionRenderEnd",e.riverFirstSection="RiverFirstSection",e.sdCards="SDCards",e.searchBox="SearchBox",e.searchBoxToFeed="SearchBoxToFeed",e.secondSectionRenderEnd="SecondSectionRenderEnd",e.secondSectionRenderStart="SecondSectionRenderStart",e.TTPR="TTPR",e.viewCards="ViewCards",e.wpoCallStart="WpoCallStart",e.wpoResponseBack="WpoResponseBack",e.feedCallStart="FeedCallStart",e.feedResponseBack="FeedResponseBack",e.feedParse="FeedParse",e.configEndToFeedStart="ConfigEndToFeedStart",e.feedResponseTo1SSectionProcessed="FeedResponseTo1SSectionProcessed",e.isSSREnabled="isSSREnabled",e.isSSRCompleted="isSSRCompleted",e.isSSRAborted="isSSRAborted",e.complete="Complete",e.sectionRenderStart="sectionRenderStart",e.ssrCpuCost="ssrCpuCost",e.ssrRenderDuration="ssrRenderDuration"}(i||(i={}));const r="WidgetsConfigsEnd"},97205:function(e,t,n){n.d(t,{UH:function(){return i},lU:function(){return r}});const i="news",r="feed/personalize/settings"},70569:function(e,t,n){n.d(t,{R:function(){return i}});const i=new Map([["en",["en-xl","en-ae","en-au","en-ca","en-gb","en-ie","en-in","en-my","en-nz","en-ph","en-sg","en-us","en-za"]],["ja",["ja-jp"]],["ko",["ko-kr"]],["ru",["ru-ru","ru-xl"]],["de",["de-de","de-ch","de-at"]],["fr",["fr-xl","fr-be","fr-ca","fr-ch","fr-fr"]],["es",["es-xl","es-us","es-mx","es-ar","es-cl","es-co","es-es"]],["it",["it-it"]],["pl",["pl-pl"]],["ar",["ar-eg","ar-sa","ar-ae"]],["sv",["sv-se"]],["nl",["nl-nl","nl-be"]],["tr",["tr-tr"]],["bn",["bn-in"]],["te",["te-in"]],["hi",["hi-in"]],["mr",["mr-in"]],["nb",["nb-no"]],["pt",["pt-pt","pt-br"]],["id",["id-id"]]])},48:function(e,t,n){var i,r,o,a;n.d(t,{qG:function(){return r}}),function(e){e.TimeToAstSdkScriptRequest="TTAdSdk.ScriptRequest",e.TimeToAstSdkScriptLoaded="TTAdSdk.ScriptLoaded"}(i||(i={})),function(e){e.TimeToRequestAd="TTNativeAd.Request",e.TimeToRequestAdBackground="TTNativeAd.Background.Request",e.TimeToServeAd="TTNativeAd.Serve",e.TimeToServeAdBackground="TTNativeAd.Background.Serve",e.TimeToRenderAd="TTVR.NativeAd",e.TimeToPrerenderAd="TTNativeAd.Prerender",e.TimeToAdResponse="TTNativeAd.Response",e.ApiDuration="NativeAd.ApiDuration",e.RenderReady="NativeAd.RenderReady",e.RequestInitiated="NAdInitiate",e.RequestSent="NAdInitiateToReq",e.AdFetched="NAdFetch",e.AdServerLatency="NAdServerLatency",e.AdProcessed="NAdProcess",e.RespToAdCallback="NAdRespToCallback",e.AdCallbackProcessed="NAdCallbackProcess",e.AdRendered="NAdRender",e.TimeToConsumeAds="TTNativeAd.Consume",e.TimeToConsumeAdsSSR="TTNativeAd.ConsumeSSR"}(r||(r={})),function(e){e.TimeToAdScriptRequest="TTDisplayAd.ScriptRequest",e.TimeToAdScriptLoaded="TTDisplayAd.ScriptLoaded",e.TimeToAdFetchStarted="TTDisplayAd.FetchStarted",e.TimeToAdFetchCompleted="TTDisplayAd.FetchCompleted",e.TimeToAdRenderCompleted="TTDisplayAd.RenderCompleted",e.TimeToAdSlotRenderStart="TTDisplayAd.SlotRenderStart",e.TimeToBatchRequestSent="TimeToBatchRequestSent"}(o||(o={})),function(e){e.TimeToRenderAd="TTVR.MarqueeAd",e.TimeToPrerenderAd="TTPR.MarqueeAd"}(a||(a={}))},56121:function(e,t,n){var i,r;n.d(t,{_:function(){return s},do:function(){return a},et:function(){return o}}),function(e){e.Weather="Weather",e.Weather_Nowcast="Weather_Nowcast",e.Weather_TeaserRain="Weather_TeaserRain",e.Sports="Sports",e.Finance="Finance",e.CasualGame="CasualGame",e.Shopping="Shopping",e.DailyBrief="DailyBrief",e.DailyMoment="DailyMoment",e.CreatorSpotlight="CreatorSpotlight",e.EntertainmentIntent_Short="EntertainmentIntent_Short"}(i||(i={})),function(e){e.Weather_SevereWeather="Weather_SevereWeather",e.News_CatchUpStack="News_CatchUpStack",e.News_TopStories="News_TopStories",e.News_TrendingNow="News_TrendingNow",e.News_SaveForLater="News_SaveForLater",e.News_CopilotDaily="News_CopilotDaily",e.News_BreakingNews="News_BreakingNews",e.News_ForYouNews="News_ForYouNews",e.Finance_PriceMovement="Finance_PriceMovement",e.Sports_SportsMatch="Sports_ScoreUpdates",e.MomentInTime="MomentInTime",e.News_CreatorSpotlight="News_CreatorSpotlight",e.News_DailyWonder="News_DailyWonder"}(r||(r={}));const o=["msnruby","edgntpruby","edgdhpruby","edgentntpruby","edgentdhpruby","ma13x3","cp_msn_cmc"],a=Object.freeze([{id:"watch",localizationKey:"watchText",href:"https://www.msn.com/video"},{id:"weather",localizationKey:"weatherText",href:"https://www.msn.com/weather"},{id:"money",localizationKey:"moneyText",href:"https://www.msn.com/money"},{id:"games",localizationKey:"gamesText",href:"https://www.msn.com/play"}]),s="gemSnapshotKey"},62907:function(e,t,n){var i,r,o;n.d(t,{Hy:function(){return i},Qm:function(){return r}}),function(e){e[e.Unknown=0]="Unknown",e[e.NotSignedIn=1]="NotSignedIn",e[e.SignedIn=2]="SignedIn"}(i||(i={})),function(e){e.MSA="MSA",e.AAD="AAD",e.AAD_AL="AAD-AL",e.NA="NA",e.UNSUPPORTED_SOVEREIGNTY="UNSUPPORTED_SOVEREIGNTY"}(r||(r={})),function(e){e[e.NonAadAccount=0]="NonAadAccount",e[e.AadAccount=1]="AadAccount",e[e.Unknown=2]="Unknown"}(o||(o={}))},30594:function(e,t,n){n.d(t,{$n:function(){return i},bT:function(){return r},cN:function(){return o}});const i=[{id:"ar-ae",value:"ar-ae",displayString:"الإمارات العربية المتحدة (العربية)",direction:"rtl"},{id:"ar-eg",value:"ar-eg",displayString:"مصر (العربية)",direction:"rtl"},{id:"ar-sa",value:"ar-sa",displayString:"المملكة العربية السعودية (العربية)",direction:"rtl"},{id:"bn-in",value:"bn-in",displayString:"India (বাংলা)",direction:"ltr"},{id:"cs-cz",value:"cs-cz",displayString:"Česká republika (čeština)",direction:"ltr"},{id:"da-dk",value:"da-dk",displayString:"Danmark (Dansk)",direction:"ltr"},{id:"de-at",value:"de-at",displayString:"Österreich (Deutsch)",direction:"ltr"},{id:"de-ch",value:"de-ch",displayString:"Schweiz (Deutsch)",direction:"ltr"},{id:"de-de",value:"de-de",displayString:"Deutschland (Deutsch)",direction:"ltr"},{id:"el-gr",value:"el-gr",displayString:"Ελλάδα (ελληνικά)",direction:"ltr"},{id:"en-ae",value:"en-ae",displayString:"United Arab Emirates (English)",direction:"ltr"},{id:"en-au",value:"en-au",displayString:"Australia (English)",direction:"ltr"},{id:"en-ca",value:"en-ca",displayString:"Canada (English)",direction:"ltr"},{id:"en-gb",value:"en-gb",displayString:"United Kingdom (English)",direction:"ltr"},{id:"en-ie",value:"en-ie",displayString:"Ireland (English)",direction:"ltr"},{id:"en-in",value:"en-in",displayString:"India (English)",direction:"ltr"},{id:"en-my",value:"en-my",displayString:"Malaysia (English)",direction:"ltr"},{id:"en-nz",value:"en-nz",displayString:"New Zealand (English)",direction:"ltr"},{id:"en-ph",value:"en-ph",displayString:"Philippines (English)",direction:"ltr"},{id:"en-sg",value:"en-sg",displayString:"Singapore (English)",direction:"ltr"},{id:"en-us",value:"en-us",displayString:"United States (English)",direction:"ltr"},{id:"en-xl",value:"en-xl",displayString:"International Edition (English)",direction:"ltr"},{id:"en-za",value:"en-za",displayString:"South Africa (English)",direction:"ltr"},{id:"es-ar",value:"es-ar",displayString:"Argentina (español)",direction:"ltr"},{id:"es-cl",value:"es-cl",displayString:"Chile (español)",direction:"ltr"},{id:"es-co",value:"es-co",displayString:"Colombia (español)",direction:"ltr"},{id:"es-es",value:"es-es",displayString:"España (español)",direction:"ltr"},{id:"es-mx",value:"es-mx",displayString:"México (español)",direction:"ltr"},{id:"es-pe",value:"es-pe",displayString:"Perú (español)",direction:"ltr"},{id:"es-us",value:"es-us",displayString:"United States (español)",direction:"ltr"},{id:"es-ve",value:"es-ve",displayString:"Venezuela (español)",direction:"ltr"},{id:"es-xl",value:"es-xl",displayString:"América Latina (español)",direction:"ltr"},{id:"fi-fi",value:"fi-fi",displayString:"Suomi (suomi)",direction:"ltr"},{id:"fr-be",value:"fr-be",displayString:"Belgique (français)",direction:"ltr"},{id:"fr-ca",value:"fr-ca",displayString:"Canada (français)",direction:"ltr"},{id:"fr-ch",value:"fr-ch",displayString:"Suisse (français)",direction:"ltr"},{id:"fr-fr",value:"fr-fr",displayString:"France (français)",direction:"ltr"},{id:"fr-xl",value:"fr-xl",displayString:"Afrique francophone (français)",direction:"ltr"},{id:"he-il",value:"he-il",displayString:"ישראל (עברית)",direction:"rtl"},{id:"hi-in",value:"hi-in",displayString:"India (हिंदी)",direction:"ltr"},{id:"hu-hu",value:"hu-hu",displayString:"Magyarország (magyar)",direction:"ltr"},{id:"id-id",value:"id-id",displayString:"Indonesia (Bahasa Indonesia)",direction:"ltr"},{id:"it-it",value:"it-it",displayString:"Italia (italiano)",direction:"ltr"},{id:"ja-jp",value:"ja-jp",displayString:"日本 (日本語)",direction:"ltr"},{id:"ko-kr",value:"ko-kr",displayString:"한국 (한국어)",direction:"ltr"},{id:"mr-in",value:"mr-in",displayString:"India (मराठी)",direction:"ltr"},{id:"nb-no",value:"nb-no",displayString:"Norge (norsk, bokmål)",direction:"ltr"},{id:"nl-be",value:"nl-be",displayString:"België (Nederlands)",direction:"ltr"},{id:"nl-nl",value:"nl-nl",displayString:"Nederland (Nederlands)",direction:"ltr"},{id:"pl-pl",value:"pl-pl",displayString:"Polska (polski)",direction:"ltr"},{id:"pt-br",value:"pt-br",displayString:"Brasil (português)",direction:"ltr"},{id:"pt-pt",value:"pt-pt",displayString:"Portugal (Português)",direction:"ltr"},{id:"ru-xl",value:"ru-xl",displayString:"Международное издание (Pусский)",direction:"ltr"},{id:"ru-ru",value:"ru-ru",displayString:"Россия (Pусский)",direction:"ltr"},{id:"sv-se",value:"sv-se",displayString:"Sverige (svenska)",direction:"ltr"},{id:"te-in",value:"te-in",displayString:"India (తెలుగు)",direction:"ltr"},{id:"th-th",value:"th-th",displayString:"ไทย (ไทย)",direction:"ltr"},{id:"tr-tr",value:"tr-tr",displayString:"Türkiye (Türkçe)",direction:"ltr"},{id:"vi-vn",value:"vi-vn",displayString:"Việt Nam (Tiếng Việt)",direction:"ltr"},{id:"zh-cn",value:"zh-cn",displayString:"中华人民共和国 (简体中文)",direction:"ltr"},{id:"zh-hk",value:"zh-hk",displayString:"香港特别行政區 (繁體中文)",direction:"ltr"},{id:"zh-tw",value:"zh-tw",displayString:"台灣 (繁體中文)",direction:"ltr"}];function r(e,t){return e.displayString<t.displayString?-1:e.displayString>t.displayString?1:0}function o(e){if(""!==document.dir)return"rtl"===document.dir;const t=i.find((t=>t.id===e));return t&&"rtl"===t.direction}},91042:function(e,t,n){n.d(t,{$j:function(){return i},Di:function(){return r},Jl:function(){return a},Of:function(){return d},Qx:function(){return u},fw:function(){return o},jr:function(){return s},y7:function(){return c}});const i="peregrine-widgetgroup",r="peregrine-widgets",o="peregrine-widget-settings",a="data-widget",s="data-widget-state",c="PeregrineWidgetEvent",d="expected-widget-cards",u="widgets-cards-args"},5813:function(e,t,n){var i;n.d(t,{$s:function(){return g},$v:function(){return F},CO:function(){return O},GR:function(){return r},H0:function(){return h},I1:function(){return f},IA:function(){return _},J8:function(){return u},L3:function(){return d},LJ:function(){return M},Mo:function(){return s},Mt:function(){return P},P$:function(){return E},Pg:function(){return v},Qn:function(){return T},Qs:function(){return k},S1:function(){return $},SE:function(){return o},SO:function(){return x},Td:function(){return y},UW:function(){return l},UY:function(){return C},YU:function(){return R},_O:function(){return H},eK:function(){return b},gr:function(){return D},hM:function(){return A},hZ:function(){return p},hk:function(){return c},i9:function(){return U},kJ:function(){return I},kX:function(){return w},lP:function(){return L},ly:function(){return m},n9:function(){return S},os:function(){return B},vy:function(){return N},yS:function(){return a}}),function(e){e.activityId="activityId",e.apiKey="apikey",e.audienceMode="audienceMode",e.bypassTrigger="bypass_trigger",e.cm="cm",e.complexInfoPaneEnabled="cipenabled",e.contentType="contentType",e.delta="delta",e.disableContent="disablecontent",e.disableTypeSerialization="DisableTypeSerialization",e.dprValue="dprValue",e.duotone="duotone",e.infopaneCount="infopaneCount",e.fdhead="fdhead",e.feedLayoutRequestType="t",e.filter="$filter",e.includeFollowingFilters="iff",e.ids="ids",e.interestIds="InterestIds",e.location="location",e.market="market",e.newsSkip="newsSkip",e.newsTop="newsTop",e.ocid="ocid",e.pageConfiguration="pgc",e.parentContentId="parent-content-id",e.parentNamespace="parent-ns",e.parentTitle="parent-title",e.providerId="ProviderId",e.queryQ="q",e.query="query",e.queryType="queryType",e.qScope="qscope",e.requestId="rid",e.responseSchema="responseschema",e.select="$select",e.session="session",e.signInCookieName="scn",e.skip="$skip",e.source="source",e.timeOut="timeOut",e.top="$top",e.type="type",e.user="user",e.wrapOData="wrapodata",e.wpoitems="wpoitems",e.wpoPageId="wpopageid",e.wpoSchema="wposchema",e.caller="caller",e.dhp="dhp",e.webWorker="webWorker",e.edgeNoAds="edgenoads",e.edgeReduceAds="edgereduceads",e.column="column",e.anaheimPageLayout="anaheimPageLayout",e.adRefreshVariant="adRefreshVariant",e.gdpr="gdpr",e.verticalName="verticalName"}(i||(i={}));const r="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM",o="r3HOPDA7wzesCD1BWVDtCJY24KnBcvx7vLcbGvb7YU",a="cp_msn_news",s="service/news/feed/pages/",c="serviceak/news/feed/pages/",d="news/feed/pages/",u="ntpxfeed",l="wpoxfeed",p="news/feed/pages/",h="winxfeed",g="wpodhp",f="gamingfeed",m="ntpfollowfeed",y="filteredfollowingchannels",v="prong1followfeed",S="prong1xfeed",w="prong2followfeed",b="followingxfeed",C="weblayout",T="ntpxfeed",k="prong2xfeed",P="news/feed/Segments",A="https://api.msn.com",I="https://sf-ppe.oneservice-test.msn.com",E="wpo-usebasedomain",R="wpo-useintdomain",M="https://ppe-api.msn.com",x="news/feed/pages/ntpxfeed",L="news/feed/pages/",F="xbox-browser",D="jY4a3fYtgzb7PIcW0Kj6amp5k6LwDefg6RSnkmxjto",O="prg-useakmaipath",_="prg-ssr-ext1sdns",N="msnkids",B="dy0rQcQaYj5cKZ2Cy0cdaRDJcC5maS5hPj9w2SbeRf",U="anaheim-ntp-following",$="vevII5dbHfpd1fHIMlPxbas6GZQEFOm4CozFHehOgW";function H(e,t){t.set("wrapodata","false").set("DisableTypeSerialization","true").set("queryType",e.queryType||"myfeed").set("timeOut",`${function(e){const{timeoutMs:t,query:n,customFeedTimeoutMs:i}=e;return n&&i?i:t}(e)}`).set("contentType",e.contentType).set("apikey",r),(e.useDelta||e.sessionId)&&(t.set("delta","true"),e.sessionId&&t.set("session",e.sessionId)),e.ocid&&t.set("ocid",e.ocid)}},22745:function(e,t,n){n.d(t,{T3:function(){return c},Uo:function(){return a},q1:function(){return s},tz:function(){return o}});var i=n(52185);let r;function o(e){r=e}function a(e,t,n=!0){const i=d();let o=i[e];if(o||(o=[],i[e]=o),o.push(t),n){const n=r(e);if(n){const e=n.getCurrentState();e&&t(e)}}}function s(e,t){const n=d(),i=n[e];if(i&&i.length){for(let e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}n[e]=i}}function c(e,t){const n=d()[e];if(n&&t)for(const e of n)e(t)}function d(){return i.Gq.get("reducers__callbackMap",(()=>({})))}},77016:function(e,t,n){n.d(t,{_:function(){return w}});var i=n(27670),r=n(45529),o=n(44446),a=n(90351),s=n(25514),c=n(46728),d=n(21215);const u=new Map;function l(e){return e+"."+r.B.connectorStateKey}const p={registerInjection:function(e,t){let n=u.get(t);n||(n=new Set,u.set(t,n)),n.add(l(e))},initializeExperience:function(e,t,n){const i=l(t),r={...(0,a.Z)(e,i,void 0),[n]:(0,a.Z)(e,l(n),void 0)};(0,s.Z)(e,i,r)},reportStateChange:function(e,t,n){const i=u.get(t);if(i)for(const r of i){const i=(0,a.Z)(e,r,void 0);i&&(0,s.Z)(e,r,{...i,[t]:n})}}};var h=n(85663),g=n(22745);class f{constructor(){this._connectorMap={},this._globalConnectors=[],this._allConnectors=[],this._getDataConnectorPendingPromises=new Map,this.reduce=this.reduce.bind(this)}connectors(){return this._allConnectors}connector(e){return this._connectorMap[e]}globalConnectors(){return this._globalConnectors}getDataConnector(e){const t=this.connector(e);if(t)return Promise.resolve(t);const n=this._getDataConnectorPendingPromises.get(e);if(n)return n.promise;let i,r;const o=new Promise(((e,t)=>{i=e,r=t}));return this._getDataConnectorPendingPromises.set(e,{promise:o,resolve:i,reject:r}),o}reduce(e,t){(0,h.isNullOrUndefined)(e)&&(e={});let n={...e},i=!1;const u=t.key;if(void 0!==t&&void 0!==u){const l="string"==typeof t.type;if(l&&t.type.endsWith(r.B.renderAction)){const t=u+"."+r.B.connectorStateKey,c=(0,o.Z)({},(0,a.Z)(e,t,void 0));(0,s.Z)(n,t,c),i=!0}else if(l&&t.type.endsWith(r.B.dataConnectorMergeInitAction)){const e=u,r=t.params[0];r&&(p.initializeExperience(n,e,r),i=!0)}else{const e=this._connectorMap[u];if(e){e.isGlobal&&(n=(0,c.Z)({},n));const r=this.computeNextStateForConnector(n,u,t);i=r.stateChanged,i&&(p.reportStateChange(n,u,r.newState),(0,d.N)()&&(0,g.T3)(u,r.newState))}else if(!(0,d.N)())throw new Error("Reducer for: "+u+" must not return undefined.")}}else Object.keys(this._connectorMap).forEach((e=>{this.computeNextStateForConnector(n,e,t).stateChanged&&(i=!0)}));return i?n:e}addSubReducerForConnector(e){if(!e)throw new Error("The parameter 'connector' cannot be null.");this.addConnectorToCollection(e),e.store.dispatch({key:e.fullNamespace,type:"@@connector-view/INIT"})}addConnectorToCollection(e){if(this._connectorMap[e.fullNamespace]=e,this._allConnectors.push(e),e.isGlobal&&this._globalConnectors.push(e),this._getDataConnectorPendingPromises.has(e.namespace)){const t=this._getDataConnectorPendingPromises.get(e.namespace);try{t.resolve(e)}catch(e){t.reject(e)}this._getDataConnectorPendingPromises.delete(e.namespace)}}computeNextStateForConnector(e,t,n){const i=this._connectorMap[t];if(!i.reducer)return{stateChanged:!1,newState:null};const o=t+"."+r.B.connectorStateKey,c=(0,a.Z)(e,o,void 0),d=this.subReduce(i.reducer,c,n);if(void 0===d)throw new Error("Reducer for: "+t+" must not return undefined.");const u=d!==c;return u&&(0,s.Z)(e,o,d),{newState:d,stateChanged:u}}subReduce(e,t,n){const i=e.reduce(t,n);return i!==t?i:t}}var m=n(11365),y=n(42122),v=n(52185);const S="__PageBaseInstance__";class w{constructor(e){let t;const n=[];if(void 0!==y.k&&y.k&&y.k.isDebug()){t=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||i.qC)((0,m.md)(...n))}else t=(0,m.md)(...n);this._rootReducer=new f,this._store=(0,i.MT)(this.rootReducer.reduce,e,t)}static resetPageBaseInstance(e){v.Gq.set(S,new w(e))}static deletePageBaseInstance(){v.Gq.delete(S)}get store(){return this._store}get rootReducer(){return this._rootReducer}static getInstance(e){return v.Gq.get(S,(()=>new w(e)))}start(){this.rootReducer.connectors().forEach((e=>e.onApplicationStart()))}}},45529:function(e,t,n){var i;n.d(t,{B:function(){return i}}),function(e){e.connectorStateKey="_@STATE@_",e.renderAction="@@connector-view/RENDER",e.dataConnectorMergeInitAction="@@data-connector/MERGE-INIT"}(i||(i={}))},30666:function(e,t,n){n.d(t,{e:function(){return u}});var i=n(45529),r=n(22745),o=n(89799),a=n(43852),s=n(11365),c=n(25514),d=n(82928);(0,r.tz)(d.K0);class u{get store(){return this._subspace}get fullNamespace(){return this._fullNamespace}get configHref(){return this._configHref}set configHref(e){this._configHref=e}constructor(e,t,n,i,r,a,c,d=!1){this.namespace=e,this.parentNamespace=t,this.rootReducer=n,this.reducer=i,this.config=a,this.requestContext=c,this.isGlobal=d,this._fullNamespace=void 0!==t&&""!==t?t+"."+e:e,this.selectState=this.selectState.bind(this),this._subspace=(0,s.Z)(this.selectState,this.namespace)(r);const u=this.perfTimeline=this.tryGetPerfTimeline(e);this.fetch=(0,o.Ud)({perfTimeline:u}),n.addSubReducerForConnector(this)}getCurrentState(){const e=this.store.getState()[i.B.connectorStateKey];if(!this.isGlobal){const t=this.rootReducer.globalConnectors();0!==t.length&&t.forEach((t=>{(0,c.Z)(e,t.namespace,t.getCurrentState())}))}return e}onApplicationStart(){}selectState(e){return e[this.namespace]}tryGetPerfTimeline(e){const t=e.split("_"),[n]=t,i=t[t.length-1];return(0,a.oA)(n,i)}}},28882:function(e,t,n){n.d(t,{r:function(){return s}});var i=n(52185),r=n(21215),o=n(14340),a=n(22745);class s extends o.E{constructor(e,t,n=Object.create(null)){super(e,t),this.namespace=e,this.config=t,this.state=n,this.propChangeSubscriptions=i.Gq.get(`${this.namespace}-PropSubs`,(()=>new Map)),this.notifyStateChange()}subscribe(e,t){this.propChangeSubscriptions.has(e)?this.propChangeSubscriptions.get(e).add(t):this.propChangeSubscriptions.set(e,(new Set).add(t))}unsubscribe(e,t){this.propChangeSubscriptions.has(e)&&this.propChangeSubscriptions.get(e).delete(t)}getCurrentState(){return{...this.state}}reset(){this.state=Object.create(null),this.propChangeSubscriptions.clear()}updateState(e,t){this.state[e]!==t&&(this.state[e]=t,this.notifySubscribers(e,t))}notifySubscribers(e,t){this.notifyStateChange();const n=this.propChangeSubscriptions.get(e);n&&n.size>0&&n.forEach((e=>e(t)))}notifyStateChange(){(0,r.N)()&&(0,a.T3)(this.namespace,this.getCurrentState())}}},73865:function(e,t,n){n.d(t,{F:function(){return r}});var i=n(14340);class r extends i.E{getCurrentState(){return null}}},14340:function(e,t,n){n.d(t,{E:function(){return r}});var i=n(77016);class r{static#e=this.isWCConnector=!0;constructor(e,t){this.namespace=e,this.config=t,this.store=null,this.parentNamespace=null,this.reducer=null,this.isGlobal=!1,this.requestContext=null,this.onApplicationStart=()=>{},this.configHref=null,this.fullNamespace=e,i._.getInstance().rootReducer.addConnectorToCollection(this)}getCurrentState(){throw new Error("Not implemented")}}},38947:function(e,t,n){n.d(t,{G:function(){return o}});var i=n(55600),r=n(58043);class o{static#e=this.endsWith=String.prototype.endsWith?function(e,t){return e.endsWith(t)}:i.Z;static handleAction(e,t,n){return!!o.endsWith(e.type+"",t.type)&&(n.apply(n,e.params),!0)}static handleActions(e,t,n){const i=e.type+"";return!!(0,r.Z)(t,(e=>o.endsWith(i,e.type)))&&(n.apply(n,e.params),!0)}static safeHandleAction(e,t,n){if(!o.endsWith(e.type+"",t.type))throw"The action payload does not match the action type.";return n.apply(n,e.params),!0}}},24709:function(e,t,n){n.d(t,{C:function(){return h}});var i=n(77016);function r(e,t,n,i){let r;return e&&(r=e.parentNamespace?e.parentNamespace+"."+e.namespace:e.namespace),{key:r,experienceInstanceId:i,type:t,params:n}}function o(e,t){return e?e.store.dispatch(t):i._.getInstance().store.dispatch(t)}var a=n(45529);class s{get send(){return this.dispatchAction()}constructor(e,t,n){this.type=e,this.observers=t,this.connector=n}dispatchAction(){return function(...e){const t=this.tryGetPerfTimeline(),n=t&&t.startMeasure("action",this.type).endMeasure,{payload:i,result:s}=this.getDispatchResult(e);return this.observers.forEach((e=>{try{e.filterConnector&&this.connector!==e.filterConnector||e.observer(i)}catch(t){console.log(`Error calling observer: ${JSON.stringify(e.observer)}, with error: ${t}`)}if(e.dispatchConnector){const t=r(e.dispatchConnector,a.B.renderAction,[],void 0);o(e.dispatchConnector,t)}})),n&&n(),s}}}class c extends s{constructor(e,t,n){super(e,t,n)}getDispatchResult(e){const t=r(this.connector,this.type,e,void 0);return{payload:t,result:o(this.connector,t)}}tryGetPerfTimeline(){return this.connector.perfTimeline}}var d=n(43852);class u extends s{constructor(e,t,n){super(e,t,null),this.experienceInstanceId=n}getDispatchResult(e){const t=r(void 0,this.type,e,this.experienceInstanceId);return{payload:t,result:o(void 0,t)}}tryGetPerfTimeline(){return(0,d.oA)("GlobalActionSender",this.experienceInstanceId||"unknown")}}var l=n(52185);let p=1;class h{get observers(){return l.Gq.get(this.observerKey,(()=>[]))}set observers(e){l.Gq.set(this.observerKey,e)}constructor(e){this.type=e,this.observerKey=`__ActionMap_${e}_${p++}`}getActionSender(e){let t;if(t="string"==typeof e?i._.getInstance().rootReducer.connector(e):e,t)return new c(this.type,this.observers,t)}getGlobalActionSender(e){return new u(this.type,this.observers,e)}registerObserver(e,t){const{dispatchConnector:n,filterConnector:i}=t||{};this.observers.push({observer:e,dispatchConnector:n,filterConnector:i})}unregisterObserver(e){const t=this.observers.findIndex((t=>t.observer===e));t>-1&&this.observers.splice(t,1)}unregisterObservers(){this.observers=[]}}},82928:function(e,t,n){n.d(t,{K0:function(){return m},Ki:function(){return y},oU:function(){return f}});var i=n(2907),r=n(82223),o=n(73264),a=n(98303),s=n(5302),c=n(33779),d=n(77016),u=n(52185),l=n(21215),p=n(22745);const h="GetDataConnector.skippedConnectors",g={};async function f(e){return e?await d._.getInstance().rootReducer.getDataConnector(e):null}function m(e){return d._.getInstance().rootReducer.connector(e)}async function y(e){const t=(0,i.M)(e);if(u.Gq.get(h,(()=>new Set)).has(t))return Promise.resolve();const n=u.Gq.get("dataConnectorLoadPromiseMap",(()=>({})));let f=n[t];if(f)return f;let m=g[t];return m||(m=r.n.loadExperience(t).catch((()=>{delete g[t]})),g[t]=m),f=new Promise((async t=>{try{const t=(0,i.M)(e),n=(0,i.Fr)(e),r=o.U.getConfig(n),s=await Promise.all([r,m]),c=s[0].properties,u=s[1],h=d._.getInstance(),g=u[t+"Connector"];if(!0===g.isWCConnector)new g(t,c);else{const e=u[t+"Reducer"],n=new g(t,"",h.rootReducer,new e(c),h.store,c,new a.fH);(0,l.N)()&&(0,p.T3)(t,n.getCurrentState())}}catch(e){const t={...s.NGC};(0,c.OO)(e,t,"Loading data connector failed.")}t()})),n[t]=f,f}},55584:function(e,t,n){n.d(t,{s:function(){return r}});var i=n(24709);class r{static#e=this.signedInStatus=new i.C("SignedInStatus");static#t=this.signedInStatusConfirmed=new i.C("SignedInStatusConfirmed");static#n=this.useEnterpriseCompliance=new i.C("UseEnterpriseCompliance");static#i=this.updateLocation=new i.C("UpdateLocation")}},69739:function(e,t,n){n.d(t,{n:function(){return v}});var i=n(523),r=n(30666),o=n(28123),a=n(48593),s=n(85856),c=n(98130),d=n(21215),u=n(16415),l=n(38947),p=n(55584),h=n(19625);class g{reduce(e,t){if(!e){return{signedIn:this.getSignInStatus(),useEnterpriseCompliance:!1}}if(!t)return e;let n,i=!1;return i=l.G.handleAction(t,p.s.signedInStatus,(t=>{n={...e,signedIn:t}})),i=i||l.G.handleAction(t,p.s.useEnterpriseCompliance,(t=>{n={...e,useEnterpriseCompliance:t}})),i=i||l.G.handleAction(t,p.s.updateLocation,(t=>{n={...e,location:t}})),n||e}getSignInStatus(){if((0,o.TJ)()){return(0,a.XS)().isSignedIn}if(!(0,d.N)()){const{oneServiceHeaders:e}=(0,u.sL)();if(e&&Object.keys(e).length>0&&e.authorization)return 2}if((0,o.hk)())return 0;if((0,o.P8)())return(0,s.x6)()?2:1;const e=c.jG.AuthCookieName;if(""==e)return 1;const t="app_anon"==e?"aace":"ace";return(0,h.ej)(t)?2:1}}var f=n(46124),m=n(44132);class y extends r.e{constructor(e,t,n,i,r,o,a){super(e,t,n,i,r,o,a,!0),this.initOverrides=()=>{}}static initialize(e,t,n){let r=e.connector(i.zz);return r||(r=new y(i.zz,"",e,new g,t,void 0,n)),(0,f.A)(r),r}getSignInState(){return this.getCurrentState().signedIn}setSignInState(e){const t=this.getCurrentState().signedIn;t!==e?(p.s.signedInStatus.getActionSender(this).send(e),m.M0.addOrUpdateTmplString(`auth-stateChange-${t}-${e}`)):p.s.signedInStatusConfirmed.getActionSender(this).send()}useEnterpriseCompliance(){return this.getCurrentState().useEnterpriseCompliance}}const v=y.initialize},45798:function(e,t,n){n.d(t,{Am:function(){return i},Zw:function(){return o},x1:function(){return r}});const i=a.bind(null,"object"),r=a.bind(null,"number"),o=a.bind(null,"string");function a(e,t){return("object"!=typeof t||null!==t)&&typeof t===e}},56037:function(e,t,n){function i(e,t,n,i,r,o,a,s,c,d){return{...{name:t||"",action:r,behavior:n,content:s,destinationUrl:o,ext:d,overrideDestinationUrl:a,type:i,feed:c},...e||{}}}n.d(t,{p:function(){return a},l:function(){return s}});var r=n(45798);const o=void 0;function a(...e){if(!e||e.length<2||!(0,r.Zw)(e[0])||!(0,r.Am)(e[1]))throw new Error("Invalid arguments");const t=e[0],n=e[1],a=(0,r.x1)(e[2])?e[2]:o,s=(0,r.Zw)(e[3])?e[3]:o,c=(0,r.x1)(e[3])?e[3]:(0,r.x1)(e[4])?e[4]:o,d=(0,r.Zw)(e[4])?e[4]:(0,r.Zw)(e[5])?e[5]:o,u=(0,r.Zw)(e[6])?e[6]:o,l=(0,r.Am)(e[4])?e[4]:(0,r.Am)(e[5])?e[5]:(0,r.Am)(e[6])?e[6]:(0,r.Am)(e[7])?e[7]:o;return i(o,t,a,c,s,u,d,n,o,l)}function s(...e){if(!e||e.length<1||!(0,r.Zw)(e[0]))throw new Error("Invalid arguments");const t=e[0],n=(0,r.x1)(e[1])?e[1]:o,a=(0,r.Zw)(e[2])?e[2]:o,s=(0,r.x1)(e[2])?e[2]:(0,r.x1)(e[3])?e[3]:o,c=(0,r.Am)(e[3])?e[3]:o;return i(o,t,n,s,a,o,o,o,o,c)}},57627:function(e,t,n){n.d(t,{X:function(){return a},c:function(){return s}});var i=n(78058),r=n(45798),o=n(56037);function a(...e){return new i.D((0,o.p)(...e))}function s(...e){if(!e||e.length<3||!(0,r.Am)(e[e.length-1]))throw new Error("Invalid arguments");const t=e.pop(),n=(0,o.p)(...e),a=Object.assign(n,t);return new i.D(a)}},70970:function(e,t,n){n.d(t,{V:function(){return s},u:function(){return a}});var i=n(78058),r=n(45798),o=n(56037);function a(...e){return new i.D((0,o.l)(...e))}function s(...e){if(!e||e.length<2||!(0,r.Am)(e[e.length-1]))throw new Error("Invalid arguments");const t=e.pop(),n=(0,o.l)(...e),a=Object.assign(n,t);return new i.D(a)}},16929:function(e,t,n){n.d(t,{g:function(){return r}});var i=n(2907);function r(e){return"string"==typeof(t=(0,i.Fr)(e))?t:t.instanceSrc;var t}},10290:function(e,t,n){n.d(t,{ITY:function(){return o}});var i=n(70041);const r={[i.jls]:"above-river-block",[i.BV5]:"action-tray",[i.YWQ]:"article-close-button",[i.gOp]:"article-related-stories",[i._9V]:"article-top-comment",[i.nXC]:"autos-carousel",[i.hiu]:"autos-entity-card-wc",[i._Dk]:"autos-entity-span",[i.iEA]:"back-to-top-button",[i.OTW]:"background-gallery",[i.q31]:"background-image",[i.HH0]:"bing-daily-quiz-card",[i.jXL]:"bing-health-card",[i.A_l]:"bing-health-fitness-card",[i.JkB]:"bing-homepage-feed",[i.y2o]:"boost-ad-card",[i.l0e]:"breaking-news-wc",[i.yLt]:"calendar-card",[i.X$j]:"card-action",[i.Vve]:"cashback-carousel-card",[i.V7e]:"casual-games-banner",[i.N6]:"casual-games-card",[i.WJ2]:"casual-games-carousel-card",[i.Qd1]:"casual-games-zh-carousel",[i.wUc]:"casual-games-feed",[i.HBe]:"casual-games-frame",[i.qHB]:"casual-games-game-card-carousel",[i.tJk]:"casual-games-gameplay",[i.EFl]:"casual-games-gameplay-right-rail",[i.i$x]:"casual-games-hub",[i.ieX]:"casual-games-landing-v2",[i.vJu]:"casual-games-prong2-carousel-card",[i.xGt]:"casual-games-stripe-carousel-card",[i.qrd]:"casual-games-user-profile-preview",[i.FoC]:"channel-entry-point",[i.pru]:"channel-filter-card",[i.TY]:"fre-entrypoint",[i.Uon]:"channel-interests-manager",[i.$sA]:"channel-mobile-content",[i.ya$]:"channel-page",[i.utF]:"channel-store",[i._FV]:"chrome-extension-page",[i.WMP]:"cms-base-experience",[i.iw_]:"shopping-cms",[i.jK4]:"codex-bing-chat",[i.J4S]:"cold-start",[i.p_9]:"common-auto-suggest",[i.exU]:"common-header",[i.zK8]:"common-search-box-edgenext",[i.g3x]:"common-settings-edgenext",[i.iUi]:"community-card",[i.h1P]:"community-compose-copilot",[i.leK]:"commute-card",[i.m6X]:"companion-widget",[i.YGz]:"conditional-banner-hp-wc",[i.rC1]:"conditional-banner-wc",[i.fJE]:"consumption-feed-wc",[i.xYH]:"consumption-page",[i.v$Q]:"content-flex-info-pane",[i.ssN]:"content-group",[i.XIX]:"content-group-card",[i.u5K]:"content-tts",[i.wRm]:"contextual-feedback-wc",[i.yR8]:"copilot-consumption-landing-page",[i.qHN]:"copilot-feed-view",[i.j9W]:"copilot-ruby-card",[i.PWY]:"copilot-suggestion-prompts",[i.MIk]:"cpc-monetization-dashboard",[i.DJ7]:"creator-spotlight-card",[i.lJY]:"daily-brief-card",[i.wlz]:"daily-brief-full-page-player",[i.YfO]:"daily-greeting-card",[i.tCy]:"daily-moments-card",[i.SNA]:"daily-wonder-card",[i.RmL]:"daily-wonder-copilot-card",[i.WTs]:"dashboard-fallback",[i.hch]:"dashboard-settings",[i.Ti2]:"debug-button",[i.Up2]:"dense-card",[i.fqP]:"desktop-feed-hub",[i.sVW]:"desktop-feed-views",[i.mVg]:"desktop-feed",[i.l1V]:"dev-tools",[i.NDs]:"did-you-know-image-wc-experience",[i.gk]:"did-you-know-wc-experience",[i.Tu3]:"digest-card",[i.q8y]:"display-ads",[i.M6f]:"distribution-feed",[i.HUp]:"distribution-header",[i.T9u]:"distribution-page",[i.FJH]:"distribution-pivots-nav",[i.fyI]:"donation-npo-card",[i._lg]:"edge-chromium-page",[i.WGZ]:"edge-shopping",[i.LHB]:"election-card",[i.YdT]:"emmx-entrypoint",[i.LDe]:"entertainment-card",[i.ooB]:"entertainment-intent",[i.hRd]:"entertainment-premier-card",[i.EpM]:"entry-point-hp-mobile",[i.A0u]:"entry-point",[i.ckf]:"entry-point-hp-ruby",[i.JZn]:"entry-point-mobile-hub",[i.lIP]:"entry-point-views",[i.NuV]:"esports-card",[i.dMV]:"example-offer-card",[i.DYF]:"experience-preview-cta",[i.b1M]:"family-card",[i.LRP]:"feed-container",[i.ISs]:"feed-level-feedback-wc",[i.Uu8]:"feed-navigation-hp",[i.tH5]:"feedback-card",[i.A1U]:"feedback-dialog-wc",[i.ySJ]:"feedback-link",[i.Sq1]:"finance-carousel",[i.mo8]:"float-button-group",[i.QTZ]:"following-fre-confirmation",[i.aJp]:"following-fre-full-width",[i.PYn]:"food-similar-items",[i.cdX]:"frequent-sites-card",[i.IOi]:"gaming-channel",[i.s_p]:"gaming-discover-strip",[i.oSF]:"gaming-page",[i.oR0]:"gaming-recentlyplayed-card",[i.KfJ]:"general-elections",[i.wge]:"grid-view-feed",[i.VtB]:"header-windows-shell-wc",[i.s67]:"health-articles-card",[i.ckV]:"health-augment-card",[i.wQF]:"health-diet-plan-schedule",[i.UKI]:"health-feedback",[i.YtU]:"health-fitness-carousel",[i.lBi]:"health-food-healtheffects",[i.rGG]:"health-food-recipes",[i.INF]:"healthhub-healthapp",[i.ySq]:"health-interests-manager",[i.S5B]:"health-qna-card-wc",[i.us7]:"health-tip-wc",[i.JTG]:"health-top-span",[i.m8e]:"health-topic-flyout",[i.FZm]:"health-translation",[i._hl]:"hero-container-wc",[i.TSk]:"homepage-footer",[i.Wfs]:"homepage-header",[i.rXk]:"homepage-pwa-mobile",[i.UE]:"horoscope-answer-card",[i.iOK]:"hot-list-card",[i.Mjw]:"hp-feed-switch",[i.u1Z]:"immersive-fullscreen",[i.UWU]:"inspiration-card",[i.wwX]:"interest-fre-card",[i.OiM]:"interest-management-card",[i.kWS]:"interests-manager",[i.eHH]:"interests-wc",[i.CG8]:"ios-pwa-install-instructions",[i.wiB]:"issue-reporting",[i.uG1]:"language-toggle",[i.OF7]:"linked-in-card",[i.qmE]:"local-hub-header",[i.j62]:"localize-strings-temp-experience",[i.BFg]:"mail-signout-banner",[i.vG7]:"manga-card",[i.u4d]:"manga-carousel",[i.Czh]:"market-language-toggle",[i.Q16]:"marketplace-card",[i.sgW]:"me-control",[i.KpP]:"me-stripe",[i.pn3]:"microsoft-edge-widget",[i.kJd]:"mobile-app-upsell",[i.YJV]:"mobile-consumption-page",[i.Kww]:"mobile-feed-hub",[i.$aC]:"mobile-feed-wc",[i.zgP]:"mobile-footer",[i.bNS]:"mobile-header",[i.HBJ]:"mobile-market-selector",[i.QMX]:"mobile-notification",[i.r_z]:"mobile-popup-window",[i.YDV]:"mobile-tip",[i.KgY]:"mobile-trending-search-card",[i.mnK]:"mobile-video-sd-card",[i.wRF]:"moment-in-time-hero",[i.J$A]:"money-augment-card",[i.Cdl]:"money-copilot",[i.guo]:"money-info",[i.tJU]:"money-info-card",[i.q_M]:"money-info-span",[i.rER]:"ms-rewards",[i.T5A]:"msn-feed",[i.cwF]:"msn-studio",[i.v61]:"native-ad-wc",[i.E6M]:"navigation-page-experience",[i.VWZ]:"newsletter-signup",[i.$el]:"newsletter-signup-page",[i.ffn]:"nextdoor-page",[i.xju]:"tracker-create",[i.YDB]:"tracker-page",[i.dT1]:"tracker-topic",[i.GHS]:"notification-bell",[i.IhH]:"notification-mini-card",[i.lCU]:"nudge-spotlight-card",[i.PcW]:"nurturing-banner",[i.isq]:"nurturing-coach-mark",[i.ZyT]:"office-apps",[i.vFd]:"office-coachmark",[i.o4h]:"office-documents-table",[i.nmZ]:"office-leftrail",[i.RGQ]:"on-this-day-card",[i.ne0]:"page-refresh",[i.Y8d]:"pano-page",[i.JYk]:"personal-finance-expense-distribution",[i.KEM]:"personal-finance-transactions-card",[i.J1W]:"personalize-nav-button",[i.Vdi]:"photo-card",[i.JiM]:"pill-wc",[i.gYv]:"pivots-mobile",[i.Fj8]:"polls-card",[i.Dzg]:"premium-profile-promo-card",[i.FYi]:"pride-event-card",[i.bN3]:"prism-carousel-card",[i.o1e]:"prism-feed",[i.vPc]:"prism-sd-card",[i.l1J]:"proactive-feedback-wc",[i.D7S]:"productivity-hub",[i.qym]:"profile-articles",[i.SYh]:"promoted-ad-wc",[i.iuJ]:"publisher-list",[i.wr4]:"publisher-subscribe-follow-button",[i.fyJ]:"pull-to-refresh",[i.sPK]:"pulse-edgenext",[i.qZg]:"pulse-prong",[i.yHC]:"qna-card",[i.CVw]:"qna-feed-404-page",[i.SVM]:"qna-feed-card",[i.pZ3]:"qna-feed-card-menu",[i.PE$]:"qna-feed-carousel",[i.wSV]:"qna-feed-categories-menu",[i.MAN]:"qna-feed-explore-topics",[i.JVh]:"qna-feed-list",[i.JK5]:"qna-feed-my-topics",[i.FHt]:"qna-feed-related-questions",[i.QWn]:"qna-feed-report-card",[i.d22]:"qna-feed-suggested-topics",[i.OuO]:"qna-feed-topic-detail",[i.PjF]:"qna-feed-trending-questions",[i.yuv]:"quiz-card",[i.w_t]:"reaction-breakdown-dialog",[i.kvh]:"real-estate-card",[i.hn8]:"recipes-sd-card",[i.Ph9]:"recommended-interests",[i.WOb]:"recommended-sites",[i.IF2]:"rewards-card",[i.EeD]:"rewards-flyout",[i.ZwZ]:"rich-calendar-card",[i.oBI]:"rich-calendar-landing-page",[i.vx_]:"exam-page",[i.QI2]:"right-rail-provider-carousel",[i.HTd]:"ruby-board-home-page",[i.LoE]:"ruby-page",[i.Esr]:"scroll-down-button",[i.Mb7]:"sd-card-mask",[i.SH9]:"search-box-wc",[i.eMK]:"search-history-edgenext",[i.x6e]:"select-carousel",[i.Kfg]:"shared-hero-news-card",[i.Ry6]:"stack-card",[i.Vrn]:"shared-links",[i.PP6]:"sharepoint-news-card",[i.srZ]:"shopping-all-stores-page",[i.uT9]:"shopping-article-page",[i.jZ0]:"shopping-augment-card",[i.xhj]:"shopping-banner-sd-card",[i.J3F]:"shopping-bing-product-details",[i.DbV]:"shopping-blackjack-deal-page",[i.nii]:"shopping-blackjack-page",[i.h0c]:"shopping-buying-guide",[i.$Ot]:"shopping-buying-guide-premium-card",[i.RMj]:"shopping-buying-guides-card",[i.CRe]:"shopping-card-actions",[i.Tk6]:"shopping-card-wc",[i.Cg6]:"shopping-carousel-prong-wc",[i.Jvt]:"shopping-carousel",[i.vsY]:"shopping-category-page",[i.B$S]:"shopping-checkout-modal",[i.wrw]:"shopping-cold-start",[i.K1C]:"shopping-coupons-page",[i.TOy]:"shopping-deals-home-page",[i.fPu]:"shopping-debug-page",[i.MLM]:"shopping-entry-base-experience",[i.Xz8]:"shopping-events-deal-card",[i.cvo]:"shopping-fashion-carousel",[i.gRh]:"shopping-gem-hero-card",[i.ZTk]:"shopping-grid",[i.T4c]:"shopping-grouped-carousel",[i.oeN]:"shopping-guides-page",[i.Af8]:"shopping-homepage",[i.Nyn]:"shopping-inspiration",[i.RfQ]:"shopping-leaderboard",[i.MTL]:"shopping-modal",[i.l6J]:"shopping-model-overlay",[i.Qwq]:"shopping-moment-in-time-page",[i.Cmj]:"shopping-offer-card",[i.ky5]:"shopping-page-base",[i.n_R]:"shopping-page-content",[i.bsP]:"shopping-pivot-feed",[i.DeS]:"shopping-product-detail-page",[i.lvU]:"shopping-river-card",[i.BKx]:"shopping-sd-card",[i.PwP]:"shopping-search",[i.F_I]:"shopping-shopthelook-page",[i.rdu]:"shopping-top-span",[i._jE]:"sign-in-control",[i.ItY]:"sign-in-flyout",[i.Es2]:"signal-overlay",[i.lIM]:"social-avatar",[i.nUs]:"social-bar-wc",[i.AQ8]:"social-comment-box",[i._Xv]:"social-comment-wc",[i.EVj]:"social-entrypoint",[i.gDP]:"social-lead-gen-in-article",[i.sGB]:"social-notification",[i.LrE]:"social-post-editor",[i.UhP]:"social-profile-action-menu",[i.nA9]:"social-profile-appeal",[i.Bu7]:"social-profile-card",[i.RSh]:"social-profile-promotion",[i.PAH]:"social-profile-rejection-details",[i.$z3]:"social-profile-topics",[i.oi0]:"social-related-sources",[i.vb7]:"social-report-menu",[i.koT]:"social-rewards-medal",[i.Bqp]:"social-rewards-promotion",[i.Gcu]:"social-star-rating",[i.hO3]:"social-subscription-banner",[i.uT1]:"social-subscription-notification",[i.yHN]:"social-subscription-overlay",[i.FRx]:"social-subscription-overlay-summary",[i.e8Z]:"social-subscription-upsell",[i.F9x]:"social-support-result",[i.aGd]:"social-tip-history",[i.aol]:"social-tip-introduction",[i.xQZ]:"social-tip-promotion",[i.Tx5]:"social-tip-promotion-in-article",[i.RnN]:"social-tip-selection",[i.Sjk]:"sports-around-the-league",[i.CSR]:"sports-augment-card",[i.QZE]:"sports-background-ux",[i.YB9]:"sports-brackets",[i.bru]:"sports-card",[i.kAw]:"sports-commentary",[i.SOf]:"sports-copilot-navigation",[i.PvM]:"sports-countdown-timer",[i.Htk]:"sports-cricket-layout-manager",[i.FbH]:"sports-cricket-league-stats",[i.SA8]:"sports-cricket-match-row",[i.DIt]:"sports-cricket-partnerships",[i.JVb]:"sports-cricket-rankings",[i.GOh]:"sports-cricket-scorecard",[i.qAv]:"sports-cricket-scores-and-schedule",[i.og3]:"sports-entity-header",[i.iS1]:"sports-featured-matches-card",[i.AQ0]:"sports-featured-team-list",[i.riL]:"sports-fre-panel",[i.kFj]:"sports-full-standings",[i.cNB]:"sports-full-stats",[i.lQV]:"sports-game-information",[i.rJS]:"sports-game-score",[i.CxH]:"sports-game-summary",[i.EEj]:"sports-game-summary-full",[i.VaA]:"sports-game-timeline",[i.veL]:"sports-gc-player-stats",[i.sMx]:"sports-gc-team-stats",[i.MHK]:"sports-gen-ui-page",[i.TGc]:"sports-gpt-analysis",[i.xeP]:"sports-headlines-header",[i.z7Q]:"sports-headlines-main-story",[i.J6h]:"sports-headlines-story-carousel",[i.N2F]:"sports-headlines-timelines",[i.Vhw]:"sports-info",[i.pDE]:"sports-info-span",[i.SAx]:"sports-layout-renderer",[i.F73]:"sports-match-row",[i.TWs]:"sports-medal-count-list",[i.qBv]:"sports-medal-summary-list",[i.F8w]:"sports-medal-tracker-list",[i.ar_]:"sports-mobile-tab-panel",[i.udo]:"sports-olympic-card",[i.E1P]:"sports-olympics-header-row",[i.$Uw]:"sports-olympics-result-full",[i.j9d]:"sports-olympics-schedule-full",[i.WK0]:"sports-person-match-row",[i.Cx3]:"sports-personalization-strip",[i.zUe]:"sports-pick-winner",[i.PLO]:"sports-player-bio",[i.vk4]:"sports-player-insights",[i.c8i]:"sports-popular-card-wx",[i.q_V]:"sports-previous-matchups",[i.e0Y]:"sports-promo-card",[i.DoE]:"sports-rankings-full",[i._eh]:"sports-retention-full",[i.R9w]:"sports-scores-and-schedule",[i.LxE]:"sports-scores-and-schedule-full",[i.i2]:"sports-scoring-summary",[i.w_L]:"sports-squad",[i.rfA]:"sports-standings",[i.EjJ]:"sports-standings-list",[i.SJ$]:"sports-stat-leaders",[i.we$]:"sports-stats",[i.mqM]:"sports-story-player",[i.Tlv]:"sports-tab-layout",[i.sXS]:"sports-team-formation",[i.ljh]:"sports-team-probability",[i.MPR]:"sports-tennis-scores-and-schedule-full",[i.zBK]:"sports-tennis-tournament-info",[i.niV]:"sports-tournament-info",[i.PCA]:"sports-tournament-leaderboard",[i.Bm$]:"sports-tournament-match-row",[i.qwu]:"sports-tournament-result-and-schedule",[i.$58]:"sports-tournament-schedule",[i.aNp]:"sports-tournament-standings",[i.Ugt]:"sports-trending-carousel",[i.sPg]:"sports-unavailable-players",[i.RzN]:"sports-video-list",[i.z82]:"sports-worldcup-card",[i.GzM]:"spotlight-card",[i.Inx]:"starter-kit",[i.nZh]:"streaks-badge",[i.Kls]:"stripe-wc",[i.QE3]:"summary-card-wc",[i.rnA]:"super-breaking-news",[i.c8c]:"super-nav",[i.iJ8]:"super-nav-coach-mark",[i.uuz]:"superapp-banner",[i.xbu]:"theme-picker",[i.LIg]:"tips-card",[i.qZt]:"ms-toast",[i.ZjC]:"todo-card",[i.Lfv]:"top-comments-card",[i.X8y]:"top-sites-bookmarks",[i.gLP]:"top-sites-edgenext",[i.sVH]:"top-sites-newsbar",[i.xXj]:"topic-tags",[i.yn7]:"traffic-card",[i.OX5]:"traffic-hero",[i.Pqz]:"translate-temporary",[i.sc_]:"travel-article-page-card",[i.s76]:"travel-card",[i.q7$]:"travel-carousel",[i.Jzc]:"travel-collection-card",[i.opx]:"travel-destination",[i.EMK]:"travel-destination-banner",[i.zu2]:"travel-destination-details-banner",[i.qGw]:"travel-feed",[i.$h8]:"travel-flight-carousel",[i.PkV]:"travel-hotel-carousel",[i.YuV]:"travel-inspiration-card-wc",[i.xl0]:"travel-landing-page",[i.sKb]:"travel-msn-hp-card",[i.kM8]:"travel-sd-carrentals-card",[i.gOk]:"travel-sd-destinations-card",[i.WfD]:"travel-sd-flights-card",[i.R5X]:"travel-sd-hotels-card",[i.u8s]:"travel-sd-themes-card",[i.zTi]:"travel-tour-activity-card",[i.bOQ]:"trending-now-card",[i.veX]:"trending-search-card",[i.jhm]:"ugc-creator-homepage",[i.o9I]:"unified-mobile-feed",[i.s3P]:"vertical-left-nav",[i.cTk]:"video-card",[i.jb]:"video-details",[i.cWp]:"video-details-kit",[i.lEL]:"views-coachmark",[i.jjB]:"views-native-ad",[i.p66]:"views-rail",[i.EYD]:"waffle-wc",[i._2w]:"wallet-personalized-offer-sd-card-wc",[i.QnV]:"watch-filter-channel",[i.N6K]:"watch-take-a-break-header",[i.S65]:"watch-wc",[i.saD]:"water-tracker-card",[i.F11]:"waterfall-view-feed",[i.$38]:"weather-card",[i.gv3]:"weather-feed-wc",[i.hDJ]:"weather-forecast-day",[i.S9H]:"weather-forecast-per-hour",[i.VnC]:"weather-hero-experience",[i.Hpz]:"weather-historical-temperature",[i.VyG]:"weather-hourly-histogram",[i.tHe]:"weather-immersive-forecast-wc",[i.IUC]:"weather-location-card",[i.WLc]:"weather-map-group-switcher-button",[i.JKj]:"weather-map-legend",[i.tNG]:"weather-map-timeline",[i.i5N]:"weather-map",[i.vTu]:"weather-minimap",[i.ihw]:"weather-one-liner",[i.Nty]:"weather-overview",[i.nam]:"weather-page",[i.OvS]:"weather-report-issue-dialog",[i.D6P]:"weather-today-history",[i.yjx]:"weather-today-mini",[i.gTT]:"weather-top-section-card",[i.sJx]:"weather-video-entry",[i.YD1]:"welcome-greeting-light",[i.lTG]:"welcome-greeting",[i.Obu]:"widget-picker-wc",[i.x_j]:"widgets-dynamic-feed",[i.k0t]:"widgets-consumption-page",[i.j9B]:"widgets-home-page",[i.a7N]:"widgets-notifications-card",[i.Pte]:"widgets-privacy",[i.UtR]:"widgets-region",[i.JqL]:"widgets-start-feed",[i.dMz]:"win-app-wc",[i.Uq1]:"windows-office-feed",[i.jri]:"windows-shell-banners-manager",[i.dxZ]:"windows-shell-entry",[i.Uoh]:"windows-shell-header",[i.dTK]:"windows-shell-location-dialog",[i.B5t]:"windows-shell-notification-settings",[i.zk5]:"windows-shell-settings-menu",[i.uB2]:"windows-shell-soft-landing",[i.KPU]:"xbox-feed-wc",[i.rc4]:"xfeed-wc",[i.Wm6]:"consumption-landing-page",[i.$WY]:"msn-router",[i.Hmd]:"msn-unified-consumption",[i.sth]:"gem-consumption-page"};function o(e){return r[e]}},20850:function(e,t,n){n.d(t,{Fg:function(){return b}});var i=n(43852),r=n(5302),o=n(33779),a=n(2907),s=n(82223),c=n(73264),d=n(17268),u=n(34254),l=n(10290),p=n(82928),h=n(9791),g=n(51389);const f={DisplayAdsWC:(0,g.V8)("display-ads"),ViewsNativeAd:(0,g.V8)("views-native-ad")};var m=n(21215),y=n(52185);const v="WebComponentLoader.SkippedExperience",S="WebComponentLoader.LoadedExperience",w="WebComponentLoader.ModuleLoadPromiseMap",b=(0,m.N)()?(0,h.Z)(T,(e=>(0,a.B5)(e.configRef))):T,C=()=>y.Gq.get(S,(()=>[]));async function T(e){try{const{configRef:t,configRef:{experienceType:r}}=e;if(y.Gq.get(v,(()=>new Set)).has(r))return;const o=(0,u.gy)(r);o&&o.shouldResolve&&await o.shouldResolve();const a=(0,i.oA)(r,e.instanceId);if((0,m.N)()||C().push(e),window.customElements.get((0,l.ITY)(r)))return void await k(t,a);const c=k(t,a),d=function(e,t){const n=y.Gq.get(w,(()=>({})));let r=n[e];if(r)return r;return r=(0,i.fW)((()=>s.n.loadExperience(e)),"scripts",t),n[e]=r,r}(r,a),p=(await Promise.all([c,d]))[1];await async function(e,t){const i=t[e],r=t[e+"Template"];let o=t[e+"Styles"];if(!(0,m.N)()){const n=t[e+"SSRStyles"];o=n||o}const a=(0,l.ITY)(e),s=function(e,t){if(void 0!==t)return{DisplayAdsWC:(0,g.V8)("display-ads",t),ViewsNativeAd:(0,g.V8)("views-native-ad",t)}[e];return f[e]}(e),c=await Promise.resolve().then(n.bind(n,52166));if(c.FASTElement.define(i,{name:a,template:r,styles:o,...i.definition}),s){class e extends i{}c.FASTElement.define(e,{name:s,template:r,styles:o,...i.definition})}}(r,p)}catch(t){const n={...r.gzO};(0,o.OO)(t,n,"Loading web component experience failed.",void 0,{configInfo:e})}}async function k(e,t){const n=await(0,i.fW)((()=>c.U.getConfig(e)),"config",t);if(!n)return;const r=n.properties;if(!r||!r.dataConnectors||r.dataConnectors.length<=0)return;const o=t&&t.startMeasure("loadDataConnectors").endMeasure,a=d.j.getChildrenDataConnectorConfigInfos(r).map((e=>(0,p.Ki)(e)));await Promise.all(a),o&&o()}},29715:function(e,t,n){n.d(t,{l:function(){return E}});var i=n(33940),r=n(73264),o=n(28904),a=n(42590),s=n(33117),c=n(89799),d=n(242),u=n(33779),l=n(5302),p=n(86117),h=n(43225),g=n(93441),f=n(34254),m=n(81586),y=n(90061);class v extends Event{static#e=this.type="pending-task";constructor(e){super(v.type,{bubbles:!0,composed:!0}),this.complete=e}static isPendingTask(e){return e.type===v.type&&"function"==typeof e.complete?.then}}var S=n(78058),w=n(21215),b=n(52185);const C="__propsMap__",T="__currentPropsToken__",k=()=>(b.Gq.get(C)||b.Gq.set(C,{}),b.Gq.get(C));b.Gq.set(C,{}),b.Gq.set(T,1);var P=n(88055),A=n(72685);const I="props-token";class E extends o.H{constructor(){super(...arguments),this.ensureObservableBeforeConnect=!1,this.hydratable=!1,this.isSSRRendered=!1,this.useTTSRMarker=!1,this.needPendingTask=!1}connectedCallback(){this.initializeCore().then((()=>this.ttvrEnd=this.perfTimeline?.startMeasure("render").endMeasure))}async initializeCore(){const e=this.getExperienceType(),t=this.perfTimeline=(0,s.Dd)(e,this.instanceId);if(this.initStart=t&&(()=>this.initEnd=t.startMeasure("init").endMeasure),this.fetch=(0,c.Ud)({perfTimeline:t}),(0,d.O8)("WCE.Count"),(0,w.N)())this.hydratable=this.hasAttribute("defer-hydration")||this.hasAttribute("needs-hydration"),this.isSSRRendered=this.hasAttribute("needs-hydration"),this.useTTSRMarker=this.hasAttribute("use-ttsr")||this.hasAttribute("needs-hydration"),this.initializeAsync();else{const e=this.initializeOnServerSide();this.needPendingTask&&this.dispatchEvent(new v(e))}}async initializeOnServerSide(){this.initStart?.(),this.needPendingTask=!1;const e=this.getExperienceType();try{const e=this.getConfigRef();if(!this.config){let t;if("string"!=typeof e)try{t=r.U.getConfigSync(e)}catch(e){}t||(this.needPendingTask=!0,t=await r.U.getConfig(e)),this.config=t.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const e=this.getTelemetryContract();this.telemetryObject=new S.D(e)}const t=this.experienceConnected();t&&(this.needPendingTask=!0,await t),super.connectedCallback(),this.shadowDomPopulated(),this.initEnd?.()}catch(t){if(this.initEnd?.({customSuffix:"error"}),(0,u.OO)(t,l.xuo,`Exception web component experience(${e}) initializeOnServerSide.`,`ssrLayout:${window.ssrLayoutState?.selectedFeedDisplaySetting};edgeHeader:${JSON.stringify(window.edgeNTPHeader)}`),this.lifecycleExceptionToThrowErrorOnServerSide)throw t.message=`InitializeOnServerSide exception in ${e}: ${t.message}`,t}}async initializeAsync(){this.hydratable&&await(0,y.ZH)(this),this.initStart?.(),this.reportStartTimeToMilestoneConnector(g.g.updateVisuallyReadyTiming);const e=this.getExperienceType();try{const t=this.getConfigRef();if(!this.config){const e=await r.U.getConfig(t);this.config=e.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const e=this.getTelemetryContract();this.telemetryObject=new S.D(e)}const{stalenessInfo:n}=this.config;n&&n.isStaleCheckRequired&&(0,P.MV)({experienceType:e,thresholdMinutes:n.staleThreshold,criticalCallback:()=>this.prerenderRefreshCritical(),delayCallback:()=>this.prerenderRefresh(),isRequiredForInitialRendering:n.isRequiredForInitialRendering}),this.ensureObservableBeforeConnect&&this.$fastController.bindObservables();const i=this.experienceConnected();if(i){const e=this.hydratable&&y.iA?(0,y.bE)(`${this.getExperienceType()}:experienceConnected`):void 0;e?.start(),await i,e?.markEnd()}if(this.hydratable){const e=y.iA?(0,y.bE)(`${this.getExperienceType()}:beforeHydration`):void 0;e?.start(),await this.beforeHydration(),e?.markEnd()}super.connectedCallback(),this.shadowDomPopulated(),this.hydratable&&await this.afterHydration(),this.perfTimeline&&(0,s.d0)(this,this.perfTimeline,A.y),this.initEnd?.()}catch(t){(0,u.OO)(t,l.xuo,`Exception web component experience initializeAsync. ExperienceType: ${e}`,`ssrLayout:${window.ssrLayoutState?.selectedFeedDisplaySetting};edgeHeader:${JSON.stringify(window.edgeNTPHeader)}`),this.processExperienceInitializeError(),this.initEnd?.({customSuffix:"error"})}}experienceConnected(){}beforeHydration(){}afterHydration(){}shadowDomPopulated(){}prerenderRefreshCritical(){return Promise.resolve(void 0)}prerenderRefresh(){}processExperienceInitializeError(){}getConfigRef(){return{instanceSrc:this.instanceSrc,experienceType:this.getExperienceType(),sharedNs:this.sharedNs}}getTelemetryContract(){return{type:m.c9.Module,name:this.getExperienceType()}}getApproxTTVRValue(e){const t=(0,d.Ou)();if(this.useTTSRMarker&&t.isSSRCompleted)return t[p.nz+(e||this.getExperienceType())]||t[p.nz+"Complete"]}markVisuallyReady(e,t){const n=this.getApproxTTVRValue();t??=void 0===n,e=n||e;const i=(0,p.o_)(this.getExperienceType(),!1,e,t);return this.reportEndTimeToMilestoneConnector(g.g.updateVisuallyReadyTiming,e),this.ttvrEnd?.({endTime:e}),this.visualReadinessCallback?.(),i}markVisuallyReadyRaf(e){(0,h.c)((()=>this.markVisuallyReady(e)))}reportStartTimeToMilestoneConnector(e){this.reportTimeToMilestoneConnector(e,performance.now())}reportEndTimeToMilestoneConnector(e,t){this.reportTimeToMilestoneConnector(e,void 0,t||performance.now())}reportTimeToMilestoneConnector(e,t,n){const i=(0,f.S0)();i&&e.getActionSender(i).send({experienceType:this.getExperienceType(),experienceInstance:this.instanceId,startTime:t,endTime:n})}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===I){const e=function(e){const t=k(),n=t[e];return delete t[e],n}(n);Object.assign(this,e)}}}(0,i.gn)([(0,a.Lj)({attribute:"config-instance-src"})],E.prototype,"instanceSrc",void 0),(0,i.gn)([(0,a.Lj)({attribute:"config-shared-ns"})],E.prototype,"sharedNs",void 0),(0,i.gn)([(0,a.Lj)({attribute:"instance-id"})],E.prototype,"instanceId",void 0),(0,i.gn)([(0,a.Lj)({attribute:I})],E.prototype,"propsToken",void 0)},49903:function(e,t,n){n.d(t,{Ot:function(){return S}});var i=n(31699),r=n(85594),o=n(49218),a=n(2907),s=n(16929),c=n(10290),d=n(20850),u=n(44132),l=n(81586),p=n(78058),h=n(5302),g=n(86117),f=n(21215);const m={};function y(e,t){if(!t)return;const{properties:n,attributes:r}=t;if(n&&Object.assign(e,n),r)for(const[t,n]of Object.entries(r))"boolean"==typeof n?i.S.setBooleanAttribute(e,t,n):"number"==typeof n?e.setAttribute(t,n.toString()):e.setAttribute(t,n)}class v extends r.Pq{bind(e){e.onUnbind(this);const t=e.targets[this.targetNodeId],{events:n,properties:i,instanceKey:r}=this.options||{};if(n)for(const[e,i]of Object.entries(n))t.addEventListener(e,i);let o;if(r&&(o=m[r]),o)return o.elements.push(t),!t.telemetryObject&&i?.telemetryObject&&(t.telemetryObject=i.telemetryObject),void y(t,o.options);Object.assign(t,i)}unbind(e){const t=e.targets[this.targetNodeId];if(this.options?.events)for(const[e,n]of Object.entries(this.options?.events))t.removeEventListener(e,n);const n=this.options?.instanceKey;if(n){const e=m[n];if(e){const n=e.elements.indexOf(t);n>=0&&e.elements.splice(n,1)}}}}function S(e,t){if(!e)return;if(!e.configRef||!e.configRef.experienceType)return void u.M0.sendAppErrorEvent({...h.tkv,message:`ConfigRef for InstanceId "${e?.instanceId}" is ${e?.configRef?"invalid":"missing"}`});t&&t.ttvrMarkerAggregate&&(0,g.aR)(e.configRef.experienceType,t.ttvrMarkerAggregate,!0);const n=function(e,t){const{configRef:n}=e,i=function(e){const t=e?.properties;return t?.cardLayout}(t),r=function(e){const t=e?.properties;return t?.cardType}(t),o=r?`_${r}`:"";return`${n.experienceType}_${n.instanceSrc}_${n.sharedNs||""}_${e.instanceId}_${i||""}${o}`}(e,t);if(!1!==t?.memoize&&(0,f.N)()){const i=m[n];let r;if(i){if(t)for(const e of i.elements)y(e,t);i.options=t,r=i.template}else r=w(e,n,t),m[n]={template:r,options:t,elements:[]};return r}return w(e,n,t)}function w(e,t,n){let i=n?.telemetryObject;if(!i){const t={type:l.c9.Module,name:e.configRef.experienceType};i=new p.D(t)}const r={...n?.properties,telemetryObject:i};let u;!1!==n?.includeTelemetryTag&&(u=i.getMetadataTag());const h={instanceKey:t,events:n?.events,properties:r},g=(0,a.M)(e),f=(0,s.g)(e),m=(0,c.ITY)(g);(0,d.Fg)(e);const y=Object.entries(n?.attributes??{}).map((([e,t])=>"boolean"==typeof t?t?e:"":`${e}=${t}`)).join(" ");return o.dy`<${o.dy.partial(m)} config-instance-src=${o.dy.partial(f)} config-shared-ns=${t=>e.configRef?.sharedNs} instance-id=${o.dy.partial(e.instanceId)} data-t=${e=>u} ${function(e){return e?new v(e):""}(h)} ${o.dy.partial(y)}></${o.dy.partial(m)}>`}r.m0.define(v)},72685:function(e,t,n){n.d(t,{y:function(){return r}});var i=n(58968);function r(){return new Promise((e=>i.H.enqueue((()=>e()))))}},83226:function(e,t,n){n.d(t,{Bc:function(){return a},LB:function(){return r},W_:function(){return o},aF:function(){return s}});var i=n(22011);function r(e,t,n){return!(!n||!e||e<i.PQ)&&!t}function o(e,t,n){try{return e&&t&&t.includes(i.my)&&"weather"!==n&&"finance"!==n?i.SL:e}catch(e){}return e}function a(e,t=!1){const{itemOverrides:n}=e||{},i=n&&n.find((e=>"should1sUseFdheadQsp"===e.key));if(i&&i.value)return"true"===i.value;if(t)return!1;const r=n&&n.find((e=>"flights"===e.key||"appendflights"===e.key.toLowerCase()));return!!(r&&r.value&&r.value.length>0)}function s(e){return!(!e||!e.includes(i.aj))}},32598:function(e,t,n){n.d(t,{Mx:function(){return r},hJ:function(){return o}});var i=n(22011);function r(e,t=i.PC){const n=t.length,r=[];return e&&e.length&&(e.forEach((e=>{const i=e&&e.trim();i&&i.length>=n&&i.substring(0,n).toLowerCase()===t&&r.push(i.toLowerCase())})),r.sort()),r}function o(e,t=!1,n=""){let r=i.PC;return t?r=i.SD:n.toLocaleLowerCase()==="windowsShell".toLocaleLowerCase()||n.toLocaleLowerCase()==="windowsShellV2".toLocaleLowerCase()?r=i.RX:n.toLocaleLowerCase()!=="winWidgets".toLocaleLowerCase()||window?.location?.search?.includes("reqsrc=vp")||window?.location?.search?.includes("vptest")||(r=i.dN),r}},35587:function(e,t,n){n.d(t,{q:function(){return E}});var i=n(5813),r=n(52541),o=n(98130),a=n(7733),s=n(13218),c=n(28951),d=n(97265),u=n(88048),l=n(70249),p=n(22680),h=n(21215),g=n(52185);var f=n(16715),m=n(62328),y=n(52211),v=n(82854),S=n(44132),w=(n(33779),n(5302),n(77062)),b=n(77770),C=n(26156);const T="gaming",k="following",P="filteredChannels",A="outlookchannels",I=new Map([["msNtpReducedAdsSdCards_stage1","reducedadss1"],["msNtpReducedAdsSdCards_stage2_group1","reducedadss2g1"],["msNtpReducedAdsSdCards_stage2_group2","reducedadss2g2"],["msNtpReducedAdsSdCards_stage3","reducedadss3"]]);var E;!function(e){async function t(e,t,u){const m=new a.h((0,p.zp)()),R=o.jG.UserId,{CurrentRequestTargetScope:M={},WidgetAttributes:x={},CurrentMarket:L}=o.jG;let F=t&&t.flightData;if(x.telemetry&&x.telemetry.tmpl&&x.telemetry.tmpl.includes("pwbingads2")){const e="prg-binghplite";F=F?`${F},${e}`:e}let D=new a.h(e);if(t.nextPageUrl)D=new a.h(new URL(t.nextPageUrl).search),!o.jG.SendFeedCallActivityIdInHeader&&o.jG.ActivityId&&(!n()||!function(){const e=s.Al.CurrentFlightSet.has("prg-prsw");return"edgeMobile"!==o.jG.AppType&&"winWidgets"!==o.jG.AppType&&(!e||"edgeChromium"!==o.jG.AppType)}()&&D.get("activityId")||D.set("activityId",o.jG.ActivityId));else{let e=!1;if("bingHomepage"===o.jG.AppType){const t=window._model;e=!t?.EnforceNotSignedIn&&("msa"===t?.UserType||"msb"===t?.UserType)}const a=2===await(0,y.XJ)()||e;l.n.publish(l.j.userIsSignedIn,{isSignedIn:a,src:"main"});(a?d.$D.getOneServiceParamsWithAuth(R,t.ocid,!1,F||null):d.$D.getOneServiceParamsWithoutAuth(R||t.muidFallback&&`m-${o.jG.ActivityId}`,t.ocid,!1,F||null,!1,!1,"homePage"===o.jG.AppType||"bingHomepage"===o.jG.AppType)).forEach((e=>e.value&&D.set(e.key,e.value))),D.set("contentType",t.contentType),t.requestType===r.xd.wpoService&&function(e,t,r,o){["bing-widgetfeed-Peregrine","winp2","anaheim-ntp-feeds","rubyntp","rubyprong2"].includes(e.ocid)||(((0,f.P4)()||(0,f.OO)())&&e.ocid===i.yS?t.set("apikey",i.SE):t.set("apikey",i.GR));(e.useDelta||e.sessionId)&&(t.set("delta","true"),e.sessionId&&t.set("session",e.sessionId));!t.get("newsTop")&&n()&&e.feedName!==P&&t.set("newsTop",null==(a=e.numberOfCards)||""===a||"string"!=typeof a&&"number"!=typeof a||isNaN(a)?"48":e.numberOfCards);var a;!t.get("newsSkip")&&n()&&e.feedName!==P&&t.set("newsSkip","0");if(!t.get("User")){const e=t.get("userid");e?t.set("User",`m-${e}`):r&&t.set("User",r)}t.delete("user")}(t,D,R);if(t.feedName&&"default"!=t.feedName&&t.feedName===T){const e=m.get("gamingInterestId");if(e)D.set("query",e);else{const e=window.widget__interestIds??t.interestIds;e&&(D.delete("query"),D.set("InterestIds",e));const{pageType:n}=x;"gamingfeed-widget"!==n&&"widget"!==s.Al.ClientSettings?.pagetype||D.set("wpopageid","wponoads");const i=window.widget__satoriId;"string"==typeof i&&D.set("satoriId",i)}}t.feedName===A&&(D.set("channels","true"),D.set("followersCount","true"),D.set("iff","true")),t.additionalFdhead&&D.set("fdhead",t.additionalFdhead),t.msnup&&D.set("msnup",t.msnup)}t?.shouldAddTelemetryParameters&&function(e){const{appType:t,type:n,name:i}=S.M0.getPageMetadata()?.contract?.page||{};t&&e.set("apptype",t),n&&e.set("pgtype",n),i&&e.set("pgname",i)}(D);const O=t.feedName===k||t.feedName===P;if(t.feedId){const e=t.useProviderKey||O&&!t.feedId.startsWith("Y_")?"ProviderId":"InterestIds";D.set(e,t.feedId)}1===t.edgeMobile&&D.set("edgeMobile","1"),1===t.edgeMobileAds&&D.set("edgeMobileAds","1"),1===t.oneULayout&&D.set("oneULayout","1"),O&&D.set("iff","true");const _=m.get("OneSvc-Uni-Feat-Tun");_?D.set("OneSvc-Uni-Feat-Tun",_):"url"===g.Gq.get("oneSvcUniTunMode")&&D.set("OneSvc-Uni-Feat-Tun",await d.$D.getUniFeatTunHeader()),!0===t.disableContent&&D.set("disablecontent","true"),t.contentId&&D.set("contentId",t.contentId),t.widgetsOn&&D.set("widgetsOn","true"),t.renderedSegments&&D.set("renderedSegments",t.renderedSegments),t.copilotApiSupported&&D.set("copilotApiSupported","true"),t.edgExpMask&&D.set("edgExpMask",t.edgExpMask),t.adsTimeout&&D.set("adsTimeout",t.adsTimeout.toString()),t.timeoutMs&&D.set("timeOut",t.timeoutMs.toString()),t.clientUtcOffset&&D.set("clientUtcOffset",t.clientUtcOffset),t.unusedDocIds&&D.set("unusedDocIds",t.unusedDocIds);const N=(0,w.Ee)();N>0&&D.set("cbypass",N.toString()),t.wpoPageId&&("wpoads"===t.wpoPageId.toLowerCase()&&"en-us"!==L?.toLowerCase()?D.set("wpopageid","wponoads"):D.set("wpopageid",t.wpoPageId)),(t.wpoSchema||t.wposchema)&&D.set("wposchema",t.wpoSchema??t.wposchema),t.newsTop&&n()&&D.set("newsTop",t.newsTop.toString()),t.newsSkip&&null==t.nextPageUrl&&n()&&D.set("newsSkip",t.newsSkip.toString()),(t.enableRightRailColumn||t.renderSingleColumn||t.renderEnterpriseSingleColumn)&&D.set("wpopageid",t.wpoPageId),t.installedWidgets&&t.installedWidgets.length&&D.set("installedWidgets",t.installedWidgets.join(",")),t.clientLayoutVersion&&D.set("clv",t.clientLayoutVersion),t.layout&&D.set("layout",t.layout),o.jG.SendFeedCallActivityIdInHeader&&D.delete("activityId"),o.jG.SendUserIdInHeader&&D.delete("User"),(0,h.N)()?t.isRetry?D.set("caller","retryForTimeout"):t.refreshType&&D.set("caller",t.refreshType):D.set("caller","ssr"),t.isDhp&&D.set("dhp","1"),t.isXFeed&&D.set("rid",t.requestId),t.private&&D.set("private","1"),t.viewportSize&&D.set("vpSize",t.viewportSize),t.apiKey&&D.set("apikey",t.apiKey),t.audienceMode&&(D.set("audienceMode",M?.audienceMode||t.audienceMode),"kids"===t.audienceMode&&E()&&(D.set("apikey",i.os),D.set("ocid",i.vy),D.set("disablecontent","true"))),t.feedId&&t.feedName===k&&E()&&(D.set("ocid",i.i9),D.set("apikey",i.S1));const B=(0,C.UU)();if(t.feedName===T&&"anaheim-ntp-feeds"===t.ocid&&B&&(D.set("ocid",i.$v),D.set("apikey",i.gr)),t.enableWpoAdPlacements){const e="true"===s.Al.ClientSettings?.browser?.ismobile||"phone"===s.Al.ClientSettings?.deviceFormFactor?"true":"false";D.set("mobile",e);const t=(0,v.rv)()||(0,v.hI)();D.set("cookieWallPresent",t.toString())}const U=m.get("wpoitems");U&&D.set("wpoitems",U.toString());const $=m.get("bypass_trigger");$&&!t.feedId&&D.set("bypass_trigger",$.toString());for(const e in m.getAllSearchParams())if(e.toLowerCase().includes("adppc")){const t=m.get(e);t&&(D.set("adppc",t),S.M0.addOrUpdateTmplProperty("adppc","1"));break}(0,b.TR)()&&D.set("prerender","1"),t.adRefreshVariant&&D.set("adRefreshVariant",t.adRefreshVariant),t.anaheimPageLayout&&D.set("anaheimPageLayout",t.anaheimPageLayout),t.feedYOffset&&D.set("feedYOffset",`${t.feedYOffset}`),t.gdpr&&D.set("gdpr","1"),t.verticalName&&D.set("verticalName",t.verticalName),t.freScenario&&D.set("freScenario",t.freScenario),t.freMode&&D.set("freMode",t.freMode),t.aver&&D.set("aver",t.aver),t.theme&&D.set("theme",t.theme),t.over&&D.set("over",t.over),t.oem&&D.set("oem",t.oem),t.devicetype&&D.set("devicetype",t.devicetype),t.smode&&D.set("smode",t.smode),t.usri&&D.set("usri",t.usri),t.duotone&&D.set("duotone",t.duotone.toString()),t.cardIds&&D.set("cardIds",t.cardIds),t.column&&D.set("column",t.column),void 0!==t.renderedAdCount&&D.set("renderedAdCount",t.renderedAdCount.toString()),t.feedColumn&&D.set("feedColumn",t.feedColumn),void 0!==t.cardsHeight&&D.set("cardsHeight",t.cardsHeight.toString()),t.lastRowAdColumns&&D.set("lastRowAdColumns",t.lastRowAdColumns),t.fcl&&D.set("fcl","true"),t.idfc&&D.set("idfc","true"),t.layout&&D.set("layout",t.layout),t.colstatus&&D.set("colstatus",t.colstatus),t.colwidth&&D.set("colwidth",t.colwidth.toString()),t.adoffsets&&D.set("adoffsets",t.adoffsets),t.l3v&&D.set("l3v",t.l3v.toString()),t.wpoux&&D.set("wpoux",t.wpoux.toString()),t.interestCount&&D.set("interestCount",`${t.interestCount}`),t.providerId&&D.set("ProviderId",t.providerId),t.topicId&&D.set("TopicId",t.topicId),"freinterests"===t.pageScenario&&(t.start&&D.set(t.freV2Params?"interestSkip":"$skip",`${t.start}`),t.count&&D.set(t.freV2Params?"interestCount":"$top",`${t.count}`),t.InterestIds&&D.set("InterestIds",`${t.InterestIds}`)),"providerfullpage"===t.pageScenario&&(t.communityProfileId&&D.set("communityProfileId",`${t.communityProfileId}`),t.query&&D.set("query","newest")),"channelfeed"===t.pageScenario&&t.interestIds&&D.set("InterestIds",`${t.interestIds}`),"me"===t.pageScenario&&t.interestIds&&D.set("ids",`${t.interestIds}`),t.webUrl&&D.set("WebUrl",t.webUrl),"number"==typeof t.pageConfiguration&&D.set("pgc",t.pageConfiguration.toString());const H=function(){if(window?.deviceMemory)return window.deviceMemory;return window&&window.navigator&&window.navigator.deviceMemory}();H&&n()&&D.set("memory",H.toString()),t.forceDisableAds&&D.set("edgenoads","1");(s.Al.CurrentFlightSet.has("prg-forcenoads")||await(0,C.VS)())&&(D.set("edgenoads","1"),S.M0.addOrUpdateTmplProperty("edgenoads","1"));if((s.Al.CurrentFlightSet.has("prg-forceredads")||await(0,C.OM)())&&D.set("edgereduceads","1"),s.Al.CurrentFlightSet?.has("tbingwebp")){(function(){const e=(0,p.ij)();if(!e)return!1;const t=e.toLowerCase(),n=t.match(/edg\/(\d+)/);if(n)return parseInt(n[1],10)>=79;const i=t.match(/edge\/(\d+)/);if(i)return parseInt(i[1],10)>=18;if(t.includes("opera")||t.includes("opr/")){const e=t.match(/(?:opera|opr)[\s/](\d+)/);return!e||parseInt(e[1],10)>=15}const r=t.match(/samsungbrowser\/(\d+)/);if(r)return parseInt(r[1],10)>=4;const o=t.match(/chrome\/(\d+)/);if(o)return parseInt(o[1],10)>=32;if(t.includes("android")){const e=t.match(/android (\d+)(?:\.(\d+))?/);if(e){const t=parseInt(e[1],10),n=parseInt(e[2]||"0",10);return t>4||4===t&&n>=2}}const a=t.match(/firefox\/(\d+)/);if(a)return parseInt(a[1],10)>=65;if(t.includes("iphone")||t.includes("ipad")){const e=t.match(/os (\d+)_(\d+)/);if(e)return parseInt(e[1],10)>=14}const s=t.match(/version\/(\d+).*safari/);if(s&&t.includes("safari")&&!t.includes("chrome")){const e=parseInt(s[1],10),n=t.match(/mac os x (\d+)[._](\d+)/);if(n){const t=parseInt(n[1],10);return e>=16||e>=14&&t>=11}return e>=16}return!1})()||(D.set("isWebPDisabled","1"),S.M0.addOrUpdateTmplProperty("isWebPDisabled","1"))}if(!s.Al.CurrentFlightSet.has("prg-noreduce")){const e=await(0,C.P)();if(e&&I.has(e)){const t=I.get(e);D.set(t,"1"),S.M0.addOrUpdateTmplProperty(t,"1");const n=`prg-${t}`;s.Al.CurrentFlights=s.Al.CurrentFlights?`${s.Al.CurrentFlights},${n}`:n}s.Al.CurrentFlightSet.has("prg-reducedads")&&D.set("reducedadss1","1")}t.anaheimLayoutPromotion&&(D.set("promotion",t.anaheimLayoutPromotion),S.M0.addOrUpdateTmplProperty("qpromotion",t.anaheimLayoutPromotion)),t.anaheimContentSelection&&(D.set("selection",t.anaheimContentSelection),S.M0.addOrUpdateTmplProperty("qselection",t.anaheimContentSelection)),void 0!==t.backgroundImageIsSet&&D.set("backgroundImageIsSet",t.backgroundImageIsSet.toString()),void 0!==t.inEdgeFeatures&&(D.set("inEdgeFeatures",t.inEdgeFeatures.toString()),S.M0.addOrUpdateTmplProperty("inEdgeFeatures",t.inEdgeFeatures?"1":"0")),void 0!==t.isAdb&&D.set("isAdb",t.isAdb.toString()),t.revertTimes&&(D.set("revertTimes",t.revertTimes),S.M0.addOrUpdateTmplProperty("revertTimes",t.revertTimes)),void 0!==t.adminDisabled&&(D.set("adminDisabled",t.adminDisabled.toString()),S.M0.addOrUpdateTmplProperty("adminDisabled",t.adminDisabled?"1":"0")),t.newProfFreTime&&(D.set("newProfFreTime",t.newProfFreTime.toString()),S.M0.addOrUpdateTmplProperty("newProfFreTime",t.newProfFreTime.toString())),t.newDevFreTime&&(D.set("newDevFreTime",t.newDevFreTime.toString()),S.M0.addOrUpdateTmplProperty("newDevFreTime",t.newDevFreTime.toString())),t.pageOcid&&D.set("pageOcid",t.pageOcid),t.segment&&D.set("segment",t.segment),t.context&&D.set("Context",t.context),t.scenario&&D.set("scenario",t.scenario),t.assetId&&D.set("assetId",t.assetId),t.calendarStartDate&&D.set("calendarStartDate",t.calendarStartDate),t.calendarEndDate&&D.set("calendarEndDate",t.calendarEndDate),t.calendarDate&&D.set("calendarDate",t.calendarDate),(t.overlay||0===t.overlay)&&D.set("overlay",t.overlay.toString()),t.enableRuby&&D.set("enableRuby",t.enableRuby.toString()),t.uxMode&&D.set("uxMode",t.uxMode.toString());const W=s.Al.ClientSettings&&s.Al.ClientSettings.queryparams?s.Al.ClientSettings.queryparams:"",G=new a.h(W).get("canid");G&&D.set("triggerModules","promoxfeedupsell".concat(":",G)),await async function(e,t){const{doNotTriggerFREInSession:n,feedName:i,enableFREOverlayMyFeed:r,sendFRESeenCount:a}=e;i===k&&S.M0.addOrUpdateTmplProperty("following-feed","1");if("edgeChromium"!==o.jG.AppType||"default"!==i||!r||!a)return;const s=await(0,C.hp)(n);g.Gq.set("overlayQspSent",s),S.M0.addOrUpdateTmplProperty("ovrly-qsp",s),s&&(t.set("overlay",s),parseInt(s)<3&&S.M0.addOrUpdateTmplProperty("fre-seen-ct","1"))}(t,D);const V=c.cX.getParamsWithItems(location.search);if(V){const e=V.find((e=>e.key===r.Ow));e&&e.value&&D.set("installedWidgets",e.value)}const q=new URLSearchParams((0,p.zp)()).get("feedParams");if(q){q.split(",").forEach((e=>{if(e.includes("=")){const[t,n]=e.split("=");D.set(t.trim(),n.trim())}}))}return t.dprValue&&D.set("dprValue",t.dprValue.toString()),D.toString()}function n(){return"channelmobile"!==o.jG.AppType}function E(){return n()}e.requestInit=async function(e){e=e||{};const t={method:"GET"},n=await d.$D.getOneServiceFeedCallHeaders((0,m.VQ)(),e.feedName,e.useXboxAccessToken);t.headers={...n,...e.additionalHeaders},e.credentialsOverride?t.credentials=e.credentialsOverride:t.credentials="include",e.enableWpoAdPlacements&&(t.headers["ads-referer"]=location.href,t.headers["taboola-sessionId"]=e.taboolaSessionId||"init");const i=o.jG.UserId;return o.jG.SendUserIdInHeader&&i&&(t.headers.MUID=i),t},e.buildRequestURLForOneService=async function(e){let n,r;if((e=e||{}).feedName===k)r=e.feedId?i.eK:i.ly;else r=e.pageScenario;const o=`${i.lP}${r}`;return n=new a.h((0,p.zp)()).get(i.YU)?new URL(o,i.LJ):(0,u.fU)(o),n.search=await t(n.search,e,n.href),n.searchParams.sort(),n},e.buildServiceRequestURL=async function(e){let n;e=e||{};const{CurrentRequestTargetScope:r={},ConfigServiceBaseUrl:c}=o.jG,d=new a.h((0,p.zp)());let l=e.pageScenario??(e.shouldUseNewWpoEndpoint?i.UY:i.$s);"ntp"===e.pageScenario&&(l=i.UY);let g=e.requestPathOverride?`${e.requestPathOverride}${l}`:`${i.Mo}${l}`;g=function(e){return e&&e===`${i.Mo}${i.UY}`&&s.Al&&s.Al.CurrentFlightSet&&s.Al.CurrentFlightSet.has(i.CO)&&"edgeChromium"===o.jG.AppType?`${i.hk}${i.UY}`:e}(g);const f=e.feedName&&"default"!=e.feedName;if(e.feedId||f)switch(e.feedName){case P:case"dynamicfilteredchannels":g=`${i.Mo}${i.Td}`;break;case k:e.feedId?(g=`${i.Mo}${i.eK}`,S.M0.addOrUpdateTmplProperty("filtered-feed","1"),!e.nextPageUrl?.includes(i.ly)&&e.nextPageUrl?.includes(e.feedId)||(e.nextPageUrl="")):(g=`${i.Mo}${i.ly}`,e.nextPageUrl?.includes(i.eK)&&(e.nextPageUrl=""));break;case T:g=`${i.Mo}${i.I1}`;break;case"sports":g=`${i.Mo}${i.Qn}`;break;case A:g=`${i.Mo}${A}`;break;default:g="work"===e.feedSource?`${i.Mo}${i.UW}`:`${i.Mo}${i.J8}`}e.isXFeed&&e.xFeedPageScenario&&(g=`${i.Mo}${e.xFeedPageScenario}`);const m=(0,h.N)();if(m&&["enabled","true"].includes(d.get(i.YU)))"kids"===e.audienceMode||"kids"===r?.audienceMode||e.feedId?n=new URL(i.SO,i.LJ):(g=`${i.lP}${l}`,n=new URL(g,i.LJ));else if(m&&"enabled"===d.get(i.P$))n=new URL(g,c.origin);else if(function(e){return!e&&"edgeChromium"===o.jG.AppType&&o.jG.OneServiceOverride&&s.Al&&s.Al.CurrentFlightSet&&s.Al.CurrentFlightSet.has(i.IA)}(m))g=`${i.L3}${i.UY}`,n=new URL(g,o.jG.OneServiceOverride);else{const t=e.domainOverride?e.domainOverride:(0,u.qQ)().origin;n=new URL(g,t)}return n.search=await t(n.search,e,n.href),n.searchParams.sort(),n}}(E||(E={}))},70249:function(e,t,n){n.d(t,{j:function(){return s},n:function(){return a}});var i=n(45970),r=n(81489),o=n(52185);const a=(0,r.h)({getInstance:()=>o.Gq.get("__feed-card-provider__serviceRequestAuthSubscription__",(()=>new i.X))}),s={userIsSignedIn:"userIsSignedIn"}},52541:function(e,t,n){var i,r,o,a;n.d(t,{Ow:function(){return s},xd:function(){return o}}),function(e){e.activityId="x-client-activityid",e.authorization="Authorization",e.entAuthorization="Ent-Authorization",e.muid="MUID",e.adsReferer="ads-referer",e.taboolaSessionId="taboola-sessionId"}(i||(i={})),function(e){e.actionType="actionType",e.activityId="activityId",e.adsTimeout="adsTimeout",e.apiKey="apikey",e.appType="apptype",e.audienceMode="audienceMode",e.aver="aver",e.bypassTrigger="bypass_trigger",e.cacheBypassQueryStringParamName="cbypass",e.cardsHeight="cardsHeight",e.channel="channel",e.channels="channels",e.cm="cm",e.complexInfoPaneEnabled="cipenabled",e.contentId="contentId",e.contentType="contentType",e.copilotApiSupported="copilotApiSupported",e.delta="delta",e.devicetype="devicetype",e.disableContent="disablecontent",e.dhp="dhp",e.disableTypeSerialization="DisableTypeSerialization",e.dprValue="dprValue",e.duotone="duotone",e.edgExpMask="edgExpMask",e.edgeSignalAdppc="adppc",e.widgetsOn="widgetsOn",e.gamingInterestId="gamingInterestId",e.infopaneCount="infopaneCount",e.fcl="fcl",e.fdhead="fdhead",e.feedColumn="feedColumn",e.feedParams="feedParams",e.feedLayoutRequestType="t",e.filter="$filter",e.followersCount="followersCount",e.feedYOffset="feedYOffset",e.idfc="idfc",e.ids="ids",e.infoPaneItemCount="t =InfoPane.itemCount",e.isAdb="isAdb",e.lastRowAdColumns="lastRowAdColumns",e.location="location",e.market="market",e.memory="memory",e.msnup="msnup",e.newsTop="newsTop",e.newsSkip="newsSkip",e.ocid="ocid",e.oem="oem",e.oneSvcUni="OneSvc-Uni-Feat-Tun",e.over="over",e.overlay="overlay",e.pageName="pgname",e.pageType="pgtype",e.parentContentId="parent-content-id",e.parentNamespace="parent-ns",e.parentTitle="parent-title",e.queryQ="q",e.query="query",e.queryType="queryType",e.qScope="qscope",e.renderedAdCount="renderedAdCount",e.responseSchema="responseSchema",e.satoriId="satoriId",e.select="$select",e.session="session",e.signInCookieName="scn",e.skip="$skip",e.smode="smode",e.source="source",e.targetType="targetType",e.theme="theme",e.timeOut="timeOut",e.top="$top",e.type="type",e.User="User",e.user="user",e.userid="userid",e.usri="usri",e.wpoitems="wpoitems",e.wpoPageId="wpopageid",e.wpoSchema="wposchema",e.wrapOData="wrapodata",e.caller="caller",e.installedWidgets="installedWidgets",e.clientLayoutVersion="clv",e.pageConfiguration="pgc",e.requestId="rid",e.interestIds="InterestIds",e.providerId="ProviderId",e.topicId="TopicId",e.includeFollowingFilters="iff",e.freScenario="freScenario",e.freMode="freMode",e.mobile="mobile",e.clientLocation="clientLocation",e.clientLocationProvider="clientLocationProvider",e.clientLocationAccuracy="clientLocationAccuracy",e.clientLocationTimeStamp="clientLocationTimeStamp",e.clientUtcOffset="clientUtcOffset",e.collectionIds="collectionIds",e.endTime="EndTime",e.eventType="EventType",e.exchangeCode="ExchangeCode",e.listIds="listIds",e.requireQuoteDetail="requireQuoteDetail",e.skipNum="skip",e.startTime="StartTime",e.topNum="top",e.prerender="prerender",e.layout="layout",e.triggerModules="triggerModules",e.promoXFeed="promoxfeedupsell",e.canid="canid",e.edgeNoAds="edgenoads",e.edgeReduceAds="edgereduceads",e.edgeMobile="edgeMobile",e.edgeMobileAds="edgeMobileAds",e.oneULayout="oneULayout",e.private="private",e.viewportSize="vpSize",e.promotion="promotion",e.selection="selection",e.cardIds="cardIds",e.renderedSegments="renderedSegments",e.column="column",e.colstatus="colstatus",e.colwidth="colwidth",e.adoffsets="adoffsets",e.l3v="l3v",e.wpoux="wpoux",e.cookieWallPresent="cookieWallPresent",e.anaheimPageLayout="anaheimPageLayout",e.adRefreshVariant="adRefreshVariant",e.gdpr="gdpr",e.verticalName="verticalName",e.pageOcid="pageOcid",e.scenario="scenario",e.calendarStartDate="calendarStartDate",e.calendarEndDate="calendarEndDate",e.calendarDate="calendarDate",e.segment="segment",e.context="Context",e.backgroundImageIsSet="backgroundImageIsSet",e.inEdgeFeatures="inEdgeFeatures",e.revertTimes="revertTimes",e.adminDisabled="adminDisabled",e.interestCount="interestCount",e.interestSkip="interestSkip",e.communityProfileId="communityProfileId",e.newProfFreTime="newProfFreTime",e.newDevFreTime="newDevFreTime",e.webUrl="WebUrl",e.enableRuby="enableRuby",e.assetId="assetId",e.uxMode="uxMode",e.isWebPDisabled="isWebPDisabled",e.unusedDocIds="unusedDocIds"}(r||(r={})),function(e){e[e.oneService=0]="oneService",e[e.wpoService=1]="wpoService"}(o||(o={})),function(e){e.Bgtask="bgtask",e.Api="api",e.App="app",e.RetryFetch="retryFetch",e.Scroll="scroll",e.Init="init",e.BgRefresh="bgRefresh"}(a||(a={}));const s="installedWidgetsOverride"},96204:function(e,t,n){n.d(t,{$Y:function(){return i},Fi:function(){return r},Q8:function(){return s},jz:function(){return c},pj:function(){return a}});var i,r,o=n(98130);function a(e){return e?[{isDarkMode:!0,hexColor:r.imgDark},{isDarkMode:!1,hexColor:r.imgLight}]:[{isDarkMode:!0,hexColor:r.noImgDark},{isDarkMode:!1,hexColor:r.noImgLight}]}function s(e){return e.enableAnimatedShowMoreBtn?"animated":e.enableFilledIconOnHover?"fillediconhover":e.noBackPlateOnRest?"nobackplate":"default"}function c(e){return`https://www.msn.com/${o.jG.CurrentMarket}/community/channel/${e}`}!function(e){e.default="default",e.condensed="condensed",e.infoPane="infoPane",e.infoPane1x3y="infoPane1x3y",e.infoPaneSplitVertical="infoPaneSplitVertical",e.infoPaneSplitHorizontal="infoPaneSplitHorizontal"}(i||(i={})),function(e){e.imgLight="#F5F5F5",e.imgDark="#2E2E2E",e.noImgLight="#DEDEDE",e.noImgDark="#222"}(r||(r={}))},17814:function(e,t,n){n.d(t,{B:function(){return i}});const i={_60x60:{width:60,height:60},_82x82:{width:82,height:82},_100x100:{width:100,height:100},_104x84:{width:104,height:84},_141x250:{width:141,height:250},_180x88:{width:180,height:88},_203x114:{width:203,height:114},_216x114:{width:216,height:114},_220x124:{width:220,height:124},_220x178:{width:220,height:178},_238x120:{width:238,height:120},_240x129:{width:240,height:129},_240x253:{width:240,height:253},_242x144:{width:242,height:144},_242x176:{width:242,height:176},_300x156:{width:300,height:156},_300x169:{width:300,height:169},_300x174:{width:300,height:174},_300x179:{width:300,height:179},_300x180:{width:300,height:180},_300x200:{width:300,height:200},_300x225:{width:300,height:225},_300x282:{width:300,height:282},_300x304:{width:300,height:304},_300x326:{width:300,height:326},_300x462:{width:300,height:462},_306x174:{width:306,height:174},_306x197:{width:306,height:197},_385x225:{width:385,height:225},_362x272:{width:362,height:272},_406x304:{width:406,height:304},_486x304:{width:486,height:304},_468x304:{width:468,height:304},_604x296:{width:604,height:296},_612x304:{width:612,height:304},_612x326:{width:612,height:326},_612x328:{width:612,height:328},_612x462:{width:612,height:462},_628x372:{width:628,height:372}}},54085:function(e,t,n){n.d(t,{u:function(){return r.uf},w:function(){return i}});var i,r=n(49804);!function(e){e.image="image",e.provider="provider",e.socialBar="socialBar"}(i||(i={}))},39079:function(e,t,n){n.d(t,{C7:function(){return a},Ey:function(){return c},Nv:function(){return i},OO:function(){return s},U5:function(){return d},X9:function(){return u},sn:function(){return o}});var i,r=n(9791);!function(e){e.pill="pill",e._1x_halfy="_1x_halfy",e._2x_halfy="_2x_halfy",e._1x_1y="_1x_1y",e._1x_2y="_1x_2y",e._1x_3y="_1x_3y",e._1x_4y="_1x_4y",e._1x_5y="_1x_5y",e._2x_1y="_2x_1y",e._2x_2y="_2x_2y",e._2x_3y="_2x_3y",e._2x_4y="_2x_4y",e._2x_6y="_2x_6y",e._3x_1y="_3x_1y",e._3x_2y="_3x_2y",e._3x_3y="_3x_3y",e._4x_1y="_4x_1y",e._4x_2y="_4x_2y",e._5x_1y="_5x_1y",e._5x_2y="_5x_2y",e._25u="0.25u",e._05u="0.5u",e._075u="0.75u",e._1u="1u",e._125u="1.25u",e._15u="1.5u",e._175u="1.75u",e._2c="_2x_2y",e._2u="_1x_4y",e._3u="_1x_6y"}(i||(i={}));const o=146,a=300,s=12,c=306,d=16,u=(0,r.Z)((e=>Array(e).fill(o)))},24640:function(e,t,n){var i;n.d(t,{U:function(){return i}}),function(e){e.TopicFeedCard="topic-feed-card",e.articleFreCard="article-fre-card",e.autosCarouselCard="autos-carousel-card",e.bingDailyQuizCard="bing-daily-quiz-card",e.bingVideoCarousel="bing-video-carousel",e.boostAdCard="boost-ad-card",e.cashbackCarouselCard="cashback-carousel-card",e.casualGamesCard="casual-games-card",e.casualGamesCarouselCard="casual-games-carousel-card",e.casualGamesProng2CarouselCard="casual-games-prong2-carousel-card",e.casualGamesStripeCarouselCard="casual-games-stripe-carousel-card",e.channelFilterCard="channel-filter-card",e.coldStartCard="cold-start-card",e.comicsCarouselCard="comics-carousel-card",e.communityCard="community-card",e.commuteCard="commute-card",e.contentCard="content-card",e.contentCardPreview1x="content-card-preview-1x",e.contentGroup="content-group",e.contentGroupCard="content-group-card",e.creatorSpotlightCard="creator-spotlight-card",e.dailyBriefCard="daily-brief-card",e.dailyFixGamesCarouselCard="daily-fix-games-carousel-card",e.dailyGreetingCard="daily-greeting-card",e.dailyGreetingWindowsShell="daily-greeting-windows-shell",e.dailyMomentsCard="daily-moments-card",e.dailyWonderCard="daily-wonder-card",e.dailyWonderCopilotCard="daily-wonder-copilot-card",e.dailyWonderHeroVideo="daily-wonder-hero-video",e.dailyWonderQuoteCard="daily-wonder-quote-card",e.dailyWonderVideoListCard="daily-wonder-video-list-card",e.denseCard="dense-card",e.digestCard="digest-card",e.displayAdCard="display-ad-card",e.donationNpoCard="donation-npo-card",e.edgeShoppingCard="edge-shopping-card",e.editorsPickCarouselCard="editors-pick-carousel-card",e.electionCard="election-card",e.electionsCard="elections-card",e.entertainmentPremierCard="entertainment-premier-card",e.esportsCard="esports-card",e.flexArticleCard="flex-article-card",e.followingFREInlineCard="following-fre-inline-card",e.gamingRecentlyPlayedCard="gaming-recentlyplayed-card",e.gemGreetingCard="gem-greeting-card",e.healthArticlesCard="health-articles-card",e.healthCard="health-card",e.healthFitnessCard="health-fitness-card",e.healthRiverCard="health-river-card",e.healthTipCard="health-tip-card",e.hideStoryCard="hide-story-card",e.horoscopeAnswerCard="horoscope-card",e.hotListCard="hot-list-card",e.infopaneCard="infopane-card",e.infopaneSlideCard="infopane-slide-card",e.interestManagementCard="interest-management-card",e.linkedInCard="linked-in-card",e.localNewsCarCard="local-news-carousel-card",e.mangaCard="manga-card",e.mangaCarousel="manga-carousel",e.marketplaceCard="marketplace-card",e.mobileTrendingSearchCard="mobile-trending-search-card",e.momentInTimeHero="moment-in-time-hero",e.moneyAddWatchlistCard="money-add-watchlist-card",e.moneyCard="money-card",e.moneyEdgeCard="money-edge-card",e.moneyInfoCardWC="money-info-card",e.moneyTopicStripeCarouselCard="money-topic-stripe-carousel-card",e.nativeAdCard="native-ad-card",e.nativeTopAdCard="native-top-ad-card",e.onThisDayCard="on-this-day-card",e.panoCard="pano-card",e.perspectiveCard="perspective-card",e.placeholderCard="placeholder-card",e.pollsCard="polls-card",e.prismCard="prism-card",e.prismCarouselCard="prism-carousel-card",e.profileCarouselCard="profile-carousel-card",e.promotedAdCard="promoted-ad-card",e.publisherListCard="publisher-list-card",e.qnaCard="qna-card",e.quizCard="quiz-card",e.realEstateCard="real-estate-card",e.recipesCard="recipes-card",e.recommendedInterestsCard="recommended-interests-card",e.relatedNewsCard="related-news-card",e.responsiveAdCard="responsive-ad-card",e.responsiveCard="responsive-card",e.responsiveInfopaneCard="responsive-infopane",e.rewardsCard="rewards-card",e.richCalendarCard="rich-calendar-card",e.richCalendarWindowsShell="rich-calendar-windows-shell",e.sectionHeaderCard="section-header-card",e.selectCarouselCard="select-carousel-card",e.serendipityCard="serendipity-card",e.sharedHeroNewsCard="shared-hero-news-card",e.shoppingBannerSdCard="shopping-banner-sd-card",e.shoppingBuyingGuidePremiumCard="shopping-buying-guide-premium-card",e.shoppingCard="shopping-card",e.shoppingCarouselCard="shopping-carousel-card",e.shoppingCarouselProngWC="shopping-carousel-prong-wc",e.shoppingEventsDealCard="shopping-events-deal-card",e.shoppingFashionCarouselWC="shopping-fashion-carousel-wc",e.shoppingRiverCard="shopping-river-card",e.shoppingSdCard="shopping-sd-card",e.shoppingVideoCarouselCard="shopping-video-carousel-card",e.shoppingTopSectionCard="shopping-gem-hero-card",e.sportsCard="sports-card",e.sportsOlympicCard="sports-olympic-card",e.sportsTopicStripeCarouselCard="sports-topic-stripe-carousel-card",e.sportsWorldCupCard="sports-worldcup-card",e.spotlightCard="spotlight-card",e.superappUpsellCard="superapp-upsell-card",e.tabbedInfopaneCard="tabbed-infopane-card",e.topCommentsCard="top-comments-card",e.topPicksCard="top-picks-card",e.topSitesCard="top-sites-card",e.topStoriesCard="top-stories-card",e.trafficCard="traffic-card",e.trafficHero="traffic-hero",e.travelDestinationCard="travel-destination-card",e.travelDestinationCarouselCard="travel-destination-carousel-card",e.trendingNowCard="trending-now-card",e.trendingSearchCard="trending-search-card",e.videoCard="video-card",e.weatherCard="weather-card",e.weatherHeroExperience="weather-hero-experience",e.weatherHeroExperienceCarouselCard="weather-hero-experience-carousel-card",e.webContentCard="web-content-card",e.widgetPlaceholderCard="widget-placeholder-card",e.widgetsNotificationsCard="widgets-notifications-card",e.winAppCard="win-app-card"}(i||(i={}))},29218:function(e,t,n){n.d(t,{J:function(){return ct},Q:function(){return dt}});var i=n(24640),r=n(34800),o=n(32236);const{TopicFeedCard:a,articleFreCard:s,autosCarouselCard:c,bingDailyQuizCard:d,bingVideoCarousel:u,boostAdCard:l,cashbackCarouselCard:p,casualGamesCard:h,casualGamesCarouselCard:g,casualGamesProng2CarouselCard:f,casualGamesStripeCarouselCard:m,channelFilterCard:y,comicsCarouselCard:v,communityCard:S,commuteCard:w,contentCard:b,contentGroupCard:C,creatorSpotlightCard:T,dailyBriefCard:k,dailyFixGamesCarouselCard:P,dailyGreetingCard:A,dailyMomentsCard:I,dailyWonderCard:E,dailyWonderCopilotCard:R,dailyWonderHeroVideo:M,dailyWonderQuoteCard:x,dailyWonderVideoListCard:L,denseCard:F,digestCard:D,displayAdCard:O,donationNpoCard:_,editorsPickCarouselCard:N,electionCard:B,electionsCard:U,entertainmentPremierCard:$,esportsCard:H,followingFREInlineCard:W,gamingRecentlyPlayedCard:G,gemGreetingCard:V,healthCard:q,healthFitnessCard:j,healthRiverCard:z,healthTipCard:K,horoscopeAnswerCard:Q,infopaneCard:J,interestManagementCard:X,localNewsCarCard:Y,mangaCard:Z,mangaCarousel:ee,marketplaceCard:te,mobileTrendingSearchCard:ne,momentInTimeHero:ie,moneyCard:re,moneyInfoCardWC:oe,moneyTopicStripeCarouselCard:ae,nativeAdCard:se,nativeTopAdCard:ce,onThisDayCard:de,placeholderCard:ue,pollsCard:le,prismCard:pe,prismCarouselCard:he,profileCarouselCard:ge,promotedAdCard:fe,publisherListCard:me,qnaCard:ye,quizCard:ve,realEstateCard:Se,recipesCard:we,recommendedInterestsCard:be,relatedNewsCard:Ce,rewardsCard:Te,richCalendarCard:ke,sectionHeaderCard:Pe,selectCarouselCard:Ae,serendipityCard:Ie,sharedHeroNewsCard:Ee,shoppingBannerSdCard:Re,shoppingBuyingGuidePremiumCard:Me,shoppingCard:xe,shoppingCarouselCard:Le,shoppingCarouselProngWC:Fe,shoppingEventsDealCard:De,shoppingFashionCarouselWC:Oe,shoppingRiverCard:_e,shoppingSdCard:Ne,shoppingTopSectionCard:Be,shoppingVideoCarouselCard:Ue,sportsCard:$e,sportsOlympicCard:He,sportsTopicStripeCarouselCard:We,sportsWorldCupCard:Ge,spotlightCard:Ve,tabbedInfopaneCard:qe,topCommentsCard:je,topPicksCard:ze,topStoriesCard:Ke,trafficCard:Qe,trafficHero:Je,travelDestinationCard:Xe,travelDestinationCarouselCard:Ye,trendingNowCard:Ze,trendingSearchCard:et,weatherCard:tt,weatherHeroExperience:nt,weatherHeroExperienceCarouselCard:it,webContentCard:rt,widgetPlaceholderCard:ot,widgetsNotificationsCard:at,winAppCard:st}=i.U,ct={[r.PL.DailyMomentsCard]:I,[r.PL.DailyMomentsCard1]:ie,[r.PL.DailyMomentsCard2]:ie,[r.PL.DailyMomentsCard3]:ie,[r.PL.DailyWonderCard]:E,[r.PL.DailyWonderCopilotCard]:R,[r.PL.DailyWonderHeroVideo]:M,[r.PL.DailyWonderQuoteCard]:x,[r.PL.DailyWonderVideoListCard]:L,[r.PL.ShoppingBannerSdCard]:Re,[r.PL.DailyBriefCard]:k,[r.PL.DailyGreetingCard]:A,[r.PL.WidgetsNotificationsCard]:at,[r.PL.NotificationCard]:at,[r.PL.DonationNpoCard]:_,[r.PL.EntertainmentPremierCard]:$,[r.PL.EventSDCardOscarsPrm]:$,[r.PL.BingDailyQuizCard]:d,[r.PL.EventSDCardElectionMIT1]:B,[r.PL.EventSDCardElectionMIT2]:B,[r.PL.EventSDCardElectionMIT3]:B,[r.PL.RichCalendarCard]:ke,[r.PL.CommunityCard]:S,[r.PL.TabbedInfopaneCard]:qe,[r.PL.MangaCard]:Z,[r.PL.MangaCarousel]:ee,[r.PL.RealEstateCard]:Se,[r.PL.RealEstateCarousel]:Se,[r.PL.PrismCarouselCard]:he,[r.PL.TrendingSearchCard]:et,[r.PL.CommuteCard]:w,[r.PL.DigestCard]:D,[r.PL.RelatedNewsCard]:Ce,[r.PL.CopilotCard]:Ve,[r.PL.CreatorSpotlight]:T,[r.PL.Article]:b,[r.PL.Slideshow]:b,[r.PL.Video]:b,[r.PL.Infopane]:J,[r.PL.GroupedContent]:C,[r.PL.UserInterestTopic]:C,[r.PL.UserInterestNTPProvider]:C,[r.PL.LittleKnownFactsCard]:C,[r.PL.UserInterestTopicAndProvider]:W,[r.PL.ColdStartArticleFreCard]:s,[r.PL.HalfPane]:null,[r.PL.HeadToHead]:null,[r.PL.Mosaic]:null,[r.PL.Triptych]:null,[r.PL.DenseList]:null,[r.PL.WebContent]:rt,[r.PL.ExternalLink]:null,[r.PL.TabbedInfopane]:null,[r.PL.TabbedInfopaneTab]:null,[r.PL.PlaceholderCard]:ue,[r.PL.BingHealthCovid19StatsCard]:q,[r.PL.BingHealthFitnessCard]:j,[r.PL.HealthTipCard]:K,[r.PL.HealthRiverCard]:z,[r.PL.AutosCarousel]:c,[r.PL.BingVideoCarousel]:u,[r.PL.CashbackAds]:p,[r.PL.CasualGamesCarousel]:g,[r.PL.CasualGamesProng2Carousel]:f,[r.PL.CasualGamesStripeCarousel]:m,[r.PL.ChannelFilterCard]:y,[r.PL.DynamicFilteredChannel]:y,[r.PL.WatchVideoCard]:H,[r.PL.EsportsCasualGames]:h,[r.PL.GamingRecentlyPlayed]:G,[r.PL.StockQuote]:re,[r.PL.MoneyInfo]:oe,[r.PL.FinanceSpotlightHeroPrice]:oe,[r.PL.FinanceSpotlightHeroMarket]:oe,[r.PL.FinanceSpotlightHeroRadarGraph]:oe,[r.PL.FinanceHeroMarket]:oe,[r.PL.FinanceHeroMarketChart]:oe,[r.PL.FinanceHeroNews]:Ee,[r.PL.FinanceHeroMovers]:oe,[r.PL.FinanceHerowlsummary]:oe,[r.PL.FinanceHeroSuggested]:oe,[r.PL.FinanceHeroWatchlistIdeas]:oe,[r.PL.FinanceHeroUpcomingEarnings]:oe,[r.PL.FinanceHeroCurrencies]:oe,[r.PL.FinanceHeroCrypto]:oe,[r.PL.MoneyTopicStripe]:ae,[r.PL.WeatherHero]:it,[r.PL.WeatherCurrent]:nt,[r.PL.WeatherForecast]:nt,[r.PL.WeatherMap]:nt,[r.PL.SportsTopicStripe]:We,[r.PL.MoneyPreWL]:oe,[r.PL.MoneyCrypto]:oe,[r.PL.MoneyMarketBrief]:oe,[r.PL.MoneyMoreForYouCard]:oe,[r.PL.SportsMatch]:$e,[r.PL.SportsOlympics]:He,[r.PL.SportsHeroFre]:$e,[r.PL.SportsHeroLeagueTodaysEvents]:$e,[r.PL.SportsHeroMatch1SeasonStats]:$e,[r.PL.SportsHeroMatch1Stats]:$e,[r.PL.SportsHeroMatch2SeasonStats]:$e,[r.PL.SportsHeroMatch2Stats]:$e,[r.PL.SportsHeroMatch3SeasonStats]:$e,[r.PL.SportsHeroMatch3Stats]:$e,[r.PL.SportsHeroMatchStatistics]:$e,[r.PL.SportsSpotlight2Match1]:$e,[r.PL.SportsSpotlight2Match2]:$e,[r.PL.SportsHeroNews]:Ee,[r.PL.SportsHeroOneVsManyEventResult]:$e,[r.PL.SportsHeroOneVsOneEventResult]:$e,[r.PL.SportsHeroSeasonStatistics]:$e,[r.PL.SportsHeroStandingsRankings]:$e,[r.PL.SportsHeroTeamStandings]:$e,[r.PL.SportsHeroTeamStandingWithEvents]:$e,[r.PL.SportsHeroTeamStandingWithMedals]:$e,[r.PL.SportsHeroMatchCard]:$e,[r.PL.SportsHeroTeamVsTeam]:$e,[r.PL.SportsHeroTeamVsTeamEventResult]:$e,[r.PL.SportsHeroVideo]:$e,[r.PL.EventSDCardSportsMIT1]:$e,[r.PL.EventSDCardSportsMIT2]:$e,[r.PL.EventSDCardSportsMIT3]:$e,[r.PL.EventSDCardWorldCup]:Ge,[r.PL.EventSDCardWorldCup2]:Ge,[r.PL.MyBriefRiverCard]:ze,[r.PL.TrafficDelays]:Qe,[r.PL.TrafficInfo]:Qe,[r.PL.Transit]:Qe,[r.PL.TrafficIncidents]:Je,[r.PL.TrafficCameras]:Je,[r.PL.TrafficCamerasWithSummary]:Je,[r.PL.TravelTimes]:Je,[r.PL.TravelTimesWithSummary]:Je,[r.PL.TrafficMap]:Je,[r.PL.TrafficNews]:Je,[r.PL.TrafficTransit]:Je,[r.PL.TrafficSummary]:Je,[r.PL.WeatherSummary]:tt,[r.PL.ShoppingCard]:Ne,[r.PL.EdgeShoppingCard]:Le,[r.PL.ShoppingCarousel]:Le,[r.PL.ShoppingCarousel2]:Le,[r.PL.Shopping1688Carousel]:Le,[r.PL.ShoppingVideoCarousel]:Ue,[r.PL.ShoppingRiver]:_e,[r.PL.ShoppingRiver1]:_e,[r.PL.ShoppingRiver2]:_e,[r.PL.ShoppingRiver3]:_e,[r.PL.ShoppingTopSectionCard]:Be,[r.PL.EventSDCardShopping]:De,[r.PL.ComicsCarousel]:v,[r.PL.SelectCarousel]:Ae,[r.PL.EditorsPickCarousel]:N,[r.PL.DailyFixGamesCarousel]:P,[r.PL.SageGroupedFeed]:D,[r.PL.TopicFeed]:a,[r.PL.ShoppingProng2c]:Me,[r.PL.ShoppingMerchantCategoryDeals]:xe,[r.PL.ShoppingProngCardResponse]:Fe,[r.PL.ShoppingProngTracking]:Fe,[r.PL.ShoppingProngCarousel]:Oe,[r.PL.SectionHeader]:Pe,[r.PL.TrendingInTenMinutes]:Ze,[r.PL.TopicFeedTrendingNow]:Ze,[r.PL.TopicFeedTopStories]:Ze,[r.PL.TopStories]:Ke,[r.PL.WorkHeadlines]:Ke,[r.PL.Trending]:Ie,[r.PL.Horoscope]:Q,[r.PL.Elections]:U,[r.PL.RecommendedInterests]:be,[r.PL.MobileTrendingSearchCard]:ne,[r.PL.OnThisDay]:de,[r.PL.Dense]:F,[r.PL.Qna]:ye,[r.PL.quizcard]:ve,[r.PL.Recipes]:we,[r.PL.Inspiration]:pe,[r.PL.InterestManagementCard]:X,[r.PL.GemGreeting]:V,[r.PL.Rewards]:Te,[r.PL.TravelDestinationCard]:Xe,[r.PL.TravelDestinationCarouselCard]:Ye,[r.PL.LocalNewsFeed]:Y,[r.PL.BeaconProviderUpsell]:ge,[r.PL.Marketplace]:te,[r.PL.MarketplaceEvent]:te,[r.PL.PollsCard]:le,[r.PL.PromotedAd]:fe,[r.PL.TopicFeedDiversity]:D,[r.PL.TopicFeedLearnSomethingNew]:D,[r.PL.TopicFeedWeekends]:D,[r.PL.TopicFeedMomentInTime1]:Ve,[r.PL.TopicFeedShopping]:Ve,[r.PL.TopicFeedWeather]:Ve,[r.PL.WinAppAds]:st,[r.PL.MiTHeroContent]:ie,[r.PL.MiTHeroFollow]:C,[r.PL.MiTHeroAction]:ie,[r.PL.MiTHeroSpotlight]:ie,[r.PL.NativeAd]:se,[r.PL.CmsAd]:se,[r.PL.FirstPartyAd]:se,[r.PL.AmplifyAd]:se,[r.PL.EventSDCardAmplifyAds]:se,[r.PL.NativeTopAd]:ce,[r.PL.BoostAd]:l,[r.PL.Promotion]:p,[r.PL.DisplayAdBanner]:O,[r.PL.DisplayAdCard]:O,[r.PL.DisplayAd]:O,[r.PL.Calendar]:ot,[r.PL.Entertainment]:ot,[r.PL.Family]:ot,[r.PL.M365]:ot,[r.PL.Photos]:ot,[r.PL.ThirdPartyWidget]:ot,[r.PL.Tips]:ot,[r.PL.ToDo]:ot,[r.PL.XboxGamePass]:ot,[r.PL.Tombstone]:ot,[r.PL.UserInterestProvider]:me,[r.PL.TopCommentsCard]:je,[r.PL.OnThisDaySDCard]:Ve,[r.PL.DailyQuizSdCard]:Ve,[r.PL.LocalEventsSDCard]:Ve,[r.PL.PublisherSpotlightCard]:Ve,[r.PL.FollowedPublishersCard]:Ve},dt=(0,o.p)((()=>{const e=new ut;for(const[t,n]of Object.entries(ct))e.set(t,n);return e}));class ut extends Map{set(e,t){return super.set(e.toLowerCase(),t)}get(e){return super.get(e.toLowerCase())}}},1962:function(e,t,n){n.d(t,{Ae:function(){return v},Cs:function(){return L},Ed:function(){return O},Jl:function(){return _},K7:function(){return T},Nn:function(){return x},P9:function(){return A},PZ:function(){return P},UN:function(){return S},Xe:function(){return I},Xh:function(){return f},Xq:function(){return U},al:function(){return F},e_:function(){return E},i2:function(){return m},ji:function(){return b},lP:function(){return C},mQ:function(){return $},pt:function(){return g},sA:function(){return N},sG:function(){return B},s_:function(){return M},sw:function(){return D},un:function(){return R},wZ:function(){return w}});var i=n(34800),r=n(9378),o=n(96204),a=n(73344),s=n(98130),c=n(28951),d=n(11875),u=n(44132),l=n(62512),p=n(68178);const h=new Set;function g(e){if(!e)return;if(h.has(e))return;const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e,document.head.appendChild(t),h.add(e)}function f(e){try{const t=new Date(e),n=(new Date).getTime()-t.getTime();return Math.ceil(n/864e5)>3}catch(e){return!0}}function m(e,t,n,i,r){if(!e)return{logoImage:"",name:void 0};const o=i??16;let c="";const d={width:o,height:o,enableDpiScaling:!1,quality:100,format:a.D3.PNG},u="zh-cn"===(0,s.Yq)().CurrentMarket;!t&&e.logo&&e.logo.id?c=(0,a.zz)(e.logo.id,d):r&&!u?c=`${(0,s.Yq)().StaticsUrl}latest/views/img/yt-16.png`:(e.logoUrl||e.logo&&e.logo.url)&&(c=(0,a.mL)(e.logoUrl||e.logo.url,d));const l={logoImage:c,id:e.id,name:e.name,profileId:e.profileId};return n&&(l.immersiveCardSvgLogo=y(n,e.darkThemeSVGLogo),l.svgLogo=(0,p.Yc)()?l.immersiveCardSvgLogo:y(n,e.lightThemeSVGLogo)),l}function y(e,t){if(!t)return t;const n=t.width&&t.height?e*t.width/t.height:void 0;return{url:t.url,height:e,width:n}}function v(e){if(e?.cardContent?.isPanoCard&&1==e?.cardContent?.panocardType)e.cardContent.images=[{url:e.cardContent?.panoCaption?.thumbnail?.url,title:e.cardContent?.panoCaption?.title,width:2e3,height:3e3}];else if(!(e&&e.cardContent&&e.cardContent.images&&e.cardContent.images.length&&e.cardContent.images[0]&&e.cardContent.images[0].url))return e?.cardContent?.isPanoCard&&2==e?.cardContent?.panocardType&&(e.cardContent.isPanoCard=!1,e.cardContent.panoCaption=null),null;return e.cardContent.images[0]}function S(e){return e&&e.images&&e.images.length&&e.images[0]&&e.images[0].url?e.images[0]:null}function w(e,t){const{type:n,cardContent:r}=e;return t&&n==i.PL.Article&&r&&r?.panoCaption?.publishers?.length&&r?.panoCaption?.eventId}function b(e,t){t?.preventDefault(),e&&e.panoCaption&&window.open(e.panoCaption.destinationUrl.toString(),"_blank"),t?.currentTarget&&(t.currentTarget.classList.add("clicked"),u.M0.sendActionEvent(t?.currentTarget))}function C(e,t){e.panoCaption.articleDestinationUrl&&(e&&e.panoCaption&&window.open(e.panoCaption.articleDestinationUrl.toString(),"_blank"),u.M0.sendActionEvent(t?.currentTarget))}function T(e,t){return"bing"===e?.toLowerCase()&&s.jG.IsChinaCompliance&&t}var k;function P(e,t){if(e?.placement?.isAdFeedbackEnabled&&(t|=d.O.enabled),!(t&&t&d.O.enabled))return d.O.none;let{actions:n=[]}=e.metadata||e;const i=e.cardContent?e.cardContent.badges:e.badges,r=e.metadata?e.metadata.reasons:e.reasons;(i&&i.some((e=>"followedPublisher"===e.type))||r&&r.some((e=>"followPublisher"===e.type)))&&(n=[...n||[],k.followedPublisher]),r&&r.some((e=>"followTopic"===e.type))&&(n=[...n||[],k.followedTopic]);let o=d.O.enabled;return n.forEach((e=>{"save"===e&&(e="saved"),"liked"!==e&&"like"!==e||(e="showMore");const n=d.O[e];n&t&&(o|=n)})),o}function A(e,t,n){if(!e)return;if(!t)return e.cardActionsTooltips;const{cardActionsTooltips:i,showMoreV2:o,showFewerV2:a,undoShowMoreV2:s}=e,c=i&&(t.enableSaveButton||!o),d=(()=>{switch(n?.type){case r.pR.FOLLOWEDPUBLISHER:case r.pR.FOLLOWEDTOPIC:return e.followConfirmationText&&n.follow?.name&&(0,l.WU)(e.followConfirmationText,n.follow.name);case r.pR.LOCAL:return e.cardActionsTooltips?.whyAmISeeLocal;case r.pR.TRENDING:return e.cardActionsTooltips?.whyAmISeeTrending;case r.pR.EXPLORE:{const t=e.cardActionsTooltips?.whyAmISeeExplore;return t&&n?.follow?.name&&(0,l.WU)(t,n.follow.name)}}})()??i?.whyAmISee;return{...i,showMore:c?i.showMore:o,showFewer:c?i.showFewer:a,undoShowMore:c?i.undoShowMore:s,whyAmISee:d}}function I(e){if(e&&e.cardContent){const t=e.cardContent.destinationUrl;return e.type===i.PL.EventInfopaneShoppingAI&&(e.cardContent.isShoppingArticleCard=!0),t&&(e.cardContent.destinationUrl=E(t)),e}const t=e;let n;n=t.type===i.PL.Slideshow?"SlideshowPreview":t.type===i.PL.Video?"VideoPreview":t.type===i.PL.WebContent?"WebContentPreview":"ArticlePreview",t.cardContent={id:t.id,destinationUrl:E(t.url),type:n,title:t.title,aiComments:t.aiComments,abstract:t.abstract,customTransitionSpeed:t.customTransitionSpeed,provider:t.provider,locale:t.locale,images:t.images,publishedDateTime:t.publishedDateTime,colorSamples:t.colorSamples,badges:t.badges,topics:t.topics,videoFiles:t.externalVideoFiles||[],videoMetadata:t.videoMetadata||{},isLocalContent:t.isLocalContent};const r=t.type;return t.metadata||r===i.PL.AmplifyAd||r===i.PL.NativeAd||r===i.PL.CmsAd||(t.metadata=function(e){if(e&&e.metadata)return e.metadata;const t=e;if(!t)return null;const n=t.type===i.PL.EventInfopaneShoppingAI?/[/?]/:"/",r=t.cardContent?.destinationUrl?.split(n);return{abstract:t.abstract,abstractLength:t.abstract?.length,titleLength:t.title?.length,category:t.category||r?.length>=5&&r[4],subCategory:r?.length>=6&&r[5],primaryImage:{height:t.images&&t.images[0]?.height,width:t.images&&t.images[0]?.width},locale:t.locale,feed:{id:t.feed?.id},kicker:[t.feed],actions:t.actions?.map((e=>k[e]||e)),reactionStatus:t.reactionStatus,commentStatus:t.commentStatus,reactionSummary:t.reactionSummary,commentSummary:t.commentSummary,topComments:t.topComments,reasons:t.reasons,source:t.source,ref:t.ref,relatedCards:t.relatedCards,topics:t.topics,topQuestions:t.topQuestions,highlights:t.highlights,debugId:t.debugId,isFirstSectionCard:t.isFirstSectionCard,videoMetadata:t.videoMetadata}}(t)),t}function E(e){if(!e)return;const t=new URLSearchParams(window.location.search),n=new URL(e);if(x()){const e=t.get("ocid");if(e){const t=new URLSearchParams(n.search);t.set("ocid",e),n.search=`?${t.toString()}`}}const i=t.getAll("item");return i&&i.length?(i.forEach((e=>{const t=n.search?"&":"?";-1===n.search.indexOf(e)&&(n.search+=`${t}item=${e}`)})),n.toString()):n.toString()}function R(){return null!==c.cX.getQueryParameterByName("edge",window.location.href)}function M(){return null!==c.cX.getQueryParameterByName("launcher",window.location.href)}function x(){const e=window.location.href;return null!==c.cX.getQueryParameterByName("disti",e)}function L(e){const{followText:t,followingText:n,followSuccessMessage:i,unfollowSuccessMessage:r,interestErrorMessage:o}=e;return{followText:t,followingText:n,followSuccessMessage:i,unfollowSuccessMessage:r,interestErrorMessage:o}}function F(e,t){const n=e===i.PL.WebContent,r=n&&Boolean(t);return{isVideo:r||e===i.PL.Video,isWebContent:n,isWebVideo:r}}function D(e){return e&&e.length&&e[0]&&e[0].url?e[0]:null}function O(e,t,n,i){const{attribution:r,title:o=e.title,url:s,focalRegion:c}=e.images?.[0]||e.cardContent.images?.[0]||{},d=[];let u;o&&d.push(o),r&&d.push(r),d.length&&(u=d.join(" - "));let l=90;const p=window?.navigator?.connection?.effectiveType;if(p){l={"slow-2g":20,"2g":40,"3g":60,"4g":80}[p]}else(R()||M()||x())&&(l=70);const{width:h,height:g}=t,f=(0,a.mL)(s,{width:h,height:g,focalRegion:c,enableDpiScaling:!1,quality:l,devicePixelRatio:1,enableWebpFormat:i});return{imageWidth:h.toString(),imageHeight:g.toString(),source:f,altText:u,visualReadinessCallback:n}}function _(e,t,n,i){if(!e||!t?.name||!n?.contentProviderAttributionLabel||i&&!n?.contentTypeFormattingAriaLabel)return null;const r=N(n,i);return r?(0,l.WU)(n?.contentTypeFormattingAriaLabel,r,e,t.name):(0,l.WU)(n.contentProviderAttributionLabel,e,t.name)}function N(e,t){return t===i.PL.Slideshow?e?.galleryAriaLabel:t===i.PL.Video?e?.videoAriaLabel:t===i.PL.WebContent?e?.crawledContentLabel:void 0}function B(e,t){return e?.find((e=>e.isDarkMode))?.hexColor&&e?.find((e=>!e.isDarkMode))?.hexColor?e:(0,o.pj)(t)}function U(e,t,n){if(!e||!t||!n)return;const i=(0,r.wc)(t,n);return i&&(i.type,r.gZ.OPINION,i.localizedLabel=e[i.type+"BadgeLabel"]),i}function $(e){return e.enableUltraCards}!function(e){e.liked="like",e.unliked="unlike",e.saved="save",e.followedPublisher="followedPublisher",e.followedTopic="followedTopic"}(k||(k={}))},15630:function(e,t,n){n.d(t,{PA:function(){return $},yg:function(){return W}});var i=n(98130),r=n(5232),o=n(33779),a=n(5302),s=n(523),c=n(34800),d=n(7733),u=n(5884),l=n(13218),p=n(28951),h=n(88048),g=n(32308),f=n(97265),m=n(5813),y=n(77062),v=n(44132),S=n(22680),w=n(52211),b=n(95378),C=n(21215);async function T(e,t){let n;L=performance.now();try{n=new Promise((async(n,i)=>{await k(e,t,0,n,i)}))}catch(e){throw new Error(e)}return n}async function k(e,t,n,i,r){try{let n=null;if(n=await async function(e,t,n){return new Promise((async(i,r)=>{const o=setTimeout((()=>r(new Error(`WinShell Service Request Timed out after ${e} milliseconds!`))),e);try{i(await fetch(t,n)),clearTimeout(o)}catch(e){r(e),clearTimeout(o)}}))}(A,e,t),!n.ok){if(!n.status)throw new Error("Falsy repsonse with no status code");const e=n.blob&&await n.blob();let t=`Response status code: ${n.status}`;throw e&&e.size&&(t+=`, response size: ${e.size}`),new Error(t)}i(n)}catch(s){if((0,C.N)()&&n<P){const o=3,a=parseFloat((Math.random()*(M-x)+x).toFixed(o)),s=.5,c=Math.random()<s?-1:1,d=Math.min(I*Math.pow(R,n),E)+a*c,u=n+1;let l;l=n>0?e.replace(`&retryAttempt=${n}`,`&retryAttempt=${u}`):e+=`&retryAttempt=${u}`,setTimeout((()=>k(l,t,u,i,r)),d)}else F=performance.now(),(0,o.H)(a.kwG,"All retry attempts failed","Retry attempts failed for WinShellBackoffRetry.fetch",{url:e,retryAttempts:n,maxRetries:P,errorDetails:s.message,totalRetryLatency:F-L}),r(s)}}const P=3,A=1e4,I=100,E=2e3,R=2,M=1,x=25;let L=0,F=0;class D{constructor(e){this.treatmentQueryStringParam="Treatment",this.wpoitemsStringParam="wpoitems",this.cardContext=e}async fetch(e={}){const t=await this.getRequestInit(),{ocid:n,flightData:r,treatment:s,apiVersion:c="v1",scenario:g,feedCluster:f,pivotId:v,templateId:w,nextPageUrl:b,isConsumptionFeed:C,contentId:T}=e||{},k=(0,y.Ee)(),P=e&&"shellv2"===e.contextSource,A=e&&"shell"===e.contextSource||P,I=A&&e.isXfeed;let E=`${c}/news/feed/windows/${w}`;E=A?this.buildShellRequest(e,E):this.buildWinWidgetsRequest(e,E),E=C?"v1/news/feed/pages/contextfeed":E;const R=new URLSearchParams((0,S.zp)()).get(m.YU)?new URL(E,m.LJ):(0,h.fU)(E),M=v&&"following"===v.toLowerCase();if(b){const t=new d.h(new URL(b).search);k>0&&t.set(y.i$,k.toString()),i.jG.SendFeedCallActivityIdInHeader||!i.jG.ActivityId||A||t.set("activityId",i.jG.ActivityId),A&&!t.get("scn")&&t.set("scn",u.Ji),M&&e.feedId&&t.get("query")&&(0,o.H)(a.cM_,"Windows Card Provider's following xfeed next page url has query QSP",void 0,{...a.cM_.pb,customMessage:`{ "nextPageUrl": "${b}", "feedID": "${e.feedId}" }`}),R.search=t.toString()}else{const e=[...await this.getCommonParams(n,r)];k>0&&e.push({key:y.i$,value:k.toString()}),e.forEach((e=>e.value&&R.searchParams.set(e.key,e.value))),s&&R.searchParams.set(this.treatmentQueryStringParam,s)}if(A){R.searchParams.set("caller","peregrine");const{column:t,wpoNote:n,requestContractVer:i,prong1Version:r}=e||{};M&&R.searchParams.set("wposchema","byregion"),t&&R.searchParams.set("column",t),n&&R.searchParams.set("wpoNote",n);const o=location.search||"",a="wpoitems";if(new RegExp(`[?&]${a}=`).test(o)){const e=new URLSearchParams(o),t=e&&e.get(a);t&&R.searchParams.set(a,t)}P&&R.searchParams.set("wv2","1"),[1,2,3,31,32].includes(i)&&R.searchParams.set("cv",`${i}`),[1,2].includes(r)&&R.searchParams.set("p1v",`${r}`)}if(C&&R.searchParams.set("ContentId",T),(e&&"winWidgets"===e.contextSource||I)&&e.feedId){const t=M&&!e.feedId.startsWith("Y_")?"ProviderId":"InterestIds";R.searchParams.set(t,e.feedId)}M&&(l.Al.CurrentFlightSet.has("prg-idfc")?R.searchParams.set("idfc","true"):R.searchParams.set("iff","true"),e.feedId&&(R.searchParams.delete("query"),l.Al.CurrentFlightSet.has("prg-pr2fol-time")&&(R.searchParams.set("ocid",m.i9),R.searchParams.set("apikey",m.S1)))),f&&(R.searchParams.set("query","UserFre"),R.searchParams.set("entityids",f),R.searchParams.set("DisableTypeSerialization","true"),R.searchParams.set("wrapodata","false")),e&&e.count&&R.searchParams.set("$top",`${e.count}`);const x=R.searchParams.get(i.jG.OneServiceContentMarketQspKey);x&&R.searchParams.set("osLocale",x),i.jG.SendFeedCallActivityIdInHeader&&R.searchParams.delete("activityId");const L=p.cX.getParamsWithItems(location.search);if(L){const t=L.find((e=>"idxExperienceTypeOverride"===e.key)),n=L.find((e=>"idxContentTypeOverride"===e.key)),i=L.find((e=>"idxTreatmentOverride"===e.key)),r=L.find((e=>"idxWpoKnobidsOverride"===e.key)),o=L.find((e=>"idxWpoEventRuleOverride"===e.key));if(t&&R.searchParams.set("Experience",t.value),n){const t=e.contentType?e.contentType:"article,video,slideshow",i=[...new Set(`${t},${n.value}`.split(","))];R.searchParams.set("contentType",i.join(","))}i&&R.searchParams.set(this.treatmentQueryStringParam,i.value),r&&R.searchParams.set(this.wpoitemsStringParam,`knobids:${r.value}`),o&&R.searchParams.set(this.wpoitemsStringParam,`byPassEventRule:${o.value}`)}g&&R.searchParams.set("scenario",g),R.searchParams.sort();const F={feedCluster:f,isFollowingPivot:M,isShellXfeed:I,isShell:A,nextPageUrl:b,request:e,requestParams:t,url:R};let D;if(A){const e=(i.jG.CurrentRequestTargetScope&&i.jG.CurrentRequestTargetScope.pageExperiments||[]).includes("prg-1sw-prg1retry"),n=decodeURIComponent(R.href),r=R.href;try{D=await this.get1SFeed(e,n,t,"WindowsCardProvider.fetch")}catch(n){let s;if(window.ShellFeedsApp){const e=window.ShellFeedsApp,t=await e.getQueryHeadersAsync();if(t){const e=t.MUID;if(e)try{const t=i.jG.StaticDomain.replace("assets.msn.","int.msn."),n=await fetch(`https://${t}/cdnhealth?user=${e}`);s={healthStatus:n.status,akamaiRequestID:n.headers["Akamai-Request-ID"]}}catch(e){s=e?e.toString():"Failed CDN health check"}}}(0,o.OO)(n,a.IVG,"Error while fetching OneService response","Initial call to assets failed",{winShellErrorDetails:s,responseStatus:D&&D.status});const c=r.replace("assets.msn.","api.msn.").replace("/service/v1/","/v1/"),d=decodeURIComponent(c);try{D=await this.get1SFeed(e,d,t,"WindowsCardProvider.apimsn.fetch")}catch(n){(0,o.OO)(n,a.IVG,"Error while fetching OneService response","Retry call to api.msn failed");const i=r.replace("assets.msn.","windows.msn."),s=decodeURIComponent(i);try{if(D=await this.get1SFeed(e,s,t,"WindowsCardProvider.windowsmsn.fetch"),!D||!D.ok)throw new Error("windows.msn call failed")}catch(n){(0,o.OO)(n,a.IVG,"Error while fetching OneService response","Retry call to windows.msn failed",{status:D.status,statusText:D.statusText||"",headers:D&&D.headers});const i=r.replace("assets.msn.","assets2.msn."),s=decodeURIComponent(i);try{D=await this.get1SFeed(e,s,t,"WindowsCardProvider.assets2.fetch")}catch(n){(0,o.OO)(n,a.IVG,"Error while fetching OneService response","Call to assets2 failed");const i=r.concat("&forcestatic=true"),s=decodeURIComponent(i);try{if(D=await this.get1SFeed(e,s,t,"WindowsCardProvider.forceFallback.fetch"),!D||!D.ok)throw new Error("Force fallback call failed")}catch(e){(0,o.OO)(e,a.IVG,"Error while fetching OneService response","Forced static call failed",{status:D.status,statusText:D.statusText||""})}}}}}}return await this.processResponse(F,D)}async processResponse(e,t){const{feedCluster:r,isFollowingPivot:o,isShellXfeed:s,isShell:c,nextPageUrl:d,request:l,requestParams:p,url:h}=e;let f;try{t?f=t:c||(f=await(0,g.w)((async()=>await fetch(decodeURIComponent(h.href),p)),"WindowsCardProvider.fetch"));const{status:e,statusText:S}=f||{},w=o&&204===e&&!h.searchParams.has("skip");if(!(f&&f.ok||o))return void v.M0.sendAppErrorEvent({...a.mfB,message:f?"OneService returned error response":"OneService response was null",pb:{...a.mfB.pb,fetchNetworkResponse:{statusCode:e,statusText:S,activityId:i.jG.ActivityId,requestUrl:h.href,requestHeaders:JSON.stringify(p&&p.headers),xfeed:s?`feedID: ${l.feedId} is not valid with respect to locale and market`:"not XFeed"},responseHeaders:this.getResponseHeaders(f)}});if(204===f.status&&(c&&v.M0.sendAppErrorEvent({...a.U7j,message:"OneService returned empty content 204 response",pb:{...a.U7j.pb,fetchNetworkResponse:{statusCode:f.status,statusText:f.statusText,activityId:i.jG.ActivityId,requestUrl:h.href,requestHeaders:JSON.stringify(p&&p.headers)},responseHeaders:this.getResponseHeaders(f)}}),!w))return{cards:[],netStatus:204};let b,C,T;if(f.headers){if(C=f.headers.get("X-Statics-Fallback"),C){(0,y.e5)(C);const e={...a.kiM.pb,activityId:i.jG.ActivityId,debugId:f.serviceContext&&f.serviceContext.debugId||"missing",responseHeaders:this.getResponseHeaders(f),requestUrl:h.href};s&&(e.isXFeed=1),v.M0.sendAppErrorEvent({...a.kiM,pb:e,message:"Static fallback content received"})}const e=f.headers.get(u.rD.traceId);b=v.M0.addOrUpdateIdxId(e,!d)}const k=f&&(!f.ok||204===e||404===e);if(o&&(!f||k))if(c){T=await n.e("manga-carousel").then(n.t.bind(n,21158,19));h.pathname.includes(m.n9)&&window.dispatchEvent(new CustomEvent("showFallbackFeed"))}else T=await n.e("manga-carousel").then(n.t.bind(n,81096,19));else T=await f.json();if(r&&T){return{layoutTemplate:l&&l.count&&24===l.count?"ShellTwoColumn-14HalfCard-HalfTopstory":"ShellTwoColumn-Four1U",cards:T.subCards}}return"winWidgets"!==l.contextSource&&!s||!T.sections||l.useRawJson?{...T,traceIdIndex:b,isStatic:C}:T.sections[0]}catch(e){const t=(0,b.Z)(p,"headers.Authorization");let n="";if(c)try{n=`Status code: ${(await fetch(`https://${i.jG.StaticDomain}/bundles/v1/windowsShell/latest/manifest.json`)).status}`}catch(e){n=e.toString()}v.M0.sendAppErrorEvent({...a.IVG,message:"Error while fetching OneService response",pb:{...a.IVG.pb,customMessage:`Error: ${e}`,fetchNetworkResponse:{activityId:i.jG.ActivityId,requestUrl:h.href,requestHeaders:JSON.stringify(t&&t.headers),statusCode:f&&f.status,statusText:f&&f.statusText},winShellErrorDetails:n}})}}async get1SFeed(e,t,n,i){return e?await T(t,n):await(0,g.w)((async()=>await fetch(t,n)),i)}async getRequestInit(e={method:"GET"}){return e.credentials="include",e.headers=await f.$D.getOneServiceFeedCallHeaders(),e}async getCommonParams(e,t){return 2===await(0,w.XJ)()?f.$D.getOneServiceParamsWithAuth(i.jG.UserId,e,!1,t):f.$D.getOneServiceParamsWithoutAuth(i.jG.UserId,e,!1,t)}getResponseHeaders(e){return e&&e.headers?JSON.stringify({"Akamai-Request-ID":e.headers.get("Akamai-Request-ID"),"Akamai-Server-IP":e.headers.get("Akamai-Server-IP"),"X-MSEdge-Ref":e.headers.get("X-MSEdge-Ref"),"X-StaticFallback-Reason":e.headers.get("X-StaticFallback-Reason")}):null}buildShellRequest(e,t){const{pivotId:n,isXfeed:i}=e||{};let{nextPageUrl:r}=e||{};if(i)if("following"===n){const n=e.feedId?m.n9:m.Pg;t=`${m.hZ}${n}`,r&&r.includes(m.H0)&&(r="")}else e.feedId&&(t=`${m.hZ}${m.H0}`);return t}buildWinWidgetsRequest(e,t){const{feedCluster:n,pivotId:i,isXfeed:r}=e||{};let{nextPageUrl:o}=e||{};if(r)if("Following"===i)if(e.feedId)t=`${m.hZ}${m.Qs}`,v.M0.addOrUpdateTmplProperty("filtered-feed","1"),o&&(o.includes(m.kX)||o.includes(m.Td)||!o.includes(e.feedId))&&(o="");else{const n="filteredChannels"===e.feedName||e.feedName===c.PL.DynamicFilteredChannel?m.Td:m.kX;t=`${m.hZ}${n}`,o?.includes(m.Qs)&&(o="")}else e.feedId&&(t=n?"news/feed":`${m.hZ}${m.H0}`);return t}}var O=n(46011),_=n(40053),N=n(82928),B=n(52185),U=n(81489);const $={followingChannelsUpdated:"femFollowingUpdated",recommendedChannelsUpdated:"femRecommendedUpdated",showFallbackFeed:"showFallbackFeed",hideFallbackFeed:"hideFallbackFeed"};class H{constructor(){this.currentFeedId="",this.overrideFeedConfig=null,this.feedManager=null,this.channels=[],this.onChannelChange=null,this.prevChannelStoreFollows=[],this.isProng2=()=>i.jG.isWindowsDashboard,this.isWinHP=()=>"windows"===i.jG.AppType,this.isNTP=()=>"edgeChromium"===i.jG.AppType,this.isCanvasSupported=()=>this.isProng2()||this.isWinHP()||this.isNTP(),this.transformResponse=(e,t)=>{if(e){const n=e.regions?.filter((e=>"river"===e.region)),i=n&&n.length&&n[0]&&n[0].sections,{type:r}=i?.[0]?.cards?.[0]||{};if(r===c.PL.ChannelFilterCard||r===c.PL.DynamicFilteredChannel||t&&r===c.PL.ChannelCarousel)return n?.[0]?.sections?.shift(),!0}return!1},this.fetchChannelFilter=async(e,t)=>{const n=!t?.fcl,i=await(this.isProng2()?this.fetchFromWindowsCardProvider(t):this.fetchFromWpoCardProvider(t,n));if(!i){const t=B.Gq.get("OneServiceResponseDebugId");throw(0,o.H)(a.nZQ,`Failed to load filtered channels for ${e}.`,void 0,{...a.nZQ.pb,debugId:t}),new Error}const r=this.getCardsFromResponse(i)[0];if(!r||r.type===c.PL.ChannelFilterCard||r.type===c.PL.DynamicFilteredChannel)return v.M0.addOrUpdateTmplProperty("numberOfFollowedChannels",r?.subCards?.length.toString()||"0"),r||{};r.type!==c.PL.ChannelCarousel&&(0,o.H)(a.k2Y,"The first card of filtered following channels response is not Channel Filter or Channel Carousel",`{ debugID: ${i.debugId}, nextPageUrl: ${i.nextPageUrl}, sections: ${JSON.stringify(i.sections)} }`)},this.fetchPublishers=async()=>{try{const e=await(this.publisherServiceClient?.getUserFollowedSources());if(e?.length)return e}catch(e){(0,o.H)(a.T4Y,"Failed to fetch publisher metadata",`{${e}}`)}},this.fetchChannel=async({id:e})=>{const t={feedId:e};return this.isProng2()?this.fetchFromWindowsCardProvider(t):this.fetchFromWpoCardProvider(t)},this.mapChannel=(e,t)=>{const n=["InterestChannel","InterestFeed"].includes(e.type);return{id:n?e?.feed?.id:e?.provider?.id,imgSrc:e.images?.[0]?.url||"",title:n?e?.feed?.feedName:e?.provider?.name,isFollowing:!0,isTopic:n,index:t,providerProfileId:!n&&e.provider&&e.provider.profileId}},this.getCardsFromResponse=e=>{if(!e)return[];const t=e.sections?.filter((e=>"river"===e.region)),n=t&&t.length?t:e.sections,{cards:i=[],subSections:r}=n&&n.length&&n[0]||{};return(r?r[0]?.cards:i)||[]},this.fetchFromWindowsCardProvider=(e={})=>{const t={contextSource:"winWidgets",count:12,feedId:"",isXfeed:!0,ocid:"winp2",useRawJson:!0,pivotId:"Following",...e};return(new D).fetch(t)},this.fetchFromWpoCardProvider=(e={},t=!0)=>{let n=(0,r.ku)();i.jG.IsHeroNTP&&(n="msedgntp");const o={ocid:n,timeoutMs:2e3,feedName:"following",requestId:v.M0.getRequestId(),shouldUseNewWpoEndpoint:!0,wpoSchema:"byregion",...e};return new O.fy({initialRequest:{timeoutMs:2e3}},!1).fetchFromWpoService(o,t)},this.resetChannelFeedId=()=>{this.currentFeedId=""},this.setChannelFeed=async e=>{if(e!==this.currentFeedId&&(e||this.currentFeedId))if(this.currentFeedId=e,this.overrideFeedConfig)this.overrideFeedConfig((t=>(t.riverSectionCardProviderConfig?.initialRequest&&(t.riverSectionCardProviderConfig.initialRequest.feedName="following",t.riverSectionCardProviderConfig.initialRequest.feedId=e,t.riverSectionCardProviderConfig.initialRequest.isXFeed=!0,t.riverSectionCardProviderConfig.initialRequest.timeoutMs=3e3),t)));else if(this.feedManager){const t=this.isProng2()?"Following":"following",n=this.isProng2()?"winWidgets":"",i={isXFeed:!0,feedId:e,pivotId:t,contextSource:n};await this.feedManager.callRefreshRegionsData(i)}else this.onChannelChange&&this.onChannelChange(e)},this.setFeedConfigOverrider=e=>{this.overrideFeedConfig=e},this.setFeedManager=e=>{this.feedManager=e},this.setChannelCallback=e=>{this.onChannelChange=e},this.setChannels=e=>{this.channels=e,window.dispatchEvent(new CustomEvent($.followingChannelsUpdated))},this.setChannelsRecommendations=e=>{this.channels=e,window.dispatchEvent(new CustomEvent($.recommendedChannelsUpdated))},this.isProviderChannel=e=>this.channels.some((({id:t,isTopic:n})=>e===t&&!n)),this.showFallbackFeed=()=>{window.dispatchEvent(new CustomEvent($.showFallbackFeed))},this.hideFallbackFeed=()=>{window.dispatchEvent(new CustomEvent($.hideFallbackFeed))},this.isFeedFetching=()=>this.feedManager&&this.feedManager.isFeedFetching()}static getInstance(){return B.Gq.get("__FollowingExperienceManager__",(()=>new H))}initializeServiceClients(){this.topicsDataConnector||(this.topicsDataConnector=(0,N.K0)(s.x0)),this.publisherServiceClient||(this.publisherServiceClient=new _.PublisherServiceClient(window.fetch.bind(window),!1)),this.topicsDataConnector||(0,o.H)(a.T4K,"Topic Data Connector is not defined in ChannelFilter experience.")}}const W=(0,U.h)(H)},10105:function(e,t,n){n.d(t,{l:function(){return u}});var i=n(84381),r=n(33779),o=n(5302),a=n(13218),s=n(98130),c=n(21215),d=n(44132);async function u(e,t=!1){const{CurrentFlightSet:n,ClientSettings:u}=a.Al;if(!(0,c.N)()||"true"===u?.static_page)return;const l=(0,i.g)(20),{debugId:p,fdHead:h,fdFlightingVersion:g,requestHeaderMuid:f}=e||{};if(!h)return;const{requestMuid:m,requestTrailInfo:y}=u,v=y?.flightVersion,S=m?.toLowerCase(),w=f?.replace(/-/g,"").toLowerCase(),b=new Set(h.toLocaleLowerCase().split(",")),C={pcsMuid:S,oneServiceMuid:w,pcsFlightBlobVersion:v,oneServiceFlightBlobVersion:g,oneServiceDebugId:p},T=[],k=n||new Set;if(!k||!k.size)return void(l&&(0,r.H)(o.UUQ,"PCS flights are empty",`ClientSettings.static_page = ${u?.static_page}`,C));S&&w&&w!==S&&l&&(0,r.H)(o.Zdq,"Muid mismatch between PCS and 1S",void 0,C);const P=function(){const e=s.jG.AppType;if("winWidgets"===e)return"prg-pr2";if("windowsShell"===e||"windowsShellV2"==e)return"prg-1sw-";return"prg-"}();for(const e of k)e.startsWith(P)&&!b.has(e)&&T.push(e);for(const e of b)e.startsWith(P)&&!k.has(e)&&T.push(e);T&&T.length>0&&(t&&d.M0.addOrUpdateTmplProperty("flight-mismatch"),l&&(0,r.H)(o.qjh,"Flight mismatch between PCS and 1S",void 0,{missingPrgFlights:T.join(","),commonProps:C}))}},93348:function(e,t,n){n.d(t,{p:function(){return c}});var i=n(84381),r=n(33779),o=n(5302),a=n(21215),s=n(13218);function c(e){const{tier:t}=e||{},{ClientSettings:n}=s.Al;if(!(0,a.N)()||!n||n.static_page||!(0,i.g)(5))return;const c=n.detection?.tier;c&&t&&c!==t&&(0,r.H)(o.DWl,"Traffic tier mismatch between PCS and 1S",void 0,{pcsTrafficTier:c,oneServiceTrafficTier:t})}},94289:function(e,t,n){n.d(t,{L:function(){return a}});var i=n(52185),r=n(81489);class o{constructor(){this.metadataStore={}}static getInstance(){return i.Gq.get("__AdPageMetadataHubInstance__",(()=>new o))}setMetadata(e,t){this.metadataStore[e]=t}setMetadatas(e){for(const t in e)this.metadataStore[t]=e[t]}getMetadata(e){return this.metadataStore[e]}setRulesOverride(e){this.rulesOverride=e}getRulesOverride(){return this.rulesOverride}}const a=(0,r.h)(o)},59571:function(e,t,n){var i,r;n.d(t,{l:function(){return r}}),function(e){e.MobileApp="mobileapp",e.MobileWeb="mobileweb",e.DesktopWeb="desktopweb",e.DesktopApp="desktopapp"}(i||(i={})),function(e){e.Publisher="Publisher",e.Language="Language",e.Market="Market",e.PageType="PageType",e.DeviceType="DeviceType",e.ContentCategory="ContentCategory",e.ContentSubcategory="ContentSubcategory",e.ProviderId="ProviderId",e.ContentTopic="ContentTopic",e.GameTitle="GameTitle",e.GameGenre="GameGenre"}(r||(r={}))},82449:function(e,t,n){n.d(t,{N5:function(){return s},lG:function(){return a},m$:function(){return o}});var i=n(52185),r=n(59571);const o=(0,i.TG)({[r.l.Publisher]:"pub",[r.l.Language]:"lang",[r.l.Market]:"market",[r.l.PageType]:"sales_page_type",[r.l.DeviceType]:"device_type",[r.l.ContentCategory]:"cat",[r.l.ContentSubcategory]:"subcat",[r.l.ContentTopic]:"cont_topic",[r.l.ProviderId]:"sales_provider_id",[r.l.GameTitle]:"game_title",[r.l.GameGenre]:"game_genre"});var a;!function(e){e.PlacementRegion="PlacementRegion",e.PlacementPosition="PlacementPosition"}(a||(a={}));const s=(0,i.TG)({[a.PlacementRegion]:"plcmnt_region",[a.PlacementPosition]:"sales_pos"})},87797:function(e,t,n){n.d(t,{km:function(){return u}});var i,r=n(94289),o=n(59571),a=n(82449);!function(e){e.TruncateArray="TruncateArray"}(i||(i={}));const s={[i.TruncateArray]:(e,t)=>Array.isArray(e)?e.slice(0,t):e},c=(e,t)=>t.reduce(((e,t)=>s[t.type](e,t.config)),e),d={[o.l.ContentTopic]:[{type:i.TruncateArray,config:3}]},u=e=>{const t=[];for(const n in a.m$.current){const i=a.m$.current[n],o=r.L.getMetadata(n),s=r.L.getRulesOverride()??d;if(o){const r=e(i,c(o,s?.[n]||[]));void 0!==r&&t.push(r)}}return t}},15848:function(e,t,n){n.d(t,{Qg:function(){return s},z1:function(){return o}});var i=n(82449),r=n(87797);const o=()=>{const e=(0,r.km)(((e,t)=>[e,t]));return Object.fromEntries(e)},a=({region:e,position:t})=>{const n=[[i.lG.PlacementRegion,e],[i.lG.PlacementPosition,t]].filter((([e,t])=>t));return Object.fromEntries(n.map((([e,t])=>[i.N5.current[e],t])))},s=e=>{const{region:t,position:n}=e;return a({region:t,position:n})}},98130:function(e,t,n){n.d(t,{Vh:function(){return D},jG:function(){return _},Yq:function(){return O}});var i,r,o,a=n(99234),s=n(22011),c=n(5302),d=n(242),u=n(30172);!function(e){e.WWW="www",e.MicrosoftStart="microsoftstart",e.INT="int",e.INT1="int1",e.MicrosoftStartINT="microsoftstart-int",e.MicrosoftStartINT1="microsoftstart-int1"}(i||(i={})),function(e){e.MSN="msn",e.MicrosoftStart="microsoftstart"}(r||(r={})),function(e){e.COM="com",e.CN="cn"}(o||(o={}));var l,p=n(79493),h=n(5884);!function(e){e.getHostPageFromUrl=function(e){if(!e)return;const t=new URL(e),n=t.hostname,i=t.pathname.split("/"),r=(n.match(/[^.]+\.[^.\d]+$/)||{})[0]||"";if(i.length<=h.Qw)return{originalUrl:e,categoryKey:null,verticalKey:null,hostName:n,topDomain:r};const o=5===i[1].length&&2===i[1].split("-").length?1:0,a={originalUrl:e,categoryKey:i[2+o],verticalKey:i[1+o],hostName:n,topDomain:r};return i.length>=h.Qw&&(a.subcategoryKey=i[3+o]),a}}(l||(l={}));var g=n(21215),f=n(22680),m=n(52185),y=n(81489),v=n(19625),S=n(93692),w=n(19204),b=n(68052);var C,T=n(97634),k=n(58009);!function(e){e.prod="prod",e.prodssr="prod-ssr",e.staging="staging",e.int1="int1",e.int="int",e.intpr="intpr",e.intperf="intperf"}(C||(C={}));var P=n(83226),A=n(28951),I=n(55025),E=n(28123),R=n(25769),M=n(13218);var x=n(79022),L=n(52998);const F="__AppEnvironmentInstance__";class D{get ShouldUseFdheadQsp(){return this.shouldUseFdheadQsp}set ShouldUseFdheadQsp(e){this.shouldUseFdheadQsp=e}get DisableInMemoryCache(){return!!this.disableInMemoryCache}set DisableInMemoryCache(e){this.disableInMemoryCache=e}get CanvasTheme(){return this.canvasTheme}set CanvasTheme(e){this.canvasTheme=e}get OneServiceContentMarketQspKey(){return this.oneServiceContentMarketQspKey}get Ecasession(){return void 0===this.ecasession&&(this.ecasession=(0,v.ej)("ecasession")||"init"),this.ecasession}get BrowserOptOut(){return void 0===this.browserOptOut&&(this.browserOptOut="1"===(0,v.ej)("TOptOut")),this.browserOptOut}get MachineId(){return this.machineId}set MachineId(e){this.machineId=e}get isMobile(){const e=M.Al?.ClientSettings?.ocid||"",t=M.Al?.ClientSettings?.deviceFormFactor||"";return e.startsWith("msnaroverlay")||"phone"===t}get isMiniProgram(){const e=M.Al.ClientSettings||{ocid:"",deviceFormFactor:""},t=(0,g.N)()?"weatherminiprogram"===e.ocid||(navigator?.userAgent||"").indexOf("miniProgram")>-1:"weatherminiprogram"===e.ocid;return"phone"===e.deviceFormFactor&&t}get isOverlayFrame(){return(M.Al?.ClientSettings?.ocid||"").startsWith("msnaroverlay")}get ActivityId(){return this.activityId}set ActivityId(e){this.activityId=e,M.Al.ClientSettings={...M.Al.ClientSettings,aid:e}}get FrontDoorMuid(){return this.frontDoorMuid}get EnvironmentConfigUrl(){const e=new URL("",this.environmentConfigUrl);"dev"===new URLSearchParams((0,f.zp)()).get("env")&&e.searchParams.set("env.config","dev");const t=new URLSearchParams((0,f.zp)()).get("env.config");return t&&e.searchParams.set("env.config",t),e}get ContentServiceUrlBase(){const e=new URL("",this.contentServiceUrlBase);"dev"===new URLSearchParams((0,f.zp)()).get("env")&&e.searchParams.set("env.content","dev");const t=new URLSearchParams((0,f.zp)()).get("env.content");return t&&e.searchParams.set("env.content",t),e}get CurrentRequestTargetScope(){return this.currentRequestTargetScope}set CurrentRequestTargetScope(e){this.currentRequestTargetScope=e}get LocaleContentMarket(){return(0,T.He)(M.Al.ClientSettings&&M.Al.ClientSettings.locale)||this.currentRequestTargetScope?.locale?.content||this.currentRequestTargetScope?.locale}get LocaleDisplayLanguage(){return(0,T.He)(M.Al.ClientSettings&&M.Al.ClientSettings.locale,!0)||this.LocaleContentMarket}get LocaleContentMarketString(){const e=this.LocaleContentMarket;return e&&e.language&&e.market?(0,T.py)(e):""}get LocaleDisplayLanguageString(){const e=this.LocaleDisplayLanguage;return e&&e.language&&e.market?(0,T.py)(e):""}get SourceUrl(){let e=_.HostPage.originalUrl;const t=_.CurrentRequestTargetScope.pageType,n=_.HostPage.verticalKey;if("localhost.msn.com"===_.HostPage.hostName&&"ntp"===t)return e="https://ntp.msn.com/edge/ntp",e;if(t&&n){const i=t.toLowerCase();(i.indexOf("dhp")>-1||i.indexOf("ntp")>-1)&&(e="https://"+_.HostPage.hostName+"/"+n+"/"+t)}return e}get CurrentMarket(){return this.currentMarket}set CurrentMarket(e){this.currentMarket=e}get EnableFiveColLayout(){return this.enableFiveColLayout}set EnableFiveColLayout(e){this.enableFiveColLayout=e}get Environment(){return this.environment}set Environment(e){this.environment=e}get StaticDomain(){return this.staticDomain}get HostPage(){return this.hostPage}set HostPage(e){this.hostPage=e}get AppType(){return this.appType}get MiniAppId(){return this.miniAppId}get AuthCookieName(){return this.authCookieName}set AuthCookieName(e){this.authCookieName=e}get UseAuthFetch(){return this.useAuthFetch}set UseAuthFetch(e){this.useAuthFetch=e}get AccountInfoPromise(){return this.accountInfoPromise}set AccountInfoPromise(e){this.accountInfoPromise=e}get ResolvedAccountInfo(){return this.resolvedAccountInfo}set ResolvedAccountInfo(e){this.resolvedAccountInfo=e}get BuildVersion(){return this.buildVersion||""}get ClarityEnabled(){return this.clarityEnabled}set ClarityEnabled(e){this.clarityEnabled=e}get IsWinAADUser(){return this.isWinAADUser}set IsWinAADUser(e){this.isWinAADUser=e}get RootTelemetryId(){return this.rootTelemetryId}set RootTelemetryId(e){this.rootTelemetryId=e}get TrackInfo(){return this.trackInfo}set TrackInfo(e){this.trackInfo=e}get UserId(){return this.getUserMuid()||this.userId}set UserId(e){this.userId=e}get OneServiceApiKey(){return this.oneServiceApiKey}set OneServiceApiKey(e){this.oneServiceApiKey=e}get OneServiceOverride(){return this.oneServiceOverride}set OneServiceOverride(e){this.oneServiceOverride=e}get EnvInstanceOverride(){return this.envInstanceOverride}get IsDebug(){return this.isDebug}get NavTargetHostName(){return this.navTargetHost}get UseCachedApp(){return(0,g.N)()&&!!window.__useCachedApp}get NavTargetUrlWithLocale(){return`https://${this.NavTargetHostName}/${this.CurrentMarket}`}get IsChinaCompliance(){return this.isChinaCompliance}get IsCaliforniaRegion(){return this.isCaliforniaRegion}get AssetsUrl(){return this.staticAssetsUrl}set AssetsUrl(e){this.staticAssetsUrl=e}get StaticsUrl(){return this.staticsUrl}get StaticsUrlWithBuild(){return this.staticsUrlWithBuild}get topDomain(){return this.isChinaCompliance?o.CN:o.COM}get OptOutOfPersonalization(){return this.optOutOfPersonalization}set OptOutOfPersonalization(e){this.optOutOfPersonalization=e}get OptOutOfModelTraining(){return this.optOutOfModelTraining}set OptOutOfModelTraining(e){this.optOutOfModelTraining=e}get isGccModUser(){if((0,E.TJ)()){const e=(0,R.yL)();Promise.resolve(e===a.iN.GCC_MODERATE)}if(this.AccountInfoPromise)return this.AccountInfoPromise.then((e=>e?.region_scope===a.iN.GCC_MODERATE))}get unsupportedEnterpriseCloud(){if((0,E.TJ)()){const e=(0,R.yL)();Promise.resolve(!(e===a.iN.GLOBAL))}if(this.AccountInfoPromise)return this.AccountInfoPromise.then((e=>!(e?.region_scope===a.iN.GLOBAL)))}get WidgetAttributes(){return this.widgetAttributes}set WidgetAttributes(e){this.widgetAttributes=e}get ServiceUrlBase(){const e=new URL("",this.serviceUrlBase);"dev"===new URLSearchParams((0,f.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,f.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get FeedServiceUrlBase(){if(!this.feedServiceUrlBase)return null;const e=new URL("",this.feedServiceUrlBase);"dev"===new URLSearchParams((0,f.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,f.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get EnterpriseServiceUrlBase(){if(!this.enterpriseServiceDomainUrl)return;const e=new URL("",this.enterpriseServiceDomainUrl);"dev"===new URLSearchParams((0,f.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,f.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get isAadAccountUser(){return this.CurrentRequestTargetScope&&"enterprise"===this.CurrentRequestTargetScope.audienceMode&&this.ResolvedAccountInfo&&this.ResolvedAccountInfo.account_type&&"AAD"===this.ResolvedAccountInfo.account_type}get IsFrePage(){return this.isFrePage}get DisableCachingConfigs(){return this.disableCachingConfigs}get EnableConfigService(){const e=A.cX.getQueryParameterByName("enableConfigService",(0,f.zp)());return e?"true"===e.toLocaleLowerCase():this.enableConfigService}get EnableCMSPPEConfigs(){return M.Al&&M.Al.EnableCMSPPEConfigs}get IsMultiConfigRetrievalEnabled(){return this.isMultiConfigRetrievalEnabled}get SendFeedCallActivityIdInHeader(){return this.sendFeedCallActivityIdInHeader}get SendUserIdInHeader(){return this.sendUserIdInHeader}set SendUserIdInHeader(e){this.sendUserIdInHeader=e}get ConfigServiceBaseUrl(){return this.configServiceBaseUrl}get CrsRetryBaseUrl(){return this.crsRetryBaseUrl}get FeatureFlags(){return this.featureFlags}get HostHeaderOverride(){return this.hostHeaderOverride}get ConfigRootUrl(){if(!this.configRootUrl)return null;const e=new URL("",this.configRootUrl);"dev"===new URLSearchParams((0,f.zp)()).get("env")&&e.searchParams.set("env.config","dev");const t=new URLSearchParams((0,f.zp)()).get("env.config");return t&&e.searchParams.set("env.config",t),e}get CacheBustingIdentifier(){return this.cacheBustingIdentifier}get IsGitConfigs(){return this.isGitConfigs}get CountryCode(){return this.countryCode}set CountryCode(e){this.countryCode=e}get ActivityIdLowerCaseNoHypens(){return(M.Al&&M.Al.ClientSettings&&M.Al.ClientSettings.aid||"").toLowerCase()}get Latitude(){return this.latitude}get Longitude(){return this.longitude}get ConfigOrigins(){return this.configOrigins}get CrsVersion(){return this.crsVersion}get CrsPath(){return this.crsPath}get CrsDisableServerCache(){return this.crsDisableServerCache}set CrsDisableServerCache(e){this.crsDisableServerCache=e}get LanguageRegionMismatch(){return this.findLanguageRegionMismatch()?"marketmismatch":""}get isWindowsDashboard(){return"windowsNewsPlus"===_.AppType||"winWidgets"===_.AppType}get LanguageRegionMismatchExplicit(){return this.findLanguageRegionMismatchExplicit()?"marketmismatch":""}get MarketRequestInputLanguage(){return this.marketRequestInputLanguage}get MarketRequestInputRegion(){return this.marketRequestInputRegion}get MarketRequestInputGeoCountry(){return this.marketRequestInputGeoCountry}get MarketDetectionType(){return this.marketDetectionType}get TelemetryInitOptions(){return this.telemetryInitOptions}get BatchedEvents(){const e=M.Al?.CurrentFlightSet||new Set("");return e.has("telbatloadtime")?["LoadTime","LoadTimeDiag"]:e.has("telbaterrors")?["AppError"]:e.has("telbatdiag")?["AppError","ClientLog","LoadTime","LoadTimeDiag","TraceInfo"]:e.has("telbatmost")?["AppError","ClientLog","LoadTime","LoadTimeDiag","TraceInfo","ContentView"]:e.has("telbatcontentvw")?["ContentView"]:e.has("telbatlogs")?["AppError","ClientLog","TraceInfo"]:void 0}get ConfigStaticFallbackBaseUrl(){return`${this.IsChinaCompliance?s.NH:s.pN}/periconfigs/`}findLanguageRegionMismatch(){if(M.Al.ClientSettings&&"true"===M.Al.ClientSettings.static_page)return!1;const e=M.Al.ClientSettings&&M.Al.ClientSettings?.market&&M.Al.ClientSettings?.market?.detection,t=M.Al.ClientSettings&&M.Al.ClientSettings?.market&&M.Al.ClientSettings?.market?.requestInput,n=(0,T.He)(M.Al.ClientSettings&&M.Al.ClientSettings?.locale&&M.Al.ClientSettings?.locale?.content),i=e&&e?.recommendLanguageCoachmark;if(e&&("implicitExisting"===e.type||"implicitNew"===e.type||"cm"===e.type||"implicitReset"===e.type)&&t){if(n){if(t.language.toLowerCase()!==n.language.toLowerCase()||"true"===i)return this.marketMismatchDetails.type="language",this.marketMismatchDetails.mismatchItem1=t.language.toLowerCase(),this.marketMismatchDetails.mismatchItem2=n.language.toLowerCase(),!0;if(t.region&&t.region.toLowerCase()!==n.market.toLowerCase())return this.marketMismatchDetails.type="region",this.marketMismatchDetails.mismatchItem1=t.region.toLowerCase(),this.marketMismatchDetails.mismatchItem2=n.market.toLowerCase(),!0}if("implicitExisting"===e.type&&e.geo_country&&""!==e.geo_country&&t.geo_country.toLowerCase()!==e.geo_country.toLowerCase())return this.marketMismatchDetails.type="geo_country",this.marketMismatchDetails.mismatchItem1=t.geo_country.toLowerCase(),this.marketMismatchDetails.mismatchItem2=e.geo_country.toLowerCase(),!0}return!1}get MarketMismatchDetail(){return this.findLanguageRegionMismatch()||this.findLanguageRegionMismatchExplicit()?this.marketMismatchDetails:null}findLanguageRegionMismatchExplicit(){if(M.Al.ClientSettings&&"true"===M.Al.ClientSettings.static_page)return!1;const e=M.Al.ClientSettings&&M.Al.ClientSettings?.market&&M.Al.ClientSettings?.market?.detection,t=M.Al.ClientSettings&&M.Al.ClientSettings?.market&&M.Al.ClientSettings?.market?.requestInput,n=(0,T.He)(M.Al.ClientSettings&&M.Al.ClientSettings?.locale&&M.Al.ClientSettings?.locale?.content);if(e&&"compliance"!==e.type&&"url"!==e.type&&t){if(n){if(t.language.toLowerCase()!==n.language.toLowerCase())return this.marketMismatchDetails.type="language",this.marketMismatchDetails.mismatchItem1=t.language.toLowerCase(),this.marketMismatchDetails.mismatchItem2=n.language.toLowerCase(),!0;if(t.region&&t.region.toLowerCase()!==n.market.toLowerCase())return this.marketMismatchDetails.type="region",this.marketMismatchDetails.mismatchItem1=t.region.toLowerCase(),this.marketMismatchDetails.mismatchItem2=n.market.toLowerCase(),!0}if(t.geo_country.toLowerCase()!==e.geo_country.toLowerCase())return this.marketMismatchDetails.type="geo_country",this.marketMismatchDetails.mismatchItem1=t.geo_country.toLowerCase(),this.marketMismatchDetails.mismatchItem2=e.geo_country.toLowerCase(),!0}return!1}setConfigOrigin(){const e={feature:u.w.Production,loc:u.w.Production};return this.IsGitConfigs&&!this.EnableConfigService||(e.feature=u.w.Production,e.loc=u.w.Production),e}constructor(e,t,n,i,r){this.assetsGlobalUrl="https://assets.msn.com",this.assetsCNUrl="https://assets.msn.cn",this.heroOcids=["widgetonlockscreen","widgetonlockscreenwin10","calendarontaskbar","winp2fpwidgetboard","wind_spot_2","webwidgetonboard","webwidgetonlockscreen","wind_spot_desktop"],this.optOutOfPersonalization=!1,this.optOutOfModelTraining=!1,this.marketMismatchDetails={type:"",mismatchItem1:"",mismatchItem2:""},this.initializeAppEnvironment(e,t,n,i,r)}static getInstance(e=null,t=null,n=null,i=null,r=null){return m.Gq.get(F,(()=>new D(e,t,n,i,r)))}static resetInstance(e=null,t=null,n=null,i=null,r=null){const o=new D(e,t,n,i,r);return m.Gq.set(F,o),_=(0,y.h)(D),_}get IsHeroNTP(){return this.isHeroNTP}set IsHeroNTP(e){this.isHeroNTP=e}get IsUCBased(){return this.isUCBased}set IsUCBased(e){this.isUCBased=e}get IsUCPeekMode(){return this.isUCPeekMode}set IsUCPeekMode(e){this.isUCPeekMode=e}get IsHalfViewportUC(){return this.isHalfViewportUC}set IsHalfViewportUC(e){this.isHalfViewportUC=e}get UxMode(){return this.currentRequestTargetScope?.modes?.uxMode}initializeAppEnvironment(e,t,n,i,r){const o=(0,f.Td)(),a=(0,g.N)()?(0,f.$w)(h.Xs):null,d=(0,f.l4)(),u=(0,f.Dp)(),m=(0,f.zp)(),y=(0,g.N)()?o.includes("localhost.msn.com"):o.includes("localhost");let v=null;const S=M.Al&&M.Al.ClientSettings,w=A.cX.getParamsWithItems(m,!0);let b=!1;if(S){this.isCaliforniaRegion=S.geo_subdivision&&"california"==S.geo_subdivision.toLocaleLowerCase(),this.isChinaCompliance=function(e,t){return!!(e.hostname.toLowerCase().endsWith(".cn")||t.isChinaCompliance||t.useCnDomain||e.search.match(/isChinaBuild=true/i)||e.search.match(/item=revip:cn/))}({hostname:o,search:m},S),(0,k.sV)(this.isChinaCompliance),this.activityId=this.tryReformatGuid(S.aid),this.currentMarket=this.LocaleContentMarketString||S.apps_locale,this.countryCode=S.geo_country,this.frontDoorMuid=S.fd_muid,this.latitude=S.geo_lat,this.longitude=S.geo_long,this.configRootUrl=S.configRootUrl?new URL("",S.configRootUrl):null,v=(0,p.s)(S.pcsInfo&&S.pcsInfo.env||"prod"),this.setAccountInfoPromise(),this.appType=S.apptype||"",this.miniAppId=S.miniAppId||"",this.authCookieName=this.getAuthCookieName(),this.useAuthFetch=!1;const{featureFlags:e}=S;this.featureFlags=e,b=e&&"true"===e.disableCachingConfigs,this.enableConfigService=!e||!e.enableConfigService||"true"===e.enableConfigService,this.sendFeedCallActivityIdInHeader=(!e||!e.disableActivityIdInHeader||"true"!==e.disableActivityIdInHeader)&&"hub"===this.appType,this.cacheBustingIdentifier=S.cbid;const{bundleInfo:t,pcsInfo:n}=S||{};this.isDebug=(A.cX.getQueryParameterByName("debug",d)||"").toLowerCase()in{1:1,true:1}||(A.cX.getQueryParameterByName("item",d)||"").toLowerCase().indexOf("/debug")>0||y;const i=this.getRunTimePropertyBag(t,n);(0,c.GQ)(i),(0,L.r7)(i),this.configIndexDocId=S.configIndexDocId,this.widgetAttributes=S.widgetAttributes}const C=(0,p.s)(A.cX.getQueryParameterByName("env",d));this.environment=C||v||p.q.prod,this.envInstanceOverride=A.cX.getQueryParameterByName("instance",d);const T=S&&S.servicesEndpoints,I=T&&T.feedService&&T.feedService.domain||u;this.serviceDomainUrl=n||I,this.oneServiceOverride=r,this.staticDomain=new URL(I).host,this.staticAssetsUrl=T&&T.staticConfig&&T.staticConfig.domain||(this.isChinaCompliance?"https://assets.msn.cn":"https://assets.msn.com"),this.staticsUrl=(y&&!0!==globalThis?.isSSREnabled?u:this.staticAssetsUrl)+"/staticsb/statics/";const E=w.find((e=>"pr"===e.key))?.value,R=E&&`pr-${E}`||"latest";this.staticsUrlWithBuild=this.staticsUrl+R+"/",this.enterpriseServiceDomainUrl=T&&T.enterpriseFeedService&&T.enterpriseFeedService.domain;const{crs:x={}}=T||{},{v:F,domain:D,path:O}=x;this.crsVersion=F,this.crsDomain=D,this.crsPath=O||s.mX;const{requestInput:_={},detection:N={}}=S&&S.market||{},{language:B="",region:U="",geo_country:$=""}=_||{},{type:H=""}=N||{};this.marketRequestInputLanguage=B,this.marketRequestInputRegion=U,this.marketRequestInputGeoCountry=$,this.marketDetectionType=H,this.serviceUrlBase=e||a&&a.getAttribute(h.X8)&&new URL("",a.getAttribute(h.X8))||new URL("/service/",this.serviceDomainUrl),this.feedServiceUrlBase=this.serviceDomainUrl&&new URL("/service/",this.serviceDomainUrl)||void 0,this.hostPage=l.getHostPageFromUrl(d),this.isFrePage="1"===A.cX.getQueryParameterByName("fre",d),this.userId=this.getUserMuid(),this.rootTelemetryId=a?Number(a.getAttribute(h.DB)):0;const W=a&&a.getAttribute(h.uw),G=a&&a.getAttribute(h.Kz);this.trackInfo={sitePage:{page_product:W,page_type:G}},this.setNavTargetHostName(),this.setTargetScope();const V=this.currentRequestTargetScope&&this.currentRequestTargetScope.pageExperiments||[];this.disableCachingConfigs=b||(0,g.N)()&&V.includes("inlincrscall"),this.crsVersion=(0,P.W_)(this.crsVersion||"",V,this.appType||""),this.isGitConfigs=this.useGitConfigs(),this.configOrigins=this.setConfigOrigin(),this.contentServiceUrlBase=this.serviceDomainUrl?new URL("/content/",this.serviceDomainUrl):void 0,this.isMultiConfigRetrievalEnabled=this.useMultiConfigsRetrieval();const q=this.getConfigServiceBaseUrl(this.isMultiConfigRetrievalEnabled,t);this.configServiceBaseUrl=q?new URL("",q):null,this.environmentConfigUrl=this.serviceDomainUrl?new URL("/config/v1/",this.serviceDomainUrl):void 0,this.oneServiceApiKey=this.getOneServiceApiKey(),this.enableFiveColLayout=!1,i&&(this.hostHeaderOverride=i);const j={appType:this.appType,flights:M.Al.CurrentFlights,itemOverrides:w},z=m&&(m.includes("vptest=1")||m.includes("reqsrc=vp")),K="edgeChromium"===this.appType&&!(0,g.N)();this.shouldUseFdheadQsp=z||(0,P.Bc)(j,K),this.oneServiceContentMarketQspKey=z?"market":"cm";const Q="homePage"===this.appType&&m&&m.includes("segment="),J=A.cX.getQueryParameterByName("ucexperience",(0,f.l4)());this.isHeroNTP=this.heroOcids.includes(M.Al?.ClientSettings?.ocid)&&("edgeChromium"===this.appType||Q),this.isHalfViewportUC="half"===J,this.isUCBased="full"===J||this.isHalfViewportUC,this.isUCPeekMode="peek"===A.cX.getQueryParameterByName("exp",(0,f.l4)()),this.telemetryInitOptions={excludeCsMetaData:M.Al.CurrentFlightSet?.has("telnometadata")}}getOneServiceApiKey(){if(this.widgetAttributes&&this.widgetAttributes.feed&&this.widgetAttributes.feed.apiKey)return this.widgetAttributes.feed.apiKey;const e="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM";let t;const n=["gaming","gaming::car","gaming::ai","gaming::deepseek"];switch(this.appType){case"windowsShell":case"windowsShellV2":t="pWw5OmQehOA0XNfgcgrTrwEJZJJJzE83ovtTQx6JRG";break;case"windowsNewsPlus":case"winWidgets":case"webWidgets":t="AEbyVYqTQAPvg4lWwMSFHaLkDzl3weRKKIDDInLQUj";break;case"edgeChromium":t="1hYoJsIRvPEnSkk0hlnJF2092mHqiz7xFenIFKa9uc";break;case"bingHomepage":case"distribution":t="lenovo"===M.Al.ClientSettings.pagetype?"OrorOEMX3w4Hsk49OXMM6YayCYQw3OHcpzqiXEk9xd":"edgewelcome"===M.Al.ClientSettings.pagetype?"oPFhbDSAghltCuG6UvQCcxmngSVye65eXQHHu3voxZ":"QMmdky7jrTlM4mWJmMYQTi71lp678KyZJBKHCAyKCg";break;case"sharedWidgets":t="hFWgtnoLG1BXruRRhEVJo5ACP8414XUG0Ric6JbyND";break;case"gaming":t="play"===this.currentRequestTargetScope?.pageType?e:n.includes(this.currentRequestTargetScope?.pageType)?"1hYoJsIRvPEnSkk0hlnJF2092mHqiz7xFenIFKa9uc":"Uj7u7bqBgMhDGBUVPSbcHUe0pU7X8TbVRviCO2fojo";break;case"travel":t="8RwD77wJgNQmmVBdGmZsK6vvPCrG58iRCQRoPsE4JJ";break;case"health":t="FywQv6H345wNCU4yKWraF2esI9qiMQFx90v53mMHrm";break;default:t=e}return t}getUserMuid(){let e;const t=(0,v.jG)();return(0,x.Z)(t)&&(e="m-"+t),e}getConfigServiceBaseUrl(e=!0,t=null){const n=function(e,t,n=!1){switch(t){case C.prod:case C.prodssr:case C.staging:return e;default:return n?location.origin||null:(0,f.Dp)()||null}}(this.crsDomain||(this.isChinaCompliance?s.NH:s.pN),this.environment),i=this.isGitConfigs?`${this.crsPath}${this.crsVersion||s.PQ}/config/`:`${this.crsPath}${e?"v2/":""}configindex/`,r=(0,f.Dp)();if(this.crsRetryBaseUrl=r?r+i:null,t)return t+i;if((0,g.N)()&&(this.renderWidgets()||"sharedWidgets"===this.appType||"bingHomepage"===this.appType||"distribution"===this.appType||"gaming"===this.appType||("sports"===this.appType||"finance"===this.appType||"weather"===this.appType)&&this.widgetAttributes)){const e=(this.crsDomain||"https://www.msn."+(this.IsChinaCompliance?"cn":"com"))+i;return this.crsRetryBaseUrl=e,n?`${n}`+i:e}return n||(0,f.Dp)()?(n||(0,f.Dp)())+i:null}useMultiConfigsRetrieval(){const e=(0,f.zp)();if(e){const t=A.cX.getQueryParameterByName("isMultiConfigRetrievalEnabled",e);if(t)return"true"===t.toLocaleLowerCase()}return!this.featureFlags||!this.featureFlags.isMultiConfigRetrievalEnabled||"true"===this.featureFlags.isMultiConfigRetrievalEnabled}useGitConfigs(){const e=(0,f.zp)();if(e){const t=A.cX.getQueryParameterByName("isGitConfig",e);if(t)return"true"===t.toLocaleLowerCase()}return(0,P.LB)(this.crsVersion,this.configIndexDocId,this.appType)}renderWidgets(){const e=(0,f.zp)();if(e){const t=A.cX.getQueryParameterByName("renderWidget",e);if(t)return"true"===t.toLocaleLowerCase()}return!1}getAuthCookieName(){if(this.authCookieName)return this.authCookieName;let e;switch((M.Al&&M.Al.ClientSettings).apptype||""){case"windows":e="windowshp"===M.Al.ClientSettings.pagetype?"anon":"app_anon";break;case"bingHomepage":case"community":case"contentTools":case"finance":case"gaming":case"health":case"homePage":case"hub":case"personalize":case"sharedWidgets":case"shopping":case"sports":case"traffic":case"travel":case"ugc":case"views":case"weather":default:e="anon";break;case"edgeChromium":case"edgeMobile":case"distribution":case"windowsNewsPlus":case"winWidgets":case"webWidgets":case"windowsShell":case"windowsShellV2":case"office":case"channelmobile":case"superApp":e="app_anon"}return e}setAccountInfoPromise(){this.ResolvedAccountInfo=null,this.AccountInfoPromise=new Promise((e=>{if(!((0,g.N)()&&window.chrome&&window.chrome.authPrivate&&window.chrome.authPrivate.getPrimaryAccountInfo))return e(null);const t=Math.round(performance.now());window.chrome.authPrivate.getPrimaryAccountInfo((n=>{const i=Math.round(performance.now());return(0,d.Ou)()["Auth.GetPrimaryAccountInfo"]=i-t,this.ResolvedAccountInfo=n,e(n)}))})),this.AccountInfoPromise}tryReformatGuid(e){if(e&&32===e.length){const t=e.match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/i);t&&(e=t.slice(1).join("-"))}return e}setTargetScope(){if(!M.Al||!M.Al.ClientSettings)return;const e=function(e,t){let n;const i=decodeURIComponent((0,w.F)(e,"aace")),{child:r}=i&&(0,b.d)(i)||{},o=(0,w.F)(e,S.nM);return n=i&&(1===r||o)?"kids":t.modes?.audienceMode||t.audienceMode||"adult",n}((0,f.G8)(),M.Al.ClientSettings),{browser:t,deviceFormFactor:n,domain:i,ocid:r,os:o,modes:a,pagetype:s}=M.Al.ClientSettings,c=M.Al.CurrentFlights.split(",");if(this.currentRequestTargetScope={audienceMode:e,browser:t,deviceFormFactor:n,domain:i,locale:{content:this.LocaleContentMarket,display:this.LocaleDisplayLanguage},ocid:r,os:o,modes:a,platform:"web",pageType:s,pageExperiments:c},!this.currentRequestTargetScope.locale&&I.b.stringHasData(this.LocaleContentMarketString)){const e=this.LocaleContentMarketString.split("-");e.length>1&&(this.currentRequestTargetScope.locale={language:e[0],market:e[e.length-1],content:{language:e[0],market:e[e.length-1]},display:{language:e[0],market:e[e.length-1]}})}}setNavTargetHostName(){let{subDomain:e,domainName:t,topLevelDomain:n}={subDomain:i.WWW,domainName:r.MSN,topLevelDomain:o.COM};const a="homePage"!==this.appType&&M.Al&&M.Al.CurrentFlightSet&&M.Al.CurrentFlightSet.has("1s-viewurldomain");switch(this.environment){case p.q.prod:case p.q.staging:e=a?i.MicrosoftStart:i.WWW;break;case p.q.int1:e=a?i.MicrosoftStartINT1:i.INT1;break;case p.q.int:case p.q.intpr:case p.q.intperf:e=a?i.MicrosoftStartINT:i.INT}this.isChinaCompliance&&(n=o.CN),this.navTargetHost=`${e}.${t}.${n}`}getRunTimePropertyBag(e,t){const n={appType:this.appType};t&&(n.pcsVersion=t.v,n.pcsEnv=t.env);const{alias:i,v:r}=e||{};this.buildVersion=r||"",n.build=this.buildVersion,i&&(n.buildAlias=i),this.isDebug&&(n.isDebugPage=!0);const o=M.Al.CurrentFlights;return o&&(n.shouldDelayUntilLoadTime="edgeChromium"===this.appType&&M.Al.IsPrerender,n.shouldSampleErrorsForTreatement1=o.includes("apperror1")||o.includes("errorsamplingb")),n}getStaticUrls(e){return{com:`${this.assetsGlobalUrl}/staticsb/statics/${e}`,cn:`${this.assetsCNUrl}/staticsb/statics/${e}`}}}const O=D.getInstance;let _=(0,y.h)(D)},47655:function(e,t,n){n.d(t,{Qe:function(){return c},_Y:function(){return d}});var i=n(68052),r=n(21298),o=n(21215),a=n(5884),s=n(91042);function c(){return(0,o.N)()?(window._clientSettings=window._clientSettings||(0,i.d)(document.head.dataset.clientSettings||document.getElementsByClassName(s.fw)[0]?.getAttribute(a.nr)),window._clientSettings):null}function d(e){if(!(0,o.N)()||!e)return;window._clientSettings=e;const t=(0,r.Vm)(e);t&&document.head.setAttribute(a.nr,t)}},3637:function(e,t,n){n.d(t,{q:function(){return r}});var i=n(13218);const r=()=>{const e=i.Al&&i.Al.ClientSettings||{},{geo_citycf:t,geo_countrycf:n}=e;return e&&{citycf:t,countrycf:n}}},99234:function(e,t,n){var i;n.d(t,{Ak:function(){return a},I4:function(){return r},d3:function(){return o},iN:function(){return i},oD:function(){return s}}),function(e){e.GLOBAL="GLOBAL",e.GCC_MODERATE="GCC_MODERATE"}(i||(i={}));const r="d7b530a4-7680-4c23-a8bf-c52c121d2e87",o="https://enterprisenews.microsoft.com",a="EnterpriseOneService",s=87},79493:function(e,t,n){var i;function r(e){switch(e){case i.prod:case i.staging:return i.prod;case i.int1:return i.int1;case i.int:case i.intpr:case i.intperf:return i.int;default:return null}}n.d(t,{q:function(){return i},s:function(){return r}}),function(e){e.prod="prod",e.staging="staging",e.int1="int1",e.int="int",e.intpr="intPR",e.intperf="intPerf"}(i||(i={}))},13218:function(e,t,n){n.d(t,{nP:function(){return P},Al:function(){return A}});var i=n(22011),r=n(38300),o=n(52185),a=n(81489),s=n(22680),c=n(21215),d=n(5884),u=n(97634),l=n(28951),p=n(15598),h=n(97906),g=n(68052),f=n(33779),m=n(5302),y=n(42122),v=n(53525);function S(e){return"shd_"+e}var w=n(99234),b=n(91042),C=n(44132);const T="__HeadDataInstance__";class k{get Locale(){return this.locale}get MarketDir(){return this.marketDir}set MarketDir(e){this.marketDir=e}get CurrentFlights(){return this.currentFlights||""}set CurrentFlights(e){this.currentFlights=e,this.currentFlightSet=new Set((e||"").split(",")),this.currentFlightSet?.has(i.$e)||this.setSweeperStoredHeadData(r.il.FlightIdKey,this.currentFlights)}get AppFlights(){return this.appFlights}get CurrentFlightSet(){return this.currentFlightSet}get ClientSettings(){return this.clientSettings}set ClientSettings(e){this.clientSettings=e}get Diagnostics(){return this.diagnostics}set Diagnostics(e){this.diagnostics=e}get EnableCMSPPEConfigs(){return this.enableCMSPPEConfigs}get EdgeNTPHeader(){return this.edgeNTPHeader}set EdgeNTPHeader(e){this.edgeNTPHeader=e}get UserIsSignedIn(){return this.userIsSignedIn}get IsPreload(){return this.isPreload}set IsPreload(e){this.isPreload=e}get IsPrerender(){return this.isPrerender}set IsPrerender(e){this.isPrerender=e}get IsBlendedEnterprise(){return this.isBlendedEnterprise}set IsBlendedEnterprise(e){this.isBlendedEnterprise=e}get IsServiceWorkerCache(){return this.isServiceWorkerCache}get LastKnownAppVersion(){return this.lastKnownAppVersion}get AnonCookieName(){return this.anonCookieName}set AnonCookieName(e){this.anonCookieName=e}get SsoComplete(){return this.ssoComplete}get AadState(){return this.aadState}set AadState(e){this.aadState=e}set LocaleName(e){this.locale=e}get SelectedFeedPivot(){return this.selectedFeedPivot}set SelectedFeedPivot(e){this.selectedFeedPivot=e}get LastSelectedPivot(){return this.lastSelectedPivot}set LastSelectedPivot(e){this.lastSelectedPivot=e}get SwitchedPivot(){return this.switchedPivot}set SwitchedPivot(e){this.switchedPivot=e}get AdsNumberLines(){return this.adsNumberLines||""}set AdsNumberLines(e){this.adsNumberLines=e}constructor(e){this.currentFlightSet=new Set,this.enableCMSPPEConfigs=!1,this.initializeHeadData(e)}static getInstance(){return o.Gq.get(T,(()=>new k))}static resetInstance(e){const t=new k(e);return o.Gq.set(T,t),A=(0,a.h)(k),A}initializeHeadData(e){if(e)return void this.initializeFromData(e);if(this.newRidNeeded=void 0,this.lastUsedActivityIdBacking=void 0,this.locationSearch=(0,s.zp)(),this.htmlElement=(0,c.N)()?(0,s.SV)(d.x$.html)[0]:null,this.headElement=(0,c.N)()?(0,s.SV)(d.x$.head)[0]:null,this.applicationCache=(0,c.N)()?window.applicationCache:null,this.selectedFeedPivot="",this.widgetSettingsElement=(0,c.N)()?(0,s.ZI)(b.fw)[0]:null,!this.htmlElement||!this.headElement)return;this.initializeFromDom(),window&&window.navigator&&window.navigator.serviceWorker&&window.navigator.serviceWorker.controller&&(this.isServiceWorkerCache=!0),(this.isServiceWorkerCache||window.__useCachedApp)&&(this.initializeFromStorage(),this.initializeLastUsedActivityId());const t=(0,u.He)(this.clientSettings&&this.clientSettings.locale),n=this.clientSettings&&t&&t.language&&t.market;this.locale=n?(0,u.py)(t):"";const i=this.htmlElement.getAttribute(d.cp);this.marketDir=i&&i.toLocaleLowerCase()||"",this.setQueryItemProvidedValues();const r=(this.widgetSettingsElement||this.headElement).getAttribute(d.js);if(r){const e=(0,g.d)(r);this.anonCookieName=e.anonckname,this.userIsSignedIn=1===e.signedin}l.cX.getQueryParameterByName("backgroundpreload",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPreload=!0,this.logDocumentVisibility()),l.cX.getQueryParameterByName("prerender",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPrerender=!0,this.logDocumentVisibility()),(0,c.N)()&&window.ShellFeedsApp&&window.ShellFeedsApp.shellFeedsExperienceInfo&&!window.ShellFeedsApp.shellFeedsExperienceInfo.isWebviewVisible&&0===window.ShellFeedsApp.shellFeedsExperienceInfo.buttonInteraction&&(this.isPreload=!0),this.setIsBlendedEnterprise(),this.maybeUpdateNewTabPageLinkIcon()}get lastUsedActivityId(){if(this.lastUsedActivityIdBacking)return this.lastUsedActivityIdBacking;const e=this.getStoredActivityIdKey(),t=(0,p.$o)().getItem(e);return t&&(this.lastUsedActivityIdBacking=(0,g.d)(t)),this.lastUsedActivityIdBacking}set lastUsedActivityId(e){const t=this.getStoredActivityIdKey();if(e){if(e.id&&e.ts){try{(0,p.$o)().setItem(t,JSON.stringify(e),!1)}catch(e){const t=e&&e.message;(0,C.dK)().then((()=>{(0,f.H)(m.dw4,t)}))}this.lastUsedActivityIdBacking=e}}else(0,p.$o)().removeItem(t)}get storedHeadData(){return function(e){const t=S(e),n=(0,p.$o)().getItem(t);return n?(0,g.d)(n):null}(this.clientSettings.pagetype)}set storedHeadData(e){!function(e,t){const n=S(e);t?(0,p.$o)().setItem(n,JSON.stringify(t)):(0,p.$o)().removeItem(n)}(this.clientSettings.pagetype,e)}initializeFromData(e){this.clientSettings=e.clientSettings,this.edgeNTPHeader=e.edgeNTPHeader,this.selectedFeedPivot=e.edgeNTPHeader?.selectedFeedPivot,this.setFlights(e.clientInfo),this.appFlights=(0,u.vF)(e.canvasInfo),this.setQueryItemProvidedValues();const t=(0,u.He)(this.clientSettings&&this.clientSettings?.locale),n=this.clientSettings&&t&&t.language&&t.market;this.locale=n?(0,u.py)(t):"",this.marketDir=e.marketDir&&e.marketDir.toLocaleLowerCase()||"",this.setIsBlendedEnterprise()}initializeFromDom(){const e=this.widgetSettingsElement||this.headElement;this.setFlights(e.getAttribute(d.um)),this.appFlights=(0,u.vF)(e.getAttribute(d.go)),this.setAdsNumberLines(e.getAttribute(d.Nf));const t=e.getAttribute(d.nr);if(!t)return;if(this.clientSettings=(0,g.d)(t),!this.clientSettings)return;const n=e.getAttribute(d.IX);this.diagnostics=(0,g.d)(n),this.calculateForwardableParams();const{pagetype:i}=this.clientSettings;if(!i){const t=e.getAttribute(d.AU);this.clientSettings.pagetype=null==t?void 0:t}if(i)try{const e=(0,p.$o)().getObject(d.It.pageVersions)||{};this.lastKnownAppVersion=e[i];const{bundleInfo:t}=this.clientSettings;t&&this.lastKnownAppVersion!==t.v&&(e[i]=t.v,(0,p.$o)().setObject(d.It.pageVersions,e))}catch{y.k.log(`${this.logPrefix()} couldn't complete local storage related operation.`)}}initializeFromStorage(){const e=this.storedHeadData;e&&this.populateFromApiResponse(e)}populateFromApiResponse(e){if(!e)return;const t=e.clientSettings,n=e.info;if(this.appFlights=(0,u.vF)(e.canvasInfo),!t||!n)return;if(this.clientSettings.pageGenTime>=t.pageGenTime)return void(this.storedHeadData=null);const i=this.clientSettings.queryparams,r=this.clientSettings&&this.clientSettings.bundleInfo&&this.clientSettings.bundleInfo.v;this.clientSettings=t,this.clientSettings.bundleInfo=Object.assign(this.clientSettings.bundleInfo||{},{v:r}),this.clientSettings.queryparams=i,this.calculateForwardableParams(),this.setFlights(n)}calculateForwardableParams(){const e=this.clientSettings?this.clientSettings.queryparams:"";if(!e)return;const t=e.toLocaleLowerCase(),n=["fdhead","item"].map((e=>{const n=l.cX.getQueryParameterByName(e,t);return n?`${e}=${encodeURIComponent(n)}`:null})).filter((e=>e));this.clientSettings.forwardablequeryparams=n.join("&")}initializeLastUsedActivityId(){const e=this.lastUsedActivityId,t=this.clientSettings.aid,n=(0,v.Z)(this.clientSettings.pageGenTime).getTime();this.newRidNeeded=!(!e||!n||e.id!==t);const i="edgeChromium"!==this.clientSettings.apptype||window.ssrExtensionLoaded;n&&(!e||n>e.ts)&&i&&(this.lastUsedActivityId={id:t,ts:n})}setFlights(e){this.CurrentFlights=((/f:\s*([^;]+)/i.exec(e)||{})[1]||"").toLowerCase(),this.currentFlightSet=new Set(this.currentFlights.split(","))}setSweeperStoredHeadData(e,t){if(!e)return;const n=S("sweeper"),i=h.y7.getObject(n)||{};t?i[e]=t:delete i[e],h.y7.setObject(n,i)}setIsBlendedEnterprise(){this.IsBlendedEnterprise=this.clientSettings&&"enterprise"===this.clientSettings.audienceMode&&this.clientSettings.browser&&"edgeChromium"===this.clientSettings.browser.browserType&&parseInt(this.clientSettings.browser.version)>=w.oD}setQueryItemProvidedValues(){const e=l.cX.getParamsWithItems((0,s.zp)(),!0),t=e.find((e=>"cms"===e.key));this.enableCMSPPEConfigs=t&&"ppe"===t.value,this.setCurrentFlightsTestOverride(e)}setCurrentFlightsTestOverride(e){if((0,s.Td)().toLowerCase().includes("localhost")&&e){const t=e.find((e=>"flights"===e.key));t&&(this.currentFlights=t.value,this.currentFlightSet=new Set(this.currentFlights.split(",")))}}setAdsNumberLines(e){this.AdsNumberLines=(/^f:\s*([^;]+)/i.exec(e)||{})[1]||""}getStoredActivityIdKey(){return"sai_"+this.clientSettings.pagetype}logPrefix(){return"HeadData:"+((0,c.N)()?"":` [Head:${this.widgetSettingsElement||this.headElement}] and [Html:${this.htmlElement}]`)}logDocumentVisibility(){(0,c.N)()&&((0,m.GQ)({isVisible:"visible"===document.visibilityState}),document.addEventListener("visibilitychange",(()=>{(0,m.GQ)({isVisible:"visible"===document.visibilityState})})))}maybeUpdateNewTabPageLinkIcon(){if(!this.CurrentFlightSet?.has("prg-newntpicon")||"edgeChromium"!==this.clientSettings?.apptype)return;const e="localhost.msn.com"===(0,s.Td)()?"https://assets.msn.com/statics/icons/ntp-favicon.png":"https://assets.msn.com/statics/icons/favicon_newtabpage.png",t=Array.from(document?.head?.getElementsByTagName("link")||[]).find((t=>t.href===e));t&&(t.href="https://assets.msn.com/staticsb/statics/pr-5433783/edge-favicon/edge_ntp_favicon.png")}}const P=k.getInstance;let A=(0,a.h)(k)},96315:function(e,t,n){var i;n.d(t,{EB:function(){return c},IY:function(){return i},Lk:function(){return r},Nq:function(){return d},O5:function(){return u},SY:function(){return s},UW:function(){return l},X7:function(){return o},Xk:function(){return a},pV:function(){return p}}),function(e){e.BR="pt-br",e.DEDE="de-de",e.ENAU="en-au",e.ENCA="en-ca",e.ENGB="en-gb",e.ENIN="en-in",e.ENUS="en-us",e.ENIE="en-ie",e.ESES="es-es",e.ESMX="es-mx",e.FRCA="fr-ca",e.FRFR="fr-fr",e.ITIT="it-it",e.IN="en-in",e.HUHU="hu-hu",e.KOKR="ko-kr",e.JAJP="ja-jp",e.PLPL="pl-pl",e.PTBR="pt-br",e.RURU="ru-ru",e.RUXL="ru-xl",e.ZHCN="zh-cn"}(i||(i={}));const r="de-de",o="en-us",a="en-in",s="en-xl",c="es-mx",d="ja-jp",u="ko-kr",l="pt-br",p="zh-cn"},76461:function(e,t,n){n.d(t,{AI:function(){return C},Ru:function(){return w},bX:function(){return S}});var i=n(19625),r=n(20782),o=n(92784);const a="ntp.user_nurturing",s="user_muid",c=6,d=0,u=new Date("2010-01-01Z"),l=192,p=16383,h=240,g=192,f=63,m="MUID";let y=!1,v=[];function S(){const e=u,t=new Date;let n=-1;return(t.getDay()!=e.getDay()||t.getMonth()!=e.getMonth()||t.getFullYear()!=e.getFullYear())&&(n=Math.floor(Math.abs(t.getTime()-e.getTime())/864e5),n>p)?0:n}function w(e){let t=!0;if(32!=e?.length)return{isMuidValid:!1};const n=new Uint8Array(function(e){const t=[],n=[6,4,2,0,10,8,14,12,16,18,20,22,24,26,28,30];for(const i of n){const n=e.slice(i,i+2);t.push(parseInt(n,16))}return new Uint8Array(t)}(e));if(n.forEach((e=>{isNaN(e)&&(t=!1)})),!t)return{isMuidValid:!1};if(function(e){[e[0],e[3]]=[e[3],e[0]],[e[1],e[2]]=[e[2],e[1]],[e[4],e[5]]=[e[5],e[4]],[e[6],e[7]]=[e[7],e[6]]}(n),0!=(n[0]&l))return{isMuidValid:!1};if((n[6]&h)!=c<<4)return{isMuidValid:!1};if((n[8]&g)!=d<<6)return{isMuidValid:!1};const i=new Uint8Array(n);!function(e){!function(e){const t=e.length>>1;for(let n=0;n<t;n++)e[n+t]^=e[n]}(e)}(i);const r=function(e){const t=new Uint8Array([0]);for(let n=0;n<e.length-1;n++)t[0]+=e[n];return t[0]}(i);if(r!=i[15])return{isMuidValid:!1};let o=0;o|=(i[10]&f)<<8,o|=i[11];S();return o>S()+1?{isMuidValid:!1}:{dateCreated:o,isMuidValid:t}}function b(e,t){const n=new Date;n.setTime(n.getTime()+31536e6);return`MUID=${e};expires=${n.toUTCString()};domain=${t};path=/;SameSite=${r.f.None};Secure;priority=${o.G.High};`}async function C(e="",t=k,n=T,r=m){const o=Date.now();window.muidActionRecord={isMuidReverted:!1,muidRevertedFrom:"",signInPerfCost:0,perfCost:0,isRefreshMuidError:!1};try{if("psl"===e&&await Promise.race([new Promise((e=>{window?.chrome?.authPrivate?.getPrimaryAccountInfo?window.chrome.authPrivate.getPrimaryAccountInfo((t=>{e(!t||""===t.account_id)})):e(!0)})),new Promise((e=>{setTimeout((()=>{e(!0)}),50)}))]))return;window.muidActionRecord.signInPerfCost=Date.now()-o;const a=(0,i.jG)()||"",s=await t(r,(e=>e&&w(e)?.isMuidValid),e);s!==a&&function(e,t,n,i){if(e){const r=window.location.hostname.toLowerCase().endsWith(".cn")?".msn.cn":".msn.com",{isMuidValid:o,dateCreated:a}=w(e),{isMuidValid:s,dateCreated:c}=w(t);if(!o&&s)return void n(i,t);if(o&&!s)return window.document.cookie=b(e,r),window.muidActionRecord.isMuidReverted=!0,void(window.muidActionRecord.muidRevertedFrom=t);if(void 0!==a&&void 0!==c)a<=c?(window.document.cookie=b(e,r),window.muidActionRecord.isMuidReverted=!0,window.muidActionRecord.muidRevertedFrom=t):n(i,t)}else n(i,t)}(s,a,n,r),window.muidActionRecord.perfCost=Date.now()-o}catch(e){window.muidActionRecord.isRefreshMuidError=!0}}const T=(e,t)=>{window.localStorage.setItem(e,t),y&&function(e,t,n){const i=e.findIndex((e=>e?.key===t));if(i>-1)e[i]={...e[i],value:n};else{const i={key:t,value:n};e.push(i)}window.chrome.ntpSettingsPrivate.setPref(a,e)}(v,s,t)},k=async(e,t,n)=>{y=!!window.chrome?.ntpSettingsPrivate?.getPref&&"psl"===n;let i=window.localStorage.getItem(e)||"";if(!i&&y){v=await function(e){return new Promise(((t,n)=>{window.chrome.ntpSettingsPrivate.getPref(e,(function(e){e&&e.value?t(e.value):t([])}))}))}(a);const e=(v||[]).find((e=>e.key===s));i=e?.value||""}return i}},28123:function(e,t,n){n.d(t,{P8:function(){return P},Pz:function(){return F},TJ:function(){return R},Yc:function(){return M},aS:function(){return D},hk:function(){return E},iG:function(){return I},kD:function(){return $},lT:function(){return A},me:function(){return O},qn:function(){return T},rN:function(){return L},t9:function(){return b},tx:function(){return _},yd:function(){return U}});var i=n(91042),r=n(97205),o=n(47655),a=n(5884),s=n(78018),c=n(85856),d=n(21215),u=n(22680),l=n(76524),p=n(32425),h=n(16715),g=n(32236);const f=(0,o.Qe)()||{};let m=null;const y={winWidgets:1,webWidgets:1,windowsShell:1,windowsShellV2:1,distribution:1,superApp:1,channelmobile:1,edgeMobile:1},v={edgeChromium:1},S={winWidgets:1,webWidgets:1},w={edgeChromium:1,shopping:1,winWidgets:1,webWidgets:1,windowsShell:1,windowsShellV2:1,msn:1},b={edgeChromium:1,channelmobile:1,cgHomePage:1,distribution:1,winWidgets:1,webWidgets:1,windowsShell:1,windowsShellV2:1,superApp:1,edgeMobile:1},C=(0,g.p)((()=>f&&f.apptype)),T=(0,g.p)((()=>(0,d.N)()&&C()in S)),k=(0,g.p)((()=>(0,d.N)()&&!(0,h.pE)()&&!(C()in y)&&!R()&&!x())),P=(0,g.p)((()=>k()&&!(C()in v))),A=((0,g.p)((()=>k()&&(!(C()in v)||!(0,c.mb)()))),(0,g.p)((()=>k()&&!N()&&!B())));function I(){return!!(0,p.AE)(a.Li)}const E=(0,g.p)((()=>B()||N())),R=(0,g.p)((()=>!(C()in w)&&$()&&function(){if("homePage"==C())return!0;const e=new URLSearchParams((0,u.zp)()).get("ocid")||f?.ocid,t=e?.toLowerCase();if(a.Oj.has(t))return!0;return!a.up.has(t)}()&&!function(){const e="homePage"==C()&&"hp"==(f&&f.pagetype)&&(0,u.l4)().includes(`${r.lU}`);return e}()));function M(e){return!e&&(null===m&&(m=!function(){if(!(0,d.N)())return!1;const e=(0,u.l4)();return["vptest=1","reqsrc=vp","vpFreeze=1"].some((t=>e?.includes(t)))}()),m)}const x=()=>(0,d.N)()&&document&&document.body&&document.body.getElementsByClassName(i.Di).length>0,L=()=>x()&&"bingHomepage"===C(),F=(0,g.p)((()=>C()in b||R()));function D(){const e=(0,s.nh)();if(e)return e;const t=(0,s.Wl)();return t||void 0}function O(e){const t={};return e&&(t[a.Yu.authorization]=`Bearer ${e}`),t}function _(e){const t={};return e&&(t[a.Yu.entAuthorization]=e),t}function N(){return P()&&(0,l.YU)()||function(){const e=P()&&!H()&&!(0,l.YU)()&&(0,c.x6)()&&("expired"==(0,s.wX)()||(0,l.hU)());return e}()||(0,l.SY)()||(0,l.jG)()}function B(){return P()&&!(0,c.x6)()&&(0,l.KK)()}function U(){(0,c.$v)(),P.cache.clear()}const $=(0,g.p)((()=>{const{browser:e}=f,{browserType:t="",detected:n={}}=e||{},{browserType:i=""}=n||{};return/edgeChromium/i.test(t)||/edgeAndroid/i.test(t)||/edgeiOS/i.test(t)||/edge/i.test(i)}));(0,g.p)((()=>P()&&!R()));const H=()=>{const e=(0,c.x6)();if(!e)return!1;let t;switch(e.account_type){case"MSA":t=P()?a.Li:a.m$;break;case"AAD":t=P()?a.yz:a.og;break;default:return!1}return!!(0,p.AE)(t)}},78018:function(e,t,n){n.d(t,{Wl:function(){return c},nh:function(){return p},tx:function(){return l},wX:function(){return d}});var i=n(15598);const r="1s-tokens";var o;let a,s;function c(){return a=u(),a&&a.accessToken?a:void 0}function d(){if(a=u(),!a)return"notAvailable";const e=a.expiresOn,t=new Date(e),n="expired";if(!t.getTime())return n;return t>new Date?"valid":n}function u(){return a=a||void 0===a&&(0,i.$o)().getObject(r)||null,a}function l(e){a=void 0,s=e;const{accessToken:t,expiresOn:n}=e||{};t&&n?(0,i.$o)().setObject(r,{accessToken:t,expiresOn:n}):(0,i.$o)().removeItem(r)}function p(){return s}!function(e){e.NotAvailable="notAvailable",e.Expired="expired",e.Valid="valid"}(o||(o={}))},85856:function(e,t,n){n.d(t,{$v:function(){return u},ac:function(){return s},mb:function(){return d},sM:function(){return a},x6:function(){return c}});var i=n(32425),r=n(32236),o=n(68052);const a="currentaccount",s=365,c=(0,r.p)((()=>{const e=(0,i.AE)(a,!0),t=e&&(0,o.d)(e),{login_hint:n}=t||{};return n&&t})),d=(0,r.p)((()=>!!(0,i.AE)(a)));function u(){d.cache.clear(),c.cache.clear()}},48593:function(e,t,n){n.d(t,{KO:function(){return l},XS:function(){return u},g8:function(){return d}});var i=n(32425),r=n(68052);const o=()=>{const e=(()=>{const e=(0,i.AE)("els",!0),t=e&&(0,r.d)(e);return t&&Object.prototype.hasOwnProperty.call(t,"account_type")&&t})();if(e){if("MSA"===e.account_type)return"MSA";if("AAD"===e.account_type)return"AAD"}};var a=n(25769),s=n(32236),c=n(5884);const d="lt",u=(0,s.p)((()=>{let e,t;return(0,a.vs)()?(e=2,t=(0,a.Yn)()):(0,i.AE)("els")?(t=o(),e=t?2:1):(0,i.AE)(d)||(0,i.AE)("aace")?(t="MSA",e=2):(0,i.AE)(c.og)?(t="AAD",e=2):e=1,{isSignedIn:e,accountType:t}}));function l(){u.cache.clear()}},25769:function(e,t,n){n.d(t,{E1:function(){return c},Rn:function(){return a},Yn:function(){return s},co:function(){return o},vs:function(){return u},yL:function(){return d}});var i=n(32425),r=n(68052);const o="elt",a=()=>{const e=(0,i.AE)(o,!0),t=e&&(0,r.d)(e),{access_token:n,account_type:a,login_hint:s,region_scope:c}=t||{};return(n||a||s||c)&&t},s=()=>{const e=a();if(e){if("MSA"===e.account_type)return"MSA";if("AAD"===e.account_type)return"AAD"}},c=()=>{const e=a();return e&&e.login_hint},d=()=>{const e=a();return e&&e.region_scope},u=()=>!!(0,i.AE)(o)},61494:function(e,t,n){n.d(t,{Nv:function(){return s}});var i=n(52185),r=n(21215);const o="__PageExperimentInstance__";function a(e){i.Gq.set(o,e)}function s(e){if(!i.Gq.has(o)&&(0,r.N)()){a(c(document.head.dataset.info||window.document.getElementsByClassName("peregrine-widget-settings")[0]?.dataset?.info||""))}const t=i.Gq.get(o);return t&&t.has(e)}function c(e){const t=(e||"").replace(/(^f:|;.*$)/g,"").split(",");return new Set(t)}},46124:function(e,t,n){n.d(t,{A:function(){return a},m:function(){return o}});class i{static#e=this._instance=new i;constructor(){this._signInState=0,this.initOverrides=()=>{}}getSignInState(){return this._signInState}setSignInState(e){this._signInState=e}useEnterpriseCompliance(){return!1}}let r=i._instance;function o(e){if(r!==i._instance||!e)return r;e()}function a(e){r=e}},45949:function(e,t,n){n.d(t,{E:function(){return a},M:function(){return i}});var i,r=n(28123),o=n(32236);!function(e){e.App="app",e.EdgeId="edgeid",e.Web="web"}(i||(i={}));const a=(0,o.p)((()=>(0,r.rN)()||(0,r.P8)()?i.Web:(0,r.TJ)()?i.EdgeId:i.App))},20076:function(e,t,n){n.d(t,{EX:function(){return h},YY:function(){return p},u6:function(){return u}});var i=n(5884),r=n(98130),o=n(58009),a=n(32425),s=n(32236),c=n(68052),d=n(19625);function u(e){const t=e||(0,o.g8)()||"al_app_anon",n=l();return!!(n&&(["anon","al_anon"].includes(t)&&n.AL_ANON||["app_anon","al_app_anon"].includes(t)&&n.AL_APP_ANON))}const l=(0,s.p)((()=>{const e=(0,a.AE)(i.tX,!0);return(0,c.d)(e)}));function p(){(0,d.sq)(i.tX,"",-1,r.jG.HostPage.topDomain,"/"),h()}function h(){l.cache.clear()}},76524:function(e,t,n){n.d(t,{C8:function(){return m},KK:function(){return C},SY:function(){return g},YU:function(){return p},bf:function(){return f},bq:function(){return v},dy:function(){return h},hU:function(){return y},hq:function(){return w},jG:function(){return S},m5:function(){return b}});var i=n(28525),r=n(21215),o=n(61494),a=n(32236);const s="uxlogin",c="uxlogout",d="uxedit",u="useRedirect",l="uxswitch",p=(0,a.p)((()=>{const e=(0,i.U)();return e&&"1"===e.getItem(s)||(0,r.N)()&&location.search&&location.search.includes(`${s}=1`)}));function h(){const e=(0,i.U)();e&&p()&&(e.removeItem(s),p.cache.clear())}const g=(0,a.p)((()=>{const e=(0,i.N)();return e&&!!e.getItem(c)}));function f(){const e=(0,i.N)();e&&g()&&(e.removeItem(c),g.cache.clear())}function m(){const e=(0,i.N)();e&&e.setItem(c,"1"),g.cache.clear()}const y=(0,a.p)((()=>{const e=(0,i.U)();return e&&"1"===e.getItem(d)}));function v(){const e=(0,i.U)();e&&y()&&(e.removeItem(d),y.cache.clear())}const S=(0,a.p)((()=>{const e=(0,i.U)();return!(0,o.Nv)("prg-noredirect")&&e&&"1"===e.getItem(u)&&function(){const{browser:e}=window._clientSettings||{},{browserType:t=""}=e||{};return!!/safari/i.test(t)}()}));function w(){const e=(0,i.U)();e&&"1"===e.getItem(u)&&(e.removeItem(u),S.cache.clear())}function b(){const e=(0,i.U)();e&&e.setItem(u,"1"),S.cache.clear()}const C=(0,a.p)((()=>{const e=(0,i.U)();return e&&"1"===e.getItem(l)}))},33294:function(e,t,n){n.d(t,{DA:function(){return f},GW:function(){return d},In:function(){return g},bN:function(){return c},dJ:function(){return h},pB:function(){return p},y1:function(){return l}});var i=n(33779),r=n(5302),o=n(15598);const a="digital-id-cache";let s;const c={getItem:e=>(0,o.$o)().getItem(e),setItem:(e,t)=>{(0,o.$o)().setItem(e,t)},removeItem:e=>{(0,o.$o)().removeItem(e)}},d=e=>({getItem:async t=>await e.getItem(t),setItem:async(t,n)=>await e.setItem(t,n),removeItem:e.removeItem?async t=>await e.removeItem(t):void 0}),u=new Map,l=d({getItem:async e=>Promise.resolve(u.get(e)||null),setItem:async(e,t)=>(u.set(e,t),Promise.resolve()),removeItem:async e=>(u.delete(e),Promise.resolve())});function p(e=c){const t=y(e);return t&&Object.keys(t).length>0&&t.at?t:void 0}async function h(e=l){const t=await v(e);return t&&Object.keys(t).length>0&&t.at?t:void 0}function g(e,t=c){try{const n=m(e,y(t));t.setItem(a,JSON.stringify(n)),s=void 0}catch(e){(0,i.H)(r.Lwi,"Error updating digital ID cache",e.message)}}async function f(e,t=l){try{const n=m(e,await v(t));await t.setItem(a,JSON.stringify(n)),s=void 0}catch(e){(0,i.H)(r.Lwi,"Error updating async digital ID cache",e.message)}}function m(e,t){const n={...t,...e,lastUpdated:(new Date).toISOString()};return{NA:["anid","wid"],MSA:["wid"],AAD:["anid"]}[e.at]?.forEach((e=>delete n[e])),n}function y(e=c){if(void 0!==s)return s;try{const t=e.getItem(a);s=t?JSON.parse(t):null}catch(e){(0,i.H)(r.pdr,"Error reading digital ID cache",e.message),s=null}return s}async function v(e=l){if(void 0!==s)return s;try{const t=await e.getItem(a);s=t?JSON.parse(t):null}catch(e){(0,i.H)(r.pdr,"Error reading async digital ID cache",e.message),s=null}return s}},90830:function(e,t,n){n.d(t,{eS:function(){return p},m7:function(){return l},t:function(){return h}});var i=n(33779),r=n(5302),o=n(52185),a=n(81489),s=n(45970),c=n(28123);const d=Symbol("__DigitalIdSubscription__"),u=Symbol("__DigitalIdSubscriptionEvents__"),l=o.Gq.get(u,(()=>({DigitalIdUpdate:"DigitalIdUpdate"}))),p=(0,a.h)({getInstance:()=>o.Gq.get(d,(()=>new s.X))}),h=e=>{if(!(0,c.Yc)()||!e)return;const t="string"==typeof e?function(e){if(!e||"string"!=typeof e)return;const t=new Set(["muid","anid","wid","at","it","picassoId"]),n=e.split(";").map((e=>e.trim())),i={};for(const e of n){const[n,r]=e.split("="),o=n?.trim(),a=r?.trim();o&&a&&t.has(o)&&(i[o]=a)}if(i.at)return i}(e):e;t&&0!==Object.keys(t).length?(t.at||(0,i.H)(r.PA8,"No account type in digital ID payload"),p.publish(l.DigitalIdUpdate,t)):(0,i.H)(r.FlO,"No digital ID payload")}},19188:function(e,t,n){n.d(t,{N:function(){return l}});var i=n(54655),r=n(21215),o=n(33779),a=n(5302),s=n(19625),c=n(15598);const d="OptanonConsent",u="OptanonAlertBoxClosed";function l(){if(!(0,r.N)())return;const e=(0,s.aW)();if(!e)return;const t="ConsentCookieExpInUSLocaleFix",n=(0,c.$o)();if(!(n.getItem(t)===e))try{const r=function(){const e=(0,s.aW)();if(!e)return null;let t;try{const n=e.split(".")[0];if("function"==typeof atob){const e=n.replace(/_/g,"/").replace(/-/g,"+");t=atob(e)}else{if("function"!=typeof Buffer)return null;t=Buffer.from(n,"base64").toString("binary")}}catch(e){return null}let n="";for(let e=0;e<t.length;e++){const i=t.charCodeAt(e).toString(2);n+="00000000".slice(0,8-i.length)+i}if(2!==parseInt(n.slice(0,6),2))return null;const i=n.slice(6,42),r=100*parseInt(i,2);return new Date(r)}();if(r){const o=r.getTime(),a=new Date("2025-07-10T21:09:00-07:00").getTime(),c=new Date("2025-07-15T13:33:00-07:00").getTime();if(o>=a&&o<=c){const r=Math.floor(5*Math.random())+1,o=new Date(Date.now()+60*(24+r)*60*1e3);document.cookie=`${i.ks}=${e};Domain=.msn.com;Path=/;Secure=true;SameSite=None;Expires=${o.toUTCString()}`;const a=(0,s.ej)(d),c=(0,s.ej)(u);a&&(document.cookie=`${d}=${a};Domain=.msn.com;Path=/;Secure=true;SameSite=None;Expires=${o.toUTCString()}`),c&&(document.cookie=`${u}=${c};Domain=.msn.com;Path=/;Secure=true;SameSite=None;Expires=${o.toUTCString()}`),n.setItem(t,e)}}}catch(e){(0,o.H)(a.oh8,"Failed to fix TCF string in US locale",e.message)}}},5884:function(e,t,n){n.d(t,{AU:function(){return l},Cd:function(){return $},Cw:function(){return C},DB:function(){return h},Eo:function(){return _},FP:function(){return V},IX:function(){return s},Ib:function(){return U},It:function(){return F},JJ:function(){return E},Ji:function(){return v},Kj:function(){return B},Kz:function(){return f},Li:function(){return w},Nf:function(){return m},Oj:function(){return G},Qw:function(){return y},X8:function(){return p},Xs:function(){return i},Yu:function(){return R},Z7:function(){return N},cp:function(){return c},cs:function(){return b},go:function(){return o},js:function(){return u},m$:function(){return S},nM:function(){return T},nr:function(){return a},og:function(){return A},rD:function(){return M},tX:function(){return k},uD:function(){return H},um:function(){return d},up:function(){return W},uw:function(){return g},wG:function(){return I},x$:function(){return r},yz:function(){return P}});const i="msnewsroot",r={html:"html",head:"head",body:"body"},o="data-canvas-info",a="data-client-settings",s="data-diagnostics",c="dir",d="data-info",u="data-js",l="data-pagetype",p="data-service-url",h="data-telemetry-id",g="data-page-product",f="data-page-type",m="data-ads-numberline",y=2,v="APP_ANON",S="aace",w="ace",b="OSATE",C="OSAT",T="child",k="AL_STATE",P="WID",A="APP_WID",I="search-history-enabled",E="left-rail-enabled",R={activityId:"x-client-activityid",adsReferer:"ads-referer",authorization:"Authorization",entAuthorization:"Ent-Authorization",muid:"MUID",rpsToken:"UserAuthToken",taboolaSessionId:"taboola-sessionId",xboxToken:"s-xbox-token",traceParent:"traceparent",uniFeatTun:"OneSvc-Uni-Feat-Tun"},M={traceId:"ddd-activityid",debugId:"ddd-debugid",afdRefStr:"x-msedge-ref",userType:"ddd-usertype",isStatic:"X-Statics-Fallback",authFeatures:"ddd-auth-features",akamai_cache_status:"akamai-cache-status",akamai_grn:"akamai-grn",akamai_request_bc:"akamai-request-bc",akamai_request_id:"akamai-request-id",akamai_server_ip:"akamai-server-ip",digitalId:"X-1S-Digital-ID"};var x,L;!function(e){e.Presentation="presentation"}(x||(x={})),function(e){e.Unknown="Unknown",e.Portrait="Portrait",e.Landscape="Landscape"}(L||(L={}));const F={pageVersions:"pageVersions"},D={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default"}},O={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default",sharedNs:"msn-ns"}},_=e=>{let t;switch(e){case"default":t=D;break;case"shared":t=O;break;default:t=void 0}return t},N="https://microsoftnews.msn.com/",B="switchedPivot",U="pivotSelectionSource";var $,H;!function(e){e[e.Undefined=0]="Undefined",e[e.Basic=1]="Basic",e[e.Advanced=2]="Advanced",e[e.Premium=3]="Premium"}($||($={})),function(e){e.Init="init",e.Config="config",e.Targeted="targeted",e.Sticky="sticky",e.NoSticky="no_sticky",e.Admin="admin",e.Forced="forced",e.Manual="manual"}(H||(H={}));const W=new Set(["finance-app-win","weather-app-win","winpstoreapp"]),G=new Set(["hpmsn"]),V=new Set(["chromentpnews"])},24032:function(e,t,n){n.d(t,{L:function(){return o}});var i=n(21215);let r;function o(){return(0,i.N)()?(r||(r=new URLSearchParams(window?.location.search)),r):new URLSearchParams(window?.location.search)}},24417:function(e,t,n){function i(e){return new Promise((t=>setTimeout(t,e)))}n.d(t,{qn:function(){return r},rh:function(){return i}});const r=async(e,t,n)=>{if(!t||isNaN(e))return;if(!e&&0!==e||e<0||e===1/0)return await t;const i=(e=>{let t,n=()=>{},i=()=>!1;const r=new Promise(((r,o)=>{n=()=>{t&&(clearTimeout(t),t=null,o())},i=()=>null!==t,t=setTimeout((()=>{t=null,r()}),e)}));return{cancel:n,isActive:i,promise:r}})(e),r=await Promise.race([t,i.promise]);return i.isActive()?i.cancel():n&&n(),r}},92421:function(e,t,n){n.d(t,{Sm:function(){return S},br:function(){return b},cb:function(){return w}});var i=n(16415);function r(e){const t=(0,i.sL)();return function(n,i){if(i||(i={}),!o(i,"Referer")){const e="string"==typeof n?n:n.url;!function(e,t,n,i){const r=(s[i]||s[a])(e,t);if(delete n.referrerPolicy,!r)return;n.headers=n.headers||{},n.headers.Referer=r}(t.url,e,i,i.referrerPolicy)}return o(i,"User-Agent")||function(e,t){e.headers=e.headers||{},e.headers["User-Agent"]=`${t} (via node-fetch)`}(i,t.userAgent),e(n,i)}}function o(e,t){return e.headers&&void 0!==e.headers[t]}const a="strict-origin-when-cross-origin",s={"no-referrer":(e,t)=>{},"no-referrer-when-downgrade":(e,t)=>c(e,t)?void 0:e.href,origin:(e,t)=>e.origin+"/","origin-when-cross-origin":(e,t)=>d(e,t)?e.href:e.origin+"/","same-origin":(e,t)=>d(e,t)?e.href:void 0,"strict-origin":(e,t)=>c(e,t)?void 0:e.origin+"/","strict-origin-when-cross-origin":(e,t)=>d(e,t)?e.href:s["strict-origin"](e,t),"unsafe-url":(e,t)=>e.href};function c(e,t){return"https:"===e.protocol&&t.startsWith("http:")}function d(e,t){return t.startsWith(e.origin+"/")}n(73040),n(91898);var u=n(52185),l=n(21215);class p{constructor(){this.cacheMap=new Map}async has(e){return!!this.cacheMap[e]}async get(e){return this.cacheMap[e]}async set(e,t,n){return this.cacheMap[e]=t,!0}async mSet(e,t){return Object.keys(e).forEach((t=>{this.cacheMap[t]=e[t]})),!0}async del(e){delete this.cacheMap[e]}async itemCount(){return Object.keys(this.cacheMap).length}async reset(){this.cacheMap=new Map}}const h="__ServerCacheUpdateMap__";let g,f;const m=(0,l.N)()?null:{emitUpdate:async function(){if(!u.Gq.has(h))return;const e=u.Gq.get(h),t=[];return e.forEach(((e,n)=>{const i=f.mSet(e,n).then((()=>{const e=u.Gq.get(h);e&&e.delete(n)}));t.push(i)})),Promise.all(t)},initialize:function(e,t=!1){f=e,g=t},reset:async function(){await f.reset()},set:async function(e,t,n){if(g)return function(e,t,n){const i=u.Gq.get(h,(()=>new Map)),r=i.get(n);i.set(n,{...r,[e]:t})}(e,t,n);await f.set(e,t,n)},get:async function(e){return await f.get(e)},has:async function(e){return await f.has(e)},del:async function(e){return await f.del(e)},itemCount:async function(){return await f.itemCount()}};n.g.TEST_ENV&&!(0,l.N)()&&m.initialize(new p);n(28951),n(42122),n(7677);let y;class v{constructor(){"undefined"!=typeof AbortController&&(this.controller=new AbortController)}abort(){return!!this.controller&&(this.controller.abort(),!0)}setAbortSignal(e){this.controller&&(e.signal=this.controller.signal)}}async function S(e,t,n,i,r,o,a=!1){r||(r=fetch);const s=()=>async function(e,t,n,i,r,o,a=!1){r||(r=fetch),i||(i=new v),o=!1;let s=null,c=null;void 0===t?t=y:y>0&&(t=Math.min(t,y)),t>0&&(s=1e4,s=setTimeout((()=>{c=setTimeout((()=>{if(!i.abort())throw new Error(`Fetch for ${e} aborted due to timeout of ${t} ms. AbortController is not supported.`)}),0)}),t)),n||(n={method:"GET"}),n.signal||i.setAbortSignal(n),performance.now();let d,u=0;const l={};let p;const h=()=>{s&&clearTimeout(s),c&&clearTimeout(c)};return r(e,n).then((e=>(u=e.status,p=e.headers?.get("onewebservicelatency"),o&&(l.cluster=e.headers.get("x-fabric-cluster")||e.headers.get("ddd-debugid")?.split("|")?.[3],l.afd=e.headers.get("x-msedge-ref"),l.dddDebugId=e.headers.get("ddd-debugid"),l.wpoId=e.headers.get("x-wpo-activityid")),e))).catch((n=>{if(d=n,"AbortError"===n.name)throw new Error(`Fetch for ${e} aborted due to timeout of ${t} ms.`);throw new Error(n)})).then((e=>(h(),e)),(e=>{throw h(),e}))}(e,t,n,i,r,o,a);return s()}function w(){return{abortToken:null,timeoutMs:900,fetchImpl:r(fetch)}}async function b(e,t,n){return n||(n=w()),S(e,n.timeoutMs,t,n.abortToken,n.fetchImpl,n.trackApiClusterInServer)}},32425:function(e,t,n){n.d(t,{AE:function(){return o},lI:function(){return a}});var i=n(21298);let r;function o(e,t){if(!e)return null;if(t)return a(e);if(!r){const e="undefined"!=typeof document&&document.cookie.split("; ");r={};const t=e&&e.length;for(let n=0;n<t;n++){const t=e[n].indexOf("=");r[e[n].slice(0,t).toLocaleLowerCase()]=(0,i.fB)(e[n].slice(t+1))}}const n=e.toLocaleLowerCase();return r[n]||null}function a(e){const t=document.cookie?.match(`\\b${e}=([^;]*)`);return t?(0,i.fB)(t[1]):null}},78288:function(e,t,n){n.d(t,{$_:function(){return m},mv:function(){return y},q6:function(){return g}});var i=n(52185),r=n(22680),o=n(13218),a=n(28951),s=n(59465),c=n(16715),d=n(30688);const u="prg-copilot-theme",l="prg-ctucoverride",p="prg-ctfourcol",h="isCopilotThemeEnabledKey";function g(){if(!i.Gq.has(h)){const e=Boolean(o.Al.CurrentFlightSet?.has(u)),t=Boolean(o.Al.CurrentFlightSet?.has(l))&&null!==a.cX.getQueryParameterByName("ucexperience",(0,r.l4)()),n=((0,s.vD)()||(0,d.C)())&&(e||t);i.Gq.set(h,String(n))}return"true"===i.Gq.get(h)}const f="isCopilotThemeFourColEnabledKey";function m(){if(!i.Gq.has(f)){const e=Boolean(o.Al.CurrentFlightSet?.has(p));i.Gq.set(f,String(e))}return"true"===i.Gq.get(f)}function y(){return g()&&(0,s.nH)()||(0,c.P4)()||(0,c.OO)()}},77775:function(e,t,n){n.d(t,{m:function(){return o}});var i=n(13218),r=n(98130);function o(){const e=i.Al&&i.Al.Diagnostics||{},t=i.Al&&i.Al.ClientSettings,{mc:n={}}=e||{},{pageGenTime:o="",geo_citycf:a="",geo_countrycf:s="",requestTrailInfo:c,detection:d}=t||{},{cdn:u=""}=c||{},l={refs:{refA:r.jG.ActivityIdLowerCaseNoHypens||"",refC:o},cookies:n,geoConfidence:{cityConfidence:a,countryConfidence:s},langMismatch:r.jG.MarketMismatchDetail,cdn:u};return JSON.stringify(l)}},54076:function(e,t,n){n.d(t,{L:function(){return i}});const i=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},32808:function(e,t,n){n.d(t,{N6:function(){return s},j3:function(){return a}});var i=n(52185);const r=()=>i.Gq.get("__core_DisplayModeCoordination_displayModeMap__",(()=>({}))),o=()=>i.Gq.get("__core_DisplayModeCoordination_callbackMap__",(()=>({})));function a(e,t){const n=r();if(n[e]===t)return;n[e]=t;const i=o()[e];if(i)for(const e of i)e(t)}function s(e,t){const n=o(),i=r();let a=n[e];a||(a=[],n[e]=a),a.push(t);const s=i[e];s&&t(s)}},59942:function(e,t,n){n.d(t,{Xw:function(){return d},Z3:function(){return l},h_:function(){return p},nF:function(){return h},rP:function(){return u}});var i=n(97205),r=n(28951),o=n(98130),a=n(22680);const s="{hostName}",c=/\{localeCode\}|\{0\}/;function d(e,t){const n=r.cX.encodeURIComponentForPrime(t).toLowerCase(),{HostPage:i}=o.jG;if(i){const t=new URL(i.originalUrl);return t.origin+"/"+i.verticalKey+"/"+i.categoryKey+"/interests/"+n+"/"+o.jG.CurrentMarket+"/f-"+e+t.search}return"https://www.msn.com"}function u(){return`${o.jG.NavTargetUrlWithLocale}/${i.lU}`}function l(e=i.UH){return`${o.jG.NavTargetUrlWithLocale}/${e}`}function p(e){return e&&(e=e.replace(s,o.jG.NavTargetHostName).replace(c,o.jG.CurrentMarket)),e||""}function h(e){if(!e)return;const{Environment:t,EnvInstanceOverride:n}=o.jG;n===t&&(e.host=(0,a.zw)(),e.searchParams.set("instance",n))}},28525:function(e,t,n){function i(){try{return localStorage}catch(e){return null}}function r(){try{return sessionStorage}catch(e){return null}}n.d(t,{N:function(){return r},U:function(){return i}})},16715:function(e,t,n){n.d(t,{E4:function(){return M},H2:function(){return R},Ko:function(){return B},OO:function(){return P},P4:function(){return I},RG:function(){return E},Rz:function(){return x},aH:function(){return G},b5:function(){return F},ce:function(){return _},eh:function(){return H},lI:function(){return W},nT:function(){return A},pE:function(){return V},s_:function(){return U},tr:function(){return k},tu:function(){return O},wq:function(){return D},xc:function(){return $},yE:function(){return L}});var i=n(52185),r=n(21215),o=n(32236);const a="OnOOutlookMobile",s="OnOStartApp",c="emmxFre",d="xmweather-",u="launcherntp",l="launcherInterests",p="swiftKey",h="superappdhp",g="cp_msn_cmc",f="oppowx",m="_ocidIsomorphicKey",y=()=>(i.Gq.get(m)||i.Gq.set(m,q("ocid").toLowerCase()),i.Gq.get(m)),v="_platformFlagKey",S="_hostAppNameKey",w="_clientTypeKey",b=()=>(i.Gq.get(v)||i.Gq.set(v,q("chpltfm")),i.Gq.get(v)),C=()=>{if(!i.Gq.get(S)){const e=b();i.Gq.set(S,e.toLowerCase().split("-")[0])}return i.Gq.get(S)},T=()=>{if(!i.Gq.get(w)){const e=b();i.Gq.set(w,e.toLowerCase().split("-")[1])}return i.Gq.get(w)};function k(){if(!(0,r.N)()||$())return!1;const e=window.sapphireWebViewBridge,t=window.webkit,n=e&&e.send,i=t&&t.messageHandlers&&t.messageHandlers.send&&t.messageHandlers.send.postMessage;return!(!n&&!i)}function P(){return!!(0,r.N)()&&y()===g}function A(){return!!(0,r.N)()&&(y()===g&&"true"===q("hasBridge"))}function I(){return!!window._isCopilotBridge||"copilot"===q("MBApp")}function E(){const e=window.location?.hostname;return"localhost.msn.com"===e}function R(){const e=b()&&"outlook"===C()&&["ios","android","ipados"].includes(T()),t=y()===a.toLowerCase();return e||t}function M(){return y()===f}function x(){return R()}function L(){return"true"===q("is2ndWV")}function F(){return y()===c.toLowerCase()}function D(){return!(!(0,r.N)()||$())&&(k()||y()===s.toLowerCase()||y()===h.toLowerCase())}function O(){return"mmx"===y()}function _(){const e=q("edge");return("emmx"===C()||"1"===e)&&D()||O()}function N(){return"3rdp"===C()||y().startsWith(d)||$()}function B(){return"vivo"===y()&&N()}function U(){return[u.toLowerCase(),l.toLowerCase()].includes(y())&&D()}function $(){return y().toLowerCase()===p.toLowerCase()||"swiftkey"==C().toLowerCase()}function H(){if(!(0,r.N)())return!1;if("bingHomepageMobile"===window._clientSettings?.pagetype)return!0;{const e=document.getElementsByClassName("peregrine-widget-settings")[0]?.getAttribute("data-client-settings");if(e){const t=JSON.parse(e);return t&&t.pagetype&&"bingHomepageMobile"===t.pagetype}return!1}}function W(){return-1!==window.location.href.indexOf("metaos=true")}function G(){return D()&&!("emmxinterests"===y())&&!(y()===l.toLowerCase())&&!N()&&!_()}const V=(0,o.p)((()=>k()||R()||D()||y()==="weather-app-win".toLowerCase()||y()==="finance-app-win".toLowerCase()||_()||N()||U()||$()||W()||I()||A()));function q(e){try{return new URL(location.href).searchParams.get(e)||""}catch(e){return""}}},82632:function(e,t,n){n.d(t,{Ie:function(){return i},_T:function(){return s},ou:function(){return l}});var i,r=n(5302),o=n(98130),a=n(21215);function s(){return c}!function(e){e.Unknown="unknown",e.Connected="connected",e.Disconnected="disconnected",e.Aborted="aborted"}(i||(i={}));let c=i.Unknown,d=null,u=!1;function l(e=5e3){(0,a.N)()&&(c=i.Unknown,p(e))}async function p(e=5e3,t){return u=!1,t&&(d=window.setTimeout((()=>{u=!0,t.abort()}),e)),function(e){const t={method:"HEAD",cache:"reload"};e&&(t.signal=e);return fetch(`https://assets.msn.${o.jG.IsChinaCompliance?"cn":"com"}/statics/icons/favicon.ico`,t)}(t&&t.signal).then((()=>(c=i.Connected,(0,r.GQ)({networkStatus:c}),!0))).catch((e=>(c=e&&"AbortError"===e.name?i.Aborted:i.Disconnected,(0,r.GQ)({networkStatus:c}),!1))).finally((()=>{clearTimeout(d)}))}},59465:function(e,t,n){n.d(t,{nH:function(){return s},pf:function(){return i},vD:function(){return c}});var i,r=n(98130),o=n(13218),a=n(5232);function s(){return"ruby"===o.Al?.ClientSettings?.modes?.uxMode}function c(){return s()||(0,a.aw)()}!function(e){e.isDhpPage=function(){return"dhp"===o.Al.ClientSettings.pagetype},e.isNtpPage=function(){return"ntp"===o.Al.ClientSettings.pagetype},e.fiveColSupported=function(){return r.jG.EnableFiveColLayout}}(i||(i={}))},21298:function(e,t,n){function i(e,t){const n=parseInt(e);return isNaN(n)?t:n}function r(e){try{return JSON.stringify(e)}catch{return null}}function o(e){try{return decodeURIComponent(e)}catch(e){}}n.d(t,{Vm:function(){return r},fB:function(){return o},hh:function(){return i}})},45970:function(e,t,n){n.d(t,{X:function(){return i}});class i{constructor(e){this.onSubscriptionCallbackError=e,this.eventLookup={}}publish(e,t){let n=this.eventLookup[e];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)try{n[i](t)}catch(n){this.onSubscriptionCallbackError&&this.onSubscriptionCallbackError(n,e,i,t)}}}subscribe(e,t){void 0===this.eventLookup[e]&&(this.eventLookup[e]=[]);const n=this.eventLookup[e];return n.push(t),{dispose(){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}}subscribeOnce(e,t){const n=this.subscribe(e,(function(e){n.dispose(),t(e)}));return n}}},12812:function(e,t,n){n.d(t,{Z:function(){return a},l:function(){return s}});var i=n(21215),r=n(15598);let o={};function a(e){e=e||{},(async()=>{const{newUrl:t,invalidatePageCache:n=!0}=e;if(n){const{invalidatePageCacheHandler:e}=o;if(e){const t=e();t&&t.then&&await t}}t?((0,r.$o)().setItem("reloadPage","refreshPagewithNewUrl"),window.location.replace(t)):((0,r.$o)().setItem("reloadPage","refreshPageNoNewUrl"),window.location.reload(n))})()}const s={resetHandlers:function(){o={}},setHandlers:function(e){(0,i.N)()&&e&&(o=e)}}},79678:function(e,t,n){n.d(t,{C:function(){return i}});const i=e=>"function"==typeof window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,0)},55447:function(e,t,n){n.d(t,{$z:function(){return p},NJ:function(){return g},SD:function(){return l},cf:function(){return h},kJ:function(){return f},ll:function(){return m},nl:function(){return y}});var i=n(5884),r=n(15598),o=n(21215),a=n(24032),s=n(13218),c=n(98130);const d="ntp.selected_feed_pivot",u="selectedPivot";function l(){h("myFeed")}function p(){let e=s.Al?.SelectedFeedPivot;const t=(0,a.L)().get("selectedNavItemMock");if(t&&(e=t),(0,o.N)()){const t=(0,r.$o)().getItem(u);e&&t!==e?h(e):e=t}const n=e?.toLowerCase();return["myfeed","productivityhub","iframe.office","stripe.myfeed"].includes(n)||(e="myFeed",h(e)),(0,c.Yq)()?.IsChinaCompliance&&"productivityhub"==n&&(e="myFeed",h(e)),e}function h(e){if(f(e),(0,o.N)()){const t="undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.setPref&&t.setPref(d,e)}s.Al.SelectedFeedPivot=e,(0,r.$o)().setItem(u,e)}function g(){return(0,r.$o)().getItem(i.Kj)}function f(e){(0,r.$o)().setItem(i.Kj,e)}function m(){return(0,r.$o)().getItem(i.Ib)??i.uD.Init}function y(e){(0,r.$o)().setItem(i.Ib,e)}},42833:function(e,t,n){n.d(t,{o:function(){return i}});class i{constructor(e){this.promise=new Promise(((e,t)=>{this.resolver=e,this.reject=t})),e&&setTimeout((()=>this.set(void 0)),e)}set(e){this.resolver(e),this.valueSet=!0}setError(e){this.reject(e)}wasSet(){return this.valueSet}getResultAsync(){return this.promise}}},18875:function(e,t,n){n.d(t,{U:function(){return r}});const i=[];function r(e){i.push(e)}},79070:function(e,t,n){n.d(t,{v:function(){return c}});var i=n(33779),r=n(5302),o=n(21215),a=n(22680),s=n(24417);async function c(e){if(!(0,o.N)())return;const{src:t,id:n,async:c=!0,container:u=document.head,loadMode:l="skipIfExists",retryNumber:p=0,retryDelayMs:h=0}=e;if("skipIfExists"==l&&(d.has(n)||Boolean(document.getElementById(n))))return d.get(n);try{const e=async function(e,t=3,n=100){if(t<=1)return e();let i,r=1;do{try{i=await e()}catch(e){if(r===t)throw e&&e.message&&(e.message=`${e.message} after ${r} attempts`),e;await(0,s.rh)(n)}}while(!i&&++r<=t);return i}((()=>function(e,t,n,i=!0){return new Promise(((r,o)=>{const s=(0,a.b0)(e,t,i,void 0,void 0,(()=>r(!0)));s.crossOrigin=void 0,s.onerror=o,n.append(s)}))}(t,n,u,c)),p,h);d.set(n,e),await e}catch(e){throw(0,i.OO)(e,r.Sp0,"Failed to download Static JS",void 0,{scriptId:n,scriptSrc:t}),document.getElementById(n)?.remove(),e}finally{d.delete(n)}}const d=new Map},46037:function(e,t,n){n.d(t,{R:function(){return i}});const i=e=>e&&"string"==typeof e&&e.trim&&!!e.trim()},5232:function(e,t,n){n.d(t,{GI:function(){return l},Qc:function(){return d},aw:function(){return p},cM:function(){return u},ku:function(){return s},w_:function(){return c}});var i=n(56121),r=n(44132),o=n(98130),a=n(5884);function s(){if(!r.M0)return;const e=r.M0.getPageMetadata?.();return e&&e.contract&&e.contract.page?e.contract.page.ocid:void 0}function c(e){if("windowsShell"===o.jG.AppType||"windowsShellV2"===o.jG.AppType)return d(e);const t=s(),n=e.toLowerCase();if(!t||-1!=n.indexOf("?ocid=")||-1!=n.indexOf("&ocid="))return e;const i=-1==e.indexOf("?")?"?":"&";return`${e}${i}ocid=${encodeURIComponent(t)}`}function d(e){if(!e)return e;try{const t=new URL(e),n=t.searchParams;return s()&&n.set("ocid",s()),n.set("cvid",r.M0.getRequestId()),t.toString()}catch{return e}}function u(e){try{const t=new URL(e),n=s();n&&t.searchParams.set("ocid",n);const i=function(){if(r.M0)return r.M0.getRequestId?.()}();i&&t.searchParams.set("cvid",i);const a=o.jG?.UxMode;a&&t.searchParams.set("uxmode",a);const c=r.M0.getCurrentEventIndex()+1;return c&&t.searchParams.set("ei",c.toString()),t.toString()}catch(t){return e}}function l(e){if(!e)return null;const t={...e};return t[a.Yu.entAuthorization]&&(t[a.Yu.entAuthorization]="*****"),t[a.Yu.rpsToken]&&(t[a.Yu.rpsToken]="*****"),t[a.Yu.authorization]&&(t[a.Yu.authorization]="*****"),t}function p(){const e=s();return!!e&&i.et.includes(e.toLowerCase())}},42167:function(e,t,n){n.d(t,{Kb:function(){return r}});setTimeout;let i=setTimeout;async function r(e){return new Promise(((t,n)=>{i(t,e)}))}},7733:function(e,t,n){n.d(t,{h:function(){return i}});class i{constructor(e){this.searchParams=Object.create(null),this.parseQueryString(e)}set(e,t){return null!=t&&(this.searchParams[e]=t),this}get(e){return this.searchParams[e]}getAllSearchParams(){return this.searchParams}delete(e){delete this.searchParams[e]}toString(){const e=Object.keys(this.searchParams);return e.length?e.sort().map((e=>`${e}=${this.searchParams[e]}`)).join("&"):""}parseQueryString(e){if(!e)return;const t=e.indexOf("?");t>-1&&(e=e.substring(t+1)),e.split("&").forEach((e=>{const t=e.split("="),n=t[0];this.get(n)||(this.searchParams[n]=t[1])}))}}},28951:function(e,t,n){n.d(t,{Kk:function(){return g},cX:function(){return i},e_:function(){return f}});var i,r=n(55025),o=n(79022),a=n(54433),s=n(92170),c=n(13578),d=n(50769),u=n(37242),l=n(42122),p=n(7677),h=n(22680);function g(e,t){try{const n=new URL(e,(0,h.Dp)());return t&&t.forEach((([e,t])=>e&&null!=t&&n.searchParams.append(e,t))),n}catch(e){l.k.logError((0,p.n)(e))}}function f(e){if(!e)return;const t=new URLSearchParams(window.location.search),n=new URL(e);if(function(){const e=window.location.href;return null!==i.getQueryParameterByName("disti",e)}()){const e=t.get("ocid");if(e){const t=new URLSearchParams(n.search);t.set("ocid",e),n.search=`?${t.toString()}`}}const r=t.getAll("item");return r&&r.length?(r.forEach((e=>{const t=n.search?"&":"?";-1===n.search.indexOf(e)&&(n.search+=`${t}item=${e}`)})),n.toString()):n.toString()}!function(e){const t=/[^A-Za-z0-9]+/g;function n(e,t=!1){if(!(0,o.Z)(e))return null;return l((e||"").split("?")[1],t)}function i(e){return e=e.replace(/\+/g," "),e=decodeURIComponent(e)}function l(e,t=!1){const n=[];if(e&&e.startsWith("?")&&(e=e.substring(1)),e){const r=(e=e.split("#")[0]).split("&");for(let e=0;e<r.length;e++){const o=r[e].split("=");let s=o[0],c=o[1];t&&(s=i(s),c&&(c=i(c)));const d={key:s,value:c},u=(0,a.Z)(n,(e=>e.key===d.key));-1===u?n.push(d):n[u]=d}}return n}e.getParamsFromUrl=n,e.encodeURIComponentForPrime=function(e){return encodeURIComponent(e.replace(t,"-"))},e.getParams=l,e.getParamsWithItems=function(e,t=!1,n="item"){const r=[];if(e){e.startsWith("?")&&(e=e.substring(1));const o=(e=e.split("#")[0]).split("&");for(let e=0;e<o.length;e++){const a=o[e].split("=");let s=a[0],c=a[1];if(t&&(s=i(s),c&&(c=i(c))),s.toLowerCase()===n){c=c.replace("::::",";;;;");const e=c.split(":");if(2===e.length){s=e[0],c=e[1].replace(";;;;","::::");const t={key:s,value:c};-1===r.findIndex((e=>e.key===t.key))&&r.push(t)}}}}return r};const p={};function g(e){const t={},i=n(e,!0);return i&&i.length&&i.forEach((e=>t[e.key]=e.value)),t}e.getQueryParameterByName=function(e,t){p[t]||(p[t]=g(t));const n=p[t][e];return void 0!==n?n:null},e.isValidUrl=function(e,t){return(0,o.Z)(e)&&e.length>0&&(!t||t&&0===e.indexOf("http"))},e.keyValueArrayToQueryString=function(e){return!(0,s.Z)(e)||(0,c.Z)(e)?"":e.filter((e=>r.b.isKeyValuePair(e,(e=>"string"==typeof e),(e=>"string"==typeof e)))).map((e=>e.key+"="+e.value)).join("&")},e.getParamsObj=g,e.joinSubpathToURL=function(e,t){const n=e.href,i=(0,d.Z)(n,"/"),r=(0,u.Z)(t,"/");return new URL(`${i}/${r}`)},e.updateSearchParam=function(e,t,n){return e&&e.searchParams&&e.searchParams.get(t)&&e.searchParams.set(t,n),e},e.appendSearchParam=function(e,t,n,i){return e&&(e.searchParams||i?e.searchParams.append(t,n):e=new URL(e.href+(e.search.indexOf("?")>=0?"&":"?")+t+"="+n)),e},e.getAbsoluteUrl=function(e){return e.indexOf("://")>0||0===e.indexOf("//")?e:(0,h.Dp)()+e};const f=new Set(["/","$","^","+",".","(",")","=","!","|"]);e.urlPatternToRegExp=function(e){if(0==e.indexOf("/")&&e.lastIndexOf("/")>0){const t=e.slice(1,e.lastIndexOf("/")),n=e.substring(e.lastIndexOf("/")+1)||void 0;return new RegExp(t,n)}return function(e){const t=["^"];let n;for(let i=0;i<e.length;++i){const r=e[i];if(f.has(r))t.push("\\"+r);else if("*"!==r)switch(r){case"?":t.push(".");break;case"{":n=!0,t.push("(");break;case"}":n=!1,t.push(")");break;case",":if(n){t.push("|");break}t.push("\\"+r);break;default:t.push(r)}else{const n=e[i-1];let r=1;for(;"*"===e[i+1];)r++,i++;const o=e[i+1];!(r>1)||"/"!==n&&void 0!==n||"/"!==o&&void 0!==o?t.push("([^/]*)"):(t.push("((?:[^/]*(?:/|$))*)"),i++)}}return t.push("$"),new RegExp(t.join(""))}(e)},e.compareURLs=function(e,t){try{const n=new URL(e),i=new URL(t),r=n.searchParams,o=i.searchParams,a=[],s=[],c=[];return r.forEach(((e,t)=>{o.has(t)?o.get(t)!==r.get(t)&&c.push(t):s.push(t)})),o.forEach(((e,t)=>{r.has(t)||a.push(t)})),{hostMismatch:n.hostname!==i.hostname,pathMismatch:n.pathname!==i.pathname,paramsMissingLeft:a.join(","),paramsMissingRight:s.join(","),paramsDiff:c.join(",")}}catch(e){return{}}}}(i||(i={}))},55025:function(e,t,n){n.d(t,{b:function(){return i}});var i,r=n(79022),o=n(43698);!function(e){function t(e){return null!=e}e.isNotNullOrUndefined=t,e.isDefined=function(e){return void 0!==e},e.isKeyValuePair=function(t,n,i){return e.isNonNullObject(t)&&n(t.key)&&i(t.value)},e.isNonNullObject=function(e){return e&&"object"==typeof e},e.isNotNull=function(e){return null!==e},e.isNullOrWhiteSpace=function(e){return!(0,r.Z)(e)||""===e.trim()},e.toNumber=function(e,t=-1){if(!e)return t;const n=(0,o.Z)(e);return isNaN(n)?t:n},e.arrayHasData=function(e){return!!t(e)&&(e.constructor===Array&&e.length>0)},e.stringHasData=function(e){return(0,r.Z)(e)&&e.trim().length>0},e.objectToString=function e(t){let n="",i=!0;if("object"!=typeof t)return n;for(const r in t)"object"==typeof t[r]?n+=i?`${e(t[r])}`:`-${e(t[r])}`:n+=i?`${t[r]}`:`-${t[r]}`,i=!1;return n},e.removeHyphens=function(e){if(e)return e.replace(/-/g,"")}}(i||(i={}))},82588:function(e,t,n){n.d(t,{Fr:function(){return f},R0:function(){return u},mS:function(){return y},ot:function(){return m},rh:function(){return v},yb:function(){return d}});var i=n(43852),r=n(5302),o=n(42122),a=n(7677),s=n(21215),c=n(98130);let d,u;const l=new Map;let p;const h=(0,i.oA)("WebWorkerUtility","WebWorkerUtility",!0),g=new Map,f=e=>{if(!e)return;const t=g.get(e);return t?(g.delete(e),t):void 0};function m(e,t,n=!0,i=!0){const a={id:e&&e.id||"",fetched:!1,payload:null};if(!e||!e.id)return Promise.resolve(a);if(!d&&(!u||u&&"appanoncookie"!==e.id))return Promise.resolve(a);const s=h&&h.startMeasure(e.id).endMeasure,c=g.get(e.id);if(c)return i&&g.delete(e.id),s&&s({customSuffix:"standbymessage"}),Promise.resolve(c);let f,m;t&&(m=new Promise((i=>{f=setTimeout((()=>{l.delete(e.id);const c=`Web worker request timed out after ${t}ms for request id: [${e.id}]`;n&&(p?p({...r.s7S,message:"Web worker request timed out",pb:{...r.s7S.pb,customMessage:c}}):o.k.logError(c)),s&&s({customSuffix:"timeout"}),i({...a,timeout:!0})}),t)})));const y=new Promise((t=>{l.set(e.id,{type:e.type||"data",callback:e=>{f&&clearTimeout(f),s&&s(),t(e)}})}));return window.webWorker.postMessage({id:e.id,type:e.type||"data",payload:e.payload}),t?Promise.race([y,m]):y}function y(e){d&&e&&e.id&&window.webWorker.postMessage({id:e.id,type:e.type||"command",payload:e.payload||null})}function v(e){if(!d||!e||"function"!=typeof e)return;p=function(t){try{e(t)}catch(e){o.k.logError(`Failed to log web worker AppError. Error: ${(0,a.n)(e)}`)}},window.webWorker.onerror=S;var t,n;t={id:"WebWorkerError",type:"subscription"},n=e=>{if(e.payload&&"object"==typeof e.payload){const t=e.payload;t.pb={...t.pb,...(0,r.mnt)()},p(t)}else p({...r.ckW,message:"Web worker error",pb:{...r.ckW.pb,customMessage:JSON.stringify(e.payload||"")}})},d&&t&&"subscription"===t.type&&n&&(l.set(t.id,{type:"subscription",callback:n}),window.webWorker.postMessage(t)),setTimeout((()=>{window.webWorkerErrors&&Array.isArray(window.webWorkerErrors)&&(window.webWorkerErrors.forEach((e=>{S(e)})),delete window.webWorkerErrors)}))}function S(e){if(!e.filename)return d=!1,window._isWebWorkerPresent=d,window.webWorker.terminate(),void p({...r.ZI3,message:"Web worker script not found",pb:{...r.ZI3.pb,customMessage:JSON.stringify(w(e))}});p({...r.Z3R,message:"Web worker runtime error",pb:{...r.Z3R.pb,customMessage:JSON.stringify(w(e))}})}function w(e){return JSON.stringify({filename:e.filename,message:e.message,lineno:e.lineno})}var b;d=!1,u=!1,(0,s.N)()&&(d=void 0!==b?b:!!window.webWorker,window._isWebWorkerPresent=d,u=d),"edgeChromium"===c.jG.AppType&&(d=!1,c.jG.StaticDomain&&c.jG.StaticDomain.endsWith("cn")&&(u=!1)),(d||u)&&(window.webWorker.onmessage=e=>{const{data:t}=e,n=l.get(t.id);if(!n)return void g.set(t.id,t);"data"===n.type&&l.delete(t.id);const i=n.callback;i&&i(t)},setTimeout((()=>{window.webWorkerMessages&&Array.isArray(window.webWorkerMessages)&&(window.webWorkerMessages.forEach((e=>{e.id&&g.set(e.id,e)})),delete window.webWorkerMessages)})))},80986:function(e,t,n){var i;n.d(t,{K:function(){return i}}),function(e){e[e.Banner=999999]="Banner",e[e.CookieWall=1100]="CookieWall",e[e.Dialog=900]="Dialog",e[e.Flyout=700]="Flyout",e[e.Overlay=600]="Overlay",e[e.Nav=500]="Nav",e[e.Over=300]="Over",e[e.Above=100]="Above",e[e.Default=0]="Default",e[e.Below=-1]="Below",e[e.Buried=-2]="Buried"}(i||(i={}))},2513:function(e,t,n){n.d(t,{j:function(){return o}});var i=n(92421),r=n(21215);function o(){return(0,r.N)()?window.fetch.bind(window):i.br}},30688:function(e,t,n){n.d(t,{C:function(){return r}});var i=n(28951);function r(){return"vp"===i.cX.getQueryParameterByName("reqsrc",location.href)||"1"===i.cX.getQueryParameterByName("vptest",location.href)}},30739:function(e,t,n){n.d(t,{L:function(){return c},j:function(){return d}});var i=n(21215);let r=!1,o=!1,a=!1;function s(){!r&&document.hidden?o=!0:"visible"===document.visibilityState&&(a=!0)}function c(){return o}function d(){return a}(0,i.N)()&&(window.addEventListener&&window.addEventListener("beforeunload",(function(){r=!0})),void 0!==document.hidden&&null!==document.hidden&&document.addEventListener("visibilitychange",s),s())},15598:function(e,t,n){n.d(t,{$o:function(){return a}});var i=n(25036),r=n(21215);class o extends i.C{constructor(){let e=null;if((0,r.N)())try{e=localStorage}catch(e){}super(e)}}function a(){return s}let s=new o},31371:function(e,t,n){n.d(t,{D:function(){return s},z:function(){return c}});var i=n(5302),r=n(21215),o=n(15598),a=n(79678);function s(e){if((0,r.N)()){const t="storageTest";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){(e||"function"==typeof e)&&e({...i.F0_,message:`Local Storage is not defined ${t}`})}}return!1}function c(e,t,n){const i=(0,o.$o)();return i?.supported?()=>{let r;const o=i.getObject(e,null);let s=null;return o&&o.version===t&&null!==o.value?(s=o.value,r=n):(s=n(),r=()=>s),(0,a.C)((()=>i.setObject(e,{version:t,value:r()}))),s}:n}},97906:function(e,t,n){n.d(t,{G:function(){return s},y7:function(){return a}});var i=n(25036),r=n(21215);class o extends i.C{constructor(){let e=null;if((0,r.N)())try{e="sessionStorage"in window&&window.sessionStorage}catch(e){}super(e)}}let a=new o;function s(){return a}},72913:function(e,t,n){n.d(t,{g:function(){return o}});var i=n(5302),r=n(21215);function o(e){if((0,r.N)()){const t="storageTest";try{return window.sessionStorage.setItem(t,t),window.sessionStorage.removeItem(t),!0}catch(t){(e||"function"==typeof e)&&e({...i.EIi,message:`Session Storage is not defined: ${t}`})}}return!1}},25036:function(e,t,n){n.d(t,{C:function(){return o}});var i=n(68052),r=n(42122);class o{get supported(){return!!this.storage}constructor(e){this.storage=e}getItem(e){if(this.supported)return this.storage.getItem(e)}getObject(e,t){const n=this.getItem(e);if(null!=n){const e=(0,i.d)(n);if(null!=e)return e}return t}key(e){if(this.supported&&e>=0)return this.storage.key(e)}keys(){return this.supported?Object.keys(this.storage):[]}setObject(e,t){void 0!==t?this.setItem(e,JSON.stringify(t)):this.removeItem(e)}removeObject(e){const t=this.removeItem(e);if(null!=t)return(0,i.d)(t)}setItem(e,t,n=!0){if(this.supported)try{if(!t)throw"Attempted to store null/undefined value: "+t;this.storage.setItem(e,t)}catch(e){if(!n)throw e;r.k.logError(e)}else if(!n)throw new Error("WebStorage not supported")}get length(){if(this.supported)return this.storage.length}removeItem(e){if(this.supported){const t=this.getItem(e);return this.storage.removeItem(e),t}}clear(){this.supported&&this.storage.clear()}removeSubstringKeys(e){if(!this.supported||!e)return;const t=[];for(let n=0;n<this.storage.length;n++){const i=this.key(n);i&&i.includes(e)&&t.push(i)}for(let e=0;e<t.length;e++)this.removeItem(t[e])}}},26197:function(e,t,n){n.d(t,{_:function(){return i}});const i={backgroundInnerHolder:"backgroundInnerHolder",backgroundOuterHolder:"backgroundOuterHolder",cardAction:"cardAction",complianceHyperlink:"complianceHyperlink",dailyStreaks:"dailyStreaks",feedToggle:"feedToggle",financeGreeting:"financeGreeting",following:"following",myInterests:"myInterests",gaming:"gaming",gridViewFeed:"gridViewFeed",headerSpaceHolder:"headerSpaceHolder",locationGreeting:"locationGreeting",marketSelector:"marketSelector",myFeed:"myFeed",msnFeed:"msnFeed",navBar:"navBar",notificationBell:"notificationBell",nurturingCoachMark:"nurturingCoachMark",office365:"office365",overlayArticleReader:"overlayArticleReader",personalizeButton:"personalizeButton",pillWC:"pillWC",recommendedSites:"recommendedSites",rewardsIcon:"rewardsIcon",rewardsButton:"rewardsButton",rightRailSectionKey:"rightRailSectionKey",scrollableContainer:"scrollableContainer",searchBox:"search-box-edgenext",searchBoxInput:"searchBoxInput",searchBoxVoiceButton:"searchBoxVoiceButton",searchHistory:"searchHistoryEdgeNext",settingsButton:"SettingsButton",settingsCloseButton:"settingsCloseButton",settingsInformationalButton:"settingsInformationalButton",shoppingNav:"shoppingNav",signInButton:"signInButton",singleColumnFeedRoot:"singleColumnFeedRoot",superCoachMark:"superCoachMark",topSites:"topSites",unifiedMobileFeed:"unifiedMobileFeed",weatherNav:"weatherNav",waffle:"waffle",watchNav:"watchNav",waterfallViewFeed:"waterfallViewFeed",welcomeGreeting:"welcomeGreeting",navigationPage:"navigationPage",videoPlayButton:"videoPlayButton",imageEditButton:"imageEditButton",headerGrid:"headerGrid",floatButtonGroupWC:"floatButtonGroupWC",weatherHeroExperience:"weatherHeroExperience",pr2RefreshReminder:"pr2RefreshReminder",widgetsRegion:"widgetsRegion",rubyPage:"rubyPage",rubyContentConsumption:"rubyContentConsumption",casualGamesLandingV2:"casualGamesLandingV2",casualGamesLandingMainComponent:"casualGamesLandingMainComponent"}},98604:function(e,t,n){n.d(t,{FY:function(){return s},b_:function(){return c},h_:function(){return d}});var i=n(42833),r=n(52185);const o=()=>r.Gq.get("__global-element-map_elementMap__",(()=>new Map)),a=()=>r.Gq.get("__global-element-map_waitForElementMap__",(()=>new Map));function s(e,t){if(!t)return;o().set(e,t);const n=a().get(e);n&&n.set(t)}function c(e){return e?o().get(e):null}function d(e){if(!e)return Promise.reject(null);const t=c(e);if(c(e))return Promise.resolve(t);const n=a();if(n.has(e))return n.get(e).getResultAsync();const r=new i.o;return n.set(e,r),r.getResultAsync()}},22680:function(e,t,n){n.d(t,{$w:function(){return g},Dp:function(){return d},FK:function(){return p},G8:function(){return h},SJ:function(){return l},SV:function(){return f},Td:function(){return s},ZI:function(){return m},b0:function(){return S},bs:function(){return y},ij:function(){return o},l4:function(){return a},x_:function(){return v},zp:function(){return u},zw:function(){return c}});var i=n(21215),r=n(16415);function o(){return(0,i.N)()?window.navigator.userAgent:(0,r.sL)().userAgent}function a(){return(0,i.N)()?window.location.href:(0,r.sL)().url.href}function s(){return(0,i.N)()?window.location.hostname:(0,r.sL)().url.hostname}function c(){return(0,i.N)()?window.location.host:(0,r.sL)().url.host}function d(){return(0,i.N)()?window.location.origin:(0,r.sL)().url.origin}function u(){return(0,i.N)()?window.location.search:(0,r.sL)().url.search}function l(){return(0,i.N)()?window.location.protocol:(0,r.sL)().url.protocol}function p(){return(0,i.N)()?window.location.hash:(0,r.sL)().url.hash}function h(){return(0,i.N)()?window.document.cookie:(0,r.sL)().cookie}function g(e){if(!(0,i.N)())throw new Error("getDocumentElementById is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementById(e)}function f(e){if(!(0,i.N)())throw new Error("getDocumentElementsByTagName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByTagName(e)}function m(e){if(!(0,i.N)())throw new Error("getDocumentElementsByClassName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByClassName(e)}function y(){return(0,i.N)()?window.indexedDB:null}function v(){return(0,i.N)()?window.devicePixelRatio:(0,r.sL)().devicePixelRatio}function S(e=void 0,t=void 0,n=!0,r="anonymous",o,a){if(!(0,i.N)())throw new Error("createScriptTag is unsupported server side. This call should be wrapped in canUseDOM().");const s=document.createElement("script");return t&&(s.id=t),o&&s.setAttribute("class",o),a&&(s.onload=a),s.type="text/javascript",e&&(window&&window.trustedTypesURLValidation?s.src=window.trustedTypesURLValidation(e,"scriptSrcUrlPolicy"):s.src=e,s.async=n,s.crossOrigin=r),window&&window.NONCE_ID&&(s.nonce=window.NONCE_ID),s}},21215:function(e,t,n){function i(){return!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv)}n.d(t,{N:function(){return i}})},52185:function(e,t,n){n.d(t,{Gq:function(){return r},TG:function(){return o}});let i=new Map;const r=Object.freeze({set(e,t){return i.set(e,t),this},get:function(e,t){let n=i.get(e);return void 0===n&&t&&(n=t(),i.set(e,n)),n},clear(){i.clear()},delete:e=>i.delete(e),has:e=>i.has(e)});function o(e){const t=Symbol();return{get current(){return r.get(t,(()=>e))},set current(e){r.set(t,e)}}}},22170:function(e,t,n){n.d(t,{U1:function(){return l},WG:function(){return u},oN:function(){return p},pn:function(){return d},sR:function(){return h}});var i=n(52185);let r=0;function o(){return r>1e8&&(r=0),"__mlv-"+r++}const{get:a,set:s,delete:c}=i.Gq,d=()=>y(g()),u=e=>y(f(e));function l(){const e=g();return y(e,{call:(...t)=>e.get()?.(...t)})}function p(){const e=f((()=>new Map));return y(m(e),{getObj:()=>e.get(),set:(t,n)=>e.get().set(t,n),get:t=>e.get().get(t)})}function h(){const e=f((()=>new Set));return y(m(e),{getObj:()=>e.get(),add:t=>e.get().add(t)})}function g(){const e=o();return{get:()=>a(e),set:t=>(s(e,t),t),unset:()=>{c(e)}}}function f(e){const t=o();return{get:()=>a(t,e),unset:()=>{c(t)}}}function m(e){const t=()=>e.get();return{has:e=>t().has(e),get size(){return t().size},delete:e=>t().delete(e),unset:()=>e.unset()}}function y(e,t){return Object.freeze(t?Object.assign(e,t):e)}},94660:function(e,t,n){n.d(t,{Cw:function(){return a},cs:function(){return o},j4:function(){return s},mx:function(){return r}});var i=n(77072);const r="rd",o="OSATE",a="OSAT",s={ver:"0.1.0",spec:{innerWidth:{clientValue:()=>window.innerWidth},innerHeight:{clientValue:()=>window.innerHeight},outerWidth:{clientValue:()=>window.outerWidth},breakpoint:{clientValue:()=>function(e,t){for(let n=t.length-1;n>=0;n--)if(e>=t[n])return n}(window.innerWidth,i.A)},locationHash:{clientValue:()=>window.location.hash},locationHref:{clientValue:()=>window.location.href},locationHost:{clientValue:()=>window.location.host},locationHostName:{clientValue:()=>window.location.hostname},locationOrigin:{clientValue:()=>window.location.origin},locationPathName:{clientValue:()=>window.location.pathname},locationProtocol:{clientValue:()=>window.location.protocol},locationSearch:{clientValue:()=>window.location.search},screenTop:{clientValue:()=>window.screenTop},screenY:{clientValue:()=>window.screenY},canUseCssGrid:{clientValue:()=>window.CSS&&window.CSS.supports&&CSS.supports("display","grid")||!1},devicePixelRatio:{clientValue:()=>window.devicePixelRatio},language:{clientValue:()=>document.documentElement.lang},direction:{clientValue:()=>document.documentElement.dir}}}},77072:function(e,t,n){n.d(t,{A:function(){return i}});const i=[0,656,980,1304]},81489:function(e,t,n){n.d(t,{h:function(){return r}});var i=n(21215);function r(e,t={bindMethod:!0,forceLazy:!1}){return"object"!=typeof n.g||!n.g.TEST_ENV||n.g.TEST_SINGLETONPROXY||t.forceLazy?(0,i.N)()&&!t.forceLazy?e.getInstance():new Proxy(e,{get(e,n,i){const r=e.getInstance(),o=Reflect.get(r,n,r);return t.bindMethod&&"function"==typeof o?o.bind(r):o},set(e,t,n,i){const r=e.getInstance();return Reflect.set(r,t,n,r)}}):e.getInstance()}},16415:function(e,t,n){n.d(t,{sL:function(){return u}});var i=n(52185),r=n(94660);const o="__RequestDataInstance__";class a{constructor(e,t){if(this.url=new URL(e.href),this.innerHeight=e.innerHeight,this.devicePixelRatio=e.devicePixelRatio,this.canUseCssGrid=e.canUseCssGrid,this.requestId=e.requestId,this.cookie=e.cookie,this.referer=e.referer,this.userAgent=e.userAgent,this.clientData=e.clientData,this.vpCetoToken=e.vpCetoToken,this.oneServiceHeaders=c(e.oneServiceHeaders)||{},this.isPssrMode=t,t){const e=s(r.cs,this.cookie),t=!!e&&"1"===e,n=s(r.Cw,this.cookie);if(t&&n||!e&&!n)return this.msalAuthReady=!0,void(n&&(this.oneServiceHeaders.Authorization=`Bearer ${n}`));this.msalAuthReady=!1,this.pssrRejectedReason=e&&!t?"interactiveLogin":e&&!n?"missOSAT":"missOSATE"}}static getInstance(){const e=i.Gq.get(o);return e||(n.g.TEST_ENV?d({href:"http://localhost:8080/",innerHeight:768,devicePixelRatio:1,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:"",vpCetoToken:""}):d({href:"http://localhost:8080/",innerHeight:0,devicePixelRatio:0,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:"",vpCetoToken:""}))}static resetInstance(e,t=!1){const n=new a(e,t);return i.Gq.set(o,n),n}}function s(e,t){if(t&&e){const n=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t);return n&&n.length>1?n[1]:null}return null}function c(e){try{if(e)return JSON.parse(e)}catch(e){}}const d=a.resetInstance,u=()=>a.getInstance()},80293:function(e,t,n){n.d(t,{v:function(){return o}});var i=n(5302),r=n(44132);class o extends Map{constructor(e,t={}){super(),this.identifier=e,this.subscriptions=new Map,t.initialState&&Object.keys(t.initialState).forEach((e=>{super.set(e,t.initialState[e])}))}set(e,t){super.set(e,t);const n=this.subscriptions.get(e);return n&&n.size?(n.forEach((n=>{try{n&&n(t)}catch(t){r.M0.sendAppErrorEvent({...i.fG_,message:"Failed to execute subscription callback",pb:{...i.fG_.pb,customMessage:`Error executing subscription callback for key [${e}]`,instanceId:this.identifier,errorMessage:t&&t.message}})}})),this):this}subscribe(e,t,n={}){if(!t||"function"!=typeof t)return;let i=this.subscriptions.get(e);i||(this.subscriptions.set(e,new Set),i=this.subscriptions.get(e)),i.add(t),this.has(e)&&!1!==n.fireImmediately&&t(this.get(e)),n.signal&&n.signal.addEventListener("abort",(()=>{this.unsubscribe(e,t)}))}unsubscribe(e,t){const n=this.subscriptions.get(e);n&&n.delete(t)}reset(){this.clear(),this.subscriptions.clear()}}},12686:function(e,t,n){n.d(t,{J:function(){return r}});var i=n(24709);class r{static#e=this.updateLayout=new i.C("updateLayout");static#t=this.initialize=new i.C("initialize")}},43301:function(e,t,n){n.d(t,{j:function(){return r}});var i=n(52);function r(e,t,n,r){if(!n||r)return"custom";const o=i.Wi.focused,a=i.Wi.informational,s=i.Wi.inspirational;return e===o.feeds_position&&t===o.current_background_image_type?"focused":e===a.feeds_position&&t===a.current_background_image_type?"informational":e===s.feeds_position&&t===s.current_background_image_type?"inspirational":"custom"}},42074:function(e,t,n){n.d(t,{A$:function(){return r},FQ:function(){return i},FT:function(){return o},Jx:function(){return s},cN:function(){return c}});const i=78,r=50;let o;const a=[];function s(e){a.push(e)}function c(e){if(e!==o){o=e;for(const t of a)t(e)}}},52:function(e,t,n){n.d(t,{$B:function(){return f},$N:function(){return y},$_:function(){return v},Ab:function(){return w},F5:function(){return k},L_:function(){return T},MT:function(){return g},Uq:function(){return o},VE:function(){return u},Wi:function(){return A},YZ:function(){return I},Z3:function(){return l},_9:function(){return P},_U:function(){return h},fg:function(){return b},gp:function(){return a},iz:function(){return i},mT:function(){return C}});var i,r,o,a,s,c,d,u,l,p=n(98130);!function(e){e[e.MicrosoftNews=0]="MicrosoftNews",e[e.Office365=1]="Office365",e[e.Gaming=2]="Gaming",e[e.Play=3]="Play",e[e.NavigationPage=4]="NavigationPage",e[e.Following=5]="Following"}(i||(i={})),function(e){e.Enforced="ENFORCED",e.Recommended="RECOMMENDED"}(r||(r={})),function(e){e[e.focused=0]="focused",e[e.inspirational=1]="inspirational",e[e.informational=2]="informational",e[e.custom=3]="custom"}(o||(o={})),function(e){e[e.always=0]="always",e[e.peek=1]="peek",e[e.headingsonly=2]="headingsonly",e[e.onscroll=3]="onscroll",e[e.off=4]="off"}(a||(a={})),function(e){e.focused="focused",e.inspirational="inspirational",e.informational="informational",e.custom="custom"}(s||(s={})),function(e){e.bing="bing",e.custom="custom",e.iris="iris",e.off="off",e.theme="theme",e.enterprise="enterprise",e.imageAndVideo="imageAndVideo",e.hero="hero"}(c||(c={})),function(e){e[e.allowAll=0]="allowAll",e[e.disableImageOfTheDay=1]="disableImageOfTheDay",e[e.disableCustomImage=2]="disableCustomImage",e[e.disableAll=3]="disableAll"}(d||(d={})),function(e){e[e.off=0]="off",e[e.onerow=1]="onerow",e[e.tworows=2]="tworows",e[e.top=3]="top"}(u||(u={})),function(e){e.off="off",e.onerow="onerow",e.tworows="tworows",e.top="top"}(l||(l={}));const h={0:"off",1:"onerow",2:"tworows",3:"top"},g={0:"allowAll",1:"disableImageOfTheDay",2:"disableCustomImage",3:"disableAll"},f={off:0,onerow:1,tworows:2,threerows:4,top:3};var m;!function(e){e.off="off",e.onerow="onerow",e.tworows="tworows",e.threerows="threerows"}(m||(m={}));const y={off:0,tworows:1,threerows:2,onerow:3},v={0:"off",1:"tworows",2:"threerows",3:"onerow"};var S,w,b;!function(e){e.off="off",e.on="on"}(S||(S={})),function(e){e.default="default",e.user="user-2",e.wpo="wpo",e.user_old="user"}(w||(w={})),function(e){e.Unknown="0",e.EdgeFlight="1",e.UserChoices="2",e.InvalidFeedLayout="3",e.NoRecommendedData="4",e.NoNeedToPromote="5"}(b||(b={}));const C={off:"off",on:"on"},T={backgroundImageTypePolicy:0,currentBackgroundImageType:"imageAndVideo",currentLayout:"inspirational",showQuickBrief:!0,hideDefaultTopSites:!1,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:"headingsonly",selectedQuickLinksDisplaySetting:"onerow",enableWidgetsRegion:!1},k={0:"focused",1:"inspirational",2:"informational",3:"custom"},P={backgroundImage:"ntp.background_image",backgroundImageTypePolicy:"ntp.background_type_blocked_by_policy",currentBackgroundImageType:"ntp.background_image_type",currentBackgroundImageOption:"ntp.background_image",hideDefaultTopSites:"ntp.hide_default_top_sites",customBackgroundImageInfo:"ntp.local_background_image",layout:"ntp.layout_mode",quickLinksDisplaySetting:"ntp.quick_links_options",imageOfTheDay:"ntp.show_image_of_day",feeds:"ntp.news_feed_display",greeting:"ntp.show_greeting",showSettings:"ntp.show_settings",showQuickBrief:"ntp.show_quick_brief",verticalTabsCollapsed:"edge.vertical_tabs.collapsed",verticalTabsOpened:"edge.vertical_tabs.opened",singleColumnEnabled:"ntp.single_column.enabled",userNurturingUpdated:"ntp.user_nurturing",hasUserSeenNewFre:"new_device_fre.has_user_seen_new_fre",defaultBrowserSettingEnabled:"browser.default_browser_setting_enabled",showAppLauncher:"ntp.enable_app_launcher",userChoices:"ntp.record_user_choices",selectedFeedPivot:"ntp.selected_feed_pivot",layoutModeInstrumentation:"instrumentation.ntp.layout_mode",newsFeedDsiplayInstrumentation:"instrumentation.ntp.news_feed_display",gamerModeEnabled:"browser.gamer_mode_enabled",codexBingUpsellEnabled:"ntp.enable_bing_chat_by_policy",companyLogoEnabled:"ntp.enable_company_logo_by_policy",companyLogoBackplateColor:"ntp.company_logo_backplate_color",windowsIndexerPromotedTopSites:"ntp.promoted_top_sites",minVisitAffiliateSites:"ntp.min_visit_affiliate_sites",widgetsRegion:"ntp.enable_widgets_region",widgetsInPartialEnabled:"ntp.enable_wid_in_partial_view"},A=(p.jG.CurrentRequestTargetScope&&p.jG.CurrentRequestTargetScope.audienceMode,{focused:{feeds_position:"headingsonly",current_background_image_type:"off",greeting:!0,hide_promoted_links:!1},inspirational:{feeds_position:"peek",current_background_image_type:"imageAndVideo",greeting:!0,hide_promoted_links:!1},informational:{feeds_position:"always",current_background_image_type:"imageAndVideo",greeting:!0,hide_promoted_links:!1}}),I={currentBackgroundImageType:A.informational.current_background_image_type,currentLayout:"informational",hideDefaultTopSites:A.informational.hide_promoted_links,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:A.informational.feeds_position,greetingEnabled:A.informational.greeting,enableWidgetsRegion:!1}},40744:function(e,t,n){n.d(t,{V1:function(){return i}});function i(){return!0===window.__peregrine_litePVSent}(new Date).getTime()},24646:function(e,t,n){n.d(t,{K:function(){return a}});var i=n(242),r=n(44132),o=n(40744);function a(e,t,n,a,s){if((0,o.V1)())r.M0.getPageMetadata().updateContract();else{(0,i.Ou)().TimeToSendPageView=Math.round(performance.now()),r.M0.sendPageView(e,t,n,a,s),window.__peregrine_normalPVSent=!0}}},17602:function(e,t,n){n.d(t,{xI:function(){return i}});const i=()=>{const[e]=performance.getEntriesByType("navigation");if(!e)return!1;if("cache"===e.deliveryType||200===e.responseStatus&&0===e.transferSize)return!0;const t=e.serverTiming;return!(!t||!t.length)&&!!t.find((e=>e&&"cache"===e.name))}},64995:function(e,t,n){n.d(t,{l:function(){return p}});var i=n(33779),r=n(5302),o=n(98130),a=n(15598),s=n(19625),c=n(44132),d=n(8830),u=n(52211),l=n(22735);async function p(e){if(!window.navigator.cookieEnabled||"ru-ru"===o.jG.CurrentMarket)return;await(0,u.rr)();let t="";try{t=await async function(){const e=await d.N.getPdpUserPreference(!0,void 0,void 0,"market-consolidation");if(!e||!e.value||0===e.value.length)return"";const t=e.value[0];if(!t)return"";return t.userSettings?.preferredMarket??""}()}catch{return void(0,i.H)(r.Xa2,"There was an error getting preferredMarket from PDP services.")}const n=function(){let e="";const t=(0,l.TU)(),n=(0,s.ej)(t);if(!n)return"";if("homePage"===o.jG.AppType)return n;const i=JSON.parse(n);i&&i.m&&(e=i.m);return e}();"edgeChromium"!=o.jG.AppType&&(e=l.r4);let p=!1,h="";if(h=(0,a.$o)().getItem("marketConsolidationTmpl"),t)n?t!==n?(h=`MarketConsolidationSync_Mismatch_${t}_${n}`,e(t),(0,a.$o)().setObject("showMarketRoamingCoachmark",!0),p=!0,(0,i.H)(r.i05,`Market missmatch. Server market: ${t}, Client market: ${n}`)):t!==n||h||(h="MarketConsolidationSync_Match",p=!0):(h="MarketConsolidationSync_Client_"+t,e(t),p=!0);else if(n){p=!0;await d.N.updateMarketPreference(n)?h="MarketConsolidationSync_Server_"+n:(p=!1,(0,i.H)(r.CTH,"PDP Service failed to update market preference from MarketConsolidation",`market: ${n}`))}h&&(0,a.$o)().setItem("marketConsolidationTmpl",h),(p||h)&&(c.M0.addOrUpdateTmplProperty("MarketConsolidationSync",p?"1":"0"),c.M0.addOrUpdateTmplProperty(h,"1"))}},22735:function(e,t,n){n.d(t,{TU:function(){return v},r4:function(){return y},ag:function(){return m}});var i=n(33779),r=n(5302),o=n(49494),a=n(98130),s=n(12812),c=n(44132);const d="ntps",u="marketPref",l=182;var p=n(8830),h=n(22624),g=n(19625);const f=["windowsShell","windowsShellV2","winWidgets"];async function m(e,t=(()=>{})){const n=a.jG.AppType;p.N.updateMarketPreference(e).then((async c=>{c||(0,i.H)(r.CTH,"PDP Service failed to update market preference from CommonSettings",`market: ${e}`),f.includes(n)?t():(await y(e),function(e){const t=a.jG.AppType,n=a.jG.CurrentMarket,i=location.href.includes(`/${n}`);if("edgeChromium"==t)return function(e){const t=`/${a.jG.CurrentMarket}/`;if(!location.pathname.startsWith(t))return void(0,s.Z)();const n=new URL(location.href);n.pathname=n.pathname.replace(t,`/${e}/`),(0,s.Z)({newUrl:n.href})}(e),void(0,o.yV)(2);i?location.href=location.href.replace(`/${n}`,`/${e}`):location.assign(`${location.origin}/${e}${location.search}`)}(e))}))}async function y(e,t){const[n,i,r]=function(e,t){const n=`.${a.jG.HostPage.topDomain}`,i=v(t),r="homePage"===a.jG.AppType||t?e:JSON.stringify({m:e});return[n,i,r]}(e,t),o=a.jG.AppType;(0,g.sq)(i,"",-1),(0,g.sq)(i,"",-1,void 0,"/edge"),(0,g.sq)(i,r,l,n,"/"),"edgeChromium"==o&&(await h.L.savePreferenceSetting(i,{setting:i,source:"ntp",timestamp:(new Date).getTime(),value:r}),c.M0.addOrUpdateTmplProperty("marketSetToExplicitSelection","1")),t||"homePage"==a.jG.AppType||(0,g.ej)(u)&&y(e,!0)}function v(e){return"homePage"===a.jG.AppType||e?u:d}},34254:function(e,t,n){n.d(t,{Qz:function(){return b},bn:function(){return C},v:function(){return T},FQ:function(){return m},gy:function(){return h},S0:function(){return l},F_:function(){return g},Qm:function(){return f}});var i,r=n(91661);!function(e){e[e.StandardEventBasedDeferral=0]="StandardEventBasedDeferral",e[e.CustomEventBasedDeferral=1]="CustomEventBasedDeferral"}(i||(i={}));var o=n(93441),a=n(38961),s=n(523),c=n(77016),d=n(56973);const u={filter:(e,t)=>e.filter((e=>t in e))};function l(){return c._.getInstance().rootReducer.connector(s.Dw)}function p(e){const t=l();if(!t)return;const n=t.getCurrentState().perExperienceMilestones,i=n&&n.get(e);let r;return i&&(r=i.perInstanceMilestones.get(a.t)),r}function h(e){const t=p(e);if(!t||function(e){let t;switch(e.loadAfter.eventType){case r.Gg.pageVisuallyReady:t=function(){const e=l();if(!e)return!1;const{pageCompleteTiming:t}=e.getCurrentState();return Boolean(t&&t.endTime!==a.n)}();break;case r.Gg.aboveTheFoldVisuallyReady:t=y();break;case r.Gg.belowTheFoldTransitionStart:t=v();break;case r.Gg.hydrationComplete:t=w();break;default:t=(0,d.c)(e.loadAfter.experienceType,e.loadAfter.eventType)}return t}(t))return null;if(t.shouldLoad&&t.loadAfter){return{deferralType:S(t.loadAfter),shouldResolve:t.shouldLoad}}return null}function g(){return l()?y()?Promise.resolve():new Promise((e=>{o.g.updateAboveTheFoldVisuallyReady.registerObserver((t=>{e()}))})):Promise.resolve()}function f(){return l()?v()?Promise.resolve():new Promise((e=>{o.g.updateBelowTheFoldTransitionStart.registerObserver((t=>{e()}))})):Promise.resolve()}async function m(e){const t=l();if(!t)return;const n=t.getCurrentState().plugins;if(!n||0===n.length)return;const i=u.filter(n,e);for(const t of i)void 0!==t[e]&&await t[e].call(t)}function y(){const e=l();if(!e)return!1;const{aboveTheFoldVisuallyReady:t}=e.getCurrentState();return Boolean(t&&t.endTime!==a.n)}function v(){const e=l();return!!e&&e.getCurrentState().belowTheFoldTransitionStart}function S(e){return e.eventType in r.ic?i.CustomEventBasedDeferral:i.StandardEventBasedDeferral}function w(){const e=l();return!!e&&e.getCurrentState().hydrationComplete}function b(e,t,n,i){return{deferralInfo:e,experienceType:t,experienceGroup:n,experienceInstance:i}}function C(e,t,n,i){return{experienceType:e,currentState:t,experienceGroup:n,experienceInstance:i}}function T(e,t,n,i,r){return{experienceType:e,experienceGroup:t,experienceInstance:n,startTime:i,endTime:r}}},93441:function(e,t,n){n.d(t,{g:function(){return o}});var i=n(24709);class r{constructor(){this.updateHydrationComplete=new i.C("updateHydrationRenderComplete"),this.updateRiverHydrationComplete=new i.C("updateRiverHydrationRenderComplete"),this.updateAboveTheFoldVisuallyReady=new i.C("updateAboveTheFoldVisuallyReady"),this.updateBelowTheFoldTransitionStart=new i.C("updateBelowTheFoldTransitionStart"),this.updateExperienceLoadDeferralState=new i.C("updateExperienceLoadDeferralState"),this.updateExperienceCurrentState=new i.C("updateExperienceCurrentState"),this.updateExperiencePublicState=new i.C("updateExperiencePublicState"),this.updateExperienceRenderDeferralState=new i.C("updateExperienceRenderDeferralState"),this.updateInitTiming=new i.C("UpdateInitTiming"),this.updatePageComplete=new i.C("updatePageCompleteTiming"),this.updateRenderTiming=new i.C("UpdateRenderTiming"),this.updateVisuallyReadyTiming=new i.C("UpdateVisuallyReadyTiming"),this.updateStartLoadingTiming=new i.C("UpdateStartLoadingTiming"),this.updateMediaContentReadyTiming=new i.C("UpdateMediaContentReadyTiming"),this.updateDomCompleteTiming=new i.C("UpdateDomCompleteTiming"),this.updateMilestonePlugins=new i.C("updateMilestonePlugin")}resetInstance(){this.updateHydrationComplete.unregisterObservers(),this.updateRiverHydrationComplete.unregisterObservers(),this.updateAboveTheFoldVisuallyReady.unregisterObservers(),this.updateBelowTheFoldTransitionStart.unregisterObservers(),this.updateExperienceLoadDeferralState.unregisterObservers(),this.updateExperienceCurrentState.unregisterObservers(),this.updateExperiencePublicState.unregisterObservers(),this.updateExperienceRenderDeferralState.unregisterObservers(),this.updateInitTiming.unregisterObservers(),this.updatePageComplete.unregisterObservers(),this.updateRenderTiming.unregisterObservers(),this.updateVisuallyReadyTiming.unregisterObservers(),this.updateDomCompleteTiming.unregisterObservers(),this.updateMilestonePlugins.unregisterObservers(),o=new r}}let o=new r},53447:function(e,t,n){n.d(t,{m:function(){return g}});var i=n(93441),r=n(91661),o=n(34254),a=n(91682),s=n(56973),c=n(39607);function d(e,t){e.registerObserver((e=>{((e.params||[])[0]||[]).forEach((({deferralInfo:e,experienceType:n})=>{e&&n&&function(e,t,n){if(!e||!t||!(t.eventType in r.Gg)||!t.experienceType&&!t.experienceGroup)return;const{eventType:i,experienceType:o}=t,d=o||t.experienceGroup,u=s.v.get(d);if(u&&u.referencedDependentsDeferralMap){if(u.currentState<i){const t=u.referencedDependentsDeferralMap.get(i);t?t.size>0&&t.set(e,n):u.referencedDependentsDeferralMap.set(i,new Map([[e,n]]))}}else s.v.set(d,{currentState:a.D.notStarted,referencedDependentsDeferralMap:new Map([[i,new Map([[e,n]])]])}),o&&(0,c.w)(o,!0)}(n,e,t)}))}))}function u(){d(i.g.updateExperienceLoadDeferralState,a.D.loadDeferred),d(i.g.updateExperienceRenderDeferralState,a.D.renderDeferred),i.g.updateExperienceCurrentState.registerObserver((e=>{const t=[];if(((e.params||[])[0]||[]).forEach((({experienceType:e,currentState:n})=>{if(!e||!n)return;const i=s.v.get(e);if(!i)return;i.currentState=n;const c=r.ez.get(n),d=c&&i.referencedDependentsDeferralMap.get(c);d&&d.forEach(((e,n)=>{if(!n)return;const i=e===a.D.loadDeferred?a.D.resolvedForLoad:a.D.resolvedForRender;t.push((0,o.bn)(n,i))}))})),t.length){const e=(0,o.S0)();e&&i.g.updateExperienceCurrentState.getActionSender(e).send(t)}}))}var l=n(18875);let p=new Map;(0,l.U)((()=>{p=new Map}));var h=n(30666);class g extends h.e{constructor(e,t,n,r,s,c,d){super(e,t,n,r,s,c,d),this.startObservers(),i.g.updateInitTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.initialized))),i.g.updateRenderTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.rendered))),i.g.updateVisuallyReadyTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.visuallyReady))),i.g.updateStartLoadingTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.startLoading))),i.g.updateMediaContentReadyTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.mediaContentReady))),i.g.updateDomCompleteTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.domComplete))),i.g.updateExperienceLoadDeferralState.registerObserver((e=>{const t=((e.params||[])[0]||[]).map((({experienceType:e,experienceGroup:t,experienceInstance:n})=>(0,o.bn)(e,a.D.loadDeferred,t,n)));t.length&&i.g.updateExperienceCurrentState.getActionSender(this).send(t)})),i.g.updateExperienceRenderDeferralState.registerObserver((e=>{const t=((e.params||[])[0]||[]).map((({experienceType:e,experienceGroup:t,experienceInstance:n})=>(0,o.bn)(e,a.D.renderDeferred,t,n)));t.length&&i.g.updateExperienceCurrentState.getActionSender(this).send(t)}))}startObservers(){u(),i.g.updateExperienceCurrentState.registerObserver((e=>{((e.params||[])[0]||[]).forEach((e=>{e.currentState===a.D.domComplete&&p.forEach(((t,n)=>{let i=!0;const{DomCompleteDependencies:r,DomCompleteCallback:o}=t;for(const t of r.values()){const{dependencyId:{experienceType:n,experienceGroup:r,experienceNamespace:o}}=t;if(n&&n!==e.experienceType||r&&r!==e.experienceGroup||o&&o!==e.experienceInstance||(t.milestoneReached=!0),!t.milestoneReached){i=!1;break}}i&&(t.dependenciesMet=!0,o&&(p.delete(n),o()))}))}))}))}updateExperienceTiming(e,t){e&&e.endTime&&i.g.updateExperienceCurrentState.getActionSender(this).send([(0,o.bn)(e.experienceType,t,e.experienceGroup,e.experienceInstance)])}}},38961:function(e,t,n){n.d(t,{n:function(){return r},t:function(){return i}});const i="default",r=-1},17280:function(e,t,n){n.d(t,{c:function(){return w}});var i,r=n(38947),o=n(93441);!function(e){e[e.domComplete=0]="domComplete",e[e.error=1]="error",e[e.initialized=2]="initialized",e[e.rendered=3]="rendered",e[e.visuallyReady=5]="visuallyReady",e[e.startLoading=6]="startLoading",e[e.mediaContentReady=7]="mediaContentReady"}(i||(i={}));var a=n(91682),s=n(42122);function c(){return g(o.g.updatePageComplete,(()=>!0))}function d(){return g(o.g.updateAboveTheFoldVisuallyReady,(()=>!0))}function u(){return g(o.g.updateBelowTheFoldTransitionStart,(()=>!0))}function l(e){return h(e,a.D.resolvedForLoad)}function p(e){return h(e,a.D.resolvedForRender)}function h(e,t){return g(o.g.updateExperienceCurrentState,(n=>((n.params||[])[0]||[]).some((n=>n.currentState===t&&n.experienceType===e))))}function g(e,t){return new Promise(((n,i)=>{try{e.registerObserver((e=>{t(e)&&n(!0)}))}catch(e){s.k.logError(e),i(!1)}}))}function f(){return new Promise(((e,t)=>{try{o.g.updateHydrationComplete.registerObserver((()=>{e(!0)}))}catch(e){s.k.logError(e),t(!1)}}))}var m=n(38961),y=n(91661);class v{static#e=this.invalidMilestoneModelMessage="Invalid Argument: milestoneModel";static updateExperienceCurrentState(e,t,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,i,r);o&&(o.currentState=n)}static updateMilestoneTiming(e,t,n,r,o,s,c){const d=this.getOrCreateExperienceInstanceMilestone(e,t,s,c);let u;if(d)switch(n){case i.initialized:u=d.initializationTime;break;case i.rendered:u=d.renderTime;break;case i.visuallyReady:u=d.visuallyReadyTime;break;case i.domComplete:u=d.domCompleteTime;break;case i.startLoading:return void(u=d.startLoadingTime);case i.error:return void(d.currentState=a.D.error);case i.mediaContentReady:u=d.mediaContentReadyTime;break;default:throw new Error("Invalid Argument: Unrecognized eventType")}if(!u)throw new Error(`Invalid experience time object while processing timing update for ${n}`);r&&(u.startTime=r),o&&(u.endTime=o)}static updateHydrationComplete(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);e.hydrationComplete=t}static updateBelowTheFoldTransitionStart(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);e.belowTheFoldTransitionStart=t}static updateMilestonePlugin(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);e.plugins&&0!==e.plugins.length?e.plugins=e.plugins.concat(t):e.plugins=t}static updateAboveTheFoldVisuallyReady(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);if(!e.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");e.aboveTheFoldVisuallyReady.startTime=0,e.aboveTheFoldVisuallyReady.endTime=t}static updatePageComplete(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);if(!e.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");e.pageCompleteTiming.startTime=0,e.pageCompleteTiming.endTime=t}static deferExperienceLoad(e,t,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,i,r);o.loadAfter={experienceType:n.experienceType,experienceGroup:n.experienceGroup,eventType:n.eventType},v.updateLoadDeferralHandler(o,t)}static deferExperienceRender(e,t,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,i,r);o.renderAfter={experienceType:n.experienceType,experienceGroup:n.experienceGroup,eventType:n.eventType},v.updateRenderDeferralHandler(o,t)}static getOrCreateExperienceMilestone(e,t,n){if(!t)throw new Error("Invalid Argument: experienceType");e||(e={aboveTheFoldVisuallyReady:void 0,pageCompleteTiming:void 0,perExperienceMilestones:void 0}),e.perExperienceMilestones||(e.perExperienceMilestones=new Map);let i=e.perExperienceMilestones.get(t);return i||(i={experienceType:t,experienceGroup:n,perInstanceMilestones:new Map},e.perExperienceMilestones.set(t,i)),i}static getOrCreateExperienceInstanceMilestone(e,t,n,i){const r=this.getOrCreateExperienceMilestone(e,t,n),o=i||m.t;let s=r.perInstanceMilestones.get(o);return s||(s={currentState:a.D.notStarted,initializationTime:{endTime:m.n,startTime:m.n},loadAfter:{experienceType:void 0,eventType:void 0},renderAfter:{experienceType:void 0,eventType:void 0},renderTime:{endTime:m.n,startTime:m.n},visuallyReadyTime:{endTime:m.n,startTime:m.n},startLoadingTime:{endTime:m.n,startTime:m.n},mediaContentReadyTime:{endTime:m.n,startTime:m.n},domCompleteTime:{endTime:m.n,startTime:m.n}},r.perInstanceMilestones.set(o,s)),s}static updateLoadDeferralHandler(e,t){switch(e.loadAfter.eventType){case y.Gg.pageVisuallyReady:e.shouldLoad=c;break;case y.Gg.aboveTheFoldVisuallyReady:e.shouldLoad=d;break;case y.Gg.belowTheFoldTransitionStart:e.shouldLoad=u;break;case y.Gg.hydrationComplete:e.shouldLoad=f;break;default:return void(e.shouldLoad=l.bind(this,t))}}static updateRenderDeferralHandler(e,t){switch(e.renderAfter.eventType){case y.Gg.aboveTheFoldVisuallyReady:e.shouldRender=d;break;case y.Gg.belowTheFoldTransitionStart:e.shouldRender=u;break;case y.Gg.hydrationComplete:e.shouldRender=f;break;default:return void(e.shouldRender=p.bind(this,t))}}}var S=n(85663);class w{reduce(e,t){let n;if(n=e?{...e}:{aboveTheFoldVisuallyReady:{endTime:m.n,startTime:m.n},pageCompleteTiming:{endTime:m.n,startTime:m.n},perExperienceMilestones:new Map},!t)return n;let i=!1;return i=i||this.handlePageLevelActions(i,t,n),i=i||this.handleExperienceLevelActions(i,t,n),n||e}handleExperienceLevelActions(e,t,n){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e||r.G.handleAction(t,o.g.updateInitTiming,(e=>this.updateTiming(i.initialized,n,e))))||r.G.handleAction(t,o.g.updateRenderTiming,(e=>this.updateTiming(i.rendered,n,e))))||r.G.handleAction(t,o.g.updateVisuallyReadyTiming,(e=>this.updateTiming(i.visuallyReady,n,e))))||r.G.handleAction(t,o.g.updateStartLoadingTiming,(e=>this.updateTiming(i.startLoading,n,e))))||r.G.handleAction(t,o.g.updateMediaContentReadyTiming,(e=>this.updateTiming(i.mediaContentReady,n,e))))||r.G.handleAction(t,o.g.updateDomCompleteTiming,(e=>this.updateTiming(i.domComplete,n,e))))||r.G.handleAction(t,o.g.updateExperienceLoadDeferralState,(e=>e.forEach((({deferralInfo:e,experienceType:t,experienceGroup:i,experienceInstance:r})=>{e&&t&&v.deferExperienceLoad(n,t,e,i,r)})))))||r.G.handleAction(t,o.g.updateExperienceRenderDeferralState,(e=>e.forEach((({deferralInfo:e,experienceType:t,experienceGroup:i,experienceInstance:r})=>{e&&t&&v.deferExperienceRender(n,t,e,i,r)})))))||r.G.handleAction(t,o.g.updateExperienceCurrentState,(e=>e.forEach((({experienceType:e,currentState:t,experienceGroup:i,experienceInstance:r})=>{t&&e&&v.updateExperienceCurrentState(n,e,t,i,r)})))))||r.G.handleAction(t,o.g.updateExperiencePublicState,(e=>{}))}handlePageLevelActions(e,t,n){return e=(e=(e=(e=(e=e||r.G.handleAction(t,o.g.updatePageComplete,(e=>v.updatePageComplete(n,e))))||r.G.handleAction(t,o.g.updateAboveTheFoldVisuallyReady,(e=>v.updateAboveTheFoldVisuallyReady(n,e))))||r.G.handleAction(t,o.g.updateBelowTheFoldTransitionStart,(e=>{(0,S.isNullOrUndefined)(e)||v.updateBelowTheFoldTransitionStart(n,e)})))||r.G.handleAction(t,o.g.updateHydrationComplete,(()=>{v.updateHydrationComplete(n,!0)})))||r.G.handleAction(t,o.g.updateMilestonePlugins,(e=>{e.length>0&&v.updateMilestonePlugin(n,e)}))}updateTiming(e,t,n){const{startTime:i,endTime:r,experienceType:o,experienceGroup:a,experienceInstance:s}=n;v.updateMilestoneTiming(t,o,e,i,r,a,s)}}},56973:function(e,t,n){n.d(t,{c:function(){return o},v:function(){return r}});var i=n(18875);let r=new Map;function o(e,t){const n=r.get(e);return!n||n.currentState>=t}(0,i.U)((()=>{r=new Map}))},39607:function(e,t,n){n.d(t,{w:function(){return o}});var i=n(18875);let r={};function o(e,t){return null!=t?r[e]=t:r[e]}(0,i.U)((()=>{r={}}))},91661:function(e,t,n){n.d(t,{Gg:function(){return r},ez:function(){return a},ic:function(){return i}});var i,r,o=n(91682);!function(e){e[e.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart"}(i||(i={})),function(e){e[e.startLoading=14]="startLoading",e[e.loaded=4]="loaded",e[e.rendered=8]="rendered",e[e.domComplete=10]="domComplete",e[e.visuallyReady=11]="visuallyReady",e[e.mediaContentReady=15]="mediaContentReady",e[e.aboveTheFoldVisuallyReady=16]="aboveTheFoldVisuallyReady",e[e.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart",e[e.hydrationComplete=1]="hydrationComplete",e[e.pageVisuallyReady=2]="pageVisuallyReady"}(r||(r={}));const a=new Map([[o.D.loaded,r.loaded],[o.D.rendered,r.rendered],[o.D.domComplete,r.domComplete],[o.D.visuallyReady,r.visuallyReady],[o.D.mediaContentReady,r.mediaContentReady]])},91682:function(e,t,n){var i;n.d(t,{D:function(){return i}}),function(e){e[e.notStarted=1]="notStarted",e[e.loadDeferred=2]="loadDeferred",e[e.resolvedForLoad=3]="resolvedForLoad",e[e.loaded=4]="loaded",e[e.initialized=5]="initialized",e[e.renderDeferred=6]="renderDeferred",e[e.resolvedForRender=7]="resolvedForRender",e[e.rendered=8]="rendered",e[e.domComplete=10]="domComplete",e[e.visuallyReady=11]="visuallyReady",e[e.error=12]="error",e[e.startLoading=14]="startLoading",e[e.mediaContentReady=15]="mediaContentReady"}(i||(i={}))},10662:function(e,t,n){n.d(t,{$0:function(){return G},og:function(){return $},Qw:function(){return W}});var i=n(32236),r=n(84107);class o{get surfaceModel(){return(0,i.p)((()=>{const e=this._surfaceTemplateMapper(this._platformData);return e.interactionEvent.addEventListener(this.interactionEvent.dispatchEvent.bind(this.interactionEvent)),e}))()}get contentModel(){return(0,i.p)((()=>{const e=this._contentTemplateMapper(this._platformData);return e.interactionEvent.addEventListener(this.interactionEvent.dispatchEvent.bind(this.interactionEvent)),e}))()}get IsValid(){return!!this.id&&this.surfaceModel.IsValid&&this.contentModel.IsValid}constructor(e,t,n){if(this._platformData=e,this._surfaceTemplateMapper=t,this._contentTemplateMapper=n,this.interactionEvent=new r.z,!e)throw new Error("Platform data is required for PlacementModel")}getPlacementRules(){return[]}}class a extends o{getPlacementRules(){return[...super.getPlacementRules(),...this._platformData.placementRules??[]]}get id(){return this._platformData.id}get placementSource(){return"Internal"}get group(){return this._platformData.group}}var s=n(43261);class c{}class d extends c{constructor(){super(...arguments),this._placementsQueue=[]}providePlacement(e){this._callback?this._callback(e):this._placementsQueue.push(e)}subscribeForPlacementStream(e){this._callback||(this._callback=e,this._placementsQueue.forEach((t=>e(t))))}}class u{constructor(e){if(this._platformData=e,this.interactionEvent=new r.z,!e)throw new Error("Platform data is required for ContentTemplateModel")}}class l extends u{get contentType(){return s.J.CallToAction}get IsValid(){return!!this.title&&!!this.description}}class p extends l{get IsValid(){return!!this._contentData&&super.IsValid}get _contentData(){return this._platformData.contentModel}get title(){return this._contentData.title}get description(){return this._contentData.description}get contentImage(){return this._contentData.contentImage}get logoImage(){return this._contentData.logoImage}get disclaimerContent(){return this._contentData.disclaimerContent}get engageContentAction(){if(this._contentData.engageContentAction)return{...this._contentData.engageContentAction,actionDelegate:async()=>{this.interactionEvent.dispatchEvent({type:"Engaged",ts:Date.now(),followUpPlacementPromise:this._contentData.engageContentAction?.actionDelegate?.()})}}}get dismissContentAction(){if(this._contentData.dismissContentAction||this._contentData.engageContentAction)return{label:this._platformData.defaultDismissLabel,ariaLabel:this._platformData.defaultDismissAriaLabel,...this._contentData.dismissContentAction,actionDelegate:async()=>{this.interactionEvent.dispatchEvent({type:"Dismissed",ts:Date.now(),followUpPlacementPromise:this._contentData.dismissContentAction?.actionDelegate?.()})}}}}class h extends u{get contentType(){return s.J.CallToChoice}get IsValid(){return!!this.title&&!!this.description}}class g extends h{get IsValid(){return!!this._contentData&&super.IsValid&&this.validateOptionValues()}get _contentData(){return this._platformData.contentModel}get title(){return this._contentData.title}get description(){return this._contentData.description}get contentImage(){return this._contentData.contentImage}get logoImage(){return this._contentData.logoImage}get currentValue(){return this._contentData.currentValue}get choiceOptions(){return this._contentData.choiceOptions||[]}get dismissContentAction(){if(this._contentData.dismissContentAction)return{label:this._platformData.defaultDismissLabel,ariaLabel:this._platformData.defaultDismissAriaLabel,...this._contentData.dismissContentAction,actionDelegate:async()=>{this.interactionEvent.dispatchEvent({type:"Dismissed",ts:Date.now(),followUpPlacementPromise:this._contentData.dismissContentAction?.actionDelegate?.()})}}}get engageContentAction(){if(this._contentData.engageContentAction)return{...this._contentData.engageContentAction,actionDelegate:async e=>{this.interactionEvent.dispatchEvent({type:"Engaged",ts:Date.now(),followUpPlacementPromise:this._contentData.engageContentAction?.actionDelegate?.(e)})}}}validateOptionValues(){const e=new Set;for(const t of this.choiceOptions){if(!t.value)return!1;if(e.has(t.value))return!1;e.add(t.value)}return!0}}var f=n(61708);class m extends f.r0{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get position(){return this._surfaceData.position}get size(){return this._surfaceData.size}get enableGradientBorderBottom(){return this._surfaceData.enableGradientBorderBottom}get dismissAfterResolve(){const e=this._surfaceData.dismissAfterSeconds||120,t=new Promise((t=>setTimeout((()=>t("Ignored")),1e3*e)));return this._surfaceData.dismissAfterResolve?Promise.race([t,this._surfaceData.dismissAfterResolve]):t}get displaySurfaceAction(){return{actionDelegate:()=>{super.displaySurfaceAction.actionDelegate?.(),this._surfaceData.displaySurfaceAction?.actionDelegate?.()}}}get hideSurfaceAction(){return{actionDelegate:()=>{super.hideSurfaceAction?.actionDelegate?.(),this._surfaceData.hideSurfaceAction?.actionDelegate?.()}}}get closeSurfaceAction(){return{ariaLabel:this._platformData?.defaultCloseAriaLabel,...this._surfaceData.closeSurfaceAction,actionDelegate:()=>{super.closeSurfaceAction?.actionDelegate?.(),this._surfaceData.closeSurfaceAction?.actionDelegate?.()}}}}var y=n(9119);class v extends y.C{get surfaceType(){return"ContextualFeedbackCardLevel"}}class S extends v{get IsValid(){return!!this._surfaceData}get _surfaceData(){return this._platformData.surfaceModel}get dismissAfterResolve(){const e=new Promise((e=>setTimeout((()=>e("Ignored")),12e4)));return this._surfaceData.dismissAfterResolve?Promise.race([e,this._surfaceData.dismissAfterResolve]):e}get displaySurfaceAction(){return{actionDelegate:()=>{super.displaySurfaceAction.actionDelegate?.(),this._surfaceData.displaySurfaceAction?.actionDelegate?.()}}}get hideSurfaceAction(){return{actionDelegate:()=>{super.hideSurfaceAction?.actionDelegate?.(),this._surfaceData.hideSurfaceAction?.actionDelegate?.()}}}}class w extends y.C{get surfaceType(){return"ContextualFeedback"}}class b extends w{get IsValid(){return!!this._surfaceData}get _surfaceData(){return this._platformData.surfaceModel}get dismissAfterResolve(){return this._surfaceData.dismissAfterResolve}get displaySurfaceAction(){return{actionDelegate:()=>{super.displaySurfaceAction.actionDelegate?.(),this._surfaceData.displaySurfaceAction?.actionDelegate?.()}}}get hideSurfaceAction(){return{actionDelegate:()=>{super.hideSurfaceAction?.actionDelegate?.(),this._surfaceData.hideSurfaceAction?.actionDelegate?.()}}}}var C,T,k;!function(e){e.Promotional="Promotional",e.LegalCompliance="LegalCompliance"}(C||(C={})),function(e){e.SlideUp="SlideUp",e.FadeIn="FadeIn",e.SlideRight="SlideRight"}(T||(T={})),function(e){e.Top="Top",e.Bottom="Bottom"}(k||(k={}));class P extends y.C{get IsValid(){return!!this.position}get surfaceType(){return"HorizontalBanner"}}class A extends P{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get transitionEffect(){return this._surfaceData.transitionEffect}get position(){return this._surfaceData.position}get dismissAfterResolve(){const e=this._platformData.dismissAfterSeconds||120,t=new Promise((t=>setTimeout((()=>t("Ignored")),1e3*e)));return this._surfaceData.dismissAfterResolve?Promise.race([t,this._surfaceData.dismissAfterResolve]):t}get bannerType(){return this._surfaceData.bannerType}get displaySurfaceAction(){return{actionDelegate:()=>{super.displaySurfaceAction.actionDelegate?.(),this._surfaceData.displaySurfaceAction?.actionDelegate?.()}}}get hideSurfaceAction(){return{actionDelegate:()=>{super.hideSurfaceAction?.actionDelegate?.(),this._surfaceData.hideSurfaceAction?.actionDelegate?.()}}}get closeSurfaceAction(){return{...this._surfaceData.closeSurfaceAction,actionDelegate:()=>{super.closeSurfaceAction?.actionDelegate?.(),this._surfaceData.closeSurfaceAction?.actionDelegate?.()}}}}var I,E=n(42833),R=n(28951);function M(){const e=(t="nurturingMockPlacement",n=window.location.search,R.cX.getQueryParameterByName(t,n)||R.cX.getQueryParameterByName(t.toLowerCase(),n));var t,n;return e?e.split(",").map((e=>e.trim())):[]}!function(e){e.InternalCoachmark="internal-coachmark",e.InternalHorizontalBanner="internal-horizontal-banner",e.InternalContextualFeedback="internal-contextual-feedback",e.WalktroughCoachmark="walktrough-coachmark",e.FloatingCoachmark="floating-coachmark",e.FloatingTopCenter="floating-top-center",e.FloatingBottomCenter="floating-bottom-center"}(I||(I={}));var x=n(26197),L=n(98130);function F(){return{id:"feedFreCoachmark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:f.dm.Large,position:{coachmarkAnchor:x._.myFeed,anchoringPosition:f.RC.Above,hasPointer:!0,pointerPosition:f.Jt.Opposite}},contentModel:{contentType:s.J.CallToAction,title:"Discover your Feed Experience",description:"Get more out of your feed experience through this walk-thru.",contentImage:{url:`${(0,L.Yq)().StaticsUrl}latest/nurturing/rewards/signin-upsell-signin.png`,altText:"Feed Image"},engageContentAction:{label:"Get Started"},dismissContentAction:{label:"Maybe Later"}}}}function D(e=f.pY.BottomEnd){return{id:"floatingCoachMark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:f.dm.Medium,position:e},contentModel:{contentType:s.J.CallToAction,title:"Discover your Feed Experience",description:"Get more out of your feed experience through this walk-thru.",contentImage:{url:`${(0,L.Yq)().StaticsUrl}latest/nurturing/rewards/signin-upsell-signin.png`,altText:"Feed Image"},engageContentAction:{label:"Get Started"},dismissContentAction:{label:"Maybe Later"}}}}const O={[I.InternalCoachmark]:F,[I.InternalHorizontalBanner]:()=>({id:"nurturingPlacementManagerTestKey",placementSource:"Internal",group:"Functional",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top",displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}},contentModel:{title:"Take Action",description:"Learn about promotion trough descriptions.",contentType:s.J.CallToAction,contentImage:{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image Alt Text"},engageContentAction:{label:"Engage",actionDelegate:()=>{}},dismissContentAction:{label:"Not Now",actionDelegate:()=>{}},disclaimerContent:{text:"Disclaimer text should be defined here and need to be informative.",links:[{linkText:"Term",linkUrl:"https://microsoft.com"},{linkText:"Privacy",linkUrl:"https://microsoft.com"}]}}}),[I.InternalContextualFeedback]:()=>({id:"nurturingPlacementManagerTestKey",placementSource:"Internal",group:"Functional",surfaceModel:{surfaceType:"ContextualFeedback",displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}},contentModel:{title:"Do you like this feed?",description:"Description should be defined here and need to be informative.",contentType:s.J.CallToChoice,contentImage:{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image Alt Text"},choiceOptions:[{label:"Yes",actionDelegate:()=>{}},{label:"No",actionDelegate:()=>{}},{label:"Not sure",actionDelegate:()=>{}}],engageContentAction:{label:"Engage",actionDelegate:()=>{}},dismissContentAction:{label:"Not Now",actionDelegate:()=>{}},disclaimerContent:{text:"Disclaimer text should be defined here and need to be informative.",links:[{linkText:"Term",linkUrl:"https://google.com"},{linkText:"Privacy",linkUrl:"https://google.com"}]}}}),[I.WalktroughCoachmark]:()=>{const e=F(),t={id:"personalizeFreCoachmark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:f.dm.Large,position:{coachmarkAnchor:x._.myInterests,anchoringPosition:f.RC.Above,hasPointer:!0,pointerPosition:f.Jt.Opposite}},contentModel:{contentType:s.J.CallToAction,title:"Personalize your feed",description:"This is personalization settings, where you can personalize your feed.",contentImage:{url:`${(0,L.Yq)().StaticsUrl}nurturing/rewards/signin-upsell-signin.png`,altText:"Personalization Image"},engageContentAction:{label:"Next"}}},n=new E.o,i=e=>{if("ArrowUp"===e.key)n.set("Ignored"),document.removeEventListener("keydown",i)};document.addEventListener("keydown",i);const r={...t,contentModel:{...t.contentModel,engageContentAction:{...t.contentModel.engageContentAction}}};return{...e,surfaceModel:{...e.surfaceModel,dismissAfterResolve:n.getResultAsync()},contentModel:{...e.contentModel,engageContentAction:{...e.contentModel.engageContentAction,actionDelegate:async()=>(await new Promise((function(e){setTimeout(e,1e4)})),r)}}}},[I.FloatingCoachmark]:D,[I.FloatingTopCenter]:()=>D(f.pY.TopCenter),[I.FloatingBottomCenter]:()=>D(f.pY.BottomCenter)};var _=n(33779),N=n(5302);const B={Coachmark:e=>new m(e),HorizontalBanner:e=>new A(e),ContextualFeedback:e=>new b(e),ContextualFeedbackCardLevel:e=>new S(e)},U={[s.J.CallToAction]:e=>new p(e),[s.J.CallToChoice]:e=>new g(e)};class $ extends d{constructor(e={}){super(),this._providerStaticContext=e,this.showMockPlacements()}createPlacement(e){const t=B[e.surfaceModel.surfaceType],n=U[e.contentModel.contentType];if(!t||!n)return;let i;const r={...this._providerStaticContext.localizedStrings};try{i=new a({...e,...r},t,n)}catch(t){return void(0,_.H)(N.ejn,"Internal data is not valid or missing.",void 0,e)}return i.interactionEvent.dispatchDecorator=e=>{const t=e.followUpPlacementPromise?e.followUpPlacementPromise?.then((e=>{if(e)return this.createPlacement(e)})):void 0;return{...e,followUpPlacementPromise:t}},i}sendInternalPlacement(e,t=[]){const n=this.createPlacement({...e,placementRules:t});n&&this.providePlacement(n)}showMockPlacements(){M().forEach((e=>{const t=O[e];t&&this.sendInternalPlacement(t())}))}}const H=new E.o,W=e=>H.set(e),G=async()=>H.getResultAsync()},84107:function(e,t,n){n.d(t,{z:function(){return i}});class i{constructor(){this._eventListeners=new Set}addEventListener(e){this._eventListeners.add(e)}removeEventListener(e){this._eventListeners.delete(e)}dispatchEvent(e){this._eventListeners.forEach((t=>this.dispatchDecorator?t(this.dispatchDecorator(e)):t(e)))}}},43261:function(e,t,n){var i;n.d(t,{J:function(){return i}}),function(e){e.CallToAction="CallToAction",e.CallToChoice="CallToChoice"}(i||(i={}))},9119:function(e,t,n){n.d(t,{C:function(){return r}});var i=n(84107);class r{get displaySurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:"Viewed",ts:Date.now()})}}}get hideSurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:"Hidden",ts:Date.now()})}}}get closeSurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:"Closed",ts:Date.now()})}}}constructor(e){if(this._platformData=e,this.interactionEvent=new i.z,!e)throw new Error("Platform data is required for PlacementSurfaceModel")}}},61708:function(e,t,n){n.d(t,{Jt:function(){return a},RC:function(){return i},dm:function(){return o},jO:function(){return s},pY:function(){return r},r0:function(){return d}});var i,r,o,a,s,c=n(9119);!function(e){e.Above="Above",e.Below="Below",e.Left="Left",e.Right="Right"}(i||(i={})),function(e){e.TopStart="TopStart",e.TopEnd="TopEnd",e.TopCenter="TopCenter",e.BottomStart="BottomStart",e.BottomEnd="BottomEnd",e.BottomCenter="BottomCenter"}(r||(r={})),function(e){e.Mini="Mini",e.Small="Small",e.Medium="Medium",e.Large="Large"}(o||(o={})),function(e){e.Adjacent="Adjacent",e.Center="Center",e.Opposite="Opposite"}(a||(a={})),function(e){e.Outside="Outside",e.Target="Target",e.OutsideAndTarget="OutsideAndTarget"}(s||(s={}));class d extends c.C{get IsValid(){return!!this.size}get surfaceType(){return"Coachmark"}}},27026:function(e,t,n){function i(e,t,n){if(!e||!t)throw new Error("PlacementInteractionLimit: Invalid parameters.");return(i,r)=>{if(!i)return!1;let o=r?.[i.id]||[];const{relatedPlacementIds:a,repeat:s}=n||{};if(a?.length){const e=a.filter((e=>e!==i.id)).flatMap((e=>r?.[e]||[]));o=[...o,...e]}const c=o?.filter((t=>t.type===e));if(!c.length)return!0;if(!s)return c.length<t;const{lookbackIntervalMS:d,repeatsNumber:u}=s;return!(c.length>=u*t)&&o.filter((e=>e.ts>Date.now()-d)).length<t}}n.d(t,{l:function(){return i}})},25941:function(e,t,n){function i(e,t){if(!e||!t)throw new Error("PlacementInteractionsThrottle: Invalid parameters.");return(n,i)=>{if(!n)return!1;if(!i)return!0;let r;return Object.values(i).flat().forEach((t=>{t?.type===e&&t?.ts&&(!r||r.ts<t.ts)&&(r=t)})),!(r&&Date.now()-r.ts<=t)}}function r(e,t,n){return(i,r)=>{if(!i)return!1;let o=r?.[i.id]||[];const{relatedPlacementIds:a}=n||{};if(a?.length){const e=a.filter((e=>e!==i.id)).flatMap((e=>r?.[e]||[]));o=[...o,...e]}if(!o.length)return!0;let s;o.forEach((t=>{t?.type===e&&t?.ts&&(!s||s.ts<t.ts)&&(s=t)}));return!!(!s||s.ts&&Date.now()-s.ts>t)}}n.d(t,{H:function(){return r},S:function(){return i}})},17055:function(e,t,n){n.d(t,{J:function(){return r},y:function(){return i}});const i=864e5,r=36e5},31693:function(e,t,n){n.d(t,{f:function(){return c}});var i=n(55447),r=n(15598),o=n(19516),a=n(523),s=n(82928);function c(e,t){const n=(0,i.$z)();let c;if(e&&n&&(c=e[n]),!t){const e=(0,s.K0)(a._S),n=e&&e.getCurrentState();t=n?n.settings:(0,r.$o)().getObject(o.Ai)}if(!t)return c;const{adminSelectedNavId:d,isOfficeContentEnabled:u,isShowCompanyAndIndustry:l}=t;let p;return e&&d&&(p=e[d]),u&&l?c||p||0:u?1:0}},38549:function(e,t,n){n.d(t,{$N:function(){return f},$S:function(){return u},AD:function(){return l},De:function(){return T},EB:function(){return c},Gl:function(){return m},H2:function(){return E},IC:function(){return b},JS:function(){return i},Kf:function(){return a},SO:function(){return h},X:function(){return p},Zh:function(){return w},iL:function(){return s},ic:function(){return y},iu:function(){return o},jf:function(){return R},mL:function(){return C},no:function(){return r},o2:function(){return I},r8:function(){return v},sx:function(){return g},uB:function(){return A},v4:function(){return S},xY:function(){return d},yL:function(){return k},ye:function(){return P}});var i,r;!function(e){e.Excel="Excel",e.Forms="Forms",e.OneNote="OneNote",e.Pdf="PdfViewer",e.Portfolio="Portfolio",e.PowerPoint="PowerPoint",e.Project="Project",e.PowerBI="PowerBI",e.Sway="Sway",e.Visio="Visio",e.Word="Word",e.Video="Video",e.NewsArticle="NewsArticle"}(i||(i={})),function(e){e.DocumentsTableMenu="documents-table-menu",e.DocumentsTableHover="documents-table-hover",e.DocumentCardMenu="document-card-menu"}(r||(r={}));const o="edgeEnterpriseNtp",a="ContextMenuItem",s="ContextMenu",c="Copy file",d="-CopyFile",u="DocumentListItem",l="Download file",p="-Download",h="FileLocation",g="Open file location",f="-OpenFileLocation",m="Open file",y="Open in browser",v="-OpenInBrowser",S="Open in desktop",w="-OpenInDesktop",b="Remove file",C="-RemoveFromList",T="More options",k="ShareButton",P="Share file",A="-Share";var I,E,R;!function(e){e.Graph="https://graph.microsoft.com",e.Loki="394866fc-eedb-4f01-8536-3ff84b16be2a",e.MRU="https://api.office.net",e.Sharepoint="https://microsoft.sharepoint.com",e.Substrate="https://substrate.office.com",e.Yammer="https://www.yammer.com",e.Turbo="f84065aa-522d-45c2-bfc9-ce0ba17f1593"}(I||(I={})),function(e){e.Activity="Activity",e.EnterpriseOneService="EnterpriseOneService",e.EnterpriseWaffle="EnterpriseWaffle",e.Graph="Graph",e.Loki="Loki",e.MRU="MRU",e.Share="Share",e.Sharepoint="Sharepoint",e.SharepointSites="SharepointSites",e.Substrate="Substrate",e.Yammer="Yammer",e.Turbo="Turbo"}(E||(E={})),function(e){e.Activities="Activities",e.AdminPortal="AdminPortal",e.Calendar="Calendar",e.CompanyNewsCard="CompanyNewsCard",e.Discover="Discover",e.DiscoverSharepoint="DiscoverSharepoint",e.EnterpriseWaffle="EnterpriseWaffle",e.EdgeWorth="EdgeWorth",e.EdgeWorthHide="EdgeWorthHide",e.Feeds="Feeds",e.Images="Images",e.IndustryNewsCard="IndustryNewsCard",e.MRU="MRU",e.MRUUpdate="MRUUpdate",e.OneDriveLink="OneDriveLink",e.Pinned="Pinned",e.Recommended="Recommended",e.RemoveRecommended="RemoveRecommended",e.ProfilePhoto="ProfilePhoto",e.RecentFiles="RecentFiles",e.SharedLink="SharedLink",e.SharedWithMe="SharedWithMe",e.SharepointNewsCard="SharepointNewsCard",e.SharepointNewsCardImages="SharepointNewsCardImages",e.SharePointSites="SharePointSites",e.Shell="Shell",e.StreamPreviewImages="StreamPreviewImages",e.TaskCreate="TaskCreate",e.TaskDelete="TaskDelete",e.Tasks="Tasks",e.TaskUpdate="TaskUpdate",e.Topics="Topics",e.Turbo="Turbo"}(R||(R={}))},77062:function(e,t,n){n.d(t,{Dz:function(){return S},Ee:function(){return m},N:function(){return v},T1:function(){return g},e5:function(){return w},i$:function(){return c},j9:function(){return f},s6:function(){return y}});var i=n(59878),r=n(98130),o=n(82588),a=n(19625);const s=10/1440,c="cbypass";let d="",u=!1,l=0;const p=10;let h=parseInt((0,a.ej)(c))||0;async function g(){h=Date.now(),(0,a.sq)(c,h.toString(),s,r.jG.HostPage.topDomain,"/"),await i.U.purgeCacheAsync(i.R.river),(0,o.mS)({id:"updatemyfeed",payload:h})}async function f(){h=Date.now(),(0,a.sq)(c,h.toString(),s,r.jG.HostPage.topDomain,"/"),await i.U.purgeCacheAsync(i.R.river)}function m(){return h}function y(e){h>0&&e.searchParams.set(c,h.toString())}function v(){return d}function S(e,t){if(!e)return;if(t)return d=e,void(l=1);if(l>=p)return;const n=d?`${d},${e}`:e;l+=1,d=n}function w(e){!0!==e&&"true"!==e||(u=!0)}},66258:function(e,t,n){n.d(t,{fK:function(){return f},rg:function(){return y},tW:function(){return m}});var i=n(33779),r=n(5302),o=n(13218),a=n(92421);const s="OneWebServiceLatency",c="//assets.msn",d="//assets2.msn",u="//api.msn",l="prg-1s-bkupdmnt",p="prg-1s-bkupdmnt1",h="prg-1s-bkupdmnt2",g="prg-1s-bkupdmnt3";function f(){const e=o.Al.CurrentFlightSet;return!(!e||!(e.has(l)||e.has(p)||e.has(h)||e.has(g)))}function m(){const e=o.Al.CurrentFlightSet;return!(!e||!e.has(l)&&!e.has(p))}async function y(e,t={},n,l=!1){let p;try{if(p=await(0,a.Sm)(e,n,t),p&&p.ok)return p}catch(t){(0,i.OO)(t,r.Qsh,r.Qsh.message,`Failed URL: ${e}`)}return p&&p.headers&&p.headers.get(s)||l?p:(e=o.Al.CurrentFlightSet&&o.Al.CurrentFlightSet.has(g)?e.replace(c,u).replace("/service/","/"):e.replace(c,d),(0,a.Sm)(e,n,t))}},97265:function(e,t,n){n.d(t,{$D:function(){return O}});var i=n(98130),r=n(45949),o=n(13218),a=n(5884),s=n(28123),c=n(99234),d=n(15598),u=n(16715),l=n(97906);var p=n(55025),h=n(7733),g=n(32236),f=n(21215),m=n(16415),y=n(62328),v=n(59637),S=n(52211),w=n(71172),b=n(73452),C=n(47290),T=n(87148),k=n(38785),P=n(39197);function A(e){if(!(0,b.wq)())return;const t=(0,P._4)();t?.isProd||(0,T.gR)({appId:k.Au,type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{message:e}})}var I=n(44132),E=n(52359),R=n(36577),M=n(79022),x=n(42167);const L="prg-telemetry-trace",F="traceparent";var D;!function(e){e.ANID="ANID",e.PICASSOID="PicassoID"}(D||(D={}));var O;!function(e){function t(e=null,t,n=!1,a=null,s=!1,c=(0,y.VQ)(),d=!1,u=!1){const l=(0,i.Yq)(),p=[{key:"apikey",value:l.OneServiceApiKey},{key:"activityId",value:l.ActivityId},{key:"ocid",value:n?T(l.TrackInfo,t):t},{key:l.OneServiceContentMarketQspKey,value:l.CurrentMarket},{key:"it",value:(0,r.E)()}],h=(0,o.nP)().CurrentFlights;if(l.SendUserIdInHeader||!e||h?.includes("1s-r-user-qsp")||p.push({key:"user",value:e}),c&&p.push({key:y.rZ,value:y.AN}),o.Al.IsBlendedEnterprise&&p.push({key:"audienceMode",value:"enterprise"}),l.ShouldUseFdheadQsp&&!u){let e=h;if(a){e=e?`${e},${a}`:a;const t="prg-bngimg-t";-1===e.indexOf(t)&&(e+=","+t),!0===s&&(e=a)}p.push({key:"fdhead",value:e})}if(h?.includes(L)){const e=E.U.getTraceInstance(),t="00-"+e.getTraceId(!0)+"-"+e.getSpanId(!0)+"-00";p.push({key:"traceparent",value:t})}if(!d){const e=l.AuthCookieName;e&&p.push({key:"scn",value:e.toUpperCase()})}return p}async function n(e=(0,y.VQ)(),t,n,r){const p={};let h;const g=(0,i.Yq)()||{};if((0,o.nP)().CurrentFlights&&(0,o.nP)().CurrentFlights.includes("prg-tracingheader")){const e=E.U.getTraceInstance(),t=e.getTraceId(!0),n=e.getSpanId(!0);p[a.Yu.traceParent]="00-"+t+"-"+n+"-00"}if("windowsShell"===g.AppType||"windowsShellV2"===g.AppType)g.IsWinAADUser&&(h=await k(),Object.assign(p,(0,s.tx)(h)));else if("winWidgets"===g.AppType||"webWidgets"==g.AppType){if((0,f.N)()&&"function"==typeof window.createWindowsWidget1SAuthHeaders){const e=await window.createWindowsWidget1SAuthHeaders();Object.assign(p,e)}}else{if(g.WidgetAttributes){h=(await(0,v.yb)()).tokenValue}if(("shopping"==g.AppType||"views"==g.AppType)&&(0,b.wq)()){if("MSA"==(await(0,S.YX)()).accountType){Object.assign(p,await(0,C.d)());for(const e in p)0===e.indexOf("X-MSEdge")&&delete p[e];return p.SiteName=`api.msn.${g.topDomain}`,A(p),p}}if(!h)if(e&&!await g.isGccModUser){const e={id:c.d3,friendlyName:c.Ak},t=await((0,R.Kf)()?.getAuthData(e));h=t?.authToken}else if("gaming"===n&&r&&(0,f.N)()){const e=(0,d.$o)().getObject("xboxXTokenId");e&&e.notAfter&&new Date(e.notAfter)>new Date&&(p[a.Yu.xboxToken]=JSON.stringify(e))}else if(!t?.skipDualAuthHeader){const e=(0,s.hk)()?await(0,w.IY)():(0,s.aS)();h=e?.accessToken}Object.assign(p,(0,s.me)(h))}if((0,u.P4)()){const e=(0,l.G)().getItem("nativeAppUserConfig"),t=JSON.parse(e)||{},n=t?.digitalHeader;if(n){I.M0.addOrUpdateTmplProperty("digitalHeader",n);const e=t?.preferredIdType;Object.values(D).includes(e)&&(p["X-1S-Digital-ID"]=`preferredIdType=${e}`)}}if(g.SendUserIdInHeader&&(Object.assign(p,function(){const e={},t=document.head.hasAttribute("data-client-settings")?document.head:window.document.getElementsByClassName("peregrine-widget-settings")[0],n=t&&t.getAttribute("data-client-settings"),i=n?JSON.parse(n)?.fd_muid:void 0;return i&&(e.MUID=`m-${i}`),e}()),g.WidgetAttributes&&"bingHomepage"===g.AppType)){const e=await(0,v.yb)();e?.muid&&(p.MUID=e.muid,I.M0.addOrUpdateTmplProperty("bhpmuidhdrosu","1"))}if(!(0,f.N)()){const{oneServiceHeaders:e,cookie:t,referer:n,clientData:i,userAgent:r}=(0,m.sL)();e&&Object.assign(p,e),i&&(p["X-Client-Data"]=i),t&&(p.Cookie=t),n&&(p.Referer=n),r&&(p["User-Agent"]=r)}return p}function T(e,t){return p.b.isNonNullObject(e)&&p.b.isNonNullObject(e.sitePage)&&(0,M.Z)(e.sitePage.page_product)&&(0,M.Z)(e.sitePage.page_type)?e.sitePage.page_product+"-"+e.sitePage.page_type+(t?"-"+t:""):t}e.serviceRequestOnComplete=async function(e,t){try{const n=await e();return t(),n}catch(e){throw t(),e}},e.getOneServiceParamsWithoutAuth=t,e.getOneServiceNonDynamicParamsWithoutAuth=function(e,t=!1,n=null){const r=(0,i.Yq)(),o=[{key:"apikey",value:r.OneServiceApiKey},{key:"ocid",value:t?T(r.TrackInfo,e):e},{key:r.OneServiceContentMarketQspKey,value:r.CurrentMarket}];return!r.SendUserIdInHeader&&n&&o.push({key:"user",value:n}),(0,y.VQ)()&&o.push({key:y.rZ,value:y.AN}),o},e.getOneServiceParamsWithAuth=function(e=null,n,r=!1,o=null,a=!1,s=!1){return(0,i.Yq)(),[...t(e,n,r,o,a,(0,y.VQ)(),!1,s)]},e.getOneServiceHeaders=n,e.getOneServiceFeedCallHeaders=async function(e,t,r){const o=await n(e,null,t,r),s=(0,i.Yq)(),c=s.ActivityId;return s.SendFeedCallActivityIdInHeader&&c&&(o[a.Yu.activityId]=c),o},e.getLocationParams=function(e,t){const n=(0,i.Yq)(),r=e||n.Latitude,o=t||n.Longitude;return r&&o?{key:"location",value:`${r}|${o}`}:null},e.getOneServiceOCID=T,e.getBaseRequestData=async function(t,n){return{headers:await e.getOneServiceHeaders((0,y.VQ)(),n),method:t}},e.getCommonParams=function(e,t=!1){return(0,o.nP)().UserIsSignedIn?this.getOneServiceParamsWithAuth((0,i.Yq)().UserId,e,t):this.getOneServiceParamsWithoutAuth((0,i.Yq)().UserId,e,t)},e.getCommonParams2=function(e,t=!1,n=!1){return(0,S.hC)()?this.getOneServiceParamsWithAuth((0,i.Yq)().UserId,e,t,n):this.getOneServiceParamsWithoutAuth((0,i.Yq)().UserId,e,t,n)},e.urlContainsOcidParam=function(e){if(!e)return!1;const t=e.split("?");if(t.length<2)return!1;const n=t[1].split("#")[0];return!!new h.h(n).get("ocid")},e.removeOcidFromUrl=function(e){if(!e)return e;const t=e.split("?");if(t.length<2)return e;const n=t[1].split("#")[0],i=new h.h(n);if(i.get("ocid")){i.delete("ocid");let t=e.replace(n,i.toString());return"?"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}return e},e.removeOcidFromRiverCardProviderResponse=function(t){t&&t.cardMetadata&&t.cardMetadata.length&&t.cardMetadata.forEach((t=>{t.cardContent&&t.cardContent.destinationUrl?t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl):t.subItems&&t.subItems.length&&t.subItems.forEach((t=>{t.cardContent&&t.cardContent.destinationUrl&&(t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl))})),t.metadata&&t.metadata.relatedCards&&t.metadata.relatedCards.forEach((t=>{t.url=e.removeOcidFromUrl(t.url)}))}))},e.removeOcidFromWindowsOneServiceResponse=function(t){t&&t.cards&&t.cards.forEach((t=>{t.subCards.forEach((t=>{t.url?t.url=e.removeOcidFromUrl(t.url):t.subCards&&t.subCards.forEach((t=>{t.url&&(t.url=e.removeOcidFromUrl(t.url))}))}))}))};const k=(0,g.p)((async()=>{if(!((0,f.N)()&&window&&window.ShellFeedsApp&&window.ShellFeedsApp.getQueryHeadersAsync))return;const e=await Promise.race([window.ShellFeedsApp.getQueryHeadersAsync(),(0,x.Kb)(3e3).then((()=>null))]),t=e&&e[a.Yu.entAuthorization]||null;return t&&setTimeout((()=>k.cache.clear()),36e5),t}));e.getUniFeatTunHeader=async function(){const e={},t=(0,i.Yq)()||{};(0,f.N)()&&"edgeChromium"===t.AppType&&(e.EdgeInterestTier1Ids=(0,d.$o)().getItem("userTopics"));const n=I.M0.getPageMetadata(),r=n?.combinedContract;return r&&(e.LoginState=r.user?.loginState,e.Product=r.page?.product,e.PageName=r.page?.name,e.PageType=r.page?.type,e.OCID=r.page?.ocid,e.ViewPortWidth=r.browser?.width,e.ViewPortHeight=r.browser?.height),function(e){let t="";return Object.keys(e).forEach((n=>{t+=`${n}:${Array.isArray(e[n])?e[n].join(","):e[n]};`})),t}(e)},e._reset=function(){k.cache.clear()},e.addTelemetryTracingQueryParam=function(e){if(o.Al&&o.Al.CurrentFlightSet&&o.Al.CurrentFlightSet.has(L)){const t=E.U.getTraceInstance(),n="00-"+t.getTraceId(!0)+"-"+t.getSpanId(!0)+"-00";e.searchParams.set(F,n)}}}(O||(O={}))},32308:function(e,t,n){n.d(t,{O:function(){return S},w:function(){return w}});var i=n(92421),r=n(5302),o=n(9947),a=n(44132),s=n(21215);class c{static#e=this.defaultBaseRetryDelayInMs=100;static#t=this.defaultFactor=2;static#n=this.defaultMaxOffsetInMs=25;static#i=this.defaultMaxRetries=5;static#r=this.defaultMinOffsetInMs=1;static#o=this.maxAllowedRetries=10;static#a=this.maxAllowedRetryDelayInMs=2e3;constructor(e,t,n,i,r,a,d){if(!e)throw new Error("loggingService is required for ExponentialBackoffRetry.");const u=new o.K(e);this.logInvalidParams(u,t,n,i,r,d),this.loggingService=e,this.maxRetries=t||c.defaultMaxRetries,this.baseRetryDelayInMs=n||c.defaultBaseRetryDelayInMs,this.maxRetryDelayInMs=i||c.maxAllowedRetryDelayInMs,this.factor=r||c.defaultFactor,this.minOffsetInMs=a||c.defaultMinOffsetInMs,this.maxOffsetInMs=d||c.defaultMaxOffsetInMs,(0,s.N)()&&this.loggingService.infoCallback((()=>"ExponentialBackoffRetry has been configured."),null,{maxRetries:t,minTimeout:n,maxTimeout:i,factor:r})}async executeRequest(e,t,n,i,r,o){return new Promise((async(a,s)=>{await this.tryRequest(e,a,s,0,t,n,i,r,o)}))}logInvalidParams(e,t,n,i,r,o){t&&(t<1||t>c.maxAllowedRetries)&&e.fatal(`maxRetries should be at least 1 and less than ${c.maxAllowedRetries}.`),n&&n<c.defaultBaseRetryDelayInMs&&e.fatal("baseRetryDelay has to be a positive value greater than or equal to 100."),n&&o&&n<=o&&e.fatal("baseRetryDelay must not be smaller than the maximum delay offset."),i&&(i<=0||i>c.maxAllowedRetryDelayInMs)&&e.fatal(`maxRetryDelay has to be a positive value less than ${c.maxAllowedRetryDelayInMs}.`),r&&r<=0&&e.fatal("factor has to be a positive value.")}async tryRequest(e,t,n,i,o,c,d,u,l){const p=()=>(0,s.N)()&&i<this.maxRetries&&!u;let h=l||"";if(h&&i>0)try{const e=new URL(h);e.searchParams.set("retryAttempt",i.toString()),h=e.toString()}catch(e){}try{const n=d||1e4;let r=null;r=d&&d<0?await e(i,h):await this.timeoutServiceRequest(n,e(i,h)),t(r)}catch(s){if(p()){const r=3,a=parseFloat((Math.random()*(this.minOffsetInMs-this.maxOffsetInMs)+this.maxOffsetInMs).toFixed(r)),p=.5,h=Math.random()<p?-1:1,g=Math.min(this.baseRetryDelayInMs*Math.pow(this.factor,i),this.maxRetryDelayInMs)+a*h;this.loggingService.warnCallback((()=>`Retrying the request in ${g} milliseconds.`),c,{error:s,currentRetry:i+1,requestInfo:o}),setTimeout((()=>this.tryRequest(e,t,n,i+1,o,c,d,u,l)),g)}else{if(a.M0&&a.M0.sendAppErrorEvent){const e=("string"==typeof s?s:s.message)||"";a.M0.sendAppErrorEvent({...r.CKi,pb:{...r.CKi.pb,retryAttemptsMade:i,serviceFailed:c&&c.Message,maxRetries:this.maxRetries,customMessage:`${this.getActivityName(c)}. Error details: '${e}'. All retry attempts failed.`}},!1)}this.loggingService.errorCallback((()=>p()?`ExponentialBackoffRetry has exceeded maximum retries ${this.maxRetries}`:"Request has failed."),c,{error:s,currentRetry:i,requestInfo:o}),n(s)}}}async timeoutServiceRequest(e,t){return new Promise((async(n,i)=>{const r=setTimeout((()=>i(new Error(`Service Request Timed out after ${e} milliseconds!`))),e);try{n(await t),clearTimeout(r)}catch(e){i(e),clearTimeout(r)}}))}getActivityName(e){return`Activity name: '${e&&e.Message||"None"}'`}}var d=n(66258),u=n(13010),l=n(1970),p=n(42147),h=n(84147),g=n(97265),f=n(42122);let m,y;const v=3;function S(e,t={},n,r=!1){return(0,d.fK)()?(0,d.rg)(e,t,n,r):(0,i.Sm)(e,n,t)}async function w(e,t,n,i,r){const o=b().activityLoggingService.createActivity(t);return i=i||(0,d.tW)(),await g.$D.serviceRequestOnComplete((()=>function(){if(y)return y;return y=new c(b().loggingService,v),y}().executeRequest(e,null,o,n,i,r)),(()=>b().activityLoggingService.endActivity(o)))}function b(){if(m)return m;const e=u.u.getInstance("ExperienceActivityLogger");return(0,s.N)()&&f.k.isDebug()&&e.addAppender(new l.N(h.i.Activity)),m=new p.N(f.k.getLoggingService(),e),m}},88048:function(e,t,n){n.d(t,{PH:function(){return l},Ph:function(){return c},fU:function(){return p},qQ:function(){return d}});var i=n(98130),r=n(13218),o=n(42122);let a,s;const c=new URL("","https://api.msn.com/");function d(){const e=(0,i.Yq)();var t;return a||(t=e.ServiceUrlBase,a=new URL("",t),h(a)),a}function u(){const e=(0,i.Yq)();var t;return s||(t=e.FeedServiceUrlBase,s=new URL("",t),h(s)),s}function l(e,t=d()){return new URL(e+t?.search,t)}function p(e,t=u()){return new URL(e+t?.search,t)}function h(e){let t=!1;"dev"!==e.searchParams.get("env.service")&&(0,r.nP)().UserIsSignedIn&&(t=!0),o.k.log("u-si: "+(0,i.Yq)().UserId),o.k.log("a-si: "+t),o.k.log("ss-si: "+(0,r.nP)().UserIsSignedIn)}},55727:function(e,t,n){n.d(t,{G$:function(){return g},PF:function(){return h},_$:function(){return p},_N:function(){return f}});var i=n(26156),r=n(8170),o=n(75692),a=n(44132),s=n(13218);const c="layoutPromotion",d=["msNurturingMetadataTemplate","msNurturingOnboardNTPToCE"],u={[o.p.FreOverlay]:"ntp_profile_scope_tab_functional_notification",[o.p.FeedLayoutPromotions]:"ntp_profile_scope_tab_functional_notification",[o.p.NurturingFunctional]:"ntp_profile_scope_tab_functional_notification",[o.p.NurturingPromotions]:"ntp_profile_scope_tab_functional_notification"},l={[o.Y.Engaged]:"PrimaryCTA_Clicked",[o.Y.Dismissed]:"DismissedCTA_Clicked",[o.Y.Ignored]:"Notification_Ignored"};async function p(){const{enabled:e,disabled:t}=await(0,i.zx)();return d.every((n=>e.includes(n)||t.includes(n)))}async function h(e,t){r.MN.updateCTA(e,l[t])}const g=(e,t)=>async n=>{const i=function(e,t){if(e)return u[t.placementGroup];if(t.placementId===c)return"ntp_profile_scope_tab_pure_functional_notification";let n=0;try{n=parseInt(s.Al?.ClientSettings?.browser?.version||"",10)}catch(e){}return n>=130?"ntp_profile_scope_tab_feature_campaign":u[t.placementGroup]}(!e&&!t||!!t&&void 0!==t.find((e=>n.id.indexOf(e)>-1)),{placementId:n.id,placementGroup:n.priorityGroup});a.M0.addOrUpdateTmplProperty(`ovl_enp_tmp_${i}`,"1");const o=await r.MN.getToken(n.id,i);return!!o?.success||a.M0.addOrUpdateTmplProperty(`ovl_enp_cld_${n.id}`,"1"),!!o?.success};const f=async()=>{const e=`${c}_PreCheck`,t="ntp_profile_scope_tab_feature_campaign";a.M0.addOrUpdateTmplProperty(`ovl_enp_tmp_${t}`,"1");const n=await r.MN.getToken(e,t),i=!!n?.success;return i||a.M0.addOrUpdateTmplProperty(`ovl_enp_cld_${e}`,"1"),i}},75692:function(e,t,n){var i,r;n.d(t,{Y:function(){return r},p:function(){return i}}),function(e){e.FeedLayoutPromotions="FeedLayoutPromotions",e.FreOverlay="FreOverlay",e.NurturingFunctional="NurturingFunctional",e.NurturingPromotions="NurturingPromotions"}(i||(i={})),function(e){e.Engaged="Engaged",e.Dismissed="Dismissed",e.Ignored="Ignored"}(r||(r={}))},66451:function(e,t,n){n.d(t,{Y:function(){return r}});var i=n(40938);function r(e){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.logLoadingError&&(0,i.e)().then((()=>{t.logLoadingError(e)}))}},40938:function(e,t,n){n.d(t,{e:function(){return r}});const i="visibilitychange";function r(){return"visible"===document.visibilityState?Promise.resolve():new Promise((e=>{document.addEventListener(i,(()=>{"visible"===document.visibilityState&&e()}),{once:!0})}))}},68640:function(e,t,n){n.d(t,{C7:function(){return g},FK:function(){return y},Qf:function(){return p},U4:function(){return f},VX:function(){return r},W1:function(){return o},WM:function(){return a},Y5:function(){return c},Z6:function(){return s},dd:function(){return u},eO:function(){return h},m:function(){return m},pM:function(){return l},pc:function(){return d},v3:function(){return i}});const i="epdu",r="ppreload",o="ppage",a="ppmuid",s="fpr",c="TTPR",d="TTF.SearchBox",u="TTVR",l="TTVR.SearchBox",p="TTVR.BackgroundExecution",h="backgroundpreload",g="prerender",f="TTPV",m="TTVR.E2E",y="ReasonForTTPR"},77770:function(e,t,n){n.d(t,{Qc:function(){return B},TR:function(){return V},wY:function(){return H},Bj:function(){return W},VD:function(){return G},lr:function(){return $}});var i=n(242),r=n(86117),o=n(33779),a=n(5302),s=n(90631),c=n(42122),d=n(43225),u=n(52837),l=n(49494),p=n(70041),h=n(68640),g=n(98130);const f="TTVR.",m="OverlayRemoval",y="TTVR.BackgroundExecution.";let v=0;function S(){return v}var w=n(62301),b=n(88055),C=n(14969),T=n(42833),k=n(44132),P=n(15598),A=n(21215),I=n(13218),E=n(34254);let R,M,x,L,F=!1;const D=new T.o,O=new T.o,_=(new T.o,new T.o),N=new T.o;function B(e,t,n,s){return I.Al.IsPrerender?"visible"===document.visibilityState?(D.set(),void(F=!0)):((0,P.$o)().setItem("prc",(parseInt((0,P.$o)().getItem("prc")||"0")+1).toString()),k.M0.addOrUpdateTmplProperty("isprerender","1"),x=e,L=t,(0,C.Hv)(),(0,w.n9)(),j()?(0,r.su)("PrerenderStart",performance.now()):function(){R=document.createElement("div");const e=document.body,t=R.style;t.background="transparent",t.position="fixed",t.bottom=t.left=t.right=t.top="0",t.zIndex="2147483647",e?(e.appendChild(R),c.k.logObjects("pageRevealDelegate:addOverlay: Added overlay")):c.k.logObjects("pageRevealDelegate:addOverlay: Document body is not available, failed to add overlay.");(0,r.su)("PrerenderStart",performance.now())}(),document.addEventListener("visibilitychange",U),void function(e,t){e&&window.setTimeout((()=>{"visible"!==document.visibilityState&&(0,o.H)(a.GI7,"",void 0,{...a.GI7.pb,customMessage:"Prerender content staled"})}),6e4*e);t&&window.setTimeout((()=>{"visible"!==document.visibilityState&&(0,o.H)(a.DxP,"",void 0,{...a.DxP.pb,customMessage:"Prerender sd staled"})}),6e4*t)}(n,s)):((0,A.N)()&&((0,i.Ou)()[h.C7]=0),void(0,w.kY)())}async function U(){document.removeEventListener("visibilitychange",U);let e=!1;const t=function(){if(!I.Al||!I.Al.CurrentFlightSet)return-1;if(I.Al.CurrentFlightSet.has("prg-prerend12h"))return 43200;if(I.Al.CurrentFlightSet.has("prg-prerend6h"))return 21600;if(I.Al.CurrentFlightSet.has("prg-prerend3h"))return 10800;if(I.Al.CurrentFlightSet.has("prg-prerend1h"))return 3600;if(I.Al.CurrentFlightSet.has("prg-prerend30m"))return 1800;if(I.Al.CurrentFlightSet.has("prg-prerend10m"))return 600;if(I.Al.CurrentFlightSet.has("prg-prerend18h"))return 64800;if(I.Al.CurrentFlightSet.has("prg-prerend1d"))return 86400;if(I.Al.CurrentFlightSet.has("prg-prerend2d"))return 172800;return-1}();if(t>0){Math.round((0,l.Hk)()-performance.timeOrigin)/1e3>t&&((0,l.yV)(11),e=!0)}if(I.Al.CurrentFlightSet.has("preinvttvr")&&function(){const e=(0,i.Ou)();if(e.TTVR)return!1;const t=e.IncompleteMarkers;return t&&(t.includes("TTVR.GridViewFeed")||t.includes("TTVR.WaterfallViewFeed"))&&!e.FirstSectionRenderStart}()&&(0,l.yV)(13),(0,w.lF)())return g.jG.IsUCBased&&u.q.getInstance()?.notify("onContentReload"),k.M0.addOrUpdateTmplProperty("ReloadPrerenderPage","1"),t>0&&(document.body.style.display="none"),void(0,w.dn)((0,l.Hk)(),e);!function(){if(!window?.chrome?.embeddedSearch?.newTabPage?.getTabTimings)return;const e=(0,i.Ou)();window.chrome.embeddedSearch.newTabPage.getTabTimings(((t,n)=>{t&&n&&void 0!==n.tabStartToNavigationStart&&(e.tabStartToNavigationStart=Math.round(n.tabStartToNavigationStart))}))}(),performance.mark(s.DB);const n=performance.now();(0,i.Ou)()[s.DB]=Math.round(n),await(0,E.F_)(),F=!0;const c=j();if(c||(M=setTimeout((()=>{q()}),1e3)),function(e){k.M0.addOrUpdateTmplProperty("isbackgroundpreload","1"),k.M0.addOrUpdateCustomProperty(h.W1,Math.round(e-performance.timeOrigin).toString()),(0,r.su)("PrerenderRevealed",e);const t=(0,r.O0)("PrerenderStart");(0,r.su)("PrerenderAge",e-t)}((0,l.Hk)()),await(0,b.XX)(n,x,L),R&&!c&&(q(),await O.getResultAsync()),c&&(0,r.EV)(m),function(){const e=window._pageTimings;if(!e)return;const t=performance.getEntriesByType("visibility-state").find((e=>"visible"===e.name));e[h.U4]=t&&Math.round(t.startTime)||Math.round(performance.now())}(),function(e){const t=window._pageTimings;if(!t)return;const n=(0,r.Sc)(m);t[h.C7]=1,t[h.eO]=1;let s=n,c=m,d=-1;e.forEach((e=>{const i=t[f+e];let o=(0,r.Sc)(e);o=Math.max(o,n),t[y+e]=i,t[f+e]=o||-1,e===p.zK8&&(d=o),o>s&&(s=o,c=e)}));const u=t[h.dd];let l=!1;if(isNaN(u)||null===u){let n=t.IncompleteMarkers;if(!n){const e=(0,r.bO)(r.oN.Primary);n=e?.join(",")}const s=[];if(n.split(",").forEach((e=>{(!t[e]||t[e]<=0)&&s.push(e)})),s.length>0){n=s.join(",");const c=(0,r.Gb)(),d=c.marker||"None",u=c.value||"None",l=t[f+"WaterfallViewFeed"]||0;let p="";l&&(p=`TTVR.Waterfall: ${l}.`);let h="";const g=t.visualDependenciesConfigs||[];g.length&&(h=`DependenciesConfigs: ${g.join("|")}.`),(0,o.H)(a.lFV,"TTVR missing during prerender.",void 0,{...a.lFV.pb,customMessage:`Incomplete markers: ${n}. visuallyReadyDependencies: ${e.join("|")}. Last Marked: ${d} ${u}. ${h} ${p}`,pageTimings:(0,i.Ou)()})}l=!0}if((isNaN(s)||null===s)&&((0,o.H)(a.HYO,"TTPR missing during prerender."),l=!0),l)return;const S=t["TTVR.MsnFeed"]&&e.includes("MsnFeed")?s:Math.min(s,u);if(t[h.Y5]=t[h.dd]=S,v=performance.now(),t[h.FK]=c,t[h.Qf]=u,t.tabStartToNavigationStart&&t[h.U4]){const e=t.tabStartToNavigationStart+t[h.U4];t[h.m]=t[h.dd]+e}const w=t[h.pM],b=t[h.pc],C=t[`${h.Y5}.SearchBox`]=Math.min(d,w);g.jG.IsUCBased||(isNaN(w)||null===w?(0,o.H)(a.Cab,"TTVR.SearchBox missing during prerender."):t[h.pM]=Math.min(C,w),isNaN(b)||null===b?(0,o.H)(a.bor,"TTF.SearchBox missing during prerender."):t[h.pc]=Math.min(C,b))}(x),g.jG.IsUCBased){const e=S();u.q.getInstance()?.notify("onTTVRMarked",{timestamp:e,timeOrigin:performance.timeOrigin})}if(performance.mark(s.O6),performance.measure("StaleRevalidation",s.DB,s.O6),"undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("paint")){if(performance.getEntriesByType("paint").find((({name:e})=>"first-contentful-paint"===e)))D.set(),(0,C.mB)();else{const e=new PerformanceObserver((t=>{for(const n of t.getEntries())"first-contentful-paint"===n.name&&(D.set(),(0,C.mB)(),e.disconnect())}));e.observe({entryTypes:["paint"]})}}else D.set(),(0,C.mB)();(0,b.Gy)(),k.M0.runContentVisibilityCallbacks(),k.M0.addOrUpdateTmplProperty("prv",(0,P.$o)().removeItem("prc"))}function $(){return I.Al.IsPrerender?D.getResultAsync():Promise.resolve()}function H(){_.set()}function W(){N.set()}function G(){return I.Al.IsPrerender?N.getResultAsync():Promise.resolve()}function V(){const e=I.Al?.IsPrerender;return e&&!F}function q(){try{M&&clearTimeout(M),document.body.removeChild(R),c.k.logObjects("pageRevealDelegate:removeOverlay: Removed overlay"),(0,d.c)((()=>{(0,r.EV)(m),O.set()}))}catch(e){}R=null}function j(){return!!I.Al.CurrentFlightSet?.has("prg-no-overlay")}},49494:function(e,t,n){n.d(t,{Ge:function(){return s},HQ:function(){return c},Hk:function(){return p},ih:function(){return d},qO:function(){return l},yV:function(){return u}});var i=n(68640),r=n(15598);const o=new Set,a=[];function s(e){const t=(0,r.$o)().getObject(i.v3)||{},n=t[e];return!isNaN(n)&&(o.has(e)||o.add(e),delete t[e],(0,r.$o)().setObject(i.v3,t),n>performance.timeOrigin)}function c(e){return o&&o.has(e)}function d(e){const t=(0,r.$o)().getObject(i.v3)||{},n=t[e];isNaN(n)&&(t[e]=p(),(0,r.$o)().setObject(i.v3,t))}function u(e){a&&!a.includes(e)&&a.push(e);const t={time:p(),data:e};(0,r.$o)().setObject(i.Z6,t)}function l(e){if(!a||0===a.length||!a.includes(e))return;a.splice(a.indexOf(e),1);const t=a.length;if(0===t)(0,r.$o)().removeObject(i.Z6);else{const e={time:p(),data:a[t-1]};(0,r.$o)().setObject(i.Z6,e)}}function p(){return Math.round(performance.timeOrigin+performance.now())}},62301:function(e,t,n){n.d(t,{dn:function(){return y},kY:function(){return S},lF:function(){return f},n9:function(){return h},sB:function(){return m}});var i=n(15598),r=n(68640),o=n(42122),a=n(33779),s=n(5302),c=n(12812),d=n(19625),u=n(44132);let l,p;function h(){p=(0,d.jG)()||""}const g=e=>(e?(0,i.$o)().removeObject(r.Z6):(0,i.$o)().getObject(r.Z6))??void 0;function f(e=!0){const t=g(e);if(t){o.k.logObjects("pageRevealDelegate:isForceReloadRequested, time: "+new Date(t.time).toTimeString());const e=t.time;if(l=t.data,e>performance.timeOrigin)return!0;(0,a.H)(s.eE7,"Can't reload page as the last invalidation time is not usable. no need to reload since content and request is latest",void 0,{...s.eE7.pb,time:e,timeOrigin:performance.timeOrigin,invalidationReason:l},!1)}return function(){const e=(0,d.jG)()||"";if(p!==e)return l=1,(0,i.$o)().setItem(r.WM,`Previous MUID: ${e}, New MUID: ${p}`),!0;return!1}()}function m(){const e=g(!1);return!!(e&&e.time>performance.timeOrigin)}function y(e,t=!1){!function(e){l&&((0,i.$o)().setItem(r.VX,l+""),(0,i.$o)().setItem(r.W1,Math.round(e-performance.timeOrigin).toString()))}(e),(0,c.Z)({newUrl:v(t),invalidatePageCache:!1})}function v(e=!1){const t=location.href;return t?t.replace(/prerender(=\d)?/,"invalidaterender=1")+(e?"&stale=1":""):""}function S(){const e=(0,i.$o)().removeItem(r.VX),t=(0,i.$o)().removeItem(r.W1),n=(0,i.$o)().removeItem(r.WM);e&&u.M0.addOrUpdateCustomProperty(r.VX,e),t&&u.M0.addOrUpdateCustomProperty(r.W1,t),n&&(0,a.H)(s.smA,"",void 0,{...s.smA.pb,customMessage:n},!1)}},88055:function(e,t,n){n.d(t,{Gy:function(){return f},MV:function(){return v},XX:function(){return g}});var i=n(86117),r=n(33779),o=n(5302),a=n(42833),s=n(34254),c=n(49494),d=n(43225);let u=[],l=[],p=new Set,h=new a.o;async function g(e,t,n){const r=(0,s.S0)().getCurrentState().aboveTheFoldVisuallyReady.endTime,o=new Set;for(const e of u){const{experienceType:n,isRequiredForInitialRendering:i}=e;i&&!t.includes(n)&&t.push(n),t.includes(n)&&p.add(n)}0==p.size&&h.set();for(const t of u){const{experienceType:a}=t,s=(0,c.Ge)(a),d=0===t.thresholdMinutes||null!=t.thresholdMinutes&&e-r>6e4*t.thresholdMinutes;n||s||d?(m(t),l.push(t.delayCallback)):(t.isRequiredForInitialRendering&&await m(t),(0,i.EV)(a),y(a)),o.add(a)}for(const e of t)o.has(e)||(0,i.EV)(e);return h.getResultAsync()}function f(){for(const e of l)e()}async function m(e){try{await e.criticalCallback(),(0,d.c)((()=>{(0,i.EV)(e.experienceType),y(e.experienceType)}))}catch(t){(0,r.OO)(t,o.NKp,"Exception when running stale revalidate callback","Experience: "+e.experienceType)}}function y(e){p.delete(e)&&0==p.size&&h.set()}function v(e){u.push(e)}},14969:function(e,t,n){n.d(t,{Hv:function(){return s},eC:function(){return d},hR:function(){return p},mB:function(){return c}});var i=n(42833);let r,o,a=!1;function s(){a=!0}function c(){a=!1,l()}function d(e){return"visible"!==document.visibilityState||e&&a?(r||(r=new i.o,document.addEventListener("visibilitychange",u)),r.getResultAsync()):Promise.resolve()}function u(){"visible"===document.visibilityState&&l()}function l(){!a&&r&&(r.set(),r=null,document.removeEventListener("visibilitychange",u))}function p(){return o||(o=new Promise((e=>{"visible"===document.visibilityState&&e(),document.addEventListener("visibilitychange",(function t(){"visible"===document.visibilityState&&(e(),document.removeEventListener("visibilitychange",t))}))}))),o}},88394:function(e,t,n){n.d(t,{o:function(){return S}});var i=n(64107),r=n(242),o=n(5302),a=n(10290),s=n(20850),c=n(44132),d=n(81586),u=n(78058),l=n(59997),p=n(28951),h=n(13218),g=n(98130),f=n(78125),m=n(90061);function y(){const e=[];let t=document.body,n=0,i=!1;for(;t;)e.push(`[index:${n};inShadow:${i}]${t.nodeName}`),t.children&&t.children.length?(n=t.children.length-1,t=t.children[n],i=!1):t.shadowRoot?.children&&t.shadowRoot?.children.length>0?(n=t.shadowRoot?.children.length-1,t=t.shadowRoot?.children[n],i=!0):t=null;return e.join(">")}function v(e){{const e=document.querySelector("html")?.style.getPropertyValue("--body-bg-color");if(e)return e}return e?"#242424":"#F7F7F7"}async function S(e,t,n,S,w,b,C){let T;i.A.startMark("WC.Render"),T=void 0===n||"boolean"==typeof n?{noPaint:!!n}:n;const k=e.configRef,P=(0,a.ITY)(k.experienceType),A=matchMedia("(prefers-color-scheme:dark)");if(window.isSSREnabled&&!window.isSSRCompleted){if(c.M0?.addOrUpdateTmplProperty("SSRIncomplete","1"),(0,r.Ou)().isSSRAborted="1","vp"===p.cX.getQueryParameterByName("reqsrc",location.href)&&"1"!==p.cX.getQueryParameterByName("ssrCrashVptest",location.href))return void document.write("SSR didn't complete successfully, CSR fallback is disabled for VP tests");if(c.M0?.sendAppErrorEvent({...o.O5q,message:"SSR didn't complete successfully, remove the existing design system provider element to avoid broken UI",pb:{...o.O5q.pb,lastElements:y()}}),window.isCSRFallback=!0,document.querySelector(t)?.remove(),window.disableCSRFallback)return Promise.resolve()}const I=document.querySelector(t)||document.createElement(t),E=w??A.matches;I.baseLayerLuminance=E?f.h.DarkMode:f.h.LightMode,I.direction="rtl"===h.Al.MarketDir?l.N.rtl:l.N.ltr,I.setAttribute("fill-color",T?.fillColor??v(E));for(const e in T)Reflect.set(I,e,Reflect.get(T,e));const R=window.isSSREnabled?(0,m.bE)("WholePageHydration",!0):void 0,M=(0,m.zb)(I,R,S);if(void 0===w){const e=e=>{I.baseLayerLuminance=e.matches?f.h.DarkMode:f.h.LightMode,I.setAttribute("fill-color",T?.fillColor??v(e.matches))};A.addEventListener("change",e)}if(!I.isConnected){(b?document.querySelector(".peregrine-widgets")??document.body:document.body).appendChild(I)}const x=new u.D({type:d.c9.Module,name:k.experienceType,content:{}});let L=I.querySelector(P);return L||(L=document.createElement(P)),L.parentTelemetry=x,L.setAttribute("config-instance-src",k?.instanceSrc),L.setAttribute("instance-id",e.instanceId||""),L.setAttribute("data-t",x.getMetadataTag()),g.jG.IsUCBased&&(document.body.style.background="transparent",I.style.background="transparent",L&&L instanceof HTMLElement&&(L.style.background="transparent")),C?.forEach((e=>{e(L)})),await(0,s.Fg)(e),L.isConnected||I.appendChild(L),i.A.endMark("WC.Render"),M}},23251:function(e,t,n){var i;n.d(t,{m:function(){return i}}),function(e){e.small="OneByOne",e.medium="OneByTwo",e.large="OneByThree"}(i||(i={}))},28828:function(e,t,n){var i;n.d(t,{f:function(){return i}}),function(e){e.AiCharacter="aicharacterCardEnabled",e.AutosMarketplaceCard="autosmarketplaceCardEnabled",e.BoostCard="boostCardEnabled",e.HoroscopeCard="horoscopeCardEnabled",e.WeatherCard="weatherCardEnabled",e.SevereWeatherCard="severeWeatherCardEnabled",e.NowcastWeatherCard="nowcastweatherCardEnabled",e.RainTodayWeatherCard="raintodayweatherCardEnabled",e.WeatherRubyCard="weatherRubyCardEnabled",e.SportsCard="sportsCardEnabled",e.MoneyCard="moneyCardEnabled",e.FinanceCard="financeCardEnabled",e.OnThisDayCard="onthisdayCardEnabled",e.LocalEventsCard="localEventsCardEnabled",e.SavingsCard="savingsCardEnabled",e.ShoppingCard="shoppingCardEnabled",e.ShoppingFashionCarousel="shoppingFashionCardEnabled",e.ShoppingEventCard="eventSDCardShoppingEnabled",e.TrafficCard="trafficCardEnabled",e.EsportsCard="esportsCardEnabled",e.ElectionsCard="genericelectionCardEnabled",e.LotteryCard="lotteryCardEnabled",e.QnaCard="qnaCardEnabled",e.RecipesCard="recipeCardEnabled",e.PrismFeedCard="prismFeedCardEnabled",e.PrismCarouselCard="prismFeedCarouselCardEnabled",e.TravelCard="travelCardEnabled",e.HealthCard="healthCardEnabled",e.TopStoriesCard="topstoriesCardEnabled",e.TrendingTopics="TrendingTopicsUpsellEnabled",e.LocalGuideCard="localGuideCardEnabled",e.GroceryCard="groceryCardEnabled",e.RewardsCard="rewardsCardEnabled",e.PersonalizedOffersCard="personalizedoffersCardEnabled",e.PollsCard="pollsCardEnabled",e.MarketPlaceCard="marketplaceCardEnabled",e.QuizCard="quizcardCardEnabled",e.DailyQuizCard="DailyQuizCardEnabled",e.OnThisDaySDCard="OnThisDayCardEnabled",e.CasualGamesCard="esportsCardEnabled",e.CommuteCard="commuteCardEnabled",e.TrendingSearchCard="trendingsearchCardEnabled",e.RealEstateCard="realestateCardEnabled",e.MangaCard="mangaCardEnabled",e.RichCalendarCard="richCalendarCardEnabled",e.DailyGreetingCard="dailyGreetingCardEnabled",e.DonationNpoCard="DonationNpoCardEnabled",e.cegrowthCard="cegrowthCardEnabled",e.CopilotCard="copilotCardEnabled",e.PublisherSpotlightCard="PublisherSpotlightCardEnabled",e.FollowedPublishersCard="FollowedPublishersCardEnabled",e.Crypto="CryptoCard",e.MarketBrief="MarketBriefCard",e.ElectionCard="ElectionCardEnabled",e.EntertainmentPremierCard="entertainmentCardEnabled",e.CommunityCard="CommunityCardEnabled",e.DailyWonderCard="dailywonderCardEnabled",e.DailyBriefCard="DailyBriefCardEnabled",e.TopCommentsCard="TopCommentsCardEnabled"}(i||(i={}))},38090:function(e,t,n){var i;n.d(t,{L:function(){return i}}),function(e){e.Location="Location",e.Weather="Weather",e.Finance="Finance",e.Team="Team",e.League="League",e.Player="Player",e.Traffic="Traffic",e.Widget="Widget",e.TopicFeed="TopicFeed",e.CasualGame="CasualGame",e.Horoscope="Horoscope"}(i||(i={}))},8830:function(e,t,n){n.d(t,{N:function(){return C}});var i=n(42122),r=n(33779),o=n(5302),a=n(38090),s=n(28828),c=n(23251);class d extends Error{constructor(e){super(e)}}var u=n(98130),l=n(13218),p=n(28951),h=n(82588),g=n(2513),f=n(97265),m=n(88048),y=n(32308),v=n(44132),S=n(62328),w=n(52211);class b{constructor(e){this.fetchImpl=e,this.userUpdateEndpoint="msn/user",this.pdpServiceEndpoint="graph/actions",this.locationsServiceEndPoint="v1/news/users/me/locations",this.userActionServiceEndPoint="news/users/me/actions",this.ocid="pdp-peregrine",this.ocidOverride=!0,this.marketQSPOverride=!1}getCommonParams(e,t,n=!1){return e?f.$D.getOneServiceParamsWithAuth(t??(0,u.Yq)().UserId,this.ocid,!this.ocidOverride,null,!1,n):f.$D.getOneServiceParamsWithoutAuth(t??(0,u.Yq)().UserId,this.ocid,!this.ocidOverride,null,!1,(0,S.VQ)(),!1,n)}async getUserDefaultLocation(e){const t=await this.getRequestInit({method:"GET"}),n=(0,m.PH)(this.locationsServiceEndPoint);let i;[...f.$D.getCommonParams2(this.ocid,!this.ocidOverride),{key:"autodetect",value:e&&`${e}`}].forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{i=await(0,y.w)((async()=>{const e=await this.fetchImpl(n.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: getUserDefaultLocation}`;throw new Error(t)}return e}),"getUserDefaultLocation")}catch(e){return i}return i}async addToFavoriteLocation(e,t){const n="Location",i="Follow",r=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:i,targetType:n,definitionName:t,degree:"FavoriteLocation",metaData:e})}),o=(0,m.PH)(this.pdpServiceEndpoint),a=2===await(0,w.XJ)();let s;this.getCommonParams(a).forEach((e=>{e.value&&o.searchParams.set(e.key,e.value)}));try{s=await(0,y.w)((async()=>{const e=await this.fetchImpl(o.href,r);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${i}, targetType: ${n}`;throw new Error(t)}return e.json()}),"addToFavoriteLocation")}catch(e){return!1}return!0}async removeFavoriteLocation(e,t=!1){return await this.deleteFromPdp(a.L.Location,"definitionName",[e],void 0,void 0,void 0,void 0,void 0,t)}async removeLocation(e,t=!1){return await this.deleteFromPdp(a.L.Location,"definitionName",[e],void 0,void 0,void 0,void 0,void 0,t)}async updatePdpHomeLocation(e,t,n={},i,r=!1){const o=a.L.Location,s="Follow",c=await this.getRequestInit({method:"POST"},n,r);c.body=JSON.stringify({actionType:s,targetType:o,definitionName:t,degree:"DefaultLocation",metaData:e});const d=(0,m.PH)(this.pdpServiceEndpoint),u=2===await(0,w.XJ)();return this.getCommonParams(u&&!r,i).forEach((e=>{e.value&&d.searchParams.set(e.key,e.value)})),await(0,y.w)((async()=>{const e=await this.fetchImpl(d.href,c);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${s}, targetType: ${o}`;throw new Error(t)}return e}),"setPdpHomeLocation"),this.tryInvalidateBulkFetchedPdpTargetType(o),!0}async updateTrafficMyRoutes(e,t,n,r,o,s,c){const d=n.replace(/[^a-zA-Z0-9\-.,_]/g,""),u=a.L.Traffic,l="Follow",p=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:l,targetType:u,targetId:d,degree:e,definitionName:t,metadata:r,createdDateTime:s})},c),h=await this.getTrafficPdpUrl(null,null,o);try{await(0,y.w)((async()=>{const e=await this.fetchImpl(h.href,p);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${l}, targetType: ${u}`;throw new Error(t)}return e.json()}),"updateTrafficMyRoutes");this.tryInvalidateBulkFetchedPdpTargetType(u)}catch(e){return i.k.logError(e.message),!1}return!0}async deleteTrafficMyRoutes(e,t,n){const i=await this.getRequestInit({method:"DELETE"}),r=await this.getTrafficPdpUrl(e,t,n);try{await(0,y.w)((async()=>{const e=await this.fetchImpl(r.href,i);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${a.L.Traffic}`;throw new Error(t)}return e}),"deleteTrafficFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(a.L.Traffic)}catch(e){return!1}return!0}async getTrafficMyRoutes(e,t){const n=await this.getRequestInit({method:"GET"}),i=await this.getTrafficPdpUrl(e,null,t);try{const e=await(0,y.w)((async()=>{const e=await this.fetchImpl(i.href,n);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${a.L.Traffic}`;throw new Error(t)}return e}),"getTrafficFromPdp"),t=(await e.json())?.value;return t}catch(e){return null}}async getTrafficPdpUrl(e,t,n,i="Follow",r){const o=(0,m.PH)(this.pdpServiceEndpoint),s=2===await(0,w.XJ)(),c=(0,u.Yq)().UserId,d=s?f.$D.getOneServiceParamsWithAuth(c,this.ocid,!this.ocidOverride):f.$D.getOneServiceParamsWithoutAuth(c,this.ocid,!this.ocidOverride);if(e||t){const n=`targetType eq '${a.L.Traffic}'`,s=e?`degree eq '${e}'`:"",c=t?`definitionName eq '${t}'`:"",d=r?`targetId eq '${r}'`:"";o.searchParams.set("$filter",`actionType eq '${i}' and (${n})${s?` and (${s})`:""}${c?` and (${c})`:""}${d?` and (${d})`:""}`)}return[...d,...n||[]].forEach((e=>{e.value&&o.searchParams.set(e.key,e.value)})),o}async addToWatchList(e,t=0,n={},i={}){const r=a.L.Finance,o="Follow",s=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:o,targetType:r,targetId:e,metadata:{securityType:t,tickerId:this.generateUUID(),...i}})},n),c=(0,m.PH)(this.pdpServiceEndpoint),d="zh-cn"!==(0,u.Yq)().CurrentMarket,p=2===await(0,w.XJ)(),h=(0,l.nP)().CurrentFlights?.split(",").filter((e=>e.includes("1s"))).join(",")||"";let g;(p&&d?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,h,!0):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,h,!0)).forEach((e=>{e.value&&c.searchParams.set(e.key,e.value)}));try{g=await(0,y.w)((async()=>{const e=await this.fetchImpl(c.href,s);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${o}, targetType: ${r}`;throw new Error(t)}return e.json()}),"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(r)}catch(e){return!1}return!0}async addListToWatchList(e,t={},n={}){const i=a.L.Finance,r="Follow",o=await this.getRequestInit({method:"POST",body:JSON.stringify(e.map((e=>({actionType:r,targetType:i,targetId:e.key,metadata:{securityType:e.value,tickerId:this.generateUUID(),...n}}))))},t),s=(0,m.PH)(this.pdpServiceEndpoint),c="zh-cn"!==(0,u.Yq)().CurrentMarket,d=2===await(0,w.XJ)(),p=(0,l.nP)().CurrentFlights?.split(",").filter((e=>e.includes("1s"))).join(",")||"";let h;(d&&c?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,p,!0):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,p,!0)).forEach((e=>{e.value&&s.searchParams.set(e.key,e.value)}));try{h=await(0,y.w)((async()=>{const e=await this.fetchImpl(s.href,o);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${r}, targetType: ${i}`;throw new Error(t)}return e.json()}),"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(i)}catch(e){return!1}return!0}generateUUID(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}async sortWatchList(e,t={}){const n=a.L.Finance,i="Follow",r=(0,l.nP)().CurrentFlights?.split(",").filter((e=>e.includes("1s"))).join(",")||"",o=[{key:"fdhead",value:r}],s=await C.readPdpWithTargetType(a.L.Finance,!0,200,t,!1,o),c=s&&s.value?.filter((e=>e.actionType===i&&e.targetId));if(!c||c.length<e.length)return!1;const d={};let p=e.length;c.forEach((t=>{let r=e.findIndex((e=>e===t.targetId));r<0&&(r=p,p++),d[t.targetId]=JSON.stringify({actionType:i,targetId:t.targetId,targetType:n,rank:r,metadata:t.metadata})}));const h=await this.getRequestInit({method:"PUT",body:JSON.stringify(d)},t),g=(0,m.PH)(this.pdpServiceEndpoint);(2===await(0,w.XJ)()?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,r,!0):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,r,!0)).forEach((e=>{e.value&&g.searchParams.set(e.key,e.value)}));try{await(0,y.w)((async()=>{const e=await this.fetchImpl(g.href,h);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${i}, targetType: ${n}`;throw new Error(t)}return e.json()}),"sortWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(a.L.Finance)}catch(e){return!1}return!0}async updateWeatherInterests(e,t,n={},r){const o=a.L.Weather,s=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:"Follow",targetType:o,targetId:e,metadata:t})},n),c=(0,m.PH)(this.pdpServiceEndpoint),d=2===await(0,w.XJ)();this.getCommonParams(d,r).forEach((e=>{e.value&&c.searchParams.set(e.key,e.value)}));try{const e=await this.fetchImpl(c.href,s);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update weather interests call`;throw new Error(t)}}catch(e){return i.k.logError(e.message),!1}return!0}async getWeatherInterest(e={},t="",n){const i=await this.getRequestInit({method:"GET"},e),r=this.getWeatherInterestUrl(null,t),o=2===await(0,w.XJ)();this.getCommonParams(o,n).forEach((e=>{e.value&&r.searchParams.set(e.key,e.value)}));try{const e=await(0,y.w)((async()=>{const e=await this.fetchImpl(r.href,i);if(e.status>=400){const t=`returned error response. Status: ${e.status} for actionType: Follow, targetType: ${a.L.Weather}`;throw new Error(t)}return e}),"getWeatherInterest"),t=(await e.json())?.value;return t}catch(e){return null}}getWeatherInterestUrl(e,t,n="Follow"){const i=(0,m.PH)(this.pdpServiceEndpoint),r=`targetType eq '${a.L.Weather}'`;return i.searchParams.set("$filter",`actionType eq '${n}' and (${r})${t?` and (${t})`:""}`),[...e||[]].forEach((e=>{e.value&&i.searchParams.set(e.key,e.value)})),i}async updateWeatherSettings(e,t,n={},i,r=!1){if(!e&&!t)return!0;let o="";o=e&&!t?'{"weatherDisplayUnit":"'+e+'"}':!e&&t?'{"userSettings":{"weatherLocationSettingMode":"'+t+'"}}':'{"weatherDisplayUnit":"'+e+'","userSettings":{"weatherLocationSettingMode":"'+t+'"}}';const a=await this.getRequestInit({method:"POST"},n,r);a.body=o;const s=(0,m.PH)(this.userUpdateEndpoint),c=2===await(0,w.XJ)();this.getCommonParams(c&&!r,i).forEach((e=>{e.value&&s.searchParams.set(e.key,e.value)}));const d=await this.fetchImpl(s.href,a);if(d.status>=400){const e=`OneService returned error response. Status: ${d.status} for update weather setting call`;throw new Error(e)}return!0}async updateHoroscopePreference(e,t={},n){const i=a.L.Horoscope,s=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:"Follow",targetType:i,targetId:e})},t),c=(0,m.PH)(this.pdpServiceEndpoint),d=2===await(0,w.XJ)();this.getCommonParams(d,n).forEach((e=>{e?.key&&e?.value&&c.searchParams.set(e.key,e.value)}));try{const e=await this.fetchImpl(c.href,s);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update horoscope preference`;throw new Error(t)}}catch(e){return(0,r.OO)(e,o.pex,e?.toString()),!1}return!0}async getHoroscopePreference(e={},t="",n){const i=await this.getRequestInit({method:"GET"},e),s=this.getHoroscopePreferenceUrl(null,t),c=2===await(0,w.XJ)();this.getCommonParams(c,n).forEach((e=>{e?.key&&e?.value&&s.searchParams.set(e.key,e.value)}));try{const e=await(0,y.w)((async()=>{const e=await this.fetchImpl(s.href,i);if(e.status>=400){const t=`returned error response. Status: ${e.status} for actionType: Follow, targetType: ${a.L.Horoscope}`;throw new Error(t)}return e}),"getHoroscope"),t=(await e.json())?.value;return t}catch(e){return(0,r.OO)(e,o.pex,e?.toString()),null}}getHoroscopePreferenceUrl(e,t,n="Follow"){const i=(0,m.PH)(this.pdpServiceEndpoint),r=`actionType eq '${n}'`,o=`targetType eq '${a.L.Horoscope}'`;return i.searchParams.set("$filter",`(${r}) and (${o})`),i.searchParams.set("top","1"),[...e||[]].forEach((e=>{e?.key&&e?.value&&i.searchParams.set(e.key,e.value)})),i}async updateFinanceInterests(e){if(!e)return!1;const t={financeInterests:e},n=JSON.stringify(t),i=await this.getRequestInit({method:"POST"});i.body=n;const r=(0,m.PH)(this.userUpdateEndpoint),o="zh-cn"!==(0,u.Yq)().CurrentMarket,a=2===await(0,w.XJ)(),s=(0,l.nP)().CurrentFlights?.split(",").filter((e=>e.includes("1s"))).join(",")||"";(a&&o?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,s,!0):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,s,!0)).forEach((e=>{e.value&&r.searchParams.set(e.key,e.value)}));const c=await this.fetchImpl(r.href,i);if(c.status>=400){const e=`OneService returned error response. Status: ${c.status} for update finance interests call`;throw new Error(e)}return!0}async updateUserSettings(e,t={},n){if(!e)return!0;const r=JSON.stringify({userSettings:e},((e,t)=>t??void 0)),o=await this.getRequestInit({method:"POST"},t);o.body=r;const a=(0,m.PH)(this.userUpdateEndpoint),s=2===await(0,w.XJ)()?f.$D.getOneServiceParamsWithAuth(n??(0,u.Yq)().UserId,this.ocid,!this.ocidOverride):f.$D.getOneServiceParamsWithoutAuth(n??(0,u.Yq)().UserId,this.ocid,!this.ocidOverride);for(const{key:e,value:t}of s)t&&a.searchParams.set(e,t);try{const e=await this.fetchImpl(a.href,o);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update weather setting call`;throw new Error(t)}}catch(e){return i.k.logError(e.message),!1}return!0}setUserPrefData(e){this.userPreferenceData=e}async getUserPrefData(e){if(this.userPreferenceData)return this.userPreferenceData;return await this.getPdpUserPreference(!0,e,void 0,"weather")}async getPdpUserPreference(e,t={},n,r){const o=await this.getRequestInit({method:"GET"},t),a=(0,m.PH)(this.userUpdateEndpoint),s=2===await(0,w.XJ)()?f.$D.getOneServiceParamsWithAuth(n||(0,u.Yq)().UserId,this.ocid,!this.ocidOverride):f.$D.getOneServiceParamsWithoutAuth(n||(0,u.Yq)().UserId,this.ocid,!this.ocidOverride);for(const{key:e,value:t}of s)t&&a.searchParams.set(e,t);r&&a.searchParams.set("source",r);try{const e=await(0,y.w)((async()=>{const e=await this.fetchImpl(a.href,o);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e}),"readPDPData");if(!e.ok&&404!=e.status)throw Error(`code=${e.status}, ${e.statusText}`);const t={...await e.json(),is404:404==e.status};return this.setUserPrefData(t),t}catch(t){if(i.k.logError(t.message),e)throw Error(t.message);return null}}async updatePdpLayoutPreference(e){const t={method:"PUT",credentials:"include",body:JSON.stringify({dummyid:{userLayoutPreference:e}})},n=(0,m.PH)(this.userUpdateEndpoint);(2===await(0,w.XJ)()?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{const e=await this.fetchImpl(n.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update layout preference setting call`;throw new Error(t)}}catch(e){return i.k.logError(e.message),!1}return!0}async updateSegmentCardsEnableStatus(e,t=null){if(!e&&!e.length)return!0;const n=[];if(t){let e;for(e in t)null!=t[e]&&n.push('"'+e+'": '+JSON.stringify(t[e]))}const i=e.map((e=>e.cardType!=s.f.TopStoriesCard?`\\"${e.cardType}\\":${e.enabled?'\\"1\\"':'\\"0\\"'}`:"")).join(","),r=n.length>0?'{"segmentCardSettings":"{'+i+'}","userSettings":{'+n.join(", ")+"}}":'{"segmentCardSettings":"{'+i+'}"}';return this.updateUserPreference(r)}async updateProductivityCardsEnableStatus(e){if(!e&&!e.length)return!0;const t=`{userSettings:{enterpriseCardsEnabled:"{${e.map((e=>`\\"is${e.cardType}Enabled\\":${e.enabled?"true":"false"}`)).join(",")}}"}}`;return this.updateUserPreference(t)}async updateGamingCardsEnableStatus(e){if(!e&&!e.length)return!0;const t=`{userSettings:{gamingCards:"{${e.map((e=>`\\"is${e.cardType}Enabled\\":${e.enabled?"true":"false"}`)).join(",")}}"}}`;return this.updateUserPreference(t)}async updateMorningDigestEnableStatus(e){if(!e&&!e.length)return!0;const t=`{userSettings:{WindowsShellMorningDigest:"{${e.map((e=>`\\"is${e.cardType}Enabled\\":${e.enabled?"true":"false"}`)).join(",")}}"}}`;return this.updateUserPreference(t)}async updateCommunitySettingsOptOutStatus(e){if(!e&&!e.length)return!0;const t={};e.forEach((e=>{t[e.settingType]=e.optedOut?"1":"0"}));const n={communitySettings:t};return this.updateUserPreference(JSON.stringify(n))}async updateWidgetSettings(e,t={},n){if(!e)return!1;const i=e.filter((e=>!e.region?.startsWith("wbcol"))).map((e=>({actionType:"Follow",targetId:e.cardType,targetType:a.L.Widget,metadata:{prongsv2:{region:e.region,size:c.m[e.size],position:e.position,widgetDefinitionId:e.widgetDefinitionId}}})));return this.sendGenericActionRequest({additionalHeaders:t,endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:n})}async muteWidget(e,t={},n){if(!e||!e.length)return!1;const i=e.map((e=>({actionType:"Mute",targetId:e,targetType:a.L.Widget})));return this.sendGenericActionRequest({additionalHeaders:t,endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:n})}async disableSpotlightCard(e,t,n){if(!e)return!1;const i={actionType:"Disabled",definitionName:e,targetType:n||a.L.TopicFeed};return this.sendGenericActionRequest({endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:t},!0)}async getDisabledActionCards(e,t){if(!e.length||!t.length)return[];const n=Array.from(new Set(t)),i=Array.from(new Set(e)),r=[{key:"$top",value:"100"},{key:"$filter",value:`actionType eq 'Disabled' and targetType eq '${`${n.join("' or targetType eq '")}`}' and definitionName eq '${`${i.join("' or definitionName eq '")}`}'`}],o=await this.getRequestInit({method:"GET"}),a=(0,m.PH)(this.pdpServiceEndpoint),s=2===await(0,w.XJ)();[...r,...this.getCommonParams(s,null,!0)].forEach((e=>{e.value&&a.searchParams.set(e.key,e.value)}));const c=await(0,y.w)((async()=>{const e=await this.fetchImpl(a.href,o);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e}),"readPDPData");if(!c.ok&&404!=c.status)throw Error(`code=${c.status}, ${c.statusText}`);return(await c.json()).value||[]}async sendGenericActionRequest(e,t=!1){const{additionalHeaders:n,additionalParams:i,endpoint:r,method:o,payload:a,appError:s}=e;if(!r||!o)return this.logError(new Error("Missing arguments: 'endpoint' and 'method' should be provided and valid"),s),!1;const c=(0,m.PH)(r),d=2===await(0,w.XJ)();let u;this.getCommonParams(d,null,t).forEach((e=>{e.value&&c.searchParams.set(e.key,e.value)})),i&&i.forEach((e=>{e.value&&c.searchParams.set(e.key,e.value)}));try{JSON.parse(a),u=a}catch(e){u=JSON.stringify(a)}const l=await this.getRequestInit({method:o,body:u},n),p="GET"==o;try{return await(0,y.w)((async()=>{const e=await this.fetchImpl(c.href,l);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for payload: ${a}`;throw new Error(t)}return!p||await e.json()}),"sendActions")}catch(e){return this.logError(e,s),!1}}async getUserActions(e){const t=[{key:"actionType",value:e}],n=await this.sendGenericActionRequest({additionalParams:t,endpoint:this.userActionServiceEndPoint,method:"GET"});return n&&n.value}async setUserAction(e,t,n){return!!await this.sendGenericActionRequest({endpoint:n?this.pdpServiceEndpoint:this.userActionServiceEndPoint,method:"POST",payload:{actionType:e,...t}},!0)}async enableCard(e,t){const n=await this.getRequestInit({method:"DELETE"}),i=(0,m.PH)(this.pdpServiceEndpoint),r=2===await(0,w.XJ)(),o=this.getCommonParams(r,null,!0);o.forEach((e=>{e.value&&i.searchParams.set(e.key,e.value)}));[...[{key:"$filter",value:`actionType eq 'Disabled' and targetType eq '${t}' and definitionName eq '${e}'`}],...o].forEach((e=>{e.value&&i.searchParams.set(e.key,e.value)}));try{await(0,y.w)((async()=>{const e=await this.fetchImpl(i.href,n);if(e.status>=400){const n=`OneService returned error response. Status: ${e.status} for actionType: Disabled, targetType: ${t}`;throw new Error(n)}return e}),"enableCard")}catch(e){return!1}return!0}async deleteUserAction(e,t){const n=[{key:"actionType",value:e},{key:"targetId",value:t.targetId},{key:"definitionName",value:t.definitionName}];return!!await this.sendGenericActionRequest({additionalParams:n,endpoint:this.userActionServiceEndPoint,method:"DELETE"})}async deleteUserActionRelatedTraffic(e,t){const n=await this.getRequestInit({method:"DELETE"}),i=await this.getTrafficPdpUrl("Default",null,null,e,t.targetId);try{await(0,y.w)((async()=>{const t=await this.fetchImpl(i.href,n);if(t.status>=400){const n=`OneService returned error response. Status: ${t.status} for actionType: ${e}, targetType: ${a.L.Traffic}`;throw new Error(n)}return t}),"deleteActionRelatedTraffic"),this.tryInvalidateBulkFetchedPdpTargetType(a.L.Traffic)}catch(e){return!1}return!0}async updateUserPreference(e){const t=await this.getRequestInit({method:"POST"});t.body=e;const n=(0,m.PH)(this.userUpdateEndpoint),i=2===await(0,w.XJ)();this.getCommonParams(i,null,!0).forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{const i=await this.fetchImpl(n.href,t);if(i.status>=400){const t=`OneService returned error response while updating user preference. Status: ${i.status}, payload: ${e}`;throw new Error(t)}}catch(e){return!1}return!0}setPdpTargetTypesForBulkLoad(e){e&&e.length&&!this.bulkGraphActionTargetTypes&&(this.bulkGraphActionTargetTypes=e)}async readPdpWithTargetType(e,t=!1,n=void 0,i={},a=!0,s=[],c=!1){if(a){const t=await this.getFromWebWorker(e);if(t)return t}if(this.bulkGraphActionTargetTypes&&this.bulkGraphActionTargetTypes.length)if(this.bulkGraphActionTargetTypes.indexOf(e)>=0){this.bulkGraphActionResultCache=this.bulkGraphActionResultCache||await(this.bulkGraphActionPromise||(this.bulkGraphActionPromise=this.fetchPdpWithTargetTypes(this.bulkGraphActionTargetTypes,t,n,i,s,c)));const r=this.bulkGraphActionResultCache.get(e);if(r)return{value:r}}else(0,r.H)(o.srQ,`Received an unknown target type "${e}" that was not in the bulk graph action target types list "${this.bulkGraphActionTargetTypes}". Falling back to new network call. Please update the EntryPoint config's "graphActionsToBulkLoad" property to include this type.`);const d=(await this.fetchPdpWithTargetTypes([e],t,n,i,s,c)).get(e);if(d)return{value:d}}async deleteFromPdp(e,t,n,i={},r=void 0,o="Follow",a,s=[],c=!1){const d=await this.getRequestInit({method:"DELETE"},i,c),u=(0,m.PH)(this.pdpServiceEndpoint),l=2===await(0,w.XJ)(),p=this.getCommonParams(l&&!c),h=`targetType eq '${e}'`,g=n.map((e=>`${t} eq '${e}'`)).join(" or ");let f=`actionType eq '${o}' and (${g}) and (${h})`;r&&(f+=` and (degree eq '${r}')`),u.searchParams.set("$filter",f),[...p,...s].forEach((e=>{e.value&&u.searchParams.set(e.key,e.value)}));try{await(0,y.w)((async()=>{const t=await this.fetchImpl(u.href,d);if(t.status>=400){const n=`OneService returned error response. Status: ${t.status} for actionType: ${o}, targetType: ${e}`;throw new Error(n)}return t}),"deleteFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(e)}catch(e){return a&&v.M0.sendAppErrorEvent({...a,pb:{...a.pb,actionType:o,error:e.message}}),!1}return!0}tryInvalidateBulkFetchedPdpTargetType(e){this.bulkGraphActionResultCache&&this.bulkGraphActionResultCache.delete(e)}async fetchPdpWithTargetTypes(e,t=!1,n=void 0,i={},r=[],o=!1){if(!e.length)return new Map;const s=e.map((e=>`targetType eq '${e}'`)).join(" or "),c=[{key:"$top",value:`${n=n||10*e.length*2}`},{key:"$filter",value:`actionType eq 'Follow' and (${s})`}],u=await this.getRequestInit({method:"GET"},i);!0===t&&(u.cache="no-store");const l=(0,m.PH)(this.pdpServiceEndpoint),p=2===await(0,w.XJ)();[...c,...this.getCommonParams(p),...r].forEach((e=>{e.value&&l.searchParams.set(e.key,e.value)}));const h=await(0,y.w)((async()=>{const e=await this.fetchImpl(l.href,u);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e}),"readPDPData");if(!h.ok)throw Error(`code=${h.status}, ${h.statusText}`);if(o){const e=(h.headers.get("ddd-auth-features")||"").split(";");if(!e.includes("AadStateOrigin:AuthorizationJwtToken")&&!e.includes("MsaStateOrigin:AuthorizationJwtToken"))throw new d("user does not have valid auth token")}const g=new Map,f=await h.json();if(!f)return g;if(f.value)for(const e of f.value){let t=g.get(e.targetType);t||g.set(e.targetType,t=[]),t.push(e)}for(const t of e)if(g.get(t)||g.set(t,[]),t===a.L.Finance){if("all-cgcombo"===l.searchParams.get("interestType")){const e=g.get(a.L.CasualGame)||[];let n=g.get(a.L.Finance)||[];n=n.concat(e),g.set(t,n)}}return g}async updateMarketPreference(e){const t=await this.getRequestInit({method:"POST",credentials:"include",body:JSON.stringify({userSettings:{preferredMarket:e}})}),n=(0,m.PH)(this.userUpdateEndpoint);(2===await(0,w.XJ)()?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{const i=await this.fetchImpl(n.href,t);if(!i.ok)throw new Error(`Failed to update market preference: Status: ${i.status}`);return this.marketQSPOverride&&window.history.pushState(null,"",p.cX.updateSearchParam(new URL(window.location.href),"cm",e)),!0}catch(e){return i.k.logError(e.message),!1}}async updateFeedPreference(e){const t="winWidgets"===u.jG.AppType?"rubyProng2OptOut":"rubyOptOut",n=await this.getRequestInit({method:"POST",credentials:"include",body:JSON.stringify({userSettings:{[t]:e?"0":"1"}})}),r=(0,m.PH)(this.userUpdateEndpoint);(2===await(0,w.XJ)()?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&r.searchParams.set(e.key,e.value)}));try{const e=await this.fetchImpl(r.href,n);if(!e.ok)throw new Error(`Failed to update feed preference: Status: ${e.status}`);return!0}catch(e){return i.k.logError(e.message),!1}}async getFromWebWorker(e){let t=null;if(h.yb){const n=this.maptoWebWorkerId(e);if(n&&n.trim()){const n=await(0,h.ot)({id:this.maptoWebWorkerId(e)});n.fetched&&(t=n.payload)}}return t}maptoWebWorkerId(e){switch(e){case a.L.Location:return"weatherpdp";case a.L.League:return"sportsleaguepdp";case a.L.Player:return"sportsplayerpdp";case a.L.Team:return"sportsteampdp";case a.L.Finance:return"moneypdp";default:return""}}async getRequestInit(e={method:"GET"},t={},n=!1){const i=await f.$D.getOneServiceHeaders();return e.headers={...n?{}:i,...t},e.credentials="include",e}async getFollowedLists(){const e=await this.getRequestInit({method:"GET"}),t=(0,m.PH)(this.userUpdateEndpoint),n=2===await(0,w.XJ)(),a=(0,l.nP)().CurrentFlights?.split(",").filter((e=>e.includes("1s"))).join(",")||"",s=n?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,a,!0):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,a,!0);for(const{key:e,value:n}of s)n&&t.searchParams.set(e,n);try{const n=await(0,y.w)((async()=>{const n=await this.fetchImpl(t.href,e);if(!n.ok){if(n.status>=400&&n.status<500&&408!=n.status)return n;(0,r.OO)(null,o.G9t,"Error get followed list")}return n}),"getFollowedLists");return n.ok||(0,r.OO)(null,o.G9t,"Error get followed list"),await n.json()}catch(e){return i.k.logError(e.message),null}}async addToFollowedLists(e){const t=a.L.Finance,n=await this.getRequestInit({method:"POST",body:JSON.stringify({financeListIds:e})}),i=(0,m.PH)(this.userUpdateEndpoint),r=2===await(0,w.XJ)(),o=(0,l.nP)().CurrentFlights?.split(",").filter((e=>e.includes("1s"))).join(",")||"";let s;(r?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,o,!0):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,o,!0)).forEach((e=>{e.value&&i.searchParams.set(e.key,e.value)}));try{s=await(0,y.w)((async()=>{const e=await this.fetchImpl(i.href,n);if(e.status>=400){const n=`OneService returned error response. Status: ${e.status} for actionType: FollowList, targetType: ${t}`;throw new Error(n)}return e.json()}),"addToFollowedLists")}catch(e){return!1}return!0}async deleteFromFollowedLists(e){const t=a.L.Finance,n=await this.getRequestInit({method:"DELETE"}),i=(0,m.PH)(this.userUpdateEndpoint),r=2===await(0,w.XJ)(),o=(0,l.nP)().CurrentFlights?.split(",").filter((e=>e.includes("1s"))).join(",")||"";let s;[...r?f.$D.getOneServiceParamsWithAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,o,!0):f.$D.getOneServiceParamsWithoutAuth((0,u.Yq)().UserId,this.ocid,!this.ocidOverride,o,!0),...[{key:"financeListIds",value:e.toString()}]].forEach((e=>{e.value&&i.searchParams.set(e.key,e.value)}));try{s=await(0,y.w)((async()=>{const e=await this.fetchImpl(i.href,n);if(e.status>=400){const n=`OneService returned error response. Status: ${e.status} for actionType: UnFollowList, targetType: ${t}`;throw new Error(n)}return e.json()}),"deleteFromFollowedLists")}catch(e){return!1}return!0}logError(e,t){t?v.M0.sendAppErrorEvent({...t,pb:{...t.pb,error:e.message}}):i.k.logError(e.message)}}const C=new class extends b{constructor(){super((0,g.j)()),"windowsNewsPlus"===u.jG.AppType||"winWidgets"===u.jG.AppType?(this.ocid="winp2",this.ocidOverride=!0):"sharedWidgets"===u.jG.AppType?(this.ocid="hpwidget",this.ocidOverride=!0):"travel"===u.jG.AppType?(this.ocid="travel-verthp-feeds",this.ocidOverride=!0):"gaming"===u.jG.AppType?(this.ocid="authconstants-peregrine",this.ocidOverride=!0):"health"===u.jG.AppType?(this.ocid="health-verthp-feeds",this.ocidOverride=!0):"bingHomepage"===u.jG.AppType?(this.ocid="BingHp01",this.ocidOverride=!0):"windowsShellV2"===u.jG.AppType?(this.ocid="pdp-peregrine",this.ocidOverride=!0):"edgeChromium"===u.jG.AppType&&u.jG.IsHeroNTP&&(this.marketQSPOverride=!0)}}},22691:function(e,t,n){n.d(t,{l:function(){return u}});var i=n(33018),r=n(44132);class o{constructor(){this.callbacks=[],this.clickCallbacks=[]}getSelectedPivot(){return this.selectedPivot}setSelectedPivot(e){e&&e.pivotId&&(this.selectedPivot={...e})}switchPivot(e,t){const n=this.selectedPivot;this.selectedPivot={...e};const i={hash:this.selectedPivot.context?.hash,navIsSticky:this.selectedPivot.navIsSticky,newSelection:this.selectedPivot,oldSelection:n};this.callbacks.sort(((e,t)=>e.switchCallbackOrder-t.switchCallbackOrder)),t&&r.M0.addOrUpdateTmplProperty("pvcb",this.callbacks.length.toString());for(const e of this.callbacks)e.callback(i)}clickPivot(e=!0,t){for(const n of this.clickCallbacks)n(e,t)}addSwitchListener(e,t=i.I.AfterLoadContent){this.callbacks.find((n=>n.callback===e&&n.switchCallbackOrder===t))||this.callbacks.push({callback:e,switchCallbackOrder:t})}removeSwitchListener(e){this.callbacks=this.callbacks.filter((t=>t.callback!==e))}addClickListener(e){this.clickCallbacks.push(e)}removeClickListener(e){this.clickCallbacks=this.clickCallbacks.filter((t=>t!==e))}reportLoadComplete(){this.loadComplete=!0,this.loadCompleteResolveCallback&&this.loadCompleteResolveCallback()}waitForLoadComplete(){return this.loadCompletePromise?this.loadCompletePromise:this.loadComplete?Promise.resolve():(this.loadCompletePromise=new Promise((e=>{this.loadCompleteResolveCallback=e})),this.loadCompletePromise)}}var a=n(18875),s=n(52185);const c="__PivotManager_default__",d="__PivotManager_namedSwitchers__";function u(e){if(e){const t=s.Gq.get(d,(()=>new Map));let n=t.get(e);return n||(n=new o,t.set(e,n)),n}return s.Gq.get(c,(()=>new o))}(0,a.U)((()=>{s.Gq.delete(c),s.Gq.delete(d)}))},33018:function(e,t,n){var i;n.d(t,{I:function(){return i}}),function(e){e[e.Telemetry=0]="Telemetry",e[e.Monetization=1]="Monetization",e[e.LoadContent=2]="LoadContent",e[e.AfterLoadContent=3]="AfterLoadContent"}(i||(i={}))},17681:function(e,t,n){n.d(t,{X:function(){return r}});var i=n(24709);class r{static#e=this.pageVisibilityChange=new i.C("PageVisibilityChange");static#t=this.timeForPageReveal=new i.C("TimeForPageReveal");static#n=this.forcePageReload=new i.C("ForcePageReload");static#i=this.updateCurrentPageRefreshState=new i.C("UpdateCurrentPageRefreshState");static#r=this.updateDidRenderStartInBackgroundRenderFlag=new i.C("UpdateDidRenderStartInBackgroundRenderFlag")}},47581:function(e,t,n){n.d(t,{Eu:function(){return p},bY:function(){return l},fv:function(){return h}});var i=n(523),r=n(16986),o=n(77016),a=n(17681),s=n(17779),c=n(33779),d=n(5302),u=n(13218);function l(e){const t=o._.getInstance().rootReducer.connector(i._8);t&&a.X.forcePageReload.getActionSender(t).send(e||s.T.SettingsChange)}function p(e){const t=o._.getInstance().rootReducer.connector(i._8);t&&a.X.timeForPageReveal.getActionSender(t).send(e)}function h(e){if(!u.Al.IsPreload)return;if("windowsShell"===u.Al.ClientSettings.apptype||"windowsShellV2"===u.Al.ClientSettings.apptype)return e.Win10PerfDCREnabled=1,e[r.Qf]=e[r.dd],delete e[r.dd],delete e["TTVR.E2E"],delete e["TTVR.Client"],delete e["TTVR.E2E_internal_1"],delete e["TTVR.Client_internal_1"],delete e["TTVR.E2E_internal_2"],delete e["TTVR.Client_internal_2"],void delete e.launchType;const t=function(){const e=o._.getInstance().rootReducer.connector(i._8);if(!e)return!1;return e.getCurrentState().didRenderStartInBackground}();t&&("edgeChromium"===u.Al.ClientSettings.apptype?(e[r.C7]=1,e[r.eO]=1):e[r.eO]=1);const n=e[r.Lh],a=e[r.dd],s=e[r.pM],l=e[r.pc];let p=!1;if((isNaN(a)||null===a)&&((0,c.H)(d.vAF,"TTVR missing during preload."),p=!0),(isNaN(n)||null===n)&&((0,c.H)(d.Hif,"TFPR missing during preload."),p=!0),p)return;const h=e[r.Lh]=e[r.dd]=Math.min(n,a);t&&(e[r.Qf]=a),isNaN(s)||null===s?(0,c.H)(d.vwD,"TTVR.SearchBox missing during preload."):e[r.pM]=Math.min(h,s),isNaN(l)||null===l?(0,c.H)(d.sEv,"TTF.SearchBox missing during preload."):e[r.pc]=Math.min(h,l)}},16986:function(e,t,n){n.d(t,{C7:function(){return u},H$:function(){return i},Lh:function(){return s},Qf:function(){return c},dd:function(){return o},eO:function(){return d},jh:function(){return l},pM:function(){return a},pc:function(){return r}});const i="TTPR2",r="TTF.SearchBox",o="TTVR",a="TTVR.SearchBox",s="TFPR",c="TTVR.BackgroundExecution",d="backgroundpreload",u="prerender",l="TTAF"},17779:function(e,t,n){var i;n.d(t,{T:function(){return i}}),function(e){e[e.StalePage=1]="StalePage",e[e.SettingsChange=2]="SettingsChange",e[e.MuidChange=3]="MuidChange",e[e.GizmoSettingChange=4]="GizmoSettingChange",e[e.TopSites=5]="TopSites",e[e.PivotSwitch=6]="PivotSwitch",e[e.SignInStateChange=7]="SignInStateChange",e[e.MutePublisher=8]="MutePublisher",e[e.UnMutePublisher=9]="UnMutePublisher",e[e.Dislike=10]="Dislike",e[e.Like=11]="Like",e[e.Save=12]="Save",e[e.Hide=13]="Hide",e[e.KidsMode=14]="KidsMode",e[e.MarketChange=15]="MarketChange",e[e.InterestsSdCardSettingChange=16]="InterestsSdCardSettingChange",e[e.InterestsChange=17]="InterestsChange",e[e.WeatherChange=18]="WeatherChange",e[e.MoneyCardChange=19]="MoneyCardChange",e[e.Disabled=20]="Disabled"}(i||(i={}))},64812:function(e,t,n){n.d(t,{h:function(){return C}});var i=n(58867),r=n(36577),o=n(98130),a=n(94769);const s=404,c=429,d="Authorization",u="Content-Type",l="Retry-After",p="application/json; charset=utf-8";var h=n(31913),g=n(33779);const f="color:white;background-color:green;border-radius:6px;padding:2px 5px;font-weight:bold;text-align:center",m=e=>{const t=new Date(Date.now()),n=t.toISOString?t.toISOString():t.toString();if(!e)return{utcNow:n,invalidReason:"NoToken"};let i;try{i=JSON.parse(atob(e.split(".")[1]))}catch{return{utcNow:n,invalidReason:"InvalidToken"}}if(!i?.exp)return{utcNow:n,invalidReason:"NoExpiration"};const r=1e3*i.exp,o=new Date(r),a=o.toISOString?o.toISOString():o.toString();return{isExpired:o<t,expiration:a,expirationMilliseconds:r,utcNow:n}},y=(e,t,n,i,r,o,a=void 0,s=void 0,c=void 0)=>{const d=new Date(Date.now()),u=d.toISOString?d.toISOString():d.toString();return{id:e,type:t,message:n,apiName:r.apiName,name:r.name,clientRequestId:i,retryCount:o,utcNow:u,tokenExpiration:m(a),authenticationMilliseconds:s,fetchMilliseconds:c}},v=e=>{(0,g.H)(e.id,e.message,JSON.stringify(e),{},!1)},S=e=>{((e,...t)=>{console.error(`%c${e}`,f,...t)})(`${e.apiName}.${e.name}`,e.message,e)},w=e=>new Promise((t=>setTimeout(t,e))),b=async e=>{const t=performance.now(),n=await e(),i=performance.now();return{result:n,durationMilliseconds:Math.round(i-t)}},C=async e=>(async(e,t,n,i=3)=>{if(i<1)throw new Error("Maximum number of retries must be more than zero.");let r;for(let o=0;o<i&&(r=await e(o),t(r));++o){const e=n(o,r);await w(e)}return r})((t=>T(e,t)),(e=>e.error?.authenticationStatus===i.H.MaySucceedOnRetry||e?.status===c),k,3),T=async(e,t)=>{const n=(0,a.pW)();if(await(0,o.Yq)().unsupportedEnterpriseCloud){const i=((e,t,n)=>{const i=y(t.errors.unsupportedEnterpriseCloud,"UnsupportedCloud","Unsupported enterprise cloud.",e,t,n);return v(i),S(i),i})(n,e,t);return{clientRequestId:n,ok:!1,error:i,url:e.url,retryCount:t}}let g,f,m;try{const{result:o,durationMilliseconds:a}=await b((()=>(0,r.Kf)()?.getAuthData(e.authentication)));if(g=o,f=a,g.error){const r=((e,t,n,r,o)=>{let a,s,c;r.error?.status===i.H.InteractionRequired?(a=t.errors.authenticationUserInteractionRequired,s="UserInteractionRequired",c="Failed to authenticate. User interaction required."):r.error?.status===i.H.AuthProviderNotSupported?(a=t.errors.authenticationProviderNotSupported,s="AuthenticationProviderNotSupported",c="Failed to authenticate. Authentication provider is not supported."):(a=t.errors.authenticationError,s="AuthenticationFailed",c="Failed to authenticate.");const d={...y(a,s,c,e,t,n,r.authToken,o),authenticationStatus:r.error?.status};v(d);const u={...d,authenticationError:r.error?(0,h.P)(r.error,t.authentication):void 0,authenticationErrorString:r.error?.internalError?.error_string};return S(u),u})(n,e,t,g,f);return{clientRequestId:n,ok:!1,error:r,url:e.url,retryCount:t}}g.authToken&&(e.headers={[d]:`Bearer ${g.authToken}`,...e.headers}),e.content&&(e.body=JSON.stringify(e.content),e.headers={[u]:p,...e.headers});const{result:w,durationMilliseconds:C}=await b((()=>globalThis.fetch(e.url.toString(),e)));m=C;const T=I(e,w);let k,E,R;return T?k=await P(e,w):E=await A(e,w),w.status===c?R=((e,t,n,i,r,o,a)=>{const s={...y(t.errors.tooManyRequests,"TooManyRequests","Too many requests.",e,t,i,r,o,a),retryAfterHttpHeader:n.headers.get(l)};return v(s),S(s),s})(n,e,w,t,g.authToken,f,m):T||(R=((e,t,n,i,r,o,a,c)=>{const d=t.errors.notFoundStatusCode&&c===s?t.errors.notFoundStatusCode:t.errors.unsuccessfulStatusCode,u={...y(d,"UnsuccessfulStatusCode","Unsuccessful status code returned.",e,t,n,i,r,o),contentErrorCode:a?.error?.code};return v(u),S(u),u})(n,e,t,g.authToken,f,m,E,w.status)),{ok:w.ok,headers:w.headers,redirected:w.redirected,status:w.status,statusText:w.statusText,type:w.type,url:e.url,clientRequestId:n,content:k,contentError:E,error:R,retryCount:t}}catch(i){const r=((e,t,n,i,r,o,a)=>{const s={...y(t.errors.unhandledException,"UnhandledException","Unhandled exception thrown.",e,t,n,r,o,a),exceptionMessage:i?.message};return v(s),S(s),s})(n,e,t,i,g?.authToken,f,m);return{clientRequestId:n,ok:!1,error:r,url:e.url,retryCount:t}}},k=(e,t)=>{try{const e=t.headers?.get(l);if(e)return 1e3*parseInt(e)}catch{}return 1e3*(2^e)},P=async(e,t)=>{if(t.body)return e.transform?await e.transform(t):await t.json()},A=async(e,t)=>{if(t.body)return e.transformError?await e.transformError(t):await t.json()},I=(e,t)=>e.isSuccess?e.isSuccess(t):t.ok},40053:function(e,t,n){var i;n.d(t,{S:function(){return i},PublisherServiceClient:function(){return m}}),function(e){e.More="More",e.Mute="Mute",e.Read="Read"}(i||(i={}));var r=n(16715),o=n(13218),a=n(98130),s=n(88048),c=n(97265),d=n(32308),u=n(39197),l=n(73452),p=n(47290),h=n(49441),g=n(77062),f=n(52211);class m{constructor(e,t=!0){this.fetchImpl=e,this.addPageInfoToOcid=t,this.followedPublishersEndpoint="v1/News/Users/Me/PreferredProviders",this.followedSourcesEndpoint="msn/sources",this.publishersServiceEndpoint="Msn/Providers",this.actionsServiceEndpoint="Graph/Actions",this.followActionSourceEndpoint="community/follows",this.ocid="feeds"}getOcid(){return this.ocid}async getUserMutedPublishers(){const e=await this.getUserActions(i.Mute);if(!e||!e.value)return null;if(!e.value.length)return[];const t=e.value.reduce(((e,t)=>(e[t.targetId]=t,e)),{}),n=await this.getPublisherDetails(Object.keys(t));if(!n||!n.value||!n.value.length)return null;return n.value.map((e=>{const n={createdDateTime:t[e.id].createdDateTime};return{...e,...n}}))}async getUserFollowedPublishers(e=100){const t=await this.getRequestInit(),n=[...await this.getCommonParams(),{key:"$top",value:`${e}`}],i=(0,s.PH)(this.followedPublishersEndpoint);this.appendQs(n,i),(0,r.aH)()||(0,g.s6)(i);const o=await this.sendRequest(decodeURIComponent(i.href),t,"getFollowedPublishers");return o?.value}async getUserFollowedSources(e=100){const t=await this.getRequestInit(),n=[...await this.getCommonParams(),{key:"$top",value:`${e}`},{key:"queryType",value:"MyFeed"}],i=(0,s.PH)(this.followedSourcesEndpoint);let o;this.appendQs(n,i),(0,r.aH)()||(0,g.s6)(i);try{o=await this.sendRequest(decodeURIComponent(i.href),t,"getFollowedSources")}catch(e){throw new Error(`{url: ${i.href}}`)}return o?.value?.length>0?o?.value[0]?.subCards.map((e=>{const t=e.intAttributes&&1==e.intAttributes.disableProfile;return{...e,profileId:t?null:e.profileId,displayName:e.name,logos:[{imageLink:{href:e.image?.url}}]}})):[]}async publisherUserAction(e,t,n){if(!e||!t)return null;const i=await this.getRequestInit();i.method=n;let r=await this.getCommonParams();"POST"===n?i.body=JSON.stringify({actionType:t,targetId:e,targetType:"SourceProvider"}):"DELETE"===n&&(r=[...r,{key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`}]);const o=(0,s.PH)(this.actionsServiceEndpoint);this.appendQs(r,o);const a=await this.sendRequest(decodeURIComponent(o.href),i,`deleteUserAction ${t}`,!0,!0);if(a.status>=400){const n=`OneService returned error response. Status: ${a.status} for actionType: ${t}, targetId: ${e}`;throw new Error(n)}return a}async updateSourceFollowState(e,t,n){if(!e)return null;const i=await this.getRequestInit();let r=await this.getCommonParams();r=[...r],t?(i.method="POST",i.body=JSON.stringify({targetId:e})):(i.method="DELETE",r=[...r,{key:"targetId",value:e}]),n&&o.Al.CurrentFlightSet.has("prg-followdata-t")&&r.push({key:"communitymetadata",value:`itemid:${n?.contentId||"undefined"},lineage:${n?.actionPosition||`${a.jG.AppType}>PublisherServiceClient>UndefinedLineage`}`});const c=(0,s.PH)(this.followActionSourceEndpoint);this.appendQs(r,c);const d=t?"follow":"unfollow";try{return await this.sendRequest(decodeURIComponent(c.href),i,`updateSourceFollowState ${d}`,!0,!0)}catch(t){throw new Error(`OneService returned error response. Community follow service  for targetId: ${e}, action: ${d}`)}}async updatePublisherReadTime(e,t,n){if(!e)return null;const r=await this.getRequestInit(),o=await this.getCommonParams(),a=i.Read;r.method="POST",r.body=JSON.stringify({actionType:a,targetType:n,targetId:e,updatedDateTime:t});const c=(0,s.PH)(this.actionsServiceEndpoint);this.appendQs(o,c);try{return await this.sendRequest(decodeURIComponent(c.href),r,`updateSourceReadTime ${a}`,!0,!0)}catch(t){throw new Error(`OneService returned error response for actionType: ${a}, targetId: ${e}`)}}async getUserPublishersReadTimes(){try{const e=await this.generatePublisherStatusRequest(void 0,i.Read);return e?.value}catch(e){throw new Error("OneService returned error response for fetching followed sources read times.")}}async getUserPublisherStatus(e,t){const n=await this.generatePublisherStatusRequest(e,t);return!!n.value?.length}async generatePublisherStatusRequest(e,t){const n=await this.getRequestInit();n.method="GET";const i=e?`and targetId eq '${e}'`:"";let o=await this.getCommonParams();o=[...o,{key:"$filter",value:`actionType eq '${t}' ${i} `}];const a=(0,s.PH)(this.actionsServiceEndpoint);return this.appendQs(o,a),(0,r.aH)()||(0,g.s6)(a),await this.sendRequest(decodeURIComponent(a.href),n,`getUserPublisherStatus ${t}`)}async getUserActions(e,t=100){const n=await this.getRequestInit(),i=[...await this.getCommonParams(),{key:"$filter",value:`actionType eq '${e}' and deleted eq false and targetType eq 'SourceProvider'`},{key:"$top",value:`${t}`}],o=(0,s.PH)(this.actionsServiceEndpoint);return this.appendQs(i,o),(0,r.aH)()||(0,g.s6)(o),await this.sendRequest(decodeURIComponent(o.href),n,`getUserActions ${e}`)}async getPublisherFromProfileIds(e){const t=await this.getRequestInit(),n=(0,s.PH)(this.followedSourcesEndpoint),i=[...c.$D.getOneServiceParamsWithoutAuth(null,this.ocid,this.addPageInfoToOcid),{key:"ids",value:e.join(",")}];return this.appendQs(i,n),await this.sendRequest(decodeURIComponent(n.href),t,"getSourcesFromProfileIds")}async getPublisherDetails(e){const t=await this.getRequestInit(),n=(0,s.PH)(this.publishersServiceEndpoint),i=[...c.$D.getOneServiceParamsWithoutAuth(null,this.ocid,this.addPageInfoToOcid),{key:"ids",value:e.join(",")}];return this.appendQs(i,n),await this.sendRequest(decodeURIComponent(n.href),t,"getPublisherDetails")}async getCommonParams(){if("winWidgets"===a.jG.AppType&&("startfeed"===a.jG.CurrentRequestTargetScope?.pageType&&"ruby"===a.jG.UxMode?(this.ocid="rubyprong2",this.addPageInfoToOcid=!1):(this.ocid="winp2",this.addPageInfoToOcid=!1)),"windowsShell"===a.jG.AppType&&(this.ocid="windows-windowsshellhp-feeds",this.addPageInfoToOcid=!1),(0,r.ce)()&&(this.addPageInfoToOcid=!1,this.ocid="emmx-mmx-feeds"),(0,r.aH)())return this.getSapphireQueryParams();this.forcedApiKey&&(this.addPageInfoToOcid=!1),(0,r.xc)()&&(this.ocid="swiftkey-umf",this.addPageInfoToOcid=!1),(0,r.eh)()&&(this.ocid="bing-dhp-mobile",this.addPageInfoToOcid=!1),"bingHomepage"===a.jG.AppType&&(this.ocid="bing-widgetfeed-Peregrine",this.addPageInfoToOcid=!1);const e=await this.isUserSignedIn()?c.$D.getOneServiceParamsWithAuth(a.jG.UserId||a.jG.ActivityId,this.ocid,this.addPageInfoToOcid):c.$D.getOneServiceParamsWithoutAuth(a.jG.UserId||a.jG.ActivityId,this.ocid,this.addPageInfoToOcid);if(this.forcedApiKey){e.find((e=>"apikey"==e.key)).value=this.forcedApiKey}return e}getSapphireQueryParams(){const e=c.$D.getOneServiceNonDynamicParamsWithoutAuth(this.ocid,this.addPageInfoToOcid,a.jG.UserId||a.jG.ActivityId),t=(0,u._4)();return t&&(e.push({key:a.jG.OneServiceContentMarketQspKey,value:t.market}),a.jG.ShouldUseFdheadQsp&&e.push({key:"fdhead",value:t.features}),e.push({key:"activityId",value:t.activityId}),t.latitude&&t.longitude&&e.push({key:"location",value:`${t.latitude}|${t.longitude}`})),e}async getRequestInit(e=null){return null==e&&(e={method:"GET"}),e.credentials="include",e.headers=(0,l.wq)()?await(0,p.d)():await c.$D.getOneServiceHeaders(),e}async isUserSignedIn(){const e=(0,o.nP)().UserIsSignedIn;if(void 0!==e)return e;return 2===await(0,f.XJ)()}async sendRequest(e,t,n,i,o){return(0,r.aH)()?await this.sapphireRequest(decodeURIComponent(e),t):await this.networkRequest(decodeURIComponent(e),t,n,i,o)}async sapphireRequest(e,t){const n={url:e,headers:t.headers,body:t.body,refresh:!0,needHeader:!0,needCookie:!0};let i;switch(t.method){case"POST":i=await(0,h.Ef)(n);break;case"DELETE":i=await(0,h.o9)(n);break;default:i=await(0,h.FM)(n)}return JSON.parse(i||"{}")}async networkRequest(e,t,n,i,r){return(0,d.w)((async()=>{const n=await this.fetchImpl(e,t);if(!n.ok)throw Error(n.statusText);return i&&(0,g.T1)(),r?n:n.json()}),n)}appendQs(e,t){e.forEach((e=>{e.value&&t.searchParams.set(e.key,e.value)}))}setForcedApiKey(e){this.forcedApiKey=e}}},44653:function(e,t,n){n.d(t,{cB:function(){return d}});var i=n(15598);"undefined"!=typeof window&&window.location.href;const r="timestamp_",o="force_timestamp_",a="_jssMap",s="keys_",c="lastKnown_";function d(){(0,i.$o)().supported&&((0,i.$o)().removeSubstringKeys(c),(0,i.$o)().removeSubstringKeys(r),(0,i.$o)().removeSubstringKeys(o),(0,i.$o)().removeSubstringKeys(s),(0,i.$o)().removeSubstringKeys(a))}},24939:function(e,t,n){n.d(t,{H:function(){return c},q:function(){return s}});var i=n(21215);const r="date",o=globalThis?.requestIdleCallback??(e=>globalThis.setTimeout(e))??(e=>e());class a{constructor(e){this.options=e,this.tryReadCache=async(...e)=>{if(await this.tryOpenCache()){const t=this.options.getCacheKey(...e);if(t){const e=await(this.cache?.match(t));if(this.isValid(e))return Object.assign(e,{isFromCache:!0}),e}}},this.writeCache=async(e,...t)=>{if(200===e?.status&&await this.tryOpenCache()){const n=this.options.getCacheKey(...t);if(n){e.headers.get(r)||e.headers.set(r,(new Date).toUTCString());let t=!1;try{await(this.cache?.put(n,e)),t=!0}catch{}o((()=>this.clearCache(t)))}}},this.clearCache=async(e=!1)=>(await(this.cache?.keys()))?.forEach((async t=>{let n=!e;if(e){const e=await(this.cache?.match(t));n=e&&!this.isValid(e)}n&&await(this.cache?.delete(t))})),this.tryOpenCache=async()=>{if(this.isEnabled&&!this.cache)try{this.cache=await globalThis.caches.open(this.options.cacheName)}catch{}return!!this.cache},this.isValid=e=>{const t=Date.parse(e?.headers?.get(r)||""),n=t&&!isNaN(t)?t+this.maxAgeInMs:void 0;return!!n&&n>=Date.now()},this.isEnabled=(0,i.N)()&&!!globalThis?.caches,this.maxAgeInMs=e.maxAgeInMs||6e4}}const s=e=>new a(e),c=e=>!!e?.isFromCache},9378:function(e,t,n){n.d(t,{LZ:function(){return c},b8:function(){return a},gZ:function(){return i},pR:function(){return r},wc:function(){return s}});var i,r,o=n(34800);function a(e){switch(e){case o.PL.Article:return 13;case o.PL.Slideshow:return 14;case o.PL.Video:return 15;default:return null}}function s(e,t){return t?e.find((e=>t.includes(e.type))):null}function c(e,t){return t?e.find((n=>{if(!t.includes(n.type))return!1;if(n.type===r.EXPLORE){const t=new Set([r.EXPLICITLIKE,r.FOLLOWEDTOPIC,r.FOLLOWEDPUBLISHER]);return e.every((e=>!t.has(e.type)))}return!0})):null}!function(e){e.TRENDING="trending",e.HOT="hot",e.VIEWS="views",e.OPINION="opinion",e.LOCAL="local",e.EXPLICITLIKE="explicitLike",e.FOLLOWEDTREATMENT="followed",e.FOLLOWEDTREATMENTTOPIC="followedTopic",e.FOLLOWEDTREATMENTPUBLISHER="followedPublisher"}(i||(i={})),function(e){e.FOLLOWEDTOPIC="followTopic",e.FOLLOWEDPUBLISHER="followPublisher",e.TRENDING="trending",e.LOCAL="local",e.EXPLICITLIKE="explicitLike",e.EXPLORE="explore"}(r||(r={}))},34800:function(e,t,n){n.d(t,{PL:function(){return i},TU:function(){return a},ne:function(){return o}});var i,r=n(81586);function o(e){switch(e){case"ArticlePreview":case"article":return r.uH.Article;case"SlideshowPreview":case"slideshow":return r.uH.Gallery;case"video":case"VideoPreview":return r.uH.Video;case"WebContentPreview":return r.uH.WebContent;case"WebContentExternal":return r.uH.ExternalLink;default:return null}}!function(e){e.PublisherSpotlightCard="PublisherSpotlightSDCard",e.FollowedPublishersCard="FollowedPublishersSDCard",e.DailyMomentsCard="DailyMomentsSDCard",e.DailyWonderCard="DailyWonder",e.DailyWonderCopilotCard="DailyWonderHeroPrompts",e.DailyWonderHeroVideo="DailyWonderHeroVideo",e.DailyWonderQuoteCard="DailyWonderHeroQuote",e.DailyWonderVideoListCard="DailyWonderHeroRecommended",e.DailyQuizSdCard="DailyQuizSdCard",e.ShoppingBannerSdCard="ShoppingBannerSdCard",e.DailyBriefCard="DailyBrief",e.MobileTrendingSearchCard="mobile-trending-search-card",e.WidgetsNotificationsCard="widgetsNotificationsCard",e.DonationNpoCard="DonationNpoCard",e.EntertainmentPremierCard="premier-sd-card",e.EventSDCardOscarsPrm="EventSDCardOscarsPrm",e.BingDailyQuizCard="bing-daily-quiz-card",e.RichCalendarCard="RichCalendarSD",e.DailyGreetingCard="DailyGreeting",e.EventSDCardElectionMIT1="EventSDCardElectionMIT1",e.EventSDCardElectionMIT2="EventSDCardElectionMIT2",e.EventSDCardElectionMIT3="EventSDCardElectionMIT3",e.EventContentCardENIN1="eventcontentcardenin1",e.CommunityCard="CommunityInfo",e.HotListCard="hotlist",e.TabbedInfopaneCard="tabbedinfopane",e.TabbedInfopaneCardTab="tabbed-infopane-tab",e.MangaCard="MangaCard",e.MangaCarousel="MangaCarousel",e.MangaParentPageCarousel="MangaParentPageCarousel",e.MangaReadMoreCarousel="MangaReadMoreCarousel",e.MangaTrendingCarousel="MangaTrendingCarousel",e.MobileVideoSdCard="MobileVideoSdCard",e.VideoShoppingCarouselCard="VideoShoppingCarousel",e.RealEstateCard="real-estate-card",e.RealEstateCarousel="RealEstateCarousel",e.RealEstateCardReact="RealEstateCardReact",e.PrismCarouselCard="PrismFeedCarousel",e.TrendingSearchCard="TrendingSearchCard",e.CommuteCard="CommuteMetadata",e.DigestCard="digest-card",e.Article="article",e.Slideshow="slideshow",e.Video="video",e.Spotlight="content360",e.Infopane="infopane",e.TabbedInfopane="tabbedInfopane",e.GemCard="GemCard",e.GemRiverCard="GemRiverCard",e.GemGreeting="GemGreeting",e.GemInsight="GemInsight",e.GemPrompts="GemPrompts",e.GemShopping="GemShopping",e.Gem_Article_RelatedArticles="Gem_Article_RelatedArticles",e.Gem_Finance_GetCharts="Gem_Finance_GetCharts",e.Gem_GenAIContent_InsightSummary="Gem_GenAIContent_InsightSummary",e.Gem_Media_Image="Gem_Media_Image",e.Gem_Prompts="Gem_Prompts",e.HeroGem="HeroGem",e.RiverGem="RiverGem",e.TopSectionNews="TopSectionNews",e.HalfPane="HalfPane",e.HeadToHead="HeadToHead",e.Mosaic="Mosaic",e.Triptych="Triptych",e.TabbedInfopaneTab="tabbedInfopaneTab",e.WebContent="webcontent",e.ExternalLink="link",e.ChannelCarousel="followCarousel",e.ChannelFilterCard="filteredChannels",e.DynamicFilteredChannel="dynamicfilteredchannels",e.InterestManagementCard="InterestManager",e.GamingInterestGroup="GamingInterestGroup",e.DenseList="DenseList",e.BackFillContent="BackfillContent",e.MyBriefRiverCard="toppicks",e.panoCard="panocard",e.NativeAd="nativead",e.NativeTopAd="nativetopad",e.CmsAd="cmsad",e.BuyDirectAd="directbuyad",e.AmplifyAd="amplifyad",e.BoostAd="BoostAd",e.EventSDCardAmplifyAds="EventSDCardAmplifyAds",e.FirstPartyAd="firstpartyad",e.ShoppingCard="ShoppingCard",e.ShoppingBWMCard="BuyWithMicrosoftCard",e.ShoppingBWMCarousel="BuyWithMicrosoftCarousel",e.EdgeShoppingCard="EdgeShoppingCard",e.ShoppingCarousel="ShoppingCarousel",e.ShoppingCarousel2="ShoppingCarousel2",e.ShoppingRiver="ShoppingRiver",e.ShoppingRiver1="ShoppingRiver1",e.ShoppingRiver2="ShoppingRiver2",e.ShoppingRiver3="ShoppingRiver3",e.EventSDCardShopping="EventSDCardShopping",e.EventInfopaneShoppingAI="EventInfopaneShoppingAI",e.ShoppingInfopaneAd1="ShoppingInfopane1",e.ShoppingInfopaneAd2="ShoppingInfopane2",e.ShoppingInfopaneAd3="ShoppingInfopane3",e.ShoppingInfopaneAd4="ShoppingInfopane4",e.Shopping1688Carousel="Shopping1688Carousel",e.ShoppingTopSectionCard="ShoppingTopSectionCard",e.ComicsCarousel="ComicsCarousel",e.EditorsPickCarousel="EditorsPickCarousel",e.SelectCarousel="SelectCarousel",e.DailyFixGamesCarousel="DailyFixGamesCarousel",e.SubscriptionCarousel="SubscriptionCarousel",e.BeaconProviderUpsell="BeaconProviderUpsell",e.MoneyTopicStripe="MoneyTopicStripe",e.SportsTopicStripe="SportsTopicStripe",e.LinkedInCard="linkedInNewsCard",e.SectionHeader="GreetingsUpsell",e.TopStories="topStories",e.TopStoriesV2="cgtopStories",e.TopStoriesRuby="TopStories",e.TrendingNowRuby="TrendingNow",e.LittleKnownFactsCard="LittleKnownFacts",e.NewsGroups="newsGroups",e.NewsAnswerModule="NewsAnswerModule",e.TrendingNowCarousel="TrendingNowCarousel",e.TopStoriesCarousel="TopStoriesCarousel",e.WorkHeadlines="workNews",e.Trending="trendingnow",e.TrendingTopics="TrendingTopicsUpsellAnaheim",e.LocalNews="XfeedUpsell",e.LocalNewsFeed="LocalNewsFeed",e.SageGroupedFeed="SageGroupedFeed",e.TrendingInTenMinutes="trendingInTenMinutes",e.Horoscope="Horoscope",e.Elections="EventSDCardElection",e.OnThisDay="OnThisDay",e.OnThisDaySDCard="OnThisDaySDCard",e.LocalEventsSDCard="LocalEventsSDCard",e.PartnerUpsell="PartnerUpsell",e.Qna="qnacard",e.quizcard="quizcard",e.Recipes="recipecard",e.Inspiration="PrismFeedCard",e.Rewards="rewardscard",e.TravelDestinationCard="TravelDestinationCard",e.TravelDestinationCarouselCard="TravelDestinationCarouselCard",e.TravelInspirationCard="TravelInspirationCard",e.BingHealthCovid19StatsCard="Covid19Stats",e.BingHealthFitnessCard="healthcard",e.HealthTipCard="healthtipcard",e.HealthRiverCard="healthrivercard",e.PollsCard="pollscard",e.PlaceholderCard="placeholder",e.WinAppAds="WinAppAds",e.CashbackAds="CashbackAds",e.Promotion="Promotion",e.PromotedAd="PromotedAd",e.BingVideo="BingVideo",e.BingVideoCarousel="BingVideoCarousel",e.BreakingNewsNotification="BreakingNewsNotification",e.CasualGamesCarousel="CasualGamesCarousel",e.CasualGamesCarouselSubItem="CasualGamesCarouselSubItem",e.CasualGamesGroup="CasualGamesGroup",e.CasualGamesGroupSubItem="CasualGamesGroupSubItem",e.CasualGamesProng2Carousel="CasualGamesProng2Carousel",e.CasualGamesStripeCarousel="CasualGamesStripeCarousel",e.EsportsCasualGames="esportsCasualGames",e.EsportsHighlight="esportsHighlight",e.EsportsLiveStream="esportsLiveStream",e.EsportsMatch="esportsMatch",e.EsportsTournament="esportsTournament",e.EventSDCardWorldCup="EventSDCardWorldCup",e.EventSDCardWorldCup2="EventSDCardWorldCup2",e.ShoppingFeedCard="ShoppingFeedCard",e.WeatherHero="WeatherHero",e.WeatherCurrent="WeatherCurrent",e.WeatherForecast="WeatherForecast",e.WeatherMap="WeatherMap",e.WeatherSummary="WeatherSummary",e.WeatherSummary_spotlight="WeatherSummary_spotlight",e.SavedContent="SavedContent",e.StockQuote="StockQuote",e.StockQuote_spotlight="StockQuote_spotlight",e.MoneyInfo="MoneyInfo",e.MoneyPreWL="MoneyPreWL",e.MoneyCrypto="CryptoCard",e.MoneyMarketBrief="MarketBrief",e.MoneyMoreForYouCard="MoneyMoreForYouCard",e.FinanceSpotlightHeroPrice="FinanceSpotlightHeroPrice",e.FinanceSpotlightHeroMarket="FinanceSpotlightHeroMarket",e.FinanceSpotlightHeroRadarGraph="FinanceSpotlightHeroRadarGraph",e.FinanceHeroMarket="FinanceHeroMarket",e.FinanceHeroMarketChart="FinanceHeroMarketChart",e.FinanceHeroNews="FinanceHeroNews",e.FinanceHeroMovers="FinanceHeroMovers",e.FinanceHerowlsummary="FinanceHerowlsummary",e.FinanceHeroSuggested="FinanceHeroSuggested",e.FinanceHeroWatchlistIdeas="FinanceHeroWatchlistIdeas",e.FinanceHeroUpcomingEarnings="FinanceHeroUpcomingEarnings",e.FinanceHeroCurrencies="FinanceHeroCurrencies",e.FinanceHeroCrypto="FinanceHeroCrypto",e.ForYouNotification="ForYouNotification",e.SportsMatch="SportsMatch",e.SportsOlympics="SportsOlympics",e.SportsHeroFre="SportsHeroFre",e.SportsHeroMatchCard="SportsHeroMatchCard",e.SportsHeroLeagueTodaysEvents="SportsHeroLeagueTodaysEvents",e.SportsHeroMatch1SeasonStats="SportsHeroMatch1SeasonStats",e.SportsHeroMatch1Stats="SportsHeroMatch1Stats",e.SportsHeroMatch2SeasonStats="SportsHeroMatch2SeasonStats",e.SportsHeroMatch2Stats="SportsHeroMatch2Stats",e.SportsHeroMatch3SeasonStats="SportsHeroMatch3SeasonStats",e.SportsHeroMatch3Stats="SportsHeroMatch3Stats",e.SportsHeroMatchStatistics="SportsHeroMatchStatistics",e.SportsSpotlight2Match1="SportsSpotlight2Match1",e.SportsSpotlight2Match2="SportsSpotlight2Match2",e.SportsHeroNews="SportsHeroNews",e.SportsHeroOneVsManyEventResult="SportsHeroOneVsManyEventResult",e.SportsHeroOneVsOneEventResult="SportsHeroOneVsOneEventResult",e.SportsHeroSeasonStatistics="SportsHeroSeasonStatistics",e.SportsHeroStandingsRankings="SportsHeroStandingsRankings",e.SportsHeroTeamStandings="SportsHeroTeamStandings",e.SportsHeroTeamStandingWithEvents="SportsHeroTeamStandingWithEvents",e.SportsHeroTeamStandingWithMedals="SportsHeroTeamStandingWithMedals",e.SportsHeroTeamVsTeam="SportsHeroTeamVsTeam",e.SportsHeroTeamVsTeamEventResult="SportsHeroTeamVsTeamEventResult",e.SportsHeroVideo="SportsHeroVideo",e.SportsStackCard="SportsStackCard",e.PersonalFinanceStackCard="PersonalFinanceStackCard",e.TrafficDelays="TrafficDelays",e.TrafficInfo="TrafficInfo",e.Transit="Transit",e.TrafficIncidents="TrafficIncidents",e.TrafficCameras="TrafficCameras",e.TrafficCamerasWithSummary="TrafficCamerasWithSummary",e.TravelTimes="TravelTimes",e.TravelTimesWithSummary="TravelTimesWithSummary",e.TrafficMap="TrafficMap",e.TrafficNews="TrafficNews",e.TrafficTransit="TrafficTransit",e.TrafficSummary="TrafficSummary",e.ShoppingProng2c="ShoppingProng2c",e.ShoppingProngCardResponse="ShoppingProngCardResponse",e.ShoppingOfferCardResponse="ShoppingOfferCardResponse",e.ShoppingProngCarousel="ShoppingProngCarousel",e.ShoppingProngTracking="ShoppingProngTracking",e.ShoppingMerchantCategoryDeals="ShoppingMerchantCategoryDeals",e.ShoppingVideoCarousel="ShoppingVideoCarousel",e.WatchVideoCard="WatchVideoCard",e.Group="group",e.Upsell="FreUpsell",e.Dense="densetab",e.LocalGuide="localdaycard",e.Marketplace="MarketPlace",e.MarketplaceEvent="EventSDCardMarketplace",e.MoreFromProvider="morefromprovider",e.MoreForYou="MoreForYou",e.MiniWidgets="MiniWidgets",e.GamingNews="gaming",e.GamingRecentlyPlayed="GamingRecentlyPlayed",e.RecommendedInterests="RecommendedInterests",e.WindowsShellRecommendedInterests="WindowsShellRecommendedInterests",e.AutosEntityList="AutosEntityList",e.AutosCarousel="AutosCarousel",e.ContainerizedHalfu="containerizedHalfu",e.ComboCard="Combo",e.TopicFeed="TopicFeed",e.RelatedNewsCard="RelatedNewsCard",e.TopicFeedLearnSomethingNew="learnsomethingnew",e.TopicFeedDiversity="diversitycard",e.TopicFeedWeekends="eventcontentcardweekend",e.TopicFeedMomentInTime1="eventcontentcardmit1",e.TopicFeedSports="eventcontentcardsports",e.TopicFeedTrendingNow="trending now",e.TopicFeedTopStories="topstories",e.TopicFeedShopping="eventcontentcardshopping",e.TopicFeedWeather="eventdynamiccontentcardweather",e.Calendar="Calendar",e.Entertainment="Entertainment",e.Family="Family",e.M365="M365",e.Photos="Photos",e.ThirdPartyWidget="3pwidget",e.Tips="Tips",e.ToDo="ToDo",e.XboxGamePass="xboxgamepass",e.Tombstone="tombstone",e.GroupedContent="GroupedContentFeed",e.UserInterestTopic="UserInterestTopic",e.UserInterestNTPProvider="UserInterestNTPProvider",e.SuggestedInterest="SuggestedInterest",e.TopicSuggestionforConsumptionPage="TopicSuggestionforConsumptionPage",e.ProviderSuggestionForConsumptionPage="ProviderSuggestionForConsumptionPage",e.InterestFeed="InterestFeed",e.ProviderFeed="ProviderFeed",e.InterestChannel="InterestChannel",e.ProviderChannel="ProviderChannel",e.UserInterestTopicAndProvider="UserInterestTopicAndProvider",e.NewsFlipper="NewsFlipper",e.ColdStartArticleFreCard="ArticleFre",e.NewsPromotionCard="PromotionFre",e.WindowsShellTopicsCard="WindowsShellTopicsCard",e.WindowsShellNotificationBanner="genericbadge",e.RewardsDailySet="RewardsDailySet",e.BoostAdsBanner="BoostAdsBanner",e.BoostAdsCoachmark="BoostAdsCoachmark",e.EventSDCardSportsMIT1="EventSDCardSportsMIT1",e.EventSDCardSportsMIT2="EventSDCardSportsMIT2",e.EventSDCardSportsMIT3="EventSDCardSportsMIT3",e.UserInterestProvider="UserInterestProvider",e.WindowsShellMorningDigest="NewsDigest",e.TopicsAndProviders="TopicsAndProviders",e.NotificationCard="NotificationCard",e.NTPMorningDigest="MorningDigest",e.MiTHeroSpotlight="MiTHeroSpotlight",e.MiTHeroContent="MiTHeroContent",e.MiTHeroAction="MiTHeroAction",e.MiTHeroFollow="MiTHeroFollow",e.DailyMomentsCard1="DailyMomentsCard1",e.DailyMomentsCard2="DailyMomentsCard2",e.DailyMomentsCard3="DailyMomentsCard3",e.DisplayAdBanner="DisplayAdBanner",e.DisplayAdCard="DisplayAdCard",e.DisplayAd="displayad",e.CatchUpStack="CatchUpStack",e.SimilarRiver="SimilarRiver",e.GemRail="GemRail",e.TopCommentsCard="topcomments",e.CopilotCard="CopilotCard",e.CreatorSpotlight="CreatorSpotlight",e.EntertainmentTakeover="EntertainmentTakeover"}(i||(i={}));const a=[i.NativeAd,i.CmsAd,i.AmplifyAd,i.EventSDCardAmplifyAds,i.BoostAd,i.BoostAdsBanner,i.BoostAdsCoachmark,i.BuyDirectAd,i.NativeTopAd,i.FirstPartyAd,i.ShoppingInfopaneAd1,i.ShoppingInfopaneAd2,i.ShoppingInfopaneAd3,i.ShoppingInfopaneAd4]},38785:function(e,t,n){n.d(t,{Au:function(){return i},Y:function(){return a},pW:function(){return r},tD:function(){return o}});const i="0067acd6d05f4168b92f510d33b9ed74",r="service::api.msn.com::MBI_SSL",o="service::www.msn.com::MBI_SSL",a="api://www.msn.com/OneService.Read"},73452:function(e,t,n){n.d(t,{dw:function(){return a},wq:function(){return r}});var i=n(21215);function r(){if(!(0,i.N)()||function(){const e=new URL(location.href),t=e.searchParams.get("chpltfm")||"",n=e.searchParams.get("ocid")||"",i=t.toLowerCase().split("-")[0];return n.toLowerCase()==="swiftKey".toLowerCase()||"swiftkey"==i.toLowerCase()}())return!1;const e=window.sapphireWebViewBridge?.send,t=window.webkit?.messageHandlers?.send?.postMessage;return e||t}function o(e,t){console.log(e,t);const n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),i={scenario:e,data:{data:t},id:n};window.__sapphirePeregrineState?.gAppId&&!i.data.data.appId&&(i.data.data.appId=window.__sapphirePeregrineState?.gAppId);const r=JSON.stringify(i);return window.webkit?.messageHandlers?.send?.postMessage&&window.webkit?.messageHandlers?.send?.postMessage(r),window.sapphireWebViewBridge?.send&&window.sapphireWebViewBridge.send(r),"subscribe"!==e&&"sendBroadcast"!==e&&window.VPsapphireWebViewBridge?.send&&window.VPsapphireWebViewBridge.send(r),n}function a(e,t,n){if(!(0,i.N)())return;const r=o(e,t);n&&function(e,t){const{gJobListeners:n}=window.__sapphirePeregrineState;n[e]?n[e].push(t):n[e]=[t]}(r,n)}"undefined"==typeof window||window.__sapphirePeregrineState||(window.__sapphirePeregrineState={gJobListeners:{},gObservers:{},gAppId:void 0,gInited:!1})},39197:function(e,t,n){n.d(t,{Nz:function(){return s},Vx:function(){return p},_4:function(){return u},gR:function(){return a}});var i=n(52185),r=n(21215);const o="__SapphireUserInformation__",a=()=>i.Gq.get(o,(()=>null)),s=e=>{i.Gq.set(o,e)},c="__SapphireSSRUserConfig__",d="__SapphireUserConfig__",u=e=>(0,r.N)()?i.Gq.get(d,(()=>e)):(0,r.N)()?null:i.Gq.get(c,(()=>null)),l="__SapphireUserConfigReady__",p=()=>i.Gq.get(l,(()=>!1))},49441:function(e,t,n){n.d(t,{o9:function(){return u},FM:function(){return c},Ef:function(){return d}});var i=n(73452),r=n(38785);function o(e,t){if(function(e){try{return e?.needHeader??!1}catch(e){s(`Failed to get feed needHeader Failed with exception : ${e}`)}}(e))try{const e=JSON.parse(t),n=JSON.parse(e?.header??null),i=n?.["ddd-activityid"]??null;i&&async function(e){const t=window.localStorage.getItem(a);if(void 0!==t&&""!==t&&null!==t){const n=t.split(",");return void(n.length<10&&!n.includes(e)&&window.localStorage.setItem(a,`${t},${e}`))}window.localStorage.setItem(a,e)}(i)}catch(e){s(`Failed to get feed needHeader Failed with exception : ${e}`)}}const a="activityIds";function s(e){(0,i.wq)()&&function(e){new Promise(((t,n)=>{!function(e,t){(0,i.dw)("logEvent",e,t)}(e,(e=>{t(e)}))}))}({appId:r.Au,type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{message:e}})}function c(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("getHttp",e,t)}(e,(n=>{t(n),o(e,n)}))}))}function d(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("postHttp",e,t)}(e,(e=>{t(e)}))}))}function u(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("deleteHttp",e,t)}(e,(e=>{t(e)}))}))}},87148:function(e,t,n){n.d(t,{_k:function(){return o},gR:function(){return r}});var i=n(73452);function r(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("logEvent",e,t)}(e,(e=>{t(e)}))}))}function o(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("logError",e,t)}(e,(e=>{t(e)}))}))}},47290:function(e,t,n){n.d(t,{d:function(){return F}});var i=n(38785),r=n(33779),o=n(5302),a=n(98130),s=n(13218),c=n(73452);function d(e){return new Promise(((t,n)=>{!function(e,t){(0,c.dw)("getUserInfo",e,t)}(e,(e=>{t(e)}))}))}var u=n(39197);const l=(e,t)=>new URL(t).searchParams.get(e)||null;var p=n(87148);function h(e,t){(0,p._k)({type:"Failure",name:"HP_WEBVIEW_APP_ERROR",error:t,data:{error:e,customMessage:t}})}function g(e){return new Promise(((t,n)=>{!function(e,t){(0,c.dw)("loadData",e,t)}(e,(e=>{t(e)}))}))}function f(e){return new Promise(((t,n)=>{!function(e,t){(0,c.dw)("saveData",e,t)}(e,(e=>{t(e)}))}))}var m=n(15598);var y=n(30040);const v="mobileAccessToken",S=(0,m.$o)();async function w(){if(!I())return null;try{let e=S.getItem(v);if(!e)try{e=await function(e,t,n=new Error("Promise timed out")){const i=new Promise(((e,i)=>{setTimeout((()=>{i(n)}),t)}));return Promise.race([e,i])}(g({TOKEN_CACHE_KEY:v}),800).then((e=>e?JSON.parse(e).value:null))}catch(e){(0,r.OO)(e,o.Gfj,"Exception occurred while parsing JSON from native cache"+v)}if(!e)return null;const t=JSON.parse(e);if(function(e){if(!e.token)return!1;if(!function(e){const t=(0,u.gR)();if(t?.userId&&e.userId)return t.userId===e.userId;if(t?.userEmail&&e.userEmail)return t.userEmail===e.userEmail;return A()===e.muid}(e))return!1;return!C(e.expiresOn)}(t)){window.performance.mark("EdgeMobileValidCachedToken",{startTime:1});return{...t,token:y.DS.decode(t.token)}}t.token&&(window.performance.mark("EdgeMobileInvalidCachedToken",{startTime:1}),b({token:""}))}catch(e){(0,r.OO)(e,o.VKD,"Exception occurred while reading content from cache"+v)}return null}function b(e){if(!I())return;const{userId:t,userEmail:n}=(0,u.gR)()??{};try{const i={...e,token:y.DS.encode(e.token),userId:t,userEmail:n,muid:A()},a=JSON.stringify(i);S.setItem(v,a),f({TOKEN_CACHE_KEY:v,value:a}).catch((e=>{(0,r.OO)(e,o.yXV,"Exception occurred while writing content to native cache"+v)}))}catch(e){(0,r.OO)(e,o.yXV,"Exception occurred while writing content to cache"+v)}}function C(e){const t=(new Date).getTime();return!e||e<=t}let T,k,P;function A(){if(void 0===T){const e=E();T=e.fd_muid}return T}function I(){if(void 0===k){const{browser:e}=E(),{browserType:t=""}=e||{};k=/edgeiOS/i.test(t)}return!!k}function E(){if(void 0===P)try{const e=document.head?.getAttribute("data-client-settings");P=e?JSON.parse(e):void 0}catch(e){}return P??{}}let R=!1;async function M(e,t=!1){const n=await async function(){try{return(0,u.gR)()||await async function(){const e=await d({});try{const t=JSON.parse(e),n=window.location.href,i=t.accountType??Object.values(t).find((e=>"MSA"===e||"AAD"===e)),r=t.isSignedIn??(i&&("MSA"===i||"AAD"===i)),a="true"===l("isSignedIn",n);if(void 0===window._isSignedInMismatchReported&&(window._isSignedInMismatchReported=!1),!1===window._isSignedInMismatchReported&&a!==r&&(window._isSignedInMismatchReported=!0,Array.isArray(window._EMDelayedErrorLogs))){const e={type:o.F3v,message:"QSP vs UserInfo mismatch",customMessage:`isSignedIn (QSP: ${a}, bridge: ${r}); accountType: ${i}`};window._EMDelayedErrorLogs.push(e)}(0,u.Nz)({...t,accountType:i,isSignedIn:r})}catch(e){h(e,"SapphireUserConfig.getUserInformationInternal: Failed to parse response")}}(),(0,u.gR)()??{}}catch(e){return(0,r.OO)(e,o.NM,"getUserInfoAsyncFailed: Failed to retrieve user information",`Error message: ${e.message}`),{}}}();if(!Object.keys(n).length)return null;if(n.isSignedIn){if(!(t||!n.accessToken||n.accessTokenExpiresOn&&C(n.accessTokenExpiresOn)))return{token:n.accessToken};{if(!t&&"MSA"===n.accountType){const e=await w();if(e)return e}if(R)return null;if(!n.accountType){(0,r.H)(o.SNW,"getAccessTokenByOAuth: Received empty accountType","Account type is missing in user information.");return h(new Error("received empty accountType"),"empty accountType"),null}let i;try{i=await d({refresh:!0,accountType:n.accountType,type:"AccessToken",scope:e})}catch(e){return(0,r.OO)(e,o.NM,"getAccessTokenByOAuth: Failed to retrieve user info asynchronously",`Error message: ${e.message}`),null}try{const e=JSON.parse(i);if(!e||!1===e.succeed)return(e?.reason??"").includes("InteractionRequired")&&(R=!0),(0,r.H)(o.hRf,"getAccessTokenByOAuth: Failed to retrieve access token",`Access token info: ${JSON.stringify(e)}`),null;if(e.succeed){if(e.expiresOn&&C(e.expiresOn))return(0,r.H)(o.JpF,"getAccessTokenByOAuth: access token is expired",`Access token info: ${JSON.stringify(e)}`),null;const t=e.accessToken.startsWith("t=")?e.accessToken.substring(2):e.accessToken;t&&(0,u.Nz)({...n,accessToken:t});const i={token:t,expiresOn:e.expiresOn};return i.expiresOn&&("MSA"===n.accountType&&b(i),n.accessTokenExpiresOn=i.expiresOn),i}if(Object.keys(e).length>0){let t=Object.values(e).find((e=>e&&"boolean"!=typeof e&&"AAD"!==e))||null;return t&&(t=t.startsWith("t=")?t.substring(2):t,(0,u.Nz)({...n,accessToken:t})),{token:t}}}catch(e){(0,r.OO)(e,o.dy3,"getAccessTokenByOAuth: Failed to parse access token",`Failed to parse ${n.accountType} access token`),h(e,`SapphireUserConfig.getAccessTokenByOAuth: Failed to parse ${n.accountType} access token`)}}}return!1!==n.isSignedIn&&(0,r.H)(o.hRf,"getAccessTokenByOAuth: User is signed in but access token does not exist or is empty",`User information: ${JSON.stringify(n)}`),null}var x=n(21215);let L;async function F(e=!1,t=!1){if(void 0===L&&(L="edgeMobile"===a.jG?.AppType),L&&"bingHomepageMobile"!=s.Al.ClientSettings.pagetype)return await async function(){const e={};e.SiteName="www.msn."+(a.jG?.IsChinaCompliance?"cn":"com");const t=await M(i.Y);return t&&(e.Authorization="Bearer "+t.token),a.jG?.UserId&&a.jG?.CurrentRequestTargetScope?.pageExperiments?.includes("1s-r-user-qsp")&&(e.Muid=a.jG.UserId),e}();const n=await async function(e=!1,t=!1){const n={},a=e&&t;try{const e=await async function(e){const t=(0,u._4)();if(!(0,x.N)()){const{accountType:e,ssrAccessToken:n}=t||{};return"AAD"===e&&n?`Bearer ${n}`:"MSA"===e&&n?n:null}const n=(0,u.gR)()??{};if(n.isSignedIn&&"AAD"===n.accountType){try{const e=await d({accountType:"AAD",type:"AccessToken",resource:"9ea1ad79-fdb6-4f9a-8bc3-2b70f96e34c7"}),t=JSON.parse(e);if(t.accessToken&&t.accessToken.length>0)return(0,u.Nz)({...n,accessToken:t.accessToken}),`Bearer ${t.accessToken}`;(0,r.H)(o.kHv,`Sapphire.getAccessToken: AAD token request failed - ${JSON.stringify(t)}`)}catch(e){(0,r.H)(o.hRf,"Sapphire.getAccessToken: Failed to get or parse AAD access token"),h(e,"SapphireUserConfig.getAccessToken: Failed to parse AAD access token")}return n?.accessToken?`Bearer ${n.accessToken}`:null}if(n.isSignedIn&&"MSA"===n.accountType){try{const t=await d({accountType:"MSA",type:"AccessToken",scope:e}),i=JSON.parse(t);if(i.succeed)return(0,u.Nz)({...n,accessToken:i.accessToken}),i.accessToken;(0,r.H)(o.kHv,`Sapphire.getAccessToken: MSA token request failed - ${JSON.stringify(i)}`)}catch(e){(0,r.H)(o.hRf,"Sapphire.getAccessToken: Failed to get or parse MSA access token."),h(e,"SapphireUserConfig.getAccessToken: Failed to parse MSA access token")}return n.accessToken}return null}(function(e){return e?i.tD:i.pW}(a)),{accountType:t,isSignedIn:s}=(0,u._4)()??{};if(!e)return s&&(n.needCookie=!0),n;a?n.Authorization=e:"MSA"===t?n.UserAuthToken=e:"AAD"===t&&(n.Authorization=e)}catch(e){(0,r.H)(o.Q8W,"Error occured while getting access token.")}return n}(e,t),{muid:c,accountType:l,anid:p}=(0,u._4)()??{};return!(0,x.N)()&&"MSA"===l&&p&&(n.Cookie=`APP_ANON=A=${p};`),c&&(n.MUID=c),n}},59878:function(e,t,n){n.d(t,{R:function(){return o},U:function(){return r}});let i=!1;const r={purgeCacheAsync:async function(e){if(this.isServiceWorkerActive()){const t=(await caches.keys()).filter((t=>t.includes(e)));await Promise.all(t.map((e=>caches.delete(e))))}},purgeEntryInCache:async function(e,t,n){if(this.isServiceWorkerActive()){const i=await caches.open(e),r=(await i.keys()).filter((e=>e.url.startsWith(t)&&e.method===n));await Promise.all(r.map((e=>i.delete(e))))}},isServiceWorkerActive:function(){const{navigator:e}=window,t=e&&e.serviceWorker&&e.serviceWorker.controller;return t&&"activated"===t.state},getIsServiceWorkerEnabled:function(){return i},setIsServiceWorkerEnabled:function(e){i=e}};var o;!function(e){e.base="base",e.followedTopics="followedTopics",e.publishersProfile="publishersProfile",e.river="river",e.subscribedPublishers="subscribedPublishers",e.financeGraphAction="financeGraphAction"}(o||(o={}))},23210:function(e,t,n){n.d(t,{b:function(){return i}});const i=(e=2)=>{let t="/";const n=window.location.pathname.split("/");if(n.length>e&&n[e]){t+=n[1];for(let i=2;i<=e;i++)t+="/"+n[i]}return t}},98341:function(e,t,n){function i(e){if(!navigator.serviceWorker)return;const t=navigator.serviceWorker.controller;return t?r(t,e):navigator.serviceWorker.ready.then((t=>{const n=t.active;if(n)return r(n,e)}))}function r(e,t){return new Promise((n=>{const i=new MessageChannel;i.port1.onmessage=e=>{n(e.data)},e.postMessage(t,[i.port2])}))}n.d(t,{T:function(){return i}})},67406:function(e,t,n){var i;n.d(t,{Z:function(){return y}}),function(e){e.weatherMobileCache="weatherMobileCache",e.telemetrySync="telemetrySync",e.raceEnabled="raceEnabled",e.enableOfficeRoutes="enableOfficeRoutes",e.riverAgeMinutes="riverAgeMinutes",e.enableNetworkFirst="enableNetworkFirst",e.navAgeMinutes="navAgeMinutes",e.enableNavPreload="enableNavPreload",e.enableEmptySectionRoute="enableEmptySectionRoute",e.networkTimeoutSeconds="networkTimeoutSeconds",e.bgTaskNetworkTimeoutSeconds="bgTaskNetworkTimeoutSeconds",e.enableCacheMissDiagnostics="enableCacheMissDiagnostics",e.enableFallbackVerticalsFeed="enableFallbackVerticalsFeed",e.enableExternalCssPrecache="enableExternalCssPrecache",e.enableEnterprisePrecache="enableEnterprisePrecache",e.useWebLayoutEndPoint="useWebLayoutEndPoint",e.noCacheLayoutTemplates="noCacheLayoutTemplates",e.cacheForceDisableContent="cacheForceDisableContent",e.cacheSSRAllResponse="cacheSSRAllResponse",e.cacheSSRBasePageResponse="cacheSSRBasePageResponse",e.enableSSRExtentionCache="enableSSRExtentionCache",e.enableFinanceRoutes="enableFinanceRoutes",e.enableTopicPublisherRoutes="enableTopicPublisherRoutes",e.enableStaticRouting="enableStaticRouting",e.enableStaticNavRouting="enableStaticNavRouting",e.enableStaticAdsRouting="enableStaticAdsRouting",e.useMicroPrefHash="useMicroPrefHash",e.commonHash="commonHash",e.vendorsHash="vendorsHash",e.experienceHash="experienceHash",e.microsoftHash="microsoftHash",e.enableCoreBundlePrecache="enableCoreBundlePrecache",e.ssrBasePageNavAgeMinutes="ssrBasePageNavAgeMinutes",e.enableWidgetsRegion="enableWidgetsRegion",e.disableDefaultNavigationRoute="disableDefaultNavigationRoute",e.disableRiverNetworkFirst="disableRiverNetworkFirst",e.enableLogNavFetchTime="enableLogNavFetchTime",e.enableNTPStaticRoutes="enableNTPStaticRoutes",e.enableNTPLowEndStaticRoutes="enableNTPLowEndStaticRoutes"}(i||(i={}));const r=["enableNetworkFirst","enableEmptySectionRoute","enableNavPreload","enableFallbackVerticalsFeed","enableExternalCssPrecache","enableEnterprisePrecache","useWebLayoutEndPoint","noCacheLayoutTemplates","cacheSSRAllResponse","cacheSSRBasePageResponse","cacheForceDisableContent","enableSSRExtentionCache","enableFinanceRoutes","useMicroPrefHash","enableTopicPublisherRoutes","enableCacheMissDiagnostics","enableStaticRouting","enableStaticNavRouting","enableStaticAdsRouting","enableCoreBundlePrecache","enableWidgetsRegion","disableDefaultNavigationRoute","enableLogNavFetchTime","disableRiverNetworkFirst","enableNTPStaticRoutes","enableNTPLowEndStaticRoutes"];var o=n(33779),a=n(5302),s=n(24032),c=n(13218),d=n(34254);function u(e,t,n=!1,i,u,l,h){if(!e)return void(0,o.H)(a.a6r,"No scriptUrl provided");if(!("serviceWorker"in navigator))return void(0,o.H)(a.a6r,"Service Worker is not in navigator.");const g=function(e,t){const n=new URLSearchParams;return function(e,t){const n=(0,s.L)().getAll("item").find((e=>e&&0===e.indexOf("spalink:")));if(n)return void e.set("item",n.replace("/mobile",""));!function(e,t){const n=c.Al.ClientSettings&&c.Al.ClientSettings.bundleInfo;n?.variant&&e.set("bundlevariant",n.variant);const i=(0,s.L)().get("bundles");if(i)return void e.set("bundles",i);if(t.bundlesOverride)return void e.set("bundles",t.bundlesOverride);n?.alias&&e.set("bundles",n.alias)}(e,t)}(n,e),function(e){"enterprise"===c.Al?.ClientSettings?.audienceMode&&e.set("enableOfficeRoutes","true")}(n),function(e,t){isNaN(t.riverAgeMinutes)||e.set("riverAgeMinutes",t.riverAgeMinutes.toString())}(n,e),function(e,t){isNaN(t.navAgeMinutes)||e.set("navAgeMinutes",t.navAgeMinutes.toString())}(n,e),function(e,t){isNaN(t.networkTimeoutSeconds)||e.set("networkTimeoutSeconds",t.networkTimeoutSeconds.toString())}(n,e),function(e,t){isNaN(t.bgTaskNetworkTimeoutSeconds)||e.set("bgTaskNetworkTimeoutSeconds",t.bgTaskNetworkTimeoutSeconds.toString())}(n,e),function(e,t){isNaN(t.ssrBasePageNavAgeMinutes)||e.set("ssrBasePageNavAgeMinutes",t.ssrBasePageNavAgeMinutes.toString())}(n,e),function(e,t,n=[]){n.forEach((n=>{(t[n]||(0,s.L)().get(n))&&e.set(n,"true")}))}(n,e,r),t?function(e,t){return`${e.toString()}&${t.toString()}`}(n,t):n.toString()}(i,h);if(g&&(e=e+(e.indexOf("?")>-1?"&":"?")+decodeURIComponent(g)),l){const t=(e=l(e,"serviceWorkerUrlPolicy"))&&e.toString();if(!t||"about:blank#error"===t)return void(0,o.H)(a.a6r,"Service Worker script Url is not trusted type compliant")}n?p(e,t,u):(0,d.F_)().then((()=>{p(e,t,u)}))}async function l(e="/"){try{if(!navigator||!navigator.serviceWorker||!navigator.serviceWorker.getRegistration)throw new Error("Service worker is not available in this session");const t=await navigator.serviceWorker.getRegistration(e);if(!t)return;await t.unregister()||(0,o.H)(a.Fst,"ServiceWorker unregistration failed.")}catch(e){(0,o.OO)(e,a.Fst,"Failed to unregister ServiceWorker:"+e.message)}}async function p(e,t,n){try{if(!navigator||!navigator.serviceWorker||!navigator.serviceWorker.register)throw new Error("Service worker is not available in this session");await navigator.serviceWorker.register(e,{scope:t}),n&&n()}catch(e){(0,o.OO)(e,a.a6r,"ServiceWorker registration failed.")}}var h=n(15598),g=n(28951),f=n(22680),m=n(59878);function y(e,t,n,i,r,o,a){if(!t||"true"!==t.enabled)return;const s=c.Al.ClientSettings.deviceFormFactor;if("false"===t.mobileEnabled&&("phone"===s||"tablet"===s))return;if(!function(e){const t=c.Al.ClientSettings.browser;if(!t&&"false"===e.mobileEnabled)return!1;const n=e.unsupportedBrowsers;if(!n||!n.length)return!0;if(n.findIndex((e=>e.toLowerCase()===t.browserType.toLowerCase()))>-1)return!1;return!0}(t))return;if(!(0,h.$o)().supported)return;const d=t.isLowEndDevice&&t.disableOnLowEndDevices;if("true"===t.registrationEnabled&&!d){const s=function(){const e=(0,f.zp)(),t=g.cX.getQueryParameterByName("swimmediateregistration",e);if(t)return"true"===t.toLocaleLowerCase();return!1}();i=i||s,m.U.setIsServiceWorkerEnabled(!0),u(e,n,i,t,r,o,a)}("true"===t.unregistrationEnabled||d)&&(!function(e="/",t=!1){if(!e||!("serviceWorker"in navigator))return null;t||"complete"===document.readyState?l(e):window.addEventListener("load",(()=>{l(e)}),{once:!0})}(n),m.U.setIsServiceWorkerEnabled(!1))}},42924:function(e,t,n){n.d(t,{I:function(){return r}});var i=n(24709);class r{static#e=this.layoutAnimationStart=new i.C("layoutAnimationStart");static#t=this.layoutAnimationComplete=new i.C("layoutAnimationComplete");static#n=this.headerTransitionEnd=new i.C("headerTransitionEnd")}},55313:function(e,t,n){n.d(t,{m:function(){return o}});var i=n(28882),r=n(21215);class o extends i.r{constructor(e,t){super(e,t,{isUserSignedIn:void 0,isFlyoutDisplayed:!1}),this._authPrivateApi=(0,r.N)()&&window&&window.chrome&&window.chrome.authPrivate,this.registerSignInEventChangedCallback()}updateSignInState(e){this.updateState("isUserSignedIn",e)}updateSignInFlyoutDisplayState(e){this.updateState("isFlyoutDisplayed",e)}registerSignInEventChangedCallback(){this._authPrivateApi&&this._authPrivateApi.onSignInStateChanged.addListener((e=>{const t=e;this.updateSignInState(!!t.account_id)}))}}},46751:function(e,t,n){var i,r,o;n.d(t,{FE:function(){return r},H:function(){return i},ZF:function(){return o}}),function(e){e.like="like",e.love="love",e.surprised="surprised",e.thinking="thinking",e.sad="sad",e.angry="angry",e.share="share"}(i||(i={})),function(e){e.upvote="upvote",e.downvote="downvote"}(r||(r={})),function(e){e.star1="star1",e.star2="star2",e.star3="star3",e.star4="star4",e.star5="star5"}(o||(o={}))},83176:function(e,t,n){n.d(t,{AF:function(){return c},li:function(){return d},yC:function(){return a}});var i=n(52185);const r=()=>i.Gq.get("__ssr_util__preload_bundles",(()=>new Set)),o=()=>i.Gq.get("__ssr_util__pending_preload_bundles",(()=>new Set)),a=()=>{const e=(()=>{const e=r(),t=[...e];return e.clear(),t})();return e.length?`<script nonce="${window.NONCE_ID}">window.ssrLoadedBundles.publish(${JSON.stringify(e)});<\/script>`:""},s=new Map,c=(e,t)=>{if(s.has(e))throw new Error(`Bundle ${e} is already registered.`);s.set(e,t);const n=o();return n.has(e)&&(n.delete(e),t()),()=>(r().add(e),t())},d=e=>{const t=o(),n=e.map((async e=>{if(s.has(e))return s.get(e)();t.add(e)}));return Promise.all(n)}},50779:function(e,t,n){n.d(t,{S:function(){return s}});var i=n(13218),r=n(52185),o=n(22680),a=n(53222);async function s(){const e=(0,o.zw)()?.includes("localhost")&&(0,o.zp)()?.includes("indicator=true"),t=i.Al?.ClientSettings?.detection?.isMsft||i.Al?.ClientSettings?.detection?.isCorpNet;if((0,o.zp)()?.includes("item=spalink")&&!(0,o.zp)()?.includes("reqsrc=vp")&&!(0,o.zp)()?.includes("noindicator")&&t||e){!function(){if(console.error.toString().includes("[native code]")){const e=console.error;console.error=(...t)=>{const n=r.Gq.get("__ErrorLogHistory__",(()=>[]));e(...t),n.push(t),window.dispatchEvent(new CustomEvent("ErrorLogHistoryUpdated"))}}}(),await(0,a.LQ)();const{RenderModeIndicator:e}=await Promise.all([n.e("common-cscore"),n.e("web-components_render-mode-indicator_dist_index_js")]).then(n.bind(n,37614)),t=document.createElement("render-mode-indicator");document.body.appendChild(t)}}},53222:function(e,t,n){n.d(t,{BF:function(){return u},Qt:function(){return p},I3:function(){return l},LQ:function(){return d}});var i=n(242),r=n(21492),o=n(72465),a=n(86117),s=n(44132);n(52475);let c;function d(){return c||(c=new Promise((e=>{if(!window.isSSREnabled)return void e();const t=new URLSearchParams(location.search).get("delayTopDownHydration");"1"===t||"true"===t?window.startHydration=e:"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{e()}),{once:!0}):e()}))),c}function u(){const e=window.customElements.define,t=window.customElements.get,n=[];window.customElements.define=function(e,t,i){n.push({name:e,ctor:t,options:i})},window.customElements.get=function(e){return t.call(window.customElements,e)||!!n.find((t=>t.name===e))},d().then((()=>{window.customElements.define=e,n.forEach((({name:e,ctor:t,options:n})=>{customElements.define(e,t,n)})),window.customElements.get=t}))}function l(){const e=(0,i.Ou)();s.M0.addOrUpdateCustomProperty("ssr-enabled",1),s.M0.addOrUpdateTmplProperty("ssr-enabled","1"),e.isSSREnabled=1;const t=function(){const e=performance.getEntriesByType("navigation")[0].serverTiming;if(e){const t=e.find((e=>"rsClusterName"===e.name));if(t)return t.description}}();t&&(s.M0.addOrUpdateCustomProperty("rs-cluster-name",t),e["rs-cluster-name"]=t)}function p(){const e=(0,i.Ou)(),t=window?.isSSRCompleted?1:0;s.M0.addOrUpdateCustomProperty("ssr-completed",t),e.isSSRCompleted=t,e.ssrRenderDuration=window.ssrRenderDuration,s.M0.addOrUpdateTmplProperty("ssr-completed",t.toString()),(0,r.Pj)("renderArch",t?"ssr":"fallback-csr"),(0,o.Ep)({name:"TTSR",time:e[`${a.nz}Complete`]}),window.ssrCpuCost>0&&(e.ssrCpuCost=window.ssrCpuCost)}},79744:function(e,t,n){function i(e,t=!1){return""}n.d(t,{M:function(){return i}})},87574:function(e,t,n){n(10863);var i=n(5302),r=n(33779),o=n(7677),a=n(7279),s=n(49820),c=n(44132),d=n(98130),u=n(26156);class l extends a.Hi{constructor(e,t){e?.shadowRoot&&c.M0?.observeShadowRoot(e.shadowRoot),super(e,t)}connect(){try{super.connect()}catch(e){if(this.needsHydration){this.needsHydration=!1;const t={...i.qbM.pb,customMessage:`Error: ${e?.message}`};if(e instanceof s.AH){const n=new XMLSerializer;t.targetNodeId=e.factory.targetNodeId,t.targetTagName=e.factory.targetTagName,t.viewMarkup=n.serializeToString(e.fragment),t.templateString=e.templateString}e.factories&&(t.factories=JSON.stringify(e.factories?.map((e=>({...e,dataBinding:{...e?.dataBinding,evaluate:e?.dataBinding?.evaluate?.toString()}}))))),e.node&&(t.nodeHTML=e.node.outerHTML||""),e.templateString&&(t.templateString=e.templateString),e.stack&&(t.stack=e.stack);if((d.jG?.CurrentRequestTargetScope?.pageExperiments||[]).includes("prg-swssrbspg-v1")&&(0,u.RV)(),this.source.tagName.includes("HERO"))c.M0.sendAppErrorEvent({...i.C3T,message:`Error while hydrating component: ${this.source.tagName}`,pb:t});else if("BACKGROUND-IMAGE"==this.source.tagName)c.M0.sendAppErrorEvent({...i.ZAB,message:`Error while hydrating component: ${this.source.tagName}`,pb:t});else if("TOP-COMMENTS-CARD"==this.source.tagName)c.M0.sendAppErrorEvent({...i.uZx,message:`Error while hydrating component: ${this.source.tagName}`,pb:t});else if(this.source.tagName.includes("WEATHER-TOPSECTION")){const e=[];try{const t=document.querySelector("body > fluent-design-system-provider > ruby-page").shadowRoot.querySelector("div.feed-section > msn-feed").shadowRoot.querySelector("#mfl-0-0").shadowRoot.querySelector("#weather > weather-top-section-card").shadowRoot.querySelector("div.card-container");e.push(...Array.from(t.querySelectorAll("*")).map((e=>e.tagName)))}catch(e){}finally{(0,r.H)(i.NA9,`Error while hydrating component: ${this.source.tagName}`,void 0,{...i.NA9.pb,elementsInContainer:e.join(", ")})}}else(0,r.H)(i.qbM,`Error while hydrating component: ${this.source.tagName}`,void 0,t);super.connect()}else c.M0.sendAppErrorEvent({...i.FvO,message:`Error while connecting component: ${this.source.tagName}`,pb:{...i.FvO.pb,stack:(0,o.n)(e,!0)}})}}}a.t3.setStrategy(l)},87273:function(e,t,n){n.d(t,{Fu:function(){return o},_5:function(){return r}});const i={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function r(e){return e.replace(/[<>/\u2028\u2029]/g,(e=>i[e]))}async function o(e){0}},26238:function(e,t,n){n.d(t,{L:function(){return s},q:function(){return a}});var i=n(52185),r=n(81489),o=n(24039);class a extends o.F{constructor(){super(...arguments),this.configRef={experienceType:"SuperComponentData",instanceSrc:"default"}}static getInstance(){return i.Gq.get("__SuperComponentDataHelper__",(()=>new a))}}const s=(0,r.h)(a)},86994:function(e,t,n){n.d(t,{k:function(){return S}});var i=n(52185),r=n(81489),o=n(99452),a=n(33940),s=n(21215),c=n(23828),d=n(78125),u=n(38492),l=n(16715),p=n(39197),h=n(80303);class g{constructor(){this.mediaQueryCallback=()=>{},this.appThemeState=null}eventListener(){if(this.appThemeState)if((0,p.Vx)()){const e=(0,p._4)(),t=e?.isDarkMode;void 0!==t&&this.appThemeState.setAppInDarkMode(t)}else if((0,l.pE)()){const e=sessionStorage.getItem("nativeAppUserConfig");if(e){const t=JSON.parse(e),n=t?.isDarkMode;void 0!==n&&this.appThemeState.setAppInDarkMode(n)}else this.appThemeState.setAppInDarkMode(!!this.mediaQueryList?.matches)}else this.appThemeState.setAppInDarkMode(!!this.mediaQueryList?.matches)}initialize(e){return!(!this.mediaQueryList&&e)||!!window?.matchMedia&&(this.mediaQueryList=window.matchMedia("(prefers-color-scheme: dark)"),!!this.mediaQueryList&&(this.appThemeState=e,this.mediaQueryCallback=this.eventListener.bind(this),this.mediaQueryList.addEventListener("change",this.mediaQueryCallback),this.mediaQueryCallback(),!0))}uninitialize(){return this.mediaQueryList&&(this.mediaQueryList.removeEventListener("change",this.mediaQueryCallback),this.mediaQueryCallback=()=>{},this.mediaQueryList=void 0,this.appThemeState=null),!0}}class f{constructor(e=null){this.initialized=!1,this.source=e,this.appThemeState=null}handleChange(e,t){if(this.source&&t.target===this.source){const t=e.getValueFor(this.source),n=(0,h.s)(t.toColorString())<=d.h.DarkMode;this.appThemeState&&this.appThemeState.setAppInDarkMode(n)}}updateSource(e=null){this.source=e}initialize(e){if(this.initialized)return!0;if(this.appThemeState=e,!this.source){const e=document.querySelector("fluent-design-system-provider[fill-color]");if(null==e)return!1;this.source=e}const t={target:this.source,token:u.I};return this.handleChange(u.I,t),u.I.subscribe(this),this.initialized=!0,this.initialized}uninitialize(){return this.initialized&&(u.I.unsubscribe(this),this.initialized=!1,this.appThemeState=null),!0}}class m{constructor(){this.appThemeInDarkMode=!1,this.themeSwitchSubscription=null;let e=null;if((0,s.N)())switch((0,c.J8)()){case"BaseLayerLuminance":e=new f;break;case"External":break;default:e=new g}else e=new g;e&&this.setThemeSubscription(e)}setThemeSubscription(e){if(this.themeSwitchSubscription&&this.themeSwitchSubscription.uninitialize(),this.themeSwitchSubscription=e,!this.themeSwitchSubscription)return;this.themeSwitchSubscription.initialize(this)||(this.themeSwitchSubscription=new g,this.themeSwitchSubscription?.initialize(this))}setAppInDarkMode(e){this.appThemeInDarkMode=e}appInDarkMode(){return this.appThemeInDarkMode}}(0,a.gn)([o.LO],m.prototype,"appThemeInDarkMode",void 0);const y=new WeakMap;class v{constructor(){this._appThemeMode=null}get appThemeMode(){return this._appThemeMode||(this._appThemeMode=new m),this._appThemeMode}static getInstance(){return i.Gq.get("__SuperComponentThemeHelper__",(()=>new v))}setThemeSwitchSubscription(e){this.appThemeMode.setThemeSubscription(e)}setAppInDarkMode(e){this.appThemeMode.setAppInDarkMode(e)}appInDarkMode(){return this.appThemeMode.appInDarkMode()}subscribeThemeChange(e){if(!e||!this.appThemeMode||y.get(e))return;if(e.handleThemeChange(S.appInDarkMode()),!(0,c.ng)())return;const t={handleChange:()=>{e.handleThemeChange(S.appInDarkMode())}};y.set(e,t),o.y$.getNotifier(this.appThemeMode).subscribe(t,"appThemeInDarkMode")}unsubscribeThemeChange(e){if(!(0,c.ng)()||!e||!this.appThemeMode)return;const t=y.get(e);t&&(o.y$.getNotifier(this.appThemeMode).unsubscribe(t,"appThemeInDarkMode"),y.delete(e))}}const S=(0,r.h)(v)},23828:function(e,t,n){n.d(t,{J8:function(){return d},gr:function(){return s},ng:function(){return c}});var i,r=n(98130);!function(e){e.MatchMedia="MatchMedia",e.BaseLayerLuminance="BaseLayerLuminance",e.External="External",e.Defalut="MatchMedia"}(i||(i={}));const o="DefaultConfig",a=Object.freeze(new Map([["bingHomepage",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["windows",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["edgeChromium",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["winWidgets",{notifyThemeSwitch:!0,themeSwitchNotifier:"External"}],["superApp",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["homePage",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["distribution",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["channelmobile",{notifyThemeSwitch:!0,themeSwitchNotifier:"External"}],[o,{notifyThemeSwitch:!0,themeSwitchNotifier:"MatchMedia"}]]));function s(){return!!a.has(r.jG.AppType)}function c(){const e=r.jG.AppType,t=a.get(e)||a.get(o);return t?.notifyThemeSwitch??!0}function d(){const e=r.jG.AppType,t=a.get(e)||a.get(o);return t?.themeSwitchNotifier??"MatchMedia"}},27863:function(e,t,n){n.d(t,{j:function(){return a}});var i=n(55447),r=n(70041),o=n(23460);const a=async(e,t,n)=>{const a=(0,i.$z)(),s="headingsonly"===t?.selectedFeedDisplaySetting||"off"===t?.selectedFeedDisplaySetting;if(!["gaming","productivityHub","following"].includes(a)&&!s){const t=n?r.F11:r.wge,i={experienceType:t,instanceSrc:"default"},a=await e.getConfig(i);if(a.properties?.auctionRidOverride)return;const s=(0,o.e7)(a.properties,t,!0);s.fetchSamPredictContent([]),s.fetchCmsPredictContent()}}},29636:function(e,t,n){var i;n.d(t,{Pj:function(){return a},_l:function(){return c},gQ:function(){return u}}),function(e){e[e.none=0]="none",e[e.default=16]="default",e[e.medium=20]="medium",e[e.large=24]="large"}(i||(i={}));var r,o;!function(e){e[e.xsmall=472]="xsmall",e[e.small=600]="small",e[e.medium=768]="medium",e[e.large=834]="large",e[e.xlarge=1024]="xlarge"}(r||(r={})),function(e){e[e.xsmall=472]="xsmall",e[e.small=600]="small",e[e.medium=643]="medium",e[e.large=834]="large",e[e.xlarge=1024]="xlarge"}(o||(o={}));const a=324;var s;!function(e){e[e.medium=440]="medium",e[e.large=335]="large",e[e.xlarge=384]="xlarge"}(s||(s={}));const c=["FailedToCreate","NotEnoughRiverCards","SuccessfullyCreated","SuccessfullyPartiallyFilled"];var d;!function(e){e.BingHomepageMobile="bingHomepageMobile",e.Launcher="launcher",e.SwiftKey="swiftKey",e.EdgeMobile="mobilefeededge",e.SAAndroid="mobilefeedsaa",e.SAIOS="mobilefeedsai",e.Outlook="outlookfeed",e.Office="officefeed",e.Default="mobilefeed"}(d||(d={}));const u=e=>"infopane-card"===e||"responsive-infopane"===e},23460:function(e,t,n){n.d(t,{iw:function(){return G},e7:function(){return W}});var i=n(15598);const r="1adindices",o="1adcoords",a=(e,t=!0)=>{const n=(0,i.$o)()?.getItem(e);return t?c(n):n},s=(e,t,n,r)=>{const o=JSON.stringify(e,d);o!==(0,i.$o)().getItem(t)&&((0,i.$o)()?.setItem(t,o),n?(0,i.$o)()?.setItem(`${t}_CreationDateTime`,n):r?(0,i.$o)()?.setItem(`${t}_ExpireDate`,r):(0,i.$o)()?.setItem(`${t}_date`,JSON.stringify(new Date)))},c=e=>{try{return JSON.parse(e,u)}catch{return null}},d=(e,t)=>t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t,u=(e,t)=>"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t;var l=n(99300),p=n(44132),h=n(13218);const g=(e,t,n)=>{f(n,void 0,`Config: ${e}, Response: ${t}`,!0)},f=(e,t,n,i)=>{const r={...e,pb:{...e.pb}};t&&(r.message=t),n&&r.pb&&(r.pb.customMessage=n),i&&r.pb&&(r.pb.isPrerender=h.Al?.IsPrerender),p.M0.sendAppErrorEvent(r)};var m=n(69497),y=n(523),v=n(75115),S=n(15320),w=n(64411),b=n(77818),C=n(4),T=n(21215),k=n(52185),P=n(33779),A=n(5302),I=n(64107),E=n(40755),R=n(52965),M=n(25156),x=n(92530),L=n(46991),F=n(34800),D=n(42833),O=n(39197),_=n(77770),N=n(95253),B=n(98130),U=n(82928),$=n(26156);class H{static#e=this.isFilteredRegion={river:!0,resriver:!0,riverlock:!0,resriverlock:!0,peekriver:!0};static#t=this.PeekInfopaneIndexMappingList=[0,3,6,11,15];static#n=this.PeekInfopaneIndexMappingListJKRegion=[0,5];constructor(e,t){this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[],this.infopanePlacementList=[],this.originalInfopaneRegion=new Map,this.isNTPPeek=!1,this.getCmsAdsConfig=()=>this.cmsAdsConfig,this.getAdRegionTupleListMap=()=>this.adRegionTupleListMap,this.getPlacementsBySectionIndex=(e,t)=>{const n=this.getAdIndexList(t)[this.config.auctionPreSectionsNum||0],i=H.isFilteredRegion[t]?(0,E.Z)(e,(e=>e<=n))+1:e.length,r=[];return e.forEach(((e,t)=>{t<i&&r.push(e)})),r},this.getCmsRequestFromTuple=(e=0)=>{const t={placements:[]};return this.adRegionTupleListMap.forEach(((n,i)=>{if(!n[0]){if(this.shouldDeferInfopaneAuctionOnPrerender(i,e))return;const r=n[1],o=this.getAdIndexList(i)[e]||-1,a=H.isFilteredRegion[i]?(0,E.Z)(r,(e=>e<=o))+1:r.length,s=r.splice(0,a);this.checkAndAddPlacement(t,!n[0],i,s)}})),t},this.fireCmsAuction=async(e=0)=>{let t;if(this.cmsRequest?.placements?.length?(t=this.cmsRequest,this.cmsRequest=void 0):t=this.getCmsRequestFromTuple(e),t&&t.placements.length)try{const{infopane:e,river:n,documentId:i}=this.cmsAdsConfig,r=t.placements.find((({region:e})=>e.includes("resinfopane"))),o=t.placements.find((({region:e})=>e.includes("resriver"))),a=e.splice(0,r?.indices.length??0),s=n.splice(0,o?.indices.length??0);this.isFirstCmsAdsBatch=!1,this.cmsRequestPromise=this.nativeAdService.fetchCmsAds(t,i,[...a,...s]);const{placements:c}=await this.cmsRequestPromise;return c}catch(e){(0,P.OO)(e,A.NF_,"Call to CMS Ad Service failed")}},this.getRegionImgForMobile=e=>{const{river:t,infopane:n}=this.overrideImageSize||{};switch(e){case"river":return t;case"infopane":return n;default:return}},this.fireFastHydrationAuction=async e=>{(0,S.bF)(e,this.config),(this.config.passAdOcidRegSize||this.config.enableAddingAdCoords||this.config.passBrandSafetySignals)&&e.placements.forEach((e=>{(0,S.Yh)(e,this.config)})),this.fastHydrationRequest=e;const t=this.nativeAdService.fetchSamAds(e,!0);this.fastHydrationRequestPromise=t,(0,N.pl)(this.config)},this.fetchSamPredictContent=async(e=[])=>{if(this.isFirstSamAdsBatch){this.samPredictResponsePromise=new D.o;try{const t=this.getPredictedAdRequest();if(this.samRequest=t,!t||!t.placements||!t.placements.length)return;I.A.startMark("AdServiceCall.SuperFeed");const n=this.nativeAdService.fetchSamAds(t,!0,e,this.getIsPrerenderAds());this.samRequestPromise=n;const i=(0,N.pl)(this.config);if([this.predictSamResponse]=await Promise.all([n,i]),this.predictSamResponse&&this.config.adTemplateConfig?.enableBlockingQueue){((this.predictSamResponse.samResponse&&this.predictSamResponse.samResponse.placements)??[]).forEach((e=>{e.adAuctionType=m._.clientAuctionAd}))}}catch(e){(0,P.OO)(e,A.R0M,"Call to SAM Ad Service failed")}finally{this.samPredictResponsePromise.set(),I.A.endMark("AdServiceCall.SuperFeed")}}},this.waitForSamPredictResponse=async()=>this.samPredictResponsePromise?.getResultAsync(),this.waitForSamAuctionCall=async()=>this.samRequestPromise,this.addToCallbackList=e=>{this.nativeAdService.addToCallbackList(e)},this.getFastHydrationSamAdsData=async()=>{if(!this.fastHydrationRequestPromise)return;const e=this.fastHydrationRequestPromise;this.fastHydrationRequestPromise=void 0;const t=await e;try{const e=this.getSamRequestFromTupleWithSectionIndex();return this.validateFastHydrationAdPlacement(e),this.samRequest=e,this.samRequest?.placements?.length&&(this.isFirstSamAdsBatch=!1),t}catch(e){if(this.config.enableWpoAdRank&&(0,P.H)(A.SSe,"Failed to get fast hydration SAM ads data",void 0,{...A.SSe.pb,customMessage:`Failed to get fast hydration SAM ads data: ${e.message}; ${e.stack}`,isPrerender:h.Al?.IsPrerender}),!this.config.enableWpoAdRank)throw e}},this.getSamRequestFromTupleWithSectionIndex=(e=0)=>{const t={placements:[],tmaxbidder:this.config.adsTmaxBidder&&h.Al.IsPrerender&&this.isFirstSamAdsBatch?this.config.adsTmaxBidder:void 0};return this.adRegionTupleListMap.forEach(((n,i)=>{if(n[0]){if(this.shouldDeferInfopaneAuctionOnPrerender(i,e))return;const r=n[1],o=this.getAdIndexList(i)[e]||-1,a=H.isFilteredRegion[i]?(0,E.Z)(r,(e=>e<=o))+1:r.length,s=r.splice(0,a);(i.startsWith("river")||i.startsWith("resriver"))&&s[0]&&p.M0.addOrUpdateTmplProperty(`servingAdsIndex-${i}`,`${e}-${s[0]}`),this.checkAndAddPlacement(t,n[0],i,s)}})),t},this.getSamRequestFromTuple=()=>{const e={placements:[]};return this.adRegionTupleListMap.forEach(((t,n)=>{t[0]&&this.checkAndAddPlacement(e,t[0],n,t[1])})),e},this.shouldDeferInfopaneAuctionOnPrerender=(e,t)=>e.includes("infopane")&&(this.getIsPrerenderAds()&&0==t||this.config.deferInfopanePrerender&&h.Al.IsPrerender&&this.isFirstSamAdsBatch),this.getAdIndexList=e=>!this.config.riverSectionCardProviderConfig?.useRelativeAdPlacement||"river"!==e&&"riverlock"!==e&&"peekriver"!==e?this.config.riverSectionCardProviderConfig?.useRelativeAdPlacement&&e.includes("resriver")?this.cmsAdIndexList:this.cardsIndexList:this.nativeAdIndexList,this.overrideTopAdSamRequest=(e,t)=>{const n=(0,O._4)();return t?.isSuperAppTopAd&&this.config.enableTopAdCard&&n?.isOEM&&e[0]&&(e[0].region="top",e[0].img=this.config?.adTemplateConfig?.imageSizeConfig?.top),e},this.getSamAuctionRequest=(e,t,n)=>{let i;if(this.samRequest?.placements?.length?(i=this.samRequest,this.samRequest=void 0):i=this.config.enableNativeAdBatchCall?this.getSamRequestFromTuple():this.getSamRequestFromTupleWithSectionIndex(e),i&&i.placements.length){if(this.config.enableNativeAdXandr&&(i.enableNativeAdXandr=!0),this.config.overrideAdPartnerId&&(i.partnerId=this.config.overrideAdPartnerId),this.config.overrideAdPageType&&(i.pageType=this.config.overrideAdPageType),t)i={placements:this.overrideTopAdSamRequest(i.placements,t),pageType:t.pageType,locale:t.locale,adid:t.adid,anid:t.anid,muid:t.muid,sapphireid:t.sapphireid,appName:t.appName,clientVersion:t.clientVersion,packageName:t.packageName,tmax:t.tmax},"prime_mobile"===t.appName&&"mobilefeed"===t.pageType&&i.placements.forEach((e=>{e.isStrictIndices=!0}));else if(i.tmaxbidder=this.config.adsTmaxBidder&&h.Al.IsPrerender&&this.isFirstSamAdsBatch?this.config.adsTmaxBidder:void 0,(0,S.bF)(i,this.config),n){const{selectedFeedDisplaySetting:t}=(0,U.K0)(y.RL)?.getCurrentState()??{},r=B.jG?.CurrentRequestTargetScope?.pageExperiments?.includes("1s-wpo-brndrby"),s=[];let c=!1;if(i.placements.forEach((i=>{n(i),i&&i.placementLevelSignals&&(this.config.batch8AdsOnPeak&&h.Al.IsPrerender&&"peek"===t&&("river"===i.region||"resriver"===i.region||"peekriver"===i.region)&&Array.isArray(i.indices)&&i.indices?.includes(2)||(e&&i.placementLevelSignals.some((e=>!e||!e.coords||"number"!=typeof e.coords.x))&&s.push(`${i.region}-${i.indices}`),(this.config.addAdBrandSafetySignals||r)&&i.placementLevelSignals.some((e=>!e||!e.adjacentCardIds))&&(c=!0)))})),this.config.enableAddingAdCoords&&s.length){const e=a(o);e&&e.size&&(0,P.H)(A.VAC,"Ads placement level signal missing coordinates",`{"missing_plcs": ${JSON.stringify(s)}, "coords_cache": ${JSON.stringify(Array.from(e.entries()))}, "placements": ${JSON.stringify(i.placements)}}`)}(this.config.addAdBrandSafetySignals||r)&&c&&(0,P.H)(A.hTi,"Ad placement signal missing adjacentCardIds",JSON.stringify(i.placements),{shouldSampleErrorsForTreatement1:!0})}return i}},this.fireSamAuction=async(e=[],t,n,i,r,o,a)=>{const s=this.getSamAuctionRequest(t,n,r);if(s&&s.placements.length)return i&&await i.getResultAsync(),await this.fetchSamAds(s,e,o,a)},this.fetchSamAds=async(e,t=[],n,i)=>{try{I.A.startMark("AdServiceCall.SuperFeed");const{isFirstSamAdsBatch:r,nativeAdService:o}=this,a=r?t:[];this.isFirstSamAdsBatch=!1;const s=o.fetchSamAds(e,r,a,this.getIsPrerenderAds(),n,i);if(!this.config.loadAdTemplate)return await s;if(this.config.enableNativeAdWC||this.config.enableNativeAdWCInfopane){const[e]=await Promise.all([s,this.lazyLoadDRBundle(this.config?.adTemplateConfig?.configType)]);return e}{const[e]=await Promise.all([s,(0,N.pl)(this.config)]);return e}}catch(e){(0,P.OO)(e,A.R0M,"Get SAM data failed")}finally{I.A.endMark("AdServiceCall.SuperFeed")}},this.initNativeAdConfig(e),this.initAdRegionTupleListMap(),e?.riverSectionCardProviderConfig?.adRegionSpecificTupleListMap&&this.initAdRegionSpecificTupleListMap(e.riverSectionCardProviderConfig.adRegionSpecificTupleListMap),this.beaconService=new w.A(e?.adBeaconServiceConfig)}initNativeAdConfig(e){this.isFirstSamAdsBatch=!0,this.isFirstCmsAdsBatch=!0,this.config=(0,R.Z)(e)||{},this.cmsAdsConfig=this.config?.cmsAds??{documentId:"",infopane:[],river:[]},this.tallAdProcessed=!this.config?.enableAdsWaterfall;const t={adPlacementMapper:this.config.adPlacementMapper,adPageType:this.config.adPageType,useEmptyPlacementsForNoContent:this.config.backfillContentForMissingPlacements,enablePrerenderAdsAuctionFlag:this.config.enablePrerenderAds&&this.config.enablePrerenderAuctionFlag,auctionTimeoutOverride:this.config.auctionTimeoutOverride,auctionRidOverride:this.config.auctionRidOverride,enableBuyDirectAd:this.config.enableBuyDirectAd,fixAuctionSrcUrl:this.config.fixAuctionSrcUrl,passExtraAdSignals:this.config.passExtraAdSignals,passAdOcidRegSize:this.config.passAdOcidRegSize,passRequestModelSignals:this.config.passRequestModelSignals,enableNativeAdXandr:this.config.enableNativeAdXandr,passDTSignals:this.config.passDTSignals,enableAdTargetingKeywords:this.config.adServiceConfig?.enableAdTargetingKeywords,dtsRequestConfig:this.config.dtsRequestConfig,passBrandSafetySignals:this.config.passBrandSafetySignals,readAdScenarioTypeFromMsnKv:this.config.readAdScenarioTypeFromMsnKv,enableAdSponsoredText:this.config.enableAdSponsoredText,passDeviceOS:this.config.passDeviceOS,passVAXandrMigrationSignals:this.config.passVAXandrMigrationSignals,sendAdBlockDetectionFromEdge:this.config.adServiceConfig?.sendAdBlockDetection};this.nativeAdService=(0,b.d)(this.config?.adTemplateConfig||{},t)}initAdRegionTupleListMap(){this.adRegionTupleListMap=new Map([["infopane",[!0,[],[]]],["infopanelock",[!0,[],[]]],["peekinfopane",[!0,[],[]]],["rightrail",[!0,[],[]]],["triver",[this.config?.enable1stRowAd,[],[]]],["river",[!0,[],[]]],["riverlock",[!0,[],[]]],["peekriver",[!0,[],[]]],["infopane-tab",[!0,[],[]]],["resinfopane",[this.config.enableInfopaneLeadgenNative,[],[]]],["resinfopanelock",[this.config.enableInfopaneLeadgenNative,[],[]]],["resriver",[this.config.enableRiverLeadgenNative,[],[]]],["resriverlock",[this.config.enableRiverLeadgenNative,[],[]]],["dense-river",[!0,[],[]]],["rivert",[this.config.enableAdsWaterfall||this.config.enableNTPAdaptiveImage,[],[]]],["resrivert",[this.config.enableNTPAdaptiveImage,[],[]]],["infopane1u",[this.config.enableInfopane1uCard,[],[]]]])}initAdRegionSpecificTupleListMap(e){0!==e.length&&(this.adRegionTupleListMap=new Map(e.map((e=>[e,[!0,[],[]]]))))}loadCmsBackfillList(){return this.nativeAdService.loadCmsBackFillList()}fillAdsMap(e){if(!e)return;const{adLabelText:t,isGreyAdsLabelEnabled:n}=this.nativeAdService.getAdTagStyleByLocale(),i=(0,l.AH)({adLabelText:t,isGreyAdsLabelEnabled:n,...this.config},e),r=(0,O._4)();this.adRegionTupleListMap.forEach(((e,t)=>{("river"===t||"riverlock"===t||"peekriver"===t)&&this.config.enableTopAdCard&&r?.isOEM&&i.top&&e[2].push(...i.top),e[2].push(...i[t]??[])}))}createNativeAdCardMetadata(e,t,n,i,r,o,a,s,c,d){let u=e.includes("resinfopane")||e.includes("resriver")?F.PL.CmsAd:F.PL.NativeAd;if(this.config?.enableAdsWaterfall&&"river"===e&&t===this.config?.tallAdsIndex&&(e="rivert"),this.config?.enable1stRowAd&&o===F.PL.FirstPartyAd&&(e="triver",u=F.PL.FirstPartyAd),this.config?.enableInfopane1uCard&&C.cE.includes(e)&&(e="infopane1u"),this.config?.adPlacementMapper){const n=this.config.adPlacementMapper.find((n=>{const i=n.region===e,r=!n.indices||n.indices.includes(t);return i&&r}));e=n?.mappedRegion||e}let l=this.adRegionTupleListMap.get(e)?.[2],p=l?.find((e=>e.regionIndex===t));return this.config.adsPlacementForPeekView&&!p&&("peekriver"===e&&(l=this.adRegionTupleListMap.get("river")?.[2]),"river"===e&&(l=this.adRegionTupleListMap.get("peekriver")?.[2]),"peekinfopane"===e&&(l=this.adRegionTupleListMap.get("infopane")?.[2]),"infopane"===e&&(l=this.adRegionTupleListMap.get("peekinfopane")?.[2]),p=l?.find((e=>e.regionIndex===t))),p?{type:u,regionType:e,regionIndex:t,id:this.getNativeAdId(e,p.regionIndex,p),placement:p,wpoRank:n,wpoAdRank:i,wpoId:r,adjacentCardIds:a,isPartialBrandSafety:s,column:c,row:d}:{type:u,regionType:e,regionIndex:t,placement:{items:[]},wpoRank:n,wpoAdRank:i,wpoId:r,adjacentCardIds:a,isPartialBrandSafety:s,column:c,row:d}}getPredictCmsAdsData(){if(!this.isFirstCmsAdsBatch)return;const e=this.getCmsRequestFromTuple();if(this.predictCmsResponse&&this.validateCmsAdPlacementConfig(e),this.cmsRequest=e,this.cmsRequest?.placements?.length&&(this.isFirstCmsAdsBatch=!1),this.predictCmsResponse){const e=this.predictCmsResponse;return this.predictCmsResponse=void 0,e}}async waitForCmsAuction(){if(this.cmsRequestPromise)if(this.config.enableWpoAdRank)try{await this.cmsRequestPromise}catch(e){(0,P.H)(A.SSe,"CMS auction failed",void 0,{...A.SSe.pb,customMessage:`CMS auction failed: ${e.message}; ${e.stack}`,isPrerender:h.Al?.IsPrerender})}else await this.cmsRequestPromise}getAssets(e,t){const n=[];if(t){const i=t.reduce(((t,n,i)=>{const r=(0,M.Z)(v.aT,(e=>e===n));if(r){const n={...v.hy[r],id:i+1};"img"===r&&(n.img={...this.getRegionImg(e),...n.img}),t.push(n)}return t}),[]);n.push(i)}return n}getVAAssets(e){const t=this.config.adTemplateConfig?.supportedVAAssets;return this.getAssets(e,t)}getNativeAdAssets(e){const t=this.config.adTemplateConfig?.auctionCallAssets;if(this.config.assetConfigRefactor){if("infopane-tab"===e)return;if(t&&t.length>0)return this.getAssets(e,t)}else if(this.config.adTemplateConfig?.enableVA&&"rightrail"!==e)return this.getVAAssets(e)}checkAndAddPlacement(e,t,n,r){if(e&&t&&r.length){let t=this.getRegionImg(n);if(this.config.overrideSAMAdImageSize&&this.overrideImageSize){const e=this.getRegionImgForMobile(n);e&&(t=e)}const o={assets:this.getNativeAdAssets(n),region:n,indices:r.splice(0),img:t};this.config.addAdCoordsOnPredicted&&((0,S.bF)(e,this.config),(0,S.Yh)(o,this.config,void 0,(e=>{const t=this.getCoordsCache(e),n="true"===(0,i.$o)()?.getItem($.Wb);return t?{...t,isCoordsInvalidated:n}:{}}))),(this.config.enableSAMAdStrictIndices||B.jG.IsHeroNTP||this.config.enable1stRowAd&&"triver"===n||this.config.adsPlacementForPeekView&&("peekriver"===n||"peekinfopane"===n)&&this.isNTPPeek)&&(o.isStrictIndices=!0),this.config.adsPlacementForPeekView&&"peekinfopane"===n&&this.isNTPPeek&&(o.indices=o.indices.map((e=>{const t=this.getPeekInfopaneMappingList().indexOf(e);return-1!==t?t:e}))),e.placements.push(o)}}mapStrictPeekRegionIndexToAbsoluteRegionIndex({placeholderPlacements:e,samPlacements:t}){e?.forEach((e=>{if("peekinfopane"===e.region){const t=this.getPeekInfopaneMappingList()[e.regionIndex];void 0!==t&&(e.relativeRegionIndex=e.regionIndex,e.regionIndex=t)}})),t?.forEach((e=>{if("peekinfopane"===e.region&&void 0!==e.index){const t=this.getPeekInfopaneMappingList()[e.index];void 0!==t&&(e.relativeIndex=e.index,e.index=t)}}))}async fetchCmsPredictContent(){if(!this.isFirstCmsAdsBatch)return;const e=this.getPredictedAdRequest(!0);if(this.cmsRequest=e,e.placements.length)try{const{infopane:t,river:n,documentId:i}=this.cmsAdsConfig,r=e.placements.find((({region:e})=>e.includes("resinfopane"))),o=e.placements.find((({region:e})=>e.includes("resriver"))),a=t.splice(0,r?.indices.length??0),s=n.splice(0,o?.indices.length??0),{placements:c}=await this.nativeAdService.fetchCmsAds(e,i,[...a,...s]);return this.predictCmsResponse=c,c}catch(e){(0,P.OO)(e,A.NF_,"Call to CMS Ad Service failed")}}lazyLoadDRBundle(e){switch(e){case"prg-ad-like":return n.e("na-like-button").then(n.bind(n,54391));case"prg-trending":return n.e("na-trending").then(n.bind(n,84700));case"prg-ad-ctav2":case"prg-ad-ctav3":return n.e("na-call-to-action").then(n.bind(n,92358));case"prg-ad-sh-v1":return n.e("nas-highlight-v1").then(n.bind(n,63363));case"prg-ad-sh-v3":case"prg-ad-sh-v4":return Promise.all([n.e("nas-highlight-v3v4").then(n.bind(n,12439)),n.e("nas-highlight-v3v4").then(n.bind(n,85292))]);case"prg-ad-combo":return Promise.all([n.e("na-decoration-combo").then(n.bind(n,65719)),n.e("na-decoration-combo").then(n.bind(n,34665)),n.e("na-decoration-combo").then(n.bind(n,28277)),n.e("na-decoration-combo").then(n.bind(n,25610))])}}getPredictedAdRequest(e){const t={placements:[],tmaxbidder:!h.Al.IsPrerender&&!this.config.auctionRidOverride&&this.isFirstSamAdsBatch&&this.config.adsTmaxBidder?this.config.adsTmaxBidder:void 0};return this.config.overrideAdPartnerId&&(t.partnerId=this.config.overrideAdPartnerId),this.config.overrideAdPageType&&(t.pageType=this.config.overrideAdPageType),this.adRegionTupleListMap.forEach(((n,i)=>{const r=e?this.getCmsIndices(i):this.getSamIndices(i),o=e?!n[0]:n[0];o&&r?.length&&this.checkAndAddPlacement(t,o,i,r)})),t}getPredictSamAdsData(){if(!this.isFirstSamAdsBatch)return;const e=this.getSamRequestFromTupleWithSectionIndex();if(this.predictSamResponse&&this.validateSamAdPlacementConfig(e),this.samRequest=e,this.samRequest?.placements?.length&&(this.isFirstSamAdsBatch=!1),this.predictSamResponse){const e=this.predictSamResponse;return this.predictSamResponse=void 0,e}}getSamRequest(){return this.samRequest}shouldPrefetchInfopaneSamAds(e){return-1!==this.infopanePlacementList.findIndex((({index:t})=>t===e+l.h2))}prefetchInfopaneSamAds(e){const t=this.getAndUpdateInfopanePrefetchPlacementList(e);if(t.length)return this.fetchSamAdsInPlacementList(t)}getAndUpdateInfopanePrefetchPlacementList(e){if(!this.config.infopaneViewOptAdCount)return[];const t=this.infopanePlacementList.findIndex((({index:t})=>t>e));return-1===t?[]:this.infopanePlacementList.splice(t,this.config.infopaneViewOptAdCount)}mapViewOptimizationRegion(e){if(this.config.infopaneViewOptAdCount&&!this.config.infopaneCacheNormalPlacement){e.placements.forEach((e=>{C.PB.includes(e.region)&&(1===this.config.infopaneViewOptAdCount?e.region=C.BU[0]:2===this.config.infopaneViewOptAdCount&&(e.region=C.BU[1]))}));const t={};e.placements.forEach((e=>{const n=e.region;t[n]?t[n].indices.push(...e.indices):t[n]={...e}})),e.placements=Object.values(t)}}mapSamAdRegionToOriginal(e){this.config.infopaneViewOptAdCount&&(e?.samResponse?.placements&&e.samResponse.placements.forEach((e=>{const{index:t}=e;this.originalInfopaneRegion.get(t)&&(e.region=this.originalInfopaneRegion.get(t))})),e?.placeHolderResponse?.placements&&e.placeHolderResponse.placements.forEach((e=>{const{regionIndex:t}=e;this.originalInfopaneRegion.get(t)&&(e.region=this.originalInfopaneRegion.get(t))})))}async fetchSamAdsInPlacementList(e){const t={placements:[]};(0,l.EC)(e).forEach(((e,n)=>{this.checkAndAddPlacement(t,!0,n,e)})),this.mapViewOptimizationRegion(t);const n=await this.fetchSamAds(t);return this.mapSamAdRegionToOriginal(n),n}fireServedTrackingCallForPlacements(e){if(!e)return;const t=this.beaconService.sendBeaconForAdServed.bind(this.beaconService);e.map((({beaconsJson:e,bingTrackerUrls:t=[],videoViewabilityData:n,beaconsSupportHttpPOST:i})=>!e||t.length>0&&n?null:{beaconsJson:e,beaconsSupportHttpPOST:i})).filter((e=>!(!e||!e.beaconsJson))).forEach(t)}appendAdRegionIndices(e,t){const n=this.adRegionTupleListMap.get(e);n&&Array.isArray(n[1])?n[1].push(...t.sort(((e,t)=>e-t))):this.adRegionTupleListMap.set(e,[!0,t.sort(((e,t)=>e-t)),[]])}updateAdRegionTupleListMap(e){const{adRegionTupleListMap:t}=this;t.forEach(((t,n)=>{const i=t[1],r=this.config.adPlacementMapper?.find((e=>e.region===n));if(r){let t=[],i=[];if(r.indices){const o=e.get(n)??[];i=(0,x.Z)(o,r.indices),t=(0,L.Z)(o,r.indices)}else i=e.get(n)??[];this.appendAdRegionIndices(r.region,t),this.appendAdRegionIndices(r.mappedRegion,i)}else i.push(...(e.get(n)??[]).sort(((e,t)=>e-t)))})),this.config?.enableAdsWaterfall&&!1===this.tallAdProcessed&&this.updatePlacementsForTallAd(t,this.config.tallAdsIndex),this.config?.infopaneViewOptAdCount&&this.updatePlacementsForInfopane(t),this.config?.enableInfopane1uCard&&this.updatePlacementsForInfopane1u(e)}updatePlacementsForTallAd(e,t=0){if(0===t)return;const n=this.getOrDefault(e,"rivert",[!0,[],[]]),i=this.getOrDefault(e,"river",[!0,[],[]]),r=[t],o=this.removeItemFromPlacementArray(i[1],t);e.set("river",[i[0],o,i[2]]),e.set("rivert",[n[0],r,n[2]]),this.tallAdProcessed=!0}updatePlacementsForInfopane(e){e.forEach(((e,t)=>{e[0]&&C.PB.includes(t)&&(e[1].forEach((e=>{this.infopanePlacementList.push({region:t,index:e}),this.originalInfopaneRegion.set(e,t)})),e[1]=[])})),this.infopanePlacementList.sort(((e,t)=>e.index-t.index))}updateRiverInfopanePlacementsToNormal(){const{adRegionTupleListMap:e}=this,t=e?.get("peekriver")?.[1],n=e?.get("peekriver")?.[2];if(t?.length){const n=e?.get("river");n&&(n[1]=[...n[1],...t]);const i=e?.get("peekriver");i&&(i[1]=[])}if(n?.length){const t=e?.get("river");t&&(t[2]=[...t[2],...n]);const i=e?.get("peekriver");i&&(i[2]=[])}const i=e?.get("peekinfopane")?.[1],r=e?.get("peekinfopane")?.[2];if(i?.length){const t=e?.get("infopane");t&&(t[1]=[...t[1],...i]);const n=e?.get("peekinfopane");n&&(n[1]=[])}if(r?.length){const t=e?.get("infopane");t&&(t[2]=[...t[2],...r]);const n=e?.get("peekinfopane");n&&(n[2]=[])}}updatePlacementsForInfopane1u(e){let t=[];for(const n of C.cE)t=t.concat(e.get(n)??[]),this.adRegionTupleListMap.set(n,[!1,[],[]]);t=t.sort(((e,t)=>e-t)),this.adRegionTupleListMap.set(C.yp.infopane1u,[!0,t,[]])}removeItemFromPlacementArray(e,t){return e?.filter((e=>e!==t))}getOrDefault(e,t,n){return e.get(t)??n}updateAdCache(e){if(!this.isFirstSamAdsBatch)return;const t=new Map;this.adRegionTupleListMap.forEach(((n,i)=>{const r=[...e?.get(i)??[],...n[1]],o=this.getPlacementsBySectionIndex(r,i);t.set(i,o)})),s(t,r)}updateCoordsCacheForPredicted(e,t){const n=(a(o)||new Map).set(e,t);s(n,o)}getCoordsCache(e){return a(o)?.get(e)}isAdsMapEmpty(){let e=!0;return this.adRegionTupleListMap.forEach((t=>{t[2].length>0&&(e=!1)})),e}getRegionImg(e){if(this.config.adTemplateConfig?.imageSizeConfig&&this.config.adTemplateConfig?.imageSizeConfig[e])return this.config.adTemplateConfig?.imageSizeConfig[e];switch(e){case"resriver":case"river":case"riverlock":case"resriverlock":case"triver":case"rightrail":case"peekriver":return this.config.adTemplateConfig?.imageSizeConfig?.river;case"infopane":case"resinfopane":case"infopanelock":case"resinfopanelock":case"peekinfopane":return this.config.adTemplateConfig?.imageSizeConfig?.infopane;case"infopane-tab":return this.config.adTemplateConfig?.imageSizeConfig?.infopaneTab;case"infopane1u":return this.config.adTemplateConfig?.imageSizeConfig?.infopane1u;case"rivert":return this.config.adTemplateConfig?.imageSizeConfig?.rivert;case"inarticlecarousel":return this.config.adTemplateConfig?.imageSizeConfig?.inarticlecarousel;case"inarticle":return this.config.adTemplateConfig?.imageSizeConfig?.inarticle;default:return}}refresh(){this.initNativeAdConfig(this.config),this.initAdRegionTupleListMap(),this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[]}updateCardsIndexPersection(e){e.map((e=>{const t=this.cardsIndexList[this.cardsIndexList.length-1]||0;this.cardsIndexList.push(t+(e.cards?.length||0))}))}updateRelativeAdIndexPersection(e){e.forEach((e=>{const t=this.nativeAdIndexList[this.nativeAdIndexList.length-1]||0,n=e.cards?.filter((e=>"nativead"===e.type));let i=t+(n.length||0);if(this.config.enableDynamicWaterfall&&this.config.enableAdRankTrackers){const e=n.map((e=>e.wpoAdRank)).filter((e=>e));if(e?.length){const t=Math.max(...e);t>i&&(i=t)}}this.nativeAdIndexList.push(i);const r=this.cmsAdIndexList[this.cmsAdIndexList.length-1]||0,o=e.cards?.filter((e=>"cmsad"===e.type)).length||0;this.cmsAdIndexList.push(r+o)}))}overrideNativeAdIndexPersection(e){this.nativeAdIndexList=e}overrideCmsAdIndexPersection(e){this.cmsAdIndexList=e}updateAndFilterSamAdResponse(e,t){const{placements:n}=this.nativeAdService.updateSamAdResponse(e,t,this.getIsPrerenderAds());return n.filter((e=>e.items.length))}getAdIndices(e){return a(r)?.get(e)||[]}getSamIndices(e){return this.config.avoidPredictInfopaneAd&&e.toLowerCase().indexOf("infopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(e):[]}getPredictedSamIndices(e){return this.samRequest?.placements?.find((t=>t.region===e))?.indices||[]}getCmsIndices(e){return this.config.avoidPredictInfopaneAd&&e.toLowerCase().indexOf("resinfopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(e):[]}getPredictedCmsIndices(e){return this.cmsRequest?.placements?.find((t=>t.region===e))?.indices||[]}getFastHydrationIndices(e){return this.fastHydrationRequest?.placements?.find((t=>t.region===e))?.indices||[]}validateSamAdPlacementConfig(e){const t=[],n=new Map;for(const i of e.placements){const e=i.region,r=this.getPredictedSamIndices(e);if(!r||!r.length){t.push(i);continue}const o=r.filter((e=>i.indices.indexOf(e)>=0)),a=i.indices.filter((e=>o.indexOf(e)<0));i.indices=a,a.length&&t.push(i),n.set(e,o)}let i=t;if(t.length&&this.config.avoidPredictInfopaneAd&&(i=i.filter((e=>e.region.toLowerCase().indexOf("infopane")<0))),i.length?(g(JSON.stringify(this.samRequest?.placements),JSON.stringify(e.placements),A.iLP),p.M0.addOrUpdateTmplProperty("edge_ntp.adMismatched","1")):p.M0.addOrUpdateTmplProperty("edge_ntp.adMatched","1"),e.placements=t,this.predictSamResponse?.samResponse?.placements?.length){const e=[];this.predictSamResponse.samResponse.placements.forEach((t=>{const i=t.region&&n.get(t.region);t.index&&i&&i.indexOf(t.index)>-1&&e.push(t)})),this.predictSamResponse.samResponse.placements=e}}validateCmsAdPlacementConfig(e){const t=[],n=new Map;for(const i of e.placements){const e=i.region,r=this.getPredictedCmsIndices(e);if(!r||!r.length){t.push(i);continue}const o=r.filter((e=>i.indices.indexOf(e)>=0)),a=i.indices.filter((e=>o.indexOf(e)<0));i.indices=a,a.length&&t.push(i),n.set(e,o)}let i=t;if(t.length&&this.config.avoidPredictInfopaneAd&&(i=i.filter((e=>e.region.toLowerCase().indexOf("infopane")<0))),i.length&&g(JSON.stringify(this.cmsRequest?.placements),JSON.stringify(e),A.RaX),e.placements=t,this.predictCmsResponse&&this.predictCmsResponse.length){const e=[];this.predictCmsResponse?.forEach((t=>{const i=n.get(t.region);i&&i.indexOf(t.regionIndex)>-1&&e.push(t)})),this.predictCmsResponse=e}}validateFastHydrationAdPlacement(e){const t=[],n=new Map;for(const i of e.placements){const e=i.region,r=this.getFastHydrationIndices(e);if(!r||!r.length){t.push(i);continue}const o=r.filter((e=>i.indices.indexOf(e)>=0)),a=i.indices.filter((e=>o.indexOf(e)<0));i.indices=a,a.length&&t.push(i),n.set(e,o)}let i=t;t.length&&this.config.avoidPredictInfopaneAd&&(i=i.filter((e=>e.region.toLowerCase().indexOf("infopane")<0))),i.length?p.M0.addOrUpdateTmplProperty("fastHydrationAdMismatched","1"):p.M0.addOrUpdateTmplProperty("fastHydrationAdMatched","1"),e.placements=t}getNativeAdId(e,t,n){if("peekinfopane"===e&&n){const{relativeRegionIndex:t}=n;return`nativead-${e}-${t}`}return`nativead-${e}-${t}`}getIsPrerenderAds(){return!!(this.config.enablePrerenderAds&&(0,_.TR)()&&(0,T.N)()&&"hidden"===document.visibilityState)}async createMetaTags(e){return new Promise((t=>{e.forEach((e=>{if("infopane"===e.region||"river"===e.region||"infopanelock"===e.region||"riverlock"===e.region||"peekriver"===e.region||"peekinfopane"===e.region){const t=e.items&&e.items[0]?.adSelectionReason;if(t){const n=this.getNativeAdId(e.region,e.regionIndex,e);let i;switch(e.region){case"infopane":case"infopanelock":case"peekinfopane":i=`tab_panel_${n}`;break;case"river":case"riverlock":case"peekriver":i=`native_ad_${n}`;break;default:return}try{const e=JSON.parse(t).ads[0].id,n=t.replace(e,i),r=document.head,o=document.createElement("meta");o.name="AdsMetadata",o.content=n,r.appendChild(o)}catch(e){return void(0,P.OO)(e,A.ds2,"Failed to add WhyThisAd meta tag to head")}}}})),t()}))}async loadBuyDirectAd(){await this.nativeAdService.loadBuyDirectAd()}getPeekInfopaneMappingList(){return this.config.useRelativeIndexJKRegion?H.PeekInfopaneIndexMappingListJKRegion:H.PeekInfopaneIndexMappingList}}const W=(e,t,n=!1)=>{const i="NATIVE_AD_HELPER_INSTANCE";let r=k.Gq.get(i);return r&&!n||(r=new H(e,t),k.Gq.set(i,r)),r},G=e=>e===F.PL.NativeAd||e===F.PL.CmsAd||e===F.PL.FirstPartyAd},49565:function(e,t,n){n.d(t,{Mw:function(){return a},fB:function(){return s},x$:function(){return r}});var i=n(98604);const r=e=>{const{clientHeight:t,clientWidth:n}=document.documentElement,r=(0,i.b_)(e);if(!r)throw new Error("River element is not defined");const o=r.getBoundingClientRect();return{contentInViewport:{height:t-o.y,width:n},river:o}},o=(e,t,n)=>c(e,t).reduce(((e,t,i)=>e+t+(0===i?0:n)),0),a=(e,t,n,i,a=12,s=0)=>{const{contentInViewport:c}=r(e),d=((e,t,n,i=12)=>n?n.map((n=>{const r=e[n?.layoutTemplate];return o(r,t,i)})):[])(t,n,i,a);let u=0,l=0;for(let e=0;e<d.length&&!(u>=c.height-s);e++)u+=d[e]+a,l++;return l},s=(e,t,n,i,a=12,s=0)=>{const{contentInViewport:d}=r(e),u=((e,t,n,i=12)=>n?n.map((n=>{if(void 0!==n.templateId){const r=e[n.templateId];return o(r,t,i)}return 0})):[])(t,n,i,a);let l=0,p=0,h=0;for(let e=0;e<u.length;e++){if(l+=u[e]+a,l>=d.height-s){const r=i[e]?.templateId;if(void 0===r)break;const o=t[r],p=c(o,n);l=l-u[e]-a;for(let e=0;e<p.length&&(l+=p[e]+(0==e?0:a),!(l>=d.height-s));e++)h++;break}p++}return{lastSectionIndex:p,lastRowIndex:h}},c=(e,t)=>{if(!e||!e.rowHeightPx)throw new Error("Invalid layout template");const{rowHeightPx:n}=e;return n[t]??[]}},99300:function(e,t,n){n.d(t,{AH:function(){return g},C1:function(){return m},EC:function(){return f},JV:function(){return I},Og:function(){return w},Qz:function(){return P},aR:function(){return k},b:function(){return E},h2:function(){return u},m0:function(){return b},pE:function(){return T},sI:function(){return S},vZ:function(){return C},yy:function(){return A},zX:function(){return v}});var i=n(242),r=n(86117),o=n(79403),a=n(77770),s=n(34800),c=n(90351),d=n(13218);const u=1,l=["river","resriver","river_cms","rightrail"],p=e=>t=>{const n={...t,adLabelText:e.adLabelText,isGreyAdsLabelEnabled:e.isGreyAdsLabelEnabled,isWhiteSlug:e.isWhiteSlug,isTransparentSlug:e.isTransparentSlug,isNarrowTitleFooterGap:e.isNarrowTitleFooterGap,isTransparentAdSlugWithBorder:e.isTransparentAdSlugWithBorder,enableAdsColorBleed:e.enableAdsColorBleed,isAdSlugV4NonDr:e.isAdSlugV4NonDr};return"rightrail"===t.region&&e.rightrail?.useTransparentAdCard&&(n.shouldUseWhiteGradient=!0),l.includes(t.region)?(n.isProviderInFooter=e.isProviderInFooter,n.isProviderInHeader=e.isProviderInHeader,((e,t)=>{if(t.items?.length){if(e.useArticleCardTemplate){const n=Number(t.items[0].imageWidth)||(0,c.Z)(e.adTemplateConfig,"imageSizeConfig.river.w"),i=Number(t.items[0].imageHeight)||(0,c.Z)(e.adTemplateConfig,"imageSizeConfig.river.h");return t.items[0].imageWidth=(225*n/i).toFixed().toString(),t.items[0].imageHeight="225",t.imageWidth=t.items[0].imageWidth,void(t.imageHeight=t.items[0].imageHeight)}t.items[0].imageWidth="300",t.items[0].imageHeight="156"}})(e,n),n):n},h=(e,t)=>{const n=e[t.region]??[];return{...e,[t.region]:n.concat(t)}},g=(e,t)=>t.map(p(e)).reduce(h,{}),f=e=>e.reduce(((e,{region:t,index:n})=>{const i=e.get(t)||[];return i.push(n),e.set(t,i),e}),new Map),m=(e,t)=>e.reduce(((e,n)=>(t(n)?e[0].push(n):e[1].push(n),e)),[[],[]]),y=()=>{const e=(0,i.Ou)()[r.nz+"Complete"];(0,o.hf)("NativeAd.RenderReady",e),(0,o.hf)("NAdRender",1),(0,o.hf)("TTVR.NativeAd",e),(0,r.su)("TTVR.NativeAd",e)},v=(e=!1)=>{const t=(0,i.Ou)().isSSRCompleted&&window.ssrAdData?.length;t&&y(),window.requestAnimationFrame((()=>{setTimeout((()=>{const n=(0,o.v0)(d.Al.IsPrerender&&!e),s=(0,r.O0)("NativeAd.RenderReady");s>-1&&s&&(0,r.su)("NAdRender",n-s);const c=(0,r.O0)("TTNativeAd.Response");c>-1&&(0,r.O_)("NAdProcess",c,n);const u=(0,r.O0)(e?"TTNativeAd.Background.Serve":"TTNativeAd.Serve");u>-1&&(0,r.su)("NAdRespToCallback",u-c),e?(0,a.lr)().then((()=>{const e=(0,i.Ou)();(0,r.O_)("TTVR.NativeAd",0,e.TTPR),(0,r.O_)("TTNativeAd.Request",0,1)})):t||(0,r.O_)("TTVR.NativeAd",0,n)}),0)}));const n=(0,o.v0)(d.Al.IsPrerender&&!e);(0,r.su)("NativeAd.RenderReady",n);const s=(0,r.O0)(e?"TTNativeAd.Background.Serve":"TTNativeAd.Serve");s>-1&&(0,r.su)("NAdCallbackProcess",n-s)};const S=()=>{if((0,i.Ou)().isSSRCompleted&&window.ssrAdData?.length)y();else{const e=(0,o.v0)(d.Al.IsPrerender);(0,r.O_)("TTVR.NativeAd",0,e)}},w=e=>0===e.placement?.items?.length,b=e=>!(e.type!==s.PL.Infopane||!e),C=e=>!(e.type!==s.PL.TabbedInfopaneCard||!e),T=e=>e.type===s.PL.ChannelCarousel||e.type===s.PL.ChannelFilterCard||e.type===s.PL.DynamicFilteredChannel,k=e=>e.type===s.PL.NativeAd||e.type===s.PL.NativeTopAd||e.type===s.PL.FirstPartyAd,P=e=>e.type===s.PL.CmsAd,A=e=>e.type===s.PL.Dense,I=e=>e.type===s.PL.TabbedInfopaneCardTab||e.type===s.PL.TopicFeed,E=e=>e.type===s.PL.BuyDirectAd},64046:function(e,t,n){n.d(t,{G8:function(){return l},Jx:function(){return v},TO:function(){return y},Xd:function(){return m},Zn:function(){return g},cP:function(){return u},iM:function(){return f},oE:function(){return d}});var i=n(17814),r=n(39079),o=n(70041),a=n(24640),s=n(1962),c=n(29218);const d=e=>"WeatherHero"==e.type?o.VnC:e.type+(e.id??""),u="TTVR.ViewCards",l="TTVR.SDCards",p=new Map([[a.U.infopaneCard,()=>!0],[a.U.sectionHeaderCard,()=>!0],[a.U.topStoriesCard,()=>!0],[a.U.contentCard,e=>{const t=(0,s.Ae)(e)||(0,s.UN)(e);return t&&t.height>=i.B._300x225.height&&t.width>=i.B._300x225.width}],[a.U.weatherHeroExperienceCarouselCard,()=>!0]]),h=[a.U.contentCard,a.U.infopaneCard,a.U.sectionHeaderCard,a.U.topStoriesCard,a.U.weatherHeroExperienceCarouselCard];function g(e){const t=c.J[e.type];if(t&&h.includes(t)){const n=p.get(t);return!!n&&n(e)}return!1}const f={C1:1,C2:2,C3:3,C4:4,C5:5,C6:6};function m(e,t,n=2){return e*n*(f[t]||1)}const y=e=>{switch(e){case r.Nv._1x_1y:return 1;case r.Nv._1x_2y:case r.Nv._2x_1y:return 2;case r.Nv._3x_1y:return 3;case r.Nv._2x_2y:case r.Nv._4x_1y:return 4;default:return 2}},v={contentGroup:o.ssN,horoscopeCard:o.UE,linkedInCard:o.OF7,moneyInfoCard:o.tJU,onThisDayCard:o.RGQ,qnaCard:o.yHC,"shopping-carousel":o.Tk6,sportsCard:o.bru,trafficCard:o.yn7,travelDestination:o.opx,trendingNowCard:o.bOQ,weather:o.$38,autosCarousel:o.nXC,boostAdCard:o.y2o,electionsCard:o.KfJ,rewardsCard:o.IF2,gamingRecentlyPlayedCard:o.oR0,"trending-in-ten-minutes-id":o.x6e,"infopane-id":o.x6e,"war-in-ukraine-carousel-id":o.x6e,"local-news-carousel-id":o.x6e,casualGamesCarouselCard:o.WJ2,trendingSearchCard:o.veX,mangaCard:o.vG7,mangaCarousel:o.u4d,"shopping-prong-card-response":o.x6e,winAppCard:o.dMz,publisherList:o.iuJ,promotedAdCard:o.SYh}},82821:function(e,t,n){n.d(t,{Jv:function(){return f},QH:function(){return w},Qf:function(){return h},Rs:function(){return m},XI:function(){return g},eu:function(){return b},le:function(){return C},s2:function(){return S}});var i=n(64046),r=n(72263),o=n(33779),a=n(5302),s=n(44132),c=n(49565),d=n(29636),u=n(24640);const l={enableDynamicWaterfallWPO:"wf",enableVerticalCarousels:"vc",enableAugments:"aug"},p={0:r.K$.c1,1:r.K$.c2,2:r.K$.c3,3:r.K$.c4,4:r.K$.c5};function h(e,t,n,r){const o=i.iM[e];let a="";let s;a=t?Object.keys(t).slice(0,o).map((e=>`${e}:${t[e].offset}`)).join(","):((e,t="c",n=":0")=>Array.from({length:e},((e,i)=>`${t}${i+1}${n}`)).join(","))(o),s=n?Object.keys(n).slice(0,o).map((e=>`${e}:${n[e].offset}`)).join(","):((e,t="c",n=":-1")=>Array.from({length:e},((e,i)=>`${t}${i+1}${n}`)).join(","))(o);const c={layout:e?.toLowerCase(),colstatus:a,colwidth:300,adoffsets:s,l3v:2};if(r){const e=function(e){if(!e)return;const t=[];if(Object.keys(l).forEach((n=>{const i=n;e[i]&&t.push(l[i])})),!t.length)return;return t.join(",")}(r);e&&(c.wpoux=e)}return c}function g(e,t){const n={c1:{offset:0},c2:{offset:0},c3:{offset:0},c4:{offset:0},c5:{offset:0}},i=e[0];for(let r=1;r<e.length;r++){const o=p[r],a=t?.[o]?.offset??0;n[o].offset=e[r]-i+a}return n}function f(e,t,n){const i={c1:{offset:-1},c2:{offset:-1},c3:{offset:-1},c4:{offset:-1},c5:{offset:-1}};for(let r=0;r<e.length;r++){const o=p[r];-1!=e[r]?i[o].offset=e[r]:i[o].offset=void 0!==n?.[o]?.offset?-1===n[o].offset?-1:n[o].offset+t[r]:e[r]}return i}const m=(e,t,n,i)=>{const{columnsOffset:r,adsOffset:s}=v(t),c=[];try{const o=Object.values(r)?.map((e=>e.offset))||[];e.forEach(((e,r)=>{const a=p[r];let d=Boolean(s[a].offset>-1),l=Math.max(s[a].offset,0),h=0;const g=t?.numProcessedCards?.[r]??0;let f=0;e.slice(g)?.forEach(((e,t)=>{if("cs-section-tracker"!==e.childTemplateType&&!C(e)){const r=y(e,n,i);h+=r,e.childTemplateType===u.U.nativeAdCard||e.childTemplateType===u.U.responsiveAdCard?(d=!0,l=0):d&&(l+=r),f=t}})),o[r]+=h,c.push(f+g+1),r<=1&&!t&&(o[r]+=i),d&&(s[a].offset=l)}));for(let t=1;t<e.length;t++){r[p[t]].offset=o[t]-o[0]}return{adsOffset:s,columnsOffset:r,numProcessedCards:c}}catch(n){return void(0,o.OO)(n,a.beP,"Error calculating rendered column offsets","",{numColumns:e?.length,lastPageOffsets:t})}},y=(e,t,n)=>e.childTemplateType===u.U.nativeAdCard||e.childTemplateType===u.U.responsiveAdCard?d.Pj:t?.get(e.id)||(e.height??n),v=e=>{let t={c1:{offset:0},c2:{offset:0},c3:{offset:0},c4:{offset:0},c5:{offset:0}},n={c1:{offset:-1},c2:{offset:-1},c3:{offset:-1},c4:{offset:-1},c5:{offset:-1}};return e?.preColumnsOffset&&(t={...e.preColumnsOffset}),e?.preAdsOffset&&(n={...e.preAdsOffset}),{adsOffset:n,columnsOffset:t}};function S(e,t){(void 0===e.layout||void 0===e.colstatus||void 0===e.l3v||void 0===e.adoffsets)&&s.M0.sendAppErrorEvent({...a.wtK,message:"Waterfall feed request missing QSPs",pb:{...a.wtK.pb,customMessage:`feedName: ${e.feedName}, \n                                option2: true, \n                                layout: ${e.layout}, \n                                colstatus: ${e.colstatus}, \n                                l3v: ${e.l3v}, \n                                adoffsets: ${e.adoffsets}, \n                                requestnextPageUrl: ${e.nextPageUrl},\n                                requestServiceUrl: ${e.serviceUrl},\n                                useWebLayoutEndpoint: ${e.useWebLayoutEndpoint},\n                                pageScenario: ${e.pageScenario},\n                                traceIdIndex: ${t?.traceIdIndex}, \n                                Statics: ${t?.isStatic}, \n                                debugId: ${t?.debugId}, \n                                fdHead: ${t?.serviceContext.fdHead},\n                                responseNextPageUrl: ${t?.nextPageUrl},\n                                responseNextPageRequest.nextPageUrl: ${t?.nextPageRequest?.nextPageUrl},\n                                responseNextPageRequest.serviceUrl: ${t?.nextPageRequest?.serviceUrl},\n                                responseSource: ${t?.responseSource}, \n                                status: ${t?.status},\n                                responseStatus: ${t?.responseStatus}`}})}const w=(e,t)=>e.map((e=>e.cards.reduce(((e,n)=>e+(n.height?n.height:t)),0))),b=(e,t,n,i=0)=>{const{contentInViewport:r}=(0,c.x$)(e),o=((e,t)=>e?e.map((e=>{const{colSpan:n,height:i=t}=e?.columns[0]?.cards[0]||{},r=w(e.columns,t);if(n&&n>1)for(let e=1;e<=Math.min(n,r.length-1);e++)r[e]+=i;return Math.min(...r)})):[])(t,n);let a=0,s=0;for(let e=0;e<o.length&&!(a>=r.height-i);e++)a+=o[e],s++;return s},C=e=>e?.id?.startsWith("loadingCardPlaceholder")},90548:function(e,t,n){n.d(t,{Ay:function(){return g},Rc:function(){return f}});var i=n(42122);var r=n(46037),o=n(98604);const a=e=>(0,r.R)(e)?(0,o.b_)(e):null,s=e=>{const t=a(e);if(!t)return{actionCompleted:!1,status:`TargetId [${e}] was not found.`};const n=(e=>{const t=e&&e.click;return!(!t||"function"!=typeof t||(e.click.call(e),0))})(t);return{actionCompleted:n,status:`Click status: TargetId [${e}] == ${n}`}},c="clickOffice365Button",d={["clickAddTileButton"]:()=>s("AddTopSiteButton"),["clickMyFeedPivotButton"]:()=>s("MyFeedPivotButton"),[c]:()=>s("office365"),["clickPersonalizeButton"]:()=>s("PersonalizeButton"),["clickSettingsAdvancedButton"]:()=>s("SettingsAdvancedButton"),["clickSettingsButton"]:()=>s("SettingsButton"),["clickSettingsCloseButton"]:()=>s("settingsCloseButton"),["clickSettingsCustomButton"]:()=>s("SettingsCustomButton"),["clickSettingsFocusedButton"]:()=>s("SettingsFocusedButton"),["clickSettingsInformationalButton"]:()=>s("settingsInformationalButton"),["clickSettingsInspirationalButton"]:()=>s("SettingsInspirationalButton"),["clickVoiceSearchButton"]:()=>s("searchBoxVoiceButton"),["openEdgeBrowserNewWindow"]:async e=>e&&e.text&&(0,r.R)(e.text)?(window.open(e.text,"_blank").focus(),{actionCompleted:!0,status:"Window opened"}):{actionCompleted:!1,status:"No url provided"},["clickWaffleButton"]:()=>s("waffle"),["focusOnSearchBar"]:()=>(e=>{const t=a(e);if(!t)return{actionCompleted:!1,status:`TargetId [${e}] was not found.`};const n=(e=>{const t=e&&e.focus;return!(!t||"function"!=typeof t||(e.focus.call(e),0))})(t);return{actionCompleted:n,status:`Focus status: TargetId [${e}] == ${n}`}})("searchBoxInput"),["clickRewardsButton"]:()=>s("rewardsIcon")};var u,l,p=n(523),h=n(82928);!function(e){e.pinMsnews="pinMsnews",e.tryInformationalMode="tryInformationalMode",e.tryInformationalModeDirect="tryInformationalModeDirect",e.tryInformationalModeProg="tryInformationalModeProg",e.tryPersonalizations="tryPersonalizations",e.focusOnSearchBar="focusOnSearchBar",e.tryOffice365="tryOffice365"}(u||(u={})),function(e){e.setDefaultBrowser="setDefaultBrowser"}(l||(l={}));const g=()=>async()=>{let e;const t=d[c];return t&&(e=await t({})),i.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e},f=()=>async()=>m("always");async function m(e){const t={actionCompleted:!1},n=await(0,h.oU)(p.RL);if(!n)return t.status="ChromiumPageSettingsConnector not found",t;const i=n.getCurrentState();if("custom"!==i.currentLayout){const e={...i,originalLayout:i.currentLayout,currentLayout:"custom"};n.updateLayout(e)}return n.updateFeeds(e,i.selectedFeedDisplaySetting),t.actionCompleted=!0,t.status=`Feed toggle changed to ${e}`,t}},89658:function(e,t,n){n.d(t,{NS:function(){return r},ob:function(){return s},qP:function(){return i},tM:function(){return o},tW:function(){return a}});const i="data-t";var r;!function(e){e.Auto="auto",e.AutoScroll="autoScroll",e.Load="load",e.OutOfFocus="outoffocus",e.Partial="partial",e.Resize="resize",e.Scroll="scroll",e.Swipe="swipe",e.Tap="tap",e.View="view"}(r||(r={}));const o="TelemetryPageViewNotificationEvent",a="AppErrorNotificationEvent",s="IDXId"},24358:function(e,t,n){var i,r;n.d(t,{C:function(){return i},z:function(){return r}}),function(e){e[e.Exceptional=0]="Exceptional",e[e.Fallback=1]="Fallback"}(i||(i={})),function(e){e[e.Alert=0]="Alert",e[e.Deprecated=1]="Deprecated",e[e.HighImpact=2]="HighImpact",e[e.Critical=3]="Critical"}(r||(r={}))},81586:function(e,t,n){n.d(t,{Aw:function(){return o},c9:function(){return i},uH:function(){return r},wu:function(){return a}});const i={Undefined:0,Header:1,Footer:2,TopNavBar:3,NavBar:4,DropDown:5,Section:6,Carousel:7,Module:8,SearchBox:9,InputBox:10,ActionButton:11,Interaction:12,Headline:13,Legacy_Navigate:14,Entity:15,Legacy_StructuredData:16,Legacy_AppStore:17,Legacy_Launch:18,Legacy_CmsPromotions:19,Legacy_MicrosoftWebStore:20,Legacy_XboxStore:21,Legacy_OfficeStore:22,Legacy_Install:23,Legacy_PartnerLinks:24,Legacy_SponsoredContent:25,Legacy_Follow:26,Legacy_Unfollow:27,Legacy_More:28,Topic:29,Provider:30,Legacy_Close:36,Legacy_Share:37,Legacy_Like:38,Legacy_Dislike:39,Legacy_Unlike:40,Legacy_Undislike:41,Legacy_Mute:42,Legacy_Unmute:43,Legacy_Cancel:44,Legacy_Manage:45,NewStories:46,AutoSuggest:47,Tile:49,TrendingNews:50,AllCoverage:51,Report:52,MsccCookieComplianceBanner:54,CookieWallCookieComplianceBanner:57,FRE:60,VideoPlayer:61,ContentCard:62,SubmitForm:63,TrafficCard:64,WeatherCard:65,TravelDestinationCard:66,FitnessWorkoutVideo:67,BingHealthFitnessCard:68,FamilyCard:69,FitnessCard:70,HealthQnACard:71,HealthTipCard:72,HealthFitnessCarousel:73,CovidCard:74,Audio:75,ShoppingAd:76,ContentGroup:77,AicreationCard:78,Game:79,HealthRiverCard:80,Augment:81,Manga:82,NotificationCenter:85,MomentInTime:86},r={Undefined:0,StructuredData:1,AppStore:2,CmsPromotions:3,MicrosoftWebStore:4,XboxStore:5,OfficeStore:6,PartnerLinks:7,SponsoredContent:8,ExternalLink:10,SearchPromo:11,Feed:12,Article:13,Gallery:14,Video:15,Audio:16,Settings:17,DisplayAd:18,OfficeDocument:19,App:20,SearchResult:21,VideoAd:22,Map:23,Comment:24,Profile:25,Coachmark:26,TrendingSearch:27,AutoSuggestSearch:28,SearchHistory:29,TextSearch:30,TopSites:31,SearchLink:32,ImageSearch:33,VoiceSearch:34,Toast:35,Greeting:36,Image:37,Banner:38,Waffle:39,Notification:40,QnaTopic:41,QnaContent:42,Publisher:43,Topic:44,LayoutToggle:45,WebContent:46,FinanceTicker:47,CashbackOffer:48,AiCharacter:49,FoodItem:50,FitnessChallenge:51,Overlay:52,Inspiration:53,DailyDiscovery:54,SegmentAugment:55,Upsell:56,UpsellLearnMore:57,WeatherHero:58,UpsellTooltip:60,UpsellGetApp:61,UpsellAppStore:62,UpsellGooglePlay:63,DailyBrief:64,Gem:65},o={Click:"click",Hover:"mouseenter",MouseLeave:"mouseleave",Submit:"submit",View:"view",RightClick:"rightclick",Wheel:"wheel",KeyPress:"keypress",HorizontalSwipe:"hswipe",MiddleClick:"middleclick",VerticalSwipe:"vswipe",Launch:"launch"},a={Undefined:0,Navigate:1,ContextMenu:2,Pin:3,Unpin:4,Rearrange:5,Remove:6,Add:7,Open:8,View:9,Follow:10,Unfollow:11,More:12,Close:13,Share:14,Like:15,Dislike:16,Unlike:17,Undislike:18,Mute:19,Unmute:20,Cancel:21,Launch:22,Install:23,Manage:24,Show:25,MuteCancel:26,Save:27,Hide:28,Unhide:29,Customize:30,Suspend:31,Clear:32,SignIn:33,SignOut:34,UndoSave:35,TurnOn:36,TurnOff:37,Forward:38,Response:39,Report:40,ZoomIn:41,ZoomOut:42,Comment:43,Sort:44,Love:45,Surprised:46,Thinking:47,Sad:48,Angry:49,TextSearch:50,ImageSearch:51,UndoRemove:52,Rename:53,SearchLink:54,VoiceSearch:55,Complete:56,Play:57,Pause:58,Seek:59,Volume:60,ClosedCaptions:61,Fullscreen:62,Restore:63,Replay:64,Copy:65,Reactlike:66,UnReactlike:67,UnLove:68,UnSurprised:69,UnThinking:70,UnSad:71,UnAngry:72,ReportAd:73,Refresh:74,Paginate:75,Click:76,Hover:77,SelectProduct:78,Signup:79,CompleteOrder:80,Model3DInteraction:81,PushNotificationReceive:82,PushNotificationShow:83,PushNotificationClick:84,PushNotificationHmsClick:85,Expand:86,Collapse:87,NoSearchQuerySubmit:88,Feedback:89,QualityChange:90,ProtocolLaunch:91,SydneySummary:92,SydneyTopQuestions:93,SydneyKeyTakeaways:94,SydneyDegreeOverview:95,SydneyFactCheck:96,SydneyMore:97,LeftSwipe:98,RightSwipe:99,ContinueToMobileQrCode:100,CustomContextMenu:101,PlayBackSpeedChange:102};var s;!function(e){e[e.Empty=0]="Empty",e[e.SearchBox=1]="SearchBox",e[e.TopSites=2]="TopSites",e[e.Suggested=4]="Suggested",e[e.ContentFeed=8]="ContentFeed",e[e.WinFRE=16]="WinFRE",e[e.BingImage=32]="BingImage",e[e.ContentBelowTheFold=64]="ContentBelowTheFold",e[e.CustomModeOption=128]="CustomModeOption",e[e.GreetingEnabled=256]="GreetingEnabled",e[e.HeadingsOnly=512]="HeadingsOnly",e[e.StripeLayout=1024]="StripeLayout",e[e.Peek=2048]="Peek"}(s||(s={}))},44132:function(e,t,n){let i;n.d(t,{M0:function(){return a},dK:function(){return o},uZ:function(){return s}});const r=new Promise((e=>{i=e}));let o=()=>r,a=null;function s(e,t=i){a=e,t()}},24025:function(e,t,n){var i;n.d(t,{G:function(){return i}}),function(e){e[e.All=0]="All",e[e.Otf=1]="Otf",e[e.OneDS=2]="OneDS",e[e.CTag=3]="CTag",e[e.Comscore=4]="Comscore",e[e.Debug=5]="Debug",e[e.SuperApp=6]="SuperApp",e[e.Automation=7]="Automation",e[e.SuperAppBridge=8]="SuperAppBridge"}(i||(i={}))},71903:function(e,t,n){n.d(t,{P:function(){return r}});var i=n(94769);class r{createPageViewPayload(e){if(!e)return;const t=e&&e.page,n=t&&t.content,r=e&&e.user,o={rnd:(0,i.Xn)(),udc:!0};return t&&(o["pg.n"]=t.name,o["pg.t"]=t.type,o["pg.c"]=t.config,o["pg.p"]=t.product,o.rf=t.referral,o.tp=t.url,o.cvs=t.canvas,t.consentChanged&&(o.ctsa=t.consentChanged)),n&&(o.di=n.domainId,o["st.dpt"]=n.category,o["st.sdpt"]=n.subcategory,o.subcvs=n.vertical),e&&(o.lng=e.locale&&e.locale.mkt,e.request&&(o.rid=e.request.requestId,o.activityId=e.request.activityId),e.browser&&(o["d.imd"]=e.browser.isMobile,o.scr=e.browser.screenSize,o.anoncknm=e.browser.anoncknm)),r&&(o.issso=r.isSso,o.aadState=r.aadState),o}}},40373:function(e,t,n){n.d(t,{O:function(){return r}});var i=n(94769);class r{createPageViewPayload(e){if(!e)return;let t=e&&e.page&&e.page.url;try{const n=new URL(t),i=e&&e.page&&e.page.config;(8&i||2048&i)&&(n.searchParams.set("content","1"),t=n.href),e.locale&&e.locale.mkt&&(n.searchParams.set("mkt",e.locale.mkt),t=n.href)}catch{}return{rn:(0,i.Xn)(),c1:2,c2:3000001,cs_ucfr:1,c7:t,c8:e&&e.page&&e.page.content&&e.page.content.title,c9:e&&e.page&&e.page.referral,cs_fpid:e&&e.browser&&e.browser.muid,cs_fpit:"o",cs_fpdm:"*null",cs_fpdt:"*null"}}}},39399:function(e,t,n){n.d(t,{k:function(){return u}});var i=n(89658),r=n(81586),o=n(65004),a=n(94769),s=n(1092),c=n(7191),d=n(13578);class u{constructor(e=!1){this.enableBatchingForAllEvents=!1,this.enableBatchingEventList={},!0!==e?Array.isArray(e)&&e.forEach((e=>this.enableBatchingEventList[e]=!0)):this.enableBatchingForAllEvents=!0}createPageViewPayload(e){if(e){return this.createEvent("PageView",{...e},o.zU.RealTime)}}createContentViewPayload(e,t,{contentViewType:n,isMeaningfulScroll:r}){if(!t)return;const s=[];e.forEach((e=>{s.push(this.mapTelemetryObject(e))}));let c;(0,a.d5)()&&(c={content:{docHeight:(0,a.d5)()}});const u={...t,...c,compressedObject:s,contentViewType:n};if(n===i.NS.Scroll&&(u.isMeaningfulScroll=r),!(0,d.Z)(s)){return this.createEvent("ContentView",u,o.zU.RealTime)}}createActionPayload(e,t,n,i){if((0,d.Z)(e)||!t)return;let a;n===r.Aw.RightClick?a="rightclick":t&&t.browser&&!0===t.browser.isMobile?a="tap":n===r.Aw.Click&&(a="click");const s=e.content&&e.content.type,u=e.type||(0,c.Y)(s,i);0!==u&&(e.type=u),delete e.action,delete e.behavior,delete e.overrideId,delete e.overrideDestinationUrl,delete e.overrideEmailIdScrubbing;return this.createEvent("UserAction",{actionType:n,behavior:i,object:e,...t,gesture:a},o.zU.RealTime)}createEventPayload(e,t,n){if(!n)return;return this.createEvent(e,{...n,...t},o.zU.RealTime)}createCustomEventPayload(e,t,n){if(!n&&"AppError"!==e||(0,d.Z)(t))return;return this.createEvent(e,{...n,extSchema:t},o.zU.RealTime)}mapTelemetryObject(e){let t;const n=e&&e.content&&e.content.type;(n||e.behavior)&&(t=(0,c.Y)(n,e.behavior));const i={n:e&&e.name,y:e&&e.type||t,l:e&&e.content&&e.content.id,h:e&&e.content&&e.content.headlineIdx,v:e&&e.content&&e.content.vertical,tp:e&&e.content&&e.content.topic,c:e&&e.content&&e.content.category,s:e&&e.content&&e.content.source,f:e&&e.feed&&e.feed.id,ct:e&&e.content&&e.content.type,i:e&&e.placement&&e.placement.id,p:e&&e.placement&&e.placement.parentId,o:e&&e.placement&&e.placement.ordinal,tv:e&&e.content&&e.content.teraVertical,tc:e&&e.content&&e.content.teraCategory,aud:e&&e.content&&e.content.audienceMode,isLocal:e&&e.content&&e.content.isLocal,subscriptionType:e&&e.content&&e.content.subscriptionType,providerType:e&&e.content&&e.content.providerType,zone:e&&e.zone,isMonetized:e&&e.isMonetized,isFeed:e&&e.isFeed};return e.ext&&(i.ext=e.ext),i}createEvent(e,t,n){let i=0;return!a.kP||this.enableBatchingForAllEvents||this.enableBatchingEventList[e]||(i=2),{name:s.id[e],data:t,baseType:s.id.Base,latency:n,sync:i}}}},54394:function(e,t,n){n.d(t,{Rf:function(){return u},ht:function(){return a},vU:function(){return l}});var i=n(81586),r=n(89658),o=n(16243);const a=["click","auxclick","contextmenu"],[s,c,d]=a,u="data-customhandled";class l{constructor(){this.clickSearchDepth=20,this.contextMenuEventCallback=e=>{const t=this.getClickTarget(e),n=t&&t.hasAttribute("custom-context-menu")?i.wu.CustomContextMenu:i.wu.ContextMenu;this.handleClickEvent(t,i.Aw.RightClick,n)},this.clickEventCallback=e=>{const t=this.getClickTarget(e);1===e.button?this.handleClickEvent(t,i.Aw.MiddleClick,i.wu.Navigate):this.handleClickEvent(t)},this.auxClickEventCallback=e=>{if(1===e.button){const t=this.getClickTarget(e);this.handleClickEvent(t,i.Aw.MiddleClick,i.wu.Navigate)}}}observe(e=window,t){e.addEventListener(s,this.clickEventCallback),e.addEventListener(c,this.auxClickEventCallback),t||e.addEventListener(d,this.contextMenuEventCallback)}unobserve(e,t){e.removeEventListener(s,this.clickEventCallback),e.removeEventListener(c,this.auxClickEventCallback),t||e.removeEventListener(d,this.contextMenuEventCallback)}handleClickEvent(e,t,n){const i=this.getTelemetryClickTarget(e);if(!i)return;i&&i.hasAttribute(u)||this.dispatchEvent("telemetryclick",i,t,n)}dispatchEvent(e,t,n,i){const r=new CustomEvent(e,{detail:{element:t,action:n,behavior:i}});dispatchEvent(r)}getTelemetryClickTarget(e){let t=e;for(let e=0;e<this.clickSearchDepth&&t&&!this.validTarget(t);e++)if(t.assignedSlot)t=t.assignedSlot;else if(t.parentElement)t=t.parentElement;else{if(!t.parentNode||!t.parentNode.host)break;t=t.parentNode.host}if(this.validTarget(t))return t}getClickTarget(e){if(!e.composedPath||"function"!=typeof e.composedPath)return e.target;{const t=e.composedPath();if(t.length>2&&"hasAttribute"in t[0]&&!t[0].hasAttribute(r.qP)&&"[object ShadowRoot]"===Object.prototype.toString.call(t[1])&&"hasAttribute"in t[2]&&t[2].hasAttribute(r.qP))return t[2];if(t.length>0)return t[0]}}validTarget(e){const t=e instanceof Element;if(!e||!t)return!1;const n=o.u.get(e);let r;return r=n?n.contract:o.u.parseContract(e),"BUTTON"===e.nodeName||e.hasAttribute("href")||e.getAttribute&&"button"===e.getAttribute("role")||r&&r.type===i.c9.DropDown||r&&r.type===i.c9.ActionButton||r&&r.behavior&&e.tagName.includes("-")||e.form}}},19319:function(e,t,n){n.d(t,{v:function(){return a}});var i=n(90351),r=n(25514);const o={n:"name",t:"type",a:"action",b:"behavior",customHandled:"customHandled",d:"overrideDestinationUrl",oe:"overrideEmailIdScrubbing",z:"zone",ism:"isMonetized",isfeed:"isFeed",isci:"isCI","c.hi":"content.headlineIdx","c.auth":"content.author","c.i":"content.id","c.l":"content.isLocal","c.s":"content.source","c.p":"content.parentId","c.t":"content.type","c.tp":"content.topic","c.v":"content.vertical","c.c":"content.category","c.sc":"content.subcategory","c.pn":"content.partnerName","c.pi":"content.partnerId","c.b":"content.brand","c.bi":"content.brandId","c.st":"content.subscriptionType","c.tv":"content.teraVertical","c.tc":"content.teraCategory","c.pl.i":"content.placement.id","c.pl.p":"content.placement.parentId","c.pl.o":"content.placement.ordinal","c.pl.l":"content.placement.lineage","c.pl.lo":"content.placement.lineageOrdinal","c.aud":"content.audienceMode","c.pv":"content.providerType","f.i":"feed.id","f.n":"feed.name","f.t":"feed.type",ext:"ext","m.c":"metrics.isContentCI"};class a{static compress(e){const t={},n=Object.keys(o);for(let r=0;r<n.length;r++){const a=n[r],s=(0,i.Z)(e,o[a]);void 0!==s&&(t[a]=s)}const r=(0,i.Z)(e,"content.headline");return r&&(t["c.hl"]=r),t}static decompress(e){if(!e)return;const t={},n=Object.keys(o);for(let a=0;a<n.length;a++){const s=n[a],c=(0,i.Z)(e,s);void 0!==c&&(0,r.Z)(t,o[s],c)}return e["c.hl"]&&(0,r.Z)(t,"content.headline",e["c.hl"]),t}}},16243:function(e,t,n){n.d(t,{u:function(){return d}});var i=n(89658),r=n(44132),o=n(94769),a=n(19319),s=n(78058),c=n(46728);class d{static#e=this.elementMap=new WeakMap;static#t=this.root=new d({name:"root"});static#n=this.lastId=0;static#i=this.needUpdate=!1;get _id(){return this.id}get _element(){return this.element}get combinedContract(){if(this.contract){const e=(this.contract.content=this.contract.content||{}).headline;this.contract.content.headline=e||(0,o.tH)(this.element)}return this.hasInheritedProperty?(0,c.Z)({},this.superContract,this.contract,this.internalContract):(0,c.Z)({},this.contract,this.internalContract)}get internalContract(){const{lineage:e,lineageOrdinal:t}=d.getLineage(this)||{},n=d.getInheritedProperties(this),i={placement:{id:this.id,lineage:e,lineageOrdinal:t},...n};return this.parentDOM&&this.parentDOM.id&&0!==this.parentDOM.id&&(i.placement.parentId=this.parentDOM.id,i.placement.ordinal=this.ordinal),i}constructor(e){this.hasInheritedProperty=!1,this.children=[],this.ordinal=0,this.ordinalCount=0,this.contract=e||{},this.ordinalCount=0,this.superContract={}}static addElement(e){if(!e)return;const t=this.parseContract(e);let n=this.get(e),r=!1;n&&n.id?t&&(n.contract=t):(n=new d(t),n.id=this.generateId(),this.set(e,n),r=!0);let a=e.parentElement;!a&&e.parentNode&&e.parentNode.host&&(a=e.parentNode.host);let s=a&&(0,o.pE)(a,`[${i.qP}]`),c=s&&this.get(s);return s&&!c&&((0,o.t0)("telemetrynodeadded",s),c=this.get(s)),n===c&&(s=s&&s.closest(`[${i.qP}]`),c=s&&this.get(s)),n.parentDOM=c&&c!==n?c:d.getRoot(),this.inheritProperty(n),this.needUpdate=!0,r&&dispatchEvent(new CustomEvent("telemetrynodetrack",{detail:n})),n}static inheritProperty(e){if(!r.M0||!r.M0.config||r.M0.config.inheritByTraversingDOM||!e||!e.contract)return;const t=e.parentDOM&&e.parentDOM.contract,n=e.parentDOM&&e.parentDOM.superContract,i=e.contract,o=e.superContract;r.M0.config.inheritExt&&(t&&t.ext||n&&n.ext)&&(e.hasInheritedProperty=!0,o.ext={...n&&n.ext,...t&&t.ext,...i.ext})}getShouldTrackPartialContentUpdate(){return!this.element||!this.element.hasAttribute("data-nopartialcontentview")&&(void 0===this.memoizedParentShouldTrackPartialContentUpdate&&(this.memoizedParentShouldTrackPartialContentUpdate=this.parentDOM?.getShouldTrackPartialContentUpdate()??!0),this.memoizedParentShouldTrackPartialContentUpdate)}static isObject(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}static renderObject(e){return e.render()}static renderContract(e){return s.D.render(e)}static setAttribute(e,t,n){if(!e||!e.dataset)return;const r=this.renderContract(t||n&&n.contract);r&&(e.dataset.t=r[i.qP])}static get(e,t=!0){const n=this.elementMap.get(e);if(n&&t){const t=this.parseContract(e);t&&(n.contract=t)}return n}static getLineage(e,t=">",n=!1){try{if(e&&e.parentDOM&&e.parentDOM!==d.root){const i=this.getLineage(e.parentDOM,t,n),{lineage:r,lineageOrdinal:o}=i||{};return{lineage:r+t+e.contract.name,lineageOrdinal:(o?o+t:"")+e.ordinal}}return e&&e.parentDOM&&e.parentDOM===d.root&&n?{lineage:e.contract.name,lineageOrdinal:`${e.ordinal}`}:{lineage:e&&e.contract.name}}catch(t){if(r.M0&&r.M0.config&&r.M0.config.logElementForLineageFailure){const{id:t,tagName:n}=e&&e.element||{};r.M0.sendAppErrorEvent({id:20203,severity:1,message:"Error while parsing lineage",pb:{customMessage:JSON.stringify({elementId:t,elementTag:n})}})}}}static getInheritedProperties(e){if(!r.M0||!r.M0.config||!e)return;const{inheritByTraversingDOM:t=!1,inheritPropertyList:n=[],memoizeInheritedProperties:i}=r.M0.config,o=t&&n;return o?i?this.getInheritedPropertiesWithMemoize(e,o):this.getInheritedPropertiesWithoutMemoize(e,o):void 0}static getInheritedPropertiesWithoutMemoize(e,t){let n=e;const i={};for(;n&&n!==d.root;){for(const e of t){const t=n.contract&&n.contract[e];void 0!==t&&(void 0===i[e]?i[e]=t:this.isObject(i[e])&&(i[e]={...t,...i[e]}))}n=n.parentDOM}return i}static getInheritedPropertiesWithMemoize(e,t){if(e.memoizedProperties)return e.memoizedProperties;const n={};for(const i of t){n[i]=e.contract[i];let t=e&&e.parentDOM;for(;t&&t!==d.root;){const e=t.memoizedProperties?t.memoizedProperties[i]:t.contract[i];if(void 0!==e&&(void 0===n[i]?n[i]=e:this.isObject(n[i])&&(n[i]={...e,...n[i]})),t.memoizedProperties)break;t=t.parentDOM}}return e.memoizedProperties=n,n}static getRoot(){return d.root}static getTelemetryObject(e){const t=this.get(e);if(t&&t.contract)return new s.D(t.contract)}static parseContract(e){try{const t=e&&e.getAttribute&&e.getAttribute(i.qP);return t?this.parseAttribute(t):void 0}catch{}}static parseAttribute(e){try{const t=e&&JSON.parse(e);return this.parseMetadata(t)}catch{}}static parseMetadata(e){try{return e&&a.v.decompress(e)}catch{}}static set(e,t){t.element=e,this.elementMap.set(e,t)}static updateLayout(){if(!this.needUpdate)return;this.needUpdate=!1,this.root.ordinalCount=0;const e=(0,o.Ux)(document.documentElement);for(const t of e){let e=this.get(t);e&&e.parentDOM||((0,o.t0)("telemetrynodeadded",t),e=this.get(t)),e&&(e.ordinal=e.parentDOM?++e.parentDOM.ordinalCount:0,e.ordinalCount=0)}}static generateId(){return++this.lastId}}},75062:function(e,t,n){n.d(t,{o:function(){return X}});var i=n(89658),r=n(24025),o=n(81586);var a=n(94769);class s{constructor(e,t){this.contentViewCallback=e,this.overrideScrollOffset=t,this.scrollChanged=!0,this.sizeChanged=!0,this.newScrollLeft=null,this.newScrollTop=null,this.firstScrolledMargin=10,this.forceScrollFiring=!1,this.viewportEventIntervalDelayMs=200,this.viewportLeft=0,this.viewportTop=0,this.viewportWidth=0,this.viewportHeight=0,this.userInteracted=!1,this.eventTimerId=0,this.eventTimeoutMS=1e3,this.scrollPerformanceTrackers={},this.syntheticTelemetryScrollCallback=(e,t)=>{e&&(this.userInteracted=!0,this.updateMechanism=i.NS.Scroll,this.scrollChanged=!0,this.triggerCallback(),t(e),this.forceScrollFiring=!0)},this.viewportOffset=0}initListener(e){const t=this.throttle(this.update.bind(this),this.viewportEventIntervalDelayMs);t(),this.scrollContainer=e,this.attachEvent("resize",(e=>{this.userInteracted=!0,this.updateMechanism=i.NS.Resize,this.sizeChanged=!0,this.triggerCallback(),t(e)})),this.attachEvent("scroll",(e=>{e&&!e.preventDefaultScroll&&(this.userInteracted=!0,this.updateMechanism=i.NS.Scroll,this.scrollChanged=!0,this.triggerCallback(),t(e))})),a.kP&&window.addEventListener("telemetryscroll",(e=>{this.syntheticTelemetryScrollCallback(e,t)}))}resetViewportOffset(){this.viewportOffset=this.overrideScrollOffset?this.overrideScrollOffset():(0,a.qC)(this.scrollContainer)}triggerCallback(){this.dispatchEvent("telemetryviewportupdated",this.updateMechanism)}dispatchEvent(e,t){const n=new CustomEvent(e,{detail:{mech:t}});dispatchEvent(n)}throttle(e,t=1e3){let n=0,i=!1;return r=>{if(i)return;const o=(new Date).getTime(),a=o-n;a>t?(n=o,e(r)):(i=!0,setTimeout((()=>{i=!1,e()}),t-a))}}update(e){let t=this.sizeChanged,n=this.scrollChanged;const i=this.viewportWidth,r=this.viewportHeight,o=this.viewportLeft,a=this.viewportTop;this.updateCurrentViewportValues(),t=t&&(r!==this.viewportHeight||i!==this.viewportWidth),n=n&&(o!==this.viewportLeft||a!==this.viewportTop),(this.forceScrollFiring||t||n)&&(this.scheduleViewportEvent(e),this.forceScrollFiring=!1)}updateCurrentViewportValues(){this.scrollChanged&&(this.viewportLeft=this.newScrollLeft||this.getScrollLeft(),this.viewportTop=this.newScrollTop||this.getScrollTop(),this.newScrollLeft=this.newScrollTop=null,!this.firstScroll&&this.viewportTop>this.firstScrolledMargin&&(this.firstScroll=!0)),this.sizeChanged&&(this.viewportWidth=window.innerWidth||document.documentElement.clientWidth,this.viewportHeight=window.innerHeight||document.documentElement.clientHeight),this.scrollChanged=this.sizeChanged=!1}scheduleViewportEvent(e){if(this.userInteracted&&(c(e)&&(this.lastScrollStarted||(this.lastScrollStarted=e&&e.timeStamp||performance.now()),this.scrollPerformanceTrackers.endOfFeedTimeTracker&&this.scrollPerformanceTrackers.endOfFeedTimeTracker.startOrContinue(e),this.scrollPerformanceTrackers.appResponsivenessTracker&&this.scrollPerformanceTrackers.appResponsivenessTracker.startOrContinue(e)),this.eventLastScheduleTime=+new Date,!this.eventTimerId)){const t=()=>{this.eventTimerId=this.userInteracted=!1;const n=Date.now()-this.eventLastScheduleTime;if(n>this.eventTimeoutMS)if(c(e)){const e=performance.now()-this.lastScrollStarted;let t,n,i;this.lastScrollStarted=void 0,this.scrollPerformanceTrackers.scrollInputTracker&&(t=this.scrollPerformanceTrackers.scrollInputTracker.getPendingPotentialInputType(),n=this.scrollPerformanceTrackers.scrollInputTracker.getAndResetPotentialMissedScrollInput(),i=this.scrollPerformanceTrackers.scrollInputTracker.getScrollInstanceData());const r={scrollInputType:t,potentialMissedScrollInput:n,scrollDuration:e,endOfFeedTime:this.scrollPerformanceTrackers.endOfFeedTimeTracker&&this.scrollPerformanceTrackers.endOfFeedTimeTracker.stop(),calculateAri:this.scrollPerformanceTrackers.appResponsivenessTracker&&this.scrollPerformanceTrackers.appResponsivenessTracker.stop(),scrollInstanceData:i};this.contentViewCallback(this.updateMechanism,this.isMeaningfulScroll(),r)}else this.contentViewCallback(this.updateMechanism,this.isMeaningfulScroll());else this.eventTimerId=setTimeout(t,this.eventTimeoutMS-n)};this.eventTimerId=setTimeout(t,this.eventTimeoutMS)}}isMeaningfulScroll(){if(this.updateMechanism!==i.NS.Scroll)return!1;const e=this.overrideScrollOffset?this.overrideScrollOffset():(0,a.qC)(this.scrollContainer),t=(0,a.P6)(this.scrollContainer);return(e>this.viewportOffset&&e-this.viewportOffset>t/2||e<this.viewportOffset&&this.viewportOffset-e>t/2)&&(this.viewportOffset=e,!0)}getScrollTop(){if(this.scrollContainer)return this.scrollContainer.scrollTop;if("undefined"!=typeof pageYOffset)return pageYOffset;{const e=document.body;let t=document.documentElement;return t=t.clientHeight?t:e,t.scrollTop}}getScrollLeft(){if(void 0!==window.pageXOffset)return window.pageXOffset;{const e=document.body;let t=document.documentElement;return t=t.clientWidth?t:e,t.scrollLeft}}attachEvent(e,t){window.addEventListener(e,t,!1),this.scrollContainer&&this.scrollContainer.addEventListener(e,t,!1)}initScrollPerformanceTrackers(e){const{endOfFeedTimeTracker:t,appResponsivenessTracker:n,scrollInputTracker:i}=e;t&&(this.scrollPerformanceTrackers.endOfFeedTimeTracker=t),n&&(this.scrollPerformanceTrackers.appResponsivenessTracker=n),i&&(this.scrollPerformanceTrackers.scrollInputTracker=i,i.start())}}function c(e){return e&&(e.type===i.NS.Scroll||"telemetryscroll"===e.type)}var d=n(24358);let u,l=new Promise((e=>u=e));const p=new Map;function h(){p.clear()}const g=e=>Math.floor(101*Math.random())<=e;let f,m=new Promise((e=>f=e)),y=0;var v=n(1092),S=n(54394);class w{static#e=this.started=!1;static#t=this.startTime=0;static#n=this.dwellTimeElapse=0;static#i=this.dwellTimeElapseV2=0;static#r=this.isPause=!1;static#o=this.isPauseV2=!1;static start(){this.startTime=Date.now(),this.isPause=!1,this.isPauseV2=!1,this.started=!0}static pause(){this.started&&!this.isPause&&(this.isPause=!0,this.dwellTimeElapse+=Date.now()-this.startTime)}static pauseV2(){this.started&&!this.isPauseV2&&(this.isPauseV2=!0,this.dwellTimeElapseV2+=Date.now()-this.startTime)}static getDwellTime(){if(this.isPause){return this.dwellTimeElapse}if(0!==this.startTime&&this.started){return this.dwellTimeElapse+(Date.now()-this.startTime)}return 0}static getDwellTimeV2(){if(this.isPauseV2){return this.dwellTimeElapseV2}if(0!==this.startTime&&this.started){return this.dwellTimeElapseV2+(Date.now()-this.startTime)}return 0}static setDwellTime(e,t){this.startTime=e,this.dwellTimeElapse=t}static setDwellTimeV2(e,t){this.startTime=e,this.dwellTimeElapseV2=t}static reset(){this.dwellTimeElapse=0,this.dwellTimeElapseV2=0,this.startTime=0,this.isPause=!1,this.isPauseV2=!1,this.started=!1}static getIsActive(){return this.started&&!this.isPause}}const b=`[${i.qP}]`,C=e=>(0,a.t0)("telemetrynodeadded",e);class T{constructor(){this.mutationObserver=new MutationObserver(this.mutationCallback.bind(this)),this.processMutatedNode=this.processMutatedNode.bind(this),document.documentElement&&this.processAddedSubtreeAndDispatchEvent(document.documentElement);const e=HTMLElement.prototype.attachShadow;if(e){const t=this;HTMLElement.prototype.attachShadow=function(n){const i=e.call(this,n);return this.shadowRoot&&t.observe(this.shadowRoot),i}}}observe(e){e!==window&&this.mutationObserver.observe(e,{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:[i.qP]})}unobserve(e){}mutationCallback(e){setTimeout((()=>this.processMutationRecord(e)),10)}processMutationRecord(e){for(const t of e){const{addedNodes:e}=t;e?.length?e.forEach(this.processMutatedNode):"attributes"===t.type&&this.processMutatedNode(t.target)}}processMutatedNode(e){((0,a.He)(e)||1===e.nodeType&&"SCRIPT"!==e.tagName)&&this.processAddedSubtreeAndDispatchEvent(e)}processAddedSubtreeAndDispatchEvent(e){(0,a.jT)(e)&&C(e),function(e){e.shadowRoot?.querySelectorAll(b).forEach(C),e.querySelectorAll(b).forEach(C)}(e)}}var k=n(16243),P=n(78058);var A=n(46728);class I{get requestId(){return this.requestIdInternal}get combinedContract(){this.eventIndexInternal=this.eventIndexInternal+1,this.tmplString=this.generateStringFromKeyValueObject(this.tmplProps);const e=this.joinIdProps&&Object.keys(this.joinIdProps).length>0?JSON.stringify(this.joinIdProps):void 0,t=Object.keys(this.customProps).length>0?JSON.stringify(this.customProps):void 0;this.customString=t;try{const e=window;void 0!==e&&e.navigator&&void 0!==typeof e.navigator.globalPrivacyControl&&(this.globalPrivacyControl=e.navigator.globalPrivacyControl)}catch{}const n={page:{...this.contract.page,url:(0,a.Mm)((0,a.XW)(this.contract.page.url,this.contract.page.ocid),this.qspToScrubbed),referral:(0,a.Mm)(this.contract.page.referral||a.kP&&document.referrer,this.qspToScrubbed),content:this.contract.page.content?{...this.contract.page.content}:void 0,dwellTime:w.getDwellTime(),dwellTimeV2:this.getDwellTimeV2(),viewType:this.contract.page.viewType||this.viewTypeCallback&&this.viewTypeCallback()},browser:{...this.contract.browser,width:(0,a.wi)(),height:(0,a.P6)(),screenSize:a.kP?[screen.width,screen.height].join("x"):"0x0",clientId:(0,a.i2)(this.activityIdInternal),scrollOffset:"function"==typeof this.overrideScrollOffset&&this.overrideScrollOffset()||(0,a.qC)(),anoncknm:this.anonCookieName||"app_anon",cookieEnabled:a.kP&&navigator.cookieEnabled,globalPrivacyControl:this.globalPrivacyControl,hiddenOnce:this.browserHiddenOnce,muid:(0,a.FL)()||void 0,cookies:(0,a.tV)(this.cookiesToCollect)||void 0},flight:{...this.contract.flight,tmpl:this.tmplString},integration:{...this.contract.integration,joinIds:e},request:{activityId:this.activityIdInternal,requestId:this.requestIdInternal,afdMuid:this.afdMuidInternal,pageGenTime:this.pageGenTime,tier:this.tier},timestamp:+Date.now(),eventIndex:this.eventIndexInternal,sdk:{name:"peregrine",ver:"1.0.21",schemaVer:"1.0.21"},user:this.contract.user,locale:this.contract.locale,feed:this.contract.feed,gallery:this.contract.gallery,custom:this.customString,build:this.buildNumber,ext:this.contract.ext},i=(0,a.F$)();return i&&(n.browser.isWin11=i),this.isPvEvent&&(n.debug=this.contract.debug),n}constructor(e,t,n,i,r,o,s,c,d,u,l){this.eventIndexInternal=0,this.cookiesToCollect=["TOptOut","OptanonConsent","eupubconsent-v2","wid","app_wid"],this.qspToScrubbed=["anid","email","login_hint","q","referer","tid","upn","user","username"],this.isPvEvent=!1,this.shouldResetClientId=!0,this.shouldResetClientId=void 0===u||u,this.contract=e,this.updateActivityId(t),this.anonCookieName=n,this.enableDwelltimeV2=c,this.buildNumber=i||"",this.afdMuidInternal=s,this.customProps={},this.tmplProps={},this.joinIdProps={},this.eventIndexInternal=0,this.browserHiddenOnce=!1,this.overrideScrollOffset=r,this.viewTypeCallback=o,this.pageGenTime=d,this.tier=l,a.kP&&document.addEventListener("visibilitychange",this.browserVisibilityCallback.bind(this))}static mergeContract(e,t){if(!e||!t)return e||t;const n=Object.keys(t),i={...e};for(let e=0;e<n.length;e++){const r=n[e];i[r]={...i[r],...t[r]}}return e.page&&e.page.content&&t.page&&t.page.content&&(i.page.content={...e.page.content,...t.page.content}),e.user&&t.user&&(i.user={...e.user,...t.user}),e.ext&&t.ext&&(i.ext=(0,A.Z)(e.ext,t.ext)),i}update(e,t=!1){e&&(t?this.contract=I.mergeContract(this.contract,e):this.updatedContract=I.mergeContract(this.updatedContract,e))}updateActivityId(e){this.activityIdInternal=e;const t=this.contract&&this.contract.page&&this.contract.page.isStatic&&"true"===this.contract.page.isStatic.toString().toLowerCase()?(0,a.pW)():e;this.updateRequestId(t)}getEventIndexInternal(){return this.eventIndexInternal}updateRequestId(e,t){this.eventIndexInternal=t||0,this.shouldResetClientId&&(0,a.Fh)(),this.requestIdInternal=e||(0,a.pW)()}updateAfdMuid(e){this.afdMuidInternal=e||""}updateContract(){this.contract=I.mergeContract(this.contract,this.updatedContract),delete this.updatedContract}addOrUpdateCustomProperty(e,t){this.customProps[e]=t}removeCustomProperty(e){e&&delete this.customProps[e]}addOrUpdateTmplProperty(e,t){this.tmplProps[e]=t}removeTmplProperty(e){delete this.tmplProps[e]}addOrUpdateJoinIdProperty(e,t){this.joinIdProps[e]=t}getJoinId(e){return this.joinIdProps[e]}updatePageConfiguration(e){this.update({page:{config:e}})}get JoinIdProps(){return this.joinIdProps}browserVisibilityCallback(){(document.hidden||"hidden"===document.visibilityState)&&(this.browserHiddenOnce=!0)}IsPvEvent(e){this.isPvEvent=e}generateStringFromKeyValueObject(e){const t=[];return e&&Object.keys(e).forEach((n=>{e[n]?t.push(n+":"+e[n]):t.push(n)})),t.length>0?t.join(";"):void 0}getDwellTimeV2(){if(this.enableDwelltimeV2)return w.getDwellTimeV2()}}var E=n(63165),R=n(3232),M=n(14590);class x{get disable(){return this.config.disable}set disable(e){this.config.disable=e}applyAnidOverride(e){/^A=[0-9A-F]+FFFFFFF$/i.test(e)?this.config.anidOverride=e:window.console.error(`Invalid ANID format: ${e}`)}constructor(e){this.config=e}}var L=n(52359),F=n(13578);class D extends x{constructor(e){super(e),this.transporterReady=!1,setTimeout((()=>{this.collectorChannelPlugin=new R.Z,this.appInsightsCore=new E.Z;const t=new M.Z,n={populateBrowserInfo:!1,populateOperatingSystemInfo:!1,enableApplicationInsightsTrace:!1,enableDistributedTracing:!0,enableApplicationInsightsUser:!1,sessionRenewalMs:18e5,sessionExpirationMs:18e5,userConsentCookieName:"OptanonAlertBoxClosed"},i={instrumentationKey:e.key,channels:[[this.collectorChannelPlugin]],extensionConfig:[t],disablePageUnloadEvents:["visibilitychange"]},r=[];if(a.kP||(i.extensionConfig[this.collectorChannelPlugin.identifier]={httpXHROverride:{sendPOST:(t,n,i)=>{delete t.headers["cache-control"],delete t.headers["content-type"];const r={method:"POST",credentials:"include",body:t.data,headers:t.headers};t.data.length>64e3?this.sendRequest(e,t.urlString,r).then((e=>{n(e.status)})).catch((e=>{n(0,{})})):(this.sendRequest(e,t.urlString,{...r,keepalive:!0}).then((e=>{})).catch((e=>{})),n(200,{}))}}}),e.addNoResponse){const e={addNoResponse:!1};i.extensionConfig[this.collectorChannelPlugin.identifier]=e}if(a.kP&&(i.extensionConfig[t.identifier]=n,r.push(t)),e&&e.anonCookieName&&(i.anonCookieName=e.anonCookieName),e?.ignoreClientAnidCookies&&(i.cookieCfg={ignoreCookies:["ANON"]}),e.endpoint&&(i.endpointUrl=e.endpoint),this.appInsightsCore.initialize(i,r),e&&e.enableTraceGenerator)try{L.U.getTraceInstance().setTraceObj(this.appInsightsCore)}catch{}this.transporterReady=!0}),100)}sendRequest(e,t,n){return e.abortableFetch?e.abortableFetch(t,e.timeout??1e3,n,void 0,void 0,void 0,!0):fetch(t,n)}transport(e,t=!0,n=0){!e||(0,F.Z)(e)||this.config.disable||(this.transporterReady&&this.appInsightsCore&&this.appInsightsCore.isInitialized&&this.appInsightsCore.isInitialized()&&this.collectorChannelPlugin&&this.collectorChannelPlugin.isInitialized&&this.collectorChannelPlugin.isInitialized()?this.appInsightsCore.track(e):n<50&&setTimeout((()=>this.transport(e,t,n+1)),200))}applyAnidOverride(e,t=0){if(!e||!/^A=[0-9A-F]+FFFFFFF$/i.test(e))return void window.console.error(`Invalid ANID format: ${e}`);if(!(this.transporterReady&&this.appInsightsCore&&this.appInsightsCore.isInitialized&&this.appInsightsCore.isInitialized()&&this.collectorChannelPlugin&&this.collectorChannelPlugin.isInitialized&&this.collectorChannelPlugin.isInitialized()))return void(t<50?setTimeout((()=>this.applyAnidOverride(e,t+1)),200):window.console.error("applyAnidOverride: Max retries reached. Required components not initialized."));this.appInsightsCore.addTelemetryInitializer((t=>{t.ext=t.ext||{},t.ext.intweb=t.ext.intweb||{},t.ext.intweb.anid=e}))}}class O extends x{constructor(e){super(e)}transport(e){if(!e||!this.config.endpoint||this.config.disable)return;const t=this.generateUrl(this.config.endpoint+"?",e);this.generatePixelBeacon(t)}generatePixelBeacon(e){(new Image).src=e.replace(/&amp;/gi,"&")}generateUrl(e,t){const n=[];let i=e;return Object.keys(t).forEach((e=>{let i=t[e];"object"==typeof i&&i&&(i=JSON.stringify(i)),n.push(this.encodeURIComponent(e)+"="+this.encodeURIComponent(i))})),i=e+n.join("&").replace(/%20/g,"+"),i}encodeURIComponent(e){return null!=e&&encodeURIComponent(e)||""}}class _ extends x{constructor(e){super(e),this.logEventAsync=e?.callbackData?.callback,this.sapphireId=e?.callbackData?.data?.sapphireId,this.productId=e?.callbackData?.data?.productId}transport(e){if(!e||this.config.disable)return;let t;try{t=this.flattenObj(e),t.isCoreView=!0,t.platform="app",this.sapphireId&&(t["browser.muid"]=this.sapphireId),t["page.product"]=this.productId||"SuperAppHP",t["page.ocid"]="superappdhp",t["page.canvas"]="App",t["flight.tmpl"]=this.appendString(t["flight.tmpl"],";","sa-is-web:1")}catch(e){return void window.console.error("Error occured while flatterning telemetry payload :",e)}e.name&&this.logEventAsync({type:e.eventType,name:e.name,app_id:"0067acd6d05f4168b92f510d33b9ed74",data:{oneds:t}})}flattenObj(e){const t={},n=(e,i)=>{Object.keys(e).forEach((r=>{let o="";o=""===i?`${r}`:`${i}.${r}`,"object"==typeof e[r]&&e[r]?n(e[r],o):t[this.formatKey(o)]=e[r]}))};return n(e,""),t}formatKey(e){return e?"eventType"===e?"type":e.startsWith("data.")?e.substring(5,e.length):e:e}appendString(e,t,n){return(e?e+t:"")+n}}class N extends x{constructor(e){super(e),this.logEventAsync=e?.callbackData?.callback,this.sapphireId=e?.callbackData?.data?.sapphireId,this.productId=e?.callbackData?.data?.productId}transport(e){if(!e||this.config.disable)return;let t;try{t=this.flattenObj(e),t.isCoreView=!0,t.platform="app",this.sapphireId&&(t["browser.muid"]=this.sapphireId),t["page.product"]=this.productId||"SuperAppHP",t["page.ocid"]="superappdhp",t["page.canvas"]="App"}catch(e){return void window.console.error("Error occured while flatterning telemetry payload :",e)}if(e.name){const n=this.transformPayload(t);this.logEventAsync({type:e.eventType,name:e.name,app_id:"0067acd6d05f4168b92f510d33b9ed74",data:{...n}})}}flattenObj(e){const t={},n=(e,i)=>{Object.keys(e).forEach((r=>{let o="";o=""===i?`${r}`:`${i}.${r}`,"object"==typeof e[r]&&e[r]?n(e[r],o):t[this.formatKey(o)]=e[r]}))};return n(e,""),t}formatKey(e){return e?"eventType"===e?"type":e.startsWith("data.")?e.substring(5,e.length):e:e}transformPayload(e){const t={"app.custom.content.targetContentType":"targetContentType","client.hScrollOffset":"hScrollOffset","client.scrollOffset":"scrollOffset",contentViewType:"contentViewType","page.name":"pageName","page.pageId":"pageId","page.type":"pageType","locale.mkt":"localeMkt","extSchema.pb.build":"extSchemaBuild","request.requestId":"requestId",actionType:"actionType","object.content.id":"contentId","object.name":"objectName","object.type":"objectType","object.content.type":"objectContentType","object.placement.lineage":"objectPlacementLineage","object.content.category":"objectContentCategory",object:"batchObjects"},n={};return Object.keys(t).forEach((i=>{e[i]&&(n[t[i]]=e[i])})),n}}var B=n(71903);class U extends x{constructor(e){super(e)}transport(e){e&&!this.config.disable&&this.config.callback(e)}}var $=n(40373),H=n(39399),W=n(65004),G=n(7191);class V extends H.k{createEvent(e,t,n,i=0){return{name:this.getSuperAppOneDSEventName(v.id[e]),eventType:this.getSuperAppOneDSEventType(v.id[e]),data:t,baseType:v.id.Base,latency:n,sync:i}}createContentViewPayload(e,t,n){if(!t)return;const r=[];e.forEach((e=>{r.push(this.mapTelemetryObject(e))}));let o;(0,a.d5)()&&(o={content:{docHeight:(0,a.d5)()}});let s=null;try{s=JSON.stringify(r)}catch(e){s=r}const c={...t,...o,object:s,contentViewType:n.contentViewType};if(n.contentViewType===i.NS.Scroll&&(c.isMeaningfulScroll=n.isMeaningfulScroll),!(0,F.Z)(r)){return this.createEvent("ContentView",c,W.zU.RealTime)}}reConstructLiteTelemetryPayload(e){const t=this.getSuperAppOneDSEventName(e.name),n=this.getSuperAppOneDSEventType(e.name);return Object.assign(e,{name:t,eventType:n,data:{...e.data,name:t,object:{...e.data.object,ext:e.ext}}}),e}mapTelemetryObject(e){let t;const n=e&&e.content&&e.content.type;(n||e.behavior)&&(t=(0,G.Y)(n,e.behavior));const i={...e};return delete i.action,delete i.behavior,delete i.overrideId,i}getSuperAppOneDSEventType(e){switch(e){case v.id.PageView:return"Microsoft.Windows.MsnApps.PageView";case v.id.UserAction:return"Microsoft.Windows.MsnApps.PageAction";case v.id.AppError:return"Microsoft.Windows.MsnApps.Failure";case v.id.AppPerfTrace:return"Microsoft.Windows.MsnApps.ClientPerf";case v.id.ContentView:return"Microsoft.Windows.MsnApps.ContentView";case v.id.LoadTime:case v.id.Unload:return"Microsoft.Windows.MsnApps.AppLifeCycle";case v.id.VideoPlay:return"Microsoft.Windows.MsnApps.VideoPlay";case v.id.TraceInfo:return"Microsoft.Windows.MsnApps.TraceInfo";case v.id.ClientLog:return"Microsoft.Windows.MsnApps.ClientLog";default:return null}}getSuperAppOneDSEventName(e){switch(e){case v.id.PageView:return"PAGE_VIEW_HP_WEBVIEW";case v.id.UserAction:return"PAGE_ACTION_HP_WEBVIEW_CLICK";case v.id.AppError:return"HP_WEBVIEW_APP_ERROR";case v.id.AdFeedback:return"PAGE_ACTION_HP_WEBVIEW_AD_FEEDBACK";case v.id.AdImpression:return"HP_WEBVIEW_AD_IMPRESSION";case v.id.AppPerfTrace:return"HP_WEBVIEW_APP_PERF_TRACE";case v.id.Base:return"PAGE_VIEW_HP_WEBVIEW_BASE";case v.id.ContentView:return"CONTENT_VIEW_HP_WEBVIEW";case v.id.Feedback:return"PAGE_ACTION_HP_WEBVIEW_FEEDBACK";case v.id.LoadTime:return"HP_WEBVIEW_LOAD_TIME";case v.id.ServerLog:return"HP_WEBVIEW_SERVER_LOG";case v.id.Unload:return"HP_WEBVIEW_UNLOAD";case v.id.VideoAdPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO_AD";case v.id.VideoPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO";case v.id.TraceInfo:return"DIAGNOSTIC_HP_WEBVIEW_TRACEINFO";case v.id.ClientLog:return"DIAGNOSTIC_HP_WEBVIEW_CLIENTLOG";default:return e}}}class q{static getTrackingSystem(e,t){switch(e.type){case r.G.OneDS:return{transporter:new D(e.transporterConfig),mapper:new H.k(e.transporterConfig.enableEventsBatching),type:e.type};case r.G.CTag:return{transporter:new O(e.transporterConfig),mapper:new B.P,type:e.type};case r.G.Comscore:return{transporter:new O(e.transporterConfig),mapper:new $.O,type:e.type};case r.G.Debug:case r.G.Automation:return{transporter:new U(e.transporterConfig),mapper:e.mapper,type:e.type};case r.G.SuperApp:return{transporter:new _(e.transporterConfig),mapper:new V,type:e.type};case r.G.SuperAppBridge:return{transporter:new N(e.transporterConfig),mapper:new V,type:e.type};default:return{transporter:new D(e.transporterConfig),mapper:new H.k,type:e.type}}}}class j{constructor(){this.trackingSystems=[]}add(e){this.trackingSystems.push(e)}sendPageViewEvent(e,t=r.G.All){this.trackingSystems.forEach((n=>{if((t===r.G.All||t===n.type)&&n.mapper.createPageViewPayload){const t=n.mapper.createPageViewPayload(e);n.transporter.transport(t)}}))}fireCTagTrackingPixel(e){this.trackingSystems.forEach((t=>{if(t.type===r.G.CTag&&t.mapper.createPageViewPayload){const n=t.mapper.createPageViewPayload(e);t.transporter.transport(n)}}))}sendContentViewEvent(e,t,n={contentViewType:i.NS.Partial}){this.trackingSystems.forEach((i=>{if(i.mapper.createContentViewPayload){const r=i.mapper.createContentViewPayload(e,t,n);i.transporter.transport(r)}}))}sendActionEvent(e,t,n,i){this.trackingSystems.forEach((r=>{if(r.mapper.createActionPayload){const o=r.mapper.createActionPayload(e,t,n,i);r.transporter.transport(o)}}))}sendEventPayload(e,t,n){this.trackingSystems.forEach((i=>{if(i.mapper.createEventPayload){const r=i.mapper.createEventPayload(e,t,n);i.transporter.transport(r)}}))}sendSSREventPayload(e){this.trackingSystems.forEach((t=>{if(t.mapper.reConstructLiteTelemetryPayload){const n=t.mapper.reConstructLiteTelemetryPayload(e);t.transporter.transport(n)}}))}sendCustomEvent(e,t,n){this.trackingSystems.forEach((i=>{if(i.mapper.createCustomEventPayload){const r=i.mapper.createCustomEventPayload(e,t,n);i.transporter.transport(r)}}))}disable(e=r.G.All){this.trackingSystems.forEach((t=>{e!==r.G.All&&e!==t.type||(t.transporter.disable=!0)}))}enable(e=r.G.All){this.trackingSystems.forEach((t=>{e!==r.G.All&&e!==t.type||(t.transporter.disable=!1)}))}applyAnidOverride(e){this.trackingSystems.forEach((t=>{t.type===r.G.OneDS&&t.transporter.applyAnidOverride(e)}))}}var z=n(44132);const K=[3e3,5e3,8e3,15e3,2e4,3e4];class Q{constructor(){this.currentIndex=0}async start(){this.timeHandler||(this.timeHandler=window.setInterval((()=>{if(this.currentIndex>=K.length)return void window.clearInterval(this.timeHandler);const e=z.M0.getDwellTime(),t=K[this.currentIndex];e<t||(z.M0.sendHeartBeatEvent({type:"SATCI",metrics:{SATCI:t}}),this.currentIndex++)}),200))}}function J(){let e;return new Promise((t=>{const n=z.M0.config?.startDwellOnPageVisible;e=()=>{const e=n&&"visible"===document.visibilityState||document.hasFocus();return e&&t(),e},e()||(document.addEventListener("visibilitychange",e),window.addEventListener("focus",e))})).finally((()=>{e&&(document.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e))}))}a.kP&&function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}();class X{constructor(e){this.internalErrors=[],this.eventQueue=[],this.contentUpdateQueue=new Set,this.partialContentUpdateQueue=new Set,this.contentViewTriggerSource=i.NS.Load,this.contentViewTimeout=1e3,this.contentViewTimer=null,this.contentViewDelay=200,this.scheduledContentViewType=null,this.contentViewTimePassed=0,this.contentViewLastExecution=0,this.contentUpdateDebugQueue=new Set,this.intersectionObserverOptions={root:null,rootMargin:"0px",threshold:0},this.traceIdIndex=-1,this.maxScrollLoadTimeEvents=10,this.contentViewBeaconSent=!1,this.pageViewBeaconSent=!1,this.offsetCalculationCallback=null,this.vpOffsetFlagIsValidCallback=null,this.yieldElementsCount=20,this.hoverTimes=new Map,this.onFocusCallback=()=>{this._useVisForDwell||this.contentLoaded&&this.toggleDwellTime(!0)},this.onBlurCallback=()=>{this._useVisForDwell||(this.sendPageOutOfFocusEvent({}),this.toggleDwellTime(!1))},this.toggleDwellTime=e=>{if(this.config.disableAutoCalculateDwellTime)return;let t;e?(w.start(),t="dwellTimeFocusStart"):(w.pause(),t="dwellTimePause"),this.pageMetadata.addOrUpdateTmplProperty(t,"true")},this.visibilityChangeCallback=()=>{if(!this._useVisForDwell)return;const e="visible"===document.visibilityState;this.toggleDwellTime(e)},this.batchSendScrollLoadTimeEvent=({scrollInputType:e,scrollDuration:t,endOfFeedTime:n,potentialMissedScrollInput:i,calculateAri:r,scrollInstanceData:o})=>{if(this.scrollLoadTimeEventsBatcher)this.scrollLoadTimeEventsBatcher.defer();else{const e=e=>{let t,n,i,r,a=0;if(e.forEach((e=>{null!=e.eoft&&(t=(t||0)+e.eoft),null!=e.ari&&e.duration&&(n=(n||0)+e.ari*e.duration),e.duration&&(a+=e.duration),e.inputType&&(i||(i={}),i[e.inputType]=(i[e.inputType]||0)+1),!r&&e.potentialMissedScrollInput&&(r=e.potentialMissedScrollInput)})),a<=0||null==t&&null==n)return;const s={scrollDuration:Math.round(a)};i&&(s.scrollInputs=i),r&&(s.potentialMissedScrollInput=r),null!=t&&(s.scrollEoft=Math.round(t/a*1e4)),null!=n&&(s.scrollAri=Math.round(n/a*1e4)),o&&o.length&&(s.scrollInstanceData=[...o],o.length=0),this.sendLoadTimeEvent({markers:s})};this.scrollLoadTimeEventsBatcher=function(e,t){const{autoFlushIntervalInMs:n,maxFlushes:i}={...t};let r,o=[],a=0;const s=()=>{(null==i||a<i)&&(a++,o.length&&(e(o),o=[]))},c=()=>{n&&(r&&clearTimeout(r),r=setTimeout(s,n))};return{enqueue:e=>{o.push(e),c()},flush:s,defer:c}}(e,{maxFlushes:this.maxScrollLoadTimeEvents}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.scrollLoadTimeEventsBatcher.flush()})),window.addEventListener("beforeunload",(()=>this.scrollLoadTimeEventsBatcher.flush())),this.subscribeToAppHidden&&this.subscribeToAppHidden((()=>this.scrollLoadTimeEventsBatcher.flush()))}const a=r&&r();this.scrollLoadTimeEventsBatcher.enqueue({eoft:n,ari:a,duration:t,inputType:e,potentialMissedScrollInput:i})};try{this.config=e,this.config.autoCaptureContentView=void 0===e.autoCaptureContentView||e.autoCaptureContentView,this.config.beacons=e.beacons||{},this.config.beacons.PageOutOfFocus=this.config.beacons.PageOutOfFocus||{},this.config.beacons.PageOutOfFocus.disable=void 0===this.config.beacons.PageOutOfFocus.disable||this.config.beacons.PageOutOfFocus.disable,a.kP&&(this.config.disableLayoutEventManager||(this.layoutEventManager=new T,this.layoutEventManager.observe(document.documentElement)),this.clickEventManager=new S.vU,e.hydrationPromise&&e.hydrationPromise instanceof Promise?this.config.hydrationPromise.then((()=>{this.clickEventManager.observe(window,this.config.disableContextMenu)})):this.clickEventManager.observe(window,this.config.disableContextMenu),e.enableAutoHeartbeats&&!this.hbScheduler&&(this.hbScheduler=function(){const e=new Q;return Promise.allSettled([J(),new Promise((e=>window.setTimeout(e,2e3)))]).then((()=>{e.start()})),e}()),window.addEventListener("beforeunload",this.unloadEventCallback.bind(this)),window.addEventListener("telemetrynodeadded",(e=>{e&&e.detail&&e.detail.element&&this.viewportIntersectionObserver&&(k.u.addElement(e.detail.element),this.viewportIntersectionObserver.observe(e.detail.element))})),window.addEventListener("telemetrynodremoved",(e=>{e&&e.detail&&e.detail.element&&this.viewportIntersectionObserver&&this.viewportIntersectionObserver.unobserve(e.detail.element)})),window.addEventListener("telemetryclick",this.clickEventHandler.bind(this)),window.addEventListener("focus",this.onFocusCallback),window.addEventListener("blur",this.onBlurCallback),document.addEventListener("visibilitychange",this.visibilityChangeCallback)),this.trackingSystemList=new j,e.clientLogMaxCount=e.clientLogMaxCount||10,e.trackingSystems.forEach((t=>{t.transporterConfig.abortableFetch=e.abortableFetch,t.transporterConfig.anonCookieName=e.anonCookieName,t.transporterConfig.addNoResponse=e.addNoResponse,t.transporterConfig.ignoreClientAnidCookies=e.ignoreClientAnidCookies,t.transporterConfig.enableTraceGenerator=e.enableTraceGenerator,t.transporterConfig.enableEventsBatching=e.enableEventsBatching,t.transporterConfig.timeout=e.timeout,this.trackingSystemList.add(q.getTrackingSystem(t))}))}catch(e){this.internalErrors.push({message:"Error in Telemetry Lib constructor.",error:e})}}getTrackingSystemList(){return this.trackingSystemList}setContentViewTimeout(e){this.contentViewTimeout=e}resetContentViewTimeout(){this.contentViewTimeout=v.S8}renderTelemetryAttribute(e,t,n){return new P.D(e).render(t)}observeSingleElement(e){}observeElementTree(e){}observeShadowRoot(e){this.layoutEventManager?.observe(e)}setOffsetCalculationCallback(e){this.offsetCalculationCallback=e}setVPOffsetFlagIsValidCallback(e){this.vpOffsetFlagIsValidCallback=e}initPage(e,t,i,r,o,c){if(this.pageMetadata=new I(e,t,this.config.anonCookieName,i,this.config.overrideScrollOffset,this.config.viewTypeCallback,r,this.config.enableDwelltimeV2,o,this.config.shouldResetClientId,c),a.kP){if("IntersectionObserver"in n.g){const e=this.config.cvIntersectionObserverDelay?{...this.intersectionObserverOptions,delay:this.config.cvIntersectionObserverDelay}:this.intersectionObserverOptions;this.viewportIntersectionObserver=new IntersectionObserver(this.contentVisibilityCallback.bind(this),e),this.contentVisibilityCallbackPromise=(0,a.xI)()}this.runContentVisibilityCallbacksPromise=this.config.deferContentViewIntersectionCallbacks?(0,a.xI)():(0,a.xI)(!0),this.viewportEventManager=new s(((e,t,n)=>{this.config.autoCaptureContentView&&(this.autoSendContentViewEvent({contentViewType:e,isMeaningfulScroll:t}),n&&(null!=n.endOfFeedTime||n.calculateAri)&&this.batchSendScrollLoadTimeEvent(n))}),this.config.overrideScrollOffset),window.addEventListener("telemetryviewportupdated",(e=>{e&&e.detail&&e.detail.mech&&(this.contentViewTriggerSource=e.detail.mech)})),this.viewportEventManager.initListener()}}sendPageView(e=null,t=!1,n=null,o=r.G.All,s=!1){this.queueEvent("PageView",(()=>{this.config.beacons&&this.config.beacons.PageView&&this.config.beacons.PageView.disable||!this.pageMetadata||(this.config.resetAppErrorCounterOnPageView&&h(),e=e||{},(0,a.lB)(e),this.contentLoaded=!1,this.config.disableAutoCalculateDwellTime||w.reset(),this.pageMetadata.update(e),n?this.pageMetadata.updateActivityId(n):t||this.updateRequestId(),this.pageMetadata.updateContract(),this.viewportEventManager.resetViewportOffset(),this.updatePageMetadata({page:{isMonetized:!1}},!0),this.pageMetadata.IsPvEvent(!0),this.trackingSystemList.sendPageViewEvent(this.pageMetadata.combinedContract,o),this.pageMetadata.IsPvEvent(!1),this.pageViewBeaconSent=!0,!s||o!==r.G.All&&o!==r.G.Comscore||fetch(v.EE),t||(this.contentViewTriggerSource=i.NS.Load,setTimeout((()=>{this.autoSendContentViewEvent({contentViewType:i.NS.Load})}),1e3)),this.dispatchEvent(i.tM,{requestId:this.pageMetadata.requestId}))}))}fireCTagPixelBeacon(){this.trackingSystemList.fireCTagTrackingPixel(this.pageMetadata.combinedContract)}getRequestId(){return this.pageMetadata.requestId}getCurrentEventIndex(){return this.pageMetadata.getEventIndexInternal()}updateRequestId(e,t){this.pageMetadata.updateRequestId(e,t)}disableTrackingSystem(e=r.G.All){this.trackingSystemList.disable(e)}enableTrackingSystem(e=r.G.All){this.trackingSystemList.enable(e)}disableBeacon(e){this.config.beacons[e]||(this.config.beacons[e]={}),this.config.beacons[e].disable=!0}enableBeacon(e){this.config.beacons[e]||(this.config.beacons[e]={}),this.config.beacons[e].disable=!1}disableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!0}enableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!1}updatePageConfiguration(...e){let t;e.forEach((e=>{t|=e})),this.pageMetadata.updatePageConfiguration(t)}updatePageMetadata(e,t=!1){e&&this.pageMetadata.update(e,t)}addOrUpdateCustomProperty(e,t){this.pageMetadata.addOrUpdateCustomProperty(e,t)}removeCustomProperty(e){this.pageMetadata.removeCustomProperty(e)}addOrUpdateJoinIdProperty(e,t){this.pageMetadata.addOrUpdateJoinIdProperty(e,t)}addOrUpdateTmplProperty(e,t){this.pageMetadata.addOrUpdateTmplProperty(e,t)}removeTmplProperty(e){this.pageMetadata.removeTmplProperty(e)}addOrUpdateTmplString(e){if(!e)return;const t=e.split(";");for(let e=0;e<t.length;e++){const n=t[e].split(":");2===n.length?this.addOrUpdateTmplProperty(n[0],n[1]):1===n.length&&this.addOrUpdateTmplProperty(n[0])}}removeTmplString(e){if(!e)return;const t=e.split(";");for(let e=0;e<t.length;e++){const n=t[e].split(":");n&&n.length&&this.pageMetadata.removeTmplProperty(n[0])}}useVisForDwell(e){if(this._useVisForDwell===e)return;e&&this.pageMetadata.addOrUpdateTmplProperty("useVisForDwell","1"),this._useVisForDwell=e;const t=this.isDwellTimeActive();e&&!t&&"visible"===document.visibilityState?this.toggleDwellTime(!0):e||!t||document.hasFocus()||this.toggleDwellTime(!1)}addOrUpdateIdxId(e,t){if(e){t&&(delete this.pageMetadata.JoinIdProps[i.ob],this.traceIdIndex=-1);const n=this.pageMetadata.getJoinId(i.ob),r=n?`${n},${e}`:e;return this.pageMetadata.addOrUpdateJoinIdProperty(i.ob,r),this.traceIdIndex+=1,this.traceIdIndex}}sendActionEvent(e,t,n,r,s){let c=null;const{enableMouseDwellTime:d,mouseDwellCardTypePrefixs:u=[],enableVPOffsetOnClick:l,cardsForVPOffset:p}=this.config;d&&u.some((t=>e.tagName.startsWith(t)))&&(c=(0,a.k3)(e,!0),"mouseenter"===t)?this.hoverTimes.set(c,Date.now()):this.queueEvent("UserAction",(()=>{if(!(this.config.beacons&&this.config.beacons.UserAction&&this.config.beacons.UserAction.disable)&&this.pageMetadata&&e){const h=e;k.u.updateLayout();const g=this.clickEventManager.getTelemetryClickTarget(e);let f;g&&(e=g),f=e.getAttribute&&e.getAttribute(i.qP),e.parentElement&&!f&&(f=(e=e.parentElement).getAttribute&&e.getAttribute(i.qP));let m=k.u.get(e);if(!m){const e=k.u.parseAttribute(f);e&&(m=new k.u(e))}if(this.pageMetadata&&m){s&&((0,a.Vr)(h,this.pageMetadata.contract.page.ocid),(0,a.Zf)(h,this.pageMetadata.contract.page.partnerTrackingCode),(0,a.uK)(h,this.pageMetadata.requestId),(0,a.E1)(h,this.pageMetadata.contract.page.uxMode),(0,a.wC)(h,this.pageMetadata.getEventIndexInternal()+1)),this.config.destinationUrlHash&&(0,a.t_)(h,this.config.destinationUrlHash);const i=e.getAttribute("action")||e.form&&e.form.getAttribute("action"),g=t||m.contract.action,f=void 0===n?m.contract.behavior:n;let y=m.contract.overrideDestinationUrl||(0,a.jv)(r)&&r||e.getAttribute("href")||i;if(this.config.customProtocolOverride&&((0,a.zo)(h,this.config.customProtocolOverride,y),e.hasAttribute("originalhref")&&(y=e.getAttribute("originalhref"))),y&&!y.startsWith("mailto:")?!0===m.contract.overrideEmailIdScrubbing||(0,a.uj)(y)?m.contract.destinationUrl=y:(m.contract.destinationUrl="",this.sendAppErrorEvent({id:54301,severity:0,message:"Email found in the destination url",pb:m.combinedContract})):m.contract.destinationUrl="",g===o.Aw.RightClick&&f===o.wu.ContextMenu&&!(m&&m.contract&&m.contract.destinationUrl))return;if(d&&"mouseleave"===t&&u.some((e=>h.tagName.startsWith(e)))){if(!this.hoverTimes.has(c))return;const e=Date.now()-this.hoverTimes.get(c);this.hoverTimes.delete(c),m.contract.ext=m.contract.ext||{},m.contract.ext.mouseDwellTime=e}if(l&&null==g&&this.offsetCalculationCallback){const t=e.getRootNode();if(t instanceof ShadowRoot){const e=t.host;if(e instanceof HTMLElement){const t=[[e,m]];this.offsetCalculationCallback(t,{cardsForVPOffset:p})}}}this.trackingSystemList.sendActionEvent(m.combinedContract,this.pageMetadata.combinedContract,null==g?o.Aw.Click:g,null==f?o.wu.Navigate:f),m.contract&&m.contract.triggerPageView&&f===o.wu.Navigate&&this.sendPageView(null,!1)}}}))}scheduleContentViewEvent(e=i.NS.Partial,t){if(!a.kP)return;const n=(new Date).getTime();this.contentViewTimePassed=n-this.contentViewLastExecution,this.contentViewTimePassed<=this.contentViewDelay&&e!==i.NS.Partial||(this.contentViewLastExecution=n,this.contentViewTimer&&this.scheduledContentViewType===e&&window.clearTimeout(this.contentViewTimer),this.contentViewTimer=window.setTimeout((()=>this.autoSendContentViewEvent({contentViewType:e})),t||this.contentViewTimeout),this.scheduledContentViewType=e)}sendContentViewEvent(e,t=i.NS.Partial,n=!0){this.queueEvent("ContentView",(()=>{if(this.config.beacons&&this.config.beacons.ContentView&&this.config.beacons.ContentView.disable||!this.pageMetadata)return;k.u.updateLayout();const i=(0,a.Ux)(e),r=[];if(i&&i.length>0){for(let e=0;e<i.length;e++){const t=i[e],o=k.u.get(t);o&&(!n||this.contentUpdateQueue.has(t)||this.partialContentUpdateQueue.has(t))&&(this.setIsMonetizedFlag(o.combinedContract),r.push(o.combinedContract))}this.trackingSystemList.sendContentViewEvent(r,this.pageMetadata.combinedContract,{contentViewType:t})}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())}))}sendAppErrorEvent(e,t=!0){if(this.config.ignoreAppErrorCounter||!function(e){if(!e||!e.id)return!0;p.has(e.id)||p.set(e.id,0);const t=p.get(e.id)+1;return p.set(e.id,t),3===e.severity&&t>25||3!==e.severity&&t>10}(e))if(function(e){if(!e)return!1;const{pb:t,severity:n=d.z.Alert}=e;if(t&&t.shouldSampleErrorsForTreatement1)switch(n){case d.z.Deprecated:return g(1);case d.z.Alert:return g(10);default:return!0}const i=t&&t.isDebugPage||!1,r=t&&t.samplePct||0;if(!i){if(n===d.z.Deprecated)return g(1);if(r>0)return g(r)}return!0}(e)||this.config.shouldNotSampleErrors){if(!(this.config.beacons&&this.config.beacons.AppError&&this.config.beacons.AppError.disable)&&this.pageMetadata)if(function(e){const{pb:t,severity:n=1}=e;return 3!==n&&!(!t||!t.shouldDelayUntilLoadTime)}(e)){const n={...e,pb:{...e.pb,delayed:1}};l.then((()=>{this.queueAppErrorEvent(n,t)}))}else this.queueAppErrorEvent(e,t)}else t&&(console.error(JSON.stringify(e)),console.error(`This App error Id: ${e.id} will not be sent due to app error sampling!`));else t&&(console.error(JSON.stringify(e)),console.error(`App errors throttled for Id: ${e.id}`))}sendLoadTimeEvent(e){const t=this.config.enableCustomDiagnostic?"LoadTimeDiag":"LoadTime";this.sendEvent(t,e),u(),f()}sendFeedbackEvent(e){this.sendEvent("Feedback",e)}sendAdImpressionEvent(e){this.sendEvent("AdImpression",e)}sendAdFeedbackEvent(e){this.sendEvent("AdFeedback",e)}sendVideoPlayEvent(e,t,n=!1){if(this.config.beacons&&this.config.beacons.VideoPlay&&this.config.beacons.VideoPlay.disable)return;const i=n?"VideoAdPlay":"VideoPlay";t&&k.u.updateLayout();const r=t?k.u.get(t):void 0,o=r?r.combinedContract:{};if(e){const t={...o,...e};this.trackingSystemList.sendEventPayload(i,{object:t},this.pageMetadata.combinedContract)}else t&&this.pageMetadata&&r&&this.trackingSystemList.sendEventPayload(i,{object:o},this.pageMetadata.combinedContract)}sendGamePlayEvent(e,t){if(!(this.config.beacons&&this.config.beacons.GamePlay&&this.config.beacons.GamePlay.disable)&&t){k.u.updateLayout();const n=k.u.get(t);if(this.pageMetadata&&n){const t={object:{...n.combinedContract,...e}};this.trackingSystemList.sendEventPayload("GamePlay",t,this.pageMetadata.combinedContract)}}}sendAudioPlayEvent(e,t){if(!(this.config.beacons&&this.config.beacons.AudioPlay&&this.config.beacons.AudioPlay.disable)&&t){k.u.updateLayout();const n=k.u.get(t);if(this.pageMetadata&&n){const t={object:{...n.combinedContract,...e}};this.trackingSystemList.sendEventPayload("AudioPlay",t,this.pageMetadata.combinedContract)}}}sendServerLogEvent(e){this.sendEvent("ServerLog",e)}sendAppPerfTraceEvent(e){this.sendEvent("AppPerfTrace",e)}sendAuthEvent(e){this.sendEvent("Auth",e)}sendHeartBeatEvent(e){this.sendEvent("HeartBeat",e)}sendClientLogEvent(e){if(this.config.enableSendClientLogEvent){const{isRestrictClientLogSize:n,maxClientLogSize:i}=this.pageMetadata?.contract?.featureFlags||{};if(!n){if(!function(e,t){try{return(e&&JSON.stringify(e)?.length||0)<=t}catch(e){return!0}}(e,"number"==typeof i?i:6144))return void this.sendEvent("ClientLog",e)}if(!this.pageMetadata?.contract?.featureFlags?.throttleClientLogs)return void this.sendEvent("ClientLog",e);if(!a.kP)return void this.sendEvent("ClientLog",e);t=this.config.clientLogMaxCount,y++,y>t||m.then((()=>{this.sendEvent("ClientLog",e)}))}var t}sendPageOutOfFocusEvent(e){this.queueEvent("PageOutOfFocus",(()=>{this.config.beacons&&this.config.beacons.PageOutOfFocus&&this.config.beacons.PageOutOfFocus.disable||!this.pageMetadata||this.trackingSystemList.sendEventPayload("PageOutOfFocus",null,this.pageMetadata.combinedContract)}))}sendUnloadEvent(){this.queueEvent("Unload",(()=>{this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||!this.pageMetadata||this.trackingSystemList.sendEventPayload("Unload",null,this.pageMetadata.combinedContract)}))}sendTraceInfoEvent(e){this.queueEvent("TraceInfo",(()=>{this.config.beacons&&this.config.beacons.TraceInfo&&this.config.beacons.TraceInfo.disable||!this.pageMetadata||this.sendEvent("TraceInfo",e)}))}getPageMetadata(){return this.pageMetadata}flush(e=!0,t,n){const i=e=>!(t&&t!==e.eventType||n&&n===e.eventType);for(const e of this.eventQueue)"function"==typeof e.callback&&i(e)&&e.callback();this.eventQueue=this.eventQueue.filter((e=>!i(e))),this.config.useEventQueue=!e}empty(){this.eventQueue=[]}enableEventQueue(){this.config.useEventQueue=!0}disableEventQueue(){this.config.useEventQueue=!1}addEventTypeToForceQueueList(e){this.config.forceUseEventQueueList||(this.config.forceUseEventQueueList=[]),this.config.forceUseEventQueueList.push(e)}removeEventTypeFromForceQueueList(e){this.config.forceUseEventQueueList&&(this.config.forceUseEventQueueList=this.config.forceUseEventQueueList.filter((t=>t!==e)))}startDwellTime(){w.start()}pauseDwellTime(){w.pause()}pauseDwellTimeV2(){w.pauseV2()}resetDwellTime(){w.reset()}isDwellTimeActive(){return w.getIsActive()}setDwellTime(e,t){w.setDwellTime(e,t)}setDwellTimeV2(e,t){w.setDwellTimeV2(e,t)}getDwellTime(){return w.getDwellTime()}clickEventHandler(e){if(e&&e.detail&&e.detail.element&&this.pageMetadata){const t=e.detail.element;this.sendActionEvent(t,e.detail.action,e.detail.behavior,void 0,!0),t.attributes&&t.attributes.href&&t.attributes.href.value&&t.attributes.href.value.startsWith&&"function"==typeof t.attributes.href.value.startsWith&&t.attributes.href.value.startsWith("mailto:")&&(this.ignoreUnload=!0)}}queueAppErrorEvent(e,t=!0){let n="AppError";this.config.enableCustomDiagnostic&&!this.config.shouldAppErrorEscapeCustomDiagnostic?.(e)&&(n="AppErrorDiag"),this.queueEvent(n,(()=>{if(this.trackingSystemList.sendCustomEvent(n,e,this.pageMetadata.combinedContract),t){const t=new Date+": "+ +new Date+" "+JSON.stringify(e);console.error(t)}this.dispatchEvent(i.tW,{error:e})}))}unloadEventCallback(){this.ignoreAutoUnloadCallback||this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||(this.pageMetadata&&!this.ignoreUnload&&this.sendUnloadEvent(),this.ignoreUnload=!1)}setIsMonetizedFlag(e){e&&e.isMonetized&&this.updatePageMetadata({page:{isMonetized:!0}},!0)}autoSendContentViewEvent(e){this.queueEvent("ContentView",(()=>{if(this.pageMetadata){let t;if(k.u.updateLayout(),e.contentViewType!==i.NS.Partial&&this.contentUpdateQueue&&this.contentUpdateQueue.size>0?t=this.contentUpdateQueue:this.partialContentUpdateQueue&&this.partialContentUpdateQueue.size>0&&(t=this.partialContentUpdateQueue),t){const{enableViewportOffset:n,cardsForVPOffset:r}=this.config,o=[];let a=[];const s=n&&!!this.vpOffsetFlagIsValidCallback&&this.vpOffsetFlagIsValidCallback();if([...t].forEach((t=>{const n=k.u.get(t);if(n&&(e.contentViewType!==i.NS.Partial||!n.isCaptured)){n.isCaptured=!0;const e=n.combinedContract;this.setIsMonetizedFlag(e),s?o.push(n):e&&a.push(e)}})),s&&this.offsetCalculationCallback&&o.length>0){const e=o.map((e=>[e.element,e]));this.offsetCalculationCallback(e,{cardsForVPOffset:r}),a=o.map((e=>e.combinedContract)).filter((e=>e))}this.trackingSystemList.sendContentViewEvent(a,this.pageMetadata.combinedContract,e),this.contentViewBeaconSent=!0,this.partialContentUpdateQueue.clear(),this.contentViewTriggerSource=null}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())}}))}runContentVisibilityCallbacks(){this.runContentVisibilityCallbacksPromise?.resolve()}applyAnidOverride(e){this.trackingSystemList.applyAnidOverride(e)}yieldAsync(){return new Promise((e=>setTimeout(e,0)))}contentVisibilityCallback(e){const t=async t=>{for(let n=0;n<e.length;n++){t&&n>0&&n%this.yieldElementsCount==0&&await this.yieldAsync();const i=e[n];i.isIntersecting?(this.contentUpdateQueue.add(i.target),this.contentViewTriggerSource||this.config.enableNoPartialContentView&&!(k.u.get(i.target)?.getShouldTrackPartialContentUpdate?.()??1)||this.partialContentUpdateQueue.add(i.target)):(this.contentUpdateQueue.delete(i.target),this.partialContentUpdateQueue.delete(i.target))}!this.contentViewTriggerSource&&this.config.autoCaptureContentView&&this.scheduleContentViewEvent(i.NS.Partial,500),this.contentUpdateQueue.size&&this.contentVisibilityCallbackPromise&&this.contentVisibilityCallbackPromise.resolve()};this.config.deferContentViewIntersectionCallbacks&&this.runContentVisibilityCallbacksPromise?.promise?this.runContentVisibilityCallbacksPromise.promise.then((()=>t(this.config.shouldYieldCVCallback))):t(this.config.shouldYieldCVCallback)}sendEvent(e,t){this.queueEvent(e,(()=>{this.config.beacons&&this.config.beacons[e]&&this.config.beacons[e].disable||!this.pageMetadata||this.trackingSystemList.sendCustomEvent(e,t,this.pageMetadata.combinedContract)}))}queueEvent(e,t){this.config.eventTypeAllowList&&!this.config.eventTypeAllowList.includes(e)||(this.config.useEventQueue||this.config.forceUseEventQueueList&&this.config.forceUseEventQueueList.includes(e)?this.eventQueue.push({eventType:e,callback:t}):t())}dispatchEvent(e,t){a.kP&&setTimeout((()=>dispatchEvent(new CustomEvent(e,{detail:t}))),0)}startAutoDwellTime(){(document.hasFocus()||this.config.startDwellOnPageVisible&&"visible"===document.visibilityState)&&!this.config.disableAutoCalculateDwellTime&&(document.hasFocus()||this.pageMetadata.addOrUpdateTmplProperty("dwellTimeStartedWithoutFocus","true"),w.start(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimeStart","true"))}waitForContentVisibilityObserverInit(){return this.contentVisibilityCallbackPromise?this.contentVisibilityCallbackPromise.promise:Promise.resolve()}isEventInQueue(e){return this.eventQueue.some((t=>t.eventType===e))}getQueuedEventCount(){return this.eventQueue.length}isContentViewBeaconSent(){return this.contentViewBeaconSent}isPageViewBeaconSent(){return this.pageViewBeaconSent}initScrollPerformanceTrackers(e){if(!this.viewportEventManager)return;e?.scrollContainer&&this.viewportEventManager.initListener(e?.scrollContainer),this.subscribeToAppHidden=e?.subscribeToAppHidden;n.e("scrollPerfMetricTrackers").then(n.bind(n,35534)).then((({createEndOfFeedTimeTracker:t,createAppResponsivenessTracker:n,createScrollInputTracker:i})=>{const r=t({scrollContainer:e?.scrollContainer,scrollEventName:e?.scrollEventName}),o=n(),a=e?.enableScrollInputTracking&&i&&i(e?.enableMissedScrollTracking,e?.enableSectionScrollTracking,e.scrollContainer);this.viewportEventManager.initScrollPerformanceTrackers({endOfFeedTimeTracker:r,appResponsivenessTracker:o,scrollInputTracker:a})}))}}},78058:function(e,t,n){n.d(t,{D:function(){return o}});var i=n(89658),r=n(19319);class o{constructor(e,t,n){this.contract=e}static render(e){const t=r.v.compress(e);return{[i.qP]:JSON.stringify(t)}}addChild(e){return new o(e,this)}addOrUpdateChild(e,t){return t?(t.contract=e,t):new o(e,this)}updateContract(e){this.contract=e}render(e){return o.render(this.contract)}getMetadataTag(){return JSON.stringify(this.getMetadata())}getMetadata(){return r.v.compress(this.contract)}}},52359:function(e,t,n){n.d(t,{U:function(){return o}});var i=n(39860),r=n(44132);class o{constructor(){this.getSpanId=(e=!1)=>{if(o.traceCtrxObj&&!e)return o.traceCtrxObj.getSpanId();const t=(0,i.DO)().substring(0,16);return(0,r.dK)().then((()=>{o.setSpanIdFunc(t)}),(()=>{})),t},this.getTraceId=(e=!1)=>{if(o.traceCtrxObj&&!e)return o.traceCtrxObj.getTraceId();const t=(0,i.DO)();return(0,r.dK)().then((()=>{o.setTraceIdFunc(t)}),(()=>{})),t}}static#e=this.getTraceInstance=()=>(o.traceInstance||(o.traceInstance=new o),o.traceInstance);setTraceObj(e){o.traceCtrxObj=e&&e.getTraceCtx()}static#t=this.setSpanIdFunc=e=>{const t=e||(0,i.DO)().substring(0,16);try{o.traceCtrxObj.setSpanId(t)}catch(e){}};static#n=this.setTraceIdFunc=e=>{const t=e||(0,i.DO)();try{o.traceCtrxObj.setTraceId(t)}catch(e){}}}},1092:function(e,t,n){n.d(t,{EE:function(){return i},S8:function(){return o},id:function(){return r}});const i="https://www.msn.com/PV.xml",r={UserAction:"MS.News.Web.PageAction",PageView:"MS.News.Web.PageView",ContentView:"MS.News.Web.ContentView",AppError:"MS.News.Web.AppError",AppErrorDiag:"MS.News.Web.AppErrorDiag",LoadTime:"MS.News.Web.LoadTime",LoadTimeDiag:"MS.News.Web.LoadTimeDiag",Unload:"MS.News.Web.Unload",Base:"MS.News.Web.Base",Feedback:"MS.News.Web.Feedback",AdImpression:"MS.News.Web.AdImpression",AdFeedback:"MS.News.Web.AdFeedback",GamePlay:"MS.News.Web.GamePlay",VideoPlay:"MS.News.Web.VideoPlay",VideoAdPlay:"MS.News.Web.VideoAdPlay",AudioPlay:"MS.News.Web.AudioPlay",ServerLog:"MS.News.Web.ServerLog",AppPerfTrace:"MS.News.Web.AppPerfTrace",Auth:"MS.News.Web.Auth",HeartBeat:"MS.News.Web.HeartBeat",ClientLog:"MS.News.Web.ClientLog",PageOutOfFocus:"MS.News.Web.PageOutOfFocus",TraceInfo:"MS.News.Web.TraceInfo"},o=1e3},94769:function(e,t,n){n.d(t,{E1:function(){return k},F$:function(){return H},FL:function(){return m},Fh:function(){return z},He:function(){return N},Mm:function(){return G},P6:function(){return h},Ux:function(){return O},Vr:function(){return b},XW:function(){return w},Xn:function(){return l},Zf:function(){return C},d5:function(){return f},gm:function(){return v},i2:function(){return y},jT:function(){return B},jv:function(){return U},k3:function(){return D},kP:function(){return S},lB:function(){return q},pE:function(){return F},pW:function(){return u},qC:function(){return g},t0:function(){return $},tH:function(){return R},tV:function(){return W},t_:function(){return A},uK:function(){return T},uj:function(){return V},wC:function(){return P},wi:function(){return p},xI:function(){return j},zo:function(){return I}});let i,r,o,a,s,c=(new Date).getTime();try{a="sessionStorage"in window&&window.sessionStorage}catch(e){}try{navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"])&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((e=>{s=e.platformVersion}))}catch(e){}function d(e){const t=(c+16*Math.random())%16|0;return c=Math.floor(c/16),("x"===e?t:7&t|8).toString(16)}function u(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,d)}function l(){return Date.now()}function p(){return S&&(window.outerWidth||document.documentElement.clientWidth)}function h(e){return e?e.scrollHeight:S&&(window.outerHeight||document.documentElement.clientHeight)}function g(e){if(e)return e.scrollTop||0;return S&&(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)||0}function f(){return S&&Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}function m(){const e="undefined"!=typeof document&&document.cookie;if(!S&&!e)return"";const t=new RegExp("\\bMUID\\s*=\\s*([^;]*)","i").exec(e);return t&&t.length>1?t[1]:""}function y(e){return S?(i||""===i||(i=m()||e||""),i):m()}function v(e){i=e}const S=!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv);function w(e,t){return function(e,t){if(t&&e){const n=t.toLowerCase();if(-1==n.indexOf("?ocid=")&&-1==n.indexOf("&ocid=")){const n=-1==t.indexOf("?")?"?":"&";t=`${t}${n}ocid=${encodeURIComponent(e)}`}}return t}(t,e)}function b(e,t){E(e,"ocid",t)}function C(e,t){let n=t;try{const e=new URL(location.href);n=e.searchParams.get("pc")||e.searchParams.get("PC")||e.searchParams.get("pC")||e.searchParams.get("Pc")||n}catch{}E(e,"pc",n||t)}function T(e,t){E(e,"cvid",t,!0)}function k(e,t){E(e,"uxmode",t,!0,!1,!0)}function P(e,t){E(e,"ei",t.toString(),!0)}function A(e,t){E(e,t,void 0,!1,!0)}function I(e,t,n){try{if(!e||!t||!e.href)return;const i=new URL(e.href);if("http:"!==i.protocol&&"https:"!==i.protocol||i.searchParams.has("sc"))return;n&&e.setAttribute("originalhref",n),i.href=`${t}&url=${encodeURIComponent(i.href)}`;const r=Date.now().toString();i.searchParams.set("timestamp",r),e.href=i.href}catch(e){}}function E(e,t,n,i=!1,r=!1,o=!1){if(!e||!t)return;let a=e;if("a"!==a.nodeName&&a.closest("a")&&(a=a.closest("a")),!a)return;const{href:s}=a;if(s)try{const e=new URL(s);let c=e,d=!1;if("microsoft-edge:"===e.protocol){const t=e.searchParams.get("url");t&&(c=new URL(decodeURIComponent(t)),d=!0)}if(r)return c.hash?-1===c.hash.indexOf(t)&&(c.hash+=`&${t}`):c.hash=t,void(d?(e.searchParams.set("url",c.href),a.href=e.href):a.href=c.href);const u=["msn.com","msn.cn","bing.com","msn.yidianzixun.com","msn.huya.com"],l=["ib.msn.com"].every((e=>!c.host.includes(e)))&&u.some((e=>c.host.includes(e))),p=["topsite-ruby-link","recommendedSiteDiv"].some((e=>a.classList.contains(e)));if(n&&l&&!p){let e="",r=t;if(o){const n=function(e,t){const n=t.toLowerCase();for(const[t,i]of e)if(t.toLowerCase()===n)return{foundKey:t,value:i};return null}(c.searchParams,t);n&&(e=n.value,r=n.foundKey)}else e=c.searchParams.get(t);e&&!i||c.searchParams.set(r,n)}d?(e.searchParams.set("url",c.href),a.href=e.href):a.href=c.href}catch{}}function R(e,t=""){if(!e)return;const n=e.getAttribute("data-hl")||"";if(!t&&!n){const n=e.querySelector("h4")||e.querySelector("h3"),i=function(e,t,n=2){if(!t)return;let i=t,r=0;for(;i&&i!==e;i=i.parentElement,r++)if(r>n)return;return r}(e,n);n&&i&&i<=2&&(t=x(n))}const i=e instanceof HTMLAnchorElement?e.querySelector(".title"):"";!t&&i&&(t=x(i));const r=e instanceof HTMLAnchorElement?e.getAttribute("title"):"";!t&&r&&(t=r);const o=e instanceof HTMLAnchorElement?e.getAttribute("aria-lable"):"";return!t&&o&&(t=o),"string"!=typeof t&&(t=n||e.getAttribute("data-piitxt")||("FORM"==e.nodeName?"[form submit]":e.getAttribute("title")||L(e,"title","img")||x(e)||e.getAttribute("alt")||L(e,"alt")||"")),null!=t.trim&&(t=t.trim()),t}const M=/(^\s+)|(\s+$)/gm;function x(e){return(e&&(e.textContent||e.innerText)||"").replace(M,"")}function L(e,t,n=""){const i=e.children||[];let r,o=0;for(t=t||"alt";o<i.length;o++)if(r=i[o].getAttribute(t)||L(i[o],t,n),r&&n!=i[o].localName)return r}function F(e,t){if(!e||e===document||e===window)return null;const n=e.closest(t);if(n)return n;const i=D(e);return i&&i.host?F(i.host,t):void 0}function D(e,t){return!e?.parentNode||t&&e.parentNode instanceof ShadowRoot?e:D(e.parentNode,t)}function O(e){const t=[];if(!e)return;let n;return n=N(e)?e.shadowRoot.querySelectorAll("*"):e.querySelectorAll("*"),_(Array.from(n),t),t}function _(e,t=[]){for(let n=0;n<e.length;n++){const i=e[n];B(i)&&t.push(i),N(i)&&_(Array.from(i.shadowRoot.querySelectorAll("*")),t)}}function N(e){return!!e.shadowRoot}function B(e){return e.hasAttribute&&e.hasAttribute("data-t")}function U(e){try{new URL(e)}catch(e){return!1}return!0}function $(e,t){const n=new CustomEvent(e,{detail:{element:t}});dispatchEvent(n)}function H(){let e=!1;if(S)try{s&&parseInt(s.split(".")[0])>=11&&(e=!0)}catch(e){}return o=!0===e||null,o}function W(e){if(!r&&""!==r&&S)try{if(!e||0===e.length)return;const t=document.cookie;if(t){let n="";e.forEach((e=>{const i=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t),r=i&&i.length>1?i[1]:"";""!==r&&(n+=e+"="+r+";")})),r=n}}catch(e){}return r}function G(e,t){if(!e||""===e)return"";let n=!1,i=null;if(S)try{if(i=new URL(e),!t||0===t.length)return;t.forEach((e=>{i.searchParams.has(e)&&(n=!0),i.searchParams.delete(e)}))}catch(t){return e}return n?i.toString():e}function V(e){if(!e||""===e)return"";let t=null,n=!1;if(S)try{t=new URL(e);const i=new RegExp(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi);t.searchParams.forEach((function(e,t){e.match(i)&&(n=!0)}))}catch(e){}return n?"":e}function q(e){const t="sign-in-refreshed-page";S&&a&&a.getItem(t)?(a.removeItem(t),(e.page=e.page||{}).isAutoRefresh=!0):function(e){return!e||!e.page||!0!==e.page.isAutoRefresh&&!1!==e.page.isAutoRefresh}(e)&&((e.page=e.page||{}).isAutoRefresh=!1)}function j(e=!1){let t;const n=new Promise((e=>{t=e}));return e&&t(),{promise:n,resolve:t}}function z(){i=null,r=null}},7191:function(e,t,n){n.d(t,{Y:function(){return r}});var i=n(81586);function r(e,t){const n=function(e){switch(e){case i.uH.AppStore:return 17;case i.uH.StructuredData:return 16;case i.uH.CmsPromotions:return 19;case i.uH.MicrosoftWebStore:return 20;case i.uH.XboxStore:return 21;case i.uH.OfficeStore:return 22;case i.uH.PartnerLinks:return 24;case i.uH.SponsoredContent:return 25;default:return 0}}(e)||function(e){switch(e){case i.wu.Navigate:return 14;case i.wu.Follow:return 26;case i.wu.Unfollow:return 27;case i.wu.More:return 28;case i.wu.Close:return 36;case i.wu.Share:return 37;case i.wu.Like:return 38;case i.wu.Dislike:return 39;case i.wu.Unlike:return 40;case i.wu.Undislike:return 41;case i.wu.Mute:return 42;case i.wu.Unmute:return 43;case i.wu.Cancel:return 44;case i.wu.Manage:return 45;default:return 0}}(t);if(0!==n)return n;if(e===i.uH.App){if(t===i.wu.Install)return 23;if(t===i.wu.Launch)return 18}return 0}},67888:function(e,t,n){n.d(t,{D:function(){return p}});var i=n(44132),r=n(55447),o=n(5884),a=n(15598),s=n(22691),c=n(33018),d=n(73865);const u="tp";var l=n(21215);class p extends d.F{static#e=this.isPivotManagerSwitched=!1;constructor(e,t){super(e,t);const n=(0,s.l)(),r=n.getSelectedPivot();if(r&&r.telemetryPivotCategory){let e;e.page.pivot=r.telemetryPivotCategory,i.M0.updatePageMetadata(e)}(0,l.N)()&&n.addSwitchListener(p.onPivotSwitch,c.I.Telemetry)}static onPivotSwitch(e){let t;const n=e.newSelection;if(n&&(i.M0.addOrUpdateCustomProperty(u,n.display),t={feed:{id:n.pivotId,name:n.display,type:"xfeed"===n.telemetryPageName?"category filter":void 0},page:{content:{topic:n.display},pivot:""}},n.telemetryPivotCategory&&(t.page.pivot=n.telemetryPivotCategory),n.telemetryVertical&&(t.page.content.vertical=n.telemetryVertical),n.telemetryPageType&&(t.page.type=n.telemetryPageType),"gaming"===n.pivotId&&(t.feed.id=`gaming/${(0,r.ll)()}`),"following"===n.pivotId&&(t.feed.id=`following/${(0,r.ll)()}`),i.M0.updatePageMetadata(t)),e.oldSelection||p.isPivotManagerSwitched){if(p.isPivotManagerSwitched=!1,n.telemetryPageName)t.page.name=n.telemetryPageName;else if(n.pivotId)switch(n.pivotId){case"productivityHub":t.page.name="entnewshp";break;case"myfeed":case"myFeed":t.page.name="default";break;case"myInterests":t.page.name="cinterests";break;case"gaming":t.page.name="gaming";break;case"play":t.page.name="play";break;case"navigationPage":t.page.name="navigationPage";break;case"following":t.page.name="following",t.feed.id=`following/${o.uD.Manual}`}"gaming"===n.pivotId&&(t.feed.id=`gaming/${o.uD.Manual}`,t.page.isCorePV=!0);const e="IsGamer",r="IsXboxGamer",s="IsPCGamer",c=(0,a.$o)().getItem("userType");return i.M0.addOrUpdateTmplProperty(e,c&&c.includes(e)?"1":"0"),i.M0.addOrUpdateTmplProperty(r,c&&c.includes(r)?"1":"0"),i.M0.addOrUpdateTmplProperty(s,c&&c.includes(s)?"1":"0"),i.M0.updateRequestId(),i.M0.updatePageMetadata(t),void i.M0.sendPageView(null,!0)}}}},93524:function(e,t,n){n.r(t),n.d(t,{TelemetryDataConnector:function(){return i.D},ToolingInfo:function(){return r}});var i=n(67888);const r={experienceConfigSchema:{}}},61877:function(e,t,n){n.d(t,{L:function(){return k}});var i=n(25487),r=n(61708),o=n(43261),a=n(27026),s=n(523),c=n(70041),d=n(28882),u=n(82928),l=n(22745),p=n(10662),h=n(16495),g=n(95603),f=n(22624),m=n(80535),y=n(98604),v=n(26197),S=n(86117),w=n(42122),b=n(93441),C=n(44132),T=n(14969);class k extends d.r{constructor(e,t){super(e,t,{actualRowCount:void 0,maxTiles:8});const n=(0,u.K0)(s.RL);h.U.getPreferenceSetting(i.lx).then((e=>{const t=e?.value;!1===t?.quickLinkSettingsChanged&&(0,T.eC)().then((()=>{C.M0?.addOrUpdateTmplProperty("tscollapsed_to_off","1")}))}));let r=!1,o=!1;try{(0,l.Uo)(s.RL,(async e=>{e.isLoadCompleted&&(r||(r=!0,(0,m.NU)(e).then((t=>{if(t){const t=e.selectedQuickLinksDisplaySetting;n.updateQuickLinksDisplayOption("off",g.dE.WPO_CLOSE),this.triggerWpoCloseTopSitesCoachMark(t),(0,u.oU)(s.Nx).then((e=>{window.setTimeout((()=>{(0,S.o_)(c.gLP,!0),b.g.updateVisuallyReadyTiming.getActionSender(e).send({experienceType:c.gLP,endTime:performance.now()})}))})),(0,T.eC)().then((()=>{C.M0?.addOrUpdateTmplProperty("tscollapsed_to_off","1")}))}r=!1}))),o||(o=!0,(0,m.bC)().then((e=>{e&&n.updateQuickLinksDisplayOption("onerow",g.dE.WPO_OPEN),o=!1}))),f.L.getPreferenceSetting(g.nc.tscollapsed).then((e=>{e&&C.M0.addOrUpdateTmplProperty(g.nc.tscollapsed,`${e?.value}|${e?.source}|${e?.timestamp}`)})))}))}catch(e){w.k.log(e)}}updateMaxTiles(e){this.updateState("maxTiles",e)}updateActualRowCount(e){window.setTimeout((()=>this.updateState("actualRowCount",e)))}async triggerWpoCloseTopSitesCoachMark(e){const t=(0,u.K0)(s.RL),n=await(0,y.h_)(v._.settingsButton),i={id:"topSitesCloseByWpo",group:"Default",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:r.dm.Large,dismissAfterSeconds:10,position:{coachmarkAnchor:n,anchoringPosition:r.RC.Below,hasPointer:!0,pointerPosition:r.Jt.Opposite}},contentModel:{title:this.config?.localizedStrings?.WpoCloseTopSitesCoachMark?.title??"",description:this.config?.localizedStrings?.WpoCloseTopSitesCoachMark?.description??"",contentType:o.J.CallToAction,dismissContentAction:{label:this.config?.localizedStrings?.WpoCloseTopSitesCoachMark?.dismissContentActionLabel??"",actionDelegate:()=>{t.updateQuickLinksDisplayOption(e,g.dE.REVERT)}},engageContentAction:{label:this.config?.localizedStrings?.WpoCloseTopSitesCoachMark?.engageContentActionLabel??"",actionDelegate:()=>{}}}},c=[(0,a.l)("Viewed",1)];(0,p.$0)().then((e=>{e.sendInternalPlacement(i,c)}))}}},16421:function(e,t,n){n.d(t,{K:function(){return m}});var i=n(98130),r=n(44132),o=n(92421),a=n(15598),s=n(33779),c=n(5302),d=n(21215);const u="TS_QUERIES";class l{constructor(e){this.config=e}buildURL(){return""}parseResponse(e){return[]}formatData(e){return e&&Array.isArray(e)?e.map((e=>("string"==typeof e&&(e={query:e}),this.config.landingPageBaseUrl&&e.query&&(e.href=this.config.landingPageBaseUrl+encodeURIComponent(e.query)+"&form="+this.config.formCode+"&refig="+r.M0.getRequestId()),e))):[]}async fetchTrendingSearches(e={credentials:"same-origin",method:"GET",mode:"cors"}){let t,n=[];if(!this.config||!this.config.apiEndpoint)return n;const i={};try{r.M0.addOrUpdateTmplProperty("fetchTrendingsearch","1");const a=this.buildURL(),s=this.config.apiTimeout||1e4,c=await(0,o.Sm)(decodeURIComponent(a),s,e);if(i.tIdInHeader=c.headers?.has("bingapis-traceid"),i.traceId=c.headers?.get("bingapis-traceid"),!c||!c.ok){if(404===c.status)return r.M0.addOrUpdateTmplProperty("tsResponse","0"),n;throw new Error("Error response: "+c.status)}t=await c.json()}catch(e){return(0,s.H)(c.QWk,`${e}`,"",i),n}try{if(!t)throw new Error("Invalid format of response.");if(n=this.parseResponse(t),!n||!Array.isArray(n))throw new Error("Invalid format of response.");return 0===n.length&&(r.M0.addOrUpdateTmplProperty("tsResponse","0"),this.config.allowEmptyResponse||(0,s.H)(c.wMp,"Empty trending search content","",i)),n.slice(0,this.config.cacheCount||5)}catch(e){(0,s.H)(c.yHB,`${e}`,"",i)}return n}async getTrendingSearches(){r.M0.addOrUpdateTmplProperty("trendingsearch","1");let e=[];if((0,d.N)())try{const e=(0,a.$o)().getItem(u);if(e){const t=JSON.parse(e),n=(t?.cacheTime||0)+1e3*(this.config.cacheTimeout||60),r=t?.queries,o=t?.mkt;if(o===i.jG.CurrentMarket&&r&&r.length&&n>Date.now())return this.formatData(r)}}catch(e){(0,s.H)(c.yHB,`${e}`)}if(e=await this.fetchTrendingSearches(),(0,d.N)())if(e&&e.length){const t={cacheTime:Date.now(),mkt:i.jG.CurrentMarket,queries:e};(0,a.$o)().setItem(u,JSON.stringify(t))}else(0,a.$o)().removeItem(u);return this.formatData(e)}}class p extends l{buildURL(){return this.config.apiEndpoint+"?qry=&ascv=json&pt="+this.config.partnerEndpoint+"&features="+this.config.features+"&mkt="+i.jG.CurrentMarket+"&cvid="+r.M0.getRequestId()}parseResponse(e){return e.suggestions&&Array.isArray(e.suggestions)?e.suggestions.filter((e=>!!e.q&&"PN"==e.t)).map((e=>({query:e.q}))):[]}}class h extends l{buildURL(){return this.config.apiEndpoint+"?apikey="+this.config.apikey+"&market="+i.jG.CurrentMarket+"&fdhead="+this.config.features}parseResponse(e){const t=JSON.parse(e[0]?.data);return t?.map((e=>({query:e?.Query,isAds:e?.IsAds})))||[]}}class g extends l{buildURL(){let e=this.config.apiEndpoint+"?appid="+this.config.appId+"&features="+this.config.features+"&mkt="+i.jG.CurrentMarket;return this.config.cc&&(e+="&cc="+this.config.cc),this.config.strictMode&&(e+="&IsStrictMode=1"),e}parseResponse(e){return e.value?.map((e=>({query:e.query?.text})))||[]}}class f extends l{buildURL(){return this.config.apiEndpoint}parseResponse(e){const t=e.suggestedQueries?.sort(((e,t)=>parseFloat(t.metadata.similarityScore)-parseFloat(e.metadata.similarityScore)));return t?.map((e=>({query:e.query})))||[]}}function m(e){let t;switch(e.apiVersion){case 4:t=new f(e);break;case 3:t=new p(e);break;case 2:t=new g(e);break;default:t=new h(e)}return t}},52837:function(e,t,n){n.d(t,{q:function(){return s}});var i=n(33779),r=n(5302);var o=n(42833);const a=new Map;class s{static#e=this.defaultOrigin="edge://new-tab-page-online";static bind(e,t=s.defaultOrigin){if(!e||!t)return(0,i.H)(r.oJ2,"Parent window and origin must be provided."),null;if(e===window)return(0,i.H)(r.oJ2,"Parent window cannot be the same as the current window."),null;if(a.has(e)){const n=a.get(e);return n.origin=t,n}const n=new s(e,t);return a.set(e,n),n}static getInstance(e=window.parent){return a.has(e)&&a.get(e)||null}constructor(e,t=s.defaultOrigin){this.fromUCSettablePromise=null,this.origin=s.defaultOrigin,this.parent=null,this.callbacks={},this.interceptors={},this.listen=e=>{if(e.origin!==this.origin)return;const t=e.data;if(!t||!t.type)return;const n=this.callbacks[t.type];n&&n.length>0&&n.forEach((e=>e(t.data)))},this.resolveUCPromise=(e,t)=>{let n={top:0,height:0};switch(e){case"modal":n=this.getModalOverridesForUCImmersiveMode(t);break;case"cookieBanner":n={top:0,height:0}}this.fromUCSettablePromise?.set(n)},this.parent=e,this.origin=t,window.addEventListener("message",this.listen)}cleanUp(){this.callbacks={},this.interceptors={},window.removeEventListener("message",this.listen)}intercept(e,t){this.interceptors[e]=t}unintercept(e){this.interceptors[e]&&delete this.interceptors[e]}emit(e){if(this.interceptors[e.type])return this.interceptors[e.type](e.data);this.parent.postMessage(e,this.origin)}async awaitOnce(e,t){if(this.fromUCSettablePromise)return;const n=this.resolveUCPromise.bind(this,e);this.callbacks[t]=[...this.callbacks[t]||[],n],this.fromUCSettablePromise=new o.o;const i=await this.fromUCSettablePromise.getResultAsync();return this.fromUCSettablePromise=null,this.callbacks[t]=this.callbacks[t].filter((e=>e!==n)),i}on(e,t){if("function"!=typeof t)throw new Error("Callback must be a function.");this.callbacks[e]=[...this.callbacks[e]||[],t]}off(e,t){if("function"!=typeof t)throw new Error("Callback must be a function.");this.callbacks[e]&&(this.callbacks[e]=this.callbacks[e].filter((e=>e!==t)))}offAll(e){this.callbacks[e]&&delete this.callbacks[e]}notify(e,t){this.emit({type:e,data:t})}notifyAfterRepaint(e){window.requestAnimationFrame((()=>{window.requestAnimationFrame((()=>{this.emit({type:e})}))}))}getModalOverridesForUCImmersiveMode(e){return{top:(e?.innerHeight??0)/2+(e?.scrollY??0),height:.9*(e?.innerHeight??0)}}canAwaitUCEvent(e){return void 0===this.callbacks[e]||this.callbacks[e]&&0===this.callbacks[e].length}}},10034:function(e,t,n){var i;n.d(t,{SH:function(){return l},$A:function(){return c},ku:function(){return r},Ol:function(){return o},Nm:function(){return h},jC:function(){return d},Jn:function(){return u}}),function(e){e.DesktopL1="weatherdesktopl1",e.DesktopL2="weatherdesktopl2",e.PWA="weatherpwa",e.EdgeFeatured="edgefeatured",e.WINAPP="weather-app-win",e.Weather_Mobile_App="weather-app-mobile",e.XIAOMI="xiaomi",e.OPPO="oppowx",e.XIAOMI_ANDROID_GO="xmweather-gominus1",e.XIAOMI_BROWSER="xmweather-browser",e.WINDOWS_HEADER_PREFIX="win",e.EDGE_ARTICLE_PREFIX="msnar",e.SuperApp="weather-super-app"}(i||(i={}));new Set(["msedgdhphdr","msedgntphdr","msedgntp","msedgdhp","entnewsntp"]),new Set(["entnewsdhp","entnewsntp","msedgdhp","msedgntp","msedgdhphdr","msedgntphdr"]);function r(e){let t;if(e instanceof URL)t=e.searchParams;else if(e instanceof URLSearchParams)t=e;else if("string"==typeof e)try{t=new URL(e).searchParams}catch(e){t=void 0}return o(t,"ocid")}function o(e,t,n){if(e&&t){const i={value:e.get(t)||void 0};if(!i.value&&n&&n.length>0)for(let t=0;t<n.length&&(i.value=e.get(n[t])||void 0,!i.value);++t);if(!i.value){const n=t.toLowerCase();e.forEach((function(e,t){!i.value&&t.toLowerCase()===n&&e&&(i.value=e)}))}return i.value}}var a=n(98130),s=n(5884);function c(e,t,n){if(!e)return null;let i;try{i=e instanceof URL?new URL(e.href):new URL(e)}catch(e){return null}if(i&&(n||i.host.includes("msn.com")||i.host.includes(".msn.cn")))for(const[e,n]of Object.entries(t))e&&n&&i.searchParams.set(e,n);return i.href}function d(e,t){if(!e)return null;let n;try{n=new URL(e instanceof URL?e.href:e)}catch(e){return null}return n&&t&&t.length&&t.forEach((e=>{n.searchParams.delete(e)})),n.href}function u(e){if("edgeChromium"===a.jG.AppType)return!1;const t=r(e),n=t?.toLowerCase();return s.Oj.has(n)||s.FP.has(n)}n(61303);function l(e,t,n){return c(e,{cvid:t,ocid:n})}new Set(["wind_spot_2","wind_spot_desktop","widgetonlockscreen","widgetonlockscreenwin10","winp2fpwidgetboard"]);const p=new Set(["wind_spot_2","wind_spot_desktop"]);function h(e){return p.has(e)}},53915:function(e,t,n){n.d(t,{DO:function(){return y},UQ:function(){return w},Ub:function(){return T},Y1:function(){return f},bj:function(){return I},e9:function(){return A},fB:function(){return P},fg:function(){return b},oR:function(){return m},of:function(){return S},uW:function(){return v},wl:function(){return k}});var i=n(16715),r=n(97906),o=n(28951),a=n(98130),s=n(13218),c=n(5232),d=n(59465),u=n(19628),l=n(68178),p=n(44018),h=n(21215),g=n(22680);function f(e){let t="";const n=["{0}","{0}K","{0}M"];for(let i=n.length-1;i>=0;i--){const r=Math.pow(1e3,i);if(e>=r){let o;o=r<1e3?e:e/r,t=u.Ld.Format(n[i],Math.round(10*o)/10);break}}return t}!function(){let e=null}();function m(){if((0,h.N)()){if((0,p.t)()){const e=(0,p.v)();return Boolean(e&&e.isDarkMode)}if(((0,i.pE)()||(0,i.P4)())&&(0,r.G)().supported){const e=(0,r.G)().getItem("nativeAppUserConfig"),t=e&&JSON.parse(e);if(t)return t.isDarkMode}const e=o.cX.getQueryParameterByName("isDarkTheme",location.href);if(null!==e)return"true"===e}return(0,l.Yc)()}function y(e){const t=window.matchMedia("(prefers-color-scheme: dark)"),n=new WeakMap,i=t=>{let i=n.get(t);return i||(i=(t=>{let n=!1;return()=>{const i=m();n!==i&&(n=i,i?t.addStyles(e):t.removeStyles(e))}})(t),n.set(t,i)),i};return{connectedCallback(e){const n=i(e);n(),t.addEventListener("change",n)},disconnectedCallback(e){const i=n.get(e);i&&t.removeEventListener("change",i)}}}function v(){return!a.jG?.isMobile&&(!s.Al?.CurrentFlightSet?.has("prg-watch-kumo-rf")||P())}function S(){return v()&&s.Al?.CurrentFlightSet?.has(P()?"prg-watch-copi-ruby":"prg-watch-copilot")}function w(){return a.jG?.isMobile||(0,i.P4)()}const b=(e,t)=>e.replace(/<path\s[^>]*>/i,(e=>-1===e.indexOf("fill=")?`${e.slice(0,-1)} fill="${t}">`:e));function C(e=(0,g.ij)()){return/Edg/.test(e)}function T(e,t){return(function(e=(0,g.ij)()){return C(e)&&w()}()||Boolean("emmx-launcher-feeds"===(0,c.ku)()?.toLowerCase()))&&e?e:t}function k(e){const t=(0,p.v)(),n="iOS"===t?.platform;switch(e){case"article":return n?"saiar":"saaar";case"gallery":return n?"saiga":"saaga";case"video":return n?"saiwatch":"saawatch";case"videoinf":return n?"saivi":"saavi";default:return"saaar"}}function P(){const e=(A()||(0,d.nH)())&&!(0,i.P4)();return!a.jG?.isMobile&&(function(){const e=((0,c.ku)()??new URL(window.location.href).searchParams.get("ocid")??"").toLowerCase(),t=(a.jG.CurrentMarket?.split("-")||[])[0];return"cp_msn_cmc"===e&&"en"===t}()||e)}function A(){return"gem"===function(e){if(!e)return null;const t=E(e);if(!t||!t.contentPrefix)return null;switch(t.contentPrefix.toLowerCase()){case"ar":return"article";case"ss":return"gallery";case"vi":return t.contentId&&t.contentId.length>=6&&t.contentId.length<=8?"video":"webcontent";case"vp":case"vs":return"video";case"is":return"insight";case"gm":return"gem"}return null}((0,g.l4)())}function I(e){const t=E(e);if(!t)return;const n=t.contentId;return decodeURIComponent(n)!==n?n:encodeURIComponent(n)}function E(e){const t=new RegExp("^.*/(?<contentPrefix>[Aa][Rr]||[Ss]{2}||[Vv][Ii]||[Vv][Dd]||[Vv][Pp]||[Vv][Ss])-(?<contentId>[a-zA-Z0-9]{6,8})(([?].*)||#.*)?$"),n=new RegExp("^.*/(?<contentPrefix>[Vv][Ii])-(?<contentId>.*?)(([?].*)||#.*)?$"),i=new RegExp("^.*/(?<contentPrefix>[Ii][Ss]||[Gg][Mm])-(?<contentId>[a-zA-Z0-9]*)(([?].*)||#.*)?$"),r=e.match(t)||e.match(n)||e.match(i);return r&&r.groups?.contentId&&"vn/video"!==r.groups.contentId?r.groups:null}},44018:function(e,t,n){n.d(t,{t:function(){return r},v:function(){return o}});var i=n(39197);function r(){return(0,i.Vx)()}function o(){return(0,i._4)()}},88413:function(e,t,n){n.d(t,{Vo:function(){return h},XJ:function(){return p}});var i=n(85594),r=n(72685),o=n(34254),a=n(7124);let s=!1;function c(){d()}const d=(0,a.Z)((()=>h(!1)),300),u=new Set;class l extends i.Pq{constructor(e){super(e),this.options=e}bind(e){this.target=e.targets[this.targetNodeId],s||(addEventListener("resize",c),s=!0),this.initialCalc(),u.add(this)}unbind(){u.delete(this)}async initialCalc(){await(0,o.F_)(),this.recalculate(!1)}async recalculate(e){await(0,r.y)();const t=this.target;if("fixed"!==t.style.position&&t.offsetWidth>0&&t.offsetHeight>0){const n={top:t.offsetTop,left:t.offsetLeft};if(e&&this.lastPosition){const e=this.lastPosition.left-n.left,i=this.lastPosition.top-n.top;if(e||i){const n=`translate(${e}px, ${i}px)`;t.style.transform=n,requestAnimationFrame((()=>{const e="transform .3s ease-out",n=t.style.transition;t.style.transition=n?n+", "+e:e,t.style.transform="translate(0, 0)",setTimeout((()=>{t.style.transition=n,t.style.transform=null}),300)}))}}this.lastPosition=n}}}function p(){return new l({})}function h(e){for(const t of u.values())t.recalculate(e)}i.m0.define(l)},68995:function(e,t,n){n.d(t,{Fc:function(){return c},Fl:function(){return s},Nu:function(){return d}});var i=n(85594);const r={},o={};class a extends i.Pq{constructor(e){super(e),this.options=e,this.stickyClassApplied=!1,this.refreshSticky=()=>{const e=r[this.options.breakpointName];if(e<0)return;const t=scrollY>e;if(t!==this.stickyClassApplied){const e=this.options.stickyClassName;t?this.target.classList.add(e):this.target.classList.remove(e),this.stickyClassApplied=t}}}bind(e){this.target=e.targets[this.targetNodeId],this.refreshSticky();const{breakpointName:t}=this.options;let n=o[t];n||(n=new Set,o[t]=n),n.add(this),addEventListener("scroll",this.refreshSticky)}unbind(e){o[this.options.breakpointName].delete(this),removeEventListener("scroll",this.refreshSticky)}}function s(e){return new a(e)}function c(e,t){r[e]=t;const n=o[e];if(n)for(const e of n)e.refreshSticky()}function d(e){return r[e]}i.m0.define(a)},6684:function(e,t,n){n.d(t,{JA:function(){return i},Rc:function(){return o},_$:function(){return r},mu:function(){return a},wE:function(){return s}});const i=[0,1,2,3,4,5,6],r=[1,2,3,4,5,6,0];const o=(e,t,n,r=!1)=>{const o=i.length,a=function(e,t){return new Date(e,t,0).getDate()}(e,t),s=new Date(e,t-1,1);if(r)return[s,new Date(e,t-1,a)];let c=s.getDay();const d=a+c,u=d%o;let l=u?o-u:0;l=d+l>=5*o?l:l+o,n&&(c>0?(c-=1,l+=1):(c+=6,l+=1));return[new Date(e,t-1,1-c),new Date(e,t-1,a+l)]},a=(e,t)=>t?`${e.getFullYear()}${`0${e.getMonth()+1}`.slice(-2)}${`0${e.getDate()}`.slice(-2)}`:`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`,s=(e,t)=>{if(!e)return null;try{const n=e.split("-");if(!Array.isArray(n)||3!=n.length)return null;const i=o(Number(n[0]),Number(n[1]),t);return Array.isArray(i)&&2==i.length?[a(i[0],!0),a(i[1],!0)]:null}catch{return null}}},97634:function(e,t,n){function i(e,t=!1){if(e){if(t&&e.display)return e.display;if(e.content)return e.content}return e}function r(e){return e.language&&e.market&&(e.language+"-"+(e.script?e.script+"-":"")+e.market).toLowerCase()||""}function o(e){if(!e||!e.startsWith("f:"))return;const t=(e.match(/f:\s*([^;]+)/i)||[])[1];return t?t.toLowerCase().split(",")?.sort():[]}n.d(t,{He:function(){return i},py:function(){return r},vF:function(){return o}})},73344:function(e,t,n){n.d(t,{D3:function(){return u},KL:function(){return g},Pt:function(){return C},QG:function(){return y},mL:function(){return w},pG:function(){return p},q3:function(){return h},vc:function(){return l},zz:function(){return v}});var i=n(58009),r=n(12697);let o;const a="//img-s-msn-com.akamaized.net/tenant/amp/entityid/",s="//img-s.msn.cn/tenant/amp/entityid/",c="//prod-streaming-video-msn-com.akamaized.net/",d="//prod-streaming-video.msn.cn/";var u,l;!function(e){e.JPG="jpg",e.PNG="png",e.WEBP="webp"}(u||(u={})),function(e){e[e.None=0]="None",e[e.Letterbox=1]="Letterbox",e[e.Scale=2]="Scale",e[e.Stretch=3]="Stretch",e[e.Crop=4]="Crop",e[e.FocalCrop=5]="FocalCrop",e[e.FacialCrop=6]="FacialCrop"}(l||(l={}));const p=90,h="www.bing.com/th",g=new RegExp(/bing\.(com|net)\/th/),f=new RegExp(/copilot\.microsoft\.com/),m=new RegExp(/gettyimages\.com/);function y(e,t){return`${(0,i.PQ)()?d:c}${e}.${t||"mp4"}`}function v(e,t){return w(((0,i.PQ)()?s:a)+e,t)}const S=Math.ceil(4*Math.random())||4;function w(e,t,n=!1){if(e&&g.test(e))return function(e,t,n=!1){try{const i=b(new URL(e),t);return n&&!i.searchParams.has("pid")&&i.searchParams.set("pid","wdpv2"),i.href}catch(n){const i=b(new URL(`https://${e}`),t);return`//${i.host}${i.pathname}${i.search}`}}(e,t,n);if(e&&f.test(e))return C(e,t);if(e&&m.test(e)&&n)return e;const{focalRegion:c,backgroundColor:d}=t;let{width:l=0,height:h=0,format:y=u.JPG}=t,v="";if(c){const e=k(c.x1,c.x2),t=k(c.y1,c.y2);null!=e&&null!=t&&(v+=`&x=${e}&y=${t}`)}d&&(v+=`&b=${d}`);const S=null==t.mode?6:t.mode;if(6===S&&(v+="&u=t"),t.enableDpiScaling){if(!t.devicePixelRatio)throw new Error("A valid devicePixelRatio value must be provided when DPI scaling is enabled");const e=function(e){if(T()&&o)return o;if(e<1)return null;let t=e;(0,r.Z)(4*t)||(t=Math.ceil(10*t)/10);t>3&&(t=3);T()&&(o=t);return t}(t.devicePixelRatio);e&&(l=Math.round(l*e),h=Math.round(h*e))}let w=t.quality||60;return t.enableWebpFormat&&(y=u.WEBP,w=t.quality||p,(0,i.PQ)()&&e.indexOf(a)>=0&&(e=e.replace(a,s))),`${e}?w=${l}&h=${h}&q=${w}&m=${S}&f=${y}${v}`}function b(e,t){(0,i.PQ)()&&(e.hostname=`ts${S}.tc.mm.bing.net`);const{width:n=0,height:r=0}=t,o=t.quality||p,a=t.crop||0===t.crop?t.crop:1;if(e.searchParams.set("w",`${n}`),e.searchParams.set("h",`${r}`),e.searchParams.set("qlt",`${o}`),e.searchParams.set("c",`${a}`),e.searchParams.set("rs","1"),t.enableDpiScaling){e.searchParams.set("dpr",`${t.devicePixelRatio}`);const n=t.padding||0;e.searchParams.set("p",`${n}`)}return e}function C(e,t){const{width:n=0,height:i=0,format:r=u.JPG,crop:o=1,padding:a=0}=t;let s;try{s=new URL(e)}catch(t){return e}return s.searchParams.set("w",n.toString()),s.searchParams.set("h",i.toString()),s.searchParams.set("f",r.toString()),s.searchParams.set("c",o.toString()),s.searchParams.set("rs","1"),s.searchParams.set("p",a.toString()),s.toString()}function T(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function k(e,t){if(null!=e&&null!=t)return Math.floor((e+t)/2)}},58009:function(e,t,n){let i,r;function o(e){i=e}function a(){return i}function s(e){r=e}function c(){return r}n.d(t,{PQ:function(){return a},g8:function(){return c},jW:function(){return s},sV:function(){return o}})},61970:function(e,t,n){n.d(t,{tR:function(){return c},Un:function(){return a}});var i=n(33779),r=n(5302);var o=n(98130);n(61303);"object"!=typeof window||!window.chrome||window.chrome.webview,new class{constructor(){this._isTrue=!1,this.onTrueCallbacks={}}isTrue(){return this._isTrue}reset(){this._isTrue=!1,this.onTrueCallbacks={}}sub(e,t){this._isTrue?t&&t():e&&t&&"function"==typeof t&&(this.onTrueCallbacks[e]=t)}unsub(e){e&&this.onTrueCallbacks[e]&&delete this.onTrueCallbacks[e]}setTrue(){if(this._isTrue)return;this._isTrue=!0;Object.keys(this.onTrueCallbacks).forEach((e=>{this.onTrueCallbacks[e]&&this.onTrueCallbacks[e]()})),this.onTrueCallbacks={}}};const a=()=>{let e=!1,t=!1;try{const{shellFeedsExperienceInfo:n}=c()||{};if(!n)return!1;e=0===n.buttonInteraction,t=n.isWebviewVisible}catch(e){return(0,i.H)(r.$Yi,"Error with shellFeedsExperienceInfo API for isWindowShellPageInBackground",`Thrown error: ${e}`),!1}return d("prg-1sw-wv2bgup")?e:d("prg-1sw-2wv2bgup")?!t:d("prg-1sw-3wv2bgup")?e||!t:!t&&e};const s=d("prg-1sw-apiproxy"),c=()=>{if(window.ShellFeedsApp)return s?new Proxy(window.ShellFeedsApp,{get(e,t,n){try{if("isProxy"===t)return!0;if("toJSON"===t)return()=>function(e){const t={},n=Object.getOwnPropertyNames(e);for(const i of n)t[i]=e[i];return JSON.stringify(t)}(e);if("shellFeedsExperienceInfo"===t||"authManager"===t)return new Proxy(e[t]||{},this);const n=t in e?e[t]:void 0;return"function"==typeof n?n.bind(e):n}catch(e){!function(e,t){(0,i.OO)(t||new Error("Property not found"),r.$Yi,"shellFeedsAppApi error",`API: ${e}`)}(t,e)}}}):window.ShellFeedsApp};!function(){try{const{shellFeedsExperienceInfo:e}=c()||{};return!!e&&!1===e.showPinToTaskbarBanner}catch(e){return!1}}();function d(e){return(o.jG&&o.jG.CurrentRequestTargetScope&&o.jG.CurrentRequestTargetScope.pageExperiments||[]).includes(e)}},66651:function(e,t,n){n.d(t,{Iq:function(){return c},MD:function(){return a},MO:function(){return o},gL:function(){return s}});var i=n(80293),r=n(43225);const o=new i.v("WidgetLoadTracker");function a(e){o.has(e)||("hidden"!==document.visibilityState?(0,r.c)((()=>o.set(e,!0))):o.set(e,!0))}const s=new i.v("WidgetAppState");var c;!function(e){e[e.IsDarkMode=1]="IsDarkMode",e[e.IsDashboardVisible=2]="IsDashboardVisible",e[e.ActionMenuStrings=3]="ActionMenuStrings",e[e.NonPeregrineWidgetTelemetryObject=4]="NonPeregrineWidgetTelemetryObject",e[e.FeedRegionWidgets=5]="FeedRegionWidgets",e[e.RecommendedWidgets=6]="RecommendedWidgets",e[e.DefaultPreviewType=7]="DefaultPreviewType",e[e.IsReauthRequired=8]="IsReauthRequired",e[e.IsWindowShown=9]="IsWindowShown",e[e.FeedRefreshPromise=10]="FeedRefreshPromise",e[e.Suspended=11]="Suspended",e[e.ClientLayoutVersion=12]="ClientLayoutVersion",e[e.IsLSCachedFeedUsed=13]="IsLSCachedFeedUsed",e[e.IsExpandedViewEnabled=14]="IsExpandedViewEnabled",e[e.DelayTtvrPromise=15]="DelayTtvrPromise",e[e.TaskbarLaunchState=16]="TaskbarLaunchState",e[e.IsPreferenceMigrationComplete=17]="IsPreferenceMigrationComplete",e[e.WidgetPinnedPreferences=18]="WidgetPinnedPreferences",e[e.IsFeedsShown=19]="IsFeedsShown",e[e.BoardsNavigationState=20]="BoardsNavigationState",e[e.DisablePinIcon=21]="DisablePinIcon",e[e.AllowedPeregrineWidgets=22]="AllowedPeregrineWidgets",e[e.DisableEarlyFetchWithNormalflow=23]="DisableEarlyFetchWithNormalflow",e[e.OverrideScrollOffset=24]="OverrideScrollOffset",e[e.IsSplit1S=25]="IsSplit1S",e[e.Layout3InDiscover=26]="Layout3InDiscover",e[e.IsDMARegionAndEdgeNotDefault=27]="IsDMARegionAndEdgeNotDefault",e[e.TaskbarUpdateLaunchEventPromise=28]="TaskbarUpdateLaunchEventPromise"}(c||(c={}))},46011:function(e,t,n){n.d(t,{fy:function(){return De},GZ:function(){return Fe},eW:function(){return xe}});var i=n(33779),r=n(5302),o=n(242),a=n(24358),s=n(72465),c=n(44132),d=n(5813),u=n(70249),l=n(52541),p=n(35587),h=n(69931),g=n(95603),f=n(26156),m=n(21215),y=n(52185),v=n(22680),S=n(24939),w=n(97265),b=n(32308),C=n(66258),T=n(95438),k=n(13218),P=n(10105),A=n(93348),I=n(35030),E=n(98130),R=n(82588),M=n(28951),x=n(7733),L=n(5884),F=n(92421),D=n(15598),O=n(34800),_=n(10034);const N=Symbol("__debugIdList__"),B=Symbol("__renderedCardIds__"),U=e=>{const{jsonResponse:t,heroSection:n,segment:o}=e,a=t.sections.find((e=>"cardData_hero"===e.region)),s=a?.cards?.length??0;if(!s)return void(0,i.H)(r.GX5,`Missing Card Data Hero Region - ${o}`,void 0,{...r.GX5.pb,segment:o,customMessage:`debugId: ${t.debugId}`});const c=q[o].cardCounts.includes(s);let d=!0,u=!1;const l=W.get(o);if(a?.cards?.forEach((e=>{l.has(e.type)||(G.includes(e.type)?u=!0:d=!1)})),u&&(0,i.H)(r.uud,`Hero card backfilled - ${o}`,void 0,{...r.uud.pb,segment:o,receivedCardCount:s,cardsInResponse:JSON.stringify((a?.cards||[]).map((e=>e.type))),customMessage:`debugId: ${t.debugId}`,isCorrectCardCount:c,isValidCardTypes:d}),!c||!d)return void(0,i.H)(r.GX5,`Invalid Card Data Hero Region - ${o}`,void 0,{...r.GX5.pb,segment:o,receivedCardCount:s,cardsInResponse:JSON.stringify((a?.cards||[]).map((e=>e.type))),customMessage:`debugId: ${t.debugId}`,isCorrectCardCount:c,isValidCardTypes:d,hasBackfilled:u});const p=(n?.subSections||[]).find((e=>5===e?.requestedColumnCount))?.subSections||[],h=p.filter((e=>"placeholder"!==e?.cards?.[0]?.type)),g=h.length===s;let f=!0;const m=a?.cards?.map((e=>e.id));h.forEach((e=>{m.includes(e?.cards?.[0]?.id)||(f=!1)})),g&&f||(0,i.H)(r.GX5,`Invalid Hero Waterfall Region - ${o}`,void 0,{...r.GX5.pb,segment:o,cardsInResponse:JSON.stringify(p.map((e=>`${e?.cards?.[0]?.id}|${e?.cards?.[0]?.type}`))),customMessage:`debugId: ${t.debugId}`,isCorrectCardCount:g,isValidCardIds:f})},$=e=>{switch(e){case"weather":return r.HEk;case"sports":return r.KnF;case"finance":return r.ewo;case"traffic":return r.yRT;case"cegrowth":return r.duJ;default:return r.SAl}};var H;!function(e){e.weather="weather",e.traffic="traffic",e.finance="finance",e.sports="sports",e.cegrowth="cegrowth",e.videos="videos"}(H||(H={}));const W=new Map([["weather",new Set([O.PL.WeatherHero,O.PL.WeatherCurrent,O.PL.WeatherForecast,O.PL.WeatherMap])],["traffic",new Set([O.PL.TrafficIncidents,O.PL.TrafficCamerasWithSummary,O.PL.TrafficMap,O.PL.TrafficNews,O.PL.TravelTimes,O.PL.TravelTimesWithSummary,O.PL.TrafficCameras,O.PL.TrafficTransit,O.PL.TrafficSummary,O.PL.TopicFeed])],["cegrowth",new Set([O.PL.DailyMomentsCard1,O.PL.MiTHeroAction,O.PL.MiTHeroContent,O.PL.DailyMomentsCard2,O.PL.DailyMomentsCard3,O.PL.MiTHeroFollow,O.PL.MiTHeroSpotlight])],["sports",new Set([O.PL.SportsHeroFre,O.PL.SportsHeroLeagueTodaysEvents,O.PL.SportsHeroMatch1SeasonStats,O.PL.SportsHeroMatch1Stats,O.PL.SportsHeroMatch2SeasonStats,O.PL.SportsHeroMatch2Stats,O.PL.SportsHeroMatch3SeasonStats,O.PL.SportsHeroMatch3Stats,O.PL.SportsHeroMatchStatistics,O.PL.SportsHeroMatchCard,O.PL.SportsHeroNews,O.PL.SportsHeroOneVsManyEventResult,O.PL.SportsHeroOneVsOneEventResult,O.PL.SportsHeroSeasonStatistics,O.PL.SportsHeroStandingsRankings,O.PL.SportsHeroTeamStandings,O.PL.SportsHeroTeamStandingWithEvents,O.PL.SportsHeroTeamStandingWithMedals,O.PL.SportsHeroTeamVsTeam,O.PL.SportsHeroTeamVsTeamEventResult,O.PL.SportsHeroVideo,O.PL.SportsSpotlight2Match1,O.PL.SportsSpotlight2Match2])],["finance",new Set([O.PL.FinanceHeroMarket,O.PL.FinanceHeroMovers,O.PL.FinanceHeroSuggested,O.PL.FinanceHeroCrypto,O.PL.FinanceHeroCurrencies,O.PL.FinanceHeroUpcomingEarnings,O.PL.FinanceHeroNews,O.PL.FinanceHeroWatchlistIdeas,O.PL.FinanceHerowlsummary,O.PL.FinanceHeroMarketChart])],["videos",new Set([O.PL.DailyWonderQuoteCard,O.PL.DailyWonderHeroVideo,O.PL.DailyWonderVideoListCard,O.PL.DailyWonderCopilotCard])]]),G=[O.PL.Article,O.PL.Video,O.PL.Slideshow],V=new Map([["hero-section-one-row-1211",{cardCount:4,supportedSegments:["traffic","sports","finance"]}],["hero-section-one-row-11111",{cardCount:5,supportedSegments:["traffic","sports","finance"]}],["hero-section-one-row-122",{cardCount:3,supportedSegments:["weather","videos"]}],["hero-section-one-row-2111-b",{cardCount:4,supportedSegments:["cegrowth","videos"]}],["msft-full-wide-one-card-five-col",{cardCount:1,supportedSegments:["weather"]}]]),q={weather:{cardCounts:[3,1]},traffic:{cardCounts:[4,5]},sports:{cardCounts:[4,5]},finance:{cardCounts:[4,5]},cegrowth:{cardCounts:[]},videos:{cardCounts:[]}},j=(e,t)=>{const n=e?.sections?.find((e=>"widgets"===e.region));if(!n||!n.subSections?.length)return t&&c.M0.addOrUpdateTmplProperty("widgetsCards",""),void((0,m.N)()?window.dispatchEvent(new CustomEvent("noWidgetsData",{detail:!0})):window.noWidgetsData=!0);window.noWidgetsData&&(window.noWidgetsData=!1)};const z=(e,t,n)=>{const o=y.Gq.get(N,(()=>[])),a=y.Gq.get(B,(()=>new Map));if(0!==n&&2!==n||(o.length=0,a.clear()),!e||!e.length)return;const s=[],c=[];o.push(t),e?.forEach((e=>{"river"===e?.region&&e?.sections?.forEach((e=>{const t=function(e){const t={};if(!Array.isArray(e))return t;for(const n of e)if(Array.isArray(n))for(const e of n)if(e?.cards&&Array.isArray(e.cards))for(const n of e.cards)n?.wpoId&&(t[n.wpoId]=!0);return t}(e?.columnLayoutList);e?.cards?.forEach((e=>{if(e?.wpoId&&t[e.wpoId]){const{id:t,type:n}=e;t&&a.has(t)?(s.push(t),c.push(n)):a.set(t,n)}}))}))})),s.length&&(0,i.H)(r.NZ5,"Duplicate cards found in feed response",void 0,{cardIdList:s,cardTypeList:c,debugIdList:o})};var K,Q=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"filteredChannels","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),J=n(42833),X=n(29871);!function(e){e.News_BreakingNews="News_BreakingNews",e.News_ForYouNews="News_ForYouNews"}(K||(K={}));var Y=n(54076),Z=n(36871);const ee=new Set([O.PL.Article,O.PL.Slideshow,O.PL.Video]);function te(e,t=!1){if(e.subCards)for(const n of e.subCards)te(n,t);if(!t&&!ee.has(e.type)||!e.url)return e;let n;try{n=new URL(e.url)}catch(t){return(0,i.OO)(t,r.gqz,"Invalid Consumption Card Url",void 0,{url:e.url}),e}return n.searchParams.has("uxMode")||"www.msn.com"!==n.hostname&&"www.msn.cn"!==n.hostname||(n.searchParams.append("uxMode","ruby"),e.url=n.toString()),e}var ne=n(24318),ie=n(93450),re=n(59465);const oe="https://account.microsoft.com/privacy/ad-settings";function ae(e){return"river"===e?"cardData":`cardData_${e}`}class se{constructor(e,t){this.adRiverRegion=E.jG.IsHeroNTP?"riverlock":"river",this.adInfopaneRegion=E.jG.IsHeroNTP?"infopanelock":"infopane",this.infoPaneCardCount=0,this.riverCardCount=0,this.heroCardCount=0,this.rightrailCardCount=0,this.railCardCount=0,this.denseRiverCardCount=0,this.widgetsCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0,this.infopaneCmsAdCount=0,this.sectionIndex=0,this.wpoIdResponseIndex=0,this.shoppingInfopaneAdV1=!1,this.isRubySelected=!1,this.mapRegionBasedWpoResponseForSuperFeed=(e,t,n,o,a,s,c,d,u,l)=>{if(!e||!e.sections||!e.sections.length)return{rawAdRegionTupleMap:ce()};this.rawAdRegionTupleMap=ce();const p={rawAdRegionTupleMap:this.rawAdRegionTupleMap},h=e.serviceContext?e.serviceContext.debugId:e.debugId,g=de(e),{nextPageUrl:f,sections:m,pageContext:y,previews:v}=g;let S,w,b=this.riverCardCount;const C=[];let T=!1;const k=m.findIndex((e=>"cardData"===e.region)),P=m.findIndex((e=>"widgets"===e.region)),A=m.findIndex((e=>"subLayouts"===e.region));let I=m;if(k>-1){S=m[k].cards,d&&(this.wpoIdResponseIndex=0),b=100*this.wpoIdResponseIndex;const t=m.find((e=>"river"===e.region)).subSections,n=ue(t,b);if(w=n.subSections,T=n.rowRendering,A>-1){const t=e?.sections?.[A].subSections;for(const e of t)e.wpoContainerId+=b,C.push({subSections:ue(e.subSections,b).subSections,wpoContainerId:e.wpoContainerId})}this.wpoIdResponseIndex++,c?.get("river")&&(this.riverNativeAdRelativeCount=c.get("river")),c?.get("resriver")&&(this.riverCmsAdRelativeCount=c.get("resriver"))}(k>-1||P>-1)&&(I=m.filter((e=>["cardData","subLayouts"].indexOf(e.region)<0)));const E=I.findIndex((e=>"hero"===e.region)),R=I.findIndex((e=>"widgets"===e.region));var M;return E>-1&&s&&(M=I[E],M?.subSections?.[0]?.dataTemplate||M?.subSections?.[0]?.layoutTemplate)&&I.splice(E,1),p.nextPageUrl=f,p.pageContext=y,p.previews=v,p.regions=I.map((c=>{const{subSections:d,region:p,requestedColumnCount:g}=c,y=void 0,v=void 0;let P;if(k>-1&&("river"===p||"hero"===p&&s)){if("river"===p){P=[{dataTemplate:y,layoutTemplate:v,cards:S.map((e=>this.convertCardForSuperFeed({...e,placement:void 0},p,h,void 0,t,n,o,a,b,u,l))),column:g,columnLayoutList:w,containerLayoutList:C}]}else if("hero"===p){const s=m.find((e=>e.region===ae("hero")))?.cards||[];if(s.length){const i=this.heroCardCount;P=[{dataTemplate:y,layoutTemplate:v,cards:s.map((e=>this.convertCardForSuperFeed({...e,placement:void 0},p,h,void 0,t,n,o,a,i))),column:g,columnLayoutList:ue(e?.sections?.[E].subSections,i).subSections}]}else(0,i.H)(r.GX5,"Empty hero card data list",void 0,{...r.GX5.pb,customMessage:`debugId: ${h}, nextPageUrl: ${f}`}),P=[]}}else if("widgets"===p){const s=m.find((e=>e.region===ae("widgets")))?.cards||[];if(s.length){const i=this.widgetsCardCount;P=[{dataTemplate:y,layoutTemplate:v,cards:s.map((e=>this.convertCardForSuperFeed({...e,placement:void 0},p,h,void 0,t,n,o,a,i))),column:g,columnLayoutList:ue(e?.sections?.[R].subSections,i).subSections}]}else(0,i.H)(r.sZS,"Empty widgets card data list",void 0,{...r.sZS.pb,customMessage:`debugId: ${h}, nextPageUrl: ${f}`}),P=[]}else P=d?.map((({dataTemplate:e,layoutTemplate:s,cards:c,column:d,isTopSection:g})=>{if(c){const i={dataTemplate:e,layoutTemplate:s,cards:c.map((e=>this.convertCardForSuperFeed({...e,placement:void 0},p,h,void 0,t,n,o,a,b,u,l))),column:d,isTopSection:g};return this.sectionIndex++,i}"river"===p&&(0,i.H)(r.gEs,"No cards were sent from WPO in river",void 0,{...r.gEs.pb,customMessage:`debugId: ${h}, nextPageUrl: ${f}, column: ${d}, dataTemplate: ${e}, layoutTemplate: ${s}`})})).filter((e=>void 0!==e));return{region:p,requestedColumnCount:g,rowRendering:T,sections:P}})),p.raw1sAdRegionTupleMap=this._raw1sAdRegionTupleMap,p.debugId=h,p},this.mapRegionBasedWpoResponseForWidgets=(e,t)=>{const n=e.serviceContext?e.serviceContext.debugId:e.debugId,i=de(e),{nextPageUrl:r,sections:o,pageContext:a,previews:s}=i;return{nextPageUrl:r,pageContext:a,regions:o.filter((e=>e.region===t)).map((e=>{const{subSections:t,region:i,requestedColumnCount:r}=e,o=t?.map((({dataTemplate:e,layoutTemplate:t,cards:r,column:o,isTopSection:a})=>{if(r){const s={dataTemplate:e,layoutTemplate:t,cards:r.map((e=>this.convertCardForSuperFeed({...e,placement:void 0},i,n))),column:o,isTopSection:a};return this.sectionIndex++,s}})).filter((e=>void 0!==e));return{region:i,requestedColumnCount:r,rowRendering:false,sections:o}})),previews:s,debugId:n}},this.backfill1SAdWithNews=e=>{if(!e.sections?.length)return;const t=e.sections.find((e=>"backup"===e.region))?.subSections?.[0]?.cards,n=e.sections.find((e=>"river"===e.region))?.subSections?.[0]?.cards;n?.forEach(((e,o)=>{(e.type===O.PL.NativeAd&&M.cX.getQueryParameterByName("mockNo1SNative",window.location.href)||e.type===O.PL.CmsAd&&M.cX.getQueryParameterByName("mockNo1SCms",window.location.href))&&(e.data=null),e.type!==O.PL.NativeAd&&e.type!==O.PL.CmsAd||e.data||((0,i.OO)(null,r.paG,`Ad for ${e.type} not found in feed response.`,`cardData: ${JSON.stringify(e)}`),t?.length?n[o]=t.shift():(0,i.OO)(null,r.G78,"Empty backup region"))}))},this.shoppingInfopaneAdV1=e,this.addUxModeToConsumptionCohort=t}setRubyCohort(e){this.rubyCohort=e}setRubyEverSelected(e){this.isRubySelected=e}get raw1sAdRegionTupleMap(){return this._raw1sAdRegionTupleMap||(this._raw1sAdRegionTupleMap=ce()),this._raw1sAdRegionTupleMap}convertCardForSuperFeed(e,t,n,o,a,s=0,c=0,d,u=0,l,p){let h;if((ne.FI.isRuby||this.addUxModeToConsumptionCohort&&this.rubyCohort&&(this.rubyCohort===this.addUxModeToConsumptionCohort||"all"===this.addUxModeToConsumptionCohort)||this.checkIfUserIsEligibleForRuby())&&te(e,ne.FI.isRuby),"river"===t?(this.riverCardCount++,h=this.riverCardCount):"rightrail"===t?(this.rightrailCardCount++,h=this.rightrailCardCount):"Rail"===t?(this.railCardCount++,h=this.railCardCount):"hero"===t?(this.heroCardCount++,h=this.heroCardCount):"widgets"===t&&this.widgetsCardCount++,(ne.FI.isRuby||(0,re.vD)())&&function(e){(e.type===O.PL.Article||e.type===O.PL.Video||e.type===O.PL.Slideshow)&&e.newsNotificationType&&[K.News_BreakingNews,K.News_ForYouNews].includes(e.newsNotificationType)&&(e.type=e.newsNotificationType===K.News_BreakingNews?O.PL.BreakingNewsNotification:O.PL.ForYouNotification)}(e),void 0!==e.wpoRank&&(e.wpoRank+=u),void 0!==e.wpoId&&(e.wpoId+=u),void 0!==e.backupRelatedWpoId&&(e.backupRelatedWpoId+=u),e.type===O.PL.MiTHeroFollow&&0===e.subCards?.length&&(e=>{try{const t=JSON.parse(e.data);if(!t||!t.followList||!t.followList.length)return void(0,i.H)(r.RPj,"MiT Hero Parse Error");t.followList.forEach((t=>{e.subCards.push({id:t.topicId,images:[{title:t.title,url:t.imageUrl}],title:t.title,url:t.clickThroughUrl,type:O.PL.SuggestedInterest,provider:"provider"===t.type&&{profileId:t.topicId},isFollowed:t.isFollowed})}))}catch(e){(0,i.H)(r.RPj,"MiT Hero Parse Error",JSON.stringify(e.errorMessage))}})(e),Object.values(O.PL).includes(e.type)||(0,i.OO)(null,r.nsS,`Region: ${t}, Type: ${e.type}, Id: ${e.id}, WpoId: ${e.wpoId}, WpoRank: ${e.wpoRank}. undefined error, it is not in OneServiceMetadataType`),e.wpoMetadata&&e.wpoMetadata.isGA&&(e.wpoMetadata.cFMetadataType=e.type),e.subCards){let t=X.uq.NotDenseCard;if(e.type===O.PL.Dense&&o===O.PL.Infopane?t=X.uq.IsInfopaneDenseCard:e.type===O.PL.Dense&&o!==O.PL.Infopane&&(t=X.uq.IsRiverDenseCard),e.type===O.PL.Infopane||e.type===O.PL.GroupedContent||e.type===O.PL.ColdStartArticleFreCard||e.type===O.PL.RewardsDailySet||e.type===O.PL.TabbedInfopaneCard||e.type===O.PL.CasualGamesCarousel&&e.subCards.length>0||e.type===O.PL.MiniWidgets&&e.subCards.length>0||e.type===O.PL.TopicFeed&&e.subCards.length>0&&e.id===X.mT||t!==X.uq.NotDenseCard)return this.convertComplexCardForSuperFeed(e,t,n,a,c);if("TopStories"===e.subType)return this.convertNestedCard(e);if(e.type===O.PL.NewsAnswerModule)return this.convertNewsGroupsCard(e)}if(X.Qu?.current?.includes(e.type))return e;if(O.TU.includes(e.type)){let n=h;return"river"===t&&(e.type===O.PL.NativeAd?(this.riverNativeAdRelativeCount++,void 0!==e.wpoAdRank&&(l?l&&this.wpoIdResponseIndex>1&&p?.get(this.wpoIdResponseIndex-1)&&(e.wpoAdRank=e.wpoAdRank+p?.get(this.wpoIdResponseIndex-1)):e.wpoAdRank=this.riverNativeAdRelativeCount)):e.type===O.PL.CmsAd&&(this.riverCmsAdRelativeCount>=s?(e.type=O.PL.NativeAd,this.riverNativeAdRelativeCount++,void 0!==e.wpoAdRank&&(e.wpoAdRank=this.riverNativeAdRelativeCount)):(this.riverCmsAdRelativeCount++,void 0!==e.wpoAdRank&&(e.wpoAdRank=this.riverCmsAdRelativeCount))),a&&(e.type===O.PL.FirstPartyAd?n=1:l?l&&(n=e.wpoAdRank):n=e.type===O.PL.NativeAd?this.riverNativeAdRelativeCount:this.riverCmsAdRelativeCount)),this.convertCardForAds(e,t,n)}try{const{augments:t,type:i,isBreaking:r,locale:o,cardSize:a,category:s,images:c,topics:d=[],dataUrl:u,publishedDateTime:l,id:p,url:h,abstract:g="",title:f="",provider:m={},reasons:y,source:v,feed:S={},actions:w=[],externalVideoFiles:b=[],reactionStatus:C,commentStatus:T,reactionSummary:k,commentSummary:P,sourceId:A,topComments:I,topQuestions:E,highlights:R,colorSamples:M,isLocalContent:x,badges:L,relatedCards:F,recoDocMetadata:D,recoId:_,ri:N,offer:B,subType:U,videoMetadata:$,isWorkNewsContent:H,wpoMetadata:W,panoCaption:G,aiComments:V,height:q,wpoRank:j,wpoId:z,recoReasonTag:K,slides:Q,customTransitionSpeed:J,cardId:Y,displayAttributes:Z,conversationStarters:ee,consumptionSummary:te,backupRelatedWpoId:ne}=e,ie=he(c)||{},re=d.find((e=>e.feedId===S.id&&e.locale===o)),oe=i===O.PL.EventInfopaneShoppingAI?pe(h,/[/?]/):pe(h);let ae=le(m.logoUrl);!ae&&m.logo&&m.logo.url&&(ae=le(m.logo.url));const se=w.map((e=>X.N?.current?.[e]||e));return L&&L.some((e=>"followedPublisher"===e.type))&&se.push("followedPublisher"),{augments:t,id:p,type:i,height:q,wpoRank:j,wpoId:z,cardId:Y,backupRelatedWpoId:ne,metadata:{abstract:g,abstractLength:g.length,titleLength:f.length,category:s||oe[4],subCategory:oe[5],primaryImage:{height:ie.height,width:ie.width},locale:o,feed:{id:S.id},kicker:[S],actions:se,reactionStatus:C,commentStatus:T,reactionSummary:k,commentSummary:P,topComments:I,topQuestions:E,highlights:R,reasons:y,source:v,relatedCards:F,panoCaption:G,topics:d,recoDocMetadata:D,recoId:_,ri:N,debugId:n,videoFiles:b,videoMetadata:$,wpoMetadata:W,recoReasonTag:K,slides:Q,displayAttributes:Z,conversationStarters:ee,consumptionSummary:te},cardContent:{id:p,type:ge(i),title:f,aiComments:V,uriTitle:oe[6],abstract:g,isBreaking:r||0,tags:[re||{}],provider:{id:m.id,name:m.name,logo:{id:ae},profileId:m.profileId,logoUrl:m.logoUrl,subscribable:!1,lightThemeSVGLogo:m.lightThemeSVGLogo,darkThemeSVGLogo:m.darkThemeSVGLogo},category:{product:s,label:void 0},locale:o,images:[{id:le(ie.url),height:ie.height,width:ie.width,caption:ie.title,focalRegion:ie.focalRegion,attribution:ie.attribution,url:ie.url,colorSamples:ie.colorSamples}],panoCaption:G,videoFiles:b,publishedDateTime:l,kicker:f,sourceHref:u,destinationUrl:h,sourceId:A,colorSamples:M,isLocalContent:x,isWorkNewsContent:H,badges:L,topics:d,customTransitionSpeed:J},dynamicCardSize:a}}catch(t){return e}}convertCardForAds(e,t,n){if(e.type===O.PL.NativeAd)return"river"===t?e.data?this.raw1sAdRegionTupleMap.get(this.adRiverRegion).push(e.wpoAdRank||n):this.rawAdRegionTupleMap.get(this.adRiverRegion).push(e.wpoAdRank||n):"rightrail"===t?this.rawAdRegionTupleMap.get("rightrail").push(n):"Rail"===t&&this.rawAdRegionTupleMap.get("Rail").push(n),e.data?{type:O.PL.NativeAd,regionIndex:e.wpoAdRank||n,data:e.data,id:e.id,height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}:{type:O.PL.NativeAd,regionIndex:e.wpoAdRank||n,placement:{items:[]},height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId};if(e.type===O.PL.CmsAd){if("river"===t){let t=this.adRiverRegion;"peekriver"===this.adRiverRegion&&(t="river"),e.data?this.raw1sAdRegionTupleMap.get(`res${t}`).push(e.wpoAdRank||n):this.rawAdRegionTupleMap.get(`res${t}`).push(e.wpoAdRank||n)}return e.data?{type:O.PL.CmsAd,regionIndex:e.wpoAdRank||n,data:e.data,id:e.id,height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}:{type:O.PL.CmsAd,regionIndex:e.wpoAdRank||n,placement:{items:[]},height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}}return e.type===O.PL.FirstPartyAd?("river"===t&&(e.data?this.raw1sAdRegionTupleMap.get("triver").push(e.wpoAdRank||n):this.rawAdRegionTupleMap.get("triver").push(e.wpoAdRank||n)),e.data?{type:O.PL.FirstPartyAd,regionIndex:e.wpoAdRank||n,data:e.data,id:e.id,height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}:{type:O.PL.FirstPartyAd,regionIndex:e.wpoAdRank||n,placement:{items:[]},height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}):e.type===O.PL.AmplifyAd||e.type===O.PL.BoostAdsBanner||e.type===O.PL.BoostAdsCoachmark||e.type===O.PL.EventSDCardAmplifyAds||e.type===O.PL.BoostAd?{type:e.type,regionIndex:e.wpoAdRank||n,data:e.data,id:`${e.type}-${e.section}-${n}`,wpoMetadata:e.wpoMetadata,height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}:void 0}convertComplexCardForSuperFeed(e,t,n,i,r=0){const{id:o,type:a,title:s,wpoMetadata:c}=e;let d,u;try{d=e.subCards.map((e=>{if(t===X.uq.IsInfopaneDenseCard){if(e.type===O.PL.NativeAd)return this.rawAdRegionTupleMap.get("infopane-tab").push(this.infoPaneCardCount),{type:O.PL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}else if(t===X.uq.IsRiverDenseCard){if(this.denseRiverCardCount++,e.type===O.PL.NativeAd)return this.rawAdRegionTupleMap.get("dense-river").push(this.denseRiverCardCount),{type:O.PL.NativeAd,regionIndex:this.denseRiverCardCount,placement:{items:[]}}}else{if(this.infoPaneCardCount++,e.type===O.PL.NativeAd)return this.rawAdRegionTupleMap.get(this.adInfopaneRegion).push(this.infoPaneCardCount),{type:O.PL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}};if(e.type===O.PL.CmsAd){let t=`res${this.adInfopaneRegion}`;return"peekinfopane"===this.adInfopaneRegion&&(t="resinfopane"),this.infopaneCmsAdCount>=r&&(e.type=O.PL.NativeAd,t=this.adInfopaneRegion),this.rawAdRegionTupleMap.get(t).push(this.infoPaneCardCount),{type:e.type,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}if(e.type===O.PL.BuyDirectAd){const t="infopane";return this.rawAdRegionTupleMap.get(t).push(this.infoPaneCardCount),{type:e.type,regionIndex:this.infoPaneCardCount,placement:{isBuyDirect:!0,items:[]}}}if(e.type===O.PL.ShoppingInfopaneAd1||e.type===O.PL.ShoppingInfopaneAd2||e.type===O.PL.ShoppingInfopaneAd3||e.type===O.PL.ShoppingInfopaneAd4)return this.getShoppingInfopaneAd(e);if(e.type===O.PL.EventInfopaneShoppingAI)try{const t=JSON.parse(e.data),n=(0,Z.Z)(t);delete e.data,e={...n,...e}}catch(e){return}}if(e.type===O.PL.Dense||e.type===O.PL.TopicFeed||e.type===O.PL.TabbedInfopaneCardTab){let t=X.uq.IsInfopaneDenseCard;return a!==O.PL.Infopane&&a!==O.PL.TabbedInfopaneCard&&(t=X.uq.IsRiverDenseCard),this.convertComplexCardForSuperFeed(e,t,n,i)}return e.type||a!==O.PL.CasualGamesCarousel||(e.type=`${a}SubItem`),this.convertCardForSuperFeed(e,"none",n,a,i)}))}finally{d=d?.filter((e=>!!e))||[],u={id:o,type:a,subItems:d,metadata:{title:s},wpoMetadata:c,height:e.height,wpoRank:e.wpoRank,wpoId:e.wpoId},e.type===O.PL.TopicFeed&&(u={card:e,id:o,type:a,subItems:d,metadata:{title:s},wpoMetadata:c,feed:e.feed?e.feed:null,height:e.height,wpoRank:e.wpoRank,wpoId:e.wpoId})}return u}convertNestedCard(e){return e.subCards[0].type=e.type,e.subCards[0].subType=e.subType,e=e.subCards[0]}convertNewsGroupsCard(e){return{id:e.id,type:e.type,subType:e.subType,subCards:e.subCards||[],wpoMetadata:e.wpoMetadata,height:e.height,wpoRank:e.wpoRank,wpoId:e.wpoId}}checkIfUserIsEligibleForRuby(){return!!(this.isRubySelected&&(0,ie.Qs)()&&(0,ie.T1)()&&(0,ie.ng)()&&!(0,ie.$m)()&&ne.FI.isRubyEligible)&&((0,i.H)(r.PPA,"User is eligible for Ruby but not hitting ruby"),!0)}resetCardCountForSuperFeed(){this.infoPaneCardCount=0,this.riverCardCount=0,this.heroCardCount=0,this.rightrailCardCount=0,this.railCardCount=0,this.denseRiverCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0,this.widgetsCardCount=0}getShoppingInfopaneAd(e){if(!this.shoppingInfopaneAdV1)return{type:e.type,regionIndex:this.infoPaneCardCount,placement:{items:[],shoppingInfopaneAdData:e.data}};try{const t=JSON.parse(e.data),n=(0,Z.Z)(t.shoppingEntities),i=n.clickPingUrl+`&PageId=${c.M0.getRequestId()}&ct=ShoppingNTPInfopane`,r={title:n.title,destinationUrl:i,imageUrl:n.imageInfo?.sourceImageUrl,providerName:n.seller,adChoiceIconUrl:oe};return{id:n.id??(0,Y.L)(),type:e.type,regionIndex:this.infoPaneCardCount,placement:{items:[r],privacyUrl:oe,isBackfill:!1,showAdLabel:!0,adLabelText:"广告",isShoppingInfopaneAd:!0}}}catch(t){return{type:e.type,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}}updateAdRegionToPeek(e){e?(this.adRiverRegion="peekriver",this.adInfopaneRegion="peekinfopane"):(this.adRiverRegion=E.jG.IsHeroNTP?"riverlock":"river",this.adInfopaneRegion=E.jG.IsHeroNTP?"infopanelock":"infopane")}updateWpoIdResponseIndex(e){this.wpoIdResponseIndex=e}}function ce(){return new Map([["rightrail",[]],["Rail",[]],["infopane",[]],["infopanelock",[]],["peekinfopane",[]],["river",[]],["riverlock",[]],["peekriver",[]],["resinfopane",[]],["resinfopanelock",[]],["respeekinfopane",[]],["resriver",[]],["resriverlock",[]],["respeekriver",[]],["infopane-tab",[]],["dense-river",[]],["triver",[]]])}function de(e){return e?.sections?.[0]?.region?e:{nextPageUrl:e.nextPageUrl,sections:[{region:"river",subSections:e.sections}],previews:e.previews,pageContext:e.pageContext}}const ue=(e,t)=>{e||(e=[]);const n=[];let i=!1;for(const r of e)r?.requestedColumnCount&&(r?.subSections?.forEach((e=>{e.cards||(e.cards=[]),e.cards.forEach((e=>{if("placeholder"===e.type)return e.placeholderId+=t,void(i=!0);e.wpoId+=t,e.wpoRank+=t}))})),n[r.requestedColumnCount-1]=r?.subSections);return{subSections:n,rowRendering:i}};function le(e){if(!e)return"";const t=e.split("/");return he(t)&&t[t.length-1].replace(".img","")}function pe(e,t="/"){return e?e.split(t):[]}function he(e,t=0){if(e)return e[t]}function ge(e){switch(e){case O.PL.Article:return"ArticlePreview";case O.PL.Video:return"VideoPreview";case O.PL.Slideshow:return"SlideshowPreview";case O.PL.WebContent:return"WebContentPreview";default:return""}}var fe=n(77062),me=n(33777),ye=n(6684),ve=n(85663),Se=n(77770),we=n(95378),be=n(90830),Ce=n(13329),Te=n(66651);const ke=1e4,Pe="gaming",Ae="following",Ie="filteredChannels",Ee="dynamicfilteredchannels",Re=["activityId","adminDisabled","adppc","apikey","backgroundImageIsSet","caller","cbypass","column","copilotApiSupported","dhp","dprValue","edgExpMask","inEdgeFeatures","infopaneCount","memory","newDevFreTime","newProfFreTime","overlay","pgc","pgname","pgtype","prerender","promotion","retryAttempt","revertTimes","selection","skipRetry","timeOut","vpSize"];function Me(e,t=[]){if(!e?.serviceContext)return;const n=t.filter((e=>k.Al.CurrentFlightSet.has(e))),o=e.serviceContext.fdHead?.split(",")?.map((e=>e.trim()))??[],a=n.filter((e=>!o.includes(e)));a.length>0&&(0,i.H)(r.YVN,"",void 0,{...r.YVN.pb,cetoRef:e.cetoRef,msEdgeRef:e.msEdgeRef,message:`Flight ids ${a.join(",")} missing in wpo fdhead.`})}function xe(){if(!(0,m.N)()||!window.ssrWpoData)return;const e=window.ssrWpoData;Me(e,["prg-wpo-bkpncbig","prg-wpo-ntpscssr"]);const{debugId:t,serviceContext:n,dddTmpl:o,userType:a,authFeatures:s}=e;if((0,fe.Dz)(t,!0),n?.serviceActivityId){c.M0.addOrUpdateIdxId(n.serviceActivityId,!0);try{const e=(0,me.pD)();(0,h.m)(n.serviceActivityId,t,e)}catch{(0,i.H)(r.evM,"Error throwed when getCompressedRecords doesn't return anything for NTP")}}return c.M0.addOrUpdateTmplString(o),c.M0.addOrUpdateTmplProperty("1s-usertype",a),c.M0.addOrUpdateTmplProperty("1s-authFeatures",s),delete window.ssrWpoData,e}function Le(e){const t=(0,o.Ou)();t[e]=t[e]??(0,o.UE)()}class Fe extends Error{constructor(e,t=!1){super(e),this.silentExit=t}}class De{static#e=this.preloadedResponsesKey=Symbol("preloadedResponses");static get preloadedResponses(){return y.Gq.get(this.preloadedResponsesKey,(()=>({})))}static set preloadedResponses(e){y.Gq.set(this.preloadedResponsesKey,e)}static#t=this.renderedSegmentsKey=Symbol("renderedSegments");static get renderedSegments(){return y.Gq.get(this.renderedSegmentsKey,(()=>""))}static set renderedSegments(e){y.Gq.set(this.renderedSegmentsKey,e)}static#n=this.fetchingLockKey=Symbol("fetchingLock");static get fetchingLock(){return y.Gq.get(this.fetchingLockKey)}static set fetchingLock(e){y.Gq.set(this.fetchingLockKey,e)}static#i=this.isPrerenderDsiabledKey=Symbol("isPrerenderDsiabled");static get isPrerenderDsiabled(){return y.Gq.get(this.isPrerenderDsiabledKey,(()=>!1))}static set isPrerenderDsiabled(e){y.Gq.set(this.isPrerenderDsiabledKey,e)}constructor(e,t,n=5){this.shouldRetryInOtherDomain=!1,this.traceInfo=[],this.shouldResetRightRailPromise=!1,this.wpoRightRailPromise=new J.o,this.shouldResetRailPromise=!1,this.wpoRailPromise=new J.o,this.noContentRetryCount=0,this.maxContentRetryCount=5,this.isPartialResponse=e=>!!(e&&e.serviceContext&&e.serviceContext.preRenderDisabled),this.getAuthTrail=()=>{try{return(0,me.pD)()}catch{(0,i.H)(r.evM,"Error throwed when getCompressedRecords doesn't return anything for NTP")}},this.updateQSParam=(e,t)=>{const n=new RegExp("([?&])"+t+"=.*?(&|$)","i");return e.match(n)?e.replace(n,"&"):e},this.mapperHelper=new se(e.shoppingInfopaneAdV1,e.rubyConsumptionOnCohort),this.config=e,this.initializeRequest(),this.isXFeed=t,this.maxContentRetryCount=n,window.isSSREnabled&&window.ssrRenderedSegments&&(De.renderedSegments=window.ssrRenderedSegments,delete window.ssrRenderedSegments),this.config.feedCacheEnabled&&!window.isSSREnabled&&(this.feedResponseCache=(0,S.q)({cacheName:"wpo-feed",getCacheKey:e=>this.normalizeUrl(e.serviceUrl),maxAgeInMs:this.config.feedCacheMaxAgeInMs}))}static async ensureLock(e=5e3){for(;De.fetchingLock&&!De.fetchingLock.wasSet();)await De.fetchingLock.getResultAsync();y.Gq.get("ssrRequestClosed")||(De.fetchingLock=new J.o(e))}static releaseLock(){De.fetchingLock&&De.fetchingLock.set()}async fetch(e,t,n,o,a,s,c,d){let u,l=this.config.initialRequest;if(this.shouldResetRightRailPromise&&(this.wpoRightRailPromise=new J.o,this.shouldResetRightRailPromise=!1),this.shouldResetRailPromise&&(this.wpoRailPromise=new J.o,this.shouldResetRailPromise=!1),e&&(e.feedId||e.nextPageUrl||!l||(e.feedId=l.feedId),l={...l,...e}),!l)return(0,i.H)(r.eD0,"default WpoService fetch configuration was invalid"),this.responseStatus=T.F_.InvalidRequest,{status:this.responseStatus,isStatic:this.isStatic,regions:void 0,rawAdRegionTupleMap:new Map([["rightRail",[]],["Rail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]])};await De.ensureLock();try{u=await this.fetchRiverSectionFeedLayoutData(l,t,n)}finally{De.releaseLock()}d&&u&&!u.isStatic&&d(u,u.sections,!1);const p=!(l.useNextPageUrl&&l.nextPageUrl);this.config.feedCacheEnabled&&p&&(this.isFeedFirstPageFromCache=(0,S.H)(u)),0===t&&u&&u.serviceContext&&((0,P.l)(u.serviceContext),(0,A.p)(u.serviceContext),k.Al.CurrentFlightSet.has("1s-ads-ntpriver")&&Me(u,["1s-ads-ntpriver","prg-ad-ridoverride"])),0!==t||(0,m.N)()||(u?Ce.SI.saveSSRPartResponse(u,"feed"):(0,i.H)(r.y6M,"",void 0,{...r.y6M.pb,requestId:l.requestId})),(0,I.t)(u);const h=u?.serviceContext?.rubyTargetedVersion;h&&this.mapperHelper.setRubyCohort(h);const g=u?.serviceContext?.rubyEverSelected;return g&&this.mapperHelper.setRubyEverSelected(g),this.handleResponseMapForSuperFeed(l,t,u,o,a,s,c)}async fetchWidgets(e,t="widgets",n,o){let a,s=this.config.initialRequest;if(e&&(e.feedId||e.nextPageUrl||!s||(e.feedId=s.feedId),s={...s,...e}),!s)return(0,i.H)(r.eD0,"default WpoService widgets fetch configuration was invalid"),this.responseStatus=T.F_.InvalidRequest,{status:this.responseStatus,isStatic:this.isStatic,regions:void 0,rawAdRegionTupleMap:new Map};await De.ensureLock();try{a=await this.fetchWidgetSectionFeedLayoutData(s,t,n,o)}finally{De.releaseLock()}return 0!==n||(0,m.N)()||(a?Ce.SI.saveSSRPartResponse(a,t):(0,i.H)(r.y6M,"No response for widget request",void 0,{...r.y6M.pb,requestId:s.requestId})),this.handleResponseMapForWidgets(s,a,t,o)}overrideAppErrorSeverity(e){if("hub"===E.jG.AppType&&[r.vas,r.ck_,r.KEP,r.QJe].includes(e))return a.z.Critical}sendAppErrorWithSeverityOverride(e,t){const n=this.overrideAppErrorSeverity(e);n&&(t.severity=n),t.pb.pageAge=Math.round(performance.now()),c.M0.sendAppErrorEvent(t)}handleResponseMapForSuperFeed(e,t,n,o,a,s,c){if(this.isPartialResponse(n))return{status:this.responseStatus,isStatic:!1,rawAdRegionTupleMap:new Map([["rightRail",[]],["Rail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]]),isPartial:n.isPartial,serviceContext:n.serviceContext,previews:n.previews};const d=new Set(["msft-dense-nine-card"]);n?.sections?.length>0&&"river"===n.sections[0].region&&n.sections[0].subSections?.forEach(((e,t)=>{e.layoutTemplate&&d.has(e.layoutTemplate)&&(n.sections[0].subSections[t].cards=[{type:"densetab",isLocalContent:!1,galleryItemCount:0,subCards:e.cards}]),e?.cards?.length>0&&e.cards.forEach(((e,i)=>{if(e?.type===O.PL.Infopane&&e?.subCards?.[0]?.type===O.PL.TabbedInfopaneCardTab){const r=function(e){const t=[];let n=[];for(let i=0;i<e.length;i++){const r=e[i];if(r.type==O.PL.TabbedInfopaneCardTab)n.push(r);else if(r.type==O.PL.TopicFeed)n.push(r);else{if(n.length>0){const e={type:O.PL.TabbedInfopaneCard,subCards:n};t.push(e),n=[]}t.push(r)}}return t}(e?.subCards);n.sections[0].subSections[t].cards[i]={...e,subCards:r}}}))}));const u=0===t||2===t&&"winWidgets"===E.jG.AppType&&"ruby"===E.jG.UxMode||this.config.enableWpoAdRank&&2===t&&!c.size,l=this.mapperHelper.mapRegionBasedWpoResponseForSuperFeed(n,this.config.useRelativeAdPlacement,o,a,this.config.auctionRidOverride&&!(0,Se.TR)(),this.config.enableHeroWaterfall,s,u,this.config.enableWpoAdRank,c),{nextPageUrl:p,regions:h,rawAdRegionTupleMap:g,raw1sAdRegionTupleMap:f,previews:y,pageContext:v,debugId:S}=l;let w;this.responseStatus===T.F_.Success?(w={...e,nextPageUrl:p},De.updateRenderedSegments(p),this.noContentRetryCount=0):this.responseStatus===T.F_.Failed?(w={...e},this.noContentRetryCount=0):this.responseStatus===T.F_.NoContent&&(this.noContentCannotRetry()||(w={...e},this.noContentRetryCount++),e.disableContent||(0,i.H)(r.a$Z,"",void 0,{...r.a$Z.pb,isFirstPage:!e.nextPageUrl,url:e.nextPageUrl,requestId:e.requestId,status:this.responseStatus,noContentRetryCount:this.noContentRetryCount})),E.jG.IsHeroNTP&&w&&(w.segment=null,w.pageOcid=null,w.scenario=null),this.config.validateDuplicateCards&&(0,m.N)()&&z(h,S,t);return{regions:h,nextPageRequest:w,rawAdRegionTupleMap:g,raw1sAdRegionTupleMap:f,status:this.responseStatus,isStatic:this.isStatic,traceIdIndex:n?.traceIdIndex,metadata:n?.metadata,userType:n?.userType,previews:y,pageContext:v,debugId:S,serviceContext:n?.serviceContext,responseSource:n?.responseSource,locationContextDictionary:n?.locationContextDictionary,isFromCache:n?.isFromCache}}handleResponseMapForWidgets(e,t,n,i){if(!t)return;if(this.isPartialResponse(t))return{status:this.responseStatus,isStatic:!1,isPartial:t.isPartial,serviceContext:t.serviceContext,previews:t.previews};let r;r=i?this.mapperHelper.mapRegionBasedWpoResponseForSuperFeed(t):this.mapperHelper.mapRegionBasedWpoResponseForWidgets(t,n);const{nextPageUrl:o,regions:a,previews:s,pageContext:d,debugId:u}=r;let l;this.responseStatus===T.F_.Success?(l={...e,nextPageUrl:o},De.updateRenderedSegments(o),this.noContentRetryCount=0):this.responseStatus===T.F_.Failed?(l={...e},this.noContentRetryCount=0):this.responseStatus===T.F_.NoContent&&(this.noContentCannotRetry()||(l={...e},this.noContentRetryCount++),c.M0.addOrUpdateTmplProperty(`${n}SectionEmpty`,"1")),E.jG.IsHeroNTP&&l&&(l.segment=null,l.pageOcid=null,l.scenario=null);return{regions:a,nextPageRequest:l,status:this.responseStatus,isStatic:this.isStatic,traceIdIndex:t?t.traceIdIndex:void 0,metadata:t?t.metadata:void 0,userType:t?t.userType:void 0,previews:s,pageContext:d,debugId:u,serviceContext:t?t.serviceContext:void 0,responseSource:t?t.responseSource:void 0}}async fetchRiverSectionFeedLayoutData(e,t,n){const a=k.Al?.IsPrerender||this.config.disableWorker||E.jG.IsHeroNTP,s=0===t||2===t;if((0,m.N)()&&s){const t=xe(),n=this.trySaveAndConsumePreloadedResponse(t,"feed");if(n)return n&&n&&n.sections&&n.sections.length>0?this.responseStatus=T.F_.Success:this.responseStatus=T.F_.NoContent,c.M0.addOrUpdateTmplProperty("SSRFeedConsumed","1"),y.Gq.set("__isSSRWpoFeedConsumed__",!0),{...n,responseSource:T.H3.FromSSR};if(!y.Gq.has("__isSSRWpoFeedConsumed__")&&window.ssrLayoutState?.selectedFeedDisplaySetting){const t=window.ssrLayoutState.selectedFeedDisplaySetting;["off","onscroll","headingsonly"].includes(t)||(0,i.H)(r.W1B,"",void 0,{...r.W1B.pb,requestId:e.requestId})}}if(0!==t||this.isXFeed||a||e.feedName===Pe&&e.dontUseWorkerForFeed)this.checkWebWorkerUrl=!1;else{this.checkWebWorkerUrl=!1;let t="myfeed";e.feedName===Pe&&(t="gaming"),e.feedName===Ae&&(t="following");const i=this.config.removeTimeoutWebworker?void 0:1e3;n&&n();const r=await(0,R.ot)({id:t},i),a=r&&r.payload;if(a){const e=g.sj.MultiColumn;if(g.sj.MultiColumn===e&&r.fetched){this.checkWebWorkerUrl=!0,this.responseStatus=T.F_.Success;(0,o.Ou)().isFeedFromWW=1;const e=a.traceId;if(a.traceIdIndex=this.addOrUpdateIdxId(e,s),(0,m.N)()){const e=this.getAuthTrail();(0,h.m)(a.traceId,a.debugId,e)}return a.tmpl&&c.M0.addOrUpdateTmplString(a.tmpl),u.n.publish(u.j.userIsSignedIn,{isSignedIn:a.isSignedIn,src:"WW-wcp"}),{...a,responseSource:T.H3.FromWW}}}}const l=(0,o.Ou)();if((Ce.SI.enableEarlyMainFeedRequest||De.preloadedResponses.feed)&&(0===t||2===t)){const t=(0,m.N)()?ke:void 0,i=De.preloadedResponses.feed?void 0:await Ce.SI.getEarlyWpoFeedData(t),r=this.trySaveAndConsumePreloadedResponse(i,"feed");if(Le("earlyFeedCall"),this.responseStatus=r?.responseStatus,r&&r&&r.sections&&r.sections.length>0){this.responseStatus=T.F_.Success;const e=r.serviceContext?.serviceActivityId;e&&(r.traceIdIndex=this.addOrUpdateIdxId(e,s)),Le("earlyFeedSuccess")}else this.responseStatus=T.F_.NoContent;Ce.SI.enableEarlyMainFeedRequest=!1;const o=E.jG.IsHeroNTP&&r?.isStatic,a=this.responseStatus!==T.F_.Success||o;if(e.skipRetry||!(0,m.N)()||!a)return Le("ssrEarlyFeedUsed"),l.responseSource=T.H3.FromEarlyResponse,(0,be.t)(r?.authContext),{...r,responseSource:T.H3.FromEarlyResponse};{const t=await this.fetchFromWpoService(e,s,n,o,void 0,this.feedResponseCache);if(t)return l.responseSource=(0,S.H)(t)?T.H3.FromCache:T.H3.FromServer,{...t,responseSource:T.H3.FromServer}}}else{const i=await this.fetchFromWpoService(e,s,n,void 0,void 0,this.feedResponseCache,t);if(e.widgetsOn&&s&&this.trySaveAndConsumePreloadedResponse(i,"feed"),i)return l.responseSource=(0,S.H)(i)?T.H3.FromCache:T.H3.FromServer,{...i,responseSource:T.H3.FromServer}}if(this.shouldRetryInOtherDomain){e.domainOverride=d.hM,e.requestPathOverride=d.hZ;const t=await this.fetchFromWpoService(e,s,void 0,!0);if(t)return l.responseSource=T.H3.FromServer,{...t,responseSource:T.H3.FromServer}}return this.getCachedResponse(e)}async fetchWidgetSectionFeedLayoutData(e,t,n,i){const r=0===n||2===n;if((0,m.N)()&&r&&!i){const e=xe(),n=this.trySaveAndConsumePreloadedResponse(e,t);if(n)return n&&n&&n.sections&&n.sections.length>0?this.responseStatus=T.F_.Success:this.responseStatus=T.F_.NoContent,{...n,responseSource:T.H3.FromSSR}}const a=(0,o.Ou)();if((Ce.SI.enableEarlyMainFeedRequest||De.preloadedResponses[t])&&(0===n||2===n)&&!i){const n=(0,m.N)()?ke:void 0,i=De.preloadedResponses[t]?void 0:await Ce.SI.getEarlyWpoFeedData(n);Le("earlyFeedCall");const o=this.trySaveAndConsumePreloadedResponse(i,t);this.responseStatus=o?.responseStatus,o&&o&&o.sections&&o.sections.length>0?(this.responseStatus=T.F_.Success,Le("earlyFeedSuccess")):this.responseStatus=T.F_.NoContent,Ce.SI.enableEarlyMainFeedRequest=!1;const s=this.responseStatus!==T.F_.Success;if(e.skipRetry||!(0,m.N)()||!s)return Le("ssrEarlyFeedUsed"),a.responseSource=T.H3.FromEarlyResponse,{...o,responseSource:T.H3.FromEarlyResponse};{const t=await this.fetchFromWpoService(e,r);if(t)return a.responseSource=T.H3.FromServer,{...t,responseSource:T.H3.FromServer}}}else{const t=await this.fetchFromWpoService(e,r);if(t)return a.responseSource=T.H3.FromServer,{...t,responseSource:T.H3.FromServer}}if(this.shouldRetryInOtherDomain){e.domainOverride=d.hM,e.requestPathOverride=d.hZ;const t=await this.fetchFromWpoService(e,r,void 0,!0);if(t)return a.responseSource=T.H3.FromServer,{...t,responseSource:T.H3.FromServer}}return this.getCachedResponse(e)}trySaveAndConsumePreloadedResponse(e,t){if(De.preloadedResponses[t]){const e=De.preloadedResponses[t];return delete De.preloadedResponses[t],e}if(!e)return null;const n=e.sections,i=this.isPartialResponse(e),r=E.jG.IsHeroNTP&&!k.Al.CurrentFlightSet.has("prg-hero-abnav")&&!((0,v.zp)()?.toLowerCase()?.includes("ocid=wind_spot_2")||(0,v.zp)()?.toLowerCase()?.includes("ocid=wind_spot_desktop")),o=e=>"widgets"===e||"cardData_widgets"===e,a=n?.filter((({region:e})=>r?!o(e):!o(e)&&"hero"!==e)),s=n?.filter((({region:e})=>"hero"===e)),c=n?.filter((({region:e})=>"widgets"===e));De.preloadedResponses={feed:a?.length||i&&"feed"===t?{...e,sections:a}:null,hero:s?.length?{...e,sections:s}:null,widgets:c?.length?{...e,sections:c}:null};const d=De.preloadedResponses[t];return delete De.preloadedResponses[t],d}async fetchFromWpoService(e,t,n,a=!1,u,g,f){if(y.Gq.get("ssrRequestClosed"))throw new Fe("Fetch aborted due to SSR request close",!0);const S=k.Al?.IsPrerender,P=(0,Se.TR)();!(0,m.N)()&&this.config.requestToOrigin&&(e.domainOverride=d.hM,e.requestPathOverride=d.hZ),this.config.enableResetServiceURL&&(e.domainOverride=d.kJ);const A=!t&&e.paginationTimeoutMs?e.paginationTimeoutMs:e.timeoutMs,I=P&&t?2e3:A,O=E.jG.ShouldUseFdheadQsp?E.jG.CurrentRequestTargetScope?.pageExperiments?.join(","):void 0;let N;c.M0.addOrUpdateTmplProperty("fdHeadWpoCardProv",E.jG.ShouldUseFdheadQsp?.toString()),(0,m.N)()&&(N=!(window&&window.chrome&&window.chrome.embeddedSearch),c.M0.addOrUpdateTmplProperty("privatew",`${N}`));const B=window&&`${window.innerWidth}x${window.innerHeight}`;De.renderedSegments&&(e.renderedSegments=De.renderedSegments);const H={...e,audienceMode:E.jG.CurrentRequestTargetScope?.audienceMode,enableRightRailColumn:e.powerRightRailWithWpo,fdhead:O,isXFeed:this.isXFeed,nextPageUrl:e.useNextPageUrl&&e.nextPageUrl,requestType:l.xd.wpoService,timeoutMs:e.query&&e.customFeedTimeoutMs?e.customFeedTimeoutMs:I,refreshType:P?"bgtask":void 0,isDhp:this.isDhp(),isRetry:a,private:N,viewportSize:B,enableWpoAdPlacements:this.config.auctionRidOverride&&!P,adsTimeout:this.config.auctionRidOverride&&600,uxMode:E.jG.UxMode};if(t&&E.jG.IsHeroNTP){H.pageOcid=M.cX.getQueryParameterByName("ocid",(0,v.zp)());const e=M.cX.getQueryParameterByName("segment",(0,v.zp)());H.segment=e,("edgeChromium"===E.jG.AppType&&k.Al.CurrentFlightSet?.has("ntp-cxtfd-hero")||"homePage"===E.jG.AppType&&k.Al.CurrentFlightSet?.has("hp-cxtfd-hero"))&&(H.context=M.cX.getQueryParameterByName("context",(0,v.zp)())??e),H.scenario=M.cX.getQueryParameterByName("scenario",(0,v.zp)()),"wind_spot_2"!==H.pageOcid&&"wind_spot_desktop"!==H.pageOcid&&"cegrowth"!==H.segment?.toLowerCase()||(H.assetId=M.cX.getQueryParameterByName("assetId",(0,v.zp)())),H.timeoutMs=this.config.heroTimeoutMs||1500;const t=M.cX.getQueryParameterByName("Date",(0,v.zp)()),n=(0,ye.wE)(t,this.config.enableStartMonday);Array.isArray(n)&&n.length>0&&(H.calendarDate=t.split("-").join(""),H.calendarStartDate=n[0],H.calendarEndDate=n[1]),H.scenario&&(0,m.N)()&&"Weather"===H.segment&&"Calendar"!==H.scenario&&setTimeout((()=>{const e=this.updateQSParam(window.location.href,"scenario");window.history.replaceState({},"",e)}),3e3)}if("winWidgets"===E.jG.AppType&&"ruby"===E.jG.UxMode)if("startfeed"!==k.Al?.ClientSettings?.pagetype)H.enableRuby=!0;else{const e=Te.gL.get(2)?"api":"bgRefresh";H.refreshType=0===f?"init":e}const q=M.cX.getQueryParameterByName("ssrFeedTimeOut",window.location.href);!(0,m.N)()&&q&&(H.timeoutMs=parseInt(q)),H.dprValue=Math.round(100*(0,v.x_)())/100;const z=await p.q.requestInit(H),K=await p.q.buildServiceRequestURL(H);w.$D.addTelemetryTracingQueryParam(K);const J=decodeURIComponent(K.href);this.requestQueryParams=new x.h(K.search),e.serviceUrl=J;if("1"===M.cX.getQueryParameterByName("logwporeq",window.location.href)){const e={};new Headers(z?.headers).forEach(((t,n)=>{"Cookie"!==n&&(e[n]=t)})),(0,i.H)(r.vif,"",void 0,{...r.vif.pb,headers:JSON.stringify(e),url:J,credentials:z.credentials,referrer:z.referrer})}const X=(0,o.Ou)();let Y;if(X.WpoCallStart=Math.round((0,o.UE)()),(0,m.N)()||(X.wpoSSRCallStart=X.WpoCallStart),K.search=this.requestQueryParams.toString(),this.checkWebWorkerUrl){const e=(0,R.Fr)("WebWorkerInitFeedUrl");e&&e.payload&&e.payload!==K.href&&(0,i.H)(r.MUC,"Wpo feed fetch url does not match web worker")}const Z=e.useNextPageUrl&&e.nextPageUrl,ee=!Z;let te,ne,ie,re,oe,ae;try{let d,l,p,f,v,C;if((0,m.N)()?(d=e?.overrideCSRTimeoutInMs||ke,oe=Math.round(performance.now())):d=e?.overrideSSRTimeoutInMs||800,n&&n(),g&&(ee||this.isFeedFirstPageFromCache)&&"reload"!==performance.getEntriesByType("navigation")?.[0]?.type&&(l=await g.tryReadCache(e),ee&&(this.isFeedFirstPageFromCache=!!l)),!l){ae=(()=>{let e=0;const t=ee?r.TRT:r.TzH;return window.setInterval((()=>{e+=1,(0,i.H)(t,`Request didn't finish in ${5e3*e}ms`,void 0,{...t.pb,url:J,isFirstPage:ee,activityId:E.jG.ActivityId,isPrerender:P})}),5e3)})();"header"===y.Gq.get("oneSvcUniTunMode")&&z&&z.headers&&(z.headers[L.Yu.uniFeatTun]=await w.$D.getUniFeatTunHeader());const t=(0,b.w)(((t,n)=>{const i=n||J;return(0,m.N)()?(0,b.O)(i,z,d,e.skipRetry):(0,F.Sm)(i,d,z,void 0,void 0,!0)}),"WpoCardProvider.fetch",d,e.skipRetry,J);if(u&&setTimeout((()=>u.set()),0),l=await t,ae&&(clearInterval(ae),ae=null),(g||this.canUseWpoCache())&&l&&l.ok&&!Oe(l)){const t=l.clone();window.requestIdleCallback((()=>{this.addResponseToCache(J,t),g&&g.writeCache(t,e)}))}}if(l){if("1"===M.cX.getQueryParameterByName("logwpores",window.location.href)){const e={};l.headers?.forEach(((t,n)=>e[n]=t)),(0,i.H)(r.v5s,"",void 0,{...r.v5s.pb,headers:JSON.stringify(e),reqHeaders:JSON.stringify(z.headers),ok:l.ok,status:l.statusText,body:l.body})}const{ok:n,status:o,statusText:a,headers:s}=l;if(te=s&&s.get("ddd-debugid"),ne=s&&s.get("x-ceto-ref"),ie=s&&s.get("x-msedge-ref"),re=s&&s.get("ddd-auth-features"),this.rawFetchCallResponse=`{ status: ${o}, url: ${l.url}, debugId: ${te} }`,y.Gq.set("OneServiceResponseDebugId",te),e.feedName===Ae){const n=new URLSearchParams(K.search),a="activityId",s=n.get(a)||"";if(s&&s!=E.jG.ActivityId&&(0,i.H)(r.jQb,"ActivityId mismatched",void 0,{...r.jQb.pb,clientActivityId:E.jG.ActivityId,serviceSideActivityId:s,debugId:te}),(204===o||404===o)&&ee&&t&&!e.feedId){const e=Q;return 204===o&&e?.sections?.[0].subSections?.[0].cards?.[0]&&(e.sections[0].subSections[0].cards[0].isShowSelectMoreMessage=!0),e}}n?e.disableContent||204!==o||(p=ee?r.bri:r.e88,C=!1):(p=e.disableContent?r.k28:ee?r.vas:r.azB,"outlookchannels"===e.feedName&&500===o&&(p=r.SPE),f=o,v=a,C=!0)}else p=e.disableContent?r.k28:ee?r.vas:r.azB,C=!0;const k=Oe(l);if(p){const e=(0,we.Z)(z,"headers.Authorization"),t=l?.headers?.get("ddd-auth-features"),n=t?.includes("IsBot:1"),i={...p,pb:{...p.pb,url:decodeURIComponent(K.href),requestHeaders:JSON.stringify(e&&e.headers),status:f,statusText:v,isFirstPage:ee,activityId:E.jG.ActivityId,isBot:n,isStatic:k,isInitializedAsPrerenderPage:S,isPrerender:P,isRetriedRequest:a,debugId:te,requestStart:oe}};if(this.sendAppErrorWithSeverityOverride(p,i),C)return void(this.responseStatus=T.F_.Failed);if(!(0,m.N)()&&p===r.bri)return void(this.responseStatus=T.F_.NoContent)}let A,I,R;if(l.headers){if(k){const t=l.headers&&l.headers.get("X-Staticfallback-Reason");let n=r.vCG;P?n=r.V_e:E.jG.IsHeroNTP&&!a&&(n=r.NW0),!e.disableContent&&(0,i.H)(n,"Fell back to static content on the feeds call",void 0,{...n.pb,url:decodeURIComponent(K.href),isFirstPage:ee,activityId:E.jG.ActivityId,isPrerender:P,isInitializedAsPrerenderPage:S,debugId:te,isRetriedRequest:a,staticsFallbackReason:t}),this.isStatic=!0}else{const e=l.headers?.get(L.rD.digitalId);(0,be.t)(e)}if(I=l.headers.get(L.rD.userType),e.feedName!==Ie&&e.feedName!==Ee){c.M0.addOrUpdateCustomProperty("debugId",te),c.M0.addOrUpdateTmplProperty("1s-usertype",I),c.M0.addOrUpdateTmplProperty("1s-authFeatures",re);const e=l.headers.get(L.rD.traceId);if(A=this.addOrUpdateIdxId(e,t),(0,fe.Dz)(te,!1),(0,m.N)()){const t=this.getAuthTrail();(0,h.m)(e,te,t)}}t&&function(e){if(!e)return;const t=(0,o.Ou)(),n=e.match(/wpo;\s*dur=(\d+)(,|$)/)?.[1]||"";n&&(t.wpoServerTiming=parseInt(n));const i=e.match(/1s;\s*dur=(\d+)(,|$)/)?.[1]||"";i&&(t.oneServiceServerTiming=parseInt(i))}(l.headers.get("server-timing")||"")}if(!Z){const e=X.WpoCallStart,t=X.WpoResponseBack=Math.round((0,o.UE)());X["FeedRequest.FG"]=t-e,(0,s.QP)({name:"FeedRequest.FG",startTime:e,endTime:t})}if(![r.bri,r.e88,r.RSD].includes(p)){const n=(0,m.N)()&&(0,o.UE)();if(Y=await l.json(),(0,be.t)(Y?.authContext),Y&&Y.serviceContext&&Y.serviceContext.tmpl&&(R=Y.serviceContext.tmpl,c.M0.addOrUpdateTmplString(R)),Y&&l&&(Y.isFromCache=l.isFromCache),n&&X&&(X.FeedResponseJsonReadTime=Math.round((0,o.UE)()-n)),Y?.swCacheEnabled){(0,i.H)(r.Y6E,"Service Worker Cached Data Triggered",void 0,{...r.Y6E.pb,url:decodeURIComponent(K.href),isFirstPage:ee,activityId:E.jG.ActivityId,isPrerender:P,isInitializedAsPrerenderPage:S,debugId:te,isRetriedRequest:a,cacheAgeSeconds:Y.cacheAgeSeconds});let e=null,t="";switch(Y?.cacheTriggeredReason){case r.RDJ.id:e=r.RDJ,t="Service Worker Triggered due to fetch error: "+Y.cacheTriggeredErrorMessage;break;case r.Nyv.id:e=r.Nyv,t="Service Worker Triggered due to wpo service error";break;case r.Vm4.id:e=r.Vm4,t="Service Worker Triggered due to Status 204 no content";break;case r.npe.id:e=r.npe,t="Service Worker Triggered due to static content loaded";break;case r.Q0t.id:e=r.Q0t,t="Service Worker Triggered due to wpo service returns empty section";break;case r.dAd.id:e=r.dAd,t="Service Worker Triggered due to static fallback returns empty section";break;case r.zo9.id:e=r.zo9,t="Service Worker Triggered due to network timeout"}e&&(0,i.H)(e,t,void 0,{...e.pb,url:decodeURIComponent(K.href),isFirstPage:ee,activityId:E.jG.ActivityId,isPrerender:P,isInitializedAsPrerenderPage:S,isRetriedRequest:a,cacheAgeSeconds:Y.cacheAgeSeconds,staticsFallbackReason:Y.staticsFallbackReason,debugId:Y.originalDebugId,cachedResponseDebugId:te})}if(Y.traceIdIndex=A,Y.userType=I,Y.debugId=te,Y.cetoRef=ne,Y.msEdgeRef=ie,Y.authFeatures=re,Y.dddTmpl=R,e.feedName===Ae&&200===l.status&&ee&&t){const e=Q;if(!(Y.sections&&Y.sections.some((e=>"river"===e.region)))&&Y.sections&&e&&e.sections&&e.sections.length){const t=Y.sections.filter((e=>"overlay"===e.region));t&&t.length&&Y.sections.push(e.sections[0])}}if(e.feedName===Pe&&200===l.status&&ee&&t&&(0,m.N)()&&Y.serviceContext?.tmpl&&!(0,D.$o)().getObject("gaming-feed-engagement"))try{const e=Math.floor((new Date).getTime()/1e3),t=Y.serviceContext.tmpl.split(";"),n={};for(let e=0;e<t.length;e++)t[e].includes("gamingFeedEngagementCount30D")&&t[e].split(",").forEach((e=>{const t=e.split(":"),[i,r]=t,o=r?Number.parseInt(r,10):null;"gamingFeedEngagementSum7D"!==i&&"gamingFeedEngagementCount7D"!==i&&"gamingFeedEngagementSum30D"!==i&&"gamingFeedEngagementCount30D"!==i||null===o||(n[i]=o)}));n.lastUpdated=e;const i=5;Object.keys(n).length===i&&(0,D.$o)().setObject("gaming-feed-engagement",n)}catch(e){}if(!(e.feedName===Ae||e.feedName===Ie||e.feedName===Ee||e.disableContent||this.isPartialResponse(Y)||Y.sections&&Y.sections.length>0)){const e=k?r.hqX:r.Fh_;(0,i.H)(e,"Empty Section on the feed call",void 0,{...e.pb,url:decodeURIComponent(K.href),isFirstPage:ee,activityId:E.jG.ActivityId,isPrerender:P,isInitializedAsPrerenderPage:S,debugId:te,isRetriedRequest:a})}}}catch(t){ae&&(clearInterval(ae),ae=null);const n=["Service Request Timed out","Fetch for https://"],i=["TypeError: Failed to fetch"];let o;const s=(0,C.fK)();if(this.shouldRetryInOtherDomain=ee&&!e.domainOverride&&!s&&!(!(0,m.N)()&&this.config.requestToOrigin),n.some((e=>t?.message?.includes(e)))){const e=P?r.LLm:r.KEP;o=ee?e:r.VPR,o===r.KEP&&this.shouldRetryInOtherDomain&&!a&&(o=r.YLV)}else o=i.some((e=>t?.message?.includes(e)))?this.shouldRetryInOtherDomain?r.iB1:r.ck_:this.shouldRetryInOtherDomain?r.CDI:r.QJe;const c=(0,we.Z)(z,"headers.Authorization"),d={...o,message:"Error while fetching WpoService response",pb:{...o.pb,customMessage:`Error: ${t}`,url:decodeURIComponent(K.href),requestHeaders:JSON.stringify(c.headers),isFirstPage:ee,activityId:E.jG.ActivityId,isPrerender:P,isInitializedAsPrerenderPage:S,domainOverride:e.domainOverride??"",isRetry:this.shouldRetryInOtherDomain,debugId:te,isRetriedRequest:a,isRetryBackupDomainFlight:s,requestStart:oe}};return this.sendAppErrorWithSeverityOverride(o,d),void(this.responseStatus=T.F_.Failed)}this.jsonResponseFromWPO=null;const se=this.isPartialResponse(Y);if(De.isPrerenderDsiabled=se,Y&&Y&&Y.sections&&Y.sections.length>0||se){this.responseStatus=T.F_.Success;const n=Y?.sections?.map(((e,t)=>e?.region));this.jsonResponseFromWPO=JSON.stringify(n),!this.isStatic&&t&&"default"===e.feedName&&E.jG.IsHeroNTP&&((e,t)=>{const n=(M.cX.getQueryParameterByName("segment",(0,v.zp)())||"").toLowerCase(),o=e.sections.find((e=>"hero"===e.region));if(o&&o.subSections?.length)try{if((e=>!e?.subSections?.[0]?.dataTemplate&&!e?.subSections?.[0]?.layoutTemplate)(o))return U({jsonResponse:e,heroSection:o,segment:n,decodedServiceUrl:t});const a=o.subSections[0].layoutTemplate,s=V.get(a),c=s?.supportedSegments?.includes(n),d=s?.cardCount===o.subSections[0].cards?.length,u=W.get(n);let l=!0,p=!1;o.subSections[0].cards?.map((e=>{u&&u.has(e.type)||(G.includes(e.type)?p=!0:l=!1)})),p&&(0,i.H)(r.uud,`Hero card backfilled - ${n}`,void 0,{...r.uud.pb,templateName:a,cardsInResponse:JSON.stringify(o.subSections[0].cards.map((e=>e.type))),debugId:e.debugId,isValidTemplateForThisSegment:c,isCorrectCardCount:d,isValidCardTypes:l}),c&&d&&l||(0,i.H)(r.jty,"Invalid Hero Response",void 0,{...r.jty.pb,templateName:a,cardsInResponse:JSON.stringify(o.subSections[0].cards.map((e=>e.type))),debugId:e.debugId,isValidTemplateForThisSegment:c,isCorrectCardCount:d,isValidCardTypes:l,hasBackfilled:p})}catch(t){(0,i.H)(r.jty,"Invalid Hero Response",t.message,{...r.jty.pb,debugId:e.debugId})}else{const r=e.sections.find((e=>"river"===e.region))?"Missing hero section in WPO response.":"Missing hero and river section in WPO response.",o=$(n);if((0,i.H)(o,"Missing Hero Region",`${r} Debug id: ${e.debugId}`,{...o.pb,requestUrl:t,statusCode:e.statusCode}),"homePage"===E.jG.AppType&&(0,_.Nm)(k.Al?.ClientSettings?.ocid)){const e=new URL(window.location.href),t=e.searchParams.get("cm");e.search="",e.searchParams.set("ocid","windirect"),t&&e.searchParams.set("cm",t),window.location.href=e.toString()}}})(Y,J),!this.isStatic&&e.widgetsOn&&!e.renderedSegments&&this.config?.enableWidgetsRegion&&(j(Y,t),Y.sections?.forEach((e=>{"widgets"===e.region&&e.subSections?.length&&e.subSections[0].cards?.length&&e.subSections[0].cards.length>0&&e.subSections[0].cards.length<5&&(e.subSections[0].dataTemplate+="-"+e.subSections[0].cards.length,e.subSections[0].layoutTemplate+="-"+e.subSections[0].cards.length)})))}else{this.responseStatus=T.F_.NoContent;const n=t&&e.disableContent&&e.widgetsOn&&!E.jG.IsHeroNTP;if(e.widgetsOn&&(!e.renderedSegments||n)&&this.config?.enableWidgetsRegion&&j(Y,t),!(0,m.N)())return Y?.serviceContext?.emptyFeedReasons?.includes("InsufficientResponseCausedByMutePub")?Y:void 0}return!this.config.auctionRidOverride||(0,Se.TR)()||(0,m.N)()||this.mapperHelper.backfill1SAdWithNews(Y),Y}async getCachedResponse(e){if(this.canUseWpoCache())try{const t=await caches.open("edgenext-river-V1");if(!t)return;const n=this.normalizeUrl(e.serviceUrl),a=await t.keys()||[],s=a.filter((e=>e.url&&this.normalizeUrl(e.url)===n));for(const e of s)try{const n=await t.match(e.url);if(!n)return;const a=await n.json();if(a){const e=Date.parse(n.headers?.get("date")),t=isNaN(e)?"":(Date.now()-e)/1e3;return(0,i.H)(r.Smg,"Cached WPO response returned in main thread",void 0,{...r.Smg.pb,cacheAgeSeconds:t}),this.responseStatus=T.F_.Success,(0,o.Ou)().responseSource=T.H3.FromCache,{...a,responseSource:T.H3.FromCache,appError:r.Smg}}}catch(e){}(0,i.H)(r.Rgo,"",void 0,{...r.Rgo.pb,numCachedRequests:a.length,numMatches:s.length,serviceUrl:e.serviceUrl})}catch(t){(0,i.H)(r.Rgo,"An error occurred while retrieving a cached response. "+t.message,void 0,{...r.Rgo.pb,isFirstPage:!e.nextPageUrl,url:e.serviceUrl,requestId:e.requestId,stack:t.stack})}}normalizeUrl(e){try{const t=new URL(e);Re.forEach((e=>t.searchParams.delete(e)));return decodeURIComponent(t.toString()).replace("/serviceak/","/service/").replace("api.msn.com/","assets.msn.com/").replace("api.msn.cn/","assets.msn.cn/")}catch(e){return""}}clearCache(){this.mapperHelper.resetCardCountForSuperFeed()}static clearRenderedSegments(){De.renderedSegments=""}initializeRequest(){const{initialRequest:e}=this.config;null!==e&&(0,ve.isNullOrUndefined)(e.useNextPageUrl)&&(e.useNextPageUrl=!0)}addOrUpdateIdxId(e,t){return c.M0.addOrUpdateIdxId(e,t)}getResponseStatus(){return this.responseStatus}getIsStatic(){return this.isStatic}_requestQueryParams(){return this.requestQueryParams}isDhp(){return window.location.search?.indexOf("startpage=1")>-1}noContentCannotRetry(){return this.noContentRetryCount>=this.maxContentRetryCount}static updateRenderedSegments(e){e&&(De.renderedSegments=new URL(e).searchParams.get("renderedSegments"))}updateMapperHelperIsNTPPeek(e){this.mapperHelper.updateAdRegionToPeek(e)}getWpoIdResponseIndex(){return this.mapperHelper.wpoIdResponseIndex}addResponseToCache(e,t){this.canUseWpoCache()&&caches.open("edgenext-river-V1").then((n=>{if(!n)return;const i=this.normalizeUrl(e);n.put(i,t.clone())})).catch((()=>{}))}canUseWpoCache(){return(0,m.N)()&&!!(0,f.i9)()}}const Oe=e=>e?.headers?.get("X-Statics-Fallback")},95438:function(e,t,n){var i,r,o;n.d(t,{F_:function(){return i},H3:function(){return r}}),function(e){e[e.InvalidRequest=0]="InvalidRequest",e[e.Success=1]="Success",e[e.NoContent=2]="NoContent",e[e.Failed=3]="Failed"}(i||(i={})),function(e){e[e.FromSSR=0]="FromSSR",e[e.FromCache=1]="FromCache",e[e.FromWW=2]="FromWW",e[e.FromEarlyResponse=3]="FromEarlyResponse",e[e.FromServer=4]="FromServer"}(r||(r={})),function(e){e.river="river",e.rightRail="rightrail",e.Rail="Rail"}(o||(o={}))},29871:function(e,t,n){n.d(t,{N:function(){return s},Qu:function(){return c},mT:function(){return o},uq:function(){return a}});var i=n(34800),r=n(52185);const o="CanonicalName-watch-shorts";var a;!function(e){e[e.IsInfopaneDenseCard=0]="IsInfopaneDenseCard",e[e.IsRiverDenseCard=1]="IsRiverDenseCard",e[e.NotDenseCard=2]="NotDenseCard"}(a||(a={}));const s=(0,r.TG)({liked:"like",unliked:"unlike",saved:"save"}),c=(0,r.TG)([i.PL.AutosCarousel,i.PL.AutosEntityList,i.PL.BeaconProviderUpsell,i.PL.BingDailyQuizCard,i.PL.BingHealthCovid19StatsCard,i.PL.BingHealthFitnessCard,i.PL.BingVideoCarousel,i.PL.BreakingNewsNotification,i.PL.CasualGamesCarousel,i.PL.ChannelCarousel,i.PL.ChannelFilterCard,i.PL.CommunityCard,i.PL.CommuteCard,i.PL.CreatorSpotlight,i.PL.DailyBriefCard,i.PL.DailyGreetingCard,i.PL.DailyMomentsCard,i.PL.DailyMomentsCard1,i.PL.DailyMomentsCard2,i.PL.DailyMomentsCard3,i.PL.DailyQuizSdCard,i.PL.DailyWonderCard,i.PL.DailyWonderCopilotCard,i.PL.DailyWonderHeroVideo,i.PL.DailyWonderQuoteCard,i.PL.DailyWonderVideoListCard,i.PL.DigestCard,i.PL.DonationNpoCard,i.PL.DynamicFilteredChannel,i.PL.EdgeShoppingCard,i.PL.Elections,i.PL.EntertainmentPremierCard,i.PL.EsportsCasualGames,i.PL.EsportsLiveStream,i.PL.EsportsTournament,i.PL.EventSDCardElectionMIT1,i.PL.EventSDCardElectionMIT2,i.PL.EventSDCardElectionMIT3,i.PL.EventSDCardOscarsPrm,i.PL.EventSDCardShopping,i.PL.EventSDCardSportsMIT1,i.PL.EventSDCardSportsMIT2,i.PL.EventSDCardSportsMIT3,i.PL.EventSDCardWorldCup,i.PL.EventSDCardWorldCup2,i.PL.FinanceSpotlightHeroPrice,i.PL.FinanceSpotlightHeroMarket,i.PL.FinanceSpotlightHeroRadarGraph,i.PL.FinanceHeroCrypto,i.PL.FinanceHeroCurrencies,i.PL.FinanceHeroMarket,i.PL.FinanceHeroMarketChart,i.PL.FinanceHeroMovers,i.PL.FinanceHeroNews,i.PL.FinanceHeroSuggested,i.PL.FinanceHeroUpcomingEarnings,i.PL.FinanceHeroWatchlistIdeas,i.PL.FinanceHerowlsummary,i.PL.ForYouNotification,i.PL.GamingRecentlyPlayed,i.PL.GemCard,i.PL.GemRiverCard,i.PL.Gem_Article_RelatedArticles,i.PL.Gem_Finance_GetCharts,i.PL.Gem_GenAIContent_InsightSummary,i.PL.Gem_Media_Image,i.PL.Gem_Prompts,i.PL.GemGreeting,i.PL.GemInsight,i.PL.GemPrompts,i.PL.GemShopping,i.PL.HealthTipCard,i.PL.Horoscope,i.PL.TopCommentsCard,i.PL.HotListCard,i.PL.Inspiration,i.PL.InterestManagementCard,i.PL.LinkedInCard,i.PL.LocalNewsFeed,i.PL.MangaCard,i.PL.MangaCarousel,i.PL.Marketplace,i.PL.MarketplaceEvent,i.PL.MiniWidgets,i.PL.MiTHeroAction,i.PL.MiTHeroContent,i.PL.MiTHeroFollow,i.PL.MiTHeroSpotlight,i.PL.MoneyCrypto,i.PL.MoneyInfo,i.PL.MoneyMarketBrief,i.PL.MoneyPreWL,i.PL.MoneyTopicStripe,i.PL.MyBriefRiverCard,i.PL.OnThisDay,i.PL.OnThisDaySDCard,i.PL.LocalEventsSDCard,i.PL.PrismCarouselCard,i.PL.Qna,i.PL.RealEstateCard,i.PL.RealEstateCarousel,i.PL.Recipes,i.PL.RecommendedInterests,i.PL.RelatedNewsCard,i.PL.Rewards,i.PL.RewardsDailySet,i.PL.RichCalendarCard,i.PL.RiverGem,i.PL.SavedContent,i.PL.SectionHeader,i.PL.Shopping1688Carousel,i.PL.ShoppingBWMCard,i.PL.ShoppingBWMCarousel,i.PL.ShoppingBannerSdCard,i.PL.ShoppingCard,i.PL.ShoppingCarousel,i.PL.ShoppingCarousel2,i.PL.ShoppingProng2c,i.PL.ShoppingRiver,i.PL.ShoppingRiver1,i.PL.ShoppingRiver2,i.PL.ShoppingRiver3,i.PL.ShoppingTopSectionCard,i.PL.SportsHeroFre,i.PL.SportsHeroLeagueTodaysEvents,i.PL.SportsHeroMatch1SeasonStats,i.PL.SportsHeroMatch1Stats,i.PL.SportsHeroMatch2SeasonStats,i.PL.SportsHeroMatch2Stats,i.PL.SportsHeroMatch3SeasonStats,i.PL.SportsHeroMatch3Stats,i.PL.SportsHeroMatchStatistics,i.PL.SportsSpotlight2Match1,i.PL.SportsSpotlight2Match2,i.PL.SportsHeroNews,i.PL.SportsHeroOneVsManyEventResult,i.PL.SportsHeroOneVsOneEventResult,i.PL.SportsHeroSeasonStatistics,i.PL.SportsHeroStandingsRankings,i.PL.SportsHeroTeamStandingWithEvents,i.PL.SportsHeroTeamStandingWithMedals,i.PL.SportsHeroTeamStandings,i.PL.SportsHeroTeamVsTeam,i.PL.SportsHeroTeamVsTeamEventResult,i.PL.SportsHeroMatchCard,i.PL.SportsHeroVideo,i.PL.SportsMatch,i.PL.SportsOlympics,i.PL.SportsTopicStripe,i.PL.SportsStackCard,i.PL.PersonalFinanceStackCard,i.PL.StockQuote,i.PL.TabbedInfopaneCard,i.PL.TopSectionNews,i.PL.TopStories,i.PL.TopicFeed,i.PL.TrafficCameras,i.PL.TrafficCamerasWithSummary,i.PL.TrafficDelays,i.PL.TrafficIncidents,i.PL.TrafficInfo,i.PL.TrafficMap,i.PL.TrafficNews,i.PL.TrafficSummary,i.PL.TrafficTransit,i.PL.Transit,i.PL.TravelDestinationCard,i.PL.TravelDestinationCarouselCard,i.PL.TravelInspirationCard,i.PL.TravelTimes,i.PL.TravelTimesWithSummary,i.PL.Trending,i.PL.TrendingInTenMinutes,i.PL.TrendingSearchCard,i.PL.TrendingTopics,i.PL.Upsell,i.PL.UserInterestNTPProvider,i.PL.UserInterestProvider,i.PL.UserInterestTopic,i.PL.UserInterestTopicAndProvider,i.PL.VideoShoppingCarouselCard,i.PL.WatchVideoCard,i.PL.WeatherCurrent,i.PL.WeatherForecast,i.PL.WeatherHero,i.PL.WeatherMap,i.PL.WeatherSummary,i.PL.WidgetsNotificationsCard,i.PL.quizcard,i.PL.CatchUpStack,i.PL.CopilotCard,i.PL.PublisherSpotlightCard,i.PL.FollowedPublishersCard,i.PL.LittleKnownFactsCard,i.PL.TopStoriesRuby,i.PL.TrendingNowRuby])},60804:function(e,t,n){function i(e,t){const{audienceMode:n="",locale:i={},pageType:r=""}=t||{},o=i.content??i,{language:a,market:s}=o;return`wpo_data_ ${n}_${a}_${s}_${r}_${e}`}n.d(t,{_:function(){return i}})},5756:function(e,t,n){n.d(t,{k:function(){return s}});var i=n(15675),r=n(60804),o=n(98130),a=n(15598);const s=new class{constructor(){this.localStorage=new Map,this.wpoTreatmentTypeMap=new Map,this.isLoaded=new Map}getWpoTreatments(e){const t=(0,r._)(o.jG.AppType,o.jG.CurrentRequestTargetScope);if(!this.isLoaded.get(t)||e){this.wpoTreatmentTypeMap.set(t,new Map);const e=this.wpoTreatmentTypeMap.get(t);for(const t in i._h)if(isNaN(Number(t))){const n=i._h[t];e?.set(n,[])}const{treatments:n}=(0,a.$o)().getObject(t)||{};if(this.localStorage.set(t,n||[]),n)for(let t=0;t<n.length;t++){const i=n[t]?.type;i&&e?.get(i)?.push(n[t])}this.isLoaded.set(t,!0)}return this.localStorage.get(t)}getWpoTreatmentsWithType(e,t){const n=(0,r._)(o.jG.AppType,o.jG.CurrentRequestTargetScope);return this.isLoaded.get(n)&&!t||this.getWpoTreatments(t),this.wpoTreatmentTypeMap.get(n)?.get(e)}}},15675:function(e,t,n){var i;n.d(t,{_h:function(){return i}}),function(e){e.eventGleam="eventGleam",e.topSites="topsites",e.layoutPromotion="layoutPromotion",e.topSitesPromotion="topsitesPromotion",e.topsitesCollapse="topsitesCollapse",e.recommendedsitesCollapse="recommendedsitesCollapse",e.bellCoachMark="bellCoachMark",e.backupRegionStatus="backupRegionStatus",e.searchBoxCollapse="searchBoxCollapse",e.followedTopics="followedTopics",e.feedContextualFeedback="feedContextualFeedback",e.wpoSignal="wpoSignal",e.animationControl="animationControl",e.pinProngCoachMark="pinProngCoachMark",e.shorelineTrigger="shorelineTrigger",e.topNavPivotsPromotion="pivotNav",e.uxMessage="uxMessage",e.widget="widget",e.edgeSignal="edgeSignal"}(i||(i={}))},87622:function(e,t,n){n.d(t,{u:function(){return p}});var i=n(33940),r=n(5302),o=n(44132),a=n(52185),s=n(81489),c=n(99452),d=n(42833),u=n(77062);class l{constructor(){this.wpoNotificationPreviewData=new d.o,this.notificationMiniCardDismissed=!1,this.dismissNotificationMiniCard=e=>{this.notificationMiniCardDismissed=!0,o.M0?.addOrUpdateTmplProperty("NotificationMiniCardDismissed",e)}}static getInstance(){return a.Gq.get("__WpoPreview__",(()=>new l))}storeWpoNotificationPreviewData(e){if(!e)return;if(this.wpoNotificationPreviewData.wasSet())return;const t={};try{for(const n of e.previews?.simplePreviews||[]){for(const e of n.cards)for(const n of e.elements)switch(n.id){case"Icon":t.icon=n.url;break;case"Title":t.title=n.text;break;case"Tooltip":t.tooltip=n.text;break;case"Summary":t.summary=n.text;break;case"Detail":t.detail=n.text}n.previewType&&(t.previewType=n.previewType),n.url&&(t.url=n.url)}const n=Object.keys(t).length;if(0===n)return;if(n>0&&7!==n){const n="Invalid notification preview data.",i=`Parsed data: ${JSON.stringify(t)}. ReceivedPreviewData: ${JSON.stringify(e.previews?.simplePreviews).substring(0,32768)}.`;return void this.logAppError(r.clq,n,i)}this.wpoNotificationPreviewData.set(t),o.M0?.addOrUpdateTmplProperty("previewDataReady","1")}catch(t){const n=`Failed to parse notification preview data.Error:${t}`,i=`ReceivedPreviewData: ${JSON.stringify(e.previews?.simplePreviews).substring(0,32768)}`;this.logAppError(r.l0m,n,i)}}subscribe(e){this.wpoNotificationPreviewData.getResultAsync().then(e)}logAppError(e,t,n=""){o.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n,debugId:(0,u.N)()}})}}(0,i.gn)([c.LO],l.prototype,"notificationMiniCardDismissed",void 0);const p=(0,s.h)(l)},13329:function(e,t,n){n.d(t,{C5:function(){return A},SI:function(){return x}});var i=n(5302),r=n(242),o=n(33779),a=n(25487),s=n(26538),c=n(52185),d=n(21215),u=n(81489),l=n(80293),p=n(15598),h=n(98130),g=n(13218),f=n(15675),m=n(95603),y=n(22624),v=n(16495),S=n(523),w=n(52),b=n(44132),C=n(60804),T=n(82928),k=n(1041),P=n(77770);const A={Request:"Wpo.Treatments.Request",Response:"Wpo.Treatments.Response",StoreInit:"Wpo.Treatments.StoreInit",Parsed:"Wpo.Treatments.Parsed",Stored:"Wpo.Treatments.Stored"},I=c.Gq.get("WpoTreatmentFeedCacheKey",(()=>({FEED:"feed-ready",RAIL_FEED:"rail-feed-ready",RIVER_FEED:"river-feed-ready"}))),E="ssr-feed-data",R=Symbol();class M{constructor(){this.wpoOptimizationsReady=new Promise((e=>this.wpoOptimizationsResolver=e)),this.wpoFeedDataCache=new l.v("WpoFeedDataCache"),this.enableEarlyMainFeedRequest=!1,this.enableEarlyRiverFeedRequest=!1,this.savedPartResponses={feed:null,widgets:null,hero:null}}static getInstance(){return c.Gq.get("__WpoServiceClient__",(()=>new M))}onWPOFeedReady(e){this.wpoFeedDataCache.subscribe(E,e)}setSSRInitialFeedResponse(e){this.wpoFeedDataCache.set(E,e)}setSSRFirstSectionAdRequest(e){this.wpoFeedDataCache.set(R,e)}getSSRFirstSectionAdRequest(){return this.wpoFeedDataCache.get(R)}saveSSRPartResponse(e,t){this.savedPartResponses[t]=e;const n=this.savedPartResponses.widgets?.sections??this.savedPartResponses.hero?.sections??[],i=this.savedPartResponses.feed?.sections??[],r={...this.savedPartResponses.feed??this.savedPartResponses.widgets??this.savedPartResponses.hero,sections:[...n,...i]};this.setSSRInitialFeedResponse(r)}resetFeedDataCache(){this.wpoFeedDataCache.clear()}addWpoOptimizationDataToLocalStorage(e,t,n,o=!1,c=!1,u,l=!1,I,E){const R=(0,C._)(t,n);if(this.optimizationDataReceived)return;if(setTimeout((()=>{window.dispatchEvent(new CustomEvent("wpoOptimizationAdded"))}),0),!e||!e.optimizationItems)return b.M0.addOrUpdateTmplProperty("nopct","1"),void(u&&"wpo"===u.source&&this.removeWPOUserChoiceFromPSL());if(!e.optimizationItems.length)return this.logAppError(i.lGs,"WPO Optimization data is empty in feed response ",`isFocusedMode:${o}`),(0,p.$o)().removeItem(R),void(u&&"wpo"===u.source&&this.removeWPOUserChoiceFromPSL());const M=(0,r.Ou)();M[A.StoreInit]=Math.round(performance.now());try{const t=this.parseOptimizationItems(e.optimizationItems),n={treatments:t};M[A.Parsed]=Math.round(performance.now()),(0,p.$o)().setObject(R,n);const i=t.filter((e=>e?.type===f._h.eventGleam));b.M0.addOrUpdateTmplProperty("recEvt",i?.length?"1":"0"),M[A.Stored]=Math.round(performance.now()),this.optimizationDataReceived=!0;const r=t.filter((e=>(e?.type===f._h.topSites||e?.type===f._h.topsitesCollapse)&&e?.properties?.topSitesCollapsibleControlConfig));if(window.isSSREnabled&&null==u&&window.chrome.ntpSettingsPrivate.getPref(w._9.layout,(e=>{const t=r[0]?.properties?.topSitesCollapsibleControlConfig?.collapsibleControlIsDefaultCollapsed,n=r[0]?.properties?.topSitesCollapsibleControlConfig?.collapseForDefaultInformational,i=void 0===n||n&&2===e?.value;if(r?.length&&t&&i){const e={setting:m.nc.tscollapsed,source:"wpo",timestamp:(new Date).getTime(),value:m.QO.WPO_BEFORE_CLOSE};y.L.savePreferenceSetting(m.nc.tscollapsed,e),b.M0.addOrUpdateTmplProperty(m.nc.tscollapsed,`${e.value}|${e.source}|${e.timestamp}`)}})),"wpo"===u?.source&&0==r?.length&&this.removeWPOUserChoiceFromPSL(),window.isSSREnabled&&u?.value===m.QO.WPO_CLOSED&&r?.[0]?.properties?.topSitesCollapsibleControlConfig?.expandForAllLayout){const e={setting:m.nc.tscollapsed,source:"addWpoOptimizationDataToLocalStorage",timestamp:(new Date).getTime(),value:m.QO.WPO_BEFORE_OPEN};y.L.savePreferenceSetting(m.nc.tscollapsed,e),b.M0.addOrUpdateTmplProperty(m.nc.tscollapsed,`${e.value}|${e.source}|${e.timestamp}`),window.addEventListener("beforeunload",(()=>{(0,T.K0)(S.RL).onlyUpdateQuickLinksDisplaySetting(1)}),{once:!0})}if(c){const e=t.filter((e=>e?.type===f._h.layoutPromotion&&"PageContentLayout"===e?.properties?.layoutType));if(e?.length&&e[0]?.properties){if(b.M0.addOrUpdateTmplProperty("layoutpromoreceived",e[0].properties.knobIdx??"0"),e[0].properties.coachMarkId==a.Qw){const e=(0,T.K0)(S.RL);s.V.updateWPOLayoutPromotion.getActionSender(e).send(!0,"demotion"),b.M0.addOrUpdateTmplProperty("lydemotionCM","1")}if(e[0].properties.coachMarkId!==a.Qw)if(I){(0,T.K0)(S.RL).saveLayoutPromotionData(e)}else v.U.savePreferenceSetting(m.Xm.layoutPromotion,{...e[0].properties,clientReceivedTimestamp:(new Date).getTime(),usermuidWhenReceived:h.jG.UserId??"",requestIdWhenReceived:b.M0?.getRequestId?.()??"",isPrerenderWhenReceived:g.Al?.IsPrerender??!1})}else v.U.savePreferenceSetting(m.Xm.layoutPromotion,null)}const o=t.filter((e=>e?.type===f._h.widget));o?.length&&o[0]?.properties&&(b.M0.addOrUpdateTmplProperty("widgetPromotionReceived",o[0]?.properties?.showWidgets),l&&(0,k.ah)(o[0]?.properties?.showWidgets));let C=0;try{const e=g.Al?.ClientSettings?.browser?.version||"",t=parseInt(e,10);C=isNaN(t)?0:t}catch(e){C=0}let x;const L=C>=140;if(L){const e=t.filter((e=>e?.type===f._h.edgeSignal));e&&e.length&&e[0]?.properties&&e[0]?.properties?.nrtntpEngagementMostRecentTimestamp&&(x=e[0].properties.nrtntpEngagementMostRecentTimestamp)}const F=t.filter((e=>e?.type===f._h.wpoSignal)),D=F?.length&&F[0]?.properties?.feedsEngagement;if(D&&b.M0.addOrUpdateTmplProperty(F[0]?.properties?.feedsEngagement?.tmpl),E&&((0,d.N)()||!window.isSSREnabled)&&window?.chrome?.ntpSettingsPrivate?.recordFeedEngagement){const e=D?F[0]?.properties?.feedsEngagement?.withEngagement30d??!1:null;null===e&&x&&b.M0.addOrUpdateTmplProperty("nowposig-engage-time",x.toString()),null!==e&&(0,P.lr)().then((()=>{L?window.chrome.ntpSettingsPrivate.recordFeedEngagement(e,x):window.chrome.ntpSettingsPrivate.recordFeedEngagement(e)}))}}catch(t){const n=`Failed to store wpo response to LS.Error:${t}`,r=`WpoServiceResponse: ${JSON.stringify(e)}. key: ${R}`;this.logAppError(i.pOl,n,r)}}storeEarlyWpoFeedData(e,t){let n=I.FEED;"rail"===t?n=I.RAIL_FEED:"river"===t&&(n=I.RIVER_FEED),this.wpoFeedDataCache.set(n,e)}getEarlyWpoFeedData(e,t){return new Promise((n=>{let r,o=I.FEED;"rail"===t?o=I.RAIL_FEED:"river"===t&&(o=I.RIVER_FEED);const a=e=>{r&&clearTimeout(r),this.wpoFeedDataCache.unsubscribe(o,a),this.wpoFeedDataCache.delete(o),n(e)};e&&(r=setTimeout((()=>{this.wpoFeedDataCache.unsubscribe(o,a),this.wpoFeedDataCache.delete(o);const t=`Getting early main feed(key: ${o}) timeout in ${e}ms`;this.logAppError(i.$HJ,t),n(void 0)}),e)),this.wpoFeedDataCache.subscribe(o,a)}))}storeWpoOptimizationData(e){if(e)if(this.wpoOptimizations&&this.wpoOptimizations.length>0)this.wpoOptimizationsResolver();else{try{this.wpoOptimizations=this.parseOptimizationItems(e.pageContext&&e.pageContext.optimizationItems)}catch(t){const n=`Failed to store wpo response to Memory.Error:${t}`,r=`WpoServiceResponse: ${JSON.stringify(e)}.`;this.logAppError(i.yPw,n,r)}this.wpoOptimizationsResolver()}}getWpoOptimizationData(e){if(e){let t;const n=new Promise((n=>{t=setTimeout((()=>{b.M0.addOrUpdateTmplProperty("wpoPromoTimeout",e.toString()),n()}),e)}));return Promise.race([n,this.wpoOptimizationsReady]).then((()=>(clearTimeout(t),this.wpoOptimizations)))}return this.wpoOptimizationsReady.then((()=>this.wpoOptimizations))}tryToGetWpoOptimizationData(){return this.wpoOptimizations}logAppError(e,t,n=""){b.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n}})}parseOptimizationItems(e){if(!e||!e.length)return[];return e.map(((e,t)=>{if(e.type&&e.type.trim().length)if(Object.values(f._h).includes(e.type)||this.logAppError(i.OE6,`Unknown Type in WPO optimization items. Type: ${e.type}, Index: ${t}`),e.data){if(e.type&&e.data){let n;try{if(n=JSON.parse(e.data),!Object.entries(n).length)return void this.logAppError(i.OnJ,`Parsed WPO Optimization item but it is empty. Type: ${e.type}, Index: ${t}`)}catch(n){return void(0,o.OO)(n,i.X1V,`${n}. Type: ${e.type}, Index: ${t}`)}if(n)return{type:e.type,properties:n}}}else this.logAppError(i.uSS,`Unable to find data in WPO optimization item. Type: ${e.type}, Index: ${t}`);else this.logAppError(i._wC,`Type not found in WPO optimization items. Index: ${t}`)})).filter(Boolean)}isOptimizationDataReceived(){return this.optimizationDataReceived}removeWPOUserChoiceFromPSL(){y.L.deleteKeyValueFromPSL(m.nc.tscollapsed)}}const x=(0,u.h)(M)},64703:function(e,t,n){n.d(t,{di:function(){return h},mP:function(){return p},me:function(){return u},yo:function(){return l}});var i=n(98130),r=n(79070),o=n(86117);const a=`${(0,i.Yq)().StaticsUrl}latest/js/thirdparty/viewability/banner.5.8.16.js`,s=`${(0,i.Yq)().StaticsUrl}latest/js/thirdparty/ast/ast_ntp.1.10.25.js`,c=()=>"edgeChromium"===i.jG.AppType,d=()=>c()?s:"https://adsdk.microsoft.com/ast/ast.js",u=()=>c()?a:"";function l(){const e=d(),t=performance.getEntriesByName(e,"resource")[0];t&&((0,o.su)("TTAdSdk.ScriptRequest",t.fetchStart),(0,o.su)("TTAdSdk.ScriptLoaded",t.responseEnd))}async function p(){window.apntag=window.apntag||{anq:[]},window.apntag.anq=window.apntag.anq||[],await(0,r.v)({id:"ad-ast-sdk",src:d(),container:document.head,retryDelayMs:200,retryNumber:5})}function h(){return!!window.apntag?.setPageOpts}},42821:function(e,t,n){n.d(t,{$4b:function(){return Ge},$E0:function(){return Kt},$G9:function(){return a},$L5:function(){return Tt},$Te:function(){return y},A2v:function(){return Sn},AHg:function(){return Qe},AJn:function(){return tt},ARh:function(){return dn},AkU:function(){return Ie},AnW:function(){return z},B$P:function(){return gt},BBQ:function(){return un},BKZ:function(){return Bt},BLw:function(){return Lt},BaY:function(){return Pe},C9:function(){return Se},CBb:function(){return de},CJ8:function(){return At},CUV:function(){return bt},C_T:function(){return ne},Cq$:function(){return Hn},DFC:function(){return $n},DaL:function(){return mt},DmE:function(){return Ce},Dyn:function(){return r},E8U:function(){return $},EUr:function(){return Le},Emg:function(){return Qt},FPx:function(){return Kn},FdD:function(){return $e},GHK:function(){return It},Gpk:function(){return He},HMS:function(){return Et},I4v:function(){return lt},I8i:function(){return ie},IWO:function(){return Fn},IjR:function(){return vn},ImW:function(){return jn},J8m:function(){return b},K2B:function(){return on},K2J:function(){return s},L$O:function(){return gn},L0w:function(){return R},LSY:function(){return ot},LYB:function(){return sn},LZn:function(){return L},Lfd:function(){return it},LlZ:function(){return Ee},Lnu:function(){return Ln},LxX:function(){return ft},MC$:function(){return ce},MCd:function(){return ht},MMn:function(){return ve},NSG:function(){return Xe},NZV:function(){return re},O9t:function(){return N},OpL:function(){return B},Ors:function(){return se},P43:function(){return Vt},P9S:function(){return qt},PSA:function(){return Wn},PYS:function(){return xn},Pe0:function(){return Ze},PjS:function(){return Nt},Po_:function(){return G},QaR:function(){return Pt},RDz:function(){return pe},RqB:function(){return Un},TYU:function(){return h},UMZ:function(){return $t},Uqo:function(){return On},V$Y:function(){return x},V2F:function(){return v},VIf:function(){return T},VLq:function(){return rt},VOk:function(){return Jt},VQP:function(){return Mt},VT5:function(){return We},VUA:function(){return Bn},Vbi:function(){return D},VgI:function(){return le},Vx:function(){return d},W5z:function(){return p},WGF:function(){return l},WbD:function(){return j},Wc8:function(){return Rt},Wk_:function(){return Rn},Wkn:function(){return te},Wv_:function(){return we},XAs:function(){return W},XTr:function(){return Gn},Xq$:function(){return Ke},YOb:function(){return oe},YZK:function(){return Nn},Ymo:function(){return Ht},Ymu:function(){return Qn},Yqc:function(){return ye},Yri:function(){return Ct},Zrt:function(){return Xt},Ztp:function(){return Z},_1H:function(){return St},_9V:function(){return qn},_GS:function(){return Vn},aIG:function(){return Ye},aOD:function(){return ln},aih:function(){return Ot},alG:function(){return P},bEV:function(){return q},bK1:function(){return ee},bKD:function(){return xt},c19:function(){return qe},c2e:function(){return me},cVp:function(){return ke},eF0:function(){return E},f_1:function(){return wt},feq:function(){return w},feu:function(){return I},fh3:function(){return De},fy9:function(){return _},g0T:function(){return ut},g1L:function(){return m},ge8:function(){return pn},gi8:function(){return st},gqK:function(){return f},hNq:function(){return Fe},hoB:function(){return Dt},ht$:function(){return U},hwB:function(){return Ft},iQr:function(){return Ue},iZy:function(){return C},j$t:function(){return Me},jlV:function(){return Cn},jpO:function(){return Tn},jrV:function(){return V},jzL:function(){return Ne},k76:function(){return yn},kC_:function(){return Je},kIZ:function(){return dt},kNE:function(){return jt},kSZ:function(){return kt},kWS:function(){return ze},kxf:function(){return o},lIy:function(){return nn},lMZ:function(){return bn},lVi:function(){return en},liq:function(){return Ve},lkX:function(){return S},lqi:function(){return _t},lw:function(){return mn},mNb:function(){return En},mZ$:function(){return fe},mcM:function(){return ge},mqY:function(){return O},nDC:function(){return J},nE:function(){return fn},nLR:function(){return ue},nVf:function(){return nt},nWL:function(){return hn},nfo:function(){return vt},nj_:function(){return g},oSQ:function(){return wn},pJI:function(){return Oe},pT7:function(){return at},pZi:function(){return c},qJl:function(){return A},qdT:function(){return pt},qhP:function(){return zn},qhf:function(){return Ae},qjd:function(){return Re},rCh:function(){return i},rGN:function(){return Be},rZ0:function(){return he},r_m:function(){return Mn},rbg:function(){return An},rwA:function(){return be},s6h:function(){return M},sOX:function(){return _n},sT8:function(){return Q},syc:function(){return cn},t1q:function(){return Yt},ta8:function(){return tn},tjg:function(){return Gt},tuj:function(){return Pn},tve:function(){return zt},u7M:function(){return Wt},uOF:function(){return rn},uPz:function(){return ct},ung:function(){return an},vBh:function(){return _e},vUM:function(){return kn},vrc:function(){return Zt},w1o:function(){return K},wVD:function(){return xe},wpy:function(){return Ut},xFF:function(){return k},xI3:function(){return yt},xs0:function(){return Te},xzi:function(){return X},y7X:function(){return F},yXA:function(){return et},yZ_:function(){return H},y_G:function(){return ae},z50:function(){return Y},z73:function(){return Dn},zWr:function(){return je},zbD:function(){return u},zj4:function(){return In}});const i="var(--smtc-theme-color-foreground-primary-800)",r="var(--smtc-theme-color-foreground-secondary-550)",o="var(--smtc-theme-color-background-page-home-web-stop-0)",a="var(--smtc-theme-color-background-page-home-web-stop-1)",s="var(--smtc-theme-color-background-page-home-web-stop-2)",c="var(--smtc-stroke-divider-default)",d="var(--smtc-background-ctrl-on-image-lum-blend)",u="var(--smtc-background-ctrl-on-image-rest)",l="var(--smtc-background-ctrl-on-image-saturation-blend)",p="var(--smtc-background-card-on-primary-alt-rest)",h="var(--smtc-background-card-on-primary-default-rest)",g="var(--smtc-background-ctrl-active-brand-hover)",f="var(--smtc-background-ctrl-active-brand-pressed)",m="var(--smtc-background-ctrl-active-brand-rest)",y="var(--smtc-background-ctrl-brand-rest)",v="var(--smtc-background-ctrl-brand-pressed)",S="var(--smtc-background-ctrl-brand-disabled)",w="var(--smtc-background-ctrl-neutral-hover)",b="var(--smtc-background-ctrl-neutral-pressed)",C="var(--smtc-background-ctrl-neutral-rest)",T="var(--smtc-background-ctrl-neutral-disabled)",k="var(--smtc-background-ctrl-outline-rest)",P="var(--smtc-background-ctrl-outline-hover)",A="var(--smtc-background-ctrl-outline-pressed)",I="var(--smtc-background-ctrl-subtle-hover)",E="var(--smtc-background-ctrl-subtle-pressed)",R="var(--smtc-background-flyout-solid)",M="var(--smtc-background-layer-primary-solid)",x="var(--smtc-background-tint-neutral)",L="var(--smtc-ctrl-choice-base-background-rest)",F="var(--smtc-ctrl-choice-base-stroke-rest)",D="var(--smtc-ctrl-choice-base-stroke-disabled)",O="var(--smtc-ctrl-choice-switch-background-selected-rest)",_="var(--smtc-ctrl-choice-switch-background-rest)",N="var(--smtc-ctrl-choice-switch-thumb-background-selected-rest)",B="var(--smtc-ctrl-coachmark-foreground)",U="var(--smtc-ctrl-focus-inner-stroke)",$="var(--smtc-ctrl-focus-outer-stroke)",H="var(--smtc-ctrl-fab-background-rest)",W="var(--smtc-ctrl-fab-background-hover)",G="var(--smtc-ctrl-fab-background-pressed)",V="var(--smtc-ctrl-input-background-rest)",q="var(--smtc-ctrl-input-stroke-rest)",j="var(--smtc-ctrl-link-foreground-brand-rest)",z="var(--smtc-foreground-tint-neutral)",K="var(--smtc-foreground-ctrl-neutral-primary-disabled)",Q="var(--smtc-foreground-ctrl-neutral-primary-rest)",J="var(--smtc-foreground-ctrl-neutral-primary-pressed)",X="var(--smtc-foreground-ctrl-neutral-secondary-rest)",Y="var(--smtc-foreground-ctrl-neutral-secondary-hover)",Z="var(--smtc-foreground-ctrl-active-brand-pressed)",ee="var(--smtc-foreground-ctrl-on-brand-rest)",te="var(--smtc-foreground-ctrl-on-brand-hover)",ne="var(--smtc-foreground-ctrl-on-brand-pressed)",ie="var(--smtc-foreground-ctrl-on-brand-disabled)",re="var(--smtc-foreground-ctrl-on-image-rest)",oe="var(--smtc-foreground-ctrl-on-outline-rest)",ae="var(--smtc-foreground-ctrl-on-outline-hover)",se="var(--smtc-foreground-ctrl-on-outline-pressed)",ce="var(--smtc-foreground-ctrl-on-subtle-hover)",de="var(--smtc-foreground-ctrl-on-subtle-rest)",ue="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-x)",le="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-y)",pe="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-blur)",he="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-spread)",ge="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-color)",fe="var(--smtc-shadow-ctrl-button-neutral-rest-key-x)",me="var(--smtc-shadow-ctrl-button-neutral-rest-key-y)",ye="var(--smtc-shadow-ctrl-button-neutral-rest-key-blur)",ve="var(--smtc-shadow-ctrl-button-neutral-rest-key-color)",Se="var(--smtc-shadow-ctrl-fab-rest-key-color)",we="var(--smtc-shadow-ctrl-fab-rest-ambient-color)",be="var(--smtc-status-danger-background)",Ce="var(--smtc-status-danger-foreground)",Te="var(--smtc-status-informative-tint-foreground)",ke="var(--smtc-status-informative-tint-background)",Pe="var(--smtc-status-informative-tint-background-ad)",Ae="var(--smtc-stroke-ctrl-on-outline-hover)",Ie="var(--smtc-stroke-ctrl-on-outline-rest)",Ee="var(--smtc-corner-card-small-rest)",Re="var(--smtc-corner-card-rest)",Me="var(--smtc-corner-card-discover-rest)",xe="var(--smtc-corner-card-discover-stroke-rest)",Le="var(--smtc-corner-card-inarticle-card-rest)",Fe="var(--smtc-corner-card-inarticle-card-stroke-rest)",De="var(--smtc-corner-card-nested-small-outside)",Oe="var(--smtc-corner-card-discover-nested-outside)",_e="var(--smtc-corner-card-discover-nested-inside)",Ne="var(--smtc-corner-card-alternate-small-rest)",Be="var(--smtc-corner-card-media-rest)",Ue="var(--smtc-gap-between-content-medium)",$e="var(--smtc-text-style-default-header-weight)",He="var(--smtc-background-flyout-color-blend)",We="var(--smtc-background-flyout-lum-blend)",Ge="var(--smtc-background-flyout-saturation-blend)",Ve="var(--smtc-corner-favicon)",qe="var(--smtc-corner-image-in-card)",je="var(--smtc-corner-image-in-inarticle-card)",ze="var(--smtc-ctrl-badge-corner)",Ke="var(--smtc-ctrl-badge-gap)",Qe="var(--smtc-ctrl-badge-icon-size)",Je="var(--smtc-ctrl-badge-padding)",Xe="var(--smtc-ctrl-badge-size)",Ye="var(--smtc-ctrl-badge-sm-corner)",Ze="var(--smtc-ctrl-badge-sm-padding)",et="var(--smtc-ctrl-badge-stroke)",tt="var(--smtc-ctrl-badge-text-padding-top)",nt="var(--smtc-ctrl-choice-checkbox-corner)",it="var(--smtc-ctrl-choice-padding-horizontal)",rt="var(--smtc-ctrl-input-stroke-width-rest)",ot="var(--smtc-corner-ctrl-fab-rest)",at="var(--smtc-corner-ctrl-sm-rest)",st="var(--smtc-corner-ctrl-lg-rest)",ct="var(--smtc-corner-ctrl-rest)",dt="var(--smtc-corner-ctrl-sm-hover)",ut="var(--smtc-corner-flyout-rest)",lt="var(--smtc-gap-between-content-large)",pt="var(--smtc-gap-between-content-small)",ht="var(--smtc-gap-between-content-x-large)",gt="var(--smtc-gap-between-content-x-small)",ft="var(--smtc-gap-between-content-xx-small)",mt="var(--smtc-gap-between-content-xx-large)",yt="var(--smtc-gap-between-ctrl-lg-default)",vt="var(--smtc-gap-between-text-large)",St="var(--smtc-gap-inside-ctrl-default)",wt="var(--smtc-gap-inside-ctrl-to-label)",bt="var(--smtc-gap-inside-ctrl-to-secondary-icon)",Ct="var(--smtc-gap-inside-ctrl-lg-to-secondary-icon)",Tt="var(--smtc-material-acrylic-blur)",kt="var(--smtc-padding-card-body-default-horizontal-start)",Pt="var(--smtc-padding-card-default)",At="var(--smtc-padding-content-large)",It="var(--smtc-padding-content-medium)",Et="var(--smtc-padding-content-none)",Rt="var(--smtc-padding-content-small)",Mt="var(--smtc-padding-content-xSmall)",xt="var(--smtc-padding-content-xSmallNudge)",Lt="var(--smtc-padding-content-xxSmall)",Ft="var(--smtc-padding-ctrl-horizontal-default)",Dt="var(--smtc-padding-ctrl-sm-horizontal-default)",Ot="var(--smtc-padding-ctrl-sm-horizontal-icon-only)",_t="var(--smtc-padding-ctrl-lg-text-bottom)",Nt="var(--smtc-padding-ctrl-lg-text-side)",Bt="var(--smtc-padding-ctrl-lg-text-top)",Ut="var(--smtc-padding-ctrl-text-bottom)",$t="var(--smtc-padding-ctrl-text-side)",Ht="var(--smtc-padding-ctrl-text-top)",Wt="var(--smtc-padding-flyout-default)",Gt="var(--smtc-shadow-ctrl-fab-rest-key-x)",Vt="var(--smtc-shadow-ctrl-fab-rest-key-y)",qt="var(--smtc-shadow-ctrl-fab-rest-key-blur)",jt="var(--smtc-shadow-ctrl-fab-rest-ambient-y)",zt="var(--smtc-shadow-ctrl-fab-rest-ambient-blur)",Kt="var(--smtc-shadow-flyout-ambient-blur)",Qt="var(--smtc-shadow-flyout-ambient-color)",Jt="var(--smtc-shadow-flyout-ambient-x)",Xt="var(--smtc-shadow-flyout-ambient-y)",Yt="var(--smtc-shadow-flyout-key-blur)",Zt="var(--smtc-shadow-flyout-key-color)",en="var(--smtc-shadow-flyout-key-x)",tn="var(--smtc-shadow-flyout-key-y)",nn="var(--smtc-shadow-ctrl-brand-key-x)",rn="var(--smtc-shadow-ctrl-brand-key-y)",on="var(--smtc-shadow-ctrl-brand-key-blur)",an="var(--smtc-shadow-ctrl-brand-key-color)",sn="var(--smtc-size-ctrl-choice-base)",cn="var(--smtc-size-ctrl-default)",dn="var(--smtc-size-ctrl-lg-default)",un="var(--smtc-size-ctrl-sm-icon)",ln="var(--smtc-size-ctrl-sm-default)",pn="var(--smtc-stroke-width-ctrl-choice-rest)",hn="var(--smtc-stroke-width-ctrl-outline)",gn="var(--smtc-stroke-width-default)",fn="var(--smtc-text-global-body1-font-size)",mn="var(--smtc-text-global-body1-line-height)",yn="var(--smtc-text-global-body1-font-weight)",vn="var(--smtc-text-global-body2-font-size)",Sn="var(--smtc-text-global-body2-line-height)",wn="var(--smtc-text-global-body3-font-size)",bn="var(--smtc-text-global-body3-line-height)",Cn="var(--smtc-text-global-caption1-font-size)",Tn="var(--smtc-text-global-caption1-line-height)",kn="var(--smtc-text-global-title1-font-size)",Pn="var(--smtc-text-global-title1-line-height)",An="var(--smtc-text-global-title2-font-size)",In="var(--smtc-text-global-title2-line-height)",En="var(--smtc-text-ramp-item-body-font-size)",Rn="var(--smtc-text-ramp-item-body-line-height)",Mn="var(--smtc-text-global-subtitle1-font-size)",xn="var(--smtc-text-global-subtitle1-line-height)",Ln="var(--smtc-text-ramp-legal-font-size)",Fn="var(--smtc-text-ramp-legal-line-height)",Dn="var(--smtc-text-style-default-regular-font-family)",On="var(--smtc-style-default-regular-font-family)",_n="var(--smtc-style-default-header-font-family)",Nn="var(--smtc-text-style-default-regular-weight)",Bn="var(--smtc-gap-between-content-xxx-large)",Un="var(--smtc-text-global-body3-font-size)",$n="var(--smtc-text-global-body3-line-height)",Hn="var(--smtc-background-ctrl-brand-hover, var(--smtc-background-ctrl-brand-rest))",Wn="var(--smtc-corner-card-default-rest, var(--smtc-corner-card-rest))",Gn="var(--smtc-corner-ctrl-hover, var(--smtc-corner-ctrl-rest))",Vn="var(--smtc-corner-image-on-page, var(--smtc-corner-card-rest))",qn="var(--smtc-stroke-divider-subtle, var(--smtc-stroke-divider-default))",jn="var(--smtc-text-ramp-lg-item-body-font-size, var(--smtc-text-global-body2-font-size))",zn="var(--smtc-text-ramp-lg-item-body-line-height, var(--smtc-text-global-body2-line-height))",Kn="var(--smtc-text-style-default-header-font-family, var(--smtc-text-style-default-regular-font-family))",Qn=`${ue} ${le} ${pe} ${he} ${ge} inset, ${fe} ${me} ${ye} 0 ${ve}`},60821:function(e,t,n){n.d(t,{j:function(){return s}});var i=n(33940),r=n(99452),o=n(5302),a=n(31404);class s{constructor(e,t){this.props=e,this.cb=t}connectedCallback(e){const{source:t}=e;this.props.forEach((e=>{r.y$.getNotifier(t).subscribe(this,e)})),this.handleChange(t)}disconnectedCallback(e){const{source:t}=e;this.props.forEach((e=>{r.y$.getNotifier(t).unsubscribe(this,e)})),t.$fastController.removeStyles(this.styles)}handleChange(e){this.styles=this.cb(e),e.$fastController.addStyles(this.styles)}}(0,i.gn)([(0,a.Et)(o.a4J,"CssInjectionBehavior.Bind")],s.prototype,"connectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"CssInjectionBehavior.Unbind")],s.prototype,"disconnectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"CssInjectionBehaviorHandleChange")],s.prototype,"handleChange",null)},6523:function(e,t,n){n.d(t,{g:function(){return s}});var i=n(33940),r=n(99452),o=n(5302),a=n(31404);class s{constructor(e){this.propertyName=e}connectedCallback(e){r.y$.getNotifier(e.source).subscribe(this,this.propertyName)}disconnectedCallback(e){this.styles&&e.source.$fastController.removeStyles(this.styles)}handleChange(e,t){this.styles&&e.$fastController.removeStyles(this.styles),this.styles=e[t],e.$fastController.addStyles(this.styles)}}(0,i.gn)([(0,a.Et)(o.a4J,"PropertyBehavior.Bind")],s.prototype,"connectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"PropertyBehavior.Unbind")],s.prototype,"disconnectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"PropertyBehavior.HandleChange")],s.prototype,"handleChange",null)},10467:function(e,t,n){n.d(t,{A:function(){return o}});var i=n(28904),r=n(28951);function o(){const e="localhost.msn.com"===window.location.hostname,t=!!r.cX.getParamsWithItems(decodeURIComponent(window.location.search)).find((e=>"spalink"===e.key&&e.value.toLowerCase().endsWith("/debug")));if(e||t){const e=i.H.prototype.setAttribute;i.H.prototype.setAttribute=function(t,n){if("object"==typeof n||"function"==typeof n||"symbol"==typeof n){const e=`Attribute "${t}" was expected to be string. Received type: ${typeof n}. This is likely a mistake.`;console.warn(e,this);const i=document.createElement("div");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.right="0",i.style.bottom="0",i.style.backgroundColor="rgba(255, 0, 0, 0.5)",i.style.zIndex="9999",i.style.pointerEvents="none",i.innerText=e,this.shadowRoot?this.shadowRoot.appendChild(i):this.appendChild(i)}return e.call(this,t,n)}}}},97022:function(e,t,n){n.d(t,{b:function(){return a}});var i=n(99452),r=n(28904);const o={handleChange(e){e.$fastController.isConnected?e.connected&&e.connected():e.disconnected&&e.disconnected()}};function a(e){return class extends e{constructor(...e){super(...e),i.y$.getNotifier(this.$fastController).subscribe(o,"isConnected")}}}a(r.H)}}]);